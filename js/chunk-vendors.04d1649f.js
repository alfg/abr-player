(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"010f":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""};t["default"]=i,e.exports=t["default"]},"01f9":function(e,t,n){"use strict";var r=n("2d00"),i=n("5ca1"),o=n("2aba"),a=n("32e9"),s=n("84f2"),u=n("41a0"),l=n("7f20"),d=n("38fd"),c=n("2b4c")("iterator"),f=!([].keys&&"next"in[].keys()),h="@@iterator",p="keys",m="values",g=function(){return this};e.exports=function(e,t,n,y,v,_,E){u(n,t,y);var b,T,S,I=function(e){if(!f&&e in D)return D[e];switch(e){case p:return function(){return new n(this,e)};case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},w=t+" Iterator",x=v==m,A=!1,D=e.prototype,R=D[c]||D[h]||v&&D[v],M=R||I(v),C=v?x?I("entries"):M:void 0,N="Array"==t&&D.entries||R;if(N&&(S=d(N.call(new e)),S!==Object.prototype&&S.next&&(l(S,w,!0),r||"function"==typeof S[c]||a(S,c,g))),x&&R&&R.name!==m&&(A=!0,M=function(){return R.call(this)}),r&&!E||!f&&!A&&D[c]||a(D,c,M),s[t]=M,s[w]=g,v)if(b={values:x?M:I(m),keys:_?M:I(p),entries:C},E)for(T in b)T in D||o(D,T,b[T]);else i(i.P+i.F*(f||A),t,b);return b}},"028f":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("d0d2"),o=r(i),a=n("0ef4"),s=r(a),u=n("46c1"),l=r(u),d=n("d0a4"),c=r(d),f=n("6a2d"),h=r(f),p=5,m=500,g=3,y=1e3,v=8e3;function _(e){e=e||{};var t=e.protectionKeyController,n=e.protectionModel,r=e.eventBus,i=e.events,a=e.debug,u=e.BASE64,d=e.constants,f=[],_=void 0,E=void 0,b=void 0,T=void 0,S=void 0,I=void 0,w=void 0,x=void 0;function A(){E=a.getLogger(_),b=[],T=[],I="temporary",w=""}function D(){if(!r||!r.hasOwnProperty("on")||!t||!t.hasOwnProperty("getSupportedKeySystemsFromContentProtection"))throw new Error("Missing config parameter(s)")}function R(e){if(!e)throw new Error("mediaInfo can not be null or undefined");D(),r.on(i.INTERNAL_KEY_MESSAGE,W,this),r.on(i.INTERNAL_KEY_STATUS_CHANGED,z,this),T.push(e);var n=t.getSupportedKeySystemsFromContentProtection(e.contentProtection);n&&n.length>0&&G(n,!0)}function M(e){return t.getSupportedKeySystemsFromContentProtection(e)}function C(e,a){var s=o["default"].getPSSHForKeySystem(x,e),u=K(x);if(s){for(var l=n.getAllInitData(),d=0;d<l.length;d++)if(t.initDataEquals(s,l[d]))return void E.warn("DRM: Ignoring initData because we have already seen it!");try{n.createKeySession(s,u,q(x),a)}catch(f){r.trigger(i.KEY_SESSION_CREATED,{data:null,error:new h["default"](c["default"].KEY_SESSION_CREATED_ERROR_CODE,c["default"].KEY_SESSION_CREATED_ERROR_MESSAGE+f.message)})}}else e?n.createKeySession(e,u,q(x),a):r.trigger(i.KEY_SESSION_CREATED,{data:null,error:new h["default"](c["default"].KEY_SESSION_CREATED_ERROR_CODE,c["default"].KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+x.systemString+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function N(e,t){n.loadKeySession(e,t,q(x))}function P(e){n.removeKeySession(e)}function L(e){n.closeKeySession(e)}function O(e){n.setServerCertificate(e)}function F(e){e?(n.setMediaElement(e),r.on(i.NEED_KEY,$,this)):null===e&&(n.setMediaElement(e),r.off(i.NEED_KEY,$,this))}function B(e){I=e}function k(e){w=e}function U(e){S=e,t.setProtectionData(e)}function H(){n&&n.stop()}function j(){r.off(i.INTERNAL_KEY_MESSAGE,W,this),r.off(i.INTERNAL_KEY_STATUS_CHANGED,z,this),F(null),x=void 0,n&&(n.reset(),n=null),f.forEach(function(e){return clearTimeout(e)}),f=[],T=[]}function K(e){var t=null;if(e){var n=e.systemString;S&&(t=n in S?S[n]:null)}return t}function V(e){var t=K(e),n=[],r=[],i=t&&t.audioRobustness&&t.audioRobustness.length>0?t.audioRobustness:w,o=t&&t.videoRobustness&&t.videoRobustness.length>0?t.videoRobustness:w,a=q(e),u=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",c=t&&t.persistentState?t.persistentState:"temporary"===a?"optional":"required";return T.forEach(function(e){e.type===d.AUDIO?n.push(new s["default"](e.codec,i)):e.type===d.VIDEO&&r.push(new s["default"](e.codec,o))}),new l["default"](n,r,u,c,[a])}function q(e){var t=K(e),n=t&&t.sessionType?t.sessionType:I;return n}function G(e,o){var a=this,s=[],l=void 0;if(x){for(l=0;l<e.length;l++)if(x===e[l].ks){var d=function(){s.push({ks:e[l].ks,configs:[V(x)]});var t=function t(n){r.off(i.KEY_SYSTEM_ACCESS_COMPLETE,t,a),n.error?o||r.trigger(i.KEY_SYSTEM_SELECTED,{error:new h["default"](c["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,c["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+n.error)}):(E.info("DRM: KeySystem Access Granted"),r.trigger(i.KEY_SYSTEM_SELECTED,{data:n.data}),e[l].sessionId?N(e[l].sessionId,e[l].initData):e[l].initData&&C(e[l].initData,e[l].cdmData))};return r.on(i.KEY_SYSTEM_ACCESS_COMPLETE,t,a),n.requestKeySystemAccess(s),"break"}();if("break"===d)break}}else if(void 0===x){var f;(function(){x=null,b.push(e);for(var d=0;d<e.length;d++)s.push({ks:e[d].ks,configs:[V(e[d].ks)]});var p=void 0,m=function e(t){r.off(i.KEY_SYSTEM_ACCESS_COMPLETE,e,a),t.error?(x=void 0,r.off(i.INTERNAL_KEY_SYSTEM_SELECTED,f,a),o||r.trigger(i.KEY_SYSTEM_SELECTED,{data:null,error:new h["default"](c["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,c["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+t.error)})):(p=t.data,E.info("DRM: KeySystem Access Granted ("+p.keySystem.systemString+")!  Selecting key system..."),n.selectKeySystem(p))};f=function e(s){if(r.off(i.INTERNAL_KEY_SYSTEM_SELECTED,e,a),r.off(i.KEY_SYSTEM_ACCESS_COMPLETE,m,a),s.error)x=void 0,o||r.trigger(i.KEY_SYSTEM_SELECTED,{data:null,error:new h["default"](c["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,c["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+s.error)});else{if(!n)return;x=n.getKeySystem(),r.trigger(i.KEY_SYSTEM_SELECTED,{data:p});var d=K(x);d&&d.serverCertificate&&d.serverCertificate.length>0&&n.setServerCertificate(u.decodeArray(d.serverCertificate).buffer);for(var f=0;f<b.length;f++)for(l=0;l<b[f].length;l++)if(x===b[f][l].ks){if(t.isClearKey(x)&&d&&d.hasOwnProperty("clearkeys")){var g={kids:Object.keys(d.clearkeys)};b[f][l].initData=(new TextEncoder).encode(JSON.stringify(g))}b[f][l].sessionId?N(b[f][l].sessionId,b[f][l].initData):null!==b[f][l].initData&&C(b[f][l].initData,b[f][l].cdmData);break}}},r.on(i.INTERNAL_KEY_SYSTEM_SELECTED,f,a),r.on(i.KEY_SYSTEM_ACCESS_COMPLETE,m,a),n.requestKeySystemAccess(s)})()}else b.push(e)}function Y(e,t){r.trigger(i.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function z(e){e.error?r.trigger(i.KEY_STATUSES_CHANGED,{data:null,error:e.error}):E.debug("DRM: key status = "+e.status)}function W(e){E.debug("DRM: onKeyMessage");var a=e.data;r.trigger(i.KEY_MESSAGE,{data:a});var s=a.messageType?a.messageType:"license-request",u=a.message,l=a.sessionToken,d=K(x),f=x?x.systemString:null,p=t.getLicenseServer(x,d,s),m={sessionToken:l,messageType:s};if(u&&0!==u.byteLength){if(!p)return E.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+l.getSessionID()),void Y(m);if(t.isClearKey(x)){var y=t.processClearKeyLicenseRequest(x,d,u);if(y)return E.debug("DRM: ClearKey license request handled by application!"),Y(m),void n.updateKeySession(l,y)}var _=null;if(d&&d.serverURL){var b=d.serverURL;"string"===typeof b&&""!==b?_=b:"object"===typeof b&&b.hasOwnProperty(s)&&(_=b[s])}else d&&d.laURL&&""!==d.laURL?_=d.laURL:(_=x.getLicenseServerURLFromInitData(o["default"].getPSSHData(l.initData)),_||(_=e.data.laURL));if(_=p.getServerURLFromMessage(_,u,s),_){var T={},S=!1,I=function(e){if(e)for(var t in e)"authorization"===t.toLowerCase()&&(S=!0),T[t]=e[t]};d&&I(d.httpRequestHeaders),I(x.getRequestHeadersFromMessage(u)),d&&"boolean"==typeof d.withCredentials&&(S=d.withCredentials);var w=function(e,t,n,r){var i=e.response?p.getErrorResponse(e.response,n,r):"NONE";Y(t,new h["default"](c["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,c["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+n+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+i))},A=function(e){if(n)if(200===e.status){var t=p.getLicenseMessage(e.response,f,s);null!==t?(Y(m),n.updateKeySession(l,t)):w(e,m,f,s)}else w(e,m,f,s)},D=function(e){Y(m,new h["default"](c["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,c["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+f+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},R=function(e){Y(m,new h["default"](c["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,c["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+f+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},M=x.getLicenseRequestFromMessage(u),C=p.getHTTPMethod(s),N=p.getResponseType(f,s),P=d&&!isNaN(d.httpTimeout)?d.httpTimeout:v;X(_,T,C,N,S,M,g,P,A,D,R)}else Y(m,new h["default"](c["default"].MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,c["default"].MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}else Y(m,new h["default"](c["default"].MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,c["default"].MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function X(e,t,n,r,i,o,a,s,u,l,d){var c=new XMLHttpRequest;for(var f in c.open(n,e,!0),c.responseType=r,c.withCredentials=i,s>0&&(c.timeout=s),t)c.setRequestHeader(f,t[f]);var h=function(){a--,setTimeout(function(){X(e,t,n,r,i,o,a,s,u,l,d)},y)};c.onload=function(){200===this.status||a<=0?u(this):(E.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+a),h())},c.ontimeout=c.onerror=function(){a<=0?d(this):(E.warn("License request network request failed . Retrying it... Pending retries: "+a),h())},c.onabort=function(){l(this)},c.send(o)}function $(e,r){if(E.debug("DRM: onNeedKey"),"cenc"===e.key.initDataType)if(0===T.length&&(E.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),r="undefined"===typeof r?1:r+1,r<p))f.push(setTimeout(function(){$(e,r)},m));else{var i=e.key.initData;if(ArrayBuffer.isView(i)&&(i=i.buffer),x){var a=o["default"].getPSSHForKeySystem(x,i);if(a)for(var s=n.getAllInitData(),u=0;u<s.length;u++)if(t.initDataEquals(a,s[u]))return void E.warn("DRM: Ignoring initData because we have already seen it!")}E.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(i)));var l=t.getSupportedKeySystems(i,S);0!==l.length?G(l,!1):E.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")}else E.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType)}function Q(){return t?t.getKeySystems():[]}return _={initializeForMedia:R,createKeySession:C,loadKeySession:N,removeKeySession:P,closeKeySession:L,setServerCertificate:O,setMediaElement:F,setSessionType:B,setRobustnessLevel:k,setProtectionData:U,getSupportedKeySystemsFromContentProtection:M,getKeySystems:Q,stop:H,reset:j},A(),_}_.__dashjs_factory_name="ProtectionController",t["default"]=dashjs.FactoryMaker.getClassFactory(_),e.exports=t["default"]},"02f4":function(e,t,n){var r=n("4588"),i=n("be13");e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),l=s.length;return u<0||u>=l?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},"0390":function(e,t,n){"use strict";var r=n("02f4")(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},"04f2":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.time=null,this.droppedFrames=null};t["default"]=i,e.exports=t["default"]},"0502":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("5beb");function s(e,t){e=e||{};var n=e.timelineConverter,r=void 0;function i(e,r,i,o){var s=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,u=s.SegmentURL_asArray.length,l=[],d=void 0,c=void 0,f=void 0,h=void 0,p=void 0,m=void 0,g=void 0;for(g=e.startNumber,h=(0,a.decideSegmentListRangeForTemplate)(n,t,e,r,i,o),p=Math.max(h.start,0),m=Math.min(h.end,s.SegmentURL_asArray.length-1),d=p;d<=m;d++)f=s.SegmentURL_asArray[d],c=(0,a.getIndexBasedSegment)(n,t,e,d),c.replacementTime=(g+d-1)*e.segmentDuration,c.media=f.media?f.media:"",c.mediaRange=f.mediaRange,c.index=f.index,c.indexRange=f.indexRange,l.push(c),c=null;return e.availableSegmentsNumber=u,l}return r={getSegments:i},r}s.__dashjs_factory_name="ListSegmentsGetter";var u=o["default"].getClassFactory(s);t["default"]=u,e.exports=t["default"]},"0637":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("6a2d"),o=r(i),a=n("7865"),s=r(a),u=n("0757"),l=n("6c57"),d=r(l),c=n("8a43"),f=r(c),h=n("1d48"),p=r(h),m=n("467b"),g=r(m),y=n("e172"),v=r(y);function _(e){e=e||{};var t="urn:mpeg:dash:resolve-to-zero:2013",n=this.context,r=(0,f["default"])(n).getInstance(),i=(0,s["default"])(n).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),a=void 0;function l(e,n,a){var s=function(t,i){n.resolved=!0,n.resolvedContent=t||null,r.trigger(p["default"].XLINK_ELEMENT_LOADED,{element:n,resolveObject:a,error:t||i?null:new o["default"](v["default"].XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,v["default"].XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+e)})};if(e===t)s(null,!0);else{var l=new d["default"](e,u.HTTPRequest.XLINK_EXPANSION_TYPE);i.load({request:l,success:function(e){s(e)},error:function(){s(null)}})}}function c(){i&&(i.abort(),i=null)}return a={load:l,reset:c},a}_.__dashjs_factory_name="XlinkLoader",t["default"]=g["default"].getClassFactory(_),e.exports=t["default"]},"0712":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("0637"),o=r(i),a=n("8a43"),s=r(a),u=n("1d48"),l=r(u),d=n("467b"),c=r(d),f=n("8821"),h=r(f),p=n("4e7a"),m=r(p),g=n("e09e"),y=r(g),v="onLoad",_="onActuate",E="urn:mpeg:dash:resolve-to-zero:2013";function b(e){e=e||{};var t=this.context,n=(0,s["default"])(t).getInstance(),r=(0,m["default"])(t).getInstance(),i=void 0,a=void 0,u=void 0,d=void 0,c=void 0,f=void 0;function p(){n.on(l["default"].XLINK_ELEMENT_LOADED,w,i),f=(0,o["default"])(t).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier})}function g(e){e&&(a=e)}function b(e){e&&(u=e)}function T(e){var t=void 0;c=new h["default"]({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:a}),d=e,t=A(d.Period_asArray,d,y["default"].PERIOD,v),I(t,y["default"].PERIOD,v)}function S(){n.off(l["default"].XLINK_ELEMENT_LOADED,w,i),f&&(f.reset(),f=null)}function I(e,t,n){var i={},o=void 0,a=void 0;i.elements=e,i.type=t,i.resolveType=n,0===i.elements.length&&x(i);for(var s=0;s<i.elements.length;s++)o=i.elements[s],a=r.isHTTPURL(o.url)?o.url:o.originalContent.BaseURL+o.url,f.load(a,o,i)}function w(e){var t=void 0,n=void 0,r="<response>",i="</response>",o="";if(t=e.element,n=e.resolveObject,t.resolvedContent){var a=0;0===t.resolvedContent.indexOf("<?xml")&&(a=t.resolvedContent.indexOf("?>")+2),o=t.resolvedContent.substr(0,a)+r+t.resolvedContent.substr(a)+i,t.resolvedContent=c.xml_str2json(o)}M(n)&&x(n)}function x(e){var t=[],r=void 0,i=void 0;if(D(e),e.resolveType===_&&n.trigger(l["default"].XLINK_READY,{manifest:d}),e.resolveType===v)switch(e.type){case y["default"].PERIOD:for(r=0;r<d[y["default"].PERIOD+"_asArray"].length;r++)i=d[y["default"].PERIOD+"_asArray"][r],i.hasOwnProperty(y["default"].ADAPTATION_SET+"_asArray")&&(t=t.concat(A(i[y["default"].ADAPTATION_SET+"_asArray"],i,y["default"].ADAPTATION_SET,v))),i.hasOwnProperty(y["default"].EVENT_STREAM+"_asArray")&&(t=t.concat(A(i[y["default"].EVENT_STREAM+"_asArray"],i,y["default"].EVENT_STREAM,v)));I(t,y["default"].ADAPTATION_SET,v);break;case y["default"].ADAPTATION_SET:n.trigger(l["default"].XLINK_READY,{manifest:d});break}}function A(e,t,n,r){var i=[],o=void 0,a=void 0,s=void 0;for(a=e.length-1;a>=0;a--)o=e[a],o.hasOwnProperty("xlink:href")&&o["xlink:href"]===E&&e.splice(a,1);for(a=0;a<e.length;a++)o=e[a],o.hasOwnProperty("xlink:href")&&o.hasOwnProperty("xlink:actuate")&&o["xlink:actuate"]===r&&(s=R(o["xlink:href"],t,n,a,r,o),i.push(s));return i}function D(e){var t=[],n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0;for(o=e.elements.length-1;o>=0;o--){if(n=e.elements[o],r=n.type+"_asArray",!n.resolvedContent||C())delete n.originalContent["xlink:actuate"],delete n.originalContent["xlink:href"],t.push(n.originalContent);else if(n.resolvedContent)for(a=0;a<n.resolvedContent[r].length;a++)i=n.resolvedContent[r][a],t.push(i);for(n.parentElement[r].splice(n.index,1),s=0;s<t.length;s++)n.parentElement[r].splice(n.index+s,0,t[s]);t=[]}e.elements.length>0&&u.run(d)}function R(e,t,n,r,i,o){return{url:e,parentElement:t,type:n,index:r,resolveType:i,originalContent:o,resolvedContent:null,resolved:!1}}function M(e){var t=void 0,n=void 0;for(t=0;t<e.elements.length;t++)if(n=e.elements[t],!1===n.resolved)return!1;return!0}function C(){return!1}return i={resolveManifestOnLoad:T,setMatchers:g,setIron:b,reset:S},p(),i}b.__dashjs_factory_name="XlinkController",t["default"]=c["default"].getClassFactory(b),e.exports=t["default"]},"0757":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null},o=function e(){r(this,e),this.s=null,this.d=null,this.b=[]};i.GET="GET",i.HEAD="HEAD",i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.OTHER_TYPE="other",t.HTTPRequest=i,t.HTTPRequestTrace=o},"07e3":function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},"086a":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("7091"),o=r(i),a=n("de72"),s=r(a),u=n("f785"),l=r(u),d=n("ace9"),c=r(d),f=n("3aad"),h=r(f),p=n("64c7"),m=r(p),g=n("467b"),y=r(g),v=n("9485"),_=r(v),E="qualitySwitchRules",b="abandonFragmentRules";function T(e){e=e||{};var t=this.context,n=e.mediaPlayerModel,r=e.metricsModel,i=e.dashMetrics,a=void 0,u=void 0,d=void 0;function f(){u=[],d=[],n.getUseDefaultABRRules()&&(u.push((0,m["default"])(t).create({metricsModel:r,dashMetrics:i,mediaPlayerModel:n})),u.push((0,o["default"])(t).create({metricsModel:r,dashMetrics:i})),u.push((0,s["default"])(t).create({metricsModel:r,dashMetrics:i})),u.push((0,h["default"])(t).create()),u.push((0,c["default"])(t).create()),d.push((0,l["default"])(t).create({metricsModel:r,dashMetrics:i,mediaPlayerModel:n})));var e=n.getABRCustomRules();e.forEach(function(e){e.type===E&&u.push(e.rule(t).create()),e.type===b&&d.push(e.rule(t).create())})}function p(e){return e.filter(function(e){return e.quality>_["default"].NO_CHANGE})}function g(e){var n={},r=void 0,i=void 0,o=void 0,a=void 0,s=void 0;if(0!==e.length){for(n[_["default"].PRIORITY.STRONG]=_["default"].NO_CHANGE,n[_["default"].PRIORITY.WEAK]=_["default"].NO_CHANGE,n[_["default"].PRIORITY.DEFAULT]=_["default"].NO_CHANGE,r=0,i=e.length;r<i;r+=1)o=e[r],o.quality!==_["default"].NO_CHANGE&&(n[o.priority]=n[o.priority]>_["default"].NO_CHANGE?Math.min(n[o.priority],o.quality):o.quality);return n[_["default"].PRIORITY.WEAK]!==_["default"].NO_CHANGE&&(a=n[_["default"].PRIORITY.WEAK]),n[_["default"].PRIORITY.DEFAULT]!==_["default"].NO_CHANGE&&(a=n[_["default"].PRIORITY.DEFAULT]),n[_["default"].PRIORITY.STRONG]!==_["default"].NO_CHANGE&&(a=n[_["default"].PRIORITY.STRONG]),a!==_["default"].NO_CHANGE&&(s=a),(0,_["default"])(t).create(s)}}function y(e){var n=u.map(function(t){return t.getMaxIndex(e)}),r=p(n),i=g(r);return i||(0,_["default"])(t).create()}function v(e){var n=d.map(function(t){return t.shouldAbandon(e)}),r=p(n),i=g(r);return i||(0,_["default"])(t).create()}function T(){[u,d].forEach(function(e){e&&e.length&&e.forEach(function(e){return e.reset&&e.reset()})}),u=[],d=[]}return a={initialize:f,reset:T,getMaxQuality:y,shouldAbandonFragment:v},a}T.__dashjs_factory_name="ABRRulesCollection";var S=y["default"].getClassFactory(T);S.QUALITY_SWITCH_RULES=E,S.ABANDON_FRAGMENT_RULES=b,y["default"].updateSingletonFactory(T.__dashjs_factory_name,S),t["default"]=S,e.exports=t["default"]},"090c":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("8d23"),o=n("7b5a"),a=r(o),s=n("3258"),u=r(s),l=n("fa14"),d=r(l),c=n("589e"),f=r(c);dashjs.Protection=u["default"],dashjs.MetricsReporting=a["default"],dashjs.MediaPlayerFactory=d["default"],dashjs.Debug=f["default"],t["default"]=dashjs,t.MediaPlayer=i.MediaPlayer,t.Protection=u["default"],t.MetricsReporting=a["default"],t.MediaPlayerFactory=d["default"],t.Debug=f["default"]},"0960":function(e,t,n){e.exports=n("b19a")},"097d":function(e,t,n){"use strict";var r=n("5ca1"),i=n("8378"),o=n("7726"),a=n("ebd6"),s=n("bcaa");r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},"09b9":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){i(this,e)}return r(e,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}]),e}();t["default"]=o,e.exports=t["default"]},"0a49":function(e,t,n){var r=n("9b43"),i=n("626a"),o=n("4bf8"),a=n("9def"),s=n("cd1c");e.exports=function(e,t){var n=1==e,u=2==e,l=3==e,d=4==e,c=6==e,f=5==e||c,h=t||s;return function(t,s,p){for(var m,g,y=o(t),v=i(y),_=r(s,p,3),E=a(v.length),b=0,T=n?h(t,E):u?h(t,0):void 0;E>b;b++)if((f||b in v)&&(m=v[b],g=_(m,b,y),e))if(n)T[b]=g;else if(g)switch(e){case 3:return!0;case 5:return m;case 6:return b;case 2:T.push(m)}else if(d)return!1;return c?-1:l||d?d:T}}},"0a90":function(e,t,n){var r=n("63b6"),i=n("10ff");r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},"0b20":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};t["default"]=i,e.exports=t["default"]},"0b64":function(e,t,n){var r=n("f772"),i=n("9003"),o=n("5168")("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&(t=t[o],null===t&&(t=void 0))),void 0===t?Array:t}},"0bfb":function(e,t,n){"use strict";var r=n("cb7c");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"0c93":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("b048"),u=i(s),l=n("e09e"),d=i(l),c=function(e){function t(){o(this,t);var e=[d["default"].SEGMENT_BASE,d["default"].SEGMENT_TEMPLATE,d["default"].SEGMENT_LIST];r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,d["default"].PERIOD,e,[new u["default"](d["default"].ADAPTATION_SET,e,[new u["default"](d["default"].REPRESENTATION,e)])])}return a(t,e),t}(u["default"]);t["default"]=c,e.exports=t["default"]},"0d27":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("32da"),o=r(i),a=n("ba50"),s=r(a),u=n("a512"),l=r(u),d=n("6cb2"),c=r(d);function f(e){e=e||{};var t=void 0,n=e.debug,r=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,i=this.context,a={BufferLevel:o["default"],DVBErrors:s["default"],HttpList:l["default"],PlayList:c["default"],RepSwitchList:c["default"],TcpList:c["default"]};function u(t,o){var s,u=t.match(r);if(u){try{s=a[u[1]](i).create({eventBus:e.eventBus,metricsConstants:e.metricsConstants}),s.initialize(u[1],o,u[3],u[5])}catch(l){s=null,n.error("MetricsHandlerFactory: Could not create handler for type "+u[1]+" with args "+u[3]+", "+u[5]+" ("+l.message+")")}return s}}function d(e,t){a[e]=t}function f(e){delete a[e]}return t={create:u,register:d,unregister:f},t}f.__dashjs_factory_name="MetricsHandlerFactory",t["default"]=dashjs.FactoryMaker.getSingletonFactory(f),e.exports=t["default"]},"0d2b":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("d0d2"),o=r(i),a=n("7b70"),s=r(a),u="9a04f079-9840-4286-ab92-e65be0885f95",l=s["default"].PLAYREADY_KEYSTEM_STRING,d="urn:uuid:"+u,c='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>',f=void 0;function h(e){e=e||{};var t=void 0,n="utf16",r=e.BASE64;function i(){if(!r||!r.hasOwnProperty("decodeArray")||!r.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}function a(e){var t=void 0,r=void 0,i={},o=new DOMParser,a="utf16"===n?new Uint16Array(e):new Uint8Array(e);t=String.fromCharCode.apply(null,a),r=o.parseFromString(t,"application/xml");for(var s=r.getElementsByTagName("name"),u=r.getElementsByTagName("value"),l=0;l<s.length;l++)i[s[l].childNodes[0].nodeValue]=u[l].childNodes[0].nodeValue;return i.hasOwnProperty("Content")&&(i["Content-Type"]=i.Content,delete i.Content),i.hasOwnProperty("Content-Type")||(i["Content-Type"]="text/xml; charset="+n),i}function s(e){var t=null,o=new DOMParser,a="utf16"===n?new Uint16Array(e):new Uint8Array(e);i();var s=String.fromCharCode.apply(null,a),u=o.parseFromString(s,"application/xml");if(u.getElementsByTagName("Challenge")[0]){var l=u.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;l&&(t=r.decode(l))}else if(u.getElementsByTagName("parsererror").length)return e;return t}function h(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),r=6,i=new DOMParser,o=0;o<n;o++){var a=t.getUint16(r,!0);r+=2;var s=t.getUint16(r,!0);if(r+=2,1===a){var u=e.slice(r,r+s),l=String.fromCharCode.apply(null,new Uint16Array(u)),d=i.parseFromString(l,"application/xml");if(d.getElementsByTagName("LA_URL")[0]){var c=d.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(c)return c}if(d.getElementsByTagName("LUI_URL")[0]){var f=d.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(f)return f}}else r+=s}return null}function p(e){var t=new Uint8Array([112,115,115,104,0,0,0,0]),n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),a=0,s=null,u=void 0,l=void 0,d=void 0,c=void 0,f=void 0;if(i(),"pssh"in e)return o["default"].parseInitDataFromContentProtection(e,r);if("pro"in e)s=r.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;s=r.decodeArray(e.prheader.__text)}return u=s.length,l=4+t.length+n.length+4+u,d=new ArrayBuffer(l),c=new Uint8Array(d),f=new DataView(d),f.setUint32(a,l),a+=4,c.set(t,a),a+=t.length,c.set(n,a),a+=n.length,f.setUint32(a,u),a+=4,c.set(s,a),a+=u,c.buffer}function m(e){if("utf8"!==e&&"utf16"!==e)throw new Error("Illegal PlayReady message format! -- "+e);n=e}function g(e){e&&(f=e)}function y(){var e=void 0,t=void 0,n=void 0,o=void 0;if(i(),f&&f.cdmData){for(e=[],o=0;o<f.cdmData.length;++o)e.push(f.cdmData.charCodeAt(o)),e.push(0);for(e=String.fromCharCode.apply(null,e),e=r.encode(e),t=c.replace("%CUSTOMDATA%",e),n=[],o=0;o<t.length;++o)n.push(t.charCodeAt(o)),n.push(0);return new Uint8Array(n).buffer}return null}function v(e){return f&&f.sessionId?f.sessionId:e&&e.sessionId?e.sessionId:null}return t={uuid:u,schemeIdURI:d,systemString:l,getInitData:p,getRequestHeadersFromMessage:a,getLicenseRequestFromMessage:s,getLicenseServerURLFromInitData:h,getCDMData:y,getSessionId:v,setPlayReadyMessageFormat:m,init:g},t}h.__dashjs_factory_name="KeySystemPlayReady",t["default"]=dashjs.FactoryMaker.getSingletonFactory(h),e.exports=t["default"]},"0d58":function(e,t,n){var r=n("ce10"),i=n("e11e");e.exports=Object.keys||function(e){return r(e,i)}},"0eda":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(){var e={};function t(t){var n=t.streamId,r=t.representationId;e[n]=e[n]||{},e[n][r]=t}function n(t,n){return e&&e[t]&&e[t][n]?e[t][n]:null}function r(){e={}}var i={save:t,extract:n,reset:r};return i}a.__dashjs_factory_name="InitCache",t["default"]=o["default"].getSingletonFactory(a),e.exports=t["default"]},"0ef4":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n){r(this,e),this.contentType=t,this.robustness=n};t["default"]=i,e.exports=t["default"]},"0f0c":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("467b"),s=r(a);function u(e){e=e||{};var t=20,n=3,r=4,i=4,a=1.3,s=1.3,u=8,l=3,d=2,c=1,f=e.mediaPlayerModel,h=void 0,p=void 0,m=void 0,g=void 0,y=void 0;function v(){y={throughputHalfLife:{fast:l,slow:u},latencyHalfLife:{fast:c,slow:d}},C()}function _(e,t,n){return e===o["default"].VIDEO?n<f.getCacheLoadThresholdForType(o["default"].VIDEO):e===o["default"].AUDIO?n<f.getCacheLoadThresholdForType(o["default"].AUDIO):void 0}function E(e,n,r){if(n.trace&&n.trace.length){var i=n.tresponse.getTime()-n.trequest.getTime()||1,o=n._tfinish.getTime()-n.tresponse.getTime()||1,a=n.trace.reduce(function(e,t){return e+t.b[0]},0),s=void 0;s=f.getLowLatencyEnabled()?n.trace.reduce(function(e,t){return e+t.d},0):r?o:i+o;var u=Math.round(8*a/s);if(R(e),_(e,i,o)){if(h[e].length>0&&!h[e].hasCachedEntries)return;h[e].hasCachedEntries=!0}else h[e]&&h[e].hasCachedEntries&&M(e);h[e].push(u),h[e].length>t&&h[e].shift(),p[e].push(i),p[e].length>t&&p[e].shift(),b(m[e],u,.001*o,y.throughputHalfLife),b(g[e],i,1,y.latencyHalfLife)}}function b(e,t,n,r){var i=Math.pow(.5,n/r.fast);e.fastEstimate=(1-i)*t+i*e.fastEstimate;var o=Math.pow(.5,n/r.slow);e.slowEstimate=(1-o)*t+o*e.slowEstimate,e.totalWeight+=n}function T(e,t,o){var u=void 0,l=void 0;if(e?(u=h[t],l=o?n:r):(u=p[t],l=i),u){if(l>=u.length)l=u.length;else if(e)for(var d=1;d<l;++d){var c=u[d]/u[d-1];if((c>=s||c<=1/a)&&(l+=1,l===u.length))break}}else l=0;return l}function S(e,t,n){return f.getMovingAverageMethod()!==o["default"].MOVING_AVERAGE_SLIDING_WINDOW?w(e,t):I(e,t,n)}function I(e,t,n){var r=T(e,t,n),i=e?h:p,o=i[t];return 0!==r&&o&&0!==o.length?(o=o.slice(-r),o.reduce(function(e,t){return e+t})/o.length):NaN}function w(e,t){var n=e?y.throughputHalfLife:y.latencyHalfLife,r=e?m[t]:g[t];if(!r||r.totalWeight<=0)return NaN;var i=r.fastEstimate/(1-Math.pow(.5,r.totalWeight/n.fast)),o=r.slowEstimate/(1-Math.pow(.5,r.totalWeight/n.slow));return e?Math.min(i,o):Math.max(i,o)}function x(e,t){return S(!0,e,t)}function A(e,t){var n=x(e,t);return isNaN(n)||(n*=f.getBandwidthSafetyFactor()),n}function D(e){return S(!1,e)}function R(e){h[e]=h[e]||[],p[e]=p[e]||[],m[e]=m[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},g[e]=g[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function M(e){delete h[e],delete p[e],delete m[e],delete g[e],R(e)}function C(){h={},p={},m={},g={}}var N={push:E,getAverageThroughput:x,getSafeAverageThroughput:A,getAverageLatency:D,reset:C};return v(),N}u.__dashjs_factory_name="ThroughputHistory",t["default"]=s["default"].getClassFactory(u),e.exports=t["default"]},"0fc9":function(e,t,n){var r=n("3a38"),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},1021:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(e){e=e||{};var t=void 0,n=e.abrController,r=e.switchHistory,i=e.droppedFramesHistory,o=e.currentRequest,a=e.useBufferOccupancyABR,s=e.streamProcessor?e.streamProcessor.getScheduleController():null,u=e.streamProcessor?e.streamProcessor.getRepresentationInfo():null;function l(){var e=c();return e?e.type:null}function d(){var e=c();return e?e.streamInfo:null}function c(){return u?u.mediaInfo:null}function f(){return u}function h(){return s}function p(){return n}function m(){return r}function g(){return i}function y(){return o}function v(){return a}return t={getMediaType:l,getMediaInfo:c,getDroppedFramesHistory:g,getCurrentRequest:y,getSwitchHistory:m,getStreamInfo:d,getScheduleController:h,getAbrController:p,getRepresentationInfo:f,useBufferOccupancyABR:v},t}a.__dashjs_factory_name="RulesContext",t["default"]=o["default"].getClassFactory(a),e.exports=t["default"]},"10fb":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.metrics="",this.Range=[],this.Reporting=[]};t["default"]=i,e.exports=t["default"]},"10ff":function(e,t,n){var r=n("e53d").parseFloat,i=n("a1ce").trim;e.exports=1/r(n("e692")+"-0")!==-1/0?function(e){var t=i(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},1169:function(e,t,n){var r=n("2d95");e.exports=Array.isArray||function(e){return"Array"==r(e)}},1173:function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},"120d":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(e){e=e||{};var t=e.requestModifier,n=void 0;function r(e){var n=new Date,r=e.request,i=new XMLHttpRequest;i.open(e.method,e.url,!0),r.responseType&&(i.responseType=r.responseType),r.range&&i.setRequestHeader("Range","bytes="+r.range),r.requestStartDate||(r.requestStartDate=n),t&&(i=t.modifyRequestHeader(i)),i.withCredentials=e.withCredentials,i.onload=e.onload,i.onloadend=e.onend,i.onerror=e.onerror,i.onprogress=e.progress,i.onabort=e.onabort,i.send(),e.response=i}function i(e){var t=e.response;t.onloadend=t.onerror=t.onprogress=void 0,t.abort()}return n={load:r,abort:i},n}a.__dashjs_factory_name="XHRLoader";var s=o["default"].getClassFactory(a);t["default"]=s,e.exports=t["default"]},"12fe":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("8a43"),s=r(a),u=n("1d48"),l=r(u),d=n("467b"),c=r(d),f=n("0eda"),h=r(f),p=n("2b8a"),m=r(p),g=n("5571"),y=r(g),v=n("6a2d"),_=r(v),E=n("e172"),b=r(E),T="NotFragmentedTextBufferController";function S(e){e=e||{};var t=this.context,n=(0,s["default"])(t).getInstance(),r=(0,y["default"])(t).getInstance(),i=e.errHandler,a=e.type,u=e.mimeType,d=e.streamProcessor,c=void 0,f=void 0,p=void 0,g=void 0,v=void 0,E=void 0;function S(){p=!1,g=null,f=!1,n.on(l["default"].DATA_UPDATE_COMPLETED,k,c),n.on(l["default"].INIT_FRAGMENT_LOADED,U,c)}function I(){return T}function w(e){R(e),E=(0,h["default"])(t).getInstance()}function x(e){try{if(v=(0,m["default"])(t).create(g,e),!p){var n=v.getBuffer();n.hasOwnProperty(o["default"].INITIALIZE)&&n.initialize(u,d),p=!0}return v}catch(s){if(e.isText||-1!==e.codec.indexOf('codecs="stpp')||-1!==e.codec.indexOf('codecs="wvtt'))try{v=r.getTextSourceBuffer()}catch(s){i.mediaSourceError("Error creating "+a+" source buffer."),i.error(new _["default"](b["default"].MEDIASOURCE_TYPE_UNSUPPORTED_CODE,b["default"].MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+a+" : "+s.message))}else i.mediaSourceError("Error creating "+a+" source buffer."),i.error(new _["default"](b["default"].MEDIASOURCE_TYPE_UNSUPPORTED_CODE,b["default"].MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+a))}}function A(){return a}function D(){return v}function R(e){g=e}function M(){return g}function C(){return d}function N(){return!1}function P(){}function L(){}function O(){return 0}function F(){return f}function B(e){n.off(l["default"].DATA_UPDATE_COMPLETED,k,c),n.off(l["default"].INIT_FRAGMENT_LOADED,U,c),!e&&v&&(v.abort(),v.reset(),v=null)}function k(e){if(e.sender.getStreamProcessor()===d){var t=E.extract(d.getStreamInfo().id,e.sender.getCurrentRepresentation().id);t||n.trigger(l["default"].TIMED_TEXT_REQUESTED,{index:0,sender:e.sender})}}function U(e){e.fragmentModel===d.getFragmentModel()&&e.chunk.bytes&&(E.save(e.chunk),v.append(e.chunk),n.trigger(l["default"].STREAM_COMPLETED,{request:e.request,fragmentModel:e.fragmentModel}))}function H(e,t){var r=E.extract(e,t);r||n.trigger(l["default"].TIMED_TEXT_REQUESTED,{index:0,sender:c})}function j(){return null}function K(e){v.timestampOffset===e||isNaN(e)||(v.timestampOffset=e)}return c={getBufferControllerType:I,initialize:w,createBuffer:x,getType:A,getStreamProcessor:C,setSeekStartTime:L,getBuffer:D,getBufferLevel:O,setMediaSource:R,getMediaSource:M,getIsBufferingCompleted:F,getIsPruningInProgress:N,dischargePreBuffer:P,switchInitData:H,getRangeAt:j,reset:B,updateTimestampOffset:K},S(),c}S.__dashjs_factory_name=T,t["default"]=c["default"].getClassFactory(S),e.exports=t["default"]},1495:function(e,t,n){var r=n("86cc"),i=n("cb7c"),o=n("0d58");e.exports=n("9e1e")?Object.defineProperties:function(e,t){i(e);var n,a=o(t),s=a.length,u=0;while(s>u)r.f(e,n=a[u++],t[n]);return e}},"15a2":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(e){e=e||{};var t=void 0,n=e.blacklistController;function r(e){var t=[],r=function(e){return!t.length||!e.dvb_priority||-1===t.indexOf(e.dvb_priority)},i=function(e){return!n.contains(e.serviceLocation)||(e.dvb_priority&&t.push(e.dvb_priority),!1)};return e.filter(i).filter(r)}function i(e){var t=function(e,t){var n=e.dvb_priority-t.dvb_priority;return isNaN(n)?0:n},n=function(e,t,n){return!t||n[0].dvb_priority&&e.dvb_priority&&n[0].dvb_priority===e.dvb_priority},r=0,i=[],o=0,a=void 0,s=void 0;if(s=e.sort(t).filter(n),s.length)return s.length>1&&(s.forEach(function(e){r+=e.dvb_weight,i.push(r)}),a=Math.floor(Math.random()*(r-1)),i.every(function(e,t){return o=t,!(a<e)})),s[o]}function o(e){return e&&i(r(e))}return t={select:o},t}a.__dashjs_factory_name="DVBSelector",t["default"]=o["default"].getClassFactory(a),e.exports=t["default"]},1654:function(e,t,n){"use strict";var r=n("71c1")(!0);n("30f1")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},1691:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},1774:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1};t["default"]=i,e.exports=t["default"]},1962:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("09b9"),u=i(s),l=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.SOURCE_INITIALIZED="sourceInitialized",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_SEEK_ASKED="playbackSeekAsked",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged"}return a(t,e),t}(u["default"]),d=new l;t["default"]=d,e.exports=t["default"]},1991:function(e,t,n){var r,i,o,a=n("9b43"),s=n("31f4"),u=n("fab2"),l=n("230e"),d=n("7726"),c=d.process,f=d.setImmediate,h=d.clearImmediate,p=d.MessageChannel,m=d.Dispatch,g=0,y={},v="onreadystatechange",_=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},E=function(e){_.call(e.data)};f&&h||(f=function(e){var t=[],n=1;while(arguments.length>n)t.push(arguments[n++]);return y[++g]=function(){s("function"==typeof e?e:Function(e),t)},r(g),g},h=function(e){delete y[e]},"process"==n("2d95")(c)?r=function(e){c.nextTick(a(_,e,1))}:m&&m.now?r=function(e){m.now(a(_,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=E,r=a(o.postMessage,o,1)):d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(r=function(e){d.postMessage(e+"","*")},d.addEventListener("message",E,!1)):r=v in l("script")?function(e){u.appendChild(l("script"))[v]=function(){u.removeChild(this),_.call(e)}}:function(e){setTimeout(a(_,e,1),0)}),e.exports={set:f,clear:h}},"1a38":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("4e47"),s=r(a),u=n("8a43"),l=r(u),d=n("1d48"),c=r(d),f=n("467b"),h=r(f),p=n("589e"),m=r(p),g=500;function y(){var e=this.context,t=(0,l["default"])(e).getInstance(),n=void 0,r=void 0,i=void 0,a=void 0,u=void 0,d=void 0,f=void 0,h=void 0,p=void 0,y=void 0,v=void 0,_=void 0,E=void 0,b=void 0,T=void 0,S=void 0,I=void 0,w=void 0,x=void 0,A=void 0,D=void 0,R=void 0,M=void 0,C=void 0,N=void 0,P=void 0;function L(){r=(0,m["default"])(e).getInstance().getLogger(n),re()}function O(e,n){S=e,ke(),I=S.manifestInfo.isDynamic,M=!1,C=!1,v=S.start,R=n;var r="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"",i=/safari/.test(r)&&!/chrome/.test(r);N=i?.25:.02,t.on(c["default"].DATA_UPDATE_COMPLETED,ce,this),t.on(c["default"].BYTES_APPENDED_END_FRAGMENT,Le,this),t.on(c["default"].LOADING_PROGRESS,Oe,this),t.on(c["default"].BUFFER_LEVEL_STATE_CHANGED,Fe,this),t.on(c["default"].PERIOD_SWITCH_STARTED,F,this),t.on(c["default"].PLAYBACK_PROGRESS,Re,this),t.on(c["default"].PLAYBACK_TIME_UPDATED,Re,this),t.on(c["default"].PLAYBACK_ENDED,we,this),x&&(x=!1,U())}function F(e){!I&&e.fromStreamInfo&&void 0!==E[e.fromStreamInfo.id]&&(delete T[e.fromStreamInfo.id],delete E[e.fromStreamInfo.id])}function B(){return parseFloat((k()-G()).toFixed(5))}function k(){var e=ae(!0),t=I&&S?e-S.start:0;return e+(S?S.duration-t:t)}function U(){S&&p&&p.getElement()?p.play():x=!0}function H(){return S&&p?p.isPaused():null}function j(){S&&p&&p.pause()}function K(){return S&&p?p.isSeeking():null}function V(e,n,i){S&&p&&(!0===i?e!==p.getTime()&&(p.removeEventListener("seeking",ye),r.info("Requesting seek to time: "+e),p.setCurrentTime(e,n)):(t.trigger(c["default"].PLAYBACK_SEEK_ASKED),r.info("Requesting seek to time: "+e),p.setCurrentTime(e,n)))}function q(){var e=a.getReadOnlyMetricsFor(o["default"].VIDEO)||a.getReadOnlyMetricsFor(o["default"].AUDIO),t=u.getCurrentDVRInfo(e),n=t?t.range:null;V(n.end-w.getLiveDelay(),!0,!1)}function G(){return S&&p?p.getTime():null}function Y(){var e=G();if(I&&!isNaN(D)){var t=D/1e3;e>t&&(e-=t)}return e}function z(){return S&&p?p.getPlaybackRate():null}function W(){return S&&p?p.getPlayedRanges():null}function X(){return S&&p?p.getEnded():null}function $(){return I}function Q(){return i}function J(e){v=e}function Z(){return v}function ee(e,t){var n=f.getMpd(d.getValue()),r=void 0,i=void 0,a=10;if(r=w.getUseSuggestedPresentationDelay()&&n.hasOwnProperty(o["default"].SUGGESTED_PRESENTATION_DELAY)?n.suggestedPresentationDelay:w.getLowLatencyEnabled()?0:w.getLiveDelay()?w.getLiveDelay():isNaN(e)?2*S.manifestInfo.minBufferTime:e*w.getLiveDelayFragmentCount(),n.availabilityStartTime&&(D=n.availabilityStartTime.getTime()),t>0){var s=Math.max(t-a,t/2);i=Math.min(r,s)}else i=r;return b=i,i}function te(){return b}function ne(){if(!I||isNaN(D))return NaN;var e=Y();if(isNaN(e)||0===e)return 0;var t=(new Date).getTime()+1e3*y.getClientTimeOffset();return Math.max(((t-D-1e3*e)/1e3).toFixed(3),0)}function re(){v=NaN,x=!1,E={},b=0,D=0,T={},p&&(t.off(c["default"].DATA_UPDATE_COMPLETED,ce,this),t.off(c["default"].BUFFER_LEVEL_STATE_CHANGED,Fe,this),t.off(c["default"].BYTES_APPENDED_END_FRAGMENT,Le,this),t.off(c["default"].LOADING_PROGRESS,Oe,this),t.off(c["default"].PERIOD_SWITCH_STARTED,F,this),t.off(c["default"].PLAYBACK_PROGRESS,Re,this),t.off(c["default"].PLAYBACK_TIME_UPDATED,Re,this),t.off(c["default"].PLAYBACK_ENDED,we,this),le(),Ue()),_=null,p=null,S=null,I=null}function ie(e){e&&(e.streamController&&(i=e.streamController),e.metricsModel&&(a=e.metricsModel),e.dashMetrics&&(u=e.dashMetrics),e.manifestModel&&(d=e.manifestModel),e.dashManifestModel&&(f=e.dashManifestModel),e.mediaPlayerModel&&(w=e.mediaPlayerModel),e.adapter&&(h=e.adapter),e.videoModel&&(p=e.videoModel),e.timelineConverter&&(y=e.timelineConverter),e.uriFragmentModel&&(P=e.uriFragmentModel))}function oe(){var e=P.getURIFragmentData(),t=void 0;if(e){t={};var n=parseInt(e.r,10);n>=0&&S&&n<S.manifestInfo.DVRWindowSize&&null===e.t&&(e.t=Math.max(Math.floor(Date.now()/1e3)-S.manifestInfo.DVRWindowSize,S.manifestInfo.availableFrom.getTime()/1e3+S.start)+n),t.fragS=parseFloat(e.s),t.fragT=parseFloat(e.t)}return t}function ae(e,t){var n=void 0,r=NaN;if(e)r=S?S.start:r;else{var i=oe();r=i?isNaN(i.fragS)?i.fragT:i.fragS:0}if(I)!isNaN(r)&&S&&(n=r-S.manifestInfo.availableFrom.getTime()/1e3,(n>v||n<(isNaN(t)?NaN:t-S.manifestInfo.DVRWindowSize))&&(n=null)),n=n||v;else if(S)if(!isNaN(r)&&r<Math.max(S.manifestInfo.duration,S.duration)&&r>=0)n=r;else{var o=E[S.id];n=void 0!==o?Math.max(void 0!==o.audio?o.audio:0,void 0!==o.video?o.video:0,S.start):S.start}return n}function se(e){var t=a.getReadOnlyMetricsFor(o["default"].VIDEO)||a.getReadOnlyMetricsFor(o["default"].AUDIO),n=u.getCurrentDVRInfo(t),r=n?n.range:null,i=void 0;if(!r)return NaN;if(e>r.end)i=Math.max(r.end-2*S.manifestInfo.minBufferTime,r.start);else{if(!(e+.25<r.start))return e;i=r.start}return i}function ue(){if(null===_){var e=function(){Ae()};_=setInterval(e,w.getWallclockTimeUpdateInterval())}}function le(){clearInterval(_),_=null}function de(){if(!H()&&I&&0!==p.getReadyState()){var e=Y(),t=se(e),n=!isNaN(t)&&t!==e;n&&V(t)}}function ce(e){if(!e.error){var t=h.convertDataToRepresentationInfo(e.currentRepresentation),n=t.mediaInfo.streamInfo;S.id===n.id&&(S=n,de())}}function fe(){t.trigger(c["default"].CAN_PLAY)}function he(){r.info("Native video element event: play"),de(),ue(),t.trigger(c["default"].PLAYBACK_STARTED,{startTime:G()})}function pe(){r.info("Native video element event: waiting"),t.trigger(c["default"].PLAYBACK_WAITING,{playingTime:G()})}function me(){r.info("Native video element event: playing"),t.trigger(c["default"].PLAYBACK_PLAYING,{playingTime:G()})}function ge(){r.info("Native video element event: pause"),t.trigger(c["default"].PLAYBACK_PAUSED,{ended:X()})}function ye(){var e=G();r.info("Seeking to: "+e),ue(),t.trigger(c["default"].PLAYBACK_SEEKING,{seekTime:e})}function ve(){r.info("Native video element event: seeked"),t.trigger(c["default"].PLAYBACK_SEEKED),p.addEventListener("seeking",ye)}function _e(){S&&t.trigger(c["default"].PLAYBACK_TIME_UPDATED,{timeToEnd:B(),time:G()})}function Ee(){var e=Date.now();(!A||e>A+g)&&(A=e,_e())}function be(){t.trigger(c["default"].PLAYBACK_PROGRESS)}function Te(){var e=z();r.info("Native video element event: ratechange: ",e),t.trigger(c["default"].PLAYBACK_RATE_CHANGED,{playbackRate:e})}function Se(){r.info("Native video element event: loadedmetadata"),t.trigger(c["default"].PLAYBACK_METADATA_LOADED),ue()}function Ie(){r.info("Native video element event: ended"),j(),le(),t.trigger(c["default"].PLAYBACK_ENDED,{isLast:i.getActiveStreamInfo().isLast})}function we(e){_&&e.isLast&&(r.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended"),p.setCurrentTime(k()),j(),le())}function xe(e){var n=e.target||e.srcElement;t.trigger(c["default"].PLAYBACK_ERROR,{error:n.error})}function Ae(){t.trigger(c["default"].WALLCLOCK_TIME_UPDATED,{isDynamic:I,time:new Date}),$()&&H()&&Ee()}function De(e,t){if(t&&t.length>0)for(var n=0,r=t.length;n<r;n++)if(e>=t.start(n)&&e<t.end(n))return!0;return!1}function Re(){I&&w.getLowLatencyEnabled()&&w.getCatchUpPlaybackRate()>0&&!H()&&!K()&&(Ce()?Ne():Pe())}function Me(){var e=null;return i.getActiveStreamProcessors().forEach(function(t){var n=t.getBufferLevel();e=null===e?n:Math.min(e,n)}),e}function Ce(){return w.getCatchUpPlaybackRate()>0&&G()>0&&Math.abs(ne()-w.getLiveDelay())>w.getLowLatencyMinDrift()}function Ne(){if(p){var e=w.getCatchUpPlaybackRate(),t=w.getLiveDelay(),n=ne()-t,i=5*n,o=2*e/(1+Math.pow(Math.E,-i)),a=1-e+o;if(C){var s=Me();s>t/2?C=!1:n>0&&(a=1)}Math.abs(p.getPlaybackRate()-a)>N&&p.setPlaybackRate(a),w.getLowLatencyMaxDriftBeforeSeeking()>0&&!M&&n>w.getLowLatencyMaxDriftBeforeSeeking()?(r.info("Low Latency catchup mechanism. Latency too high, doing a seek to live point"),M=!0,q()):M=!1}}function Pe(){p&&p.setPlaybackRate(1)}function Le(e){var t=void 0,n=void 0,r=e.bufferedRanges;if(r&&r.length&&(!E[S.id]||!0!==E[S.id].started)){var a=e.sender.getType();void 0===T[S.id]&&(T[S.id]=[]),T[S.id][a]=r,void 0===E[S.id]&&(E[S.id]=[],E[S.id].started=!1),void 0===E[S.id][a]&&(E[S.id][a]=Math.max(r.start(0),S.start));var s=i.isTrackTypePresent(o["default"].VIDEO),u=i.isTrackTypePresent(o["default"].AUDIO);n=ae(!1),u&&s?isNaN(E[S.id].audio)||isNaN(E[S.id].video)||(E[S.id].audio<E[S.id].video?(t=E[S.id].video>n?E[S.id].video:n,r=T[S.id].audio):(t=E[S.id].audio>n?E[S.id].audio:n,r=T[S.id].video),De(t,r)&&(K()||R||0===t||V(t,!0,!0),E[S.id].started=!0)):E[S.id][a]&&(t=E[S.id][a]>n?E[S.id][a]:n,K()||R||V(t,!1,!0),E[S.id].started=!0)}}function Oe(e){if(!1===e.stream&&w.getLowLatencyEnabled()&&!isNaN(e.request.duration)){var t=1.2*e.request.duration;t>w.getLiveDelay()&&(r.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",t.toFixed(2)),w.setLiveDelay(t))}}function Fe(e){e.streamInfo.id===S.id&&(w.getLowLatencyEnabled()?e.state!==s["default"].BUFFER_EMPTY||K()||C||(C=!0,Pe()):p.setStallState(e.mediaType,e.state===s["default"].BUFFER_EMPTY))}function Be(e){t.trigger(c["default"].PLAYBACK_STALLED,{e:e})}function ke(){p.addEventListener("canplay",fe),p.addEventListener("play",he),p.addEventListener("waiting",pe),p.addEventListener("playing",me),p.addEventListener("pause",ge),p.addEventListener("error",xe),p.addEventListener("seeking",ye),p.addEventListener("seeked",ve),p.addEventListener("timeupdate",_e),p.addEventListener("progress",be),p.addEventListener("ratechange",Te),p.addEventListener("loadedmetadata",Se),p.addEventListener("stalled",Be),p.addEventListener("ended",Ie)}function Ue(){p.removeEventListener("canplay",fe),p.removeEventListener("play",he),p.removeEventListener("waiting",pe),p.removeEventListener("playing",me),p.removeEventListener("pause",ge),p.removeEventListener("error",xe),p.removeEventListener("seeking",ye),p.removeEventListener("seeked",ve),p.removeEventListener("timeupdate",_e),p.removeEventListener("progress",be),p.removeEventListener("ratechange",Te),p.removeEventListener("loadedmetadata",Se),p.removeEventListener("stalled",Be),p.removeEventListener("ended",Ie)}return n={initialize:O,setConfig:ie,getStartTimeFromUriParameters:oe,getStreamStartTime:ae,getTimeToStreamEnd:B,getTime:G,getNormalizedTime:Y,getPlaybackRate:z,getPlayedRanges:W,getEnded:X,getIsDynamic:$,getStreamController:Q,setLiveStartTime:J,getLiveStartTime:Z,computeLiveDelay:ee,getLiveDelay:te,getCurrentLiveLatency:ne,play:U,isPaused:H,pause:j,isSeeking:K,seek:V,reset:re},L(),n}y.__dashjs_factory_name="PlaybackController",t["default"]=h["default"].getSingletonFactory(y),e.exports=t["default"]},"1bc3":function(e,t,n){var r=n("f772");e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},"1c2c":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("589e"),s=r(a),u="WEBVTT";function l(){var e=this.context,t=void 0,n=void 0,r=void 0,i=void 0,o=void 0,a=void 0;function l(){n=(0,s["default"])(e).getInstance().getLogger(t),r=/(?:\r\n|\r|\n)/gm,i=/-->/,o=/(^[\s]+|[\s]+$)/g,a=/\s\b/g}function d(e){var t=[],a=void 0,s=void 0;if(!e)return t;e=e.split(r),a=e.length,s=-1;for(var l=0;l<a;l++){var d=e[l];if(d.length>0&&d!==u&&d.match(i)){var h=f(d),m=h.cuePoints,g=h.styles,y=p(e,l+1),v=c(m[0].replace(o,"")),_=c(m[1].replace(o,""));!isNaN(v)&&!isNaN(_)&&v>=s&&_>v?""!==y?(s=v,t.push({start:v,end:_,data:y,styles:g})):n.error("Skipping cue due to empty/malformed cue text"):n.error("Skipping cue due to incorrect cue timing")}}return t}function c(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2===n&&(e+=3600*parseInt(t[0],10)),e}function f(e){var t=e.split(i),n=t[1].split(a);return n.shift(),t[1]=n[0],n.shift(),{cuePoints:t,styles:h(n)}}function h(e){var t={};return e.forEach(function(e){if(e.split(/:/).length>1){var n=e.split(/:/)[1];n&&-1!=n.search(/%/)&&(n=parseInt(n.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(t.align=n),(e.match(/line/)||e.match(/L/))&&(t.line=n),(e.match(/position/)||e.match(/P/))&&(t.position=n),(e.match(/size/)||e.match(/S/))&&(t.size=n)}}),t}function p(e,t){var n=t,r="",o="",a=void 0;while(""!==e[n]&&n<e.length)n++;if(a=n-t,a>1)for(var s=0;s<a;s++){if(o=e[t+s],o.match(i)){r="";break}r+=o,s!==a-1&&(r+="\n")}else o=e[t],o.match(i)||(r=o);return r}return t={parse:d},l(),t}l.__dashjs_factory_name="VTTParser",t["default"]=o["default"].getSingletonFactory(l),e.exports=t["default"]},"1c67":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("8a43"),o=r(i),a=n("1d48"),s=r(a),u=n("467b"),l=r(u),d=n("589e"),c=r(d),f=n("e172"),h=r(f);function p(){var e=this.context,t=(0,o["default"])(e).getInstance(),n=void 0,r=void 0,i=void 0,a=void 0,u=void 0,l=void 0,d=void 0,f=void 0,p=void 0,m=void 0,g=void 0;function y(){r=(0,c["default"])(e).getInstance().getLogger(n)}function v(e){e&&(e.manifestModel&&(f=e.manifestModel),e.dashManifestModel&&(p=e.dashManifestModel),e.mediaPlayerModel&&(g=e.mediaPlayerModel),e.manifestLoader&&(d=e.manifestLoader),e.errHandler&&(m=e.errHandler))}function _(){b(),t.on(s["default"].STREAMS_COMPOSED,C,this),t.on(s["default"].PLAYBACK_STARTED,R,this),t.on(s["default"].PLAYBACK_PAUSED,M,this),t.on(s["default"].INTERNAL_MANIFEST_LOADED,D,this)}function E(e){x(e)}function b(){i=NaN,l=!1,u=!0,S()}function T(){t.off(s["default"].PLAYBACK_STARTED,R,this),t.off(s["default"].PLAYBACK_PAUSED,M,this),t.off(s["default"].STREAMS_COMPOSED,C,this),t.off(s["default"].INTERNAL_MANIFEST_LOADED,D,this),b()}function S(){null!==a&&(clearInterval(a),a=null)}function I(e){S(),isNaN(e)&&!isNaN(i)&&(e=1e3*i),isNaN(e)||(r.debug("Refresh manifest in "+e+" milliseconds."),a=setTimeout(A,e))}function w(){l=!0;var e=f.getValue(),t=e.url,n=p.getLocation(e);n&&(t=n),d.load(t)}function x(e){f.setValue(e);var n=new Date,o=(n.getTime()-e.loadedTime.getTime())/1e3;i=p.getManifestUpdatePeriod(e,o),1e3*i>2147483647&&(i=2147483.647),t.trigger(s["default"].MANIFEST_UPDATED,{manifest:e}),r.info("Manifest has been refreshed at "+n+"["+n.getTime()/1e3+"] "),u||I()}function A(){u&&!g.getScheduleWhilePaused()||(l?I(g.getManifestUpdateRetryInterval()):w())}function D(e){e.error?e.error.code===h["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&m.error(e.error):x(e.manifest)}function R(){u=!1,I()}function M(){u=!0,S()}function C(){l=!1}return n={initialize:_,setManifest:E,refreshManifest:w,setConfig:v,reset:T},y(),n}p.__dashjs_factory_name="ManifestUpdater",t["default"]=l["default"].getClassFactory(p),e.exports=t["default"]},"1d48":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("81a0"),u=i(s),l=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),t}(u["default"]),d=new l;t["default"]=d,e.exports=t["default"]},"1ec9":function(e,t,n){var r=n("f772"),i=n("e53d").document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},"1fa8":function(e,t,n){var r=n("cb7c");e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(a){var o=e["return"];throw void 0!==o&&r(o.call(e)),a}}},"1fb5":function(e,t,n){"use strict";t.byteLength=d,t.toByteArray=f,t.fromByteArray=m;for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function d(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r}function c(e,t,n){return 3*(t+n)/4-n}function f(e){for(var t,n=l(e),r=n[0],a=n[1],s=new o(c(e,r,a)),u=0,d=a>0?r-4:r,f=0;f<d;f+=4)t=i[e.charCodeAt(f)]<<18|i[e.charCodeAt(f+1)]<<12|i[e.charCodeAt(f+2)]<<6|i[e.charCodeAt(f+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;return 2===a&&(t=i[e.charCodeAt(f)]<<2|i[e.charCodeAt(f+1)]>>4,s[u++]=255&t),1===a&&(t=i[e.charCodeAt(f)]<<10|i[e.charCodeAt(f+1)]<<4|i[e.charCodeAt(f+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t),s}function h(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function p(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(h(r));return i.join("")}function m(e){for(var t,n=e.length,i=n%3,o=[],a=16383,s=0,u=n-i;s<u;s+=a)o.push(p(e,s,s+a>u?u:s+a));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},"214f":function(e,t,n){"use strict";n("b0c5");var r=n("2aba"),i=n("32e9"),o=n("79e5"),a=n("be13"),s=n("2b4c"),u=n("520a"),l=s("species"),d=!o(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),c=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var f=s(e),h=!o(function(){var t={};return t[f]=function(){return 7},7!=""[e](t)}),p=h?!o(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[l]=function(){return n}),n[f](""),!t}):void 0;if(!h||!p||"replace"===e&&!d||"split"===e&&!c){var m=/./[f],g=n(a,f,""[e],function(e,t,n,r,i){return t.exec===u?h&&!i?{done:!0,value:m.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),y=g[0],v=g[1];r(String.prototype,e,y),i(RegExp.prototype,f,2==t?function(e,t){return v.call(e,this,t)}:function(e){return v.call(e,this)})}}},"230e":function(e,t,n){var r=n("d3f4"),i=n("7726").document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},"23c6":function(e,t,n){var r=n("2d95"),i=n("2b4c")("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},"241e":function(e,t,n){var r=n("25eb");e.exports=function(e){return Object(r(e))}},"243c":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n){r(this,e),this.keyID=t,this.key=n};t["default"]=i,e.exports=t["default"]},"248c":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("6a2d"),s=r(a),u=n("0757"),l=n("8a43"),d=r(l),c=n("1d48"),f=r(c),h=n("e172"),p=r(h),m=n("467b"),g=r(m),y=n("589e"),v=r(y),_=n("4e7a"),E=r(_),b=5e3;function T(){var e=this.context,t=(0,d["default"])(e).getInstance(),n=(0,E["default"])(e).getInstance(),r=void 0,i=void 0,a=void 0,l=void 0,c=void 0,h=void 0,m=void 0,g=void 0,y=void 0;function _(){i=(0,v["default"])(e).getInstance().getLogger(r)}function T(e,t){c=t,a=0,l=!1,h={"urn:mpeg:dash:utc:http-head:2014":F,"urn:mpeg:dash:utc:http-xsdate:2014":O.bind(null,M),"urn:mpeg:dash:utc:http-iso:2014":O.bind(null,C),"urn:mpeg:dash:utc:direct:2014":L,"urn:mpeg:dash:utc:http-head:2012":F,"urn:mpeg:dash:utc:http-xsdate:2012":O.bind(null,M),"urn:mpeg:dash:utc:http-iso:2012":O.bind(null,C),"urn:mpeg:dash:utc:direct:2012":L,"urn:mpeg:dash:utc:http-ntp:2014":P,"urn:mpeg:dash:utc:ntp:2014":P,"urn:mpeg:dash:utc:sntp:2014":P},x()||H(e)}function S(e){e&&(e.metricsModel&&(m=e.metricsModel),e.dashMetrics&&(g=e.dashMetrics),e.baseURLController&&(y=e.baseURLController))}function I(){return D()}function w(e){l=e}function x(){return l}function A(e){a=e}function D(){return a}function R(e){var t=60,n=60,r=1e3,i=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/,o=void 0,a=void 0,s=i.exec(e);return o=Date.UTC(parseInt(s[1],10),parseInt(s[2],10)-1,parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5],10),s[6]&&(parseInt(s[6],10)||0),s[7]&&parseFloat(s[7])*r||0),s[9]&&s[10]&&(a=parseInt(s[9],10)*n+parseInt(s[10],10),o+=("+"===s[8]?-1:1)*a*t*r),new Date(o).getTime()}function M(e){var t=Date.parse(e);return isNaN(t)&&(t=R(e)),t}function C(e){return Date.parse(e)}function N(e){return Date.parse(e)}function P(e,t,n){n()}function L(e,t,n){var r=M(e);isNaN(r)?n():t(r)}function O(e,t,r,i,o){var a=void 0,s=void 0,l=!1,d=new XMLHttpRequest,c=o?u.HTTPRequest.HEAD:u.HTTPRequest.GET,f=t.match(/\S+/g);if(t=f.shift(),a=function(){l||(l=!0,f.length?O(e,f.join(" "),r,i,o):i())},s=function(){var t=void 0,n=void 0;200===d.status&&(t=o?d.getResponseHeader("Date"):d.response,n=e(t),isNaN(n)||(r(n),l=!0))},n.isRelative(t)){var h=y.resolve();h&&(t=n.resolve(t,h.url))}d.open(c,t),d.timeout=b||0,d.onload=s,d.onloadend=a,d.send()}function F(e,t,n){O(N,e,t,n,!0)}function B(){var e=m.getReadOnlyMetricsFor(o["default"].STREAM),t=g.getLatestMPDRequestHeaderValueByID(e,"Date"),n=null!==t?new Date(t).getTime():Number.NaN;isNaN(n)?k(!0):(A(n-(new Date).getTime()),k(!1,n/1e3,a))}function k(e,n,r){w(!1),t.trigger(f["default"].TIME_SYNCHRONIZATION_COMPLETED,{time:n,offset:r,error:e?new s["default"](p["default"].TIME_SYNC_FAILED_ERROR_CODE,p["default"].TIME_SYNC_FAILED_ERROR_MESSAGE):null})}function U(e,t){return e-t}function H(e,t){var n=t||0,r=e[n],o=function(e,t){var n=!e||!t;n&&c?B():k(n,e,t)};w(!0),r?h.hasOwnProperty(r.schemeIdUri)?h[r.schemeIdUri](r.value,function(e){var t=(new Date).getTime(),n=U(e,t);A(n),i.info("Local time: "+new Date(t)),i.info("Server time: "+new Date(e)),i.info("Server Time - Local Time (ms): "+n),o(e,n)},function(){H(e,n+1)}):H(e,n+1):(A(0),o())}function j(){w(!1)}return r={initialize:T,getOffsetToDeviceTimeMs:I,setConfig:S,reset:j},_(),r}T.__dashjs_factory_name="TimeSyncController";var S=g["default"].getSingletonFactory(T);S.HTTP_TIMEOUT_MS=b,g["default"].updateSingletonFactory(T.__dashjs_factory_name,S),t["default"]=S,e.exports=t["default"]},"24c5":function(e,t,n){"use strict";var r,i,o,a,s=n("b8e3"),u=n("e53d"),l=n("d864"),d=n("40c3"),c=n("63b6"),f=n("f772"),h=n("79aa"),p=n("1173"),m=n("a22a"),g=n("f201"),y=n("4178").set,v=n("aba2")(),_=n("656e"),E=n("4439"),b=n("bc13"),T=n("cd78"),S="Promise",I=u.TypeError,w=u.process,x=w&&w.versions,A=x&&x.v8||"",D=u[S],R="process"==d(w),M=function(){},C=i=_.f,N=!!function(){try{var e=D.resolve(1),t=(e.constructor={})[n("5168")("species")]=function(e){e(M,M)};return(R||"function"==typeof PromiseRejectionEvent)&&e.then(M)instanceof t&&0!==A.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(r){}}(),P=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},L=function(e,t){if(!e._n){e._n=!0;var n=e._c;v(function(){var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a,s=i?t.ok:t.fail,u=t.resolve,l=t.reject,d=t.domain;try{s?(i||(2==e._h&&B(e),e._h=1),!0===s?n=r:(d&&d.enter(),n=s(r),d&&(d.exit(),a=!0)),n===t.promise?l(I("Promise-chain cycle")):(o=P(n))?o.call(n,u,l):u(n)):l(r)}catch(c){d&&!a&&d.exit(),l(c)}};while(n.length>o)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&O(e)})}},O=function(e){y.call(u,function(){var t,n,r,i=e._v,o=F(e);if(o&&(t=E(function(){R?w.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=R||F(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},F=function(e){return 1!==e._h&&0===(e._a||e._c).length},B=function(e){y.call(u,function(){var t;R?w.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},k=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),L(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw I("Promise can't be resolved itself");(t=P(e))?v(function(){var r={_w:n,_d:!1};try{t.call(e,l(U,r,1),l(k,r,1))}catch(i){k.call(r,i)}}):(n._v=e,n._s=1,L(n,!1))}catch(r){k.call({_w:n,_d:!1},r)}}};N||(D=function(e){p(this,D,S,"_h"),h(e),r.call(this);try{e(l(U,this,1),l(k,this,1))}catch(t){k.call(this,t)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n("5c95")(D.prototype,{then:function(e,t){var n=C(g(this,D));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=R?w.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&L(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=l(U,e,1),this.reject=l(k,e,1)},_.f=C=function(e){return e===D||e===a?new o(e):i(e)}),c(c.G+c.W+c.F*!N,{Promise:D}),n("45f2")(D,S),n("4c95")(S),a=n("584a")[S],c(c.S+c.F*!N,S,{reject:function(e){var t=C(this),n=t.reject;return n(e),t.promise}}),c(c.S+c.F*(s||!N),S,{resolve:function(e){return T(s&&this===a?D:this,e)}}),c(c.S+c.F*!(N&&n("4ee1")(function(e){D.all(e)["catch"](M)})),S,{all:function(e){var t=this,n=C(t),r=n.resolve,i=n.reject,o=E(function(){var n=[],o=0,a=1;m(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=C(t),r=n.reject,i=E(function(){m(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},"25eb":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},2621:function(e,t){t.f=Object.getOwnPropertySymbols},"27bf":function(e,t,n){"use strict";e.exports=a;var r=n("b19a"),i=n("3a7c");function o(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);r.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"===typeof this._flush?this._flush(function(t,n){u(e,t,n)}):u(this,null,null)}function u(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=n("3fb5"),i.inherits(a,r),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},"27ee":function(e,t,n){var r=n("23c6"),i=n("2b4c")("iterator"),o=n("84f2");e.exports=n("8378").getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},2877:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){var u,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),a?(u=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=u):i&&(u=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(l.functional){l._injectStyles=u;var d=l.render;l.render=function(e,t){return u.call(t),d(e,t)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,u):[u]}return{exports:e,options:l}}n.d(t,"a",function(){return r})},"28a5":function(e,t,n){"use strict";var r=n("aae3"),i=n("cb7c"),o=n("ebd6"),a=n("0390"),s=n("9def"),u=n("5f1b"),l=n("520a"),d=n("79e5"),c=Math.min,f=[].push,h="split",p="length",m="lastIndex",g=4294967295,y=!d(function(){RegExp(g,"y")});n("214f")("split",2,function(e,t,n,d){var v;return v="c"=="abbc"[h](/(b)*/)[1]||4!="test"[h](/(?:)/,-1)[p]||2!="ab"[h](/(?:ab)*/)[p]||4!="."[h](/(.?)(.?)/)[p]||"."[h](/()()/)[p]>1||""[h](/.?/)[p]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(i,e,t);var o,a,s,u=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),c=0,h=void 0===t?g:t>>>0,y=new RegExp(e.source,d+"g");while(o=l.call(y,i)){if(a=y[m],a>c&&(u.push(i.slice(c,o.index)),o[p]>1&&o.index<i[p]&&f.apply(u,o.slice(1)),s=o[0][p],c=a,u[p]>=h))break;y[m]===o.index&&y[m]++}return c===i[p]?!s&&y.test("")||u.push(""):u.push(i.slice(c)),u[p]>h?u.slice(0,h):u}:"0"[h](void 0,0)[p]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var i=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,i,r):v.call(String(i),n,r)},function(e,t){var r=d(v,e,this,t,v!==n);if(r.done)return r.value;var l=i(e),f=String(this),h=o(l,RegExp),p=l.unicode,m=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(y?"y":"g"),_=new h(y?l:"^(?:"+l.source+")",m),E=void 0===t?g:t>>>0;if(0===E)return[];if(0===f.length)return null===u(_,f)?[f]:[];var b=0,T=0,S=[];while(T<f.length){_.lastIndex=y?T:0;var I,w=u(_,y?f:f.slice(T));if(null===w||(I=c(s(_.lastIndex+(y?0:T)),f.length))===b)T=a(f,T,p);else{if(S.push(f.slice(b,T)),S.length===E)return S;for(var x=1;x<=w.length-1;x++)if(S.push(w[x]),S.length===E)return S;T=b=I}}return S.push(f.slice(b)),S}]})},"294c":function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"2aba":function(e,t,n){var r=n("7726"),i=n("32e9"),o=n("69a8"),a=n("ca5a")("src"),s=n("fa5b"),u="toString",l=(""+s).split(u);n("8378").inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(u&&(o(n,a)||i(n,a,e[t]?""+e[t]:l.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,u,function(){return"function"==typeof this&&this[a]||s.call(this)})},"2abb":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("243c"),o=r(i),a=n("5fa3"),s=r(a);function u(){var e=void 0;function t(e,t){var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t)));e+="/?";for(var r=0;r<n.kids.length;r++)e+=n.kids[r]+"&";return e=e.substring(0,e.length-1),e}function n(){return"GET"}function r(){return"json"}function i(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var r=e.keys[n],i=r.kid.replace(/=/g,""),a=r.k.replace(/=/g,"");t.push(new o["default"](i,a))}return new s["default"](t)}function a(e){return String.fromCharCode.apply(null,new Uint8Array(e))}return e={getServerURLFromMessage:t,getHTTPMethod:n,getResponseType:r,getLicenseMessage:i,getErrorResponse:a},e}u.__dashjs_factory_name="ClearKey",t["default"]=dashjs.FactoryMaker.getSingletonFactory(u),e.exports=t["default"]},"2aeb":function(e,t,n){var r=n("cb7c"),i=n("1495"),o=n("e11e"),a=n("613b")("IE_PROTO"),s=function(){},u="prototype",l=function(){var e,t=n("230e")("iframe"),r=o.length,i="<",a=">";t.style.display="none",n("fab2").appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+a+"document.F=Object"+i+"/script"+a),e.close(),l=e.F;while(r--)delete l[u][o[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[u]=r(e),n=new s,s[u]=null,n[a]=e):n=l(),void 0===t?n:i(n,t)}},"2b0e":function(e,t,n){"use strict";(function(e){
/*!
 * Vue.js v2.6.9
 * (c) 2014-2019 Evan You
 * Released under the MIT License.
 */
var n=Object.freeze({});function r(e){return void 0===e||null===e}function i(e){return void 0!==e&&null!==e}function o(e){return!0===e}function a(e){return!1===e}function s(e){return"string"===typeof e||"number"===typeof e||"symbol"===typeof e||"boolean"===typeof e}function u(e){return null!==e&&"object"===typeof e}var l=Object.prototype.toString;function d(e){return"[object Object]"===l.call(e)}function c(e){return"[object RegExp]"===l.call(e)}function f(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function h(e){return i(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function p(e){return null==e?"":Array.isArray(e)||d(e)&&e.toString===l?JSON.stringify(e,null,2):String(e)}function m(e){var t=parseFloat(e);return isNaN(t)?e:t}function g(e,t){for(var n=Object.create(null),r=e.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}g("slot,component",!0);var y=g("key,ref,slot,slot-scope,is");function v(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var _=Object.prototype.hasOwnProperty;function E(e,t){return _.call(e,t)}function b(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}var T=/-(\w)/g,S=b(function(e){return e.replace(T,function(e,t){return t?t.toUpperCase():""})}),I=b(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),w=/\B([A-Z])/g,x=b(function(e){return e.replace(w,"-$1").toLowerCase()});function A(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function D(e,t){return e.bind(t)}var R=Function.prototype.bind?D:A;function M(e,t){t=t||0;var n=e.length-t,r=new Array(n);while(n--)r[n]=e[n+t];return r}function C(e,t){for(var n in t)e[n]=t[n];return e}function N(e){for(var t={},n=0;n<e.length;n++)e[n]&&C(t,e[n]);return t}function P(e,t,n){}var L=function(e,t,n){return!1},O=function(e){return e};function F(e,t){if(e===t)return!0;var n=u(e),r=u(t);if(!n||!r)return!n&&!r&&String(e)===String(t);try{var i=Array.isArray(e),o=Array.isArray(t);if(i&&o)return e.length===t.length&&e.every(function(e,n){return F(e,t[n])});if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(i||o)return!1;var a=Object.keys(e),s=Object.keys(t);return a.length===s.length&&a.every(function(n){return F(e[n],t[n])})}catch(l){return!1}}function B(e,t){for(var n=0;n<e.length;n++)if(F(e[n],t))return n;return-1}function k(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var U="data-server-rendered",H=["component","directive","filter"],j=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],K={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:L,isReservedAttr:L,isUnknownElement:L,getTagNamespace:P,parsePlatformTagName:O,mustUseProp:L,async:!0,_lifecycleHooks:j},V=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function q(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function G(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var Y=new RegExp("[^"+V.source+".$_\\d]");function z(e){if(!Y.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}var W,X="__proto__"in{},$="undefined"!==typeof window,Q="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,J=Q&&WXEnvironment.platform.toLowerCase(),Z=$&&window.navigator.userAgent.toLowerCase(),ee=Z&&/msie|trident/.test(Z),te=Z&&Z.indexOf("msie 9.0")>0,ne=Z&&Z.indexOf("edge/")>0,re=(Z&&Z.indexOf("android"),Z&&/iphone|ipad|ipod|ios/.test(Z)||"ios"===J),ie=(Z&&/chrome\/\d+/.test(Z),Z&&/phantomjs/.test(Z),Z&&Z.match(/firefox\/(\d+)/)),oe={}.watch,ae=!1;if($)try{var se={};Object.defineProperty(se,"passive",{get:function(){ae=!0}}),window.addEventListener("test-passive",null,se)}catch(Ta){}var ue=function(){return void 0===W&&(W=!$&&!Q&&"undefined"!==typeof e&&(e["process"]&&"server"===e["process"].env.VUE_ENV)),W},le=$&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function de(e){return"function"===typeof e&&/native code/.test(e.toString())}var ce,fe="undefined"!==typeof Symbol&&de(Symbol)&&"undefined"!==typeof Reflect&&de(Reflect.ownKeys);ce="undefined"!==typeof Set&&de(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var he=P,pe=0,me=function(){this.id=pe++,this.subs=[]};me.prototype.addSub=function(e){this.subs.push(e)},me.prototype.removeSub=function(e){v(this.subs,e)},me.prototype.depend=function(){me.target&&me.target.addDep(this)},me.prototype.notify=function(){var e=this.subs.slice();for(var t=0,n=e.length;t<n;t++)e[t].update()},me.target=null;var ge=[];function ye(e){ge.push(e),me.target=e}function ve(){ge.pop(),me.target=ge[ge.length-1]}var _e=function(e,t,n,r,i,o,a,s){this.tag=e,this.data=t,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},Ee={child:{configurable:!0}};Ee.child.get=function(){return this.componentInstance},Object.defineProperties(_e.prototype,Ee);var be=function(e){void 0===e&&(e="");var t=new _e;return t.text=e,t.isComment=!0,t};function Te(e){return new _e(void 0,void 0,void 0,String(e))}function Se(e){var t=new _e(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var Ie=Array.prototype,we=Object.create(Ie),xe=["push","pop","shift","unshift","splice","sort","reverse"];xe.forEach(function(e){var t=Ie[e];G(we,e,function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];var i,o=t.apply(this,n),a=this.__ob__;switch(e){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2);break}return i&&a.observeArray(i),a.dep.notify(),o})});var Ae=Object.getOwnPropertyNames(we),De=!0;function Re(e){De=e}var Me=function(e){this.value=e,this.dep=new me,this.vmCount=0,G(e,"__ob__",this),Array.isArray(e)?(X?Ce(e,we):Ne(e,we,Ae),this.observeArray(e)):this.walk(e)};function Ce(e,t){e.__proto__=t}function Ne(e,t,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];G(e,o,t[o])}}function Pe(e,t){var n;if(u(e)&&!(e instanceof _e))return E(e,"__ob__")&&e.__ob__ instanceof Me?n=e.__ob__:De&&!ue()&&(Array.isArray(e)||d(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Me(e)),t&&n&&n.vmCount++,n}function Le(e,t,n,r,i){var o=new me,a=Object.getOwnPropertyDescriptor(e,t);if(!a||!1!==a.configurable){var s=a&&a.get,u=a&&a.set;s&&!u||2!==arguments.length||(n=e[t]);var l=!i&&Pe(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=s?s.call(e):n;return me.target&&(o.depend(),l&&(l.dep.depend(),Array.isArray(t)&&Be(t))),t},set:function(t){var r=s?s.call(e):n;t===r||t!==t&&r!==r||s&&!u||(u?u.call(e,t):n=t,l=!i&&Pe(t),o.notify())}})}}function Oe(e,t,n){if(Array.isArray(e)&&f(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var r=e.__ob__;return e._isVue||r&&r.vmCount?n:r?(Le(r.value,t,n),r.dep.notify(),n):(e[t]=n,n)}function Fe(e,t){if(Array.isArray(e)&&f(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||E(e,t)&&(delete e[t],n&&n.dep.notify())}}function Be(e){for(var t=void 0,n=0,r=e.length;n<r;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&Be(t)}Me.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)Le(e,t[n])},Me.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Pe(e[t])};var ke=K.optionMergeStrategies;function Ue(e,t){if(!t)return e;for(var n,r,i,o=fe?Reflect.ownKeys(t):Object.keys(t),a=0;a<o.length;a++)n=o[a],"__ob__"!==n&&(r=e[n],i=t[n],E(e,n)?r!==i&&d(r)&&d(i)&&Ue(r,i):Oe(e,n,i));return e}function He(e,t,n){return n?function(){var r="function"===typeof t?t.call(n,n):t,i="function"===typeof e?e.call(n,n):e;return r?Ue(r,i):i}:t?e?function(){return Ue("function"===typeof t?t.call(this,this):t,"function"===typeof e?e.call(this,this):e)}:t:e}function je(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?Ke(n):n}function Ke(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function Ve(e,t,n,r){var i=Object.create(e||null);return t?C(i,t):i}ke.data=function(e,t,n){return n?He(e,t,n):t&&"function"!==typeof t?e:He(e,t)},j.forEach(function(e){ke[e]=je}),H.forEach(function(e){ke[e+"s"]=Ve}),ke.watch=function(e,t,n,r){if(e===oe&&(e=void 0),t===oe&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var i={};for(var o in C(i,e),t){var a=i[o],s=t[o];a&&!Array.isArray(a)&&(a=[a]),i[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return i},ke.props=ke.methods=ke.inject=ke.computed=function(e,t,n,r){if(!e)return t;var i=Object.create(null);return C(i,e),t&&C(i,t),i},ke.provide=He;var qe=function(e,t){return void 0===t?e:t};function Ge(e,t){var n=e.props;if(n){var r,i,o,a={};if(Array.isArray(n)){r=n.length;while(r--)i=n[r],"string"===typeof i&&(o=S(i),a[o]={type:null})}else if(d(n))for(var s in n)i=n[s],o=S(s),a[o]=d(i)?i:{type:i};else 0;e.props=a}}function Ye(e,t){var n=e.inject;if(n){var r=e.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(d(n))for(var o in n){var a=n[o];r[o]=d(a)?C({from:o},a):{from:a}}else 0}}function ze(e){var t=e.directives;if(t)for(var n in t){var r=t[n];"function"===typeof r&&(t[n]={bind:r,update:r})}}function We(e,t,n){if("function"===typeof t&&(t=t.options),Ge(t,n),Ye(t,n),ze(t),!t._base&&(t.extends&&(e=We(e,t.extends,n)),t.mixins))for(var r=0,i=t.mixins.length;r<i;r++)e=We(e,t.mixins[r],n);var o,a={};for(o in e)s(o);for(o in t)E(e,o)||s(o);function s(r){var i=ke[r]||qe;a[r]=i(e[r],t[r],n,r)}return a}function Xe(e,t,n,r){if("string"===typeof n){var i=e[t];if(E(i,n))return i[n];var o=S(n);if(E(i,o))return i[o];var a=I(o);if(E(i,a))return i[a];var s=i[n]||i[o]||i[a];return s}}function $e(e,t,n,r){var i=t[e],o=!E(n,e),a=n[e],s=et(Boolean,i.type);if(s>-1)if(o&&!E(i,"default"))a=!1;else if(""===a||a===x(e)){var u=et(String,i.type);(u<0||s<u)&&(a=!0)}if(void 0===a){a=Qe(r,i,e);var l=De;Re(!0),Pe(a),Re(l)}return a}function Qe(e,t,n){if(E(t,"default")){var r=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:"function"===typeof r&&"Function"!==Je(t.type)?r.call(e):r}}function Je(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function Ze(e,t){return Je(e)===Je(t)}function et(e,t){if(!Array.isArray(t))return Ze(t,e)?0:-1;for(var n=0,r=t.length;n<r;n++)if(Ze(t[n],e))return n;return-1}function tt(e,t,n){ye();try{if(t){var r=t;while(r=r.$parent){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{var a=!1===i[o].call(r,e,t,n);if(a)return}catch(Ta){rt(Ta,r,"errorCaptured hook")}}}rt(e,t,n)}finally{ve()}}function nt(e,t,n,r,i){var o;try{o=n?e.apply(t,n):e.call(t),o&&!o._isVue&&h(o)&&!o._handled&&(o.catch(function(e){return tt(e,r,i+" (Promise/async)")}),o._handled=!0)}catch(Ta){tt(Ta,r,i)}return o}function rt(e,t,n){if(K.errorHandler)try{return K.errorHandler.call(null,e,t,n)}catch(Ta){Ta!==e&&it(Ta,null,"config.errorHandler")}it(e,t,n)}function it(e,t,n){if(!$&&!Q||"undefined"===typeof console)throw e;console.error(e)}var ot,at=!1,st=[],ut=!1;function lt(){ut=!1;var e=st.slice(0);st.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!==typeof Promise&&de(Promise)){var dt=Promise.resolve();ot=function(){dt.then(lt),re&&setTimeout(P)},at=!0}else if(ee||"undefined"===typeof MutationObserver||!de(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())ot="undefined"!==typeof setImmediate&&de(setImmediate)?function(){setImmediate(lt)}:function(){setTimeout(lt,0)};else{var ct=1,ft=new MutationObserver(lt),ht=document.createTextNode(String(ct));ft.observe(ht,{characterData:!0}),ot=function(){ct=(ct+1)%2,ht.data=String(ct)},at=!0}function pt(e,t){var n;if(st.push(function(){if(e)try{e.call(t)}catch(Ta){tt(Ta,t,"nextTick")}else n&&n(t)}),ut||(ut=!0,ot()),!e&&"undefined"!==typeof Promise)return new Promise(function(e){n=e})}var mt=new ce;function gt(e){yt(e,mt),mt.clear()}function yt(e,t){var n,r,i=Array.isArray(e);if(!(!i&&!u(e)||Object.isFrozen(e)||e instanceof _e)){if(e.__ob__){var o=e.__ob__.dep.id;if(t.has(o))return;t.add(o)}if(i){n=e.length;while(n--)yt(e[n],t)}else{r=Object.keys(e),n=r.length;while(n--)yt(e[r[n]],t)}}}var vt=b(function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var n="~"===e.charAt(0);e=n?e.slice(1):e;var r="!"===e.charAt(0);return e=r?e.slice(1):e,{name:e,once:n,capture:r,passive:t}});function _t(e,t){function n(){var e=arguments,r=n.fns;if(!Array.isArray(r))return nt(r,null,arguments,t,"v-on handler");for(var i=r.slice(),o=0;o<i.length;o++)nt(i[o],null,e,t,"v-on handler")}return n.fns=e,n}function Et(e,t,n,i,a,s){var u,l,d,c;for(u in e)l=e[u],d=t[u],c=vt(u),r(l)||(r(d)?(r(l.fns)&&(l=e[u]=_t(l,s)),o(c.once)&&(l=e[u]=a(c.name,l,c.capture)),n(c.name,l,c.capture,c.passive,c.params)):l!==d&&(d.fns=l,e[u]=d));for(u in t)r(e[u])&&(c=vt(u),i(c.name,t[u],c.capture))}function bt(e,t,n){var a;e instanceof _e&&(e=e.data.hook||(e.data.hook={}));var s=e[t];function u(){n.apply(this,arguments),v(a.fns,u)}r(s)?a=_t([u]):i(s.fns)&&o(s.merged)?(a=s,a.fns.push(u)):a=_t([s,u]),a.merged=!0,e[t]=a}function Tt(e,t,n){var o=t.options.props;if(!r(o)){var a={},s=e.attrs,u=e.props;if(i(s)||i(u))for(var l in o){var d=x(l);St(a,u,l,d,!0)||St(a,s,l,d,!1)}return a}}function St(e,t,n,r,o){if(i(t)){if(E(t,n))return e[n]=t[n],o||delete t[n],!0;if(E(t,r))return e[n]=t[r],o||delete t[r],!0}return!1}function It(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}function wt(e){return s(e)?[Te(e)]:Array.isArray(e)?At(e):void 0}function xt(e){return i(e)&&i(e.text)&&a(e.isComment)}function At(e,t){var n,a,u,l,d=[];for(n=0;n<e.length;n++)a=e[n],r(a)||"boolean"===typeof a||(u=d.length-1,l=d[u],Array.isArray(a)?a.length>0&&(a=At(a,(t||"")+"_"+n),xt(a[0])&&xt(l)&&(d[u]=Te(l.text+a[0].text),a.shift()),d.push.apply(d,a)):s(a)?xt(l)?d[u]=Te(l.text+a):""!==a&&d.push(Te(a)):xt(a)&&xt(l)?d[u]=Te(l.text+a.text):(o(e._isVList)&&i(a.tag)&&r(a.key)&&i(t)&&(a.key="__vlist"+t+"_"+n+"__"),d.push(a)));return d}function Dt(e){var t=e.$options.provide;t&&(e._provided="function"===typeof t?t.call(e):t)}function Rt(e){var t=Mt(e.$options.inject,e);t&&(Re(!1),Object.keys(t).forEach(function(n){Le(e,n,t[n])}),Re(!0))}function Mt(e,t){if(e){for(var n=Object.create(null),r=fe?Reflect.ownKeys(e):Object.keys(e),i=0;i<r.length;i++){var o=r[i];if("__ob__"!==o){var a=e[o].from,s=t;while(s){if(s._provided&&E(s._provided,a)){n[o]=s._provided[a];break}s=s.$parent}if(!s)if("default"in e[o]){var u=e[o].default;n[o]="function"===typeof u?u.call(t):u}else 0}}return n}}function Ct(e,t){if(!e||!e.length)return{};for(var n={},r=0,i=e.length;r<i;r++){var o=e[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==t&&o.fnContext!==t||!a||null==a.slot)(n.default||(n.default=[])).push(o);else{var s=a.slot,u=n[s]||(n[s]=[]);"template"===o.tag?u.push.apply(u,o.children||[]):u.push(o)}}for(var l in n)n[l].every(Nt)&&delete n[l];return n}function Nt(e){return e.isComment&&!e.asyncFactory||" "===e.text}function Pt(e,t,r){var i,o=!e||!!e.$stable,a=Object.keys(t).length>0,s=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(o&&r&&r!==n&&s===r.$key&&!a&&!r.$hasNormal)return r;for(var u in i={},e)e[u]&&"$"!==u[0]&&(i[u]=Lt(t,u,e[u]))}else i={};for(var l in t)l in i||(i[l]=Ot(t,l));return e&&Object.isExtensible(e)&&(e._normalized=i),G(i,"$stable",o),G(i,"$key",s),G(i,"$hasNormal",a),i}function Lt(e,t,n){var r=function(){var e=arguments.length?n.apply(null,arguments):n({});return e=e&&"object"===typeof e&&!Array.isArray(e)?[e]:wt(e),e&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e};return n.proxy&&Object.defineProperty(e,t,{get:r,enumerable:!0,configurable:!0}),r}function Ot(e,t){return function(){return e[t]}}function Ft(e,t){var n,r,o,a,s;if(Array.isArray(e)||"string"===typeof e)for(n=new Array(e.length),r=0,o=e.length;r<o;r++)n[r]=t(e[r],r);else if("number"===typeof e)for(n=new Array(e),r=0;r<e;r++)n[r]=t(r+1,r);else if(u(e))if(fe&&e[Symbol.iterator]){n=[];var l=e[Symbol.iterator](),d=l.next();while(!d.done)n.push(t(d.value,n.length)),d=l.next()}else for(a=Object.keys(e),n=new Array(a.length),r=0,o=a.length;r<o;r++)s=a[r],n[r]=t(e[s],s,r);return i(n)||(n=[]),n._isVList=!0,n}function Bt(e,t,n,r){var i,o=this.$scopedSlots[e];o?(n=n||{},r&&(n=C(C({},r),n)),i=o(n)||t):i=this.$slots[e]||t;var a=n&&n.slot;return a?this.$createElement("template",{slot:a},i):i}function kt(e){return Xe(this.$options,"filters",e,!0)||O}function Ut(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function Ht(e,t,n,r,i){var o=K.keyCodes[t]||n;return i&&r&&!K.keyCodes[t]?Ut(i,r):o?Ut(o,e):r?x(r)!==t:void 0}function jt(e,t,n,r,i){if(n)if(u(n)){var o;Array.isArray(n)&&(n=N(n));var a=function(a){if("class"===a||"style"===a||y(a))o=e;else{var s=e.attrs&&e.attrs.type;o=r||K.mustUseProp(t,s,a)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var u=S(a),l=x(a);if(!(u in o)&&!(l in o)&&(o[a]=n[a],i)){var d=e.on||(e.on={});d["update:"+a]=function(e){n[a]=e}}};for(var s in n)a(s)}else;return e}function Kt(e,t){var n=this._staticTrees||(this._staticTrees=[]),r=n[e];return r&&!t?r:(r=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),qt(r,"__static__"+e,!1),r)}function Vt(e,t,n){return qt(e,"__once__"+t+(n?"_"+n:""),!0),e}function qt(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!==typeof e[r]&&Gt(e[r],t+"_"+r,n);else Gt(e,t,n)}function Gt(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function Yt(e,t){if(t)if(d(t)){var n=e.on=e.on?C({},e.on):{};for(var r in t){var i=n[r],o=t[r];n[r]=i?[].concat(i,o):o}}else;return e}function zt(e,t,n,r){t=t||{$stable:!n};for(var i=0;i<e.length;i++){var o=e[i];Array.isArray(o)?zt(o,t,n):o&&(o.proxy&&(o.fn.proxy=!0),t[o.key]=o.fn)}return r&&(t.$key=r),t}function Wt(e,t){for(var n=0;n<t.length;n+=2){var r=t[n];"string"===typeof r&&r&&(e[t[n]]=t[n+1])}return e}function Xt(e,t){return"string"===typeof e?t+e:e}function $t(e){e._o=Vt,e._n=m,e._s=p,e._l=Ft,e._t=Bt,e._q=F,e._i=B,e._m=Kt,e._f=kt,e._k=Ht,e._b=jt,e._v=Te,e._e=be,e._u=zt,e._g=Yt,e._d=Wt,e._p=Xt}function Qt(e,t,r,i,a){var s,u=this,l=a.options;E(i,"_uid")?(s=Object.create(i),s._original=i):(s=i,i=i._original);var d=o(l._compiled),c=!d;this.data=e,this.props=t,this.children=r,this.parent=i,this.listeners=e.on||n,this.injections=Mt(l.inject,i),this.slots=function(){return u.$slots||Pt(e.scopedSlots,u.$slots=Ct(r,i)),u.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Pt(e.scopedSlots,this.slots())}}),d&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=Pt(e.scopedSlots,this.$slots)),l._scopeId?this._c=function(e,t,n,r){var o=cn(s,e,t,n,r,c);return o&&!Array.isArray(o)&&(o.fnScopeId=l._scopeId,o.fnContext=i),o}:this._c=function(e,t,n,r){return cn(s,e,t,n,r,c)}}function Jt(e,t,r,o,a){var s=e.options,u={},l=s.props;if(i(l))for(var d in l)u[d]=$e(d,l,t||n);else i(r.attrs)&&en(u,r.attrs),i(r.props)&&en(u,r.props);var c=new Qt(r,u,a,o,e),f=s.render.call(null,c._c,c);if(f instanceof _e)return Zt(f,r,c.parent,s,c);if(Array.isArray(f)){for(var h=wt(f)||[],p=new Array(h.length),m=0;m<h.length;m++)p[m]=Zt(h[m],r,c.parent,s,c);return p}}function Zt(e,t,n,r,i){var o=Se(e);return o.fnContext=n,o.fnOptions=r,t.slot&&((o.data||(o.data={})).slot=t.slot),o}function en(e,t){for(var n in t)e[S(n)]=t[n]}$t(Qt.prototype);var tn={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;tn.prepatch(n,n)}else{var r=e.componentInstance=on(e,Mn);r.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions,r=t.componentInstance=e.componentInstance;On(r,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,Un(n,"mounted")),e.data.keepAlive&&(t._isMounted?Qn(n):Bn(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?kn(t,!0):t.$destroy())}},nn=Object.keys(tn);function rn(e,t,n,a,s){if(!r(e)){var l=n.$options._base;if(u(e)&&(e=l.extend(e)),"function"===typeof e){var d;if(r(e.cid)&&(d=e,e=bn(d,l),void 0===e))return En(d,t,n,a,s);t=t||{},Er(e),i(t.model)&&un(e.options,t);var c=Tt(t,e,s);if(o(e.options.functional))return Jt(e,c,t,n,a);var f=t.on;if(t.on=t.nativeOn,o(e.options.abstract)){var h=t.slot;t={},h&&(t.slot=h)}an(t);var p=e.options.name||s,m=new _e("vue-component-"+e.cid+(p?"-"+p:""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:c,listeners:f,tag:s,children:a},d);return m}}}function on(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},r=e.data.inlineTemplate;return i(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new e.componentOptions.Ctor(n)}function an(e){for(var t=e.hook||(e.hook={}),n=0;n<nn.length;n++){var r=nn[n],i=t[r],o=tn[r];i===o||i&&i._merged||(t[r]=i?sn(o,i):o)}}function sn(e,t){var n=function(n,r){e(n,r),t(n,r)};return n._merged=!0,n}function un(e,t){var n=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var o=t.on||(t.on={}),a=o[r],s=t.model.callback;i(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(o[r]=[s].concat(a)):o[r]=s}var ln=1,dn=2;function cn(e,t,n,r,i,a){return(Array.isArray(n)||s(n))&&(i=r,r=n,n=void 0),o(a)&&(i=dn),fn(e,t,n,r,i)}function fn(e,t,n,r,o){if(i(n)&&i(n.__ob__))return be();if(i(n)&&i(n.is)&&(t=n.is),!t)return be();var a,s,u;(Array.isArray(r)&&"function"===typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),o===dn?r=wt(r):o===ln&&(r=It(r)),"string"===typeof t)?(s=e.$vnode&&e.$vnode.ns||K.getTagNamespace(t),a=K.isReservedTag(t)?new _e(K.parsePlatformTagName(t),n,r,void 0,void 0,e):n&&n.pre||!i(u=Xe(e.$options,"components",t))?new _e(t,n,r,void 0,void 0,e):rn(u,n,e,r,t)):a=rn(t,n,e,r);return Array.isArray(a)?a:i(a)?(i(s)&&hn(a,s),i(n)&&pn(n),a):be()}function hn(e,t,n){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,n=!0),i(e.children))for(var a=0,s=e.children.length;a<s;a++){var u=e.children[a];i(u.tag)&&(r(u.ns)||o(n)&&"svg"!==u.tag)&&hn(u,t,n)}}function pn(e){u(e.style)&&gt(e.style),u(e.class)&&gt(e.class)}function mn(e){e._vnode=null,e._staticTrees=null;var t=e.$options,r=e.$vnode=t._parentVnode,i=r&&r.context;e.$slots=Ct(t._renderChildren,i),e.$scopedSlots=n,e._c=function(t,n,r,i){return cn(e,t,n,r,i,!1)},e.$createElement=function(t,n,r,i){return cn(e,t,n,r,i,!0)};var o=r&&r.data;Le(e,"$attrs",o&&o.attrs||n,null,!0),Le(e,"$listeners",t._parentListeners||n,null,!0)}var gn,yn=null;function vn(e){$t(e.prototype),e.prototype.$nextTick=function(e){return pt(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,r=n.render,i=n._parentVnode;i&&(t.$scopedSlots=Pt(i.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=i;try{yn=t,e=r.call(t._renderProxy,t.$createElement)}catch(Ta){tt(Ta,t,"render"),e=t._vnode}finally{yn=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof _e||(e=be()),e.parent=i,e}}function _n(e,t){return(e.__esModule||fe&&"Module"===e[Symbol.toStringTag])&&(e=e.default),u(e)?t.extend(e):e}function En(e,t,n,r,i){var o=be();return o.asyncFactory=e,o.asyncMeta={data:t,context:n,children:r,tag:i},o}function bn(e,t){if(o(e.error)&&i(e.errorComp))return e.errorComp;if(i(e.resolved))return e.resolved;var n=yn;if(n&&i(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n),o(e.loading)&&i(e.loadingComp))return e.loadingComp;if(n&&!i(e.owners)){var a=e.owners=[n],s=!0;n.$on("hook:destroyed",function(){return v(a,n)});var l=function(e){for(var t=0,n=a.length;t<n;t++)a[t].$forceUpdate();e&&(a.length=0)},d=k(function(n){e.resolved=_n(n,t),s?a.length=0:l(!0)}),c=k(function(t){i(e.errorComp)&&(e.error=!0,l(!0))}),f=e(d,c);return u(f)&&(h(f)?r(e.resolved)&&f.then(d,c):h(f.component)&&(f.component.then(d,c),i(f.error)&&(e.errorComp=_n(f.error,t)),i(f.loading)&&(e.loadingComp=_n(f.loading,t),0===f.delay?e.loading=!0:setTimeout(function(){r(e.resolved)&&r(e.error)&&(e.loading=!0,l(!1))},f.delay||200)),i(f.timeout)&&setTimeout(function(){r(e.resolved)&&c(null)},f.timeout))),s=!1,e.loading?e.loadingComp:e.resolved}}function Tn(e){return e.isComment&&e.asyncFactory}function Sn(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(i(n)&&(i(n.componentOptions)||Tn(n)))return n}}function In(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&Dn(e,t)}function wn(e,t){gn.$on(e,t)}function xn(e,t){gn.$off(e,t)}function An(e,t){var n=gn;return function r(){var i=t.apply(null,arguments);null!==i&&n.$off(e,r)}}function Dn(e,t,n){gn=e,Et(t,n||{},wn,xn,An,e),gn=void 0}function Rn(e){var t=/^hook:/;e.prototype.$on=function(e,n){var r=this;if(Array.isArray(e))for(var i=0,o=e.length;i<o;i++)r.$on(e[i],n);else(r._events[e]||(r._events[e]=[])).push(n),t.test(e)&&(r._hasHookEvent=!0);return r},e.prototype.$once=function(e,t){var n=this;function r(){n.$off(e,r),t.apply(n,arguments)}return r.fn=t,n.$on(e,r),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var r=0,i=e.length;r<i;r++)n.$off(e[r],t);return n}var o,a=n._events[e];if(!a)return n;if(!t)return n._events[e]=null,n;var s=a.length;while(s--)if(o=a[s],o===t||o.fn===t){a.splice(s,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?M(n):n;for(var r=M(arguments,1),i='event handler for "'+e+'"',o=0,a=n.length;o<a;o++)nt(n[o],t,r,t,i)}return t}}var Mn=null;function Cn(e){var t=Mn;return Mn=e,function(){Mn=t}}function Nn(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function Pn(e){e.prototype._update=function(e,t){var n=this,r=n.$el,i=n._vnode,o=Cn(n);n._vnode=e,n.$el=i?n.__patch__(i,e):n.__patch__(n.$el,e,t,!1),o(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Un(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||v(t.$children,e),e._watcher&&e._watcher.teardown();var n=e._watchers.length;while(n--)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Un(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function Ln(e,t,n){var r;return e.$el=t,e.$options.render||(e.$options.render=be),Un(e,"beforeMount"),r=function(){e._update(e._render(),n)},new tr(e,r,P,{before:function(){e._isMounted&&!e._isDestroyed&&Un(e,"beforeUpdate")}},!0),n=!1,null==e.$vnode&&(e._isMounted=!0,Un(e,"mounted")),e}function On(e,t,r,i,o){var a=i.data.scopedSlots,s=e.$scopedSlots,u=!!(a&&!a.$stable||s!==n&&!s.$stable||a&&e.$scopedSlots.$key!==a.$key),l=!!(o||e.$options._renderChildren||u);if(e.$options._parentVnode=i,e.$vnode=i,e._vnode&&(e._vnode.parent=i),e.$options._renderChildren=o,e.$attrs=i.data.attrs||n,e.$listeners=r||n,t&&e.$options.props){Re(!1);for(var d=e._props,c=e.$options._propKeys||[],f=0;f<c.length;f++){var h=c[f],p=e.$options.props;d[h]=$e(h,p,t,e)}Re(!0),e.$options.propsData=t}r=r||n;var m=e.$options._parentListeners;e.$options._parentListeners=r,Dn(e,r,m),l&&(e.$slots=Ct(o,i.context),e.$forceUpdate())}function Fn(e){while(e&&(e=e.$parent))if(e._inactive)return!0;return!1}function Bn(e,t){if(t){if(e._directInactive=!1,Fn(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Bn(e.$children[n]);Un(e,"activated")}}function kn(e,t){if((!t||(e._directInactive=!0,!Fn(e)))&&!e._inactive){e._inactive=!0;for(var n=0;n<e.$children.length;n++)kn(e.$children[n]);Un(e,"deactivated")}}function Un(e,t){ye();var n=e.$options[t],r=t+" hook";if(n)for(var i=0,o=n.length;i<o;i++)nt(n[i],e,null,e,r);e._hasHookEvent&&e.$emit("hook:"+t),ve()}var Hn=[],jn=[],Kn={},Vn=!1,qn=!1,Gn=0;function Yn(){Gn=Hn.length=jn.length=0,Kn={},Vn=qn=!1}var zn=0,Wn=Date.now;function Xn(){var e,t;for(zn=Wn(),qn=!0,Hn.sort(function(e,t){return e.id-t.id}),Gn=0;Gn<Hn.length;Gn++)e=Hn[Gn],e.before&&e.before(),t=e.id,Kn[t]=null,e.run();var n=jn.slice(),r=Hn.slice();Yn(),Jn(n),$n(r),le&&K.devtools&&le.emit("flush")}function $n(e){var t=e.length;while(t--){var n=e[t],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&Un(r,"updated")}}function Qn(e){e._inactive=!1,jn.push(e)}function Jn(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Bn(e[t],!0)}function Zn(e){var t=e.id;if(null==Kn[t]){if(Kn[t]=!0,qn){var n=Hn.length-1;while(n>Gn&&Hn[n].id>e.id)n--;Hn.splice(n+1,0,e)}else Hn.push(e);Vn||(Vn=!0,pt(Xn))}}$&&window.performance&&"function"===typeof performance.now&&document.createEvent("Event").timeStamp<=performance.now()&&(Wn=function(){return performance.now()});var er=0,tr=function(e,t,n,r,i){this.vm=e,i&&(e._watcher=this),e._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++er,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ce,this.newDepIds=new ce,this.expression="","function"===typeof t?this.getter=t:(this.getter=z(t),this.getter||(this.getter=P)),this.value=this.lazy?void 0:this.get()};tr.prototype.get=function(){var e;ye(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(Ta){if(!this.user)throw Ta;tt(Ta,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&gt(e),ve(),this.cleanupDeps()}return e},tr.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},tr.prototype.cleanupDeps=function(){var e=this.deps.length;while(e--){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},tr.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():Zn(this)},tr.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||u(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(Ta){tt(Ta,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},tr.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},tr.prototype.depend=function(){var e=this.deps.length;while(e--)this.deps[e].depend()},tr.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||v(this.vm._watchers,this);var e=this.deps.length;while(e--)this.deps[e].removeSub(this);this.active=!1}};var nr={enumerable:!0,configurable:!0,get:P,set:P};function rr(e,t,n){nr.get=function(){return this[t][n]},nr.set=function(e){this[t][n]=e},Object.defineProperty(e,n,nr)}function ir(e){e._watchers=[];var t=e.$options;t.props&&or(e,t.props),t.methods&&hr(e,t.methods),t.data?ar(e):Pe(e._data={},!0),t.computed&&lr(e,t.computed),t.watch&&t.watch!==oe&&pr(e,t.watch)}function or(e,t){var n=e.$options.propsData||{},r=e._props={},i=e.$options._propKeys=[],o=!e.$parent;o||Re(!1);var a=function(o){i.push(o);var a=$e(o,t,n,e);Le(r,o,a),o in e||rr(e,"_props",o)};for(var s in t)a(s);Re(!0)}function ar(e){var t=e.$options.data;t=e._data="function"===typeof t?sr(t,e):t||{},d(t)||(t={});var n=Object.keys(t),r=e.$options.props,i=(e.$options.methods,n.length);while(i--){var o=n[i];0,r&&E(r,o)||q(o)||rr(e,"_data",o)}Pe(t,!0)}function sr(e,t){ye();try{return e.call(t,t)}catch(Ta){return tt(Ta,t,"data()"),{}}finally{ve()}}var ur={lazy:!0};function lr(e,t){var n=e._computedWatchers=Object.create(null),r=ue();for(var i in t){var o=t[i],a="function"===typeof o?o:o.get;0,r||(n[i]=new tr(e,a||P,P,ur)),i in e||dr(e,i,o)}}function dr(e,t,n){var r=!ue();"function"===typeof n?(nr.get=r?cr(t):fr(n),nr.set=P):(nr.get=n.get?r&&!1!==n.cache?cr(t):fr(n.get):P,nr.set=n.set||P),Object.defineProperty(e,t,nr)}function cr(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),me.target&&t.depend(),t.value}}function fr(e){return function(){return e.call(this,this)}}function hr(e,t){e.$options.props;for(var n in t)e[n]="function"!==typeof t[n]?P:R(t[n],e)}function pr(e,t){for(var n in t){var r=t[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)mr(e,n,r[i]);else mr(e,n,r)}}function mr(e,t,n,r){return d(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=e[n]),e.$watch(t,n,r)}function gr(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Oe,e.prototype.$delete=Fe,e.prototype.$watch=function(e,t,n){var r=this;if(d(t))return mr(r,e,t,n);n=n||{},n.user=!0;var i=new tr(r,e,t,n);if(n.immediate)try{t.call(r,i.value)}catch(o){tt(o,r,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}}}var yr=0;function vr(e){e.prototype._init=function(e){var t=this;t._uid=yr++,t._isVue=!0,e&&e._isComponent?_r(t,e):t.$options=We(Er(t.constructor),e||{},t),t._renderProxy=t,t._self=t,Nn(t),In(t),mn(t),Un(t,"beforeCreate"),Rt(t),ir(t),Dt(t),Un(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function _r(e,t){var n=e.$options=Object.create(e.constructor.options),r=t._parentVnode;n.parent=t.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function Er(e){var t=e.options;if(e.super){var n=Er(e.super),r=e.superOptions;if(n!==r){e.superOptions=n;var i=br(e);i&&C(e.extendOptions,i),t=e.options=We(n,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function br(e){var t,n=e.options,r=e.sealedOptions;for(var i in n)n[i]!==r[i]&&(t||(t={}),t[i]=n[i]);return t}function Tr(e){this._init(e)}function Sr(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=M(arguments,1);return n.unshift(this),"function"===typeof e.install?e.install.apply(e,n):"function"===typeof e&&e.apply(null,n),t.push(e),this}}function Ir(e){e.mixin=function(e){return this.options=We(this.options,e),this}}function wr(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=n.cid,i=e._Ctor||(e._Ctor={});if(i[r])return i[r];var o=e.name||n.options.name;var a=function(e){this._init(e)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=t++,a.options=We(n.options,e),a["super"]=n,a.options.props&&xr(a),a.options.computed&&Ar(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,H.forEach(function(e){a[e]=n[e]}),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=e,a.sealedOptions=C({},a.options),i[r]=a,a}}function xr(e){var t=e.options.props;for(var n in t)rr(e.prototype,"_props",n)}function Ar(e){var t=e.options.computed;for(var n in t)dr(e.prototype,n,t[n])}function Dr(e){H.forEach(function(t){e[t]=function(e,n){return n?("component"===t&&d(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"===typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}})}function Rr(e){return e&&(e.Ctor.options.name||e.tag)}function Mr(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"===typeof e?e.split(",").indexOf(t)>-1:!!c(e)&&e.test(t)}function Cr(e,t){var n=e.cache,r=e.keys,i=e._vnode;for(var o in n){var a=n[o];if(a){var s=Rr(a.componentOptions);s&&!t(s)&&Nr(n,o,r,i)}}}function Nr(e,t,n,r){var i=e[t];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),e[t]=null,v(n,t)}vr(Tr),gr(Tr),Rn(Tr),Pn(Tr),vn(Tr);var Pr=[String,RegExp,Array],Lr={name:"keep-alive",abstract:!0,props:{include:Pr,exclude:Pr,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)Nr(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",function(t){Cr(e,function(e){return Mr(t,e)})}),this.$watch("exclude",function(t){Cr(e,function(e){return!Mr(t,e)})})},render:function(){var e=this.$slots.default,t=Sn(e),n=t&&t.componentOptions;if(n){var r=Rr(n),i=this,o=i.include,a=i.exclude;if(o&&(!r||!Mr(o,r))||a&&r&&Mr(a,r))return t;var s=this,u=s.cache,l=s.keys,d=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;u[d]?(t.componentInstance=u[d].componentInstance,v(l,d),l.push(d)):(u[d]=t,l.push(d),this.max&&l.length>parseInt(this.max)&&Nr(u,l[0],l,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}},Or={KeepAlive:Lr};function Fr(e){var t={get:function(){return K}};Object.defineProperty(e,"config",t),e.util={warn:he,extend:C,mergeOptions:We,defineReactive:Le},e.set=Oe,e.delete=Fe,e.nextTick=pt,e.observable=function(e){return Pe(e),e},e.options=Object.create(null),H.forEach(function(t){e.options[t+"s"]=Object.create(null)}),e.options._base=e,C(e.options.components,Or),Sr(e),Ir(e),wr(e),Dr(e)}Fr(Tr),Object.defineProperty(Tr.prototype,"$isServer",{get:ue}),Object.defineProperty(Tr.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Tr,"FunctionalRenderContext",{value:Qt}),Tr.version="2.6.9";var Br=g("style,class"),kr=g("input,textarea,option,select,progress"),Ur=function(e,t,n){return"value"===n&&kr(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},Hr=g("contenteditable,draggable,spellcheck"),jr=g("events,caret,typing,plaintext-only"),Kr=function(e,t){return zr(t)||"false"===t?"false":"contenteditable"===e&&jr(t)?t:"true"},Vr=g("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),qr="http://www.w3.org/1999/xlink",Gr=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Yr=function(e){return Gr(e)?e.slice(6,e.length):""},zr=function(e){return null==e||!1===e};function Wr(e){var t=e.data,n=e,r=e;while(i(r.componentInstance))r=r.componentInstance._vnode,r&&r.data&&(t=Xr(r.data,t));while(i(n=n.parent))n&&n.data&&(t=Xr(t,n.data));return $r(t.staticClass,t.class)}function Xr(e,t){return{staticClass:Qr(e.staticClass,t.staticClass),class:i(e.class)?[e.class,t.class]:t.class}}function $r(e,t){return i(e)||i(t)?Qr(e,Jr(t)):""}function Qr(e,t){return e?t?e+" "+t:e:t||""}function Jr(e){return Array.isArray(e)?Zr(e):u(e)?ei(e):"string"===typeof e?e:""}function Zr(e){for(var t,n="",r=0,o=e.length;r<o;r++)i(t=Jr(e[r]))&&""!==t&&(n&&(n+=" "),n+=t);return n}function ei(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}var ti={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},ni=g("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),ri=g("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),ii=function(e){return ni(e)||ri(e)};function oi(e){return ri(e)?"svg":"math"===e?"math":void 0}var ai=Object.create(null);function si(e){if(!$)return!0;if(ii(e))return!1;if(e=e.toLowerCase(),null!=ai[e])return ai[e];var t=document.createElement(e);return e.indexOf("-")>-1?ai[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:ai[e]=/HTMLUnknownElement/.test(t.toString())}var ui=g("text,number,password,search,email,tel,url");function li(e){if("string"===typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}function di(e,t){var n=document.createElement(e);return"select"!==e?n:(t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)}function ci(e,t){return document.createElementNS(ti[e],t)}function fi(e){return document.createTextNode(e)}function hi(e){return document.createComment(e)}function pi(e,t,n){e.insertBefore(t,n)}function mi(e,t){e.removeChild(t)}function gi(e,t){e.appendChild(t)}function yi(e){return e.parentNode}function vi(e){return e.nextSibling}function _i(e){return e.tagName}function Ei(e,t){e.textContent=t}function bi(e,t){e.setAttribute(t,"")}var Ti=Object.freeze({createElement:di,createElementNS:ci,createTextNode:fi,createComment:hi,insertBefore:pi,removeChild:mi,appendChild:gi,parentNode:yi,nextSibling:vi,tagName:_i,setTextContent:Ei,setStyleScope:bi}),Si={create:function(e,t){Ii(t)},update:function(e,t){e.data.ref!==t.data.ref&&(Ii(e,!0),Ii(t))},destroy:function(e){Ii(e,!0)}};function Ii(e,t){var n=e.data.ref;if(i(n)){var r=e.context,o=e.componentInstance||e.elm,a=r.$refs;t?Array.isArray(a[n])?v(a[n],o):a[n]===o&&(a[n]=void 0):e.data.refInFor?Array.isArray(a[n])?a[n].indexOf(o)<0&&a[n].push(o):a[n]=[o]:a[n]=o}}var wi=new _e("",{},[]),xi=["create","activate","update","remove","destroy"];function Ai(e,t){return e.key===t.key&&(e.tag===t.tag&&e.isComment===t.isComment&&i(e.data)===i(t.data)&&Di(e,t)||o(e.isAsyncPlaceholder)&&e.asyncFactory===t.asyncFactory&&r(t.asyncFactory.error))}function Di(e,t){if("input"!==e.tag)return!0;var n,r=i(n=e.data)&&i(n=n.attrs)&&n.type,o=i(n=t.data)&&i(n=n.attrs)&&n.type;return r===o||ui(r)&&ui(o)}function Ri(e,t,n){var r,o,a={};for(r=t;r<=n;++r)o=e[r].key,i(o)&&(a[o]=r);return a}function Mi(e){var t,n,a={},u=e.modules,l=e.nodeOps;for(t=0;t<xi.length;++t)for(a[xi[t]]=[],n=0;n<u.length;++n)i(u[n][xi[t]])&&a[xi[t]].push(u[n][xi[t]]);function d(e){return new _e(l.tagName(e).toLowerCase(),{},[],void 0,e)}function c(e,t){function n(){0===--n.listeners&&f(e)}return n.listeners=t,n}function f(e){var t=l.parentNode(e);i(t)&&l.removeChild(t,e)}function h(e,t,n,r,a,s,u){if(i(e.elm)&&i(s)&&(e=s[u]=Se(e)),e.isRootInsert=!a,!p(e,t,n,r)){var d=e.data,c=e.children,f=e.tag;i(f)?(e.elm=e.ns?l.createElementNS(e.ns,f):l.createElement(f,e),T(e),_(e,c,t),i(d)&&b(e,t),v(n,e.elm,r)):o(e.isComment)?(e.elm=l.createComment(e.text),v(n,e.elm,r)):(e.elm=l.createTextNode(e.text),v(n,e.elm,r))}}function p(e,t,n,r){var a=e.data;if(i(a)){var s=i(e.componentInstance)&&a.keepAlive;if(i(a=a.hook)&&i(a=a.init)&&a(e,!1),i(e.componentInstance))return m(e,t),v(n,e.elm,r),o(s)&&y(e,t,n,r),!0}}function m(e,t){i(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,E(e)?(b(e,t),T(e)):(Ii(e),t.push(e))}function y(e,t,n,r){var o,s=e;while(s.componentInstance)if(s=s.componentInstance._vnode,i(o=s.data)&&i(o=o.transition)){for(o=0;o<a.activate.length;++o)a.activate[o](wi,s);t.push(s);break}v(n,e.elm,r)}function v(e,t,n){i(e)&&(i(n)?l.parentNode(n)===e&&l.insertBefore(e,t,n):l.appendChild(e,t))}function _(e,t,n){if(Array.isArray(t)){0;for(var r=0;r<t.length;++r)h(t[r],n,e.elm,null,!0,t,r)}else s(e.text)&&l.appendChild(e.elm,l.createTextNode(String(e.text)))}function E(e){while(e.componentInstance)e=e.componentInstance._vnode;return i(e.tag)}function b(e,n){for(var r=0;r<a.create.length;++r)a.create[r](wi,e);t=e.data.hook,i(t)&&(i(t.create)&&t.create(wi,e),i(t.insert)&&n.push(e))}function T(e){var t;if(i(t=e.fnScopeId))l.setStyleScope(e.elm,t);else{var n=e;while(n)i(t=n.context)&&i(t=t.$options._scopeId)&&l.setStyleScope(e.elm,t),n=n.parent}i(t=Mn)&&t!==e.context&&t!==e.fnContext&&i(t=t.$options._scopeId)&&l.setStyleScope(e.elm,t)}function S(e,t,n,r,i,o){for(;r<=i;++r)h(n[r],o,e,t,!1,n,r)}function I(e){var t,n,r=e.data;if(i(r))for(i(t=r.hook)&&i(t=t.destroy)&&t(e),t=0;t<a.destroy.length;++t)a.destroy[t](e);if(i(t=e.children))for(n=0;n<e.children.length;++n)I(e.children[n])}function w(e,t,n,r){for(;n<=r;++n){var o=t[n];i(o)&&(i(o.tag)?(x(o),I(o)):f(o.elm))}}function x(e,t){if(i(t)||i(e.data)){var n,r=a.remove.length+1;for(i(t)?t.listeners+=r:t=c(e.elm,r),i(n=e.componentInstance)&&i(n=n._vnode)&&i(n.data)&&x(n,t),n=0;n<a.remove.length;++n)a.remove[n](e,t);i(n=e.data.hook)&&i(n=n.remove)?n(e,t):t()}else f(e.elm)}function A(e,t,n,o,a){var s,u,d,c,f=0,p=0,m=t.length-1,g=t[0],y=t[m],v=n.length-1,_=n[0],E=n[v],b=!a;while(f<=m&&p<=v)r(g)?g=t[++f]:r(y)?y=t[--m]:Ai(g,_)?(R(g,_,o,n,p),g=t[++f],_=n[++p]):Ai(y,E)?(R(y,E,o,n,v),y=t[--m],E=n[--v]):Ai(g,E)?(R(g,E,o,n,v),b&&l.insertBefore(e,g.elm,l.nextSibling(y.elm)),g=t[++f],E=n[--v]):Ai(y,_)?(R(y,_,o,n,p),b&&l.insertBefore(e,y.elm,g.elm),y=t[--m],_=n[++p]):(r(s)&&(s=Ri(t,f,m)),u=i(_.key)?s[_.key]:D(_,t,f,m),r(u)?h(_,o,e,g.elm,!1,n,p):(d=t[u],Ai(d,_)?(R(d,_,o,n,p),t[u]=void 0,b&&l.insertBefore(e,d.elm,g.elm)):h(_,o,e,g.elm,!1,n,p)),_=n[++p]);f>m?(c=r(n[v+1])?null:n[v+1].elm,S(e,c,n,p,v,o)):p>v&&w(e,t,f,m)}function D(e,t,n,r){for(var o=n;o<r;o++){var a=t[o];if(i(a)&&Ai(e,a))return o}}function R(e,t,n,s,u,d){if(e!==t){i(t.elm)&&i(s)&&(t=s[u]=Se(t));var c=t.elm=e.elm;if(o(e.isAsyncPlaceholder))i(t.asyncFactory.resolved)?N(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(o(t.isStatic)&&o(e.isStatic)&&t.key===e.key&&(o(t.isCloned)||o(t.isOnce)))t.componentInstance=e.componentInstance;else{var f,h=t.data;i(h)&&i(f=h.hook)&&i(f=f.prepatch)&&f(e,t);var p=e.children,m=t.children;if(i(h)&&E(t)){for(f=0;f<a.update.length;++f)a.update[f](e,t);i(f=h.hook)&&i(f=f.update)&&f(e,t)}r(t.text)?i(p)&&i(m)?p!==m&&A(c,p,m,n,d):i(m)?(i(e.text)&&l.setTextContent(c,""),S(c,null,m,0,m.length-1,n)):i(p)?w(c,p,0,p.length-1):i(e.text)&&l.setTextContent(c,""):e.text!==t.text&&l.setTextContent(c,t.text),i(h)&&i(f=h.hook)&&i(f=f.postpatch)&&f(e,t)}}}function M(e,t,n){if(o(n)&&i(e.parent))e.parent.data.pendingInsert=t;else for(var r=0;r<t.length;++r)t[r].data.hook.insert(t[r])}var C=g("attrs,class,staticClass,staticStyle,key");function N(e,t,n,r){var a,s=t.tag,u=t.data,l=t.children;if(r=r||u&&u.pre,t.elm=e,o(t.isComment)&&i(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(i(u)&&(i(a=u.hook)&&i(a=a.init)&&a(t,!0),i(a=t.componentInstance)))return m(t,n),!0;if(i(s)){if(i(l))if(e.hasChildNodes())if(i(a=u)&&i(a=a.domProps)&&i(a=a.innerHTML)){if(a!==e.innerHTML)return!1}else{for(var d=!0,c=e.firstChild,f=0;f<l.length;f++){if(!c||!N(c,l[f],n,r)){d=!1;break}c=c.nextSibling}if(!d||c)return!1}else _(t,l,n);if(i(u)){var h=!1;for(var p in u)if(!C(p)){h=!0,b(t,n);break}!h&&u["class"]&&gt(u["class"])}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,n,s){if(!r(t)){var u=!1,c=[];if(r(e))u=!0,h(t,c);else{var f=i(e.nodeType);if(!f&&Ai(e,t))R(e,t,c,null,null,s);else{if(f){if(1===e.nodeType&&e.hasAttribute(U)&&(e.removeAttribute(U),n=!0),o(n)&&N(e,t,c))return M(t,c,!0),e;e=d(e)}var p=e.elm,m=l.parentNode(p);if(h(t,c,p._leaveCb?null:m,l.nextSibling(p)),i(t.parent)){var g=t.parent,y=E(t);while(g){for(var v=0;v<a.destroy.length;++v)a.destroy[v](g);if(g.elm=t.elm,y){for(var _=0;_<a.create.length;++_)a.create[_](wi,g);var b=g.data.hook.insert;if(b.merged)for(var T=1;T<b.fns.length;T++)b.fns[T]()}else Ii(g);g=g.parent}}i(m)?w(m,[e],0,0):i(e.tag)&&I(e)}}return M(t,c,u),t.elm}i(e)&&I(e)}}var Ci={create:Ni,update:Ni,destroy:function(e){Ni(e,wi)}};function Ni(e,t){(e.data.directives||t.data.directives)&&Pi(e,t)}function Pi(e,t){var n,r,i,o=e===wi,a=t===wi,s=Oi(e.data.directives,e.context),u=Oi(t.data.directives,t.context),l=[],d=[];for(n in u)r=s[n],i=u[n],r?(i.oldValue=r.value,i.oldArg=r.arg,Bi(i,"update",t,e),i.def&&i.def.componentUpdated&&d.push(i)):(Bi(i,"bind",t,e),i.def&&i.def.inserted&&l.push(i));if(l.length){var c=function(){for(var n=0;n<l.length;n++)Bi(l[n],"inserted",t,e)};o?bt(t,"insert",c):c()}if(d.length&&bt(t,"postpatch",function(){for(var n=0;n<d.length;n++)Bi(d[n],"componentUpdated",t,e)}),!o)for(n in s)u[n]||Bi(s[n],"unbind",e,e,a)}var Li=Object.create(null);function Oi(e,t){var n,r,i=Object.create(null);if(!e)return i;for(n=0;n<e.length;n++)r=e[n],r.modifiers||(r.modifiers=Li),i[Fi(r)]=r,r.def=Xe(t.$options,"directives",r.name,!0);return i}function Fi(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function Bi(e,t,n,r,i){var o=e.def&&e.def[t];if(o)try{o(n.elm,e,n,r,i)}catch(Ta){tt(Ta,n.context,"directive "+e.name+" "+t+" hook")}}var ki=[Si,Ci];function Ui(e,t){var n=t.componentOptions;if((!i(n)||!1!==n.Ctor.options.inheritAttrs)&&(!r(e.data.attrs)||!r(t.data.attrs))){var o,a,s,u=t.elm,l=e.data.attrs||{},d=t.data.attrs||{};for(o in i(d.__ob__)&&(d=t.data.attrs=C({},d)),d)a=d[o],s=l[o],s!==a&&Hi(u,o,a);for(o in(ee||ne)&&d.value!==l.value&&Hi(u,"value",d.value),l)r(d[o])&&(Gr(o)?u.removeAttributeNS(qr,Yr(o)):Hr(o)||u.removeAttribute(o))}}function Hi(e,t,n){e.tagName.indexOf("-")>-1?ji(e,t,n):Vr(t)?zr(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):Hr(t)?e.setAttribute(t,Kr(t,n)):Gr(t)?zr(n)?e.removeAttributeNS(qr,Yr(t)):e.setAttributeNS(qr,t,n):ji(e,t,n)}function ji(e,t,n){if(zr(n))e.removeAttribute(t);else{if(ee&&!te&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var r=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",r)};e.addEventListener("input",r),e.__ieph=!0}e.setAttribute(t,n)}}var Ki={create:Ui,update:Ui};function Vi(e,t){var n=t.elm,o=t.data,a=e.data;if(!(r(o.staticClass)&&r(o.class)&&(r(a)||r(a.staticClass)&&r(a.class)))){var s=Wr(t),u=n._transitionClasses;i(u)&&(s=Qr(s,Jr(u))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var qi,Gi={create:Vi,update:Vi},Yi="__r",zi="__c";function Wi(e){if(i(e[Yi])){var t=ee?"change":"input";e[t]=[].concat(e[Yi],e[t]||[]),delete e[Yi]}i(e[zi])&&(e.change=[].concat(e[zi],e.change||[]),delete e[zi])}function Xi(e,t,n){var r=qi;return function i(){var o=t.apply(null,arguments);null!==o&&Ji(e,i,n,r)}}var $i=at&&!(ie&&Number(ie[1])<=53);function Qi(e,t,n,r){if($i){var i=zn,o=t;t=o._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=i||e.timeStamp<=0||e.target.ownerDocument!==document)return o.apply(this,arguments)}}qi.addEventListener(e,t,ae?{capture:n,passive:r}:n)}function Ji(e,t,n,r){(r||qi).removeEventListener(e,t._wrapper||t,n)}function Zi(e,t){if(!r(e.data.on)||!r(t.data.on)){var n=t.data.on||{},i=e.data.on||{};qi=t.elm,Wi(n),Et(n,i,Qi,Ji,Xi,t.context),qi=void 0}}var eo,to={create:Zi,update:Zi};function no(e,t){if(!r(e.data.domProps)||!r(t.data.domProps)){var n,o,a=t.elm,s=e.data.domProps||{},u=t.data.domProps||{};for(n in i(u.__ob__)&&(u=t.data.domProps=C({},u)),s)r(u[n])&&(a[n]="");for(n in u){if(o=u[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),o===s[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n&&"PROGRESS"!==a.tagName){a._value=o;var l=r(o)?"":String(o);ro(a,l)&&(a.value=l)}else if("innerHTML"===n&&ri(a.tagName)&&r(a.innerHTML)){eo=eo||document.createElement("div"),eo.innerHTML="<svg>"+o+"</svg>";var d=eo.firstChild;while(a.firstChild)a.removeChild(a.firstChild);while(d.firstChild)a.appendChild(d.firstChild)}else if(o!==s[n])try{a[n]=o}catch(Ta){}}}}function ro(e,t){return!e.composing&&("OPTION"===e.tagName||io(e,t)||oo(e,t))}function io(e,t){var n=!0;try{n=document.activeElement!==e}catch(Ta){}return n&&e.value!==t}function oo(e,t){var n=e.value,r=e._vModifiers;if(i(r)){if(r.number)return m(n)!==m(t);if(r.trim)return n.trim()!==t.trim()}return n!==t}var ao={create:no,update:no},so=b(function(e){var t={},n=/;(?![^(]*\))/g,r=/:(.+)/;return e.split(n).forEach(function(e){if(e){var n=e.split(r);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t});function uo(e){var t=lo(e.style);return e.staticStyle?C(e.staticStyle,t):t}function lo(e){return Array.isArray(e)?N(e):"string"===typeof e?so(e):e}function co(e,t){var n,r={};if(t){var i=e;while(i.componentInstance)i=i.componentInstance._vnode,i&&i.data&&(n=uo(i.data))&&C(r,n)}(n=uo(e.data))&&C(r,n);var o=e;while(o=o.parent)o.data&&(n=uo(o.data))&&C(r,n);return r}var fo,ho=/^--/,po=/\s*!important$/,mo=function(e,t,n){if(ho.test(t))e.style.setProperty(t,n);else if(po.test(n))e.style.setProperty(x(t),n.replace(po,""),"important");else{var r=yo(t);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)e.style[r]=n[i];else e.style[r]=n}},go=["Webkit","Moz","ms"],yo=b(function(e){if(fo=fo||document.createElement("div").style,e=S(e),"filter"!==e&&e in fo)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<go.length;n++){var r=go[n]+t;if(r in fo)return r}});function vo(e,t){var n=t.data,o=e.data;if(!(r(n.staticStyle)&&r(n.style)&&r(o.staticStyle)&&r(o.style))){var a,s,u=t.elm,l=o.staticStyle,d=o.normalizedStyle||o.style||{},c=l||d,f=lo(t.data.style)||{};t.data.normalizedStyle=i(f.__ob__)?C({},f):f;var h=co(t,!0);for(s in c)r(h[s])&&mo(u,s,"");for(s in h)a=h[s],a!==c[s]&&mo(u,s,null==a?"":a)}}var _o={create:vo,update:vo},Eo=/\s+/;function bo(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Eo).forEach(function(t){return e.classList.add(t)}):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function To(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Eo).forEach(function(t){return e.classList.remove(t)}):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{var n=" "+(e.getAttribute("class")||"")+" ",r=" "+t+" ";while(n.indexOf(r)>=0)n=n.replace(r," ");n=n.trim(),n?e.setAttribute("class",n):e.removeAttribute("class")}}function So(e){if(e){if("object"===typeof e){var t={};return!1!==e.css&&C(t,Io(e.name||"v")),C(t,e),t}return"string"===typeof e?Io(e):void 0}}var Io=b(function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}}),wo=$&&!te,xo="transition",Ao="animation",Do="transition",Ro="transitionend",Mo="animation",Co="animationend";wo&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Do="WebkitTransition",Ro="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Mo="WebkitAnimation",Co="webkitAnimationEnd"));var No=$?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Po(e){No(function(){No(e)})}function Lo(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),bo(e,t))}function Oo(e,t){e._transitionClasses&&v(e._transitionClasses,t),To(e,t)}function Fo(e,t,n){var r=ko(e,t),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var s=i===xo?Ro:Co,u=0,l=function(){e.removeEventListener(s,d),n()},d=function(t){t.target===e&&++u>=a&&l()};setTimeout(function(){u<a&&l()},o+1),e.addEventListener(s,d)}var Bo=/\b(transform|all)(,|$)/;function ko(e,t){var n,r=window.getComputedStyle(e),i=(r[Do+"Delay"]||"").split(", "),o=(r[Do+"Duration"]||"").split(", "),a=Uo(i,o),s=(r[Mo+"Delay"]||"").split(", "),u=(r[Mo+"Duration"]||"").split(", "),l=Uo(s,u),d=0,c=0;t===xo?a>0&&(n=xo,d=a,c=o.length):t===Ao?l>0&&(n=Ao,d=l,c=u.length):(d=Math.max(a,l),n=d>0?a>l?xo:Ao:null,c=n?n===xo?o.length:u.length:0);var f=n===xo&&Bo.test(r[Do+"Property"]);return{type:n,timeout:d,propCount:c,hasTransform:f}}function Uo(e,t){while(e.length<t.length)e=e.concat(e);return Math.max.apply(null,t.map(function(t,n){return Ho(t)+Ho(e[n])}))}function Ho(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function jo(e,t){var n=e.elm;i(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=So(e.data.transition);if(!r(o)&&!i(n._enterCb)&&1===n.nodeType){var a=o.css,s=o.type,l=o.enterClass,d=o.enterToClass,c=o.enterActiveClass,f=o.appearClass,h=o.appearToClass,p=o.appearActiveClass,g=o.beforeEnter,y=o.enter,v=o.afterEnter,_=o.enterCancelled,E=o.beforeAppear,b=o.appear,T=o.afterAppear,S=o.appearCancelled,I=o.duration,w=Mn,x=Mn.$vnode;while(x&&x.parent)w=x.context,x=x.parent;var A=!w._isMounted||!e.isRootInsert;if(!A||b||""===b){var D=A&&f?f:l,R=A&&p?p:c,M=A&&h?h:d,C=A&&E||g,N=A&&"function"===typeof b?b:y,P=A&&T||v,L=A&&S||_,O=m(u(I)?I.enter:I);0;var F=!1!==a&&!te,B=qo(N),U=n._enterCb=k(function(){F&&(Oo(n,M),Oo(n,R)),U.cancelled?(F&&Oo(n,D),L&&L(n)):P&&P(n),n._enterCb=null});e.data.show||bt(e,"insert",function(){var t=n.parentNode,r=t&&t._pending&&t._pending[e.key];r&&r.tag===e.tag&&r.elm._leaveCb&&r.elm._leaveCb(),N&&N(n,U)}),C&&C(n),F&&(Lo(n,D),Lo(n,R),Po(function(){Oo(n,D),U.cancelled||(Lo(n,M),B||(Vo(O)?setTimeout(U,O):Fo(n,s,U)))})),e.data.show&&(t&&t(),N&&N(n,U)),F||B||U()}}}function Ko(e,t){var n=e.elm;i(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var o=So(e.data.transition);if(r(o)||1!==n.nodeType)return t();if(!i(n._leaveCb)){var a=o.css,s=o.type,l=o.leaveClass,d=o.leaveToClass,c=o.leaveActiveClass,f=o.beforeLeave,h=o.leave,p=o.afterLeave,g=o.leaveCancelled,y=o.delayLeave,v=o.duration,_=!1!==a&&!te,E=qo(h),b=m(u(v)?v.leave:v);0;var T=n._leaveCb=k(function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),_&&(Oo(n,d),Oo(n,c)),T.cancelled?(_&&Oo(n,l),g&&g(n)):(t(),p&&p(n)),n._leaveCb=null});y?y(S):S()}function S(){T.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),f&&f(n),_&&(Lo(n,l),Lo(n,c),Po(function(){Oo(n,l),T.cancelled||(Lo(n,d),E||(Vo(b)?setTimeout(T,b):Fo(n,s,T)))})),h&&h(n,T),_||E||T())}}function Vo(e){return"number"===typeof e&&!isNaN(e)}function qo(e){if(r(e))return!1;var t=e.fns;return i(t)?qo(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function Go(e,t){!0!==t.data.show&&jo(t)}var Yo=$?{create:Go,activate:Go,remove:function(e,t){!0!==e.data.show?Ko(e,t):t()}}:{},zo=[Ki,Gi,to,ao,_o,Yo],Wo=zo.concat(ki),Xo=Mi({nodeOps:Ti,modules:Wo});te&&document.addEventListener("selectionchange",function(){var e=document.activeElement;e&&e.vmodel&&ra(e,"input")});var $o={inserted:function(e,t,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?bt(n,"postpatch",function(){$o.componentUpdated(e,t,n)}):Qo(e,t,n.context),e._vOptions=[].map.call(e.options,ea)):("textarea"===n.tag||ui(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",ta),e.addEventListener("compositionend",na),e.addEventListener("change",na),te&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Qo(e,t,n.context);var r=e._vOptions,i=e._vOptions=[].map.call(e.options,ea);if(i.some(function(e,t){return!F(e,r[t])})){var o=e.multiple?t.value.some(function(e){return Zo(e,i)}):t.value!==t.oldValue&&Zo(t.value,i);o&&ra(e,"change")}}}};function Qo(e,t,n){Jo(e,t,n),(ee||ne)&&setTimeout(function(){Jo(e,t,n)},0)}function Jo(e,t,n){var r=t.value,i=e.multiple;if(!i||Array.isArray(r)){for(var o,a,s=0,u=e.options.length;s<u;s++)if(a=e.options[s],i)o=B(r,ea(a))>-1,a.selected!==o&&(a.selected=o);else if(F(ea(a),r))return void(e.selectedIndex!==s&&(e.selectedIndex=s));i||(e.selectedIndex=-1)}}function Zo(e,t){return t.every(function(t){return!F(t,e)})}function ea(e){return"_value"in e?e._value:e.value}function ta(e){e.target.composing=!0}function na(e){e.target.composing&&(e.target.composing=!1,ra(e.target,"input"))}function ra(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function ia(e){return!e.componentInstance||e.data&&e.data.transition?e:ia(e.componentInstance._vnode)}var oa={bind:function(e,t,n){var r=t.value;n=ia(n);var i=n.data&&n.data.transition,o=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;r&&i?(n.data.show=!0,jo(n,function(){e.style.display=o})):e.style.display=r?o:"none"},update:function(e,t,n){var r=t.value,i=t.oldValue;if(!r!==!i){n=ia(n);var o=n.data&&n.data.transition;o?(n.data.show=!0,r?jo(n,function(){e.style.display=e.__vOriginalDisplay}):Ko(n,function(){e.style.display="none"})):e.style.display=r?e.__vOriginalDisplay:"none"}},unbind:function(e,t,n,r,i){i||(e.style.display=e.__vOriginalDisplay)}},aa={model:$o,show:oa},sa={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function ua(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?ua(Sn(t.children)):e}function la(e){var t={},n=e.$options;for(var r in n.propsData)t[r]=e[r];var i=n._parentListeners;for(var o in i)t[S(o)]=i[o];return t}function da(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function ca(e){while(e=e.parent)if(e.data.transition)return!0}function fa(e,t){return t.key===e.key&&t.tag===e.tag}var ha=function(e){return e.tag||Tn(e)},pa=function(e){return"show"===e.name},ma={name:"transition",props:sa,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(ha),n.length)){0;var r=this.mode;0;var i=n[0];if(ca(this.$vnode))return i;var o=ua(i);if(!o)return i;if(this._leaving)return da(e,i);var a="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?a+"comment":a+o.tag:s(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var u=(o.data||(o.data={})).transition=la(this),l=this._vnode,d=ua(l);if(o.data.directives&&o.data.directives.some(pa)&&(o.data.show=!0),d&&d.data&&!fa(o,d)&&!Tn(d)&&(!d.componentInstance||!d.componentInstance._vnode.isComment)){var c=d.data.transition=C({},u);if("out-in"===r)return this._leaving=!0,bt(c,"afterLeave",function(){t._leaving=!1,t.$forceUpdate()}),da(e,i);if("in-out"===r){if(Tn(o))return l;var f,h=function(){f()};bt(u,"afterEnter",h),bt(u,"enterCancelled",h),bt(c,"delayLeave",function(e){f=e})}}return i}}},ga=C({tag:String,moveClass:String},sa);delete ga.mode;var ya={props:ga,beforeMount:function(){var e=this,t=this._update;this._update=function(n,r){var i=Cn(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,i(),t.call(e,n,r)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=la(this),s=0;s<i.length;s++){var u=i[s];if(u.tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))o.push(u),n[u.key]=u,(u.data||(u.data={})).transition=a;else;}if(r){for(var l=[],d=[],c=0;c<r.length;c++){var f=r[c];f.data.transition=a,f.data.pos=f.elm.getBoundingClientRect(),n[f.key]?l.push(f):d.push(f)}this.kept=e(t,null,l),this.removed=d}return e(t,null,o)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(va),e.forEach(_a),e.forEach(Ea),this._reflow=document.body.offsetHeight,e.forEach(function(e){if(e.data.moved){var n=e.elm,r=n.style;Lo(n,t),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(Ro,n._moveCb=function e(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(Ro,e),n._moveCb=null,Oo(n,t))})}}))},methods:{hasMove:function(e,t){if(!wo)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach(function(e){To(n,e)}),bo(n,t),n.style.display="none",this.$el.appendChild(n);var r=ko(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function va(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function _a(e){e.data.newPos=e.elm.getBoundingClientRect()}function Ea(e){var t=e.data.pos,n=e.data.newPos,r=t.left-n.left,i=t.top-n.top;if(r||i){e.data.moved=!0;var o=e.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}var ba={Transition:ma,TransitionGroup:ya};Tr.config.mustUseProp=Ur,Tr.config.isReservedTag=ii,Tr.config.isReservedAttr=Br,Tr.config.getTagNamespace=oi,Tr.config.isUnknownElement=si,C(Tr.options.directives,aa),C(Tr.options.components,ba),Tr.prototype.__patch__=$?Xo:P,Tr.prototype.$mount=function(e,t){return e=e&&$?li(e):void 0,Ln(this,e,t)},$&&setTimeout(function(){K.devtools&&le&&le.emit("init",Tr)},0),t["a"]=Tr}).call(this,n("c8ba"))},"2b4c":function(e,t,n){var r=n("5537")("wks"),i=n("ca5a"),o=n("7726").Symbol,a="function"==typeof o,s=e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))};s.store=r},"2b8a":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("589e"),o=r(i),a=n("6a2d"),s=r(a),u=n("8a43"),l=r(u),d=n("1d48"),c=r(d),f=n("467b"),h=r(f),p=n("5571"),m=r(p),g=n("e172"),y=r(g),v=.1;function _(e,t,n,r){var i=this.context,a=(0,l["default"])(i).getInstance(),u=void 0,d=void 0,f=void 0,h=void 0,p=void 0,g=[],_=[],E=n;function b(){d=(0,o["default"])(i).getInstance().getLogger(u),h=!1;var n=t.codec;try{if(n.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new Error("not really supported");f=r||e.addSourceBuffer(n),f.changeType&&r&&(d.debug("Doing period transition with changeType"),f.changeType(n));var a=50;if("function"===typeof f.addEventListener)try{f.addEventListener("updateend",O,!1),f.addEventListener("error",F,!1),f.addEventListener("abort",F,!1)}catch(l){p=setInterval(L,a)}else p=setInterval(L,a)}catch(c){if(!t.isText&&-1===n.indexOf('codecs="stpp')&&-1===n.indexOf('codecs="wvtt'))throw c;var s=(0,m["default"])(i).getInstance();f=s.getTextSourceBuffer()}}function T(t){if(f){if("function"===typeof f.removeEventListener&&(f.removeEventListener("updateend",O,!1),f.removeEventListener("error",F,!1),f.removeEventListener("abort",F,!1)),clearInterval(p),!t){try{f.getClassName&&"TextSourceBuffer"===f.getClassName()||e.removeSourceBuffer(f)}catch(n){d.error("Failed to remove source buffer from media source.")}f=null}h=!1}_=[],E=null}function S(){return f}function I(){try{return f.buffered}catch(e){return d.error("getAllBufferRanges exception: "+e.message),null}}function w(e){try{var t=I();if(t&&t.length>1)for(var n=0,r=t.length;n<r;n++)if(n>0&&e<t.start(n)&&t.start(n)>t.end(n-1)+v)return!0}catch(i){d.error("hasDiscontinuities exception: "+i.message)}return!1}function x(e){e?(_.push(e),h||B(f,R.bind(this))):E({chunk:e,error:new s["default"](y["default"].APPEND_ERROR_CODE,y["default"].APPEND_ERROR_MESSAGE)})}function A(e){f.timestampOffset===e||isNaN(e)||B(f,function(){f.timestampOffset=e})}function D(t,n,r){var i=this;B(f,function(){try{t>=0&&n>t&&(r||"ended"!==e.readyState)&&f.remove(t,n),B(f,function(){a.trigger(c["default"].SOURCEBUFFER_REMOVE_COMPLETED,{buffer:i,from:t,to:n,unintended:!1})})}catch(o){a.trigger(c["default"].SOURCEBUFFER_REMOVE_COMPLETED,{buffer:i,from:t,to:n,unintended:!1,error:new s["default"](o.code,o.message)})}})}function R(){var e=this,t=this;_.length>0&&function(){h=!0;var n=_[0];_.splice(0,1);var r=[],i=function(){var e=I();M(t,r,e,n),_.length>0?R.call(this):(h=!1,E&&E({chunk:n}))};try{0===n.bytes.length?i.call(e):(r=I(),f.appendBuffer?f.appendBuffer(n.bytes):f.append(n.bytes,n),B(f,i.bind(e)))}catch(o){d.fatal('SourceBuffer append failed "'+o+'"'),_.length>0?R():h=!1,E&&E({chunk:n,error:new s["default"](o.code,o.message)})}}()}function M(e,t,n,r){t&&t.length>0&&t.length<n.length&&C(t,r)&&a.trigger(c["default"].SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:n.end(n.length-2),to:n.start(n.length-1),unintended:!0})}function C(e,t){for(var n=0;n<e.length;n++){var r=Math.round(e.start(n)),i=Math.round(e.end(n));if(i===t.start||r===t.end||t.start>=r&&t.end<=i)return!0}return!1}function N(){try{"open"===e.readyState?f.abort():f.setTextTrack&&"ended"===e.readyState&&f.abort()}catch(t){d.error('SourceBuffer append abort failed: "'+t+'"')}_=[]}function P(){if(g.length>0){var e=g.shift();f.updating?B(f,e):(e(),P())}}function L(){f.updating||P()}function O(){f.updating||P()}function F(){d.error("SourceBufferSink error",t.type)}function B(e,t){g.push(t),e.updating||P()}return u={getAllBufferRanges:I,getBuffer:S,append:x,remove:D,abort:N,reset:T,updateTimestampOffset:A,hasDiscontinuitiesAfter:w},b(),u}_.__dashjs_factory_name="SourceBufferSink";var E=h["default"].getClassFactory(_);t["default"]=E,e.exports=t["default"]},"2c63":function(e,t,n){e.exports=n("dc14")},"2cc9":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("e09e"),s=r(a),u=n("467b"),l=r(u),d=n("f01c"),c=r(d),f=n("4e7a"),h=r(f),p=n("5beb"),m=n("7914"),g=r(m),y=n("d25a"),v=r(y),_=n("120d"),E=r(_),b=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function T(e){var t=this.context,n=e.dashManifestModel,r=e.adapter,i=e.baseURLController,a=e.stream,u=e.timelineConverter,l=e.metricsModel,d=e.mediaPlayerModel,f=e.errHandler,m=(0,h["default"])(t).getInstance(),y=void 0,_=void 0,T=void 0,S=void 0,I=void 0,w=void 0;function x(){O(),S=(0,E["default"])(t).create({}),w=(0,v["default"])(t).getInstance(),I=(0,g["default"])(t).getInstance(),I.setConfig({baseURLController:i,metricsModel:l,mediaPlayerModel:d,errHandler:f}),D()}function A(e,t){var r=[],i=0,o=void 0,a=void 0,s=void 0,l=void 0;for(o=0,a=e.length;o<a;o++)s=e[o],l=(0,p.getTimeBasedSegment)(u,n.getIsDynamic(),t,s.startTime,s.duration,s.timescale,s.media,s.mediaRange,i),r.push(l),l=null,i++;return r}function D(){if(a&&n&&r){var e=a.getStreamInfo();if(e){var t=r.getMediaInfoForType(e,o["default"].IMAGE);if(t){var i=r.getDataForMedia(t);if(i){var u=n.getRepresentationsForAdaptation(i);u&&u.length>0&&u.forEach(function(e){e.segmentInfoType===s["default"].SEGMENT_TEMPLATE&&e.segmentDuration>0&&e.media&&R(e),e.segmentInfoType===s["default"].SEGMENT_BASE&&R(e,!0)}),_.length>0&&(_.sort(function(e,t){return e.bitrate-t.bitrate}),T=_.length-1)}}}}}function R(e,t){var n=new c["default"];n.id=e.id,n.bitrate=e.bandwidth,n.width=e.width,n.height=e.height,n.tilesHor=1,n.tilesVert=1,e.essentialProperties&&e.essentialProperties.forEach(function(e){if(b.indexOf(e.schemeIdUri)>=0&&e.value){var t=e.value.split("x");2!==t.length||isNaN(t[0])||isNaN(t[1])||(n.tilesHor=parseInt(t[0],10),n.tilesVert=parseInt(t[1],10))}}),t?I.loadSegments(e,o["default"].IMAGE,e.indexRange,{},function(e,t){var r=[];e=A(e,t),n.segmentDuration=e[0].duration,n.readThumbnail=function(n,o){var a=null;r.some(function(e){if(e.start<=n&&e.end>n)return a=e.url,!0}),a?o(a):e.some(function(e){if(e.mediaStartTime<=n&&e.mediaStartTime+e.duration>n){var a=i.resolve(t.path);return S.load({method:"get",url:a.url,request:{range:e.mediaRange,responseType:"arraybuffer"},onload:function(t){var n=w.getSamplesInfo(t.target.response),i=new Blob([t.target.response.slice(n.sampleList[0].offset,n.sampleList[0].offset+n.sampleList[0].size)],{type:"image/jpeg"}),a=window.URL.createObjectURL(i);r.push({start:e.mediaStartTime,end:e.mediaStartTime+e.duration,url:a}),o&&o(a)}}),!0}})}}):(n.startNumber=e.startNumber,n.segmentDuration=e.segmentDuration,n.timescale=e.timescale,n.templateUrl=M(e)),n.tilesHor>0&&n.tilesVert>0&&(n.widthPerTile=n.width/n.tilesHor,n.heightPerTile=n.height/n.tilesVert,_.push(n))}function M(e){var t=m.isRelative(e.media)?m.resolve(e.media,i.resolve(e.path).url):e.media;return t?(0,p.replaceIDForTemplate)(t,e.id):""}function C(){return _}function N(){return T}function P(){return T<0?null:_[T]}function L(e){_&&0!==_.length&&(e>=_.length&&(e=_.length-1),T=e)}function O(){_=[],T=-1}return y={initialize:x,getTracks:C,reset:O,setTrackByIndex:L,getCurrentTrack:P,getCurrentTrackIndex:N},x(),y}t.THUMBNAILS_SCHEME_ID_URIS=b,T.__dashjs_factory_name="ThumbnailTracks",t["default"]=l["default"].getClassFactory(T)},"2d00":function(e,t){e.exports=!1},"2d62":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("71a8");function s(){var e=[],t=0;function n(e,t){var n=0;for(n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length}function r(){this.customTimeRangeArray=[],this.length=0}function i(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length}function o(e,t){var n=this.customTimeRangeArray[e],r=this.customTimeRangeArray[t];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)}function s(e){return(0,a.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start}function u(e){return(0,a.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}return{customTimeRangeArray:e,length:t,add:n,clear:r,remove:i,mergeRanges:o,start:s,end:u}}s.__dashjs_factory_name="CustomTimeRanges",t["default"]=o["default"].getClassFactory(s),e.exports=t["default"]},"2d7d":function(e,t,n){e.exports=n("5037")},"2d95":function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},"2e81":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("589e"),s=r(a),u=n("2f4d"),l=r(u),d=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],c="dashjs_?_bitrate",f="dashjs_?_settings",h="localStorage",p="sessionStorage",m="LastBitrate",g="LastMediaSettings";function y(e){e=e||{};var t=this.context,n=e.mediaPlayerModel,r=void 0,i=void 0,o=void 0;function a(){i=(0,s["default"])(t).getInstance().getLogger(r),y()}function u(e){if(void 0!==o)return o;o=!1;var t="1",n="1",r=void 0;try{"undefined"!==typeof window&&(r=window[e])}catch(a){return i.warn("DOMStorage access denied: "+a.message),o}if(!r||e!==h&&e!==p)return o;try{r.setItem(t,n),r.removeItem(t),o=!0}catch(a){i.warn("DOMStorage is supported, but cannot be used: "+a.message)}return o}function y(){u(h)&&d.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(n){i.error(n.message)}}})}function v(){var e=6e5;return Math.round((new Date).getTime()/e)*e}function _(e,t){return u(e)&&n["get"+t+"CachingInfo"]().enabled}function E(){if(!n||!n.hasOwnProperty("getLastMediaSettingsCachingInfo"))throw new Error(l["default"].MISSING_CONFIG_ERROR)}function b(e){if(E(),!_(h,g))return null;var t=null,r=f.replace(/\?/,e);try{var i=JSON.parse(localStorage.getItem(r))||{},o=(new Date).getTime()-parseInt(i.timestamp,10)>=n.getLastMediaSettingsCachingInfo().ttl||!1;t=i.settings,o&&(localStorage.removeItem(r),t=null)}catch(a){return null}return t}function T(e){var t=NaN;if(E(),_(h,m)){var r=c.replace(/\?/,e);try{var o=JSON.parse(localStorage.getItem(r))||{},a=(new Date).getTime()-parseInt(o.timestamp,10)>=n.getLastMediaSettingsCachingInfo().ttl||!1,s=parseFloat(o.bitrate);isNaN(s)||a?a&&localStorage.removeItem(r):(t=s,i.debug("Last saved bitrate for "+e+" was "+s))}catch(u){return null}}return t}function S(e,t){if(_(h,g)){var n=f.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({settings:t,timestamp:v()}))}catch(r){i.error(r.message)}}}function I(e,t){if(_(h,m)&&t){var n=c.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({bitrate:t.toFixed(3),timestamp:v()}))}catch(r){i.error(r.message)}}}return r={getSavedBitrateSettings:T,setSavedBitrateSettings:I,getSavedMediaSettings:b,setSavedMediaSettings:S},a(),r}y.__dashjs_factory_name="DOMStorage";var v=o["default"].getSingletonFactory(y);t["default"]=v,e.exports=t["default"]},"2f21":function(e,t,n){"use strict";var r=n("79e5");e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},"2f4d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){i(this,e),this.init()}return r(e,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.FRAGMENTED_TEXT="fragmentedText",this.EMBEDDED_TEXT="embeddedText",this.MUXED="muxed",this.IMAGE="image",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.UTF8="utf-8",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)"}}]),e}(),a=new o;t["default"]=a,e.exports=t["default"]},3024:function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},"30f1":function(e,t,n){"use strict";var r=n("b8e3"),i=n("63b6"),o=n("9138"),a=n("35e8"),s=n("481b"),u=n("8f60"),l=n("45f2"),d=n("53e2"),c=n("5168")("iterator"),f=!([].keys&&"next"in[].keys()),h="@@iterator",p="keys",m="values",g=function(){return this};e.exports=function(e,t,n,y,v,_,E){u(n,t,y);var b,T,S,I=function(e){if(!f&&e in D)return D[e];switch(e){case p:return function(){return new n(this,e)};case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},w=t+" Iterator",x=v==m,A=!1,D=e.prototype,R=D[c]||D[h]||v&&D[v],M=R||I(v),C=v?x?I("entries"):M:void 0,N="Array"==t&&D.entries||R;if(N&&(S=d(N.call(new e)),S!==Object.prototype&&S.next&&(l(S,w,!0),r||"function"==typeof S[c]||a(S,c,g))),x&&R&&R.name!==m&&(A=!0,M=function(){return R.call(this)}),r&&!E||!f&&!A&&D[c]||a(D,c,M),s[t]=M,s[w]=g,v)if(b={values:x?M:I(m),keys:_?M:I(p),entries:C},E)for(T in b)T in D||o(D,T,b[T]);else i(i.P+i.F*(f||A),t,b);return b}},"31d1":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(e){e=e||{};var t=e.requestModifier,n=e.boxParser,r=void 0;function i(e){var r=new Date,i=e.request,s=new Headers;i.range&&s.append("Range","bytes="+i.range),i.requestStartDate||(i.requestStartDate=r),t&&t.modifyRequestHeader({setRequestHeader:function(e,t){s.append(e,t)}});var l=void 0;"function"===typeof window.AbortController&&(l=new AbortController,e.abortController=l);var d={method:e.method,headers:s,credentials:e.withCredentials?"include":void 0,signal:l?l.signal:void 0};fetch(e.url,d).then(function(t){e.response||(e.response={}),e.response.status=t.status,e.response.statusText=t.statusText,e.response.responseURL=t.url,t.ok||e.onerror();var r="",i=!0,s=!1,l=void 0;try{for(var d,c=t.headers.keys()[Symbol.iterator]();!(i=(d=c.next()).done);i=!0){var f=d.value;r+=f+": "+t.headers.get(f)+"\n"}}catch(E){s=!0,l=E}finally{try{!i&&c["return"]&&c["return"]()}finally{if(s)throw l}}if(e.response.responseHeaders=r,!t.body)return t.arrayBuffer().then(function(t){e.response.response=t;var n={loaded:t.byteLength,total:t.byteLength,stream:!1};e.progress(n),e.onload(),e.onend()});var h=parseInt(t.headers.get("Content-Length"),10),p=0,m=!1,g=new Uint8Array,y=0;e.reader=t.body.getReader();var v=[],_=function t(r){var i=r.value,s=r.done;if(s)return g&&(e.progress({loaded:p,total:isNaN(h)?p:h,lengthComputable:!0,time:u(v,p),stream:!0}),e.response.response=g.buffer),e.onload(),void e.onend();if(i&&i.length>0){g=a(g,i),p+=i.length,v.push({ts:Date.now(),bytes:i.length});var l=n.findLastTopIsoBoxCompleted(["moov","mdat"],g,y);if(l.found){var d=l.lastCompletedOffset+l.size,c=void 0;d===g.length?(c=g,g=new Uint8Array):(c=new Uint8Array(g.subarray(0,d)),g=g.subarray(d)),e.progress({data:c.buffer,lengthComputable:!1,noTrace:!0}),y=0}else y=l.lastCompletedOffset,m||(e.progress({lengthComputable:!1,noTrace:!0}),m=!0)}o(e,t)};o(e,_)})["catch"](function(t){e.onerror&&e.onerror(t)})}function o(e,t){e.reader.read().then(t)["catch"](function(t){e.onerror&&200===e.response.status&&e.onerror(t)})}function a(e,t){if(0===e.length)return t;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function s(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel()}catch(t){}}function u(e,t){if(e=e.filter(function(n){return n.bytes>t/4/e.length}),e.length>1){var n=function(){var t=0,n=(e[e.length-1].ts-e[0].ts)/e.length;return e.forEach(function(r,i){var o=e[i+1];if(o){var a=o.ts-r.ts;t+=a<n?a:0}}),{v:t}}();if("object"===typeof n)return n.v}return null}return r={load:i,abort:s,calculateDownloadedTime:u},r}a.__dashjs_factory_name="FetchLoader";var s=o["default"].getClassFactory(a);t["default"]=s,e.exports=t["default"]},"31f4":function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},3258:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("028f"),o=r(i),a=n("e217"),s=r(a),u=n("e8c0"),l=r(u),d=n("d0a4"),c=r(d),f=n("daa7"),h=r(f),p=n("f318"),m=r(p),g=n("4ac7"),y=r(g),v=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],_=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function E(){var e=void 0,t=this.context;function n(e){var n=null,i=(0,s["default"])(t).getInstance();i.setConfig({debug:e.debug,BASE64:e.BASE64}),i.initialize();var a=r(e);return!n&&a&&(n=(0,o["default"])(t).create({protectionModel:a,protectionKeyController:i,eventBus:e.eventBus,debug:e.debug,events:e.events,BASE64:e.BASE64,constants:e.constants}),e.capabilities.setEncryptedMediaSupported(!0)),n}function r(n){var r=n.debug,o=r.getLogger(e),a=n.eventBus,s=n.errHandler,u=n.videoModel?n.videoModel.getElement():null;return u&&void 0===u.onencrypted||u&&void 0===u.mediaKeys?i(u,_)?(o.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,m["default"])(t).create({debug:r,eventBus:a,events:n.events,api:i(u,_)})):i(u,v)?(o.info("EME detected on this user agent! (ProtectionModel_01b)"),(0,y["default"])(t).create({debug:r,eventBus:a,errHandler:s,events:n.events,api:i(u,v)})):(o.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(o.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,h["default"])(t).create({debug:r,eventBus:a,events:n.events}))}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("function"===typeof e[r[Object.keys(r)[0]]])return r}return null}return e={createProtectionSystem:n},e}E.__dashjs_factory_name="Protection";var b=dashjs.FactoryMaker.getClassFactory(E);b.events=l["default"],b.errors=c["default"],dashjs.FactoryMaker.updateClassFactory(E.__dashjs_factory_name,b),t["default"]=b,e.exports=t["default"]},"32da":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("8d11"),o=r(i);function a(e){e=e||{};var t=void 0,n=void 0,r=void 0,i=void 0,a=void 0,s=void 0,u=this.context,l=(0,o["default"])(u).getInstance(),d=[],c=e.metricsConstants;function f(){try{return Object.keys(d).map(function(e){return d[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}function h(){var e=f();e&&s!==e.t&&(s=e.t,n.report(i,e))}function p(e,t,o){t&&(r=l.validateN(o),n=t,i=l.reconstructFullMetricName(e,o),a=setInterval(h,r))}function m(){clearInterval(a),a=null,r=0,n=null,s=null}function g(e,t,n){e===c.BUFFER_LEVEL&&(d[n]=t)}return t={initialize:p,reset:m,handleNewMetric:g},t}a.__dashjs_factory_name="BufferLevelHandler",t["default"]=dashjs.FactoryMaker.getClassFactory(a),e.exports=t["default"]},"32e9":function(e,t,n){var r=n("86cc"),i=n("4630");e.exports=n("9e1e")?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},"32fc":function(e,t,n){var r=n("e53d").document;e.exports=r&&r.documentElement},3337:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVersionString=i;var r="2.9.3";function i(){return r}},"335c":function(e,t,n){var r=n("6b4c");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},"33a4":function(e,t,n){var r=n("84f2"),i=n("2b4c")("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},"35b0":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(){var e=[],t=0,n=0;function r(r,i){var o=i&&i.droppedVideoFrames?i.droppedVideoFrames:0,a=i&&i.totalVideoFrames?i.totalVideoFrames:0,s=o-t;t=o;var u=a-n;n=a,isNaN(r)||(e[r]?(e[r].droppedVideoFrames+=s,e[r].totalVideoFrames+=u):e[r]={droppedVideoFrames:s,totalVideoFrames:u})}function i(){return e}function o(r){e=[],t=r.droppedVideoFrames,n=r.totalVideoFrames}return{push:r,getFrameHistory:i,reset:o}}a.__dashjs_factory_name="DroppedFramesHistory";var s=o["default"].getClassFactory(a);t["default"]=s,e.exports=t["default"]},"35e8":function(e,t,n){var r=n("d9f6"),i=n("aebd");e.exports=n("8e60")?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},"35f3":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("0757"),s=n("6531"),u=r(s),l=n("8e4c"),d=r(l),c=n("d0c6"),f=r(c),h=n("b4f1"),p=r(h),m=n("8a43"),g=r(m),y=n("1d48"),v=r(y),_=n("467b"),E=r(_),b=n("589e"),T=r(b);function S(e){e=e||{};var t=this.context,n=(0,g["default"])(t).getInstance(),r=e.errHandler,i=e.mediaPlayerModel,s=e.metricsModel,l=void 0,c=void 0,h=void 0;function m(){c=(0,T["default"])(t).getInstance().getLogger(l),E(),n.on(v["default"].FRAGMENT_LOADING_COMPLETED,I,l),n.on(v["default"].FRAGMENT_LOADING_PROGRESS,I,l)}function y(e){var n=h[e];return n||(n=(0,d["default"])(t).create({metricsModel:s,fragmentLoader:(0,f["default"])(t).create({metricsModel:s,mediaPlayerModel:i,errHandler:r,requestModifier:(0,p["default"])(t).getInstance()})}),h[e]=n),n}function _(e){return e&&e.type&&e.type===a.HTTPRequest.INIT_SEGMENT_TYPE}function E(){for(var e in h)h[e].reset();h={}}function b(){n.off(v["default"].FRAGMENT_LOADING_COMPLETED,I,this),n.off(v["default"].FRAGMENT_LOADING_PROGRESS,I,this),E()}function S(e,t,n,r){var i=new u["default"];return i.streamId=n,i.mediaInfo=t.mediaInfo,i.segmentType=t.type,i.start=t.startTime,i.duration=t.duration,i.end=i.start+i.duration,i.bytes=e,i.index=t.index,i.quality=t.quality,i.representationId=t.representationId,i.endFragment=r,i}function I(e){if(h[e.request.mediaType]===e.sender){var t=e.request,r=e.response,i=_(t),a=t.mediaInfo.streamInfo;if(e.error&&(e.request.mediaType!==o["default"].AUDIO&&e.request.mediaType!==o["default"].VIDEO&&e.request.mediaType!==o["default"].FRAGMENTED_TEXT||n.trigger(v["default"].SERVICE_LOCATION_BLACKLIST_ADD,{entry:e.request.serviceLocation})),r&&a){var s=S(r,t,a.id,e.type!==v["default"].FRAGMENT_LOADING_PROGRESS);n.trigger(i?v["default"].INIT_FRAGMENT_LOADED:v["default"].MEDIA_FRAGMENT_LOADED,{chunk:s,fragmentModel:e.sender})}else c.warn("No "+t.mediaType+" bytes to push or stream is inactive.")}}return l={getModel:y,isInitializationRequest:_,reset:b},m(),l}S.__dashjs_factory_name="FragmentController",t["default"]=E["default"].getClassFactory(S),e.exports=t["default"]},"36b1":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("086a"),o=r(i),a=n("2f4d"),s=r(a),u=n("47e4"),l=r(u),d=n("cbff"),c=r(d),f=n("8e4c"),h=r(f),p=n("8a43"),m=r(p),g=n("1d48"),y=r(g),v=n("467b"),_=r(v),E=n("1021"),b=r(E),T=n("9485"),S=r(T),I=n("931f"),w=r(I),x=n("35b0"),A=r(x),D=n("0f0c"),R=r(D),M=n("0757"),C=n("589e"),N=r(C),P=n("71a8"),L="abandonload",O="allowload",F=1e3,B=100,k=0;function U(){var e=this.context,t=(0,N["default"])(e).getInstance(),n=(0,m["default"])(e).getInstance(),r=void 0,i=void 0,a=void 0,u=void 0,d=void 0,f=void 0,p=void 0,g=void 0,v=void 0,_=void 0,E=void 0,T=void 0,I=void 0,x=void 0,D=void 0,C=void 0,U=void 0,H=void 0,j=void 0,K=void 0,V=void 0,q=void 0,G=void 0,Y=void 0,z=void 0,W=void 0,X=void 0,$=void 0,Q=void 0,J=void 0;function Z(){i=t.getLogger(r),re()}function ee(t,r){Y[t]=(0,w["default"])(e).create(),_[t]=r,E[t]=E[t]||{},E[t].state=O,X[t]=!1,n.on(y["default"].LOADING_PROGRESS,Qe,this),t==s["default"].VIDEO&&(n.on(y["default"].QUALITY_CHANGE_RENDERED,se,this),z=(0,A["default"])(e).create(),Xe()),n.on(y["default"].METRIC_ADDED,ue,this),n.on(y["default"].PERIOD_SWITCH_COMPLETED,ne,this),W=(0,R["default"])(e).create({mediaPlayerModel:V})}function te(e){delete _[e]}function ne(){a=(0,o["default"])(e).create({metricsModel:$,dashMetrics:Q,mediaPlayerModel:V,adapter:j}),a.initialize()}function re(){d={video:!0,audio:!0},f={},p={},g={},v={},E={},_={},Y={},X={},I=!1,J=!0,x=!1,void 0===D&&(D=!1),G=void 0,z=void 0,W=void 0,clearTimeout(T),T=null}function ie(){re(),n.off(y["default"].LOADING_PROGRESS,Qe,this),n.off(y["default"].QUALITY_CHANGE_RENDERED,se,this),n.off(y["default"].METRIC_ADDED,ue,this),n.off(y["default"].PERIOD_SWITCH_COMPLETED,ne,this),a&&a.reset()}function oe(e){e&&(e.streamController&&(u=e.streamController),e.domStorage&&(q=e.domStorage),e.mediaPlayerModel&&(V=e.mediaPlayerModel),e.metricsModel&&($=e.metricsModel),e.dashMetrics&&(Q=e.dashMetrics),e.adapter&&(j=e.adapter),e.manifestModel&&(H=e.manifestModel),e.videoModel&&(K=e.videoModel))}function ae(){if(!q||!q.hasOwnProperty("getSavedBitrateSettings"))throw new Error(s["default"].MISSING_CONFIG_ERROR)}function se(e){e.mediaType===s["default"].VIDEO&&(G=e.oldQuality,z.push(G,K.getPlaybackQuality()))}function ue(e){e.metric!==l["default"].HTTP_REQUEST||!e.value||e.value.type!==M.HTTPRequest.MEDIA_SEGMENT_TYPE||e.mediaType!==s["default"].AUDIO&&e.mediaType!==s["default"].VIDEO||W.push(e.mediaType,e.value,J),e.metric!==l["default"].BUFFER_LEVEL||e.mediaType!==s["default"].AUDIO&&e.mediaType!==s["default"].VIDEO||ke(e.mediaType,.001*e.value.level)}function le(e,t){var n=void 0;return f[t]=f[t]||{},f[t].hasOwnProperty(e)||(f[t][e]=0),n=Ye(f[t][e],e),n=ze(n,e,f[t][e]),n=$e(n,e),n}function de(e){if(e&&_&&_[e]){var t=_[e].getStreamInfo();if(t&&t.id){var n=le(e,t.id),r=Be(_[e].getMediaInfo());return r[n]?r[n]:null}}return null}function ce(e){ae();var t=q.getSavedBitrateSettings(e);if(!g.hasOwnProperty(e))if(v.hasOwnProperty(e)){var n=H.getValue(),r=j.getAdaptationForType(n,0,e).Representation;if(Array.isArray(r)){var i=Math.max(Math.round(r.length*v[e])-1,0);g[e]=r[i].bandwidth}else g[e]=0}else isNaN(t)?g[e]=e===s["default"].VIDEO?F:B:g[e]=t;return g[e]}function fe(e,t){(0,P.checkIsVideoOrAudioType)(e),(0,P.checkParameterType)(t,"number"),g[e]=t}function he(e){return v.hasOwnProperty(e)?v[e]:null}function pe(e,t){v[e]=t}function me(e){return g.hasOwnProperty("max")&&g.max.hasOwnProperty(e)?g.max[e]:NaN}function ge(e){return g.hasOwnProperty("min")&&g.min.hasOwnProperty(e)?g.min[e]:NaN}function ye(e,t){(0,P.checkParameterType)(t,"number"),(0,P.checkIsVideoOrAudioType)(e),g.max=g.max||{},g.max[e]=t}function ve(e,t){(0,P.checkParameterType)(t,"number"),(0,P.checkIsVideoOrAudioType)(e),g.min=g.min||{},g.min[e]=t}function _e(e){var t=me(e);return t?Fe(_[e].getMediaInfo(),t):void 0}function Ee(e){var t=ge(e);if(t){var n=_[e].getMediaInfo(),r=Be(n),i=Fe(n,t);return r[i]&&i<r.length-1&&r[i].bitrate<1e3*t&&i++,i}}function be(e){return v.hasOwnProperty("max")&&v.max.hasOwnProperty(e)?v.max[e]:1}function Te(e,t){v.max=v.max||{},v.max[e]=t}function Se(e){return d[e]}function Ie(e,t){(0,P.checkParameterType)(t,"boolean"),(0,P.checkIsVideoOrAudioType)(e),d[e]=t}function we(){return I}function xe(e){(0,P.checkParameterType)(e,"boolean"),I=e}function Ae(){return x}function De(e){(0,P.checkParameterType)(e,"boolean"),x=e}function Re(){return J}function Me(e){(0,P.checkParameterType)(e,"boolean"),J=e}function Ce(n){if(n&&_&&_[n]){var o=_[n].getStreamInfo(),s=o?o.id:null,u=Ve(n),l=(0,b["default"])(e).create({abrController:r,streamProcessor:_[n],currentValue:u,switchHistory:Y[n],droppedFramesHistory:z,useBufferOccupancyABR:Ue(n)});if(z){var d=K.getPlaybackQuality();d&&z.push(G,d)}if(Se(n)){var c=Ee(n),f=le(n,s),h=a.getMaxQuality(l),p=h.quality;if(void 0!==c&&p<c&&(p=c),p>f&&(p=f),Y[n].push({oldValue:u,newValue:p}),p>S["default"].NO_CHANGE&&p!=u)(E[n].state===O||p>u)&&Pe(n,u,p,f,h.reason);else if(t.getLogToBrowserConsole()){var m=Q.getCurrentBufferLevel($.getReadOnlyMetricsFor(n));i.debug("AbrController ("+n+") stay on "+u+"/"+f+" (buffer: "+m+")")}}}}function Ne(e,t,n,r){var i=t.id,o=Ve(e);(0,P.checkInteger)(n);var a=le(e,i);n!==o&&n>=0&&n<=a&&Pe(e,o,n,a,r)}function Pe(e,r,o,a,s){if(e&&_[e]){var u=_[e].getStreamInfo(),l=u?u.id:null;if(t.getLogToBrowserConsole()){var d=Q.getCurrentBufferLevel($.getReadOnlyMetricsFor(e));i.info("AbrController ("+e+") switch from "+r+" to "+o+"/"+a+" (buffer: "+d+") "+(s?JSON.stringify(s):"."))}qe(e,l,o),n.trigger(y["default"].QUALITY_CHANGE_REQUESTED,{mediaType:e,streamInfo:u,oldQuality:r,newQuality:o,reason:s})}}function Le(e,t){E[e].state=t}function Oe(e){return E[e]?E[e].state:null}function Fe(e,t,n){var r=e&&e.type?_[e.type].getRepresentationInfo():null;if(J&&n&&r&&r.fragmentDuration){n/=1e3;var i=r.fragmentDuration;if(n>i)return 0;var o=n/i;t*=1-o}for(var a=Be(e),s=a.length-1;s>=0;s--){var u=a[s];if(1e3*t>=u.bitrate)return s}return k}function Be(e){var t=[];if(!e||!e.bitrateList)return t;for(var n=e.bitrateList,r=e.type,i=void 0,o=0,a=n.length;o<a;o++)i=new c["default"],i.mediaType=r,i.qualityIndex=o,i.bitrate=n[o].bandwidth,i.width=n[o].width,i.height=n[o].height,i.scanType=n[o].scanType,t.push(i);return t}function ke(e,t){var n=V.getABRStrategy();if(n!==s["default"].ABR_STRATEGY_BOLA)if(n!==s["default"].ABR_STRATEGY_THROUGHPUT){var r=V.getStableBufferTime(),o=r,a=.5*r,u=X[e],l=t>(u?a:o);X[e]=l,l!==u&&(l?i.info("AbrController ("+e+") switching from throughput to buffer occupancy ABR rule (buffer: "+t.toFixed(3)+")."):i.info("AbrController ("+e+") switching from buffer occupancy to throughput ABR rule (buffer: "+t.toFixed(3)+")."))}else X[e]=!1;else X[e]=!0}function Ue(e){return X[e]}function He(){return W}function je(e){var t=e.type,n=e.streamInfo.id,r=e.representationCount-1;return Ge(t,n,r),r}function Ke(e){var t=e?e.id:null,n=Ve(s["default"].AUDIO),r=Ve(s["default"].VIDEO),i=n===le(s["default"].AUDIO,t)&&r===le(s["default"].VIDEO,t);return i}function Ve(e){if(e&&_[e]){var t=_[e].getStreamInfo(),n=t?t.id:null,r=void 0;if(n)return p[n]=p[n]||{},p[n].hasOwnProperty(e)||(p[n][e]=k),r=p[n][e],r}return k}function qe(e,t,n){p[t]=p[t]||{},p[t][e]=n}function Ge(e,t,n){f[t]=f[t]||{},f[t][e]=n}function Ye(e,t){var n=e;if(!_[t])return n;var r=Ee(t);void 0!==r&&(n=Math.max(e,r));var i=_e(t);return void 0!==i&&(n=Math.min(n,i)),n}function ze(e,t,n){var r=be(t);return isNaN(r)||r>=1||r<0?e:Math.min(e,Math.round(n*r))}function We(e){D=e}function Xe(){if(K){var e=x&&window.hasOwnProperty("devicePixelRatio"),t=e?window.devicePixelRatio:1;C=K.getClientWidth()*t,U=K.getClientHeight()*t}}function $e(e,t){if(t!==s["default"].VIDEO||!I||!_[t])return e;D||Xe();var n=H.getValue(),r=j.getAdaptationForType(n,0,t).Representation,i=e;if(C>0&&U>0){while(i>0&&r[i]&&C<r[i].width&&C-r[i-1].width<r[i].width-C)i-=1;r.length-2>=i&&r[i].width===r[i+1].width&&(i=Math.min(e,i+1))}return i}function Qe(t){var n=t.request.mediaType;if(Se(n)){var i=_[n];if(!i)return;var o=(0,b["default"])(e).create({abrController:r,streamProcessor:i,currentRequest:t.request,useBufferOccupancyABR:Ue(n)}),s=a.shouldAbandonFragment(o);if(s.quality>S["default"].NO_CHANGE){var l=i.getFragmentModel(),d=l.getRequests({state:h["default"].FRAGMENT_MODEL_LOADING,index:t.request.index})[0];d&&(l.abortRequests(),Le(n,L),Y[n].reset(),Y[n].push({oldValue:Ve(n,u.getActiveStreamInfo()),newValue:s.quality,confidence:1,reason:s.reason}),Ne(n,u.getActiveStreamInfo(),s.quality,s.reason),clearTimeout(T),T=setTimeout(function(){Le(n,O),T=null},V.getAbandonLoadTimeout()))}}}return r={isPlayingAtTopQuality:Ke,updateTopQualityIndex:je,getThroughputHistory:He,getBitrateList:Be,getQualityForBitrate:Fe,getMaxAllowedBitrateFor:me,getTopBitrateInfoFor:de,getMinAllowedBitrateFor:ge,setMaxAllowedBitrateFor:ye,setMinAllowedBitrateFor:ve,getMaxAllowedIndexFor:_e,getMinAllowedIndexFor:Ee,getMaxAllowedRepresentationRatioFor:be,setMaxAllowedRepresentationRatioFor:Te,getInitialBitrateFor:ce,setInitialBitrateFor:fe,getInitialRepresentationRatioFor:he,setInitialRepresentationRatioFor:pe,setAutoSwitchBitrateFor:Ie,getAutoSwitchBitrateFor:Se,getUseDeadTimeLatency:Re,setUseDeadTimeLatency:Me,setLimitBitrateByPortal:xe,getLimitBitrateByPortal:we,getUsePixelRatioInLimitBitrateByPortal:Ae,setUsePixelRatioInLimitBitrateByPortal:De,getQualityFor:Ve,getAbandonmentStateFor:Oe,setPlaybackQuality:Ne,checkPlaybackQuality:Ce,getTopQualityIndexFor:le,setElementSize:Xe,setWindowResizeEventCalled:We,createAbrRulesCollection:ne,registerStreamType:ee,unRegisterStreamType:te,setConfig:oe,reset:ie},Z(),r}U.__dashjs_factory_name="AbrController";var H=_["default"].getSingletonFactory(U);H.ABANDON_LOAD=L,H.QUALITY_DEFAULT=k,_["default"].updateSingletonFactory(U.__dashjs_factory_name,H),t["default"]=H,e.exports=t["default"]},"36c3":function(e,t,n){var r=n("335c"),i=n("25eb");e.exports=function(e){return r(i(e))}},3702:function(e,t,n){var r=n("481b"),i=n("5168")("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},"37b6":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("c287"),u=i(s),l=60,d=60,c=1e3,f=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,h=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){return f.test(e.value)},function(e){var t=f.exec(e),n=void 0;if(n=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&parseFloat(t[7])*c||0),t[9]&&t[10]){var r=parseInt(t[9],10)*d+parseInt(t[10],10);n+=("+"===t[8]?-1:1)*r*l*c}return new Date(n)})}return a(t,e),t}(u["default"]);t["default"]=h,e.exports=t["default"]},3844:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("7b70"),o=r(i);function a(e){e=e||{};var t=e.BASE64,n={};n[o["default"].WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return t.decodeArray(e.license)},getErrorResponse:function(e){return e}},n[o["default"].PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}};var r=void 0;function i(){if(!t||!t.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}function a(e){return e}function s(){return"POST"}function u(e){return n[e].responseType}function l(e,t){return i(),n[t].getLicenseMessage(e)}function d(e,t){return n[t].getErrorResponse(e)}return r={getServerURLFromMessage:a,getHTTPMethod:s,getResponseType:u,getLicenseMessage:l,getErrorResponse:d},r}a.__dashjs_factory_name="DRMToday",t["default"]=dashjs.FactoryMaker.getSingletonFactory(a),e.exports=t["default"]},"38fd":function(e,t,n){var r=n("69a8"),i=n("4bf8"),o=n("613b")("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},"3a0f":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null};t["default"]=i,e.exports=t["default"]},"3a38":function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},"3a7c":function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===g(e)}function r(e){return"boolean"===typeof e}function i(e){return null===e}function o(e){return null==e}function a(e){return"number"===typeof e}function s(e){return"string"===typeof e}function u(e){return"symbol"===typeof e}function l(e){return void 0===e}function d(e){return"[object RegExp]"===g(e)}function c(e){return"object"===typeof e&&null!==e}function f(e){return"[object Date]"===g(e)}function h(e){return"[object Error]"===g(e)||e instanceof Error}function p(e){return"function"===typeof e}function m(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function g(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=r,t.isNull=i,t.isNullOrUndefined=o,t.isNumber=a,t.isString=s,t.isSymbol=u,t.isUndefined=l,t.isRegExp=d,t.isObject=c,t.isDate=f,t.isError=h,t.isFunction=p,t.isPrimitive=m,t.isBuffer=e.isBuffer}).call(this,n("b639").Buffer)},"3a92":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("243c"),o=r(i),a=n("5fa3"),s=r(a),u=n("d0d2"),l=r(u),d=n("7b70"),c=r(d),f="e2719d58-a985-b3c9-781a-b030af78d30e",h=c["default"].CLEARKEY_KEYSTEM_STRING,p="urn:uuid:"+f;function m(e){e=e||{};var t=void 0,n=e.BASE64;function r(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],a=0;a<r.kids.length;a++){var u=r.kids[a],l=e.clearkeys&&e.clearkeys.hasOwnProperty(u)?e.clearkeys[u]:null;if(!l)throw new Error("DRM: ClearKey keyID ("+u+") is not known!");i.push(new o["default"](u,l))}n=new s["default"](i)}return n}function i(e){return l["default"].parseInitDataFromContentProtection(e,n)}function a(){return null}function u(e){return new Uint8Array(e)}function d(){return null}function c(){return null}function m(){return null}return t={uuid:f,schemeIdURI:p,systemString:h,getInitData:i,getRequestHeadersFromMessage:a,getLicenseRequestFromMessage:u,getLicenseServerURLFromInitData:d,getCDMData:c,getSessionId:m,getClearKeysFromProtectionData:r},t}m.__dashjs_factory_name="KeySystemClearKey",t["default"]=dashjs.FactoryMaker.getSingletonFactory(m),e.exports=t["default"]},"3aad":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("589e"),s=r(a),u=n("9485"),l=r(u);function d(){var e=this.context,t=void 0,n=void 0,r=.075,i=6;function o(){n=(0,s["default"])(e).getInstance().getLogger(t)}function a(t){for(var o=t?t.getSwitchHistory():null,a=o?o.getSwitchRequests():[],s=0,u=0,d=0,c=(0,l["default"])(e).create(),f=0;f<a.length;f++)if(void 0!==a[f]&&(s+=a[f].drops,u+=a[f].noDrops,d+=a[f].dropSize,s+u>=i&&s/u>r)){c.quality=f>0&&a[f].drops>0?f-1:f,c.reason={index:c.quality,drops:s,noDrops:u,dropSize:d},n.debug("Switch history rule index: "+c.quality+" samples: "+(s+u)+" drops: "+s);break}return c}return t={getMaxIndex:a},o(),t}d.__dashjs_factory_name="SwitchHistoryRule",t["default"]=o["default"].getClassFactory(d),e.exports=t["default"]},"3b8d":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("795b"),i=n.n(r);function o(e,t,n,r,o,a,s){try{var u=e[a](s),l=u.value}catch(d){return void n(d)}u.done?t(l):i.a.resolve(l).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new i.a(function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,u,"next",e)}function u(e){o(a,r,i,s,u,"throw",e)}s(void 0)})}}},"3c11":function(e,t,n){"use strict";var r=n("63b6"),i=n("584a"),o=n("e53d"),a=n("f201"),s=n("cd78");r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},"3cd4":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(e){e=e||{};var t=void 0,n=e.blacklistController;function r(e){var t=0,r=void 0;return e&&e.some(function(e,r){return t=r,!n.contains(e.serviceLocation)})&&(r=e[t]),r}return t={select:r},t}a.__dashjs_factory_name="BasicSelector",t["default"]=o["default"].getClassFactory(a),e.exports=t["default"]},"3e2c":function(e,t,n){
/*! codem-isoboxer v0.3.6 https://github.com/madebyhiro/codem-isoboxer/blob/master/LICENSE.txt */
var r={parseBuffer:function(e){return new i(e).parse()},addBoxProcessor:function(e,t){"string"===typeof e&&"function"===typeof t&&(o.prototype._boxProcessors[e]=t)},createFile:function(){return new i},createBox:function(e,t,n){var r=o.create(e);return t&&t.append(r,n),r},createFullBox:function(e,t,n){var i=r.createBox(e,t,n);return i.version=0,i.flags=0,i},Utils:{}};r.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!==typeof TextDecoder)return new TextDecoder(n).decode(e);var r=[],i=0;if("utf-8"===n)while(i<e.byteLength){var o=e.getUint8(i++);o<128||(o<224?(o=(31&o)<<6,o|=63&e.getUint8(i++)):o<240?(o=(15&o)<<12,o|=(63&e.getUint8(i++))<<6,o|=63&e.getUint8(i++)):(o=(7&o)<<18,o|=(63&e.getUint8(i++))<<12,o|=(63&e.getUint8(i++))<<6,o|=63&e.getUint8(i++))),r.push(String.fromCharCode(o))}else while(i<e.byteLength)r.push(String.fromCharCode(e.getUint8(i++)));return r.join("")},r.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!==typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|63&r)):r<65536?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t},r.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==n)if(void 0!==n&&null!==n){var r,i=-1;if("number"===typeof n)i=n;else{if("string"===typeof n)r=n;else{if("object"!==typeof n||!n.type)return void e.boxes.push(t);r=n.type}for(var o=0;o<e.boxes.length;o++)if(r===e.boxes[o].type){i=o+1;break}}e.boxes.splice(i,0,t)}else e.boxes.push(t)},t.parseBuffer=r.parseBuffer,t.addBoxProcessor=r.addBoxProcessor,t.createFile=r.createFile,t.createBox=r.createBox,t.createFullBox=r.createFullBox,t.Utils=r.Utils,r.Cursor=function(e){this.offset="undefined"==typeof e?0:e};var i=function(e){this._cursor=new r.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};i.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},i.prototype.fetchAll=function(e,t){var n=[];return i._sweep.call(this,e,n,t),n},i.prototype.parse=function(){this._cursor.offset=0,this.boxes=[];while(this._cursor.offset<this._raw.byteLength){var e=o.parse(this);if("undefined"===typeof e.type)break;this.boxes.push(e)}return this},i._sweep=function(e,t,n){for(var r in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;i._sweep.call(this.boxes[r],e,t,n)}},i.prototype.write=function(){var e,t=0;for(e=0;e<this.boxes.length;e++)t+=this.boxes[e].getLength(!1);var n=new Uint8Array(t);for(this._rawo=new DataView(n.buffer),this.bytes=n,this._cursor.offset=0,e=0;e<this.boxes.length;e++)this.boxes[e].write();return n.buffer},i.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)};var o=function(){this._cursor=new r.Cursor};o.parse=function(e){var t=new o;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},o.create=function(e){var t=new o;return t.type=e,t.boxes=[],t},o.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],o.prototype._boxProcessors={},o.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e])},o.prototype._procFieldArray=function(e,t,n,r){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e][i]=this._readField(n,r);else for(i=0;i<this[e].length;i++)this._writeField(n,r,this[e][i])},o.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},o.prototype._procEntries=function(e,t,n){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e].push({}),n.call(this,this[e][r]);else for(r=0;r<t;r++)n.call(this,this[e][r])},o.prototype._procSubEntries=function(e,t,n,r){var i;if(this._parsing)for(e[t]=[],i=0;i<n;i++)e[t].push({}),r.call(this,e[t][i]);else for(i=0;i<n;i++)r.call(this,e[t][i])},o.prototype._procEntryField=function(e,t,n,r){this._parsing?e[t]=this._readField(n,r):this._writeField(n,r,e[t])},o.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(o.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength()},o.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},o.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var r=this._raw.getInt32(n),i=this._raw.getInt32(n+4);t=r*Math.pow(2,32)+i;break}return this._cursor.offset+=e>>3,t},o.prototype._readUint=function(e){var t,n,r=null,i=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:r=this._raw.getUint8(i);break;case 16:r=this._raw.getUint16(i);break;case 24:t=this._raw.getUint16(i),n=this._raw.getUint8(i+2),r=(t<<8)+n;break;case 32:r=this._raw.getUint32(i);break;case 64:t=this._raw.getUint32(i),n=this._raw.getUint32(i+4),r=t*Math.pow(2,32)+n;break}return this._cursor.offset+=e>>3,r},o.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var r=this._readUint(8);t+=String.fromCharCode(r)}return t},o.prototype._readTemplate=function(e){var t=this._readUint(e/2),n=this._readUint(e/2);return t+n/Math.pow(2,e/2)},o.prototype._readTerminatedString=function(){var e="";while(this._cursor.offset-this._offset<this._raw.byteLength){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},o.prototype._readData=function(e){var t=e>0?e:this._raw.byteLength-(this._cursor.offset-this._offset);if(t>0){var n=new Uint8Array(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,n}return null},o.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return e>0&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t?r.Utils.dataViewToString(t):t},o.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},o.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},o.prototype._parseContainerBox=function(){this.boxes=[];while(this._cursor.offset-this._raw.byteOffset<this._raw.byteLength)this.boxes.push(o.parse(this))},o.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)},o.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},o.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},o.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var r=Math.floor(t/Math.pow(2,32)),i=t-r*Math.pow(2,32);this._rawo.setUint32(n,r),this._rawo.setUint32(n+4,i);break}this._cursor.offset+=e>>3}else this.size+=e>>3},o.prototype._writeUint=function(e,t){if(this._rawo){var n,r,i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(i,t);break;case 16:this._rawo.setUint16(i,t);break;case 24:n=(16776960&t)>>8,r=255&t,this._rawo.setUint16(i,n),this._rawo.setUint8(i+2,r);break;case 32:this._rawo.setUint32(i,t);break;case 64:n=Math.floor(t/Math.pow(2,32)),r=t-n*Math.pow(2,32),this._rawo.setUint32(i,n),this._rawo.setUint32(i+4,r);break}this._cursor.offset+=e>>3}else this.size+=e>>3},o.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n))},o.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},o.prototype._writeTemplate=function(e,t){var n=Math.floor(t),r=(t-n)*Math.pow(2,e/2);this._writeUint(e/2,n),this._writeUint(e/2,r)},o.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,n=0;n<e.length;n++)this._rawo.setInt8(t+n,e[n]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},o.prototype._writeUTF8String=function(e){var t=r.Utils.utf8ToByteArray(e);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,t.length),i=0;i<t.length;i++)n.setUint8(i,t[i]);else this.size+=t.length},o.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n);break;default:break}},o.prototype._boxProcessors["avc1"]=o.prototype._boxProcessors["encv"]=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},o.prototype._boxProcessors["dref"]=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},o.prototype._boxProcessors["elst"]=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)})},o.prototype._boxProcessors["emsg"]=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},o.prototype._boxProcessors["free"]=o.prototype._boxProcessors["skip"]=function(){this._procField("data","data",-1)},o.prototype._boxProcessors["frma"]=function(){this._procField("data_format","uint",32)},o.prototype._boxProcessors["ftyp"]=o.prototype._boxProcessors["styp"]=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},o.prototype._boxProcessors["hdlr"]=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},o.prototype._boxProcessors["mdat"]=function(){this._procField("data","data",-1)},o.prototype._boxProcessors["mdhd"]=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!==typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},o.prototype._boxProcessors["mehd"]=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},o.prototype._boxProcessors["mfhd"]=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},o.prototype._boxProcessors["mfro"]=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},o.prototype._boxProcessors["mp4a"]=o.prototype._boxProcessors["enca"]=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},o.prototype._boxProcessors["mvhd"]=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},o.prototype._boxProcessors["payl"]=function(){this._procField("cue_text","utf8")},o.prototype._boxProcessors["pssh"]=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},o.prototype._boxProcessors["schm"]=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},o.prototype._boxProcessors["sdtp"]=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},o.prototype._boxProcessors["sidx"]=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)})},o.prototype._boxProcessors["smhd"]=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},o.prototype._boxProcessors["ssix"]=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)})})},o.prototype._boxProcessors["stsd"]=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},o.prototype._boxProcessors["subs"]=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)})})},o.prototype._boxProcessors["tenc"]=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},o.prototype._boxProcessors["tfdt"]=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},o.prototype._boxProcessors["tfhd"]=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},o.prototype._boxProcessors["tfra"]=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},o.prototype._boxProcessors["tkhd"]=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},o.prototype._boxProcessors["trex"]=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},o.prototype._boxProcessors["trun"]=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},o.prototype._boxProcessors["url "]=o.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},o.prototype._boxProcessors["vlab"]=function(){this._procField("source_label","utf8")},o.prototype._boxProcessors["vmhd"]=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},o.prototype._boxProcessors["vttC"]=function(){this._procField("config","utf8")},o.prototype._boxProcessors["vtte"]=function(){}},"3f38":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("8a43"),o=r(i),a=n("1d48"),s=r(a),u=n("467b"),l=r(u);function d(){var e=this.context,t=(0,o["default"])(e).getInstance(),n=void 0,r=void 0;function i(){return r}function a(e){r=e,e&&t.trigger(s["default"].MANIFEST_LOADED,{data:e})}return n={getValue:i,setValue:a},n}d.__dashjs_factory_name="ManifestModel",t["default"]=l["default"].getSingletonFactory(d),e.exports=t["default"]},"3fb5":function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},4081:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("0712"),s=r(a),u=n("7865"),l=r(u),d=n("4e7a"),c=r(d),f=n("6c57"),h=r(f),p=n("6a2d"),m=r(p),g=n("0757"),y=n("8a43"),v=r(y),_=n("1d48"),E=r(_),b=n("e172"),T=r(b),S=n("467b"),I=r(S),w=n("8307"),x=r(w),A=n("589e"),D=r(A);function R(e){e=e||{};var t=this.context,n=(0,v["default"])(t).getInstance(),r=(0,c["default"])(t).getInstance(),i=void 0,a=void 0,u=void 0,d=void 0,f=void 0,p=e.mssHandler,y=e.errHandler;function _(){a=(0,D["default"])(t).getInstance().getLogger(i),n.on(E["default"].XLINK_READY,b,i),u=(0,l["default"])(t).create({errHandler:y,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),d=(0,s["default"])(t).create({errHandler:y,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),f=null}function b(e){n.trigger(E["default"].INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}function S(e){var n=null;return e.indexOf("SmoothStreamingMedia")>-1?(p&&(n=p.createMssParser(),p.registerEvents()),n):e.indexOf("MPD")>-1?(0,x["default"])(t).create():n}function I(e){var t=new h["default"](e,g.HTTPRequest.MPD_TYPE);u.load({request:t,success:function(t,i,s){if(d){var u=void 0,l=void 0,c=void 0;if(s&&s!==e?(l=r.parseBaseUrl(s),u=s):(r.isRelative(e)&&(e=r.resolve(e,window.location.href)),l=r.parseBaseUrl(e)),null===f&&(f=S(t)),null!==f){d.setMatchers(f.getMatchers()),d.setIron(f.getIron());try{c=f.parse(t)}catch(h){return void n.trigger(E["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new m["default"](T["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,T["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+e)})}c?(c.url=u||e,c.originalUrl||(c.originalUrl=c.url),c.hasOwnProperty(o["default"].LOCATION)&&(l=r.parseBaseUrl(c.Location_asArray[0]),a.debug("BaseURI set by Location to: "+l)),c.baseUri=l,c.loadedTime=new Date,d.resolveManifestOnLoad(c)):n.trigger(E["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new m["default"](T["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,T["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+e)})}else n.trigger(E["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new m["default"](T["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,T["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+e)})}},error:function(t,r,i){n.trigger(E["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new m["default"](T["default"].MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,T["default"].MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+(e+", ")+i)})}})}function w(){n.off(E["default"].XLINK_READY,b,i),d&&(d.reset(),d=null),u&&(u.abort(),u=null),p&&p.reset()}return i={load:I,reset:w},_(),i}R.__dashjs_factory_name="ManifestLoader";var M=I["default"].getClassFactory(R);t["default"]=M,e.exports=t["default"]},"40c3":function(e,t,n){var r=n("6b4c"),i=n("5168")("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},4178:function(e,t,n){var r,i,o,a=n("d864"),s=n("3024"),u=n("32fc"),l=n("1ec9"),d=n("e53d"),c=d.process,f=d.setImmediate,h=d.clearImmediate,p=d.MessageChannel,m=d.Dispatch,g=0,y={},v="onreadystatechange",_=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},E=function(e){_.call(e.data)};f&&h||(f=function(e){var t=[],n=1;while(arguments.length>n)t.push(arguments[n++]);return y[++g]=function(){s("function"==typeof e?e:Function(e),t)},r(g),g},h=function(e){delete y[e]},"process"==n("6b4c")(c)?r=function(e){c.nextTick(a(_,e,1))}:m&&m.now?r=function(e){m.now(a(_,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=E,r=a(o.postMessage,o,1)):d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(r=function(e){d.postMessage(e+"","*")},d.addEventListener("message",E,!1)):r=v in l("script")?function(e){u.appendChild(l("script"))[v]=function(){u.removeChild(this),_.call(e)}}:function(e){setTimeout(a(_,e,1),0)}),e.exports={set:f,clear:h}},4187:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("8a43"),o=r(i),a=n("1d48"),s=r(a),u=n("467b"),l=r(u);function d(){var e=void 0,t=this.context,n=(0,o["default"])(t).getInstance();function r(e){n.trigger(s["default"].ERROR,{error:"capability",event:e})}function i(e,t,r){n.trigger(s["default"].ERROR,{error:"download",event:{id:e,url:t,request:r}})}function a(e,t,r,i){n.trigger(s["default"].ERROR,{error:"manifestError",event:{message:e,id:t,manifest:r,event:i}})}function u(e,t,r){n.trigger(s["default"].ERROR,{error:"cc",event:{message:e,id:t,cc:r}})}function l(e){n.trigger(s["default"].ERROR,{error:"mediasource",event:e})}function d(e){n.trigger(s["default"].ERROR,{error:"key_session",event:e})}function c(e){n.trigger(s["default"].ERROR,{error:"key_message",event:e})}function f(e){n.trigger(s["default"].ERROR,{error:e})}return e={capabilityError:r,downloadError:i,manifestError:a,timedTextError:u,mediaSourceError:l,mediaKeySessionError:d,mediaKeyMessageError:c,error:f},e}d.__dashjs_factory_name="ErrorHandler",t["default"]=l["default"].getSingletonFactory(d),e.exports=t["default"]},"41a0":function(e,t,n){"use strict";var r=n("2aeb"),i=n("4630"),o=n("7f20"),a={};n("32e9")(a,n("2b4c")("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},"41ee":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null};i.ACTION_DOWNLOAD="download",i.ACTION_COMPLETE="complete",t["default"]=i,e.exports=t["default"]},"429b":function(e,t,n){e.exports=n("faa1").EventEmitter},4362:function(e,t,n){t.nextTick=function(e){setTimeout(e,0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,r="/";t.cwd=function(){return r},t.chdir=function(t){e||(e=n("df7c")),r=e.resolve(t,r)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},4398:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("47e4"),s=r(a),u=n("1a38"),l=r(u),d=n("8e01"),c=r(d),f=n("d665"),h=r(f),p=n("4be9"),m=r(p),g=n("4081"),y=r(g),v=n("4187"),_=r(v),E=n("612d"),b=r(E),T=n("eba1"),S=r(T),I=n("b4f1"),w=r(I),x=n("5571"),A=r(x),D=n("6f8b"),R=r(D),M=n("3f38"),C=r(M),N=n("bd9a"),P=r(N),L=n("c645"),O=r(L),F=n("36b1"),B=r(F),k=n("e251"),U=r(k),H=n("2e81"),j=r(H),K=n("589e"),V=r(K),q=n("e172"),G=r(q),Y=n("8a43"),z=r(Y),W=n("1d48"),X=r(W),$=n("1962"),Q=r($),J=n("467b"),Z=r(J),ee=n("3337"),te=n("b2c3"),ne=r(te),re=n("5080"),ie=r(re),oe=n("d5e2"),ae=r(oe),se=n("ad14"),ue=r(se),le=n("0757"),de=n("6a67"),ce=r(de),fe=n("3e2c"),he=r(fe),pe=n("6a2d"),me=r(pe),ge=n("71a8");function ye(){var e="You must first call initialize() and set a source before calling this method",t="You must first call initialize() and set a valid source and view before calling this method",n="You must first call attachView() to set the video element before calling this method",r="You must first call attachSource() with a valid source before calling this method",i="MediaPlayer not initialized!",a="Playback minimum drift has an invalid value! Use a number from 0 to 0.5",u="Playback maximum drift has an invalid value! Use a number greater or equal to 0",d=this.context,f=(0,z["default"])(d).getInstance(),p=(0,V["default"])(d).getInstance(),g=void 0,v=void 0,E=void 0,T=void 0,I=void 0,x=void 0,D=void 0,M=void 0,N=void 0,L=void 0,F=void 0,k=void 0,H=void 0,K=void 0,q=void 0,Y=void 0,W=void 0,$=void 0,J=void 0,te=void 0,re=void 0,oe=void 0,se=void 0,de=void 0,fe=void 0,pe=void 0,ye=void 0,ve=void 0;function _e(){v=p.getLogger(g),I=!1,D=!1,x=!1,M=!0,k=null,T=null,q=null,X["default"].extend(Q["default"]),W=(0,P["default"])(d).getInstance(),fe=(0,U["default"])(d).getInstance(),ye=(0,R["default"])(d).getInstance()}function Ee(e){e&&(e.capabilities&&(J=e.capabilities),e.streamController&&(te=e.streamController),e.playbackController&&(re=e.playbackController),e.mediaPlayerModel&&(W=e.mediaPlayerModel),e.abrController&&(N=e.abrController),e.mediaController&&(F=e.mediaController))}function be(e,t,n){if(J||(J=(0,b["default"])(d).getInstance()),$=(0,_["default"])(d).getInstance(),!J.supportsMediaSource())return $.capabilityError("mediasource"),void $.error(new me["default"](G["default"].CAPABILITY_MEDIASOURCE_ERROR_CODE,G["default"].CAPABILITY_MEDIASOURCE_ERROR_MESSAGE));I||(I=!0,L=(0,ue["default"])(d).getInstance(),N||(N=(0,B["default"])(d).getInstance()),re||(re=(0,l["default"])(d).getInstance()),F||(F=(0,h["default"])(d).getInstance()),q=(0,ne["default"])(d).getInstance(),se=(0,ie["default"])(d).getInstance({timelineConverter:L,errHandler:$,BASE64:ce["default"]}),de=(0,C["default"])(d).getInstance(),oe=(0,ae["default"])(d).getInstance({manifestModel:de,dashManifestModel:se}),Y=(0,O["default"])(d).getInstance(),pe=(0,A["default"])(d).getInstance(),ve=(0,j["default"])(d).getInstance({mediaPlayerModel:W}),q.setConfig({dashManifestModel:se}),Wt(),Tt(void 0===n||n),e&&Un(e),t&&sr(t),v.info("[dash.js "+xe()+"] MediaPlayer has been initialized"))}function Te(){sr(null),Un(null),T=null,k&&(k.reset(),k=null),H&&(H.reset(),H=null)}function Se(){return!!E&&!!fe.getElement()}function Ie(e,t,n){f.on(e,t,n)}function we(e,t,n){f.off(e,t,n)}function xe(){return(0,ee.getVersionString)()}function Ae(){return p}function De(){if(fe.getElement()||x)return!1;if(!E)throw r;Er()}function Re(){if(!D)throw t;(!M||Ce()&&D)&&re.play()}function Me(){if(!D)throw t;re.pause()}function Ce(){if(!D)throw t;return re.isPaused()}function Ne(e){if(!D)throw t;if((0,ge.checkParameterType)(e,"number"),isNaN(e))throw o["default"].BAD_ARGUMENT_ERROR;var n=re.getIsDynamic()?Xe(e):e;re.seek(n)}function Pe(){if(!D)throw t;return re.isSeeking()}function Le(){if(!D)throw t;return re.getIsDynamic()}function Oe(e){Bn().playbackRate=e}function Fe(){return Bn().playbackRate}function Be(e){W.setCatchUpPlaybackRate(e)}function ke(){return W.getCatchUpPlaybackRate()}function Ue(e){if("number"!==typeof e||isNaN(e)||e<0||e>.5)throw a;W.setLowLatencyMinDrift(e)}function He(){return W.getLowLatencyMinDrift()}function je(e){if("number"!==typeof e||isNaN(e)||e<0)throw u;W.setLowLatencyMaxDriftBeforeSeeking(e)}function Ke(){return W.getLowLatencyMaxDriftBeforeSeeking()}function Ve(e){(0,ge.checkParameterType)(e,"boolean"),Bn().muted=e}function qe(){return Bn().muted}function Ge(e){if("number"!==typeof e||isNaN(e)||e<0||e>1)throw o["default"].BAD_ARGUMENT_ERROR;Bn().volume=e}function Ye(){return Bn().volume}function ze(e){var t=[o["default"].VIDEO,o["default"].AUDIO,o["default"].FRAGMENTED_TEXT];if(e){if(-1!==t.indexOf(e)){n=wn().getCurrentBufferLevel(xn(e));return n||NaN}return v.warn("getBufferLength requested for invalid type"),NaN}var n=t.map(function(e){return qn(e).length>0?wn().getCurrentBufferLevel(xn(e)):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)});return n===Number.MAX_VALUE?NaN:n}function We(){var e=vr();return e?e.manifestInfo.DVRWindowSize:0}function Xe(e){var t=vr();if(!t)return 0;var n=re.getLiveDelay(),r=t.range.start+e;return r>t.range.end-n&&(r=t.range.end-n),r}function $e(e){if(!D)throw t;var n=Bn().currentTime;if(void 0!==e)n=te.getTimeRelativeToStreamId(n,e);else if(re.getIsDynamic()){var r=vr();n=null===r?0:Qe()-(r.range.end-r.time)}return n}function Qe(){if(!D)throw t;var e=Bn().duration;if(re.getIsDynamic()){var n=vr(),r=void 0;if(!n)return 0;r=n.range.end-n.range.start,e=r<n.manifestInfo.DVRWindowSize?r:n.manifestInfo.DVRWindowSize}return e}function Je(){if(!D)throw t;return $e()<0?NaN:_r($e())}function Ze(){if(!D)throw t;return _r(Qe())}function et(e,t){N.setMaxAllowedBitrateFor(e,t)}function tt(e,t){N.setMinAllowedBitrateFor(e,t)}function nt(e){return N.getMaxAllowedBitrateFor(e)}function rt(t){if(!x)throw e;return N.getTopBitrateInfoFor(t)}function it(e){return N.getMinAllowedBitrateFor(e)}function ot(e,t){N.setMaxAllowedRepresentationRatioFor(e,t)}function at(e){return N.getMaxAllowedRepresentationRatioFor(e)}function st(t){if(!x)throw e;if(t===o["default"].IMAGE){var n=cr();if(!n)return-1;var r=n.getThumbnailController();return r?r.getCurrentTrackIndex():-1}return N.getQualityFor(t,te.getActiveStreamInfo())}function ut(t,n){if(!x)throw e;if(t===o["default"].IMAGE){var r=cr();if(!r)return;var i=r.getThumbnailController();i&&i.setTrackByIndex(n)}N.setPlaybackQuality(t,te.getActiveStreamInfo(),n)}function lt(){N.setElementSize(),N.setWindowResizeEventCalled(!0)}function dt(){return N.getLimitBitrateByPortal()}function ct(e){N.setLimitBitrateByPortal(e)}function ft(){return N.getUsePixelRatioInLimitBitrateByPortal()}function ht(e){N.setUsePixelRatioInLimitBitrateByPortal(e)}function pt(e,t){N.setInitialBitrateFor(e,t)}function mt(t){if(!x)throw e;return N.getInitialBitrateFor(t)}function gt(e,t){N.setInitialRepresentationRatioFor(e,t)}function yt(e){return N.getInitialRepresentationRatioFor(e)}function vt(e){return N.getAutoSwitchBitrateFor(e)}function _t(e,t){N.setAutoSwitchBitrateFor(e,t)}function Et(){return N.getUseDeadTimeLatency()}function bt(e){N.setUseDeadTimeLatency(e)}function Tt(e){(0,ge.checkParameterType)(e,"boolean"),M=e}function St(){return M}function It(e){W.setLiveDelayFragmentCount(e)}function wt(e){W.setLiveDelay(e)}function xt(){return W.getLiveDelay()}function At(){if(!I)throw i;return D?re.getCurrentLiveLatency():NaN}function Dt(e){W.setUseSuggestedPresentationDelay(e)}function Rt(e,t){W.setLastBitrateCachingInfo(e,t)}function Mt(e,t){W.setLastMediaSettingsCachingInfo(e,t)}function Ct(e){W.setScheduleWhilePaused(e)}function Nt(){return W.getScheduleWhilePaused()}function Pt(e){W.setFastSwitchEnabled(e)}function Lt(){return W.getFastSwitchEnabled()}function Ot(e){W.setABRStrategy(e)}function Ft(){return W.getABRStrategy()}function Bt(e){W.setUseDefaultABRRules(e)}function kt(e,t,n){W.addABRCustomRule(e,t,n)}function Ut(e){W.removeABRCustomRule(e)}function Ht(){W.removeABRCustomRule()}function jt(e){W.setMovingAverageMethod(e)}function Kt(){return W.getMovingAverageMethod()}function Vt(){return W.getLowLatencyEnabled()}function qt(e){W.setLowLatencyEnabled(e)}function Gt(e,t){W.addUTCTimingSource(e,t)}function Yt(e,t){W.removeUTCTimingSource(e,t)}function zt(){W.clearDefaultUTCTimingSources()}function Wt(){W.restoreDefaultUTCTimingSources()}function Xt(e){W.setUseManifestDateHeaderTimeSource(e)}function $t(e){W.setBufferToKeep(e)}function Qt(e){W.setBufferAheadToKeep(e)}function Jt(e){W.setBufferPruningInterval(e)}function Zt(e){W.setStableBufferTime(e)}function en(){return W.getStableBufferTime()}function tn(e){W.setBufferTimeAtTopQuality(e)}function nn(){return W.getBufferTimeAtTopQuality()}function rn(e){W.setBufferTimeAtTopQualityLongForm(e)}function on(){return W.getBufferTimeAtTopQualityLongForm()}function an(e){W.setLongFormContentDurationThreshold(e)}function sn(e){W.setSegmentOverlapToleranceTime(e)}function un(e,t){W.setCacheLoadThresholdForType(e,t)}function ln(e){W.setBandwidthSafetyFactor(e)}function dn(){return W.getBandwidthSafetyFactor()}function cn(e){var t=N.getThroughputHistory();return t?t.getAverageThroughput(e):0}function fn(e){W.setAbandonLoadTimeout(e)}function hn(e){W.setRetryAttemptsForType(le.HTTPRequest.MEDIA_SEGMENT_TYPE,e)}function pn(e){W.setRetryIntervalForType(le.HTTPRequest.MEDIA_SEGMENT_TYPE,e)}function mn(e){W.setRetryAttemptsForType(le.HTTPRequest.MPD_TYPE,e)}function gn(e){W.setRetryIntervalForType(le.HTTPRequest.MPD_TYPE,e)}function yn(e,t){W.setXHRWithCredentialsForType(e,t)}function vn(e){return W.getXHRWithCredentialsForType(e)}function _n(e){W.setJumpGaps(e)}function En(){return W.getJumpGaps()}function bn(e){W.setSmallGapLimit(e)}function Tn(){return W.getSmallGapLimit()}function Sn(e){W.setManifestUpdateRetryInterval(e)}function In(){return W.getManifestUpdateRetryInterval()}function wn(){return oe}function xn(e){return Y.getReadOnlyMetricsFor(e)}function An(e){void 0===pe&&(pe=(0,A["default"])(d).getInstance()),pe.setTextDefaultLanguage(e)}function Dn(){return void 0===pe&&(pe=(0,A["default"])(d).getInstance()),pe.getTextDefaultLanguage()}function Rn(e){void 0===pe&&(pe=(0,A["default"])(d).getInstance()),pe.setTextDefaultEnabled(e)}function Mn(){return void 0===pe&&(pe=(0,A["default"])(d).getInstance()),pe.getTextDefaultEnabled()}function Cn(e){void 0===pe&&(pe=(0,A["default"])(d).getInstance()),pe.enableText(e)}function Nn(e){void 0===pe&&(pe=(0,A["default"])(d).getInstance()),pe.enableForcedTextStreaming(e)}function Pn(){return void 0===pe&&(pe=(0,A["default"])(d).getInstance()),pe.isTextEnabled()}function Ln(e){if(!D)throw t;void 0===pe&&(pe=(0,A["default"])(d).getInstance()),pe.setTextTrack(e)}function On(){var e=NaN;return pe&&(e=pe.getCurrentTrackIdx()),e}function Fn(e){var t=(0,S["default"])(d).getInstance();t.setConfig({videoModel:fe}),t.initialize(),t.displayCConTop(e)}function Bn(){if(!fe.getElement())throw n;return fe.getElement()}function kn(e){v.warn("attachVideoContainer method has been deprecated and will be removed in dash.js v3.0.0")}function Un(e){if(!I)throw i;fe.setElement(e),e&&(mr(),gr(),yr(),te&&te.switchToVideoElement()),D&&fr(),Er()}function Hn(){return fe?fe.getTTMLRenderingDiv():null}function jn(e){if(!fe.getElement())throw n;fe.setTTMLRenderingDiv(e)}function Kn(t){if(!x)throw e;var n=cr();return n?n.getBitrateListFor(t):[]}function Vn(t){if(!x)throw e;return q.getStreamsInfo(t)}function qn(t){if(!x)throw e;var n=te.getActiveStreamInfo();return F.getTracksFor(t,n)}function Gn(t,n,r){if(!x)throw e;return r=r||q.getStreamsInfo(n,1)[0],r?q.getAllMediaInfoForType(r,t,n):[]}function Yn(t){if(!x)throw e;var n=te.getActiveStreamInfo();return F.getCurrentTrackFor(t,n)}function zn(e,t){if(!I)throw i;F.setInitialSettings(e,t)}function Wn(e){if(!I)throw i;return F.getInitialSettings(e)}function Xn(t){if(!x)throw e;F.setTrack(t)}function $n(e){if(!I)throw i;return F.getSwitchMode(e)}function Qn(e,t){if(!I)throw i;F.setSwitchMode(e,t)}function Jn(e){if(!I)throw i;F.setSelectionModeForInitialTrack(e)}function Zn(){if(!I)throw i;return F.getSelectionModeForInitialTrack()}function er(){return mr()}function tr(e){k=e}function nr(e){T=e,te&&te.setProtectionData(T)}function rr(e,t){if(e<0)return null;var n=re.getIsDynamic()?Xe(e):e,r=te.getStreamForTime(n);if(null===r)return null;var i=r.getThumbnailController();if(!i)return null;var o=te.getTimeRelativeToStreamId(n,r.getId());return i.get(o,t)}function ir(e){W.setKeepProtectionMediaKeys(e)}function or(e,t){var n=pr(),r=this,i=function e(i){i.error?t(null,i.error):t(i.manifest),f.off(X["default"].INTERNAL_MANIFEST_LOADED,e,r),n.reset()};f.on(X["default"].INTERNAL_MANIFEST_LOADED,i,r),ye.initialize(e),n.load(e)}function ar(){if(!E)throw r;return E}function sr(e){if(!I)throw i;"string"===typeof e&&ye.initialize(e),E=e,(x||D)&&fr(),Se()&&Er()}function ur(e,t,n){var r=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],i=new Date(1e3*e),o=i.toLocaleDateString(t),a=i.toLocaleTimeString(t,{hour12:n});return r?a+" "+o:a}function lr(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(r<10?"0"+r.toString():r.toString())}function dr(e,t,n){Z["default"].extend(e,t,n,d)}function cr(){if(!x)throw e;var t=te.getActiveStreamInfo();return t?te.getStreamById(t.id):null}function fr(){D=!1,x=!1,q.reset(),te.reset(),re.reset(),N.reset(),F.reset(),pe.reset(),k&&(W.getKeepProtectionMediaKeys()?k.stop():(k.reset(),k=null,mr()))}function hr(){var e=pr();te||(te=(0,c["default"])(d).getInstance()),F.setConfig({domStorage:ve}),te.setConfig({capabilities:J,manifestLoader:e,manifestModel:de,dashManifestModel:se,mediaPlayerModel:W,protectionController:k,adapter:q,metricsModel:Y,dashMetrics:oe,errHandler:$,timelineConverter:L,videoModel:fe,playbackController:re,domStorage:ve,abrController:N,mediaController:F,textController:pe}),re.setConfig({streamController:te,metricsModel:Y,dashMetrics:oe,manifestModel:de,mediaPlayerModel:W,dashManifestModel:se,adapter:q,videoModel:fe,timelineConverter:L,uriFragmentModel:ye}),N.setConfig({streamController:te,domStorage:ve,mediaPlayerModel:W,metricsModel:Y,dashMetrics:oe,manifestModel:de,videoModel:fe,adapter:q}),N.createAbrRulesCollection(),pe.setConfig({errHandler:$,manifestModel:de,dashManifestModel:se,mediaController:F,streamController:te,videoModel:fe}),te.initialize(M,T)}function pr(){return(0,y["default"])(d).create({errHandler:$,metricsModel:Y,mediaPlayerModel:W,requestModifier:(0,w["default"])(d).getInstance(),mssHandler:K})}function mr(){if(k)return k;var e=dashjs.Protection;if("function"===typeof e){var t=e(d).create();return X["default"].extend(e.events),Q["default"].extend(e.events,{publicOnly:!0}),G["default"].extend(e.errors),J||(J=(0,b["default"])(d).getInstance()),k=t.createProtectionSystem({debug:p,errHandler:$,videoModel:fe,capabilities:J,eventBus:f,events:X["default"],BASE64:ce["default"],constants:o["default"]}),k}return null}function gr(){if(!H){var e=dashjs.MetricsReporting;if("function"===typeof e){var t=e(d).create();H=t.createMetricsReporting({debug:p,eventBus:f,mediaElement:Bn(),dashManifestModel:se,metricsModel:Y,events:X["default"],constants:o["default"],metricsConstants:s["default"]})}}}function yr(){if(!K){var e=dashjs.MssHandler;"function"===typeof e&&(G["default"].extend(e.errors),K=e(d).create({eventBus:f,mediaPlayerModel:W,metricsModel:Y,manifestModel:de,playbackController:re,protectionController:k,baseURLController:(0,m["default"])(d).getInstance(),errHandler:$,events:X["default"],constants:o["default"],debug:p,initSegmentType:le.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:ce["default"],ISOBoxer:he["default"]}))}}function vr(){var e=Y.getReadOnlyMetricsFor(o["default"].VIDEO)||Y.getReadOnlyMetricsFor(o["default"].AUDIO);return oe.getCurrentDVRInfo(e)}function _r(e){var t=vr(),n=void 0,r=void 0;return t?(n=t.manifestInfo.availableFrom.getTime()/1e3,r=e+(n+t.range.start),r):0}function Er(){!x&&E&&(x=!0,v.info("Streaming Initialized"),hr(),"string"===typeof E?te.load(E):te.loadWithManifest(E)),!D&&Se()&&(D=!0,v.info("Playback Initialized"))}return g={initialize:be,setConfig:Ee,on:Ie,off:we,extend:dr,attachView:Un,attachSource:sr,isReady:Se,preload:De,play:Re,isPaused:Ce,pause:Me,isSeeking:Pe,isDynamic:Le,seek:Ne,setPlaybackRate:Oe,getPlaybackRate:Fe,setMute:Ve,isMuted:qe,setVolume:Ge,getVolume:Ye,time:$e,duration:Qe,timeAsUTC:Je,durationAsUTC:Ze,getActiveStream:cr,getDVRWindowSize:We,getDVRSeekOffset:Xe,convertToTimeCode:lr,formatUTC:ur,getVersion:xe,getDebug:Ae,getBufferLength:ze,getTTMLRenderingDiv:Hn,getVideoElement:Bn,getSource:ar,setLiveDelayFragmentCount:It,setLiveDelay:wt,getLiveDelay:xt,getCurrentLiveLatency:At,useSuggestedPresentationDelay:Dt,enableLastBitrateCaching:Rt,enableLastMediaSettingsCaching:Mt,setMaxAllowedBitrateFor:et,getMaxAllowedBitrateFor:nt,getTopBitrateInfoFor:rt,setMinAllowedBitrateFor:tt,getMinAllowedBitrateFor:it,setMaxAllowedRepresentationRatioFor:ot,getMaxAllowedRepresentationRatioFor:at,setAutoPlay:Tt,getAutoPlay:St,setScheduleWhilePaused:Ct,getScheduleWhilePaused:Nt,getDashMetrics:wn,getMetricsFor:xn,getQualityFor:st,setQualityFor:ut,updatePortalSize:lt,getLimitBitrateByPortal:dt,setLimitBitrateByPortal:ct,getUsePixelRatioInLimitBitrateByPortal:ft,setUsePixelRatioInLimitBitrateByPortal:ht,setTextDefaultLanguage:An,getTextDefaultLanguage:Dn,setTextDefaultEnabled:Rn,getTextDefaultEnabled:Mn,enableText:Cn,enableForcedTextStreaming:Nn,isTextEnabled:Pn,setTextTrack:Ln,getBitrateInfoListFor:Kn,setInitialBitrateFor:pt,getInitialBitrateFor:mt,setInitialRepresentationRatioFor:gt,getInitialRepresentationRatioFor:yt,getStreamsFromManifest:Vn,getTracksFor:qn,getTracksForTypeFromManifest:Gn,getCurrentTrackFor:Yn,setInitialMediaSettingsFor:zn,getInitialMediaSettingsFor:Wn,setCurrentTrack:Xn,getTrackSwitchModeFor:$n,setTrackSwitchModeFor:Qn,setSelectionModeForInitialTrack:Jn,getSelectionModeForInitialTrack:Zn,setFastSwitchEnabled:Pt,getFastSwitchEnabled:Lt,setMovingAverageMethod:jt,getMovingAverageMethod:Kt,getAutoSwitchQualityFor:vt,setAutoSwitchQualityFor:_t,setABRStrategy:Ot,getABRStrategy:Ft,useDefaultABRRules:Bt,addABRCustomRule:kt,removeABRCustomRule:Ut,removeAllABRCustomRule:Ht,setBandwidthSafetyFactor:ln,getBandwidthSafetyFactor:dn,getAverageThroughput:cn,setAbandonLoadTimeout:fn,retrieveManifest:or,addUTCTimingSource:Gt,removeUTCTimingSource:Yt,clearDefaultUTCTimingSources:zt,restoreDefaultUTCTimingSources:Wt,setBufferToKeep:$t,setBufferAheadToKeep:Qt,setBufferPruningInterval:Jt,setStableBufferTime:Zt,getStableBufferTime:en,setBufferTimeAtTopQuality:tn,getBufferTimeAtTopQuality:nn,setBufferTimeAtTopQualityLongForm:rn,getBufferTimeAtTopQualityLongForm:on,setFragmentLoaderRetryAttempts:hn,setFragmentLoaderRetryInterval:pn,setManifestLoaderRetryAttempts:mn,setManifestLoaderRetryInterval:gn,setXHRWithCredentialsForType:yn,getXHRWithCredentialsForType:vn,setJumpGaps:_n,getJumpGaps:En,setSmallGapLimit:bn,getSmallGapLimit:Tn,setLowLatencyEnabled:qt,getLowLatencyEnabled:Vt,setCatchUpPlaybackRate:Be,getCatchUpPlaybackRate:ke,setLowLatencyMinDrift:Ue,getLowLatencyMinDrift:He,setLowLatencyMaxDriftBeforeSeeking:je,getLowLatencyMaxDriftBeforeSeeking:Ke,setManifestUpdateRetryInterval:Sn,getManifestUpdateRetryInterval:In,setLongFormContentDurationThreshold:an,setSegmentOverlapToleranceTime:sn,setCacheLoadThresholdForType:un,getProtectionController:er,attachProtectionController:tr,setProtectionData:nr,enableManifestDateHeaderTimeSource:Xt,displayCaptionsOnTop:Fn,attachVideoContainer:kn,attachTTMLRenderingDiv:jn,getCurrentTextTrackIndex:On,getUseDeadTimeLatencyForAbr:Et,setUseDeadTimeLatencyForAbr:bt,getThumbnail:rr,keepProtectionMediaKeys:ir,reset:Te},_e(),g}ye.__dashjs_factory_name="MediaPlayer";var ve=Z["default"].getClassFactory(ye);ve.events=Q["default"],ve.errors=G["default"],Z["default"].updateClassFactory(ye.__dashjs_factory_name,ve),t["default"]=ve,e.exports=t["default"]},"43fc":function(e,t,n){"use strict";var r=n("63b6"),i=n("656e"),o=n("4439");r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},4439:function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},"446e":function(e,t,n){(function(e){(function(){var n="undefined"!=typeof window?window:e,r={};for(var i in function(e,t){var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},o="undefined"!=typeof e&&e===this?this:"undefined"!=typeof t&&null!=t?t:this;function a(){a=function(){},o.Symbol||(o.Symbol=s)}var s=function(){var e=0;return function(t){return"jscomp_symbol_"+(t||"")+e++}}();function u(){a();var e=o.Symbol.iterator;e||(e=o.Symbol.iterator=o.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&r(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return l(this)}}),u=function(){}}function l(e){var t=0;return d(function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})}function d(e){return u(),e={next:e},e[o.Symbol.iterator]=function(){return this},e}function c(e){u();var t=e[Symbol.iterator];return t?t.call(e):l(e)}function f(e,t){if(t){for(var n=o,i=e.split("."),a=0;a<i.length-1;a++){var s=i[a];s in n||(n[s]={}),n=n[s]}i=i[i.length-1],a=n[i],s=t(a),s!=a&&null!=s&&r(n,i,{configurable:!0,writable:!0,value:s})}}function h(e){function t(t){return e.next(t)}function n(t){return e["throw"](t)}return new Promise(function(r,i){function o(e){e.done?r(e.value):Promise.resolve(e.value).then(t,n).then(o,i)}o(e.next())})}function p(e){return h(e())}function m(){this.g=!1,this.c=null,this.J=void 0,this.u=1,this.b=this.f=0,this.i=this.a=null}function g(e){if(e.g)throw new TypeError("Generator is already running");e.g=!0}function y(e,t){e.a={rc:t,yc:!0},e.u=e.f||e.b}function v(e,t,n){return e.u=n,{value:t}}function _(e,t,n){e.f=t,void 0!=n&&(e.b=n)}function E(e){e.f=0,e.b=2}function b(e,t){e.u=t,e.f=0}function T(e){e.f=0;var t=e.a.rc;return e.a=null,t}function S(e){e.i=[e.a],e.f=0,e.b=0}function I(e,t){var n=e.i.splice(0)[0];(n=e.a=e.a||n)?n.yc?e.u=e.f||e.b:void 0!=n.N&&e.b<n.N?(e.u=n.N,e.a=null):e.u=e.b:e.u=t}function w(e){this.a=new m,this.b=e}function x(e,t){g(e.a);var n=e.a.c;return n?A(e,"return"in n?n["return"]:function(e){return{value:e,done:!0}},t,e.a["return"]):(e.a["return"](t),D(e))}function A(e,t,n,r){try{var i=t.call(e.a.c,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.a.g=!1,i;var o=i.value}catch(a){return e.a.c=null,y(e.a,a),D(e)}return e.a.c=null,r.call(e.a,o),D(e)}function D(e){for(;e.a.u;)try{var t=e.b(e.a);if(t)return e.a.g=!1,{value:t.value,done:!1}}catch(n){e.a.J=void 0,y(e.a,n)}if(e.a.g=!1,e.a.a){if(t=e.a.a,e.a.a=null,t.yc)throw t.rc;return{value:t["return"],done:!0}}return{value:void 0,done:!0}}function R(e){this.next=function(t){return g(e.a),e.a.c?t=A(e,e.a.c.next,t,e.a.h):(e.a.h(t),t=D(e)),t},this["throw"]=function(t){return g(e.a),e.a.c?t=A(e,e.a.c["throw"],t,e.a.h):(y(e.a,t),t=D(e)),t},this["return"]=function(t){return x(e,t)},u(),this[Symbol.iterator]=function(){return this}}function M(e,t){return R.prototype=e.prototype,new R(new w(t))}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}f("Promise",function(e){function t(e){this.b=0,this.g=void 0,this.a=[];var t=this.c();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.a=null}function r(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.b=function(e){null==this.a&&(this.a=[],this.f()),this.a.push(e)},n.prototype.f=function(){var e=this;this.c(function(){e.h()})};var i=o.setTimeout;n.prototype.c=function(e){i(e,0)},n.prototype.h=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.g(r)}}}this.a=null},n.prototype.g=function(e){this.c(function(){throw e})},t.prototype.c=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.f)}},t.prototype.m=function(e){if(e===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.o(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.l(e):this.h(e)}},t.prototype.l=function(e){var t=void 0;try{t=e.then}catch(n){return void this.f(n)}"function"==typeof t?this.s(t,e):this.h(e)},t.prototype.f=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.g=t,this.j()},t.prototype.j=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)a.b(this.a[e]);this.a=null}};var a=new n;return t.prototype.o=function(e){var t=this.c();e.sb(t.resolve,t.reject)},t.prototype.s=function(e,t){var n=this.c();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){o(n)}}:t}var i,o,a=new t(function(e,t){i=e,o=t});return this.sb(r(e,i),r(n,o)),a},t.prototype["catch"]=function(e){return this.then(void 0,e)},t.prototype.sb=function(e,t){function n(){switch(r.b){case 1:e(r.g);break;case 2:t(r.g);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},t.resolve=r,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var i=c(e),o=i.next();!o.done;o=i.next())r(o.value).sb(t,n)})},t.all=function(e){var n=c(e),i=n.next();return i.done?r([]):new t(function(e,t){function o(t){return function(n){a[t]=n,s--,0==s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).sb(o(a.length-1),t),i=n.next()}while(!i.done)})},t}),f("Promise.prototype.finally",function(e){return e||function(e){return this.then(function(t){return Promise.resolve(e()).then(function(){return t})},function(t){return Promise.resolve(e()).then(function(){throw t})})}}),m.prototype.h=function(e){this.J=e},m.prototype["return"]=function(e){this.a={return:e},this.u=this.b},m.prototype.N=function(e){this.u=e},f("WeakMap",function(e){function t(e){if(this.a=(s+=Math.random()+1).toString(),e){a(),u(),e=c(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(e){C(e,o)||r(e,o,{value:{}})}function i(e){var t=Object[e];t&&(Object[e]=function(e){return n(e),t(e)})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r["delete"](t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(i){return!1}}())return e;var o="$jscomp_hidden_"+Math.random();i("freeze"),i("preventExtensions"),i("seal");var s=0;return t.prototype.set=function(e,t){if(n(e),!C(e,o))throw Error("WeakMap key fail: "+e);return e[o][this.a]=t,this},t.prototype.get=function(e){return C(e,o)?e[o][this.a]:void 0},t.prototype.has=function(e){return C(e,o)&&C(e[o],this.a)},t.prototype["delete"]=function(e){return!(!C(e,o)||!C(e[o],this.a))&&delete e[o][this.a]},t}),f("Map",function(e){function t(){var e={};return e.pa=e.next=e.head=e}function n(e,t){var n=e.a;return d(function(){if(n){for(;n.head!=e.a;)n=n.pa;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}})}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?o.has(t)?n=o.get(t):(n=""+ ++s,o.set(t,n)):n="p_"+t;var r=e.b[n];if(r&&C(e.b,n))for(var i=0;i<r.length;i++){var a=r[i];if(t!==t&&a.key!==a.key||t===a.key)return{id:n,list:r,index:i,P:a}}return{id:n,list:r,index:-1,P:void 0}}function i(e){if(this.b={},this.a=t(),this.size=0,e){e=c(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(c([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&(i=r.next(),!(i.done||4!=i.value[0].x||"t"!=i.value[1]||!r.next().done))}catch(o){return!1}}())return e;a(),u();var o=new WeakMap;i.prototype.set=function(e,t){var n=r(this,e);return n.list||(n.list=this.b[n.id]=[]),n.P?n.P.value=t:(n.P={next:this.a,pa:this.a.pa,head:this.a,key:e,value:t},n.list.push(n.P),this.a.pa.next=n.P,this.a.pa=n.P,this.size++),this},i.prototype["delete"]=function(e){return e=r(this,e),!(!e.P||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.b[e.id],e.P.pa.next=e.P.next,e.P.next.pa=e.P.pa,e.P.head=null,this.size--,!0)},i.prototype.clear=function(){this.b={},this.a=this.a.pa=t(),this.size=0},i.prototype.has=function(e){return!!r(this,e).P},i.prototype.get=function(e){return(e=r(this,e).P)&&e.value},i.prototype.entries=function(){return n(this,function(e){return[e.key,e.value]})},i.prototype.keys=function(){return n(this,function(e){return e.key})},i.prototype.values=function(){return n(this,function(e){return e.value})},i.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var s=0;return i}),f("Array.from",function(e){return e||function(e,t,n){u(),t=null!=t?t:function(e){return e};var r=[],i=e[Symbol.iterator];if("function"==typeof i)for(e=i.call(e);!(i=e.next()).done;)r.push(t.call(n,i.value));else{i=e.length;for(var o=0;o<i;o++)r.push(t.call(n,e[o]))}return r}}),f("Array.prototype.find",function(e){return e||function(e,t){e:{var n=this;n instanceof String&&(n=String(n));for(var r=n.length,i=0;i<r;i++){var o=n[i];if(e.call(t,o,i,n)){n=o;break e}}n=void 0}return n}}),f("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}}),f("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length,i=t||0;for(0>i&&(i=Math.max(i+r,0));i<r;i++){var o=n[i];if(o===e||Object.is(o,e))return!0}return!1}}),f("String.prototype.includes",function(e){return e||function(e,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(e,t||0)}}),f("Set",function(e){function t(e){if(this.a=new Map,e){e=c(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.a.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(c([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&i.value[1]==t&&(i=r.next(),!i.done&&i.value[0]!=t&&4==i.value[0].x&&i.value[1]==i.value[0]&&r.next().done)}catch(o){return!1}}()?e:(a(),u(),t.prototype.add=function(e){return this.a.set(e,e),this.size=this.a.size,this},t.prototype["delete"]=function(e){return e=this.a["delete"](e),this.size=this.a.size,e},t.prototype.clear=function(){this.a.clear(),this.size=0},t.prototype.has=function(e){return this.a.has(e)},t.prototype.entries=function(){return this.a.entries()},t.prototype.values=function(){return this.a.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.a.forEach(function(r){return e.call(t,r,r,n)})},t)}),f("Object.values",function(e){return e||function(e){var t,n=[];for(t in e)C(e,t)&&n.push(e[t]);return n}});var N=this;function P(e,t){var n,r=e.split("."),i=N;r[0]in i||!i.execScript||i.execScript("var "+r[0]);for(;r.length&&(n=r.shift());)r.length||void 0===t?i=i[n]?i[n]:i[n]={}:i[n]=t}function L(e,t){function n(){}n.prototype=t.prototype,e.jf=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.gf=function(e,n,r){return t.prototype[n].apply(e,Array.prototype.slice.call(arguments,2))}}function O(e){this.c=Math.exp(Math.log(.5)/e),this.b=this.a=0}function F(e,t,n){var r=Math.pow(e.c,t);n=n*(1-r)+r*e.a,isNaN(n)||(e.a=n,e.b+=t)}function B(e){return e.a/(1-Math.pow(e.c,e.b))}function k(){this.b=new O(2),this.c=new O(5),this.a=0}function U(){}function H(){}N.a=!0,k.prototype.getBandwidthEstimate=function(e){return 128e3>this.a?e:Math.min(B(this.b),B(this.c))},e.console&&e.console.log.bind&&(U=console.warn.bind(console));var j=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function K(e){var t;e instanceof K?(V(this,e.ja),this.Fa=e.Fa,this.ma=e.ma,q(this,e.Qa),this.$=e.$,G(this,te(e.a)),this.za=e.za):e&&(t=String(e).match(j))?(V(this,t[1]||"",!0),this.Fa=Y(t[2]||""),this.ma=Y(t[3]||"",!0),q(this,t[4]),this.$=Y(t[5]||"",!0),G(this,t[6]||"",!0),this.za=Y(t[7]||"")):this.a=new ee(null)}function V(e,t,n){e.ja=n?Y(t,!0):t,e.ja&&(e.ja=e.ja.replace(/:$/,""))}function q(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Qa=t}else e.Qa=null}function G(e,t,n){t instanceof ee?e.a=t:(n||(t=z(t,J)),e.a=new ee(t))}function Y(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function z(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,W),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function W(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}n=K.prototype,n.ja="",n.Fa="",n.ma="",n.Qa=null,n.$="",n.za="",n.toString=function(){var e=[],t=this.ja;if(t&&e.push(z(t,X,!0),":"),t=this.ma){e.push("//");var n=this.Fa;n&&e.push(z(n,X,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Qa,null!=t&&e.push(":",String(t))}return(t=this.$)&&(this.ma&&"/"!=t.charAt(0)&&e.push("/"),e.push(z(t,"/"==t.charAt(0)?Q:$,!0))),(t=this.a.toString())&&e.push("?",t),(t=this.za)&&e.push("#",z(t,Z)),e.join("")},n.resolve=function(e){var t=new K(this);"data"===t.ja&&(t=new K);var n=!!e.ja;n?V(t,e.ja):n=!!e.Fa,n?t.Fa=e.Fa:n=!!e.ma,n?t.ma=e.ma:n=null!=e.Qa;var r=e.$;if(n)q(t,e.Qa);else if(n=!!e.$){if("/"!=r.charAt(0))if(this.ma&&!this.$)r="/"+r;else{var i=t.$.lastIndexOf("/");-1!=i&&(r=t.$.substr(0,i+1)+r)}if(".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],a=0;a<r.length;){var s=r[a++];"."==s?i&&a==r.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&a==r.length&&o.push("")):(o.push(s),i=!0)}r=o.join("/")}}return n?t.$=r:n=""!==e.a.toString(),n?G(t,te(e.a)):n=!!e.za,n&&(t.za=e.za),t};var X=/[#\/\?@]/g,$=/[#\?:]/g,Q=/[#\?]/g,J=/[#\?@]/g,Z=/#/g;function ee(e){this.b=e||null}function te(e){var t=new ee;if(t.b=e.b,e.a){var n,r={};for(n in e.a)r[n]=e.a[n].concat();t.a=r,t.c=e.c}return t}function ne(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n}function re(e,t){var n=oe();this.i=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.f=null==e.baseDelay?n.baseDelay:e.baseDelay,this.h=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.g=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.a=0,this.b=this.f,(this.c=t||!1)&&(this.a=1)}function ie(t){if(t.a>=t.i){if(!t.c)return Promise.reject();t.a=1,t.b=t.f}var n=new ne;return t.a?(e.setTimeout(n.resolve,t.b*(1+(2*Math.random()-1)*t.h)),t.b*=t.g):n.resolve(),t.a++,n}function oe(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}}function ae(e,t,n,r){this.severity=e,this.category=t,this.code=n,this.data=Array.prototype.slice.call(arguments,3),this.handled=!1}function se(e,t){this.promise=e,this.b=t,this.a=!1}function ue(e){return new se(Promise.reject(e),function(){return Promise.resolve()})}function le(){var e=Promise.reject(new ae(2,7,7001));return e["catch"](function(){}),new se(e,function(){return Promise.resolve()})}function de(e){return new se(Promise.resolve(e),function(){return Promise.resolve()})}function ce(e){return new se(e,function(){return e["catch"](function(){})})}function fe(e){return new se(Promise.all(e.map(function(e){return e.promise})),function(){return Promise.all(e.map(function(e){return e.abort()}))})}function he(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){})["catch"](function(){})})}catch(i){return n.reject(i),function(){return Promise.resolve()}}}function pe(e,t){return!("number"!==typeof e||"number"!==typeof t||!isNaN(e)||!isNaN(t))||e===t}function me(e,t){t||(t=pe);for(var n=[],r=c(e),i=r.next();!i.done;i=r.next())i=i.value,-1==ge(n,i,t)&&n.push(i);return n}function ge(e,t,n){for(var r=0;r<e.length;++r)if(n(e[r],t))return r;return-1}function ye(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function ve(e,t){var n=0;return e.forEach(function(e){n+=t(e)?1:0}),n}function _e(e,t,n,r,i){var o,a=i in r,s=!0;for(o in t){var u=i+"."+o,l=a?r[i]:n[o];a||o in e?void 0===t[o]?void 0===l||a?delete e[o]:e[o]=Ee(l):l.constructor==Object&&t[o]&&t[o].constructor==Object?(e[o]||(e[o]=Ee(l)),u=_e(e[o],t[o],l,r,u),s=s&&u):typeof t[o]!=typeof l||null==t[o]||t[o].constructor!=l.constructor?s=!1:e[o]=t[o]:s=!1}return s}function Ee(e){function t(e){switch(typeof e){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return e;default:if(!e||e.buffer&&e.buffer.constructor==ArrayBuffer)return e;if(0<=n.indexOf(e))return null;var r=e.constructor==Array;if(e.constructor!=Object&&!r)return null;n.push(e);var i,o=r?[]:{};for(i in e)o[i]=t(e[i]);return r&&(o.length=e.length),o}}var n=[];return t(e)}function be(e,t){function n(){return Promise.all(e.map(function(e){return e.destroy()}))}return Promise.resolve(t()).then(function(e){return n().then(function(){return e})},function(e){return n().then(function(){throw e})})}function Te(){this.a=[]}function Se(e,t){e.a.push(t["finally"](function(){ye(e.a,t)}))}function Ie(e){this.c=!1,this.g=new Te,this.a=[],this.b=[],this.f=e||null}ee.prototype.a=null,ee.prototype.c=null,ee.prototype.add=function(e,t){if(!this.a&&(this.a={},this.c=0,this.b))for(var n=this.b.split("&"),r=0;r<n.length;r++){var i=n[r].indexOf("="),o=null;if(0<=i){var a=n[r].substring(0,i);o=n[r].substring(i+1)}else a=n[r];a=decodeURIComponent(a.replace(/\+/g," ")),o=o||"",this.add(a,decodeURIComponent(o.replace(/\+/g," ")))}return this.b=null,(n=this.a.hasOwnProperty(e)&&this.a[e])||(this.a[e]=n=[]),n.push(t),this.c++,this},ee.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return"";var e,t=[];for(e in this.a)for(var n=encodeURIComponent(e),r=this.a[e],i=0;i<r.length;i++){var o=n;""!==r[i]&&(o+="="+encodeURIComponent(r[i])),t.push(o)}return this.b=t.join("&")},ne.prototype.resolve=function(){},ne.prototype.reject=function(){},P("shaka.util.Error",ae),ae.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},ae.Severity={RECOVERABLE:1,CRITICAL:2},ae.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},ae.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013},P("shaka.util.AbortableOperation",se),se.failed=ue,se.aborted=le,se.completed=de,se.notAbortable=ce,se.prototype.abort=function(){return this.a=!0,this.b()},se.prototype.abort=se.prototype.abort,se.all=fe,se.prototype["finally"]=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},se.prototype["finally"]=se.prototype["finally"],se.prototype.X=function(e,t){function n(){return i.reject(new ae(2,7,7001)),r.abort()}var r=this,i=new ne;return this.promise.then(function(t){r.a?i.reject(new ae(2,7,7001)):e?n=he(e,t,i):i.resolve(t)},function(e){t?n=he(t,e,i):i.reject(e)}),new se(i,function(){return n()})},se.prototype.chain=se.prototype.X,Te.prototype.destroy=function(){var e=[];return this.a.forEach(function(t){t.promise["catch"](function(){}),e.push(t.abort())}),this.a=[],Promise.all(e)},P("shaka.net.NetworkingEngine",Ie),Ie.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3},Ie.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3};var we={};function xe(e,t,n){n=n||3;var r=we[e];(!r||n>=r.priority)&&(we[e]={priority:n,ne:t})}function Ae(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t}}function De(e){return e.then=function(t,n){return U("The network request interface has changed!  Please update your application to the new interface, which allows operations to be aborted.  Support for the old API will be removed in v2.5."),e.promise.then(t,n)},e["catch"]=function(t){return U("The network request interface has changed!  Please update your application to the new interface, which allows operations to be aborted.  Support for the old API will be removed in v2.5."),e.promise["catch"](t)},e}function Re(e,t,n){var r=de(void 0);return e.a.forEach(function(e){r=r.X(function(){return e(t,n)})}),r.X(void 0,function(e){if(e&&7001==e.code)throw e;throw new ae(2,1,1006,e)})}function Me(e,t,n,r,i,o){var a=new K(n.uris[i]),s=a.ja;s||(s=location.protocol,s=s.slice(0,-1),V(a,s),n.uris[i]=a.toString());var u,l=(s=we[s])?s.ne:null;return l?ce(ie(r)).X(function(){if(e.c)return le();u=Date.now();var r=l(n.uris[i],n,t);return void 0==r.promise&&(U("The scheme plugin interface has changed!  Please update your scheme plugins to the new interface to add support for abort().  Support for the old plugin interface will be removed in v2.5."),r=ce(r)),r}).X(function(e){return void 0==e.timeMs&&(e.timeMs=Date.now()-u),e},function(a){if(a&&7001==a.code)throw a;if(e.c)return le();if(a&&1==a.severity)return i=(i+1)%n.uris.length,Me(e,t,n,r,i,a);throw a||o}):ue(new ae(2,1,1e3,a))}function Ce(e,t,n){var r=de(void 0);return e.b.forEach(function(e){r=r.X(function(){return e(t,n)})}),r.X(function(){return n},function(e){if(e&&7001==e.code)throw e;var t=2;throw e instanceof ae&&(t=e.severity),new ae(t,1,1007,e)})}function Ne(){this.a={}}function Pe(){this.a=new Ne}function Le(e,t,n,r){e.a&&(t=new Be(t,n,r),e.a.push(n,t))}function Oe(e,t,n,r){Le(e,t,n,function(e){this.qa(t,n),r(e)}.bind(e))}function Fe(e){if(e.a){var t,n=e.a,r=[];for(t in n.a)r.push.apply(r,n.a[t]);for(n=0;n<r.length;++n)r[n].qa();e.a.a={}}}function Be(e,t,n){this.target=e,this.type=t,this.a=n,this.target.addEventListener(t,n,!1)}function ke(t,n){var r,i=n||{};for(r in i)this[r]=i[r];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function Ue(e,t){return e.reduce(function(e,t,n){return t["catch"](e.bind(null,n))}.bind(null,t),Promise.reject())}function He(e,t){return e.concat(t)}function je(){}function Ke(e){return null!=e}function Ve(e,t,n){return n.indexOf(e)==t}function qe(e,t){if(0==t.length)return e;var n=t.map(function(e){return new K(e)});return e.map(function(e){return new K(e)}).map(function(e){return n.map(e.resolve.bind(e))}).reduce(He,[]).map(function(e){return e.toString()})}function Ge(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:[]}}Ie.registerScheme=xe,Ie.unregisterScheme=function(e){delete we[e]},Ie.prototype.qe=function(e){this.a.push(e)},Ie.prototype.registerRequestFilter=Ie.prototype.qe,Ie.prototype.Ve=function(e){ye(this.a,e)},Ie.prototype.unregisterRequestFilter=Ie.prototype.Ve,Ie.prototype.jd=function(){this.a=[]},Ie.prototype.clearAllRequestFilters=Ie.prototype.jd,Ie.prototype.re=function(e){this.b.push(e)},Ie.prototype.registerResponseFilter=Ie.prototype.re,Ie.prototype.We=function(e){ye(this.b,e)},Ie.prototype.unregisterResponseFilter=Ie.prototype.We,Ie.prototype.kd=function(){this.b=[]},Ie.prototype.clearAllResponseFilters=Ie.prototype.kd,Ie.prototype.destroy=function(){return this.c=!0,this.a=[],this.b=[],this.g.destroy()},Ie.prototype.destroy=Ie.prototype.destroy,Ie.prototype.request=function(e,t){var n=this;if(this.c)return De(le());t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Ee(t.retryParameters):oe(),t.uris=Ee(t.uris);var r=Re(this,e,t),i=r.X(function(){return Me(n,e,t,new re(t.retryParameters,!1),0,null)}),o=i.X(function(t){return Ce(n,e,t)}),a=Date.now(),s=0;r.promise.then(function(){s=Date.now()-a},function(){});var u=0;return i.promise.then(function(){u=Date.now()},function(){}),r=o.X(function(t){var r=Date.now()-u;return t.timeMs+=s,t.timeMs+=r,n.f&&!t.fromCache&&1==e&&n.f(t.timeMs,t.data.byteLength),t},function(e){throw e&&(e.severity=2),e}),Se(this.g,r),De(r)},Ie.prototype.request=Ie.prototype.request,Ne.prototype.push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},Ne.prototype.get=function(e){return(e=this.a[e])?e.slice():null},Ne.prototype.remove=function(e,t){var n=this.a[e];if(n)for(var r=0;r<n.length;++r)n[r]==t&&(n.splice(r,1),--r)},Pe.prototype.destroy=function(){return Fe(this),this.a=null,Promise.resolve()},Pe.prototype.qa=function(e,t){if(this.a)for(var n=this.a.get(t)||[],r=0;r<n.length;++r){var i=n[r];i.target==e&&(i.qa(),this.a.remove(t,i))}},Be.prototype.qa=function(){this.target.removeEventListener(this.type,this.a,!1),this.a=this.target=null},ke.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},ke.prototype.stopImmediatePropagation=function(){this.a=!0},ke.prototype.stopPropagation=function(){};var Ye=1/15,ze={empty:function(e){return!e||0==Object.keys(e).length},values:function(e){return Object.keys(e).map(function(t){return e[t]})},map:function(e,t){return Object.keys(e).reduce(function(n,r){return n[r]=t(e[r],r),n},{})},every:function(e,t){return Object.keys(e).every(function(n){return t(n,e[n])})},forEach:function(e,t){Object.keys(e).forEach(function(n){t(n,e[n])})},ef:function(e){var t=new Map;return Object.keys(e).forEach(function(n){t.set(n,e[n])}),t},ff:function(e){var t={};return e.forEach(function(e,n){t[n]=e}),t}};function We(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function Xe(e){var t=[e.mimeType];return $e.forEach(function(n,r){var i=e[r];i&&t.push(n+'="'+i+'"')}),t.join(";")}var $e=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function Qe(e){if(!e)return"";e=new Uint8Array(e),239==e[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=escape(tt(e));try{return decodeURIComponent(e)}catch(t){throw new ae(2,2,2004)}}function Je(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new ae(2,2,2004);if(e instanceof ArrayBuffer)var r=e;else n=new Uint8Array(e.byteLength),n.set(new Uint8Array(e)),r=n.buffer;e=Math.floor(e.byteLength/2),n=new Uint16Array(e),r=new DataView(r);for(var i=0;i<e;i++)n[i]=r.getUint16(2*i,t);return tt(n)}function Ze(e){var t=new Uint8Array(e);if(239==t[0]&&187==t[1]&&191==t[2])return Qe(t);if(254==t[0]&&255==t[1])return Je(t.subarray(2),!1);if(255==t[0]&&254==t[1])return Je(t.subarray(2),!0);var n=function(e,t){return e.byteLength<=t||32<=e[t]&&126>=e[t]}.bind(null,t);if(0==t[0]&&0==t[2])return Je(e,!1);if(0==t[1]&&0==t[3])return Je(e,!0);if(n(0)&&n(1)&&n(2)&&n(3))return Qe(e);throw new ae(2,2,2003)}function et(e){e=encodeURIComponent(e),e=unescape(e);for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t.buffer}function tt(e){for(var t="",n=0;n<e.length;n+=16e3)t+=String.fromCharCode.apply(null,e.subarray(n,n+16e3));return t}function nt(e){this.a=null,this.b=function(){this.a=null,e()}.bind(this)}function rt(e){var t=Lt;e.cancel(),e.a=setTimeout(e.b,1e3*t)}function it(e,t){e.cancel();var n=function(){this.b(),this.a=setTimeout(n,1e3*t)}.bind(e);e.a=setTimeout(n,1e3*t)}function ot(t,n){var r=void 0==n||n,i=e.btoa(tt(t)).replace(/\+/g,"-").replace(/\//g,"_");return r?i:i.replace(/=*$/,"")}function at(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}function st(t){for(var n=new Uint8Array(t.length/2),r=0;r<t.length;r+=2)n[r/2]=e.parseInt(t.substr(r,2),16);return n}function ut(e){for(var t="",n=0;n<e.length;++n){var r=e[n].toString(16);1==r.length&&(r="0"+r),t+=r}return t}function lt(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0}function dt(e){for(var t=0,n=0;n<arguments.length;++n)t+=arguments[n].length;t=new Uint8Array(t);for(var r=n=0;r<arguments.length;++r)t.set(arguments[r],n),n+=arguments[r].length;return t}function ct(e){this.s=e,this.l=this.j=this.v=null,this.G=!1,this.b=null,this.h=new Pe,this.a=[],this.o=[],this.i=new ne,this.f=null,this.g=function(t){this.i.reject(t),e.onError(t)}.bind(this),this.M={},this.m={},this.T=new nt(this.pe.bind(this)),this.c=!1,this.fa=new ne,this.ha=!1,this.A=[],this.ga=!1,this.K=new nt(this.oe.bind(this)),it(this.K,1),this.i["catch"](function(){})}function ft(e){return p(function t(){var n;return M(t,function(t){switch(t.u){case 1:return v(t,e.h.destroy(),2);case 2:return e.h=null,e.i.reject(),e.K.cancel(),e.K=null,e.T.cancel(),e.T=null,n=e.a,e.a=[],v(t,Promise.all(n.map(function(e){return Promise.resolve().then(function(){return p(function t(){return M(t,function(t){switch(t.u){case 1:return _(t,2),v(t,Ct(e.ka),4);case 4:b(t,0);break;case 2:T(t),t.u=0}})})})})),3);case 3:if(!e.l){t.N(4);break}return _(t,5),v(t,e.l.setMediaKeys(null),7);case 7:b(t,6);break;case 5:T(t);case 6:e.l=null;case 4:e.b=null,e.v=null,e.j=null,e.o=[],e.f=null,e.g=null,e.s=null,t.u=0}})})}function ht(e,t){return Promise.all(t.map(function(e){return It(this,e).then(function(e){if(e){for(var t=new ne,n=0;n<this.a.length;n++)if(this.a[n].ka==e){this.a[n].ra=t;break}return Promise.all([e.remove(),t])}}.bind(this))}.bind(e)))}function pt(e){var t=e.b?e.b.initData:[];return t.forEach(function(e){wt(this,e.initDataType,e.initData)}.bind(e)),e.o.forEach(function(e){It(this,e)}.bind(e)),t.length||e.o.length||e.i.resolve(),e.i}function mt(e,t,n){for(var r=c(e.a),i=r.next();!i.done;i=r.next())if(lt(n,i.value.initData))return;wt(e,t,n)}function gt(e){return e.a.map(function(e){return e.ka.sessionId})}function yt(t,n,r,i,o){var a=Et(t),s=bt(t,n);n.periods.forEach(function(t){t.variants.forEach(function(t){a&&(t.drmInfos=[a]),s&&(t.drmInfos=s),t.drmInfos.forEach(function(n){_t(this,n),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==n.keySystem&&(n.keySystem="com.chromecast.playready");var a=i[n.keySystem];a||(a={audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:r?"required":"optional",sessionTypes:[r?"persistent-license":"temporary"],label:n.keySystem,drmInfos:[]},i[n.keySystem]=a,o.push(n.keySystem)),a.drmInfos.push(n),n.distinctiveIdentifierRequired&&(a.distinctiveIdentifier="required"),n.persistentStateRequired&&(a.persistentState="required");var s=[];t.video&&s.push(t.video),t.audio&&s.push(t.audio),s.forEach(function(e){("video"==e.type?a.videoCapabilities:a.audioCapabilities).push({robustness:("video"==e.type?n.videoRobustness:n.audioRobustness)||"",contentType:We(e.mimeType,e.codecs)})}.bind(this))}.bind(this))}.bind(this))}.bind(t))}function vt(e,t,n,r){if(1==n.length&&""==n[0])return Promise.reject(new ae(2,6,6e3));var i=new ne,o=i;return[!0,!1].forEach(function(e){n.forEach(function(n){var r=t[n];r.drmInfos.some(function(e){return!!e.licenseServerUri})==e&&(0==r.audioCapabilities.length&&delete r.audioCapabilities,0==r.videoCapabilities.length&&delete r.videoCapabilities,o=o["catch"](function(){if(!this.c)return navigator.requestMediaKeySystemAccess(n,[r])}.bind(this)))}.bind(this))}.bind(e)),o=o["catch"](function(){return Promise.reject(new ae(2,6,6001))}),o=o.then(function(e){if(this.c)return Promise.reject();var n=0<=navigator.userAgent.indexOf("Edge/"),r=e.getConfiguration();return this.v=(r.audioCapabilities||[]).concat(r.videoCapabilities||[]).map(function(e){return e.contentType}),n&&(this.v=null),n=t[e.keySystem],Tt(this,e.keySystem,n,n.drmInfos),this.b.licenseServerUri?e.createMediaKeys():Promise.reject(new ae(2,6,6012))}.bind(e)).then(function(e){if(this.c)return Promise.reject();this.j=e,this.G=!0}.bind(e))["catch"](function(e){if(!this.c)return this.v=this.b=null,e instanceof ae?Promise.reject(e):Promise.reject(new ae(2,6,6002,e.message))}.bind(e)),r||(o=o["catch"](function(){})),i.reject(),o}function _t(e,t){var n=t.keySystem;if(n){if(!t.licenseServerUri){var r=e.f.servers[n];r&&(t.licenseServerUri=r)}t.keyIds||(t.keyIds=[]),(n=e.f.advanced[n])&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=n.persistentStateRequired),t.videoRobustness||(t.videoRobustness=n.videoRobustness),t.audioRobustness||(t.audioRobustness=n.audioRobustness),t.serverCertificate||(t.serverCertificate=n.serverCertificate))}}function Et(t){if(ze.empty(t.f.clearKeys))return null;var n,r=[],i=[];for(n in t.f.clearKeys){var o=t.f.clearKeys[n],a=st(n);o=st(o),a={kty:"oct",kid:ot(a,!1),k:ot(o,!1)},r.push(a),i.push(a.kid)}return t=JSON.stringify({keys:r}),i=JSON.stringify({kids:i}),i=[{initData:new Uint8Array(et(i)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:i,keyIds:[]}}function bt(e,t){var n=e.f,r=Object.keys(n.servers);return!r.length||t.periods.some(function(e){return e.variants.some(function(e){return e.drmInfos.length})})?null:r.map(function(e){return{keySystem:e,licenseServerUri:n.servers[e],distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]}})}function Tt(e,t,n,r){var i=[],o=[],a=[],s=[];St(r,i,o,a,s),e.b={keySystem:t,licenseServerUri:i[0],distinctiveIdentifierRequired:"required"==n.distinctiveIdentifier,persistentStateRequired:"required"==n.persistentState,audioRobustness:n.audioCapabilities?n.audioCapabilities[0].robustness:"",videoRobustness:n.videoCapabilities?n.videoCapabilities[0].robustness:"",serverCertificate:o[0],initData:a,keyIds:s}}function St(e,t,n,r,i){function o(e,t){return!(!e.keyId||e.keyId!=t.keyId)||e.initDataType==t.initDataType&&lt(e.initData,t.initData)}e.forEach(function(e){if(-1==t.indexOf(e.licenseServerUri)&&t.push(e.licenseServerUri),e.serverCertificate&&-1==ge(n,e.serverCertificate,lt)&&n.push(e.serverCertificate),e.initData&&e.initData.forEach(function(e){-1==ge(r,e,o)&&r.push(e)}),e.keyIds)for(var a=0;a<e.keyIds.length;++a)-1==i.indexOf(e.keyIds[a])&&i.push(e.keyIds[a])})}function It(e,t){try{var n=e.j.createSession("persistent-license")}catch(o){var r=new ae(2,6,6005,o.message);return e.g(r),Promise.reject(r)}Le(e.h,n,"message",e.Ic.bind(e)),Le(e.h,n,"keystatuseschange",e.Ec.bind(e));var i={initData:null,ka:n,loaded:!1,Ub:1/0,ra:null};return e.a.push(i),n.load(t).then(function(e){return this.c?Promise.reject():e?(i.loaded=!0,this.a.every(function(e){return e.loaded})&&this.i.resolve(),n):(this.a.splice(this.a.indexOf(i),1),void this.g(new ae(2,6,6013)))}.bind(e),function(e){this.c||(this.a.splice(this.a.indexOf(i),1),this.g(new ae(2,6,6005,e.message)))}.bind(e))}function wt(e,t,n){try{var r=e.ha?e.j.createSession("persistent-license"):e.j.createSession()}catch(i){return void e.g(new ae(2,6,6005,i.message))}Le(e.h,r,"message",e.Ic.bind(e)),Le(e.h,r,"keystatuseschange",e.Ec.bind(e)),e.a.push({initData:n,ka:r,loaded:!1,Ub:1/0,ra:null}),r.generateRequest(t,n.buffer)["catch"](function(t){if(!e.c){for(var n=0;n<e.a.length;++n)if(e.a[n].ka==r){e.a.splice(n,1);break}if(t.errorCode&&t.errorCode.systemCode){var i=t.errorCode.systemCode;0>i&&(i+=Math.pow(2,32)),i="0x"+i.toString(16)}e.g(new ae(2,6,6006,t.message,t,i))}})}function xt(e,t){for(var n,r=t.target,i=0;i<e.a.length;i++)if(e.a[i].ka==r){n=e.a[i];break}i=Ae([e.b.licenseServerUri],e.f.retryParameters),i.body=t.message,i.method="POST","com.microsoft.playready"!=e.b.keySystem&&"com.chromecast.playready"!=e.b.keySystem||At(i),e.s.$a.request(2,i).promise.then(function(e){return this.c?Promise.reject():r.update(e.data).then(function(){this.s.onEvent(new ke("drmsessionupdate")),n&&(n.ra&&n.ra.resolve(),setTimeout(function(){n.loaded=!0,this.a.every(function(e){return e.loaded})&&this.i.resolve()}.bind(this),1e3*Pt))}.bind(this))}.bind(e),function(e){this.c||(e=new ae(2,6,6007,e),this.g(e),n&&n.ra&&n.ra.reject(e))}.bind(e))["catch"](function(e){this.c||(e=new ae(2,6,6008,e.message),this.g(e),n&&n.ra&&n.ra.reject(e))}.bind(e))}function At(e){var t=Je(e.body,!0,!0);if(-1==t.indexOf("PlayReadyKeyMessage"))e.headers["Content-Type"]="text/xml; charset=utf-8";else{t=(new DOMParser).parseFromString(t,"application/xml");for(var n=t.getElementsByTagName("HttpHeader"),r=0;r<n.length;++r)e.headers[n[r].querySelector("name").textContent]=n[r].querySelector("value").textContent;e.body=at(t.querySelector("Challenge").textContent).buffer}}function Dt(){var e=[],t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],n=[{videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:t}],r={};return"org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").forEach(function(t){var i=navigator.requestMediaKeySystemAccess(t,n).then(function(e){var n=e.getConfiguration().sessionTypes;return n=!!n&&0<=n.indexOf("persistent-license"),0<=navigator.userAgent.indexOf("Tizen 3")&&(n=!1),r[t]={persistentState:n},e.createMediaKeys()})["catch"](function(){r[t]=null});e.push(i)}),Promise.all(e).then(function(){return r})}function Rt(e,t){var n=e.keySystem();return 0==t.drmInfos.length||t.drmInfos.some(function(e){return e.keySystem==n})}function Mt(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],r=0;r<e.length;r++)for(var i=0;i<t.length;i++)if(e[r].keySystem==t[i].keySystem){var o=e[r];i=t[i];var a=[];a=a.concat(o.initData||[]),a=a.concat(i.initData||[]);var s=[];s=s.concat(o.keyIds),s=s.concat(i.keyIds),n.push({keySystem:o.keySystem,licenseServerUri:o.licenseServerUri||i.licenseServerUri,distinctiveIdentifierRequired:o.distinctiveIdentifierRequired||i.distinctiveIdentifierRequired,persistentStateRequired:o.persistentStateRequired||i.persistentStateRequired,videoRobustness:o.videoRobustness||i.videoRobustness,audioRobustness:o.audioRobustness||i.audioRobustness,serverCertificate:o.serverCertificate||i.serverCertificate,initData:a,keyIds:s});break}return n}function Ct(e){return p(function t(){var n,r;return M(t,function(t){switch(t.u){case 1:return n=e.close().then(function(){return!0}),r=new Promise(function(e){setTimeout(function(){e(!1)},1e3*Nt)}),v(t,Promise.race([n,r]),2);case 2:t.u=0}})})}P("shaka.util.StringUtils.fromUTF8",Qe),P("shaka.util.StringUtils.fromUTF16",Je),P("shaka.util.StringUtils.fromBytesAutoDetect",Ze),P("shaka.util.StringUtils.toUTF8",et),nt.prototype.cancel=function(){null!=this.a&&(clearTimeout(this.a),this.a=null)},P("shaka.util.Uint8ArrayUtils.toBase64",ot),P("shaka.util.Uint8ArrayUtils.fromBase64",at),P("shaka.util.Uint8ArrayUtils.fromHex",st),P("shaka.util.Uint8ArrayUtils.toHex",ut),P("shaka.util.Uint8ArrayUtils.equal",lt),P("shaka.util.Uint8ArrayUtils.concat",dt),n=ct.prototype,n.destroy=function(){var e=this;return p(function t(){return M(t,function(t){switch(t.u){case 1:return e.c?v(t,e.fa,0):(e.c=!0,v(t,ft(e),4));case 4:e.fa.resolve(),t.N(0)}})})},n.configure=function(e){this.f=e},n.init=function(e,t){var n={},r=[],i=e.periods.some(function(e){return e.variants.some(function(e){return e.drmInfos.length})});return this.ha=t,this.o=e.offlineSessionIds,yt(this,e,t||0<e.offlineSessionIds.length,n,r),r.length?vt(this,n,r,i):(this.G=!0,Promise.resolve())},n.rb=function(e){var t=this;if(!this.j)return Oe(this.h,e,"encrypted",function(){this.g(new ae(2,6,6010))}.bind(this)),Promise.resolve();this.l=e,Oe(this.h,this.l,"play",this.Ud.bind(this)),e=this.l.setMediaKeys(this.j),e=e["catch"](function(e){return Promise.reject(new ae(2,6,6003,e.message))});var n=null;return this.b.serverCertificate&&this.b.serverCertificate.length&&(n=this.j.setServerCertificate(this.b.serverCertificate).then(function(){})["catch"](function(e){return Promise.reject(new ae(2,6,6004,e.message))})),Promise.all([e,n]).then(function(){if(t.c)return Promise.reject();pt(t),t.b.initData.length||t.o.length||Le(t.h,t.l,"encrypted",function(e){return mt(t,e.initDataType,new Uint8Array(e.initData))})})["catch"](function(e){if(!t.c)return Promise.reject(e)})},n.keySystem=function(){return this.b?this.b.keySystem:""},n.vb=function(){var e=this.a.map(function(e){return e=e.ka.expiration,isNaN(e)?1/0:e});return Math.min.apply(Math,e)},n.Ic=function(e){this.f.delayLicenseRequestUntilPlayed&&this.l.paused&&!this.ga?this.A.push(e):xt(this,e)},n.Ec=function(e){var t;for(e=e.target,t=0;t<this.a.length&&this.a[t].ka!=e;++t);var n=t<this.a.length,r=!1;e.keyStatuses.forEach(function(e,n){if("string"==typeof n){var i=n;n=e,e=i}if("com.microsoft.playready"==this.b.keySystem&&16==n.byteLength&&!/Tizen/.exec(navigator.userAgent)){i=new DataView(n);var o=i.getUint32(0,!0),a=i.getUint16(4,!0),s=i.getUint16(6,!0);i.setUint32(0,o,!1),i.setUint16(4,a,!1),i.setUint16(6,s,!1)}"com.microsoft.playready"==this.b.keySystem&&"status-pending"==e&&(e="usable"),"status-pending"!=e&&(this.a[t].loaded=!0),"expired"==e&&(r=!0),i=ut(new Uint8Array(n)),this.M[i]=e}.bind(this));var i=e.expiration-Date.now();(0>i||r&&1e3>i)&&n&&!this.a[t].ra&&(this.a.splice(t,1),e.close()["catch"](function(){})),this.a.every(function(e){return e.loaded})&&(this.i.resolve(),rt(this.T))},n.pe=function(){function e(e,t){return"expired"==t}for(var t in this.m={},this.M)this.m[t]=this.M[t];!ze.empty(this.m)&&ze.every(this.m,e)&&this.g(new ae(2,6,6014)),this.s.Vb(this.m)},n.Ud=function(){for(var e=0;e<this.A.length;e++)xt(this,this.A[e]);this.ga=!0,this.A=[]},n.oe=function(){this.a.forEach(function(e){var t=e.Ub,n=e.ka.expiration;isNaN(n)&&(n=1/0),n!=t&&(this.s.onExpirationUpdated(e.ka.sessionId,n),e.Ub=n)}.bind(this))};var Nt=1,Pt=5,Lt=.5;function Ot(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Ft(e,t,n){return n=void 0===n?0:n,!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t+n>=e.start(0)}function Bt(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,r=e.length-1;0<=r&&e.end(r)>t;--r)n+=e.end(r)-Math.max(e.start(r),t);return n}function kt(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Ut(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Jt,this.position=null,this.positionAlign=Ht,this.size=100,this.textAlign=jt,this.writingDirection=Gt,this.lineInterpretation=Yt,this.line=null,this.lineHeight="",this.lineAlign=zt,this.displayAlign=Vt,this.fontSize=this.backgroundColor=this.color="",this.fontWeight=Xt,this.fontStyle=$t,this.fontFamily="",this.textDecoration=[],this.wrapLine=!0,this.id=""}P("shaka.text.Cue",Ut);var Ht="auto";Ut.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Ht};var jt="center",Kt={LEFT:"left",RIGHT:"right",CENTER:jt,START:"start",END:"end"};Ut.textAlign=Kt;var Vt="before",qt={BEFORE:Vt,CENTER:"center",AFTER:"after"};Ut.displayAlign=qt;var Gt=0;Ut.writingDirection={HORIZONTAL_LEFT_TO_RIGHT:Gt,HORIZONTAL_RIGHT_TO_LEFT:1,VERTICAL_LEFT_TO_RIGHT:2,VERTICAL_RIGHT_TO_LEFT:3};var Yt=0;Ut.lineInterpretation={LINE_NUMBER:Yt,PERCENTAGE:1};var zt="center",Wt={CENTER:zt,START:"start",END:"end"};Ut.lineAlign=Wt;var Xt=400;Ut.fontWeight={NORMAL:Xt,BOLD:700};var $t="normal",Qt={NORMAL:$t,ITALIC:"italic",OBLIQUE:"oblique"};function Jt(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Zt,this.scroll=en}Ut.fontStyle=Qt,Ut.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},P("shaka.text.CueRegion",Jt);var Zt=1;Jt.units={PX:0,PERCENTAGE:Zt,LINES:2};var en="";function tn(){this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.b=null,this.g=[],this.c=[],this.f=!1,this.a.on("data",this.i.bind(this)),this.a.on("done",this.h.bind(this))}function nn(t,n){return!(!e.muxjs||"mp2t"!=t.split(";")[0].split("/")[1])&&(n?MediaSource.isTypeSupported(rn(n,t)):MediaSource.isTypeSupported(rn("audio",t))||MediaSource.isTypeSupported(rn("video",t)))}function rn(e,t){var n=t.replace("mp2t","mp4");"audio"==e&&(n=n.replace("video","audio"));var r=/avc1\.(66|77|100)\.(\d+)/.exec(n);if(r){var i="avc1.",o=r[1],a=Number(r[2]);i=("66"==o?i+"4200":"77"==o?i+"4d00":i+"6400")+(a>>4).toString(16),i+=(15&a).toString(16),n=n.replace(r[0],i)}return n}function on(e,t){e.f=!0,e.b=new ne,e.g=[],e.c=[];var n=new Uint8Array(t);return e.a.push(n),e.a.flush(),e.f&&e.b.reject(new ae(2,3,3018)),e.b}function an(e){this.f=null,this.c=e,this.h=this.i=0,this.g=1/0,this.b=this.a=null}Jt.scrollMode={NONE:en,UP:"up"},tn.prototype.destroy=function(){return this.a.dispose(),this.a=null,Promise.resolve()},tn.prototype.i=function(e){for(var t=0;t<e.captions.length;t++){var n=e.captions[t];this.c.push(new Ut(n.startTime,n.endTime,n.text))}t=new Uint8Array(e.data.byteLength+e.initSegment.byteLength),t.set(e.initSegment,0),t.set(e.data,e.initSegment.byteLength),this.g.push(t)},tn.prototype.h=function(){var e={data:dt.apply(null,this.g),cues:this.c};this.b.resolve(e),this.f=!1};var sn={};function un(e,t,n,r){return Promise.resolve().then(function(){if(this.f&&this.c)if(null==n||null==r)this.f.parseInit(new Uint8Array(t));else{var e={periodStart:this.i,segmentStart:n,segmentEnd:r};e=this.f.parseMedia(new Uint8Array(t),e).filter(function(e){return e.startTime>=this.h&&e.startTime<this.g}.bind(this)),this.c.append(e),null==this.a&&(this.a=Math.max(n,this.h)),this.b=Math.min(r,this.g)}}.bind(e))}function ln(t){this.f=t,this.o=null,this.b={},this.a=null,this.c={},this.h=new Pe,this.m=!1,this.i={},this.l=!1,t=this.j=new ne;var n=new MediaSource;Oe(this.h,n,"sourceopen",t.resolve),this.f.src=e.URL.createObjectURL(n),this.g=n}function dn(){var e={};return'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").forEach(function(t){e[t]=!!sn[t]||MediaSource.isTypeSupported(t)||nn(t);var n=t.split(";")[0];e[n]=e[n]||e[t]}),e}function cn(e,t){e.a||(e.a=new an(e.o)),e.a.f=new sn[t]}function fn(e,t){if("text"==t)var n=e.a.a;else n=mn(e,t),n=!n||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function hn(e,t){return"text"==t?e.a.b:Ot(mn(e,t))}function pn(e,t,n){return"text"==t?(e=e.a,null==e.b||e.b<n?0:e.b-Math.max(n,e.a)):(e=mn(e,t),Bt(e,n))}function mn(e,t){try{return e.b[t].buffered}catch(n){return null}}function gn(e,t,n,r,i){return"text"==t?un(e.a,n,r,i):e.i[t]?on(e.i[t],n).then(function(e){return this.a||cn(this,"text/vtt"),this.l&&this.a.lc(e.cues),_n(this,t,this.Vc.bind(this,t,e.data.buffer))}.bind(e)):_n(e,t,e.Vc.bind(e,t,n))}function yn(e,t){return"text"==t?e.a?e.a.remove(0,1/0):Promise.resolve():_n(e,t,e.Wc.bind(e,t,0,e.g.duration))}function vn(e,t,n,r,i){return"text"==t?(e.a.i=n,e=e.a,e.h=r,e.g=i,Promise.resolve()):Promise.all([_n(e,t,e.cd.bind(e,t)),_n(e,t,e.He.bind(e,t,n)),_n(e,t,e.Ee.bind(e,t,r,i))])}function _n(e,t,n){if(e.m)return Promise.reject();if(n={start:n,p:new ne},e.c[t].push(n),1==e.c[t].length)try{n.start()}catch(r){"QuotaExceededError"==r.name?n.p.reject(new ae(2,3,3017,t)):n.p.reject(new ae(2,3,3015,r)),bn(e,t)}return n.p}function En(e,t){if(e.m)return Promise.reject();var n,r=[];for(n in e.b){var i=new ne,o={start:function(e){e.resolve()}.bind(null,i),p:i};e.c[n].push(o),r.push(i),1==e.c[n].length&&o.start()}return Promise.all(r).then(function(){try{t()}catch(r){var e=Promise.reject(new ae(2,3,3015,r))}for(var n in this.b)bn(this,n);return e}.bind(e),function(){return Promise.reject()}.bind(e))}function bn(e,t){e.c[t].shift();var n=e.c[t][0];if(n)try{n.start()}catch(r){n.p.reject(new ae(2,3,3015,r)),bn(e,t)}}function Tn(e,t,n){return n==t||e>=Sn&&n==t.split("-")[0]||e>=In&&n.split("-")[0]==t.split("-")[0]}P("shaka.text.TextEngine.registerParser",function(e,t){sn[e]=t}),P("shaka.text.TextEngine.unregisterParser",function(e){delete sn[e]}),an.prototype.destroy=function(){return this.c=this.f=null,Promise.resolve()},an.prototype.Fe=function(e){this.c=e},an.prototype.setDisplayer=an.prototype.Fe,an.prototype.Lb=function(e){var t={periodStart:0,segmentStart:null,segmentEnd:0};try{return this.f.parseMedia(new Uint8Array(e),t)[0].startTime}catch(n){throw new ae(2,2,2009,n)}},an.prototype.remove=function(e,t){return Promise.resolve().then(function(){!this.c||!this.c.remove(e,t)||null==this.a||t<=this.a||e>=this.b||(e<=this.a&&t>=this.b?this.a=this.b=null:e<=this.a&&t<this.b?this.a=t:e>this.a&&t>=this.b&&(this.b=e))}.bind(this))},an.prototype.lc=function(e){this.c.append(e)},an.prototype.appendCues=an.prototype.lc,n=ln.prototype,n.destroy=function(){this.m=!0;var e,t=[];for(e in this.c){var n=this.c[e],r=n[0];for(this.c[e]=n.slice(0,1),r&&t.push(r.p["catch"](je)),r=1;r<n.length;++r)n[r].p["catch"](je),n[r].p.reject()}for(var i in this.a&&t.push(this.a.destroy()),this.i)t.push(this.i[i].destroy());return Promise.all(t).then(function(){var e=this.h?this.h.destroy():null;return this.f&&(this.f.removeAttribute("src"),this.f.load()),this.o=this.a=this.g=this.f=this.h=null,this.b={},this.i={},this.c={},e}.bind(this))},n.init=function(e,t){var n=this;return this.j.then(function(){for(var r in e){var i=e[r];i=We(i.mimeType,i.codecs),"text"==r?cn(n,i):(!t&&MediaSource.isTypeSupported(i)||!nn(i,r)||(n.i[r]=new tn,i=rn(r,i)),i=n.g.addSourceBuffer(i),Le(n.h,i,"error",n.Re.bind(n,r)),Le(n.h,i,"updateend",n.Oa.bind(n,r)),n.b[r]=i,n.c[r]=[])}})},n.Hb=function(){var e=this.a&&null!=this.a.a?[{start:this.a.a,end:this.a.b}]:[];return{total:kt(this.f.buffered),audio:kt(mn(this,"audio")),video:kt(mn(this,"video")),text:e}},n.remove=function(e,t,n){return"text"==e?this.a.remove(t,n):_n(this,e,this.Wc.bind(this,e,t,n))},n.flush=function(e){return"text"==e?Promise.resolve():_n(this,e,this.nd.bind(this,e))},n.endOfStream=function(e){return En(this,function(){e?this.g.endOfStream(e):this.g.endOfStream()}.bind(this))},n.la=function(e){return En(this,function(){this.g.duration=e}.bind(this))},n.U=function(){return this.g.duration},n.Vc=function(e,t){this.b[e].appendBuffer(t)},n.Wc=function(e,t,n){n<=t?this.Oa(e):this.b[e].remove(t,n)},n.cd=function(e){var t=this.b[e].appendWindowStart,n=this.b[e].appendWindowEnd;this.b[e].abort(),this.b[e].appendWindowStart=t,this.b[e].appendWindowEnd=n,this.Oa(e)},n.nd=function(e){this.f.currentTime-=.001,this.Oa(e)},n.He=function(e,t){0>t&&(t+=.001),this.b[e].timestampOffset=t,this.Oa(e)},n.Ee=function(e,t,n){this.b[e].appendWindowStart=0,this.b[e].appendWindowEnd=n,this.b[e].appendWindowStart=t,this.Oa(e)},n.Re=function(e){this.c[e][0].p.reject(new ae(2,3,3014,this.f.error?this.f.error.code:0))},n.Oa=function(e){var t=this.c[e][0];t&&(t.p.resolve(),bn(this,e))};var Sn=1,In=2;function wn(e){e=e.toLowerCase().split("-");var t=xn[e[0]];return t&&(e[0]=t),e.join("-")}var xn={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function An(e,t,n){var r=e.video;return!(r&&(r.width<t.minWidth||r.width>t.maxWidth||r.width>n.width||r.height<t.minHeight||r.height>t.maxHeight||r.height>n.height||r.width*r.height<t.minPixels||r.width*r.height>t.maxPixels)||e.bandwidth<t.minBandwidth||e.bandwidth>t.maxBandwidth)}function Dn(e,t,n){var r=!1;return e.variants.forEach(function(e){var i=e.allowedByApplication;e.allowedByApplication=An(e,t,n),i!=e.allowedByApplication&&(r=!0)}),r}function Rn(e,t,n,r){r.variants=r.variants.filter(function(r){return!(e&&e.G&&!Rt(e,r))&&(Mn(r.audio,e,t)&&Mn(r.video,e,n))}),r.textStreams=r.textStreams.filter(function(e){return!!sn[We(e.mimeType,e.codecs)]})}function Mn(e,t,n){if(!e)return!0;var r=null;t&&t.G&&(r=t.v),t=We(e.mimeType,e.codecs);var i=We(e.mimeType,e.codecs),o=Xe(e);return!(!(sn[i]||MediaSource.isTypeSupported(o)||nn(i,e.type))||r&&e.encrypted&&0>r.indexOf(t)||n&&(e.mimeType!=n.mimeType||e.codecs.split(".")[0]!=n.codecs.split(".")[0]))}function Cn(e){var t=e.audio,n=e.video,r=t?t.codecs:null,i=n?n.codecs:null,o=[];i&&o.push(i),r&&o.push(r);var a=[];n&&a.push(n.mimeType),t&&a.push(t.mimeType),a=a[0]||null;var s=[];t&&s.push(t.kind),n&&s.push(n.kind),s=s[0]||null;var u=[];return t&&u.push.apply(u,t.roles),n&&u.push.apply(u,n.roles),u=me(u),e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:s,width:null,height:null,frameRate:null,mimeType:a,codecs:o.join(", "),audioCodec:r,videoCodec:i,primary:e.primary,roles:u,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null},n&&(e.videoId=n.id,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.channelsCount=t.channelsCount,e.audioBandwidth=t.bandwidth||null,e.label=t.label),e}function Nn(e){return{id:e.id,active:!1,type:"text",bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null}}function Pn(e){var t=[],n=kn(e.variants);return e=e.textStreams,n.forEach(function(e){t.push(Cn(e))}),e.forEach(function(e){t.push(Nn(e))}),t}function Ln(e,t,n){return kn(e.variants).map(function(e){var r=Cn(e);return e.video&&e.audio?r.active=n==e.video.id&&t==e.audio.id:e.video?r.active=n==e.video.id:e.audio&&(r.active=t==e.audio.id),r})}function On(e,t){return e.textStreams.map(function(e){var n=Nn(e);return n.active=t==e.id,n})}function Fn(e,t){for(var n=0;n<e.variants.length;n++)if(e.variants[n].id==t.id)return e.variants[n];return null}function Bn(e){return e.allowedByApplication&&e.allowedByKeySystem}function kn(e){return e.filter(function(e){return Bn(e)})}function Un(e,t,n,r,i){return e=Hn(e,t,n,i),jn(e,r)}function Hn(e,t,n,r){var i=kn(e),o=i;e=i.filter(function(e){return e.primary}),e.length&&(o=e);var a=o.length?o[0].language:"";if(o=o.filter(function(e){return e.language==a}),t){var s=wn(t);[In,Sn,0].forEach(function(e){var t=!1;i.forEach(function(n){s=wn(s);var i=wn(n.language);Tn(e,s,i)&&(t?o.push(n):(o=[n],t=!0),r&&(r.audio=!0))})})}return n&&(t=Vn(o,n),t.length)?t:(t=o.map(function(e){return(e.audio?e.audio.roles:[]).concat(e.video?e.video.roles:[])}).reduce(He,[]),t.length?Vn(o,t[0]):o)}function jn(e,t){var n=e.filter(function(e){return e.audio&&e.audio.channelsCount}).reduce(function(e,t){var n=t.audio.channelsCount;return e[n]?e[n].push(t):e[n]=[t],e},{}),r=Object.keys(n);if(0==r.length)return e;var i=r.filter(function(e){return e<=t});return i.length?n[Math.max.apply(null,i)]:n[Math.min.apply(null,r)]}function Kn(e,t,n,r){var i=e,o=e.filter(function(e){return e.primary});o.length&&(i=o);var a=i.length?i[0].language:"";if(i=i.filter(function(e){return e.language==a}),t){var s=wn(t);[In,Sn,0].forEach(function(t){var n=!1;e.forEach(function(e){var o=wn(e.language);Tn(t,s,o)&&(n?i.push(e):(i=[e],n=!0),r&&(r.text=!0))})})}if(n){if(t=qn(i,n),t.length)return t}else if(t=i.filter(function(e){return 0==e.roles.length}),t.length)return t;return t=i.map(function(e){return e.roles}).reduce(He,[]),t.length?qn(i,t[0]):i}function Vn(e,t){return e.filter(function(e){return e.audio&&0<=e.audio.roles.indexOf(t)||e.video&&0<=e.video.roles.indexOf(t)})}function qn(e,t){return e.filter(function(e){return 0<=e.roles.indexOf(t)})}function Gn(e,t,n){for(var r=0;r<n.length;r++)if(n[r].audio==e&&n[r].video==t)return n[r];return null}function Yn(e,t,n){function r(e,t){return null==e?null==t:t.id==e}for(var i=0;i<n.length;i++)if(r(e,n[i].audio)&&r(t,n[i].video))return n[i];return null}function zn(e,t){for(var n=e.periods.length-1;0<n;--n)if(t+Ye>=e.periods[n].startTime)return n;return 0}function Wn(e,t){for(var n=0;n<e.periods.length;++n){var r=e.periods[n];if("text"==t.type){for(var i=0;i<r.textStreams.length;++i)if(r.textStreams[i]==t)return n}else for(i=0;i<r.variants.length;++i){var o=r.variants[i];if(o.audio==t||o.video==t||o.video&&o.video.trickModeVideo==t)return n}}return-1}function Xn(){this.h=null,this.f=!1,this.b=new k,this.c=[],this.i=!1,this.a=this.g=null}function $n(e,t){return e&&(t=t.filter(function(t){return An(t,e,{width:1/0,height:1/0})})),t.sort(function(e,t){return e.bandwidth-t.bandwidth})}P("shaka.abr.SimpleAbrManager",Xn),Xn.prototype.stop=function(){this.h=null,this.f=!1,this.c=[],this.g=null},Xn.prototype.stop=Xn.prototype.stop,Xn.prototype.init=function(e){this.h=e},Xn.prototype.init=Xn.prototype.init,Xn.prototype.chooseVariant=function(){var e=$n(this.a.restrictions,this.c),t=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);this.c.length&&!e.length&&(e=$n(null,this.c),e=[e[0]]);for(var n=e[0]||null,r=0;r<e.length;++r){var i=e[r],o=(e[r+1]||{bandwidth:1/0}).bandwidth/this.a.bandwidthUpgradeTarget;t>=i.bandwidth/this.a.bandwidthDowngradeTarget&&t<=o&&(n=i)}return this.g=Date.now(),n},Xn.prototype.chooseVariant=Xn.prototype.chooseVariant,Xn.prototype.enable=function(){this.f=!0},Xn.prototype.enable=Xn.prototype.enable,Xn.prototype.disable=function(){this.f=!1},Xn.prototype.disable=Xn.prototype.disable,Xn.prototype.segmentDownloaded=function(e,t){var n=this.b;if(!(16e3>t)){var r=8e3*t/e,i=e/1e3;n.a+=t,F(n.b,i,r),F(n.c,i,r)}if(null!=this.g&&this.f)e:{if(this.i){if(Date.now()-this.g<1e3*this.a.switchInterval)break e}else{if(!(128e3<=this.b.a))break e;this.i=!0}n=this.chooseVariant(),this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate),this.h(n)}},Xn.prototype.segmentDownloaded=Xn.prototype.segmentDownloaded,Xn.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate)},Xn.prototype.getBandwidthEstimate=Xn.prototype.getBandwidthEstimate,Xn.prototype.setVariants=function(e){this.c=e},Xn.prototype.setVariants=Xn.prototype.setVariants,Xn.prototype.configure=function(e){this.a=e},Xn.prototype.configure=Xn.prototype.configure;var Qn="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Jn="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Zn=["loop","playbackRate"],er=["pause","play"],tr="adaptation buffering emsg error loading streaming texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged unloading".split(" "),nr={getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getManifestUri:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,usingEmbeddedTextTrack:2,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1},rr={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},ir=[["getConfiguration","configure"]],or=[["isTextTrackVisible","setTextTrackVisibility"]],ar="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectEmbeddedTextTrack selectTextLanguage selectTextTrack selectVariantTrack setTextTrackVisibility trickPlay".split(" "),sr=["attach","detach","load","unload"];function ur(e){return JSON.stringify(e,function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof ke){var n,r={};for(n in t){var i=t[n];i&&"object"==typeof i?"detail"==n&&(r[n]=i):n in Event||(r[n]=i)}return r}if(t instanceof TimeRanges)for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=0;n<t.length;++n)r.start.push(t.start(n)),r.end.push(t.end(n));else r=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return r}})}function lr(e){return JSON.parse(e,function(e,t){return"NaN"==t?NaN:"-Infinity"==t?-1/0:"Infinity"==t?1/0:t&&"object"==typeof t&&"TimeRanges"==t.__type__?dr(t):t&&"object"==typeof t&&"Uint8Array"==t.__type__?new Uint8Array(t.entries):t})}function dr(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}function cr(e,t,n,r,i,o){this.K=e,this.g=t,this.M=n,this.j=!1,this.A=r,this.G=i,this.s=o,this.b=this.h=!1,this.v="",this.i=null,this.l=this.Cc.bind(this),this.m=this.Qd.bind(this),this.a={video:{},player:{}},this.o=0,this.c={},this.f=null}var fr=!1,hr=null;function pr(e){var t=hr;t.removeUpdateListener(e.l),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.m)}function mr(e){for(var t in e.c){var n=e.c[t];delete e.c[t],n.reject(new ae(1,7,7e3))}}function gr(e){e=ur(e),hr.sendMessage("urn:x-cast:com.google.shaka.v2",e,function(){},H)}function yr(){this.Cb=new Ne,this.jb=this}function vr(e,t,n){yr.call(this),this.c=e,this.b=t,this.i=this.g=this.f=this.j=this.h=null,this.a=new cr(n,this.Me.bind(this),this.Ne.bind(this),this.Oe.bind(this),this.Pe.bind(this),this.tc.bind(this)),_r(this)}function _r(e){for(var t in e.a.init(),e.i=new Pe,Qn.forEach(function(e){Le(this.i,this.c,e,this.af.bind(this))}.bind(e)),tr.forEach(function(e){Le(this.i,this.b,e,this.me.bind(this))}.bind(e)),e.h={},e.c)Object.defineProperty(e.h,t,{configurable:!1,enumerable:!0,get:e.$e.bind(e,t),set:e.bf.bind(e,t)});for(var n in e.j={},e.b)Object.defineProperty(e.j,n,{configurable:!1,enumerable:!0,get:e.le.bind(e,n)});e.f=new yr,e.f.jb=e.h,e.g=new yr,e.g.jb=e.j}function Er(e,t,n,r){yr.call(this),this.a=e,this.b=t,this.c=new Pe,this.s={video:e,player:t},this.v=n||function(){},this.A=r||function(e){return e},this.o=!1,this.h=!0,this.g=0,this.m=!1,this.j=!0,this.l=this.i=this.f=null,br(this)}function br(t){var n=cast.receiver.CastReceiverManager.getInstance();n.onSenderConnected=t.Hc.bind(t),n.onSenderDisconnected=t.Hc.bind(t),n.onSystemVolumeChanged=t.md.bind(t),t.i=n.getCastMessageBus("urn:x-cast:com.google.cast.media"),t.i.onMessage=t.Ld.bind(t),t.f=n.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),t.f.onMessage=t.$d.bind(t),n.start(),Qn.forEach(function(e){Le(this.c,this.a,e,this.Kc.bind(this,"video"))}.bind(t)),tr.forEach(function(e){Le(this.c,this.b,e,this.Kc.bind(this,"player"))}.bind(t)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?t.b.cc(3840,2160):t.b.cc(1920,1080),Le(t.c,t.a,"loadeddata",function(){this.m=!0}.bind(t)),Le(t.c,t.b,"loading",function(){this.h=!1,Tr(this)}.bind(t)),Le(t.c,t.a,"playing",function(){this.h=!1,Tr(this)}.bind(t)),Le(t.c,t.a,"pause",function(){Tr(this)}.bind(t)),Le(t.c,t.b,"unloading",function(){this.h=!0,Tr(this)}.bind(t)),Le(t.c,t.a,"ended",function(){e.setTimeout(function(){this.a&&this.a.ended&&(this.h=!0,Tr(this))}.bind(this),5e3)}.bind(t))}function Tr(e){Promise.resolve().then(function(){this.b&&(this.dispatchEvent(new ke("caststatuschanged")),Ir(this)||Ar(this,0))}.bind(e))}function Sr(e,t,n){for(var r in t.player)e.b[r](t.player[r]);e.v(n),n=Promise.resolve();var i=e.a.autoplay;t.manifest&&(e.a.autoplay=!1,n=e.b.load(t.manifest,t.startTime)),n.then(function(){if(e.b){for(var n in t.video)e.a[n]=t.video[n];for(var r in t.playerAfterLoad)e.b[r](t.playerAfterLoad[r]);e.a.autoplay=i,t.manifest&&(e.a.play(),Ar(e,0))}},function(t){e.b.dispatchEvent(new ke("error",{detail:t}))})}function Ir(e){return!(!e.j||!e.a.duration&&!e.b.R())&&(wr(e),e.j=!1,!0)}function wr(e){var t={contentId:e.b.Jb(),streamType:e.b.R()?"LIVE":"BUFFERED",duration:e.a.duration,contentType:""};Ar(e,0,t)}function xr(e,t,n,r){e.o&&(e=ur(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function Ar(e,t,n){var r=e.a.playbackRate,i=Dr;i=e.h?i.IDLE:e.b.xc()?i.Yc:e.a.paused?i.$c:i.ad,r={mediaSessionId:0,playbackRate:r,playerState:i,currentTime:e.a.currentTime,supportedMediaCommands:15,volume:{level:e.a.volume,muted:e.a.muted}},n&&(r.media=n),xr(e,{requestId:t,type:"MEDIA_STATUS",status:[r]},e.i)}n=cr.prototype,n.destroy=function(){return mr(this),hr&&pr(this),this.G=this.A=this.g=null,this.b=this.h=!1,this.m=this.l=this.f=this.c=this.a=this.i=null,Promise.resolve()},n.Z=function(){return this.b},n.Zb=function(){return this.v},n.init=function(){if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){delete e.__onGCastApiAvailable,this.h=!0,this.g();var t=new chrome.cast.SessionRequest(this.K);t=new chrome.cast.ApiConfig(t,this.Dc.bind(this),this.Xd.bind(this),"origin_scoped"),chrome.cast.initialize(t,function(){},function(){}),fr&&setTimeout(this.g.bind(this),20),(t=hr)&&t.status!=chrome.cast.SessionStatus.STOPPED?this.Dc(t):hr=null}else e.__onGCastApiAvailable=function(e){e&&this.init()}.bind(this)},n.bc=function(e){this.i=e,this.b&&gr({type:"appData",appData:this.i})},n.cast=function(e){return this.h?fr?this.b?Promise.reject(new ae(1,8,8002)):(this.f=new ne,chrome.cast.requestSession(this.Wb.bind(this,e),this.Bc.bind(this)),this.f):Promise.reject(new ae(1,8,8001)):Promise.reject(new ae(1,8,8e3))},n.ub=function(){this.b&&(mr(this),hr&&(pr(this),hr.stop(function(){},function(){}),hr=null))},n.get=function(e,t){if("video"==e){if(0<=er.indexOf(t))return this.Mc.bind(this,e,t)}else if("player"==e){if(rr[t]&&!this.get("player","isLive")())return function(){};if(0<=ar.indexOf(t))return this.Mc.bind(this,e,t);if(0<=sr.indexOf(t))return this.te.bind(this,e,t);if(nr[t])return this.Jc.bind(this,e,t)}return this.Jc(e,t)},n.set=function(e,t,n){this.a[e][t]=n,gr({type:"set",targetName:e,property:t,value:n})},n.Wb=function(e,t){hr=t,t.addUpdateListener(this.l),t.addMessageListener("urn:x-cast:com.google.shaka.v2",this.m),this.Cc(),gr({type:"init",initState:e,appData:this.i}),this.f.resolve()},n.Bc=function(e){var t=8003;switch(e.code){case"cancel":t=8004;break;case"timeout":t=8005;break;case"receiver_unavailable":t=8006}this.f.reject(new ae(2,8,t,e))},n.Jc=function(e,t){return this.a[e][t]},n.Mc=function(e,t){gr({type:"call",targetName:e,methodName:t,args:Array.prototype.slice.call(arguments,2)})},n.te=function(e,t){var n=Array.prototype.slice.call(arguments,2),r=new ne,i=this.o.toString();return this.o++,this.c[i]=r,gr({type:"asyncCall",targetName:e,methodName:t,args:n,id:i}),r},n.Dc=function(e){var t=this.s();this.f=new ne,this.j=!0,this.Wb(t,e)},n.Xd=function(e){fr="available"==e,this.g()},n.Cc=function(){var e=!!hr&&"connected"==hr.status;if(this.b&&!e){for(var t in this.G(),this.a)this.a[t]={};mr(this)}this.v=(this.b=e)?hr.receiver.friendlyName:"",this.g()},n.Qd=function(e,t){var n=lr(t);switch(n.type){case"event":var r=n.event;this.A(n.targetName,new ke(r.type,r));break;case"update":for(var i in r=n.update,r)for(var o in n=this.a[i]||{},r[i])n[o]=r[i][o];this.j&&(this.M(),this.j=!1);break;case"asyncComplete":if(i=n.id,n=n.error,o=this.c[i],delete this.c[i],o)if(n){for(r in i=new ae(n.severity,n.category,n.code),n)i[r]=n[r];o.reject(i)}else o.resolve()}},yr.prototype.addEventListener=function(e,t){this.Cb.push(e,t)},yr.prototype.removeEventListener=function(e,t){this.Cb.remove(e,t)},yr.prototype.dispatchEvent=function(e){for(var t=this.Cb.get(e.type)||[],n=0;n<t.length;++n){e.target=this.jb,e.currentTarget=this.jb;var r=t[n];try{r.handleEvent?r.handleEvent(e):r.call(this,e)}catch(i){}if(e.a)break}return e.defaultPrevented},L(vr,yr),P("shaka.cast.CastProxy",vr),vr.prototype.destroy=function(e){return e&&this.a&&this.a.ub(),e=[this.i?this.i.destroy():null,this.b?this.b.destroy():null,this.a?this.a.destroy():null],this.a=this.i=this.j=this.h=this.b=this.c=null,Promise.all(e)},vr.prototype.destroy=vr.prototype.destroy,vr.prototype.Cd=function(){return this.h},vr.prototype.getVideo=vr.prototype.Cd,vr.prototype.ud=function(){return this.j},vr.prototype.getPlayer=vr.prototype.ud,vr.prototype.fd=function(){return!!this.a&&(this.a.h&&fr)},vr.prototype.canCast=vr.prototype.fd,vr.prototype.Z=function(){return!!this.a&&this.a.Z()},vr.prototype.isCasting=vr.prototype.Z,vr.prototype.Zb=function(){return this.a?this.a.Zb():""},vr.prototype.receiverName=vr.prototype.Zb,vr.prototype.cast=function(){var e=this.tc();return this.a.cast(e).then(function(){if(this.b)return this.b.hb()}.bind(this))},vr.prototype.cast=vr.prototype.cast,vr.prototype.bc=function(e){this.a.bc(e)},vr.prototype.setAppData=vr.prototype.bc,vr.prototype.Te=function(){var e=this.a;if(e.b){var t=e.s();chrome.cast.requestSession(e.Wb.bind(e,t),e.Bc.bind(e))}},vr.prototype.suggestDisconnect=vr.prototype.Te,vr.prototype.ub=function(){this.a.ub()},vr.prototype.forceDisconnect=vr.prototype.ub,n=vr.prototype,n.tc=function(){var e={video:{},player:{},playerAfterLoad:{},manifest:this.b.Jb(),startTime:null};return this.c.pause(),Zn.forEach(function(t){e.video[t]=this.c[t]}.bind(this)),this.c.ended||(e.startTime=this.c.currentTime),ir.forEach(function(t){var n=t[1];t=this.b[t[0]](),e.player[n]=t}.bind(this)),or.forEach(function(t){var n=t[1];t=this.b[t[0]](),e.playerAfterLoad[n]=t}.bind(this)),e},n.Me=function(){this.dispatchEvent(new ke("caststatuschanged"))},n.Ne=function(){this.f.dispatchEvent(new ke(this.h.paused?"pause":"play"))},n.Pe=function(){var e=this;ir.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(this));var t=this.a.get("player","getManifestUri")(),n=this.a.get("video","ended"),r=Promise.resolve(),i=this.c.autoplay,o=null;n||(o=this.a.get("video","currentTime")),t&&(this.c.autoplay=!1,r=this.b.load(t,o));var a={};Zn.forEach(function(e){a[e]=this.a.get("video",e)}.bind(this)),r.then(function(){e.c&&(Zn.forEach(function(e){this.c[e]=a[e]}.bind(e)),or.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(e)),e.c.autoplay=i,t&&e.c.play())},function(t){e.b.dispatchEvent(new ke("error",{detail:t}))})},n.$e=function(e){if("addEventListener"==e)return this.f.addEventListener.bind(this.f);if("removeEventListener"==e)return this.f.removeEventListener.bind(this.f);if(this.a.Z()&&0==Object.keys(this.a.a.video).length){var t=this.c[e];if("function"!=typeof t)return t}return this.a.Z()?this.a.get("video",e):(e=this.c[e],"function"==typeof e&&(e=e.bind(this.c)),e)},n.bf=function(e,t){this.a.Z()?this.a.set("video",e,t):this.c[e]=t},n.af=function(e){this.a.Z()||this.f.dispatchEvent(new ke(e.type,e))},n.le=function(e){if("addEventListener"==e)return this.g.addEventListener.bind(this.g);if("removeEventListener"==e)return this.g.removeEventListener.bind(this.g);if("getMediaElement"==e)return function(){return this.h}.bind(this);if("getNetworkingEngine"==e)return this.b.uc.bind(this.b);if(this.a.Z()){if("getManifest"==e||"drmInfo"==e)return function(){return U(e+"() does not work while casting!"),null};if("attach"==e||"detach"==e)return function(){return U(e+"() does not work while casting!"),Promise.resolve()}}return this.a.Z()&&0==Object.keys(this.a.a.video).length&&nr[e]||!this.a.Z()?this.b[e].bind(this.b):this.a.get("player",e)},n.me=function(e){this.a.Z()||this.g.dispatchEvent(e)},n.Oe=function(e,t){this.a.Z()&&("video"==e?this.f.dispatchEvent(t):"player"==e&&this.g.dispatchEvent(t))},L(Er,yr),P("shaka.cast.CastReceiver",Er),Er.prototype.isConnected=function(){return this.o},Er.prototype.isConnected=Er.prototype.isConnected,Er.prototype.Fd=function(){return this.h},Er.prototype.isIdle=Er.prototype.Fd,Er.prototype.destroy=function(){var t=[this.c?this.c.destroy():null,this.b?this.b.destroy():null];return null!=this.l&&e.clearTimeout(this.l),this.v=this.s=this.c=this.b=this.a=null,this.o=!1,this.h=!0,this.l=this.i=this.f=null,Promise.all(t).then(function(){cast.receiver.CastReceiverManager.getInstance().stop()})},Er.prototype.destroy=Er.prototype.destroy,n=Er.prototype,n.Hc=function(){this.g=0,this.j=!0,this.o=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Tr(this)},n.Kc=function(e,t){this.b&&(this.Xb(),xr(this,{type:"event",targetName:e,event:t},this.f))},n.Xb=function(){null!=this.l&&e.clearTimeout(this.l),this.l=e.setTimeout(this.Xb.bind(this),500);var t={video:{},player:{}};if(Jn.forEach(function(e){t.video[e]=this.a[e]}.bind(this)),this.b.R())for(var n in rr)0==this.g%rr[n]&&(t.player[n]=this.b[n]());for(var r in nr)0==this.g%nr[r]&&(t.player[r]=this.b[r]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),this.m&&(this.g+=1),xr(this,{type:"update",update:t},this.f),Ir(this)},n.md=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();e&&xr(this,{type:"update",update:{video:{volume:e.level,muted:e.muted}}},this.f),xr(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.f)},n.$d=function(e){var t=lr(e.data);switch(t.type){case"init":this.g=0,this.m=!1,this.j=!0,Sr(this,t.initState,t.appData),this.Xb();break;case"appData":this.v(t.appData);break;case"set":var n=t.targetName,r=t.property;if(t=t.value,"video"==n){var i=cast.receiver.CastReceiverManager.getInstance();if("volume"==r){i.setSystemVolumeLevel(t);break}if("muted"==r){i.setSystemVolumeMuted(t);break}}this.s[n][r]=t;break;case"call":n=this.s[t.targetName],n[t.methodName].apply(n,t.args);break;case"asyncCall":n=t.targetName,r=t.methodName,"player"==n&&"load"==r&&(this.g=0,this.m=!1),i=t.id,e=e.senderId;var o=this.s[n];t=o[r].apply(o,t.args),"player"==n&&"load"==r&&(t=t.then(function(){this.j=!0}.bind(this))),t.then(this.Qc.bind(this,e,i,null),this.Qc.bind(this,e,i))}},n.Ld=function(e){var t=lr(e.data);switch(t.type){case"PLAY":this.a.play(),Ar(this,0);break;case"PAUSE":this.a.pause(),Ar(this,0);break;case"SEEK":e=t.currentTime;var n=t.resumeState;null!=e&&(this.a.currentTime=Number(e)),n&&"PLAYBACK_START"==n?(this.a.play(),Ar(this,0)):n&&"PLAYBACK_PAUSE"==n&&(this.a.pause(),Ar(this,0));break;case"STOP":this.b.hb().then(function(){this.b&&Ar(this,0)}.bind(this));break;case"GET_STATUS":Ar(this,Number(t.requestId));break;case"VOLUME":n=t.volume,e=n.level,n=n.muted;var r=this.a.volume,i=this.a.muted;null!=e&&(this.a.volume=Number(e)),null!=n&&(this.a.muted=n),r==this.a.volume&&i==this.a.muted||Ar(this,0);break;case"LOAD":this.g=0,this.j=this.m=!1,e=t.currentTime,n=this.A(t.media.contentId),this.a.autoplay=!0,this.b.load(n,e).then(function(){this.b&&wr(this)}.bind(this))["catch"](function(e){var n="LOAD_FAILED";7==e.category&&7e3==e.code&&(n="LOAD_CANCELLED"),xr(this,{requestId:Number(t.requestId),type:n},this.i)}.bind(this));break;default:xr(this,{requestId:Number(t.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.i)}},n.Qc=function(e,t,n){this.b&&xr(this,{type:"asyncComplete",id:t,error:n},this.f,e)};var Dr={IDLE:"IDLE",ad:"PLAYING",Yc:"BUFFERING",$c:"PAUSED"};function Rr(e,t){var n=Mr(e,t);return 1!=n.length?null:n[0]}function Mr(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return e instanceof Element&&e.tagName==t})}function Cr(e){return Array.prototype.filter.call(e.childNodes,function(e){return e instanceof Element&&"pssh"==e.localName&&"urn:mpeg:cenc:2013"==e.namespaceURI})}function Nr(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function Pr(e){return Array.prototype.every.call(e.childNodes,function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE})?e.textContent.trim():null}function Lr(e,t,n,r){var i=null;return e=e.getAttribute(t),null!=e&&(i=n(e)),null==i?void 0!=r?r:null:i}function Or(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null}function Fr(e){return e?(e=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e),e?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null):null}function Br(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function kr(e){return e=Number(e),0===e%1?e:null}function Ur(e){return e=Number(e),0===e%1&&0<e?e:null}function Hr(e){return e=Number(e),0===e%1&&0<=e?e:null}function jr(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1]/t[2]):Number(e),isNaN(e)?null:e}var Kr={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};function Vr(e,t,n){e=Yr(e);var r=null,i=[],o=[],a=e.map(function(e){return e.keyId}).filter(Ke);if(a.length&&1<a.filter(Ve).length)throw new ae(2,4,4010);n||(o=e.filter(function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.Pc||(r=e.init||r,!1)}),o.length&&(i=Gr(r,t,o),0==i.length&&(i=[Ge("",r)]))),!e.length||!n&&o.length||(i=ze.values(Kr).filter(function(e){return"org.w3.clearkey"!=e}).map(function(e){return Ge(e,r)}));var s=a[0]||null;return s&&i.forEach(function(e){e.initData.forEach(function(e){e.keyId=s})}),{nc:s,hf:r,drmInfos:i,sc:!0}}function qr(e,t,n,r){var i=Vr(e,t,r);if(n.sc)e=1==n.drmInfos.length&&!n.drmInfos[0].keySystem,t=0==i.drmInfos.length,(0==n.drmInfos.length||e&&!t)&&(n.drmInfos=i.drmInfos),n.sc=!1;else if(0<i.drmInfos.length&&(n.drmInfos=n.drmInfos.filter(function(e){return i.drmInfos.some(function(t){return t.keySystem==e.keySystem})}),0==n.drmInfos.length))throw new ae(2,4,4008);return i.nc||n.nc}function Gr(e,t,n){return n.map(function(n){var r=Kr[n.Pc];return r?[Ge(r,n.init||e)]:t(n.node)||[]}).reduce(He,[])}function Yr(e){return e.map(function(e){var t=e.getAttribute("schemeIdUri"),n=Nr(e,"urn:mpeg:cenc:2013","default_KID"),r=Cr(e).map(Pr);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),0<=n.indexOf(" ")))throw new ae(2,4,4009);var i=[];try{i=r.map(function(e){return{initDataType:"cenc",initData:at(e),keyId:null}})}catch(o){throw new ae(2,4,4007)}return{node:e,Pc:t,keyId:n,init:0<i.length?i:null}}).filter(Ke)}function zr(t,n,r,i,o){var a={RepresentationID:n,Number:r,Bandwidth:i,Time:o};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(t,n,r,i){if("$$"==t)return"$";var o=a[n];if(null==o)return t;switch("RepresentationID"==n&&r&&(r=void 0),"Time"==n&&(o=Math.round(o)),i){case void 0:case"d":case"i":case"u":t=o.toString();break;case"o":t=o.toString(8);break;case"x":t=o.toString(16);break;case"X":t=o.toString(16).toUpperCase();break;default:t=o.toString()}return r=e.parseInt(r,10)||1,Array(Math.max(0,r-t.length)+1).join("0")+t})}function Wr(e,t){var n=Xr(e,t,"timescale"),r=1;n&&(r=Ur(n)||1),n=Xr(e,t,"duration"),(n=Ur(n||""))&&(n/=r);var i=Xr(e,t,"startNumber"),o=Number(Xr(e,t,"presentationTimeOffset"))||0,a=Hr(i||"");null!=i&&null!=a||(a=1);var s=$r(e,t,"SegmentTimeline");if(i=null,s){i=r;var u=e.L.duration||1/0;s=Mr(s,"S");for(var l=[],d=0,c=0;c<s.length;++c){var f=s[c],h=Lr(f,"t",Hr),p=Lr(f,"d",Hr);if(f=Lr(f,"r",kr),null!=h&&(h-=o),!p)break;if(h=null!=h?h:d,f=f||0,0>f)if(c+1<s.length){if(f=Lr(s[c+1],"t",Hr),null==f)break;if(h>=f)break;f=Math.ceil((f-h)/p)-1}else{if(1/0==u)break;if(h/i>=u)break;f=Math.ceil((u*i-h)/p)-1}0<l.length&&h!=d&&(l[l.length-1].end=h/i);for(var m=0;m<=f;++m)d=h+p,l.push({start:h/i,end:d/i,Xe:h}),h=d}i=l}return{timescale:r,S:n,Ea:a,ca:o/r||0,ic:o,H:i}}function Xr(e,t,n){return[t(e.w),t(e.W),t(e.aa)].filter(Ke).map(function(e){return e.getAttribute(n)}).reduce(function(e,t){return e||t})}function $r(e,t,n){return[t(e.w),t(e.W),t(e.aa)].filter(Ke).map(function(e){return Rr(e,n)}).reduce(function(e,t){return e||t})}function Qr(e,t){var n=new DOMParser;try{var r=Qe(e),i=n.parseFromString(r,"text/xml")}catch(a){}if(i&&i.documentElement.tagName==t)var o=i.documentElement;return o&&0<o.getElementsByTagName("parsererror").length?null:o}function Jr(e,t,n,r,i,o){for(var a=Nr(e,"http://www.w3.org/1999/xlink","href"),s=Nr(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=0;u<e.attributes.length;u++){var l=e.attributes[u];"http://www.w3.org/1999/xlink"==l.namespaceURI&&(e.removeAttributeNS(l.namespaceURI,l.localName),--u)}if(5<=o)return ue(new ae(2,4,4028));if("onLoad"!=s)return ue(new ae(2,4,4027));var d=qe([r],[a]);return i.request(0,Ae(d,t)).X(function(r){if(r=Qr(r.data,e.tagName),!r)return ue(new ae(2,4,4001,a));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;r.childNodes.length;){var s=r.childNodes[0];r.removeChild(s),e.appendChild(s)}for(s=0;s<r.attributes.length;s++){var u=r.attributes[s].nodeName,l=r.getAttribute(u);e.setAttribute(u,l)}return Zr(e,t,n,d[0],i,o+1)})}function Zr(e,t,n,r,i,o){if(o=o||0,Nr(e,"http://www.w3.org/1999/xlink","href")){var a=Jr(e,t,n,r,i,o);return n&&(a=a.X(void 0,function(){return Zr(e,t,n,r,i,o)})),a}a=[];for(var s=0;s<e.childNodes.length;s++){var u=e.childNodes[s];u instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Nr(u,"http://www.w3.org/1999/xlink","href")?(e.removeChild(u),--s):"SegmentTimeline"!=u.tagName&&a.push(Zr(u,t,n,r,i,o)))}return fe(a).X(function(){return e})}function ei(e,t,n){this.c=e,this.b=t,this.a=n}function ti(e,t,n,r,i,o){this.position=e,this.startTime=t,this.endTime=n,this.c=r,this.b=i,this.a=o}function ni(e,t){this.D=e,this.b=t==ii,this.a=0}P("shaka.media.InitSegmentReference",ei),ei.prototype.Eb=function(){return this.c()},ei.prototype.createUris=ei.prototype.Eb,ei.prototype.Kb=function(){return this.b},ei.prototype.getStartByte=ei.prototype.Kb,ei.prototype.Ib=function(){return this.a},ei.prototype.getEndByte=ei.prototype.Ib,P("shaka.media.SegmentReference",ti),ti.prototype.V=function(){return this.position},ti.prototype.getPosition=ti.prototype.V,ti.prototype.Lb=function(){return this.startTime},ti.prototype.getStartTime=ti.prototype.Lb,ti.prototype.qd=function(){return this.endTime},ti.prototype.getEndTime=ti.prototype.qd,ti.prototype.Eb=function(){return this.c()},ti.prototype.createUris=ti.prototype.Eb,ti.prototype.Kb=function(){return this.b},ti.prototype.getStartByte=ti.prototype.Kb,ti.prototype.Ib=function(){return this.a},ti.prototype.getEndByte=ti.prototype.Ib,P("shaka.util.DataViewReader",ni);var ri,ii=1;function oi(){throw new ae(2,3,3e3)}function ai(){this.c=[],this.b=[],this.a=!1}function si(e){for(;e.reader.ia()&&!e.parser.a;)e.parser.xb(e.start,e.reader,e.partialOkay)}function ui(e){for(var t=e.reader.B();0<t&&!e.parser.a;--t)e.parser.xb(e.start,e.reader,e.partialOkay)}function li(e){return function(t){e(t.reader.Da(t.reader.D.byteLength-t.reader.V()))}}function di(e){for(var t=0,n=0;n<e.length;n++)t=t<<8|e.charCodeAt(n);return t}function ci(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function fi(e,t,n,r){var i,o=(new ai).Y("sidx",function(e){i=hi(t,r,n,e)});if(e&&o.parse(e),i)return i;throw new ae(2,3,3004)}function hi(e,t,n,r){var i=[];r.reader.F(4);var o=r.reader.B();if(0==o)throw new ae(2,3,3005);if(0==r.version)var a=r.reader.B(),s=r.reader.B();else a=r.reader.Ra(),s=r.reader.Ra();r.reader.F(2);var u=r.reader.bb();for(e=e+r.size+s,s=0;s<u;s++){var l=r.reader.B(),d=(2147483648&l)>>>31;l&=2147483647;var c=r.reader.B();if(r.reader.F(4),1==d)throw new ae(2,3,3006);i.push(new ti(i.length,a/o-t,(a+c)/o-t,function(){return n},e,e+l-1)),a+=c,e+=l}return r.parser.stop(),i}function pi(e){this.a=e}function mi(e,t){for(;e.a.length;){if(!(e.a[e.a.length-1].startTime>=t))break;e.a.pop()}for(;e.a.length;){if(!(0>=e.a[0].endTime))break;e.a.shift()}if(0!=e.a.length){var n=e.a[e.a.length-1];e.a[e.a.length-1]=new ti(n.position,n.startTime,t,n.c,n.b,n.a)}}function gi(e){this.b=e,this.a=new ni(e,0),ri||(ri=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function yi(e){var t=vi(e);if(7<t.length)throw new ae(2,3,3002);for(var n=0,r=0;r<t.length;r++)n=256*n+t[r];t=n,n=vi(e);e:{for(r=0;r<ri.length;r++)if(lt(n,ri[r])){r=!0;break e}r=!1}if(r)n=e.b.byteLength-e.a.V();else{if(8==n.length&&224&n[1])throw new ae(2,3,3001);r=n[0]&(1<<8-n.length)-1;for(var i=1;i<n.length;i++)r=256*r+n[i];n=r}return n=e.a.V()+n<=e.b.byteLength?n:e.b.byteLength-e.a.V(),r=new DataView(e.b.buffer,e.b.byteOffset+e.a.V(),n),e.a.F(n),new _i(t,r)}function vi(e){var t,n=e.a.ba();for(t=1;8>=t&&!(n&1<<8-t);t++);if(8<t)throw new ae(2,3,3002);var r=new Uint8Array(t);for(r[0]=n,n=1;n<t;n++)r[n]=e.a.ba();return r}function _i(e,t){this.id=e,this.a=t}function Ei(e){if(8<e.a.byteLength)throw new ae(2,3,3002);if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new ae(2,3,3001);for(var t=0,n=0;n<e.a.byteLength;n++){var r=e.a.getUint8(n);t=256*t+r}return t}function bi(){}function Ti(e,t,n,r,i,o){function a(){return i}var s=[];e=new gi(e.a);for(var u=null,l=null;e.ia();){var d=yi(e);if(187==d.id){var c=Si(d);c&&(d=n*c.Ye,c=t+c.se,null!=u&&s.push(new ti(s.length,u-o,d-o,a,l,c-1)),u=d,l=c)}}return null!=u&&s.push(new ti(s.length,u-o,r-o,a,l,null)),s}function Si(e){var t=new gi(e.a);if(e=yi(t),179!=e.id)throw new ae(2,3,3013);if(e=Ei(e),t=yi(t),183!=t.id)throw new ae(2,3,3012);t=new gi(t.a);for(var n=0;t.ia();){var r=yi(t);if(241==r.id){n=Ei(r);break}}return{Ye:e,se:n}}function Ii(e,t){var n=$r(e,t,"Initialization");if(!n)return null;var r=e.w.da,i=n.getAttribute("sourceURL");i&&(r=qe(e.w.da,[i])),i=0;var o=null;return(n=Lr(n,"range",Br))&&(i=n.start,o=n.end),new ei(function(){return r},i,o)}function wi(e,t){var n=Number(Xr(e,Ai,"presentationTimeOffset"))||0,r=Xr(e,Ai,"timescale"),i=1;r&&(i=Ur(r)||1),n=n/i||0,r=Ii(e,Ai);var o=e.w.contentType;if(i=e.w.mimeType.split("/")[1],"text"!=o&&"mp4"!=i&&"webm"!=i)throw new ae(2,4,4006);if("webm"==i&&!r)throw new ae(2,4,4005);o=$r(e,Ai,"RepresentationIndex");var a=Xr(e,Ai,"indexRange"),s=e.w.da;if(a=Br(a||""),o){var u=o.getAttribute("sourceURL");u&&(s=qe(e.w.da,[u])),a=Lr(o,"range",Br,a)}if(!a)throw new ae(2,4,4002);return i=xi(e,t,r,s,a.start,a.end,i,n),{createSegmentIndex:i.createSegmentIndex,findSegmentPosition:i.findSegmentPosition,getSegmentReference:i.getSegmentReference,initSegmentReference:r,ca:n}}function xi(e,t,n,r,i,o,a,s){var u=e.presentationTimeline,l=!e.Ia||!e.L.Mb,d=e.L.index,c=e.L.duration,f=t,h=null;return{createSegmentIndex:function(){var e=[f(r,i,o),"webm"==a?f(n.c(),n.b,n.a):null];return f=null,Promise.all(e).then(function(e){var t=e[0];e=e[1]||null,t="mp4"==a?fi(t,i,r,s):(new bi).parse(t,e,r,s),u.Na(t,0==d),h=new pi(t),l&&mi(h,c)})},findSegmentPosition:function(e){return h.find(e)},getSegmentReference:function(e){return h.get(e)}}}function Ai(e){return e.cb}function Di(e,t){var n=Ii(e,Ri),r=Ci(e),i=Wr(e,Ri),o=i.Ea;0==o&&(o=1);var a=0;if(i.S?a=i.S*(o-1):i.H&&0<i.H.length&&(a=i.H[0].start),r={S:i.S,startTime:a,Ea:o,ca:i.ca,H:i.H,Ma:r},!r.S&&!r.H&&1<r.Ma.length)throw new ae(2,4,4002);if(!r.S&&!e.L.duration&&!r.H&&1==r.Ma.length)throw new ae(2,4,4002);if(r.H&&0==r.H.length)throw new ae(2,4,4002);return o=i=null,e.aa.id&&e.w.id&&(o=e.aa.id+","+e.w.id,i=t[o]),a=Mi(e.L.duration,r.Ea,e.w.da,r),i?(i.Qb(a),o=e.presentationTimeline.Xa(),i.Gb(o-e.L.start)):(e.presentationTimeline.Na(a,0==e.L.index),i=new pi(a),o&&e.Ia&&(t[o]=i)),e.Ia&&e.L.Mb||mi(i,e.L.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:i.find.bind(i),getSegmentReference:i.get.bind(i),initSegmentReference:n,ca:r.ca}}function Ri(e){return e.ua}function Mi(e,t,n,r){var i=r.Ma.length;r.H&&r.H.length!=r.Ma.length&&(i=Math.min(r.H.length,r.Ma.length));for(var o=[],a=r.startTime,s=0;s<i;s++){var u=r.Ma[s],l=qe(n,[u.Hd]),d=void 0;d=null!=r.S?a+r.S:r.H?r.H[s].end:a+e,o.push(new ti(s+t,a,d,function(e){return e}.bind(null,l),u.start,u.end)),a=d}return o}function Ci(e){return[e.w.ua,e.W.ua,e.aa.ua].filter(Ke).map(function(e){return Mr(e,"SegmentURL")}).reduce(function(e,t){return 0<e.length?e:t}).map(function(t){t.getAttribute("indexRange")&&!e.wc&&(e.wc=!0);var n=t.getAttribute("media");return t=Lr(t,"mediaRange",Br,{start:0,end:null}),{Hd:n,start:t.start,end:t.end}})}function Ni(e,t,n,r){var i=Fi(e),o=Wr(e,Pi),a=Xr(e,Pi,"media"),s=Xr(e,Pi,"index");if(o={S:o.S,timescale:o.timescale,Ea:o.Ea,ca:o.ca,ic:o.ic,H:o.H,Pb:a,Za:s},a=o.Za?1:0,a+=o.H?1:0,a+=o.S?1:0,0==a)throw new ae(2,4,4002);if(1!=a&&(o.Za&&(o.H=null),o.S=null),!o.Za&&!o.Pb)throw new ae(2,4,4002);if(o.Za){if(n=e.w.mimeType.split("/")[1],"mp4"!=n&&"webm"!=n)throw new ae(2,4,4006);if("webm"==n&&!i)throw new ae(2,4,4005);r=zr(o.Za,e.w.id,null,e.bandwidth||null,null),r=qe(e.w.da,[r]),e=xi(e,t,i,r,0,null,n,o.ca)}else o.S?(r||e.presentationTimeline.Sb(o.S),e=Li(e,o)):(a=t=null,e.aa.id&&e.w.id&&(a=e.aa.id+","+e.w.id,t=n[a]),s=Oi(e,o),r=!e.Ia||!e.L.Mb,t?(r&&mi(new pi(s),e.L.duration),t.Qb(s),n=e.presentationTimeline.Xa(),t.Gb(n-e.L.start)):(e.presentationTimeline.Na(s,0==e.L.index),t=new pi(s),a&&e.Ia&&(n[a]=t)),r&&mi(t,e.L.duration),e={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:t.find.bind(t),getSegmentReference:t.get.bind(t)});return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,initSegmentReference:i,ca:o.ca}}function Pi(e){return e.fb}function Li(e,t){var n=e.L.duration,r=t.S,i=t.Ea,o=t.timescale,a=t.Pb,s=e.bandwidth||null,u=e.w.id,l=e.w.da;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0>e||n&&e>=n?null:Math.floor(e/r)},getSegmentReference:function(e){var t=e*r,d=t+r;return n&&(d=Math.min(d,n)),0>d||n&&t>=n?null:new ti(e,t,d,function(){var n=zr(a,u,e+i,s,t*o);return qe(l,[n])},0,null)}}}function Oi(e,t){for(var n=[],r=0;r<t.H.length;r++){var i=r+t.Ea;n.push(new ti(i,t.H[r].start,t.H[r].end,function(e,t,n,r,i,o){return e=zr(e,t,i,n,o),qe(r,[e]).map(function(e){return e.toString()})}.bind(null,t.Pb,e.w.id,e.bandwidth||null,e.w.da,i,t.H[r].Xe+t.ic),0,null))}return n}function Fi(e){var t=Xr(e,Pi,"initialization");if(!t)return null;var n=e.w.id,r=e.bandwidth||null,i=e.w.da;return new ei(function(){var e=zr(t,n,null,r,null);return qe(i,[e])},0,null)}ni.Endianness={cf:0,df:ii},ni.prototype.ia=function(){return this.a<this.D.byteLength},ni.prototype.hasMoreData=ni.prototype.ia,ni.prototype.V=function(){return this.a},ni.prototype.getPosition=ni.prototype.V,ni.prototype.rd=function(){return this.D.byteLength},ni.prototype.getLength=ni.prototype.rd,ni.prototype.ba=function(){try{var e=this.D.getUint8(this.a);return this.a+=1,e}catch(t){oi()}},ni.prototype.readUint8=ni.prototype.ba,ni.prototype.bb=function(){try{var e=this.D.getUint16(this.a,this.b);return this.a+=2,e}catch(t){oi()}},ni.prototype.readUint16=ni.prototype.bb,ni.prototype.B=function(){try{var e=this.D.getUint32(this.a,this.b);return this.a+=4,e}catch(t){oi()}},ni.prototype.readUint32=ni.prototype.B,ni.prototype.Lc=function(){try{var e=this.D.getInt32(this.a,this.b);return this.a+=4,e}catch(t){oi()}},ni.prototype.readInt32=ni.prototype.Lc,ni.prototype.Ra=function(){try{if(this.b)var e=this.D.getUint32(this.a,!0),t=this.D.getUint32(this.a+4,!0);else t=this.D.getUint32(this.a,!1),e=this.D.getUint32(this.a+4,!1)}catch(n){oi()}if(2097151<t)throw new ae(2,3,3001);return this.a+=8,t*Math.pow(2,32)+e},ni.prototype.readUint64=ni.prototype.Ra,ni.prototype.Da=function(e){this.a+e>this.D.byteLength&&oi();var t=new Uint8Array(this.D.buffer,this.D.byteOffset+this.a,e);return this.a+=e,new Uint8Array(t)},ni.prototype.readBytes=ni.prototype.Da,ni.prototype.F=function(e){this.a+e>this.D.byteLength&&oi(),this.a+=e},ni.prototype.skip=ni.prototype.F,ni.prototype.Oc=function(e){this.a<e&&oi(),this.a-=e},ni.prototype.rewind=ni.prototype.Oc,ni.prototype.seek=function(e){(0>e||e>this.D.byteLength)&&oi(),this.a=e},ni.prototype.seek=ni.prototype.seek,ni.prototype.Yb=function(){for(var e=this.a;this.ia()&&0!=this.D.getUint8(this.a);)this.a+=1;return e=new Uint8Array(this.D.buffer,this.D.byteOffset+e,this.a-e),this.a+=1,Qe(e)},ni.prototype.readTerminatedString=ni.prototype.Yb,P("shaka.util.Mp4Parser",ai),ai.prototype.C=function(e,t){var n=di(e);return this.c[n]=0,this.b[n]=t,this},ai.prototype.box=ai.prototype.C,ai.prototype.Y=function(e,t){var n=di(e);return this.c[n]=1,this.b[n]=t,this},ai.prototype.fullBox=ai.prototype.Y,ai.prototype.stop=function(){this.a=!0},ai.prototype.stop=ai.prototype.stop,ai.prototype.parse=function(e,t){var n=new Uint8Array(e);for(n=new ni(new DataView(n.buffer,n.byteOffset,n.byteLength),0),this.a=!1;n.ia()&&!this.a;)this.xb(0,n,t)},ai.prototype.parse=ai.prototype.parse,ai.prototype.xb=function(e,t,n){var r=t.V(),i=t.B(),o=t.B();switch(i){case 0:i=t.D.byteLength-r;break;case 1:i=t.Ra()}var a=this.b[o];if(a){var s=null,u=null;1==this.c[o]&&(u=t.B(),s=u>>>24,u&=16777215),o=r+i,n&&o>t.D.byteLength&&(o=t.D.byteLength),o-=t.V(),t=0<o?t.Da(o):new Uint8Array(0),t=new ni(new DataView(t.buffer,t.byteOffset,t.byteLength),0),a({parser:this,partialOkay:n||!1,version:s,flags:u,reader:t,size:i,start:r+e})}else t.F(Math.min(r+i-t.V(),t.D.byteLength-t.V()))},ai.prototype.parseNext=ai.prototype.xb,ai.children=si,ai.sampleDescription=ui,ai.allData=li,ai.typeToString=ci,P("shaka.media.SegmentIndex",pi),pi.prototype.destroy=function(){return this.a=null,Promise.resolve()},pi.prototype.destroy=pi.prototype.destroy,pi.prototype.find=function(e){for(var t=this.a.length-1;0<=t;--t){var n=this.a[t];if(e>=n.startTime&&e<n.endTime)return n.position}return this.a.length&&e<this.a[0].startTime?this.a[0].position:null},pi.prototype.find=pi.prototype.find,pi.prototype.get=function(e){return 0==this.a.length?null:(e-=this.a[0].position,0>e||e>=this.a.length?null:this.a[e])},pi.prototype.get=pi.prototype.get,pi.prototype.offset=function(e){for(var t=0;t<this.a.length;++t)this.a[t].startTime+=e,this.a[t].endTime+=e},pi.prototype.offset=pi.prototype.offset,pi.prototype.Qb=function(e){for(var t=[],n=0,r=0;n<this.a.length&&r<e.length;){var i=this.a[n],o=e[r];i.startTime<o.startTime?(t.push(i),n++):(i.startTime>o.startTime?0==n&&t.push(o):(.1<Math.abs(i.endTime-o.endTime)?t.push(new ti(i.position,o.startTime,o.endTime,o.c,o.b,o.a)):t.push(i),n++),r++)}for(;n<this.a.length;)t.push(this.a[n++]);if(t.length)for(n=t[t.length-1].position+1;r<e.length;)i=e[r++],i=new ti(n++,i.startTime,i.endTime,i.c,i.b,i.a),t.push(i);else t=e;this.a=t},pi.prototype.merge=pi.prototype.Qb,pi.prototype.Gb=function(e){for(var t=0;t<this.a.length;++t)if(this.a[t].endTime>e)return void this.a.splice(0,t);this.a=[]},pi.prototype.evict=pi.prototype.Gb,gi.prototype.ia=function(){return this.a.ia()},bi.prototype.parse=function(e,t,n,r){var i;if(t=new gi(new DataView(t)),440786851!=yi(t).id)throw new ae(2,3,3008);var o=yi(t);if(408125543!=o.id)throw new ae(2,3,3009);for(t=o.a.byteOffset,o=new gi(o.a),i=null;o.ia();){var a=yi(o);if(357149030==a.id){i=a;break}}if(!i)throw new ae(2,3,3010);for(o=new gi(i.a),i=1e6,a=null;o.ia();){var s=yi(o);if(2807729==s.id)i=Ei(s);else if(17545==s.id)if(a=s,4==a.a.byteLength)a=a.a.getFloat32(0);else{if(8!=a.a.byteLength)throw new ae(2,3,3003);a=a.a.getFloat64(0)}}if(null==a)throw new ae(2,3,3011);if(o=i/1e9,i=a*o,e=yi(new gi(new DataView(e))),475249515!=e.id)throw new ae(2,3,3007);return Ti(e,t,o,i,n,r)};var Bi={},ki={};function Ui(){var e,t={};for(e in Bi)t[e]=!0;for(var n in ki)t[n]=!0;return["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"].forEach(function(e){t[e]=!!Bi[e]}),["mpd","m3u8","ism"].forEach(function(e){t[e]=!!ki[e]}),t}function Hi(e,t,n,r){var i=r;return i||(r=new K(e).$.split("/").pop().split("."),1<r.length&&(r=r.pop().toLowerCase(),i=ki[r])),i?Promise.resolve(i):(n=Ae([e],n),n.method="HEAD",t.request(0,n).promise.then(function(t){return(t=t.headers["content-type"])&&(t=t.toLowerCase()),(i=Bi[t])?i:Promise.reject(new ae(2,4,4e3,e))},function(e){return e.severity=2,Promise.reject(e)}))}function ji(e,t){this.g=e,this.l=t,this.f=this.b=1/0,this.a=1,this.j=this.c=0,this.i=!0,this.h=0}function Ki(){this.a=this.b=null,this.h=[],this.c=null,this.j=[],this.i=1,this.l={},this.m=0,this.o=new O(5),this.g=null,this.f=new Te}function Vi(e){var t=Date.now(),n=e.a.networkingEngine.request(0,Ae(e.h,e.b.retryParameters));return Se(e.f,n),n.promise.then(function(t){if(e.a)return qi(e,t.data,t.uri)}).then(function(){var n=(Date.now()-t)/1e3;return F(e.o,1,n),n})}function qi(e,t,n){if(t=Qr(t,"MPD"),!t)throw new ae(2,4,4001,n);return t=Zr(t,e.b.retryParameters,e.b.dash.xlinkFailGracefully,n,e.a.networkingEngine),Se(e.f,t),t.promise.then(function(t){return Gi(e,t,n)})}function Gi(e,t,n){n=[n];var r=Mr(t,"Location").map(Pr).filter(Ke);0<r.length&&(n=qe(n,r),e.h=n),r=Mr(t,"BaseURL").map(Pr),n=qe(n,r);var i=Lr(t,"minBufferTime",Fr);e.m=Lr(t,"minimumUpdatePeriod",Fr,-1);var o=Lr(t,"availabilityStartTime",Or);r=Lr(t,"timeShiftBufferDepth",Fr);var a=Lr(t,"suggestedPresentationDelay",Fr),s=Lr(t,"maxSegmentDuration",Fr),u=t.getAttribute("type")||"static";if(e.c)var l=e.c.presentationTimeline;else{var d=Math.max(e.b.dash.defaultPresentationDelay,1.5*i);l=new ji(o,null!=a?a:d)}o=Yi(e,{Ia:"static"!=u,presentationTimeline:l,aa:null,L:null,W:null,w:null,bandwidth:0,wc:!1},n,t),a=o.duration;var c=o.periods;return l.yb("static"==u),"static"!=u&&o.oc||l.la(a||1/0),(u=l.R())&&!isNaN(e.b.availabilityWindowOverride)&&(r=e.b.availabilityWindowOverride),null==r&&(r=1/0),l.dc(r),l.Sb(s||1),e.c?Promise.resolve():(t=Mr(t,"UTCTiming"),to(e,n,t,u).then(function(e){this.a&&(l.Rc(e),this.c={presentationTimeline:l,periods:c,offlineSessionIds:[],minBufferTime:i||0})}.bind(e)))}function Yi(e,t,n,r){var i=Lr(r,"mediaPresentationDuration",Fr),o=[],a=0;r=Mr(r,"Period");for(var s=0;s<r.length;s++){var u=r[s];a=Lr(u,"start",Fr,a);var l=Lr(u,"duration",Fr),d=null;if(s!=r.length-1){var c=Lr(r[s+1],"start",Fr);null!=c&&(d=c-a)}else null!=i&&(d=i-a);if(null==d&&(d=l),u=zi(e,t,n,{start:a,duration:d,node:u,index:s,Mb:null==d||s==r.length-1}),o.push(u),l=t.aa.id,-1==e.j.indexOf(l)&&(e.j.push(l),e.c&&(e.a.filterNewPeriod(u),e.c.periods.push(u))),null==d){a=null;break}a+=d}return null==e.c&&e.a.filterAllPeriods(o),null!=i?{periods:o,duration:i,oc:!1}:{periods:o,duration:a,oc:!0}}function zi(e,t,n,r){t.aa=Qi(r.node,null,n),t.L=r,t.aa.id||(t.aa.id="__shaka_period_"+r.start),Mr(r.node,"EventStream").forEach(e.je.bind(e,r.start,r.duration)),n=Mr(r.node,"AdaptationSet").map(e.he.bind(e,t)).filter(Ke);var i=n.map(function(e){return e.ue}).reduce(He,[]),o=i.filter(Ve);if(t.Ia&&i.length!=o.length)throw new ae(2,4,4018);var a=n.filter(function(e){return!e.hc});if(n.filter(function(e){return e.hc}).forEach(function(e){var t=e.streams[0],n=e.hc;a.forEach(function(e){e.id==n&&e.streams.forEach(function(e){e.trickModeVideo=t})})}),n=Wi(a,"video"),i=Wi(a,"audio"),!n.length&&!i.length)throw new ae(2,4,4004);for(i.length||(i=[null]),n.length||(n=[null]),t=[],o=0;o<i.length;o++)for(var s=0;s<n.length;s++)Xi(e,i[o],n[s],t);for(e=Wi(a,"text"),n=[],i=0;i<e.length;i++)n.push.apply(n,e[i].streams);return{startTime:r.start,textStreams:n,variants:t}}function Wi(e,t){return e.filter(function(e){return e.contentType==t})}function Xi(e,t,n,r){if(t||n)if(t&&n){var i=t.drmInfos,o=n.drmInfos;if(!i.length||!o.length||0<Mt(i,o).length){o=Mt(t.drmInfos,n.drmInfos);for(var a=0;a<t.streams.length;a++)for(var s=0;s<n.streams.length;s++)i=(n.streams[s].bandwidth||0)+(t.streams[a].bandwidth||0),i={id:e.i++,language:t.language,primary:t.Ob||n.Ob,audio:t.streams[a],video:n.streams[s],bandwidth:i,drmInfos:o,allowedByApplication:!0,allowedByKeySystem:!0},r.push(i)}}else for(o=t||n,a=0;a<o.streams.length;a++)i=o.streams[a].bandwidth||0,i={id:e.i++,language:o.language||"und",primary:o.Ob,audio:t?o.streams[a]:null,video:n?o.streams[a]:null,bandwidth:i,drmInfos:o.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},r.push(i)}function $i(t,n){0>t.m||(t.g=e.setTimeout(t.Qe.bind(t),1e3*Math.max(3,t.m-n,B(t.o))))}function Qi(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",containsEmsgBoxes:!1,frameRate:void 0,Tb:null},n=n||t.da;var r=Mr(e,"BaseURL").map(Pr),i=e.getAttribute("contentType")||t.contentType,o=e.getAttribute("mimeType")||t.mimeType,a=e.getAttribute("codecs")||t.codecs,s=Lr(e,"frameRate",jr)||t.frameRate,u=!!Mr(e,"InbandEventStream").length,l=Mr(e,"AudioChannelConfiguration");return l=Ji(l)||t.Tb,i||(i=no(o,a)),{da:qe(n,r),cb:Rr(e,"SegmentBase")||t.cb,ua:Rr(e,"SegmentList")||t.ua,fb:Rr(e,"SegmentTemplate")||t.fb,width:Lr(e,"width",Hr)||t.width,height:Lr(e,"height",Hr)||t.height,contentType:i,mimeType:o,codecs:a,frameRate:s,containsEmsgBoxes:u||t.containsEmsgBoxes,id:e.getAttribute("id"),Tb:l}}function Ji(e){for(var t=0;t<e.length;++t){var n=e[t],r=n.getAttribute("schemeIdUri");if(r&&(n=n.getAttribute("value")))switch(r){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(r=parseInt(n,10),!r)continue;return r;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(r=parseInt(n,16)){for(e=0;r;)1&r&&++e,r>>=1;return e}}}return null}function Zi(e){var t=e.cb?1:0;return t+=e.ua?1:0,t+=e.fb?1:0,0==t?"text"==e.contentType||"application"==e.contentType:(1!=t&&(e.cb&&(e.ua=null),e.fb=null),!0)}function eo(e,t,n,r){return t=qe(t,[n]),t=Ae(t,e.b.retryParameters),t.method=r,t=e.a.networkingEngine.request(0,t),Se(e.f,t),t.promise.then(function(e){if("HEAD"==r){if(!e.headers||!e.headers.date)return 0;e=e.headers.date}else e=Qe(e.data);return e=Date.parse(e),isNaN(e)?0:e-Date.now()})}function to(e,t,n,r){n=n.map(function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}});var i=e.b.dash.clockSyncUri;return r&&!n.length&&i&&n.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),Ue(n,function(e){var n=e.value;switch(e.scheme){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return eo(this,t,n,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return eo(this,t,n,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return e=Date.parse(n),isNaN(e)?0:e-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":return Promise.reject();default:return Promise.reject()}}.bind(e))["catch"](function(){return 0})}function no(e,t){return sn[We(e,t)]?"text":e.split("/")[0]}function ro(e,t,n,r){this.b=e,this.type=t,this.a=n,this.segments=r||null}function io(e,t,n,r){this.id=e,this.name=t,this.a=n,this.value=r||null}function oo(e,t){this.name=e,this.value=t}function ao(e,t,n){return n=n||null,(e=e.getAttribute(t))?e.value:n}function so(e,t){this.b=t,this.a=e}function uo(e,t){return e.filter(function(e){return e.name==t})}function lo(e,t){var n=uo(e,t);return n.length?n[0]:null}function co(e,t,n){return e.filter(function(e){var r=e.getAttribute("TYPE");return e=e.getAttribute("GROUP-ID"),r.value==t&&e.value==n})}function fo(e){this.b=e,this.a=0}function ho(e){po(e,/[ \t]+/gm)}function po(e,t){t.lastIndex=e.a;var n=t.exec(e.b);return n=null==n?null:{position:n.index,length:n[0].length,xe:n},e.a==e.b.length||null==n||n.position!=e.a?null:(e.a+=n.length,n.xe)}function mo(e){return e.a==e.b.length?null:(e=po(e,/[^ \t\n]*/gm))?e[0]:null}function go(){this.a=0}function yo(e,t,n){t=Qe(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var r=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(r[0]))throw new ae(2,4,4015);t=0;for(var i=1;i<r.length;i++)if(!/^#(?!EXT)/m.test(r[i])){var o=_o(e,r[i]);if(--e.a,0<=Eo.indexOf(o.name)){t=1;break}"EXT-X-STREAM-INF"==o.name&&(i+=1)}for(i=[],o=1;o<r.length;)if(/^#(?!EXT)/m.test(r[o]))o+=1;else{var a=_o(e,r[o]);if(bo.includes(a.name)){if(1!=t)throw new ae(2,4,4017);return r=r.splice(o,r.length-o),e=vo(e,n,r,i),new ro(n,t,i,e)}i.push(a),o+=1,"EXT-X-STREAM-INF"==a.name&&(a.a.push(new oo("URI",r[o])),o+=1)}return new ro(n,t,i)}function vo(e,t,n,r){var i=[],o=[];return n.forEach(function(n){if(/^(#EXT)/.test(n))n=_o(e,n),0<=Eo.indexOf(n.name)?r.push(n):o.push(n);else{if(/^#(?!EXT)/m.test(n))return[];n=qe([t],[n.trim()])[0],i.push(new so(n,o)),o=[]}}),i}function _o(e,t){e:{var n=e.a++,r=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!r)throw new ae(2,4,4016,t);var i=r[1],o=r[2];if(r=[],o&&0<=o.indexOf("=")){o=new fo(o);for(var a,s=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;a=po(o,s);)r.push(new oo(a[1],a[2]||a[3]))}else if(o){n=new io(n,i,r,o);break e}n=new io(n,i,r)}return n}P("shaka.media.ManifestParser.registerParserByExtension",function(e,t){ki[e]=t}),P("shaka.media.ManifestParser.registerParserByMime",function(e,t){Bi[e]=t}),P("shaka.media.PresentationTimeline",ji),ji.prototype.U=function(){return this.b},ji.prototype.getDuration=ji.prototype.U,ji.prototype.la=function(e){this.b=e},ji.prototype.setDuration=ji.prototype.la,ji.prototype.wd=function(){return this.g},ji.prototype.getPresentationStartTime=ji.prototype.wd,ji.prototype.Rc=function(e){this.j=e},ji.prototype.setClockOffset=ji.prototype.Rc,ji.prototype.yb=function(e){this.i=e},ji.prototype.setStatic=ji.prototype.yb,ji.prototype.dc=function(e){this.f=e},ji.prototype.setSegmentAvailabilityDuration=ji.prototype.dc,ji.prototype.Sc=function(e){this.l=e},ji.prototype.setDelay=ji.prototype.Sc,ji.prototype.Na=function(e,t){0!=e.length&&(t&&(this.c=Math.max(this.c,e[0].startTime)),this.a=e.reduce(function(e,t){return Math.max(e,t.endTime-t.startTime)},this.a))},ji.prototype.notifySegments=ji.prototype.Na,ji.prototype.Sb=function(e){this.a=Math.max(this.a,e)},ji.prototype.notifyMaxSegmentDuration=ji.prototype.Sb,ji.prototype.offset=function(e){this.c+=e},ji.prototype.offset=ji.prototype.offset,ji.prototype.R=function(){return 1/0==this.b&&!this.i},ji.prototype.isLive=ji.prototype.R,ji.prototype.Aa=function(){return 1/0!=this.b&&!this.i},ji.prototype.isInProgress=ji.prototype.Aa,ji.prototype.Xa=function(){if(1/0==this.f)return this.h;var e=this.Ka()-this.f;return Math.max(this.h,e)},ji.prototype.getSegmentAvailabilityStart=ji.prototype.Xa,ji.prototype.Tc=function(e){this.h=e},ji.prototype.setUserSeekStart=ji.prototype.Tc,ji.prototype.Ka=function(){return this.R()||this.Aa()?Math.min(Math.max(0,(Date.now()+this.j)/1e3-this.a-this.g),this.b):this.b},ji.prototype.getSegmentAvailabilityEnd=ji.prototype.Ka,ji.prototype.Wa=function(e){var t=Math.max(this.c,this.h);if(1/0==this.f)return t;var n=this.Ka()-this.f;return e=Math.min(n+e,this.na()),Math.max(t,e)},ji.prototype.getSafeSeekRangeStart=ji.prototype.Wa,ji.prototype.Ja=function(){return this.Wa(0)},ji.prototype.getSeekRangeStart=ji.prototype.Ja,ji.prototype.na=function(){var e=this.R()||this.Aa()?this.l:0;return Math.max(0,this.Ka()-e)},ji.prototype.getSeekRangeEnd=ji.prototype.na,P("shaka.dash.DashParser",Ki),n=Ki.prototype,n.configure=function(e){this.b=e},n.start=function(e,t){return this.h=[e],this.a=t,Vi(this).then(function(e){return this.a&&$i(this,e),this.c}.bind(this))},n.stop=function(){return this.b=this.a=null,this.h=[],this.c=null,this.j=[],this.l={},null!=this.g&&(e.clearTimeout(this.g),this.g=null),this.f.destroy()},n.update=function(){Vi(this)["catch"](function(e){this.a&&this.a.onError(e)}.bind(this))},n.onExpirationUpdated=function(){},n.he=function(e,t){e.W=Qi(t,e.aa,null);var n=!1,r=Mr(t,"Role"),i=r.map(function(e){return e.getAttribute("value")}).filter(Ke),o=void 0,a="text"==e.W.contentType;a&&(o="subtitle");for(var s=0;s<r.length;s++){var u=r[s].getAttribute("schemeIdUri");if(null==u||"urn:mpeg:dash:role:2011"==u)switch(u=r[s].getAttribute("value"),u){case"main":n=!0;break;case"caption":case"subtitle":o=u}}var l=null,d=!1;if(Mr(t,"EssentialProperty").forEach(function(e){"http://dashif.org/guidelines/trickmode"==e.getAttribute("schemeIdUri")?l=e.getAttribute("value"):d=!0}),d)return null;r=Mr(t,"ContentProtection");var c=Vr(r,this.b.dash.customScheme,this.b.dash.ignoreDrmInfo);if(r=wn(t.getAttribute("lang")||"und"),u=t.getAttribute("label"),s=Mr(t,"Representation"),i=s.map(this.ke.bind(this,e,c,o,r,u,n,i)).filter(function(e){return!!e}),0==i.length){if(a)return null;throw new ae(2,4,4003)}return e.W.contentType&&"application"!=e.W.contentType||(e.W.contentType=no(i[0].mimeType,i[0].codecs),i.forEach(function(t){t.type=e.W.contentType})),i.forEach(function(e){c.drmInfos.forEach(function(t){e.keyId&&t.keyIds.push(e.keyId)})}),a=s.map(function(e){return e.getAttribute("id")}).filter(Ke),{id:e.W.id||"__fake__"+this.i++,contentType:e.W.contentType,language:r,Ob:n,streams:i,drmInfos:c.drmInfos,hc:l,ue:a}},n.ke=function(e,t,n,r,i,o,a,s){if(e.w=Qi(s,e.W,null),!Zi(e.w))return null;e.bandwidth=Lr(s,"bandwidth",Ur)||0;var u=e.w.contentType;u="text"==u||"application"==u;try{var l=this.ve.bind(this);if(e.w.cb)var d=wi(e,l);else if(e.w.ua)d=Di(e,this.l);else if(e.w.fb)d=Ni(e,l,this.l,!!this.c);else{var c=e.w.da,f=e.L.duration||0;d={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0<=e&&e<f?1:null},getSegmentReference:function(e){return 1!=e?null:new ti(1,0,f,function(){return c},0,null)},initSegmentReference:null,ca:0}}}catch(h){if(u&&4002==h.code)return null;throw h}return s=Mr(s,"ContentProtection"),s=qr(s,this.b.dash.customScheme,t,this.b.dash.ignoreDrmInfo),{id:this.i++,createSegmentIndex:d.createSegmentIndex,findSegmentPosition:d.findSegmentPosition,getSegmentReference:d.getSegmentReference,initSegmentReference:d.initSegmentReference,presentationTimeOffset:d.ca,mimeType:e.w.mimeType,codecs:e.w.codecs,frameRate:e.w.frameRate,bandwidth:e.bandwidth,width:e.w.width,height:e.w.height,kind:n,encrypted:0<t.drmInfos.length,keyId:s,language:r,label:i,type:e.W.contentType,primary:o,trickModeVideo:null,containsEmsgBoxes:e.w.containsEmsgBoxes,roles:a,channelsCount:e.w.Tb}},n.Qe=function(){this.g=null,Vi(this).then(function(e){this.a&&$i(this,e)}.bind(this))["catch"](function(e){this.a&&(e.severity=1,this.a.onError(e),$i(this,0))}.bind(this))},n.je=function(e,t,n){var r=n.getAttribute("schemeIdUri")||"",i=n.getAttribute("value")||"",o=Lr(n,"timescale",Hr)||1;Mr(n,"Event").forEach(function(n){var a=Lr(n,"presentationTime",Hr)||0,s=Lr(n,"duration",Hr)||0;a=a/o+e,s=a+s/o,null!=t&&(a=Math.min(a,e+t),s=Math.min(s,e+t)),n={schemeIdUri:r,value:i,startTime:a,endTime:s,id:n.getAttribute("id")||"",eventElement:n},this.a.onTimelineRegionAdded(n)}.bind(this))},n.ve=function(e,t,n){return e=Ae(e,this.b.retryParameters),null!=t&&(e.headers.Range="bytes="+t+"-"+(null!=n?n:"")),t=this.a.networkingEngine.request(1,e),Se(this.f,t),t.promise.then(function(e){return e.data})},ki.mpd=Ki,Bi["application/dash+xml"]=Ki,io.prototype.toString=function(){function e(e){return e.name+'="'+e.value+'"'}return this.value?"#"+this.name+":"+this.value:0<this.a.length?"#"+this.name+":"+this.a.map(e).join(","):"#"+this.name},io.prototype.getAttribute=function(e){var t=this.a.filter(function(t){return t.name==e});return t.length?t[0]:null};var Eo="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),bo="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");function To(e){try{var t=To.parse(e);return de({uri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return ue(n)}}function So(){this.g=this.c=null,this.M=1,this.v=new Map,this.K=new Set,this.a=new Map,this.b=null,this.s="",this.o=new go,this.j=this.i=null,this.f=ea,this.m=null,this.l=0,this.A=1/0,this.h=new Te,this.G=[]}function Io(e,t){Wo(e,t.dd).then(function(e){var n=ta,r=yo(this.o,e.data,e.uri);if(1!=r.type)throw new ae(2,4,4017);e=lo(r.a,"EXT-X-MEDIA-SEQUENCE");var i=t.stream;Uo(this,t.zb,r,e?Number(e.value):0,i.mimeType,i.codecs).then(function(e){t.eb.a=e,e=e[e.length-1],lo(r.a,"EXT-X-ENDLIST")&&(Jo(this,n.sa),this.b.la(e.endTime))}.bind(this))}.bind(e))}function wo(e,t){var n=yo(e.o,t,e.s);if(0!=n.type)throw new ae(2,4,4022);return xo(e,n).then(function(e){this.c.filterAllPeriods([e]);for(var t=1/0,n=0,r=0,i=1/0,o=c(this.a.values()),a=o.next();!a.done;a=o.next())a=a.value,t=Math.min(t,a.Rb),n=Math.max(n,a.Rb),r=Math.max(r,a.Gd),"text"!=a.stream.type&&(i=Math.min(i,a.duration));if(a=null,o=0,this.f!=ta.sa&&(a=Date.now()/1e3-r,o=3*this.l),this.b=new ji(a,o),this.b.yb(this.f==ta.sa),ko(this),this.f!=ta.sa){for(t=3*this.l,this.b.Sc(t),this.i=this.A,this.f==ta.jc&&(isNaN(this.g.availabilityWindowOverride)||(t=this.g.availabilityWindowOverride),this.b.dc(t)),t=0;95443.7176888889<=n;)t+=95443.7176888889,n-=95443.7176888889;if(t)for(n=c(this.a.values()),a=n.next();!a.done;a=n.next())i=a.value,95443.7176888889>i.Rb&&(i.stream.presentationTimeOffset=-t,i.eb.offset(t))}else for(this.b.la(i),this.b.offset(-t),n=c(this.a.values()),a=n.next();!a.done;a=n.next())r=a.value,r.stream.presentationTimeOffset=t,r.eb.offset(-t),mi(r.eb,i);this.m={presentationTimeline:this.b,periods:[e],offlineSessionIds:[],minBufferTime:0}}.bind(e))}function xo(e,t){var n=t.a,r=uo(t.a,"EXT-X-MEDIA").filter(function(e){return"SUBTITLES"==Yo(e,"TYPE")}.bind(e)).map(function(e){return Co(this,e)}.bind(e));return Promise.all(r).then(function(e){var r=uo(n,"EXT-X-STREAM-INF").map(function(e){return Ao(this,e,t)}.bind(this));return Promise.all(r).then(function(t){return{startTime:0,variants:t.reduce(He,[]),textStreams:e}}.bind(this))}.bind(e))}function Ao(e,t,n){var r=ao(t,"CODECS","avc1.42E01E,mp4a.40.2").split(/\s*,\s*/),i=t.getAttribute("RESOLUTION"),o=null,a=null,s=ao(t,"FRAME-RATE"),u=Number(Yo(t,"BANDWIDTH"));if(i){var l=i.value.split("x");o=l[0],a=l[1]}n=uo(n.a,"EXT-X-MEDIA"),n=n.filter(function(e){return"CLOSED-CAPTIONS"!=Yo(e,"TYPE")}),n=n.filter(function(e){var t=ao(e,"URI")||"";return"SUBTITLES"==(ao(e,"TYPE")||"")||""!=t});var d=ao(t,"AUDIO"),c=ao(t,"VIDEO");if(d?n=co(n,"AUDIO",d):c&&(n=co(n,"VIDEO",c)),l=qo("text",r)){var f=ao(t,"SUBTITLES");f&&(f=co(n,"SUBTITLES",f),f.length&&(e.v.get(f[0].id).stream.codecs=l)),r.splice(r.indexOf(l),1)}n=n.map(function(e){return No(this,e,r)}.bind(e));var h=[],p=[];return Promise.all(n).then(function(e){if(d?h=e:c&&(p=e),e=!1,h.length||p.length)if(h.length)if(Yo(t,"URI")==h[0].zb){var n="audio";e=!0}else n="video";else n="audio";else 1==r.length?(n=qo("video",r),n=i||s||n?"video":"audio"):(n="video",r=[r.join(",")]);return e?Promise.resolve():Lo(this,t,r,n)}.bind(e)).then(function(e){return e&&("audio"==e.stream.type?h=[e]:p=[e]),p&&Do(p),h&&Do(h),Ro(this,h,p,u,o,a,s)}.bind(e))}function Do(e){e.forEach(function(e){var t=e.stream.codecs.split(",");t=t.filter(function(e){return"mp4a.40.34"!=e}),e.stream.codecs=t.join(",")})}function Ro(e,t,n,r,i,o,a){n.forEach(function(e){(e=e.stream)&&(e.width=Number(i)||void 0,e.height=Number(o)||void 0,e.frameRate=Number(a)||void 0)}.bind(e)),t.length||(t=[null]),n.length||(n=[null]);for(var s=[],u=0;u<t.length;u++)for(var l=0;l<n.length;l++){var d=t[u]?t[u].stream:null,c=n[l]?n[l].stream:null,f=t[u]?t[u].drmInfos:null,h=n[l]?n[l].drmInfos:null,p=void 0;if(d&&c){if(f.length&&h.length&&!(0<Mt(f,h).length))continue;p=Mt(f,h)}else d?p=f:c&&(p=h);f=(n[u]?n[u].zb:"")+" - "+(t[u]?t[u].zb:""),e.K.has(f)||(d=Mo(e,d,c,r,p),s.push(d),e.K.add(f))}return s}function Mo(e,t,n,r,i){return{id:e.M++,language:t?t.language:"und",primary:!!t&&t.primary||!!n&&n.primary,audio:t,video:n,bandwidth:r,drmInfos:i,allowedByApplication:!0,allowedByKeySystem:!0}}function Co(e,t){return Yo(t,"TYPE"),No(e,t,[]).then(function(e){return e.stream})}function No(e,t,n){var r=Yo(t,"URI");if(e.a.has(r))return Promise.resolve(e.a.get(r));var i=Yo(t,"TYPE").toLowerCase();"subtitles"==i&&(i="text");var o=wn(ao(t,"LANGUAGE","und")),a=ao(t,"NAME"),s=t.getAttribute("DEFAULT"),u=t.getAttribute("AUTOSELECT"),l=ao(t,"CHANNELS");return Oo(e,r,n,i,o,!!s||!!u,a,"audio"==i?Po(l):null).then(function(e){return this.a.has(r)?this.a.get(r):(this.v.set(t.id,e),this.a.set(r,e),e)}.bind(e))}function Po(e){return e?(e=e.split("/")[0],parseInt(e,10)):null}function Lo(e,t,n,r){var i=Yo(t,"URI");return e.a.has(i)?Promise.resolve(e.a.get(i)):Oo(e,i,n,r,"und",!1,null,null).then(function(e){return this.a.has(i)?this.a.get(i):(this.a.set(i,e),e)}.bind(e))}function Oo(e,t,n,r,i,o,a,s){var u,l,d=qe([e.s],[t])[0],c="";return Wo(e,d).then(function(t){if(d=t.uri,u=yo(e.o,t.data,d),1!=u.type)throw new ae(2,4,4017);t=u;var i=ta,o=lo(t.a,"EXT-X-PLAYLIST-TYPE"),a=lo(t.a,"EXT-X-ENDLIST");if(a=o&&"VOD"==o.value||a,o=o&&"EVENT"==o.value&&!a,o=!a&&!o,a?Jo(e,i.sa):(Jo(e,o?i.jc:i.Zc),t=zo(t.a,"EXT-X-TARGETDURATION"),t=Number(t.value),e.l=Math.max(t,e.l),e.A=Math.min(t,e.A)),1==n.length)c=n[0];else{if(t=qo(r,n),null==t)throw new ae(2,4,4025,n);c=t}return Go(e,r,c,u)}).then(function(n){return l=n,n=lo(u.a,"EXT-X-MEDIA-SEQUENCE"),Uo(e,t,u,n?Number(n.value):0,l,c)}).then(function(n){var f=n[0].startTime,h=n[n.length-1].endTime,p=h-f;n=new pi(n);var m=Fo(u),g=void 0;"text"==r&&(g="subtitle");var y=[];u.segments.forEach(function(e){e=uo(e.b,"EXT-X-KEY"),y.push.apply(y,e)});var v=!1,_=[],E=null;if(y.forEach(function(e){if("NONE"!=Yo(e,"METHOD")){v=!0;var t=Yo(e,"KEYFORMAT");(e=(t=Zo[t])?t(e):null)&&(e.keyIds.length&&(E=e.keyIds[0]),_.push(e))}}),v&&!_.length)throw new ae(2,4,4026);return{stream:{id:e.M++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:n.find.bind(n),getSegmentReference:n.get.bind(n),initSegmentReference:m,presentationTimeOffset:0,mimeType:l,codecs:c,kind:g,encrypted:v,keyId:E,language:i,label:a||null,type:r,primary:o,trickModeVideo:null,containsEmsgBoxes:!1,frameRate:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:[],channelsCount:s},eb:n,drmInfos:_,zb:t,dd:d,Rb:f,Gd:h,duration:p}})}function Fo(e){var t=uo(e.a,"EXT-X-MAP");if(!t.length)return null;if(1<t.length)throw new ae(2,4,4020);t=t[0];var n=Yo(t,"URI"),r=qe([e.b],[n])[0];return e=0,n=null,(t=ao(t,"BYTERANGE"))&&(e=t.split("@"),t=Number(e[0]),e=Number(e[1]),n=e+t-1),new ei(function(){return[r]},e,n)}function Bo(e,t,n,r){var i=t.b,o=t.a;t=zo(i,"EXTINF").value.split(","),t=r+Number(t[0]);var a=0,s=null;return(i=lo(i,"EXT-X-BYTERANGE"))&&(a=i.value.split("@"),i=Number(a[0]),a=a[1]?Number(a[1]):e.a+1,s=a+i-1),new ti(n,r,t,function(){return[o]},a,s)}function ko(e){e.b&&(e.G.forEach(function(t){e.b.Na(t,!0)}),e.G=[])}function Uo(e,t,n,r,i,o){var a=n.segments,s=[],u=a[0].a,l=Bo(null,a[0],r,0);return n=Fo(n),jo(e,t,n,l,i,o).then(function(e){u.split("/").pop();for(var t=0;t<a.length;++t){var n=s[s.length-1];n=Bo(n,a[t],r+t,0==t?e:n.endTime),s.push(n)}return this.G.push(s),ko(this),s}.bind(e))}function Ho(e,t){var n=e.c.networkingEngine,r=Ae(t.c(),e.g.retryParameters),i={},o=t.b;i.Range="bytes="+o+"-"+(o+2048-1);var a={};return 0==o&&null==t.a||(o="bytes="+o+"-",null!=t.a&&(o+=t.a),a.Range=o),r.headers=i,i=n.request(1,r),Se(e.h,i),i.promise["catch"](function(){U("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",r.uris[0]),r.headers=a;var t=n.request(1,r);return Se(e.h,t),t.promise})}function jo(e,t,n,r,i,o){return e.m&&(t=e.a.get(t).eb.get(r.position))?Promise.resolve(t.startTime):(r=[Ho(e,r)],"video/mp4"!=i&&"audio/mp4"!=i||(n?r.push(Ho(e,n)):r.push(r[0])),Promise.all(r).then(function(e){if("video/mp4"==i||"audio/mp4"==i)return Ko(e[0].data,e[1].data);if("audio/mpeg"==i)return 0;if("video/mp2t"==i)return Vo(e[0].data);if("application/mp4"==i||0==i.indexOf("text/")){e=e[0].data;var t=We(i,o);if(sn[t]){var n=new an(null);n.f=new sn[t],e=n.Lb(e)}else e=0;return e}throw new ae(2,4,4030)}.bind(e)))}function Ko(e,t){var n=0;if((new ai).C("moov",si).C("trak",si).C("mdia",si).Y("mdhd",function(e){e.reader.F(0==e.version?8:16),n=e.reader.B(),e.parser.stop()}).parse(t,!0),!n)throw new ae(2,4,4030);var r=0,i=!1;if((new ai).C("moof",si).C("traf",si).Y("tfdt",function(e){r=(0==e.version?e.reader.B():e.reader.Ra())/n,i=!0,e.parser.stop()}).parse(e,!0),!i)throw new ae(2,4,4030);return r}function Vo(e){function t(){throw new ae(2,4,4030)}e=new ni(new DataView(e),0);for(var n=0,r=0;;){if(n=e.V(),r=e.ba(),71!=r&&t(),16384&e.bb()||t(),r=(48&e.ba())>>4,0!=r&&2!=r||t(),3==r&&(r=e.ba(),e.F(r)),1==e.B()>>8)return e.F(3),n=e.ba()>>6,0!=n&&1!=n||t(),0==e.ba()&&t(),n=e.ba(),r=e.bb(),e=e.bb(),(1073741824*((14&n)>>1)+((65534&r)<<14|(65534&e)>>1))/9e4;e.seek(n+188),r=e.ba(),71!=r&&(e.seek(n+192),r=e.ba()),71!=r&&(e.seek(n+204),r=e.ba()),71!=r&&t(),e.Oc(1)}}function qo(e,t){for(var n=Xo[e],r=0;r<n.length;r++)for(var i=0;i<t.length;i++)if(n[r].test(t[i].trim()))return t[i].trim();return"text"==e?"":null}function Go(e,t,n,r){r=r.segments[0].a;var i=new K(r).$.split(".").pop(),o=$o[t][i];return o?Promise.resolve(o):"text"==t?n&&"vtt"!=n?Promise.resolve("application/mp4"):Promise.resolve("text/vtt"):(t=Ae([r],e.g.retryParameters),t.method="HEAD",t=e.c.networkingEngine.request(1,t),Se(e.h,t),t.promise.then(function(e){if(e=e.headers["content-type"],!e)throw new ae(2,4,4021,i);return e.split(";")[0]}))}function Yo(e,t){var n=e.getAttribute(t);if(!n)throw new ae(2,4,4023,t);return n.value}function zo(e,t){var n=lo(e,t);if(!n)throw new ae(2,4,4024,t);return n}function Wo(e,t){var n=e.c.networkingEngine.request(0,Ae([t],e.g.retryParameters));return Se(e.h,n),n.promise}P("shaka.net.DataUriPlugin",To),To.parse=function(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new ae(2,1,1004,t);if(n=n.slice(1).join(":").split(","),2>n.length)throw new ae(2,1,1004,t);var r=n[0];n=e.decodeURIComponent(n.slice(1).join(",")),r=r.split(";");var i=null;if(1<r.length&&(i=r[1]),"base64"==i)t=at(n).buffer;else{if(i)throw new ae(2,1,1005,t);t=et(n)}return{data:t,contentType:r[0]}},xe("data",To),P("shaka.hls.HlsParser",So),n=So.prototype,n.configure=function(e){this.g=e},n.start=function(e,t){return this.c=t,Wo(this,e).then(function(e){return this.s=e.uri,wo(this,e.data).then(function(){return Qo(this,this.i),this.m}.bind(this))}.bind(this))},n.stop=function(){return this.g=this.c=null,this.v.clear(),this.K.clear(),this.a.clear(),this.m=null,this.h.destroy()},n.update=function(){if(this.f!=ta.sa){for(var e=[],t=c(this.a.values()),n=t.next();!n.done;n=t.next())e.push(Io(this,n.value));return Promise.all(e)}},n.onExpirationUpdated=function(){};var Xo={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},$o={audio:{mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",ts:"video/mp2t"},video:{mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}};function Qo(t,n){null!=t.i&&null!=n&&(t.j=e.setTimeout(t.T.bind(t),1e3*n))}function Jo(t,n){t.f=n,t.b&&t.b.yb(t.f==ta.sa),t.f==ta.sa&&null!=t.j&&(e.clearTimeout(t.j),t.j=null,t.i=null)}So.prototype.T=function(){this.c&&(this.j=null,this.update().then(function(){Qo(this,this.i)}.bind(this))["catch"](function(e){this.c&&(e.severity=1,this.c.onError(e),Qo(this,0))}.bind(this)))};var Zo={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Yo(e,"METHOD");return"SAMPLE-AES-CENC"!=t&&"SAMPLE-AES-CTR"!=t?null:(t=Yo(e,"URI"),t=To.parse(t),t=new Uint8Array(t.data),t=Ge("com.widevine.alpha",[{initDataType:"cenc",initData:t}]),(e=ao(e,"KEYID"))&&(t.keyIds=[e.substr(2).toLowerCase()]),t)}},ea="VOD",ta={sa:ea,Zc:"EVENT",jc:"LIVE"};function na(e,t,n,r){this.a=e,this.s=t,this.o=n,this.v=r,this.h=new Pe,this.b=null,this.g=!1,this.m=e.readyState,this.c=!1,this.j=this.A=-1,this.f=this.i=!1,t=this.l.bind(this),Le(this.h,e,"waiting",t),this.b=new nt(t),it(this.b,.25)}function ra(e,t,n){this.a=e,this.i=t,this.h=n,this.c=new Pe,this.f=1,this.g=!1,this.b=null,0<e.readyState?this.Fc():Oe(this.c,e,"loadedmetadata",this.Fc.bind(this)),Le(this.c,e,"ratechange",this.Wd.bind(this))}function ia(e){return 0<e.a.readyState?e.a.currentTime:e.h}function oa(e,t){0<e.a.readyState?sa(e,e.a.currentTime,t):(e.h=t,setTimeout(e.i,0))}function aa(e,t){null!=e.b&&(e.b.cancel(),e.b=null),e.f=t,e.a.playbackRate=e.g||0>t?0:t,!e.g&&0>t&&(e.b=new nt(function(){e.a.currentTime+=t/4}),it(e.b,.25))}function sa(e,t,n){function r(){!e.a||10<=i++||e.a.currentTime!=t||(e.a.currentTime=n,setTimeout(r,100))}e.a.currentTime=n;var i=0;setTimeout(r,100)}function ua(e,t,n,r,i,o){this.c=e,this.b=t,this.h=n,this.j=i,this.f=null,this.g=new na(e,t,n,o),t=this.Yd.bind(this),n=this.b.presentationTimeline,null==r?r=1/0>n.U()?n.Ja():n.na():0>r&&(r=n.na()+r),r=da(this,fa(this,r)),this.a=new ra(e,t,r),this.f=new nt(this.Vd.bind(this)),it(this.f,.25)}function la(e){var t=ia(e.a);return 0<e.c.readyState&&(e.c.paused||(t=fa(e,t))),t}function da(e,t){var n=e.b.presentationTimeline.U();return t>=n?n-e.h.durationBackoff:t}function ca(e,t){var n=Ft.bind(null,e.c.buffered),r=Math.max(e.b.minBufferTime||0,e.h.rebufferingGoal),i=e.b.presentationTimeline,o=i.Ja(),a=i.na(),s=i.U();3>a-o&&(o=a-3);var u=i.Wa(r),l=i.Wa(5);return r=i.Wa(r+5),t>=s?da(e,t):t>a?a:t<o?n(l)?l:r:t>=u||n(t)?t:r}function fa(e,t){var n=e.b.presentationTimeline.Ja();return t<n?n:(n=e.b.presentationTimeline.na(),t>n?n:t)}function ha(e,t,n,r,i,o,a){this.a=e,this.v=t,this.g=n,this.s=r,this.l=i,this.h=o,this.A=a,this.c=[],this.j=new Pe,this.b=!1,this.i=-1,this.f=null,ma(this)}function pa(e){var t=Ee(e);return t.eventElement=e.eventElement,t}function ma(t){ga(t),t.f=e.setTimeout(t.G.bind(t),250)}function ga(t){t.f&&(e.clearTimeout(t.f),t.f=null)}function ya(e,t){this.a=t,this.b=e,this.g=null,this.j=1,this.m=Promise.resolve(),this.h=[],this.i={},this.c={},this.o=!1,this.A=null,this.v=this.f=this.l=!1,this.s=0}function va(e){var t=la(e.a.Pa);return e.b.periods[zn(e.b,t)]}function _a(e){var t=e.c.video||e.c.audio;return t?e.b.periods[t.Ba]:null}function Ea(e){return Ta(e,"audio")}function ba(e){return Ta(e,"video")}function Ta(e,t){var n=e.c[t];return n?n.ta||n.stream:null}function Sa(e,t){yn(e.a.I,"text"),e.s++,e.v=!1;var n=e.s;return e.a.I.init({text:t},!1).then(function(){return Pa(e,[t])}).then(function(){if(!e.f&&e.s==n&&!e.c.text&&!e.v){var r=la(e.a.Pa);e.c.text=Ca(t,zn(e.b,r)),Wa(e,e.c.text,0)}})}function Ia(e){e.v=!0,e.c.text&&(Xa(e.c.text),delete e.c.text)}function wa(e,t){var n=e.c.video;if(n){var r=n.stream;if(r)if(t){var i=r.trickModeVideo;i&&!n.ta&&(Aa(e,i,!1),n.ta=r)}else(r=n.ta)&&(n.ta=null,Aa(e,r,!0))}}function xa(e,t,n){t.video&&Aa(e,t.video,n),t.audio&&Aa(e,t.audio,n)}function Aa(e,t,n){var r=e.c[t.type];if(!r&&"text"==t.type&&e.g.ignoreTextStreamFailures)Sa(e,t);else if(r){var i=Wn(e.b,t);n&&i!=r.Ba?Ra(e):(r.ta&&(t.trickModeVideo?(r.ta=t,t=t.trickModeVideo):r.ta=null),(i=e.h[i])&&i.Sa&&(i=e.i[t.id])&&i.Sa&&r.stream!=t&&("text"==t.type&&cn(e.a.I,We(t.mimeType,t.codecs)),r.stream=t,r.wb=!0,n&&(r.ya?r.Ab=!0:r.Ca?(r.wa=!0,r.Ab=!0):(Xa(r),za(e,r,!0)))))}}function Da(e){var t=la(e.a.Pa),n=e.g.smallGapLimit;Object.keys(e.c).every(function(e){var r=this.a.I;return"text"==e?(e=r.a,e=t>=e.a&&t<e.b):(e=mn(r,e),e=Ft(e,t,n)),e}.bind(e))||Ra(e)}function Ra(e){for(var t in e.c){var n=e.c[t];n.ya||n.wa||(n.Ca?n.wa=!0:null==fn(e.a.I,t)?null==n.va&&Wa(e,n,0):(Xa(n),za(e,n,!1)))}}function Ma(e,t,n){var r=la(e.a.Pa),i=zn(e.b,r),o={},a=[];return t.variant&&t.variant.audio&&(o.audio=t.variant.audio,a.push(t.variant.audio)),t.variant&&t.variant.video&&(o.video=t.variant.video,a.push(t.variant.video)),t.text&&(o.text=t.text,a.push(t.text)),e.a.I.init(o,e.g.forceTransmuxTS).then(function(){if(!e.f){var t=e.b.presentationTimeline.U();return 1/0>t?e.a.I.la(t):e.a.I.la(Math.pow(2,32)),Pa(e,a)}}).then(function(){if(!e.f)for(var t in o){var r=o[t];e.c[t]||(e.c[t]=Ca(r,i,n),Wa(e,e.c[t],0))}})}function Ca(e,t,n){return{stream:e,type:e.type,La:null,oa:null,ta:null,wb:!0,Ba:t,endOfStream:!1,Ca:!1,va:null,wa:!1,Ab:!1,ya:!1,$b:!1,Ya:!1,Nc:n||0}}function Na(e,t){var n=e.h[t];if(n)return n.promise;n={promise:new ne,Sa:!1},e.h[t]=n;var r=e.b.periods[t].variants.map(function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),e.video&&e.video.trickModeVideo&&t.push(e.video.trickModeVideo),t}).reduce(He,[]).filter(Ve);return r.push.apply(r,e.b.periods[t].textStreams),e.m=e.m.then(function(){if(!this.f)return Pa(this,r)}.bind(e)).then(function(){this.f||(this.h[t].promise.resolve(),this.h[t].Sa=!0)}.bind(e))["catch"](function(e){this.f||(this.h[t].promise["catch"](function(){}),this.h[t].promise.reject(),delete this.h[t],this.a.onError(e))}.bind(e)),n.promise}function Pa(e,t){t.map(function(e){return e.id}).filter(Ve);for(var n=[],r=0;r<t.length;++r){var i=t[r],o=e.i[i.id];o?n.push(o.promise):(e.i[i.id]={promise:new ne,Sa:!1},n.push(i.createSegmentIndex()))}return Promise.all(n).then(function(){if(!this.f)for(var e=0;e<t.length;++e){var n=this.i[t[e].id];n.Sa||(n.promise.resolve(),n.Sa=!0)}}.bind(e))["catch"](function(e){if(!this.f){for(var n=0;n<t.length;n++)this.i[t[n].id].promise["catch"](function(){}),this.i[t[n].id].promise.reject(),delete this.i[t[n].id];return Promise.reject(e)}}.bind(e))}function La(e,t){var n=la(e.a.Pa),r=Oa(e,t,n),i=Wn(e.b,t.stream),o=zn(e.b,r),a=pn(e.a.I,t.type,n),s=Math.max(e.j*Math.max(e.b.minBufferTime||0,e.g.rebufferingGoal),e.j*e.g.bufferingGoal);if(r>=e.b.presentationTimeline.U())return t.endOfStream=!0,null;if(t.endOfStream=!1,t.Ba=o,o!=i)return null;if(a>=s)return.5;if(o=hn(e.a.I,t.type),o=Fa(e,t,n,o,i),!o)return 1;var u=1/0;return ze.values(e.c).forEach(function(t){u=Math.min(u,Oa(e,t,n))}),r>=u+e.b.presentationTimeline.a?1:(t.Nc=0,ka(e,t,n,i,o),null)}function Oa(e,t,n){return t.La&&t.oa?e.b.periods[Wn(e.b,t.La)].startTime+t.oa.endTime:Math.max(n,t.Nc)}function Fa(e,t,n,r,i){if(t.oa&&t.stream==t.La)return Ba(e,t,i,t.oa.position+1);if(n=t.oa?t.stream.findSegmentPosition(Math.max(0,e.b.periods[Wn(e.b,t.La)].startTime+t.oa.endTime-e.b.periods[i].startTime)):t.stream.findSegmentPosition(Math.max(0,(r||n)-e.b.periods[i].startTime)),null==n)return null;var o=null;return null==r&&(o=Ba(e,t,i,Math.max(0,n-1))),o||Ba(e,t,i,n)}function Ba(e,t,n,r){return n=e.b.periods[n],t=t.stream.getSegmentReference(r),t?(r=e.b.presentationTimeline,e=r.Xa(),r=r.Ka(),n.startTime+t.endTime<e||n.startTime+t.startTime>r?null:t):null}function ka(e,t,n,r,i){var o=e.b.periods[r],a=t.stream,s=e.b.presentationTimeline.U(),u=e.b.periods[r+1];r=Ha(e,t,r,Math.max(0,o.startTime-.1),u?u.startTime+.01:s),t.Ca=!0,t.wb=!1,s=Ya(e,i),Promise.all([r,s]).then(function(e){if(!this.f&&!this.l)return ja(this,t,n,o,a,i,e[1])}.bind(e)).then(function(){this.f||this.l||(t.Ca=!1,t.$b=!1,t.wa||this.a.ab(),Wa(this,t,0),Va(this,a))}.bind(e))["catch"](function(e){this.f||this.l||(t.Ca=!1,"text"==t.type&&this.g.ignoreTextStreamFailures?delete this.c.text:3017==e.code?Ua(this,t,e):(t.Ya=!0,e.severity=2,$a(this,e)))}.bind(e))}function Ua(e,t,n){if(!ze.values(e.c).some(function(e){return e!=t&&e.$b})){var r=Math.round(100*e.j);if(20<r)e.j-=.2;else{if(!(4<r))return t.Ya=!0,e.l=!0,void e.a.onError(n);e.j-=.04}t.$b=!0}Wa(e,t,4)}function Ha(e,t,n,r,i){return t.wb?(n=vn(e.a.I,t.type,e.b.periods[n].startTime-t.stream.presentationTimeOffset,r,i),t.stream.initSegmentReference?(e=Ya(e,t.stream.initSegmentReference).then(function(e){if(!this.f)return gn(this.a.I,t.type,e,null,null)}.bind(e))["catch"](function(e){return t.wb=!0,Promise.reject(e)}),Promise.all([n,e])):n):Promise.resolve()}function ja(e,t,n,r,i,o,a){return i.containsEmsgBoxes&&(new ai).Y("emsg",e.ie.bind(e,r,o)).parse(a),Ka(e,t,n).then(function(){if(!this.f)return gn(this.a.I,t.type,a,o.startTime+r.startTime,o.endTime+r.startTime)}.bind(e)).then(function(){if(!this.f)return t.La=i,t.oa=o,Promise.resolve()}.bind(e))}function Ka(e,t,n){var r=Math.max(e.g.bufferBehind,e.b.presentationTimeline.a),i=fn(e.a.I,t.type);return null==i?Promise.resolve():(n=n-i-r,0>=n?Promise.resolve():e.a.I.remove(t.type,i,i+n).then(function(){}.bind(e)))}function Va(e,t){if(!e.o&&(e.o=ze.values(e.c).every(function(e){return"text"==e.type||!e.wa&&!e.ya&&e.oa}),e.o)){var n=Wn(e.b,t);for(e.h[n]||Na(e,n).then(function(){this.f||this.a.zc()}.bind(e))["catch"](je),n=0;n<e.b.periods.length;++n)Na(e,n)["catch"](je);e.a.ae&&e.a.ae()}}function qa(e,t){if(t.Ba!=Wn(e.b,t.stream)){var n=t.Ba,r=ze.values(e.c);r.every(function(e){return e.Ba==n})&&r.every(Ga)&&Na(e,n).then(function(){if(!this.f&&r.every(function(e){var t=Wn(this.b,e.stream);return Ga(e)&&e.Ba==n&&t!=n}.bind(this))){var e=this.b.periods[n],t=this.a.Ac(e),i={};for(var o in t.variant&&t.variant.video&&(i.video=t.variant.video),t.variant&&t.variant.audio&&(i.audio=t.variant.audio),t.text&&(i.text=t.text),this.c)if(!i[o]&&"text"!=o)return void this.a.onError(new ae(2,5,5005));for(var a in i)if(!this.c[a]){if("text"!=a)return void this.a.onError(new ae(2,5,5005));Ma(this,{text:i.text},e.startTime),delete i[a]}for(var s in this.c)(e=i[s])?(Aa(this,e,!1),Wa(this,this.c[s],0)):delete this.c[s];this.a.zc()}}.bind(e))["catch"](je)}}function Ga(e){return!e.Ca&&null==e.va&&!e.wa&&!e.ya}function Ya(e,t){var n=Ae(t.c(),e.g.retryParameters);if(0!=t.b||null!=t.a){var r="bytes="+t.b+"-";null!=t.a&&(r+=t.a),n.headers.Range=r}return e.a.$a.request(1,n).promise.then(function(e){return e.data})}function za(e,t,n){t.wa=!1,t.Ab=!1,t.ya=!0,yn(e.a.I,t.type).then(function(){if(!this.f&&n)return this.a.I.flush(t.type)}.bind(e)).then(function(){this.f||(t.La=null,t.oa=null,t.ya=!1,t.endOfStream=!1,Wa(this,t,0))}.bind(e))}function Wa(t,n,r){n.va=e.setTimeout(t.Se.bind(t,n),1e3*r)}function Xa(t){null!=t.va&&(e.clearTimeout(t.va),t.va=null)}function $a(e,t){ie(e.A).then(function(){this.f||(this.a.onError(t),t.handled||this.g.failureCallback(t))}.bind(e))}function Qa(e,t,n,r,i,o){if(200<=n&&299>=n&&202!=n)return i&&(r=i),{uri:r,data:t,headers:e,fromCache:!!e["x-shaka-from-cache"]};i=null;try{i=Ze(t)}catch(a){}throw new ae(401==n||403==n?2:1,1,1001,r,n,i,e,o)}function Ja(e,t,n){var r=new Ja.b;ze.forEach(t.headers,function(e,t){r.append(e,t)});var i,o=new Ja.a,a={body:t.body||void 0,headers:r,method:t.method,signal:o.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},s={mc:!1,Xc:!1};return t.retryParameters.timeout&&(i=setTimeout(function(){s.Xc=!0,o.abort()},t.retryParameters.timeout)),e=Ja.f(e,n,a,s,i),new se(e,function(){return s.mc=!0,o.abort(),Promise.resolve()})}function Za(e,t,n){var r=new Za.g,i=new Promise(function(i,o){for(var a in r.open(t.method,e,!0),r.responseType="arraybuffer",r.timeout=t.retryParameters.timeout,r.withCredentials=t.allowCrossSiteCredentials,r.onabort=function(){o(new ae(1,1,7001,e,n))},r.onload=function(t){t=t.target;var r=t.getAllResponseHeaders().trim().split("\r\n").reduce(function(e,t){var n=t.split(": ");return e[n[0].toLowerCase()]=n.slice(1).join(": "),e},{});try{var a=Qa(r,t.response,t.status,e,t.responseURL,n);i(a)}catch(s){o(s)}},r.onerror=function(t){o(new ae(1,1,1002,e,t,n))},r.ontimeout=function(){o(new ae(1,1,1003,e,n))},t.headers)r.setRequestHeader(a.toLowerCase(),t.headers[a]);r.send(t.body)});return new se(i,function(){return r.abort(),Promise.resolve()})}function es(e){this.a={},this.c=Promise.resolve(),this.h=!1,this.i=e,this.f=this.b=this.g=0}function ts(e,t,n,r,i){e.a[t]=e.a[t]||[],e.a[t].push({request:n,pc:r,Jd:i})}function ns(e,t){var n=ze.values(e.a);e.a={},n.forEach(function(t){t.forEach(function(t){e.b+=t.pc})});var r=Promise.resolve().then(function(){return os(e),Promise.all(n.map(function(n){return rs(e,t,n)}))});return e.c=e.c.then(function(){return r}),r}function rs(e,t,n){var r=Promise.resolve();return n.forEach(function(n){r=r.then(function(){return os(e),is(e,t,n)})}),r}function is(e,t,n){return Promise.resolve().then(function(){return os(e),t.request(1,n.request).promise}).then(function(t){return os(e),e.g+=n.pc,e.f+=t.data.byteLength,e.i(e.b?e.g/e.b:0,e.f),n.Jd(t.data)})}function os(e){if(e.h)throw new ae(2,9,7001)}function as(e,t){var n=this;this.c=e,this.b=e.objectStore(t),this.a=new ne,e.onabort=function(e){e.preventDefault(),n.a.reject()},e.onerror=function(e){e.preventDefault(),n.a.reject()},e.oncomplete=function(){n.a.resolve()}}function ss(e){this.b=e,this.a=[]}function us(e,t){return ls(e,t,"readwrite")}function ls(e,t,n){n=e.b.transaction([t],n);var r=new as(n,t);return e.a.push(r),r.promise().then(function(){ye(e.a,r)},function(){ye(e.a,r)}),r}function ds(){this.a={}}function cs(e){var t=null;if(ze.forEach(e.a,function(e,n){ze.forEach(n.getCells(),function(n,r){r.hasFixedKeySpace()||t||(t={path:{ea:e,O:n},O:r})})}),t)return t;throw new ae(2,9,9013,"Could not find a cell that supports add-operations")}function fs(e,t){ze.forEach(e.a,function(e,n){ze.forEach(n.getCells(),function(n,r){t({ea:e,O:n},r)})})}function hs(e,t,n){if(e=e.a[t],!e)throw new ae(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells()[n],!t)throw new ae(2,9,9013,"Could not find cell with name "+n);return t}function ps(e){return p(function t(){var n,r,i,o;return M(t,function(t){switch(t.u){case 1:return n=ze,r=Object.values(e.a),i=0<r.length,i||(o=gs,n.forEach(o,function(e,t){var n=t();n&&r.push(n)})),v(t,Promise.all(r.map(function(e){return e.erase()})),2);case 2:if(!i)return v(t,Promise.all(r.map(function(e){return e.destroy()})),0);t.N(0)}})})}function ms(){return ze.values(gs).some(function(e){return!!(e=e())&&(e.destroy(),!0)})}ki.m3u8=So,Bi["application/x-mpegurl"]=So,Bi["application/vnd.apple.mpegurl"]=So,na.prototype.destroy=function(){var e=this.h.destroy();return this.v=this.s=this.a=this.h=null,null!=this.b&&(this.b.cancel(),this.b=null),e},na.prototype.ab=function(){this.f=!0,this.l()},na.prototype.l=function(){if(0!=this.a.readyState){if(this.a.seeking){if(!this.g)return}else this.g=!1;if(!this.a.paused){this.a.readyState!=this.m&&(this.c=!1,this.m=this.a.readyState);var e=this.o.smallGapLimit,t=this.a.currentTime,n=this.a.buffered;e:{if(n&&n.length&&!(1==n.length&&1e-6>n.end(0)-n.start(0))){var r=.1;/(Edge\/|Trident\/|Tizen|CrKey)/.test(navigator.userAgent)&&(r=.5);for(var i=0;i<n.length;i++)if(n.start(i)>t&&(0==i||n.end(i-1)-t<=r)){r=i;break e}}r=null}if(null==r){if(n=this.a.currentTime,t=this.a.buffered,!this.a.paused&&0<this.a.playbackRate)if(this.j!=n)this.j=n,this.A=Date.now(),this.i=!1;else if(!this.i&&this.A<Date.now()-1e3)for(r=0;r<t.length;r++)if(n>=t.start(r)&&n<t.end(r)-.5){this.a.currentTime+=.1,this.j=this.a.currentTime,this.i=!0;break}}else if(0!=r||this.f){i=n.start(r);var o=this.s.presentationTimeline.na();if(!(i>=o)){o=i-t,e=o<=e;var a=!1;.001>o||(e||this.c||(this.c=!0,t=new ke("largegap",{currentTime:t,gapSize:o}),t.cancelable=!0,this.v(t),this.o.jumpLargeGaps&&!t.defaultPrevented&&(a=!0)),!e&&!a)||(0!=r&&n.end(r-1),this.a.currentTime=i)}}}}},n=ra.prototype,n.destroy=function(){var e=this.c.destroy();return this.c=null,null!=this.b&&(this.b.cancel(),this.b=null),this.i=this.a=null,e},n.Va=function(){return this.f},n.Wd=function(){var e=this.g||0>this.f?0:this.f;this.a.playbackRate&&this.a.playbackRate!=e&&aa(this,this.a.playbackRate)},n.Fc=function(){.001>Math.abs(this.a.currentTime-this.h)?this.Gc():(Oe(this.c,this.a,"seeking",this.Gc.bind(this)),this.a.currentTime=0==this.a.currentTime?this.h:this.a.currentTime)},n.Gc=function(){var e=this;Le(this.c,this.a,"seeking",function(){return e.i()})},n=ua.prototype,n.destroy=function(){var e=Promise.all([this.a.destroy(),this.g.destroy()]);return this.g=this.a=null,null!=this.f&&(this.f.cancel(),this.f=null),this.j=this.h=this.b=this.c=null,e},n.Va=function(){return this.a.Va()},n.ab=function(){this.g.ab()},n.Vd=function(){if(0!=this.c.readyState&&!this.c.paused){var e=this.c.currentTime,t=this.b.presentationTimeline,n=t.Ja();t=t.na(),3>t-n&&(n=t-3),e<n&&(e=ca(this,e),this.c.currentTime=e)}},n.Yd=function(){var e=this.g;e.g=!0,e.f=!1,e.c=!1;var t=ia(this.a);if(e=ca(this,t),.001<Math.abs(e-t)&&(t=(new Date).getTime()/1e3,!this.i||this.i<t-1))return this.i=t,void oa(this.a,e);this.j()},ha.prototype.destroy=function(){var e=this.j?this.j.destroy():Promise.resolve();return this.j=null,ga(this),this.A=this.h=this.l=this.s=this.g=this.v=this.a=null,this.c=[],e},ha.prototype.o=function(e){if(!this.c.some(function(t){return t.info.schemeIdUri==e.schemeIdUri&&t.info.startTime==e.startTime&&t.info.endTime==e.endTime})){var t={info:e,status:1};this.c.push(t);var n=new ke("timelineregionadded",{detail:pa(e)});this.h(n),this.m(!0,t)}},ha.prototype.m=function(e,t){var n=t.info.startTime>this.a.currentTime?1:t.info.endTime<this.a.currentTime?3:2,r=2==t.status,i=2==n;n!=t.status&&((!e||r||i)&&(r||this.h(new ke("timelineregionenter",{detail:pa(t.info)})),i||this.h(new ke("timelineregionexit",{detail:pa(t.info)}))),t.status=n)},ha.prototype.G=function(){this.f=null,ma(this);var e=zn(this.g,this.a.currentTime);e!=this.i&&(-1!=this.i&&this.A(),this.i=e),e=Bt(this.a.buffered,this.a.currentTime);var t=Ot(this.a.buffered),n=this.g.presentationTimeline,r=n.Ka();t=n.R()&&t>=r,n=this.v,n=!n.g||"ended"==n.g.readyState,t=t||this.a.ended||n,this.b?(n=Math.max(this.g.minBufferTime||0,this.s.rebufferingGoal),(t||e>=n)&&0!=this.b&&(this.b=!1,this.l(!1))):!t&&.5>e&&1!=this.b&&(this.b=!0,this.l(!0)),this.c.forEach(this.m.bind(this,!1))},n=ya.prototype,n.destroy=function(){for(var e in this.c)Xa(this.c[e]);return this.g=this.c=this.i=this.h=this.m=this.b=this.a=null,this.f=!0,Promise.resolve()},n.configure=function(e){this.g=e,this.A=new re({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0},!0)},n.init=function(){var e=la(this.a.Pa);return e=this.a.Ac(this.b.periods[zn(this.b,e)]),e.variant||e.text?Ma(this,e).then(function(){!this.f&&this.a&&this.a.Md&&this.a.Md()}.bind(this)):Promise.reject(new ae(2,5,5005))},n.Se=function(e){if(!this.f&&!e.Ca&&null!=e.va&&!e.ya)if(e.va=null,e.wa)za(this,e,e.Ab);else{try{var t=La(this,e);null!=t&&(Wa(this,e,t),e.Ya=!1)}catch(n){return void $a(this,n)}t=ze.values(this.c),qa(this,e),t.every(function(e){return e.endOfStream})&&this.a.I.endOfStream().then(function(){if(!this.f){var e=this.a.I.U();e<this.b.presentationTimeline.U()&&this.b.presentationTimeline.la(e)}}.bind(this))}},n.ie=function(e,t,n){var r=n.reader.Yb(),i=n.reader.Yb(),o=n.reader.B(),a=n.reader.B(),s=n.reader.B(),u=n.reader.B();n=n.reader.Da(n.reader.D.byteLength-n.reader.V()),e=e.startTime+t.startTime+a/o,"urn:mpeg:dash:event:2012"==r?this.a.Od():this.a.onEvent(new ke("emsg",{detail:{startTime:e,endTime:e+s/o,schemeIdUri:r,value:i,timescale:o,presentationTimeDelta:a,eventDuration:s,id:u,messageData:n}}))},P("shaka.net.HttpFetchPlugin",Ja),Ja.f=function(e,t,n,r,i){return p(function o(){var a,s,u,l,d,c;return M(o,function(o){switch(o.u){case 1:return a=Ja.c,_(o,2,3),v(o,a(e,n),5);case 5:return s=o.J,v(o,s.arrayBuffer(),6);case 6:u=o.J;case 3:S(o),clearTimeout(i),I(o,4);break;case 2:if(l=T(o),r.mc)throw new ae(1,1,7001,e,t);if(r.Xc)throw new ae(1,1,1003,e,t);throw new ae(1,1,1002,e,l,t);case 4:return d={},c=s.headers,c.forEach(function(e,t){d[t.trim()]=e}),o["return"](Qa(d,u,s.status,e,s.url,t))}})})},Ja.isSupported=function(){return!(!e.fetch||!e.AbortController)},Ja.isSupported=Ja.isSupported,Ja.c=e.fetch,Ja.a=e.AbortController,Ja.b=e.Headers,Ja.isSupported()&&(xe("http",Ja,2),xe("https",Ja,2)),P("shaka.net.HttpXHRPlugin",Za),Za.g=e.XMLHttpRequest,xe("http",Za,1),xe("https",Za,1),es.prototype.destroy=function(){this.h=!0;var e=this.c["catch"](function(){});return this.c=Promise.resolve(),e},as.prototype.abort=function(){try{this.c.abort()}catch(e){}return this.a["catch"](function(){})},as.prototype.store=function(){return this.b},as.prototype.promise=function(){return this.a},ss.prototype.destroy=function(){return Promise.all(this.a.map(function(e){return e.abort()}))},ds.prototype.destroy=function(){var e=ze.values(this.a).map(function(e){return e.destroy()});return this.a={},Promise.all(e)},ds.prototype.init=function(){var e=this;ze.forEach(gs,function(t,n){var r=n();r&&(e.a[t]=r)});var t=ze.values(this.a).map(function(e){return e.init()});return Promise.all(t)},P("shaka.offline.StorageMuxer.register",function(e,t){gs[e]=t}),P("shaka.offline.StorageMuxer.unregister",function(e){delete gs[e]});var gs={};function ys(e){this.a=new ss(e)}function vs(e){return Promise.reject(new ae(2,9,9011,"Cannot add new value to "+e))}function _s(e,t,n,r){e=us(e.a,t);var i=e.store();return n.forEach(function(e){i["delete"](e).onsuccess=function(){return r(e)}}),e.promise()}function Es(e,t,n){e=ls(e.a,t,"readonly");var r=e.store(),i={},o=[];return n.forEach(function(e){r.get(e).onsuccess=function(t){t=t.target.result,void 0==t&&o.push(e),i[e]=t}}),e.promise().then(function(){return o.length?Promise.reject(new ae(2,9,9012,"Could not find values for "+o)):n.map(function(e){return i[e]})})}function bs(e){return{originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,periods:e.periods.map(Ts),sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata}}function Ts(e){return As(e),e.streams.forEach(function(){}),{startTime:e.startTime,streams:e.streams.map(Ss)}}function Ss(e){var t=e.Dd?xs(e.Dd):null;return{id:e.id,primary:e.primary,presentationTimeOffset:e.presentationTimeOffset,contentType:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:t,encrypted:e.encrypted,keyId:e.keyId,segments:e.segments.map(Is),variantIds:e.variantIds}}function Is(e){var t=xs(e.uri);return{startTime:e.startTime,endTime:e.endTime,dataKey:t}}function ws(e){return{data:e.data}}function xs(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new ae(2,9,9004,"Could not parse uri "+e)}function As(e){var t=e.streams.filter(function(e){return"audio"==e.contentType}),n=e.streams.filter(function(e){return"video"==e.contentType});if(!t.every(function(e){return e.variantIds})||!n.every(function(e){return e.variantIds})){t.forEach(function(e){e.variantIds=[]}),n.forEach(function(e){e.variantIds=[]});var r=0;if(n.length&&!t.length){var i=r++;n.forEach(function(e){e.variantIds.push(i)})}if(!n.length&&t.length){var o=r++;t.forEach(function(e){e.variantIds.push(o)})}n.length&&t.length&&t.forEach(function(e){n.forEach(function(t){var n=r++;e.variantIds.push(n),t.variantIds.push(n)})})}}function Ds(e,t,n,r){this.a=new ss(e),this.c=t,this.b=n,this.f=r}function Rs(e,t,n){if(e.f)return Promise.reject(new ae(1,9,9011,"Cannot add new value to "+t));e=us(e.a,t);var r=e.store(),i=[];return n.forEach(function(e){r.add(e).onsuccess=function(e){i.push(e.target.result)}}),e.promise().then(function(){return i})}function Ms(e,t,n,r){e=us(e.a,t);var i=e.store();return n.forEach(function(e){i["delete"](e).onsuccess=function(){return r(e)}}),e.promise()}function Cs(e,t,n){e=ls(e.a,t,"readonly");var r=e.store(),i={},o=[];return n.forEach(function(e){var t=r.get(e);t.onsuccess=function(){void 0==t.result&&o.push(e),i[e]=t.result}}),e.promise().then(function(){return o.length?Promise.reject(new ae(1,9,9012,"Could not find values for "+o)):n.map(function(e){return i[e]})})}function Ns(){this.c=this.b=this.a=this.f=null}function Ps(){var t=new ne,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new ae(2,9,9001,n.error)),e.preventDefault()},t}function Ls(e,t,n,r){this.a=e,this.g=t,this.f=n,this.c=r,this.b=["offline:",e,"/",t,"/",n,"/",r].join("")}function Os(e){if(e=/^offline:([a-z]+)\/([^\/]+)\/([^\/]+)\/([0-9]+)$/.exec(e),null==e)return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var r=e[3];return r&&null!=t?new Ls(t,n,r,Number(e[4])):null}function Fs(e,t){this.b=e,this.a=t}function Bs(e,t){var n=new ji(null,0);n.la(t.duration);var r=t.periods.map(function(t){return ks(e,t,n)}),i=t.drmInfo?[t.drmInfo]:[];return t.drmInfo&&r.forEach(function(e){e.variants.forEach(function(e){e.drmInfos=i})}),{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,periods:r}}function ks(e,t,n){var r=t.streams.filter(function(e){return"audio"==e.contentType}),i=t.streams.filter(function(e){return"video"==e.contentType});return r=Us(e,r,i),i=t.streams.filter(function(e){return"text"==e.contentType}).map(function(t){return Hs(e,t)}),t.streams.forEach(function(t,r){var i=t.segments.map(function(t,n){return js(e,n,t)});n.Na(i,0==r)}),{startTime:t.startTime,variants:r,textStreams:i}}function Us(e,t,n){var r={},i=[];return i.push.apply(i,t),i.push.apply(i,n),i.forEach(function(e){e.variantIds.forEach(function(e){r[e]=r[e]||{id:e,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0}})}),t.forEach(function(t){var n=Hs(e,t);t.variantIds.forEach(function(e){e=r[e],e.language=n.language,e.primary=e.primary||n.primary,e.audio=n})}),n.forEach(function(t){var n=Hs(e,t);t.variantIds.forEach(function(e){e=r[e],e.primary=e.primary||n.primary,e.video=n})}),ze.values(r)}function Hs(e,t){var n=t.segments.map(function(t,n){return js(e,n,t)}),r=new pi(n);return n={id:t.id,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return r.find(e)},getSegmentReference:function(e){return r.get(e)},initSegmentReference:null,presentationTimeOffset:t.presentationTimeOffset,mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate||void 0,kind:t.kind,encrypted:t.encrypted,keyId:t.keyId,language:t.language,label:t.label||null,type:t.contentType,primary:t.primary,trickModeVideo:null,containsEmsgBoxes:!1,roles:[],channelsCount:null},null!=t.initSegmentKey&&(n.initSegmentReference=Ks(e,t.initSegmentKey)),n}function js(e,t,n){var r=new Ls("segment",e.b,e.a,n.dataKey);return new ti(t,n.startTime,n.endTime,function(){return[r.toString()]},0,null)}function Ks(e,t){var n=new Ls("segment",e.b,e.a,t);return new ei(function(){return[n.toString()]},0,null)}function Vs(){this.a=null}function qs(e){var t=Os(e);return t&&"manifest"==t.a?qs.a(e):t&&"segment"==t.a?qs.b(t.key(),t):ue(new ae(2,1,9004,e))}function Gs(e){this.a=null;for(var t=0;t<e.textTracks.length;++t){var n=e.textTracks[t];n.mode="disabled","Shaka Player TextTrack"==n.label&&(this.a=n)}this.a||(this.a=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden"}function Ys(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,t.size=e.size;try{t.align=e.textAlign}catch(n){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),2==e.writingDirection?t.vertical="lr":3==e.writingDirection&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function zs(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var r=e.cues,i=r.length-1;0<=i;i--){var o=r[i];o&&t(o)&&e.removeCue(o)}e.mode=n}function Ws(t,n){var r=this;yr.call(this),this.ha=!1,this.f=null,this.pb=!1,this.v=null,this.o=new Pe,this.Bb=this.h=this.Db=this.b=this.m=this.a=this.A=this.g=this.j=this.i=this.s=null,this.bd=1e9,this.lb=[],this.ob=!1,this.xa=!0,this.T=this.qb=this.Ha=null,this.kc=!1,this.G=null,this.nb=[],this.K={},this.c=uu(this),this.mb={width:1/0,height:1/0},this.l=lu(),this.kb=0,this.M=this.c.preferredAudioLanguage,this.ga=this.c.preferredTextLanguage,this.Ga=this.c.preferredVariantRole,this.Ua=this.c.preferredTextRole,this.fa=this.c.preferredAudioChannelCount,n&&n(this),this.s=new Ie(this.Ke.bind(this)),t&&this.rb(t,!0),Le(this.o,e,"online",function(){r.ac()})}function Xs(e){if(!e.Ha)return Promise.resolve();var t=Promise.resolve();return e.m&&(t=e.m.stop(),e.m=null),Promise.all([t,e.Ha()])}n=ys.prototype,n.destroy=function(){return this.a.destroy()},n.hasFixedKeySpace=function(){return!0},n.addSegments=function(){return vs("segment")},n.removeSegments=function(e,t){return _s(this,"segment",e,t)},n.getSegments=function(e){return Es(this,"segment",e).then(function(e){return e.map(ws)})},n.addManifests=function(){return vs("manifest")},n.updateManifestExpiration=function(e,t){var n=us(this.a,"manifest"),r=n.store(),i=new ne;return r.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,r.put(n),i.resolve()):i.reject(new ae(2,9,9012,"Could not find values for "+e))},n.promise().then(function(){return i})},n.removeManifests=function(e,t){return _s(this,"manifest",e,t)},n.getManifests=function(e){return Es(this,"manifest",e).then(function(e){return e.map(bs)})},n.getAllManifests=function(){var e=ls(this.a,"manifest","readonly"),t={};return e.store().openCursor().onsuccess=function(e){(e=e.target.result)&&(t[e.key]=bs(e.value),e["continue"]())},e.promise().then(function(){return t})},n=Ds.prototype,n.destroy=function(){return this.a.destroy()},n.hasFixedKeySpace=function(){return this.f},n.addSegments=function(e){return Rs(this,this.c,e)},n.removeSegments=function(e,t){return Ms(this,this.c,e,t)},n.getSegments=function(e){return Cs(this,this.c,e)},n.addManifests=function(e){return Rs(this,this.b,e)},n.updateManifestExpiration=function(e,t){var n=us(this.a,this.b),r=n.store();return r.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,r.put(n,e))},n.promise()},n.removeManifests=function(e,t){return Ms(this,this.b,e,t)},n.getManifests=function(e){return Cs(this,this.b,e)},n.getAllManifests=function(){var e=ls(this.a,this.b,"readonly"),t={};return e.store().openCursor().onsuccess=function(e){(e=e.target.result)&&(t[e.key]=e.value,e["continue"]())},e.promise().then(function(){return t})},Ns.prototype.init=function(){var t=this,n=new ne,r=e.indexedDB.open("shaka_offline_db",3);return r.onsuccess=function(e){e=e.target.result,t.f=e;var r=e.objectStoreNames;r=r.contains("manifest")&&r.contains("segment")?new ys(e):null,t.a=r,r=e.objectStoreNames,r=r.contains("manifest-v2")&&r.contains("segment-v2")?new Ds(e,"segment-v2","manifest-v2",!0):null,t.b=r,r=e.objectStoreNames,e=r.contains("manifest-v3")&&r.contains("segment-v3")?new Ds(e,"segment-v3","manifest-v3",!1):null,t.c=e,n.resolve()},r.onupgradeneeded=function(e){e=e.target.result;var t={autoIncrement:!0};e.createObjectStore("manifest-v3",t),e.createObjectStore("segment-v3",t)},r.onerror=function(e){n.reject(new ae(2,9,9001,r.error)),e.preventDefault()},n},Ns.prototype.destroy=function(){var e=this;return p(function t(){return M(t,function(t){switch(t.u){case 1:if(!e.a){t.N(2);break}return v(t,e.a.destroy(),2);case 2:if(!e.b){t.N(4);break}return v(t,e.b.destroy(),4);case 4:if(!e.c){t.N(6);break}return v(t,e.c.destroy(),6);case 6:e.f&&e.f.close(),t.u=0}})})},Ns.prototype.getCells=function(){var e={};return this.a&&(e.v1=this.a),this.b&&(e.v2=this.b),this.c&&(e.v3=this.c),e},Ns.prototype.erase=function(){var e=this;return p(function t(){return M(t,function(t){switch(t.u){case 1:if(!e.a){t.N(2);break}return v(t,e.a.destroy(),2);case 2:if(!e.b){t.N(4);break}return v(t,e.b.destroy(),4);case 4:if(!e.c){t.N(6);break}return v(t,e.c.destroy(),6);case 6:return e.f&&e.f.close(),v(t,Ps(),8);case 8:return e.f=null,e.a=null,e.b=null,e.c=null,v(t,e.init(),0)}})})},gs.idb=function(){return e.indexedDB?new Ns:null},Ls.prototype.ea=function(){return this.g},Ls.prototype.O=function(){return this.f},Ls.prototype.key=function(){return this.c},Ls.prototype.toString=function(){return this.b},n=Vs.prototype,n.configure=function(){},n.start=function(e){var t=Os(e);if(this.a=t,null==t||"manifest"!=t.a)return Promise.reject(new ae(2,1,9004,t));var n=new ds;return be([n],function(){return p(function e(){var r,i,o,a;return M(e,function(e){switch(e.u){case 1:return v(e,n.init(),2);case 2:return v(e,hs(n,t.ea(),t.O()),3);case 3:return r=e.J,v(e,r.getManifests([t.key()]),4);case 4:return i=e.J,o=i[0],a=new Fs(t.ea(),t.O()),e["return"](Bs(a,o))}})})})},n.stop=function(){return Promise.resolve()},n.update=function(){},n.onExpirationUpdated=function(e,t){var n=this.a,r=new ds;return be([r],function(){return p(function i(){var o,a,s,u,l;return M(i,function(i){switch(i.u){case 1:return v(i,r.init(),2);case 2:return v(i,hs(r,n.ea(),n.O()),3);case 3:return o=i.J,v(i,o.getManifests([n.key()]),4);case 4:if(a=i.J,s=a[0],u=0<=s.sessionIds.indexOf(e),l=void 0==s.expiration||s.expiration>t,u&&l)return v(i,o.updateManifestExpiration(n.key(),t),0);i.N(0)}})})})["catch"](function(){})},Bi["application/x-offline-manifest"]=Vs,P("shaka.offline.OfflineScheme",qs),qs.a=function(e){return e={uri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},de(e)},qs.b=function(e,t){var n=new ds,r=be([n],function(){return p(function e(){var r,i,o;return M(e,function(e){switch(e.u){case 1:return v(e,n.init(),2);case 2:return v(e,hs(n,t.ea(),t.O()),3);case 3:return r=e.J,v(e,r.getSegments([t.key()]),4);case 4:return i=e.J,o=i[0],e["return"]({uri:t,data:o.data,headers:{}})}})})});return ce(r)},xe("offline",qs),P("shaka.text.SimpleTextDisplayer",Gs),Gs.prototype.remove=function(e,t){return!!this.a&&(zs(this.a,function(n){return!(n.startTime>=t||n.endTime<=e)}),!0)},Gs.prototype.remove=Gs.prototype.remove,Gs.prototype.append=function(e){for(var t=Ys,n=[],r=0;r<e.length;r++){var i=t(e[r]);i&&n.push(i)}n.slice().sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:n.indexOf(t)-n.indexOf(e)}).forEach(function(e){this.a.addCue(e)}.bind(this))},Gs.prototype.append=Gs.prototype.append,Gs.prototype.destroy=function(){return this.a&&zs(this.a,function(){return!0}),this.a=null,Promise.resolve()},Gs.prototype.destroy=Gs.prototype.destroy,Gs.prototype.isTextVisible=function(){return"showing"==this.a.mode},Gs.prototype.isTextVisible=Gs.prototype.isTextVisible,Gs.prototype.setTextVisibility=function(e){this.a.mode=e?"showing":"hidden"},Gs.prototype.setTextVisibility=Gs.prototype.setTextVisibility,L(Ws,yr),P("shaka.Player",Ws),Ws.prototype.destroy=function(){var e=this;return p(function t(){var n;return M(t,function(t){switch(t.u){case 1:return v(t,e.detach(),2);case 2:return e.ha=!0,n=Promise.all([e.o?e.o.destroy():null,e.s?e.s.destroy():null]),e.pb=!1,e.o=null,e.h=null,e.Bb=null,e.s=null,e.c=null,v(t,n,0)}})})},Ws.prototype.destroy=Ws.prototype.destroy,Ws.version="v2.4.7";var $s={};function Qs(e,t,n){return p(function r(){var i,o;return M(r,function(r){switch(r.u){case 1:return v(r,Hi(t,e.s,e.c.manifest.retryParameters,n),2);case 2:return i=r.J,e.m=new i,e.m.configure(e.c.manifest),o={networkingEngine:e.s,filterNewPeriod:e.tb.bind(e),filterAllPeriods:e.ec.bind(e),onTimelineRegionAdded:e.be.bind(e),onEvent:e.gb.bind(e),onError:e.Ta.bind(e)},r["return"](e.m.start(t,o))}})})}function Js(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}if(e.b.periods.some(function(e){return e.variants.some(t)})&&e.b.periods.forEach(function(e){e.variants=e.variants.filter(t)}),0==e.b.periods.length)throw new ae(2,4,4014)}function Zs(e){var t=e.b.presentationTimeline.U(),n=e.c.playRangeEnd,r=e.c.playRangeStart;0<r&&(e.R()||e.b.presentationTimeline.Tc(r)),n<t&&(e.R()||e.b.presentationTimeline.la(n))}function eu(e){function t(e){return(e.video?e.video.codecs.split(".")[0]:"")+"-"+(e.audio?e.audio.codecs.split(".")[0]:"")}var n=e.b.periods.reduce(function(e,t){return e.concat(t.variants)},[]);n=jn(n,e.c.preferredAudioChannelCount);var r={};n.forEach(function(e){var n=t(e);n in r||(r[n]=[]),r[n].push(e)});var i=null,o=1/0;ze.forEach(r,function(e,t){var n=0,r=0;t.forEach(function(e){n+=e.bandwidth||0,++r});var a=n/r;a<o&&(i=e,o=a)}),e.b.periods.forEach(function(e){e.variants=e.variants.filter(function(e){return t(e)==i})})}function tu(e){if(e.m&&e.m.configure(e.c.manifest),e.i&&e.i.configure(e.c.drm),e.a){e.a.configure(e.c.streaming);try{e.b.periods.forEach(e.tb.bind(e))}catch(i){e.Ta(i)}var t=Ea(e.a),n=ba(e.a),r=va(e.a);(t=Gn(t,n,r.variants))&&t.allowedByApplication&&t.allowedByKeySystem||pu(e,r)}e.h&&(e.h.configure(e.c.abr),e.c.abr.enabled&&!e.xa?e.h.enable():e.h.disable())}function nu(e){var t=[];return e.forEach(function(e){if(e){var n=e.language;e.roles.length?e.roles.forEach(function(e){t.push({language:n,role:e})}):t.push({language:n,role:""})}else t.push({language:"und",role:""})}),me(t,function(e,t){return e.language==t.language&&e.role==t.role})}function ru(e,t,n){t.video&&ou(e,t.video),t.audio&&ou(e,t.audio);var r=_a(e.a);t!=Gn(Ea(e.a),ba(e.a),r?r.variants:[])&&e.l.switchHistory.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})}function iu(e,t,n){ou(e,t),e.l.switchHistory.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null})}function ou(e,t){var n=Wn(e.b,t);e.K[n]||(e.K[n]={}),e.K[n][t.type]=t.id}function au(e){e.o&&(e.o.qa(e.f,"loadeddata"),e.o.qa(e.f,"playing"),e.o.qa(e.f,"pause"),e.o.qa(e.f,"ended"));var t=e.i,n=Promise.all([e.h?e.h.stop():null,e.j?e.j.destroy():null,e.g?e.g.destroy():null,e.A?e.A.destroy():null,e.a?e.a.destroy():null,e.m?e.m.stop():null,e.v?e.v.destroy():null]).then(function(){return t?t.destroy():null});return e.xa=!0,e.i=null,e.j=null,e.g=null,e.A=null,e.a=null,e.m=null,e.v=null,e.b=null,e.Db=null,e.nb=[],e.K={},e.l=lu(),n}function su(){return{".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0)}}}function uu(e){var t=5e5,n=1/0;return navigator.connection&&navigator.connection.type&&(t=1e6*navigator.connection.downlink,navigator.connection.saveData&&(n=360)),{drm:{retryParameters:oe(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1},manifest:{retryParameters:oe(),availabilityWindowOverride:NaN,dash:{customScheme:function(e){if(e)return null},clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,defaultPresentationDelay:10}},streaming:{retryParameters:oe(),failureCallback:e.ld.bind(e),rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1},abrFactory:Xn,textDisplayFactory:function(){return new Gs(e.f)},abr:{enabled:!0,defaultBandwidthEstimate:t,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:n,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0}}function lu(){return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:0,bufferingTime:0,switchHistory:[],stateHistory:[]}}function du(e,t,n){e.xa?(e.T=t,e.kc=n||!1):xa(e.a,t,n||!1)}function cu(e){if(e.b){var t=Date.now()/1e3;e.ob?e.l.bufferingTime+=t-e.kb:e.l.playTime+=t-e.kb,e.kb=t}}function fu(e,t){function n(e,t){if(!e)return null;var n=e.findSegmentPosition(t-o.startTime);return null==n?null:(n=e.getSegmentReference(n))?n.startTime+o.startTime:null}var r=Ea(e.a),i=ba(e.a),o=va(e.a);return r=n(r,t),i=n(i,t),null!=i&&null!=r?Math.max(i,r):null!=i?i:null!=r?r:t}function hu(e,t){return t&&t.length?(e.h.setVariants(t),e.h.chooseVariant()):(e.Ta(new ae(2,4,4012)),null)}function pu(e,t){var n=Un(t.variants,e.M,e.Ga,e.fa),r=Kn(t.textStreams,e.ga,e.Ua);(n=hu(e,n))&&(ru(e,n,!0),du(e,n,!0)),(r=r[0])&&(e.c.streaming.alwaysStreamText||e.Nb())&&(iu(e,r,!0),e.xa?e.G=r:Aa(e.a,r,!0)),mu(e)}function mu(e){Promise.resolve().then(function(){this.ha||this.dispatchEvent(new ke("adaptation"))}.bind(e))}function gu(e){Promise.resolve().then(function(){this.ha||this.dispatchEvent(new ke("trackschanged"))}.bind(e))}function yu(e){e.dispatchEvent(new ke("texttrackvisibility"))}function vu(e,t,n){var r=void 0==t.expiration?1/0:t.expiration,i=t.presentationTimeline.U();return t=Pn(t.periods[0]),{offlineUri:null,originalManifestUri:e,duration:i,size:0,expiration:r,tracks:t,appMetadata:n}}function _u(e,t){var n=ks(new Fs(e.ea(),e.O()),t.periods[0],new ji(null,0)),r=t.appMetadata||{};return n=Pn(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r}}function Eu(){this.a={}}function bu(e,t,n){return n=n.endTime-n.startTime,Tu(e,t)*n}function Tu(e,t){var n=e.a[t];return null==n&&(n=0),n}function Su(e){if(!e||e.constructor!=Ws)throw new ae(2,9,9008);this.a=e,this.b=Mu(this),this.g=!1,this.c=null,this.f=[]}function Iu(){return ms()}function wu(e,t,n,r,i,o){var a,s=vu(i,r,o),u=new es(function(t,n){s.size=n,e.b.progressCallback(s,t)});return be([u],function(){return a=Lu(e,u,t,n,r,i,o),ns(u,e.a.s)}).then(function(){return a.size=s.size,a})}function xu(e,t,n){var r,i=new ct({$a:e.a.s,onError:function(e){6013!=e.code&&(r=e)},Vb:function(){},onExpirationUpdated:function(){},onEvent:function(){}});i.configure(e.a.getConfiguration().drm);var o=Bs(new Fs(t.ea(),t.O()),n);return be([i],function(){return p(function t(){return M(t,function(t){switch(t.u){case 1:return v(t,i.init(o,e.b.usePersistentLicense),2);case 2:return v(t,ht(i,n.sessionIds),0)}})})}).then(function(){if(r)throw r})}function Au(e,t,n,r){function i(){s+=1,e.b.progressCallback(u,s/a)}var o=ju(r),a=o.length+1,s=0,u=_u(n,r);return Promise.all([t.removeSegments(o,i),t.removeManifests([n.key()],i)])}function Du(e,t,n,r){function i(){}var o,a,s,u=e.a.s,l=e.a.getConfiguration();return Hi(t,u,l.manifest.retryParameters,r).then(function(e){var r=this;ku(this),a=new ct({$a:u,onError:n,Vb:i,onExpirationUpdated:function(){},onEvent:function(){}}),a.configure(l.drm);var o={networkingEngine:u,filterAllPeriods:function(e){Cu(r,a,e)},filterNewPeriod:function(e){Nu(r,a,e)},onTimelineRegionAdded:function(){},onEvent:function(){},onError:n};return s=new e,s.configure(l.manifest),s.start(t,o)}.bind(e)).then(function(e){return ku(this),o=e,a.init(o,this.b.usePersistentLicense)}.bind(e)).then(function(){return ku(this),Pu(o)}.bind(e)).then(function(){return ku(this),pt(a)}.bind(e)).then(function(){return ku(this),s.stop()}.bind(e)).then(function(){return ku(this),{manifest:o,Fb:a}}.bind(e))["catch"](function(e){if(s)return s.stop().then(function(){throw e});throw e})}function Ru(e,t){var n=[],r=wn(e),i=[0,Sn,In],o=t.filter(function(e){return"variant"==e.type});i=i.map(function(e){return o.filter(function(t){return t=wn(t.language),Tn(e,r,t)})});for(var a,s=0;s<i.length;s++)if(i[s].length){a=i[s];break}a||(i=o.filter(function(e){return e.primary}),i.length&&(a=i)),a||(a=o,o.map(function(e){return e.language}).filter(Ve));var u=a.filter(function(e){return e.height&&480>=e.height});return u.length&&(u.sort(function(e,t){return t.height-e.height}),a=u.filter(function(e){return e.height==u[0].height})),a.sort(function(e,t){return e.bandwidth-t.bandwidth}),a.length&&n.push(a[Math.floor(a.length/2)]),n.push.apply(n,t.filter(function(e){return"text"==e.type})),n}function Mu(e){return{trackSelectionCallback:function(t){var n=e.a.getConfiguration();return Ru(n.preferredAudioLanguage,t)},progressCallback:function(e,t){if(e||t)return null},usePersistentLicense:!0}}function Cu(e,t,n){n.forEach(function(n){return Nu(e,t,n)})}function Nu(e,t,n){var r=null;if(e.c){var i=e.c.filter(function(e){return"variant"==e.type})[0];i&&(r=Fn(n,i))}var o=i=null;r&&(r.audio&&(i=r.audio),r.video&&(o=r.video)),Rn(t,i,o,n),Dn(n,e.a.getConfiguration().restrictions,{width:1/0,height:1/0})}function Pu(e){var t=e.periods.map(function(e){return e.variants}).reduce(He,[]).map(function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t}).reduce(He,[]).filter(Ve);return e=e.periods.map(function(e){return e.textStreams}).reduce(He,[]),t.push.apply(t,e),Promise.all(t.map(function(e){return e.createSegmentIndex()}))}function Lu(e,t,n,r,i,o,a){var s=new Eu,u=i.periods.map(function(o){return Ou(e,t,n,s,r,i,o)}),l=r.b,d=gt(r);if(l&&e.b.usePersistentLicense){if(!d.length)throw new ae(2,9,9007,o);l.initData=[]}return{originalManifestUri:o,duration:i.presentationTimeline.U(),size:0,expiration:r.vb(),periods:u,sessionIds:e.b.usePersistentLicense?d:[],drmInfo:l,appMetadata:a}}function Ou(e,t,n,r,i,o,a){var s=Ln(a,null,null),u=On(a,null);s=e.b.trackSelectionCallback(s.concat(u)),null==e.c&&(e.c=s,Cu(e,i,o.periods)),Ku(s),o.periods.forEach(function(e){e.variants.forEach(function(e){var t=e.audio,n=e.video;if(t&&!n&&(r.a[t.id]=t.bandwidth||e.bandwidth),!t&&n&&(r.a[n.id]=n.bandwidth||e.bandwidth),t&&n){var i=t.bandwidth||393216,o=n.bandwidth||e.bandwidth-i;0>=o&&(o=e.bandwidth),r.a[t.id]=i,r.a[n.id]=o}}),e.textStreams.forEach(function(e){r.a[e.id]=52})});var l={};s.forEach(function(e){"variant"==e.type&&null!=e.audioId&&(l[e.audioId]=!0),"variant"==e.type&&null!=e.videoId&&(l[e.videoId]=!0),"text"==e.type&&(l[e.id]=!0)});var d={};return Vu(o).filter(function(e){return!!l[e.id]}).forEach(function(i){d[i.id]=Fu(e,t,n,r,o,i)}),s.forEach(function(e){"variant"==e.type&&null!=e.audioId&&d[e.audioId].variantIds.push(e.id),"variant"==e.type&&null!=e.videoId&&d[e.videoId].variantIds.push(e.id)}),{startTime:a.startTime,streams:ze.values(d)}}function Fu(e,t,n,r,i,o){var a={id:o.id,primary:o.primary,presentationTimeOffset:o.presentationTimeOffset||0,contentType:o.type,mimeType:o.mimeType,codecs:o.codecs,frameRate:o.frameRate,kind:o.kind,language:o.language,label:o.label,width:o.width||null,height:o.height||null,initSegmentKey:null,encrypted:o.encrypted,keyId:o.keyId,segments:[],variantIds:[]};i=i.presentationTimeline.Xa();var s=o.id;return Bu(o,i,function(i){ts(t,s,Hu(e,i),bu(r,o.id,i),function(t){return n.addSegments([{data:t}]).then(function(t){e.f.push(t[0]),a.segments.push({startTime:i.startTime,endTime:i.endTime,dataKey:t[0]})})})}),(i=o.initSegmentReference)&&ts(t,s,Hu(e,i),.5*Tu(r,o.id),function(t){return n.addSegments([{data:t}]).then(function(t){e.f.push(t[0]),a.initSegmentKey=t[0]})}),a}function Bu(e,t,n){t=e.findSegmentPosition(t);for(var r=null==t?null:e.getSegmentReference(t);r;)n(r),r=e.getSegmentReference(++t)}function ku(e){if(!e.a)throw new ae(2,9,7001)}function Uu(){if(!ms())throw new ae(2,9,9e3)}function Hu(e,t){var n=e.a.getConfiguration().streaming.retryParameters;return n=Ae(t.c(),n),0==t.b&&null==t.a||(n.headers.Range="bytes="+t.b+"-"+(null==t.a?"":t.a)),n}function ju(e){var t=[];return e.periods.forEach(function(e){e.streams.forEach(function(e){null!=e.initSegmentKey&&t.push(e.initSegmentKey),e.segments.forEach(function(e){t.push(e.dataKey)})})}),t}function Ku(e){e.some(function(t){return e.some(function(e){return t!=e&&t.type==e.type&&t.kind==e.kind&&t.language==e.language})})}function Vu(e){var t={};return e.periods.forEach(function(e){e.textStreams.forEach(function(e){t[e.id]=e}),e.variants.forEach(function(e){e.audio&&(t[e.audio.id]=e.audio),e.video&&(t[e.video.id]=e.video)})}),ze.values(t)}Ws.registerSupportPlugin=function(e,t){$s[e]=t},Ws.isBrowserSupported=function(){return!!e.Promise&&!!e.Uint8Array&&!!Array.prototype.forEach&&!!e.MediaSource&&!!MediaSource.isTypeSupported&&!!e.MediaKeys&&!!e.navigator&&!!e.navigator.requestMediaKeySystemAccess&&!!e.MediaKeySystemAccess&&!!e.MediaKeySystemAccess.prototype.getConfiguration},Ws.probeSupport=function(){return Dt().then(function(e){var t=Ui(),n=dn();for(var r in e={manifest:t,media:n,drm:e},$s)e[r]=$s[r]();return e})},Ws.prototype.rb=function(e,t){var n=this;return p(function r(){return M(r,function(r){switch(r.u){case 1:if(void 0===t&&(t=!0),!n.f){r.N(2);break}return v(r,n.detach(),2);case 2:if(n.f=e,Le(n.o,n.f,"error",n.ce.bind(n)),t)return n.j=new ln(n.f),v(r,n.j.j,0);r.N(0)}})})},Ws.prototype.attach=Ws.prototype.rb,Ws.prototype.detach=function(){var e=this;return p(function t(){return M(t,function(t){switch(t.u){case 1:return e.f?v(t,e.hb(!1),2):t["return"]();case 2:e.o.qa(e.f,"error"),e.f=null,t.u=0}})})},Ws.prototype.detach=Ws.prototype.detach,Ws.prototype.load=function(e,t,n){var r=this;return p(function i(){var o,a,s,u,l,d,c,f,h,p,m;return M(i,function(i){switch(i.u){case 1:if(!r.f)throw new ae(2,7,7002);return a=new ne,s=function(){return o=new ae(2,7,7e3),a},r.dispatchEvent(new ke("loading")),u=Date.now(),_(i,2),l=r.hb(),r.Ha=s,v(i,l,4);case 4:if(r.l=lu(),Le(r.o,r.f,"playing",r.ib.bind(r)),Le(r.o,r.f,"pause",r.ib.bind(r)),Le(r.o,r.f,"ended",r.ib.bind(r)),d=r.c.abrFactory,r.h&&r.Bb==d||(r.Bb=d,r.h=new d,r.h.configure(r.c.abr)),r.v=new r.c.textDisplayFactory,r.v.setTextVisibility(r.pb),o)throw o;return c=r,v(i,Qs(r,e,n),5);case 5:if(c.b=i.J,r.Db=e,o)throw o;return Js(r),r.i=new ct({$a:r.s,onError:r.Ta.bind(r),Vb:r.Nd.bind(r),onExpirationUpdated:r.Kd.bind(r),onEvent:r.gb.bind(r)}),r.i.configure(r.c.drm),v(i,r.i.init(r.b,!1),6);case 6:if(o)throw o;return r.ec(r.b.periods),r.kb=Date.now()/1e3,r.M=r.c.preferredAudioLanguage,r.ga=r.c.preferredTextLanguage,r.fa=r.c.preferredAudioChannelCount,Zs(r),v(i,r.i.rb(r.f),7);case 7:if(o)throw o;return r.h.init(r.Le.bind(r)),r.j||(r.j=new ln(r.f)),r.j.o=r.v,r.g=new ua(r.f,r.b,r.c.streaming,void 0==t?null:t,r.Je.bind(r),r.gb.bind(r)),r.A=new ha(r.f,r.j,r.b,r.c.streaming,r.Uc.bind(r),r.gb.bind(r),r.Ie.bind(r)),r.a=new ya(r.b,{Pa:r.g,I:r.j,$a:r.s,Ac:r.Id.bind(r),zc:r.gd.bind(r),onError:r.Ta.bind(r),onEvent:r.gb.bind(r),Od:r.Pd.bind(r),ab:r.Zd.bind(r),filterNewPeriod:r.tb.bind(r),filterAllPeriods:r.ec.bind(r)}),r.a.configure(r.c.streaming),eu(r),r.dispatchEvent(new ke("streaming")),v(i,r.a.init(),8);case 8:if(o)throw o;if(r.c.streaming.startAtSegmentBoundary&&(f=fu(r,la(r.g)),oa(r.g.a,f)),r.b.periods.forEach(r.tb.bind(r)),gu(r),mu(r),h=va(r.a),p=Un(h.variants,r.M,r.Ga,r.fa),r.h.setVariants(p),h.variants.some(function(e){return e.primary}),r.nb.forEach(r.A.o.bind(r.A)),r.nb=[],Oe(r.o,r.f,"loadeddata",function(){this.l.loadLatency=(Date.now()-u)/1e3}.bind(r)),o)throw o;r.Ha=null,b(i,0);break;case 2:return m=T(i),a.resolve(),r.Ha==s&&(r.Ha=null,r.dispatchEvent(new ke("unloading"))),o?i["return"](Promise.reject(o)):i["return"](Promise.reject(m))}})})},Ws.prototype.load=Ws.prototype.load,Ws.prototype.configure=function(e,t){if(2==arguments.length&&"string"==typeof e){for(var n=e,r={},i=r,o=0,a=0;;){if(o=n.indexOf(".",o),0>o)break;0!=o&&"\\"==n[o-1]||(a=n.substring(a,o).replace(/\\\./g,"."),i[a]={},i=i[a],a=o+1),o+=1}i[n.substring(a).replace(/\\\./g,".")]=t,e=r}return n=_e(this.c,e,uu(this),su(),""),tu(this),n},Ws.prototype.configure=Ws.prototype.configure,Ws.prototype.getConfiguration=function(){var e=uu(this);return _e(e,this.c,uu(this),su(),""),e},Ws.prototype.getConfiguration=Ws.prototype.getConfiguration,Ws.prototype.we=function(){this.c=uu(this),tu(this)},Ws.prototype.resetConfiguration=Ws.prototype.we,Ws.prototype.td=function(){return this.f},Ws.prototype.getMediaElement=Ws.prototype.td,Ws.prototype.uc=function(){return this.s},Ws.prototype.getNetworkingEngine=Ws.prototype.uc,Ws.prototype.Jb=function(){return this.Db},Ws.prototype.getManifestUri=Ws.prototype.Jb,Ws.prototype.R=function(){return!!this.b&&this.b.presentationTimeline.R()},Ws.prototype.isLive=Ws.prototype.R,Ws.prototype.Aa=function(){return!!this.b&&this.b.presentationTimeline.Aa()},Ws.prototype.isInProgress=Ws.prototype.Aa,Ws.prototype.Ed=function(){if(!this.b||!this.b.periods.length)return!1;var e=this.b.periods[0].variants;return!!e.length&&!e[0].video},Ws.prototype.isAudioOnly=Ws.prototype.Ed,Ws.prototype.ye=function(){var e=0,t=0;return this.b&&(t=this.b.presentationTimeline,e=t.Ja(),t=t.na()),{start:e,end:t}},Ws.prototype.seekRange=Ws.prototype.ye,Ws.prototype.keySystem=function(){return this.i?this.i.keySystem():""},Ws.prototype.keySystem=Ws.prototype.keySystem,Ws.prototype.drmInfo=function(){return this.i?this.i.b:null},Ws.prototype.drmInfo=Ws.prototype.drmInfo,Ws.prototype.vb=function(){return this.i?this.i.vb():1/0},Ws.prototype.getExpiration=Ws.prototype.vb,Ws.prototype.xc=function(){return this.ob},Ws.prototype.isBuffering=Ws.prototype.xc,Ws.prototype.hb=function(e){var t=this;return p(function n(){return M(n,function(n){switch(n.u){case 1:return t.ha?n["return"]():(void 0===e&&(e=!0),t.dispatchEvent(new ke("unloading")),v(n,Xs(t),2));case 2:return t.qb||(t.qb=au(t).then(function(){t.Uc(!1),t.qb=null})),v(n,t.qb,3);case 3:if(e)return t.j=new ln(t.f),v(n,t.j.j,0);n.N(0)}})})},Ws.prototype.unload=Ws.prototype.hb,Ws.prototype.Va=function(){return this.g?this.g.Va():0},Ws.prototype.getPlaybackRate=Ws.prototype.Va,Ws.prototype.Ue=function(e){this.g&&aa(this.g.a,e),this.a&&wa(this.a,1!=e)},Ws.prototype.trickPlay=Ws.prototype.Ue,Ws.prototype.hd=function(){this.g&&aa(this.g.a,1),this.a&&wa(this.a,!1)},Ws.prototype.cancelTrickPlay=Ws.prototype.hd,Ws.prototype.Bd=function(){if(!this.b||!this.g)return[];var e=zn(this.b,la(this.g)),t=this.K[e]||{};return Ln(this.b.periods[e],t.audio,t.video)},Ws.prototype.getVariantTracks=Ws.prototype.Bd,Ws.prototype.Ad=function(){if(!this.b||!this.g)return[];var e=zn(this.b,la(this.g)),t=this.K[e]||{};if(!t.text){var n=Kn(this.b.periods[e].textStreams,this.ga,this.Ua);n.length&&(t.text=n[0].id)}return On(this.b.periods[e],t.text).filter(function(e){return 0>this.lb.indexOf(e.id)}.bind(this))},Ws.prototype.getTextTracks=Ws.prototype.Ad,Ws.prototype.Ce=function(e){if(this.a){var t=va(this.a);e:{for(var n=0;n<t.textStreams.length;n++)if(t.textStreams[n].id==e.id){e=t.textStreams[n];break e}e=null}e&&(this.j.l=!1,iu(this,e,!1),t=e,this.xa?this.G=t:Aa(this.a,t,!0),this.ga=e.language)}},Ws.prototype.selectTextTrack=Ws.prototype.Ce,Ws.prototype.Ae=function(){this.j.l=!0,Ia(this.a)},Ws.prototype.selectEmbeddedTextTrack=Ws.prototype.Ae,Ws.prototype.Ze=function(){return!!this.j&&this.j.l},Ws.prototype.usingEmbeddedTextTrack=Ws.prototype.Ze,Ws.prototype.De=function(e,t){if(this.a){this.c.abr.enabled&&U("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var n=va(this.a),r=Fn(n,e);r&&Bn(r)&&(ru(this,r,!1),du(this,r,t),this.M=r.language,r.audio&&r.audio.channelsCount&&(this.fa=r.audio.channelsCount),n=Un(n.variants,this.M,this.Ga,this.fa),this.h.setVariants(n))}},Ws.prototype.selectVariantTrack=Ws.prototype.De,Ws.prototype.pd=function(){if(!this.a)return[];var e=va(this.a);return e=kn(e.variants).map(function(e){return e.audio}).filter(Ve),nu(e)},Ws.prototype.getAudioLanguagesAndRoles=Ws.prototype.pd,Ws.prototype.zd=function(){if(!this.a)return[];var e=va(this.a);return nu(e.textStreams)},Ws.prototype.getTextLanguagesAndRoles=Ws.prototype.zd,Ws.prototype.od=function(){if(!this.a)return[];var e=va(this.a);return kn(e.variants).map(function(e){return e.language}).filter(Ve)},Ws.prototype.getAudioLanguages=Ws.prototype.od,Ws.prototype.yd=function(){return this.a?va(this.a).textStreams.map(function(e){return e.language}).filter(Ve):[]},Ws.prototype.getTextLanguages=Ws.prototype.yd,Ws.prototype.ze=function(e,t){if(this.a){var n=va(this.a);this.M=e,this.Ga=t||"",pu(this,n)}},Ws.prototype.selectAudioLanguage=Ws.prototype.ze,Ws.prototype.Be=function(e,t){if(this.a){var n=va(this.a);this.ga=e,this.Ua=t||"",pu(this,n)}},Ws.prototype.selectTextLanguage=Ws.prototype.Be,Ws.prototype.Nb=function(){return this.v?this.v.isTextVisible():this.pb},Ws.prototype.isTextTrackVisible=Ws.prototype.Nb,Ws.prototype.Ge=function(e){this.v&&this.v.setTextVisibility(e),this.pb=e,yu(this),!this.c.streaming.alwaysStreamText&&this.a&&(e?(e=va(this.a),(e=Kn(e.textStreams,this.ga,this.Ua)[0])&&Sa(this.a,e)):Ia(this.a))},Ws.prototype.setTextTrackVisibility=Ws.prototype.Ge,Ws.prototype.vd=function(){return this.b?new Date(1e3*this.b.presentationTimeline.g+1e3*this.f.currentTime):null},Ws.prototype.getPlayheadTimeAsDate=Ws.prototype.vd,Ws.prototype.xd=function(){return this.b?new Date(1e3*this.b.presentationTimeline.g):null},Ws.prototype.getPresentationStartTimeAsDate=Ws.prototype.xd,Ws.prototype.Hb=function(){return this.j?this.j.Hb():{total:[],audio:[],video:[],text:[]}},Ws.prototype.getBufferedInfo=Ws.prototype.Hb,Ws.prototype.getStats=function(){cu(this),this.ib();var e=null,t=null,n=this.f;if(n=n&&n.getVideoPlaybackQuality?n.getVideoPlaybackQuality():{},this.g&&this.b){var r=zn(this.b,la(this.g)),i=this.b.periods[r];(r=this.K[r])&&(e=(t=Yn(r.audio,r.video,i.variants))?t.video:null)}return e||(e={}),t||(t={}),{width:e.width||0,height:e.height||0,streamBandwidth:t.bandwidth||0,decodedFrames:Number(n.totalVideoFrames),droppedFrames:Number(n.droppedVideoFrames),estimatedBandwidth:this.h?this.h.getBandwidthEstimate():NaN,loadLatency:this.l.loadLatency,playTime:this.l.playTime,bufferingTime:this.l.bufferingTime,switchHistory:Ee(this.l.switchHistory),stateHistory:Ee(this.l.stateHistory)}},Ws.prototype.getStats=Ws.prototype.getStats,Ws.prototype.addTextTrack=function(e,t,n,r,i,o){if(!this.a)return Promise.reject();var a=va(this.a),s=this.b.periods.indexOf(a)+1,u=(s>=this.b.periods.length?this.b.presentationTimeline.U():this.b.periods[s].startTime)-a.startTime;if(1/0==u)return Promise.reject(new ae(1,4,4033));var l={id:this.bd++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(t){return 1!=t?null:new ti(1,0,u,function(){return[e]},0,null)},initSegmentReference:null,presentationTimeOffset:0,mimeType:r,codecs:i||"",kind:n,encrypted:!1,keyId:null,language:t,label:o||null,type:"text",primary:!1,trickModeVideo:null,containsEmsgBoxes:!1,roles:[],channelsCount:null};return this.lb.push(l.id),a.textStreams.push(l),Sa(this.a,l).then(function(){if(!this.ha){var e=this.b.periods.indexOf(a),r=Ta(this.a,"text");return r&&(this.K[e].text=r.id),this.lb.splice(this.lb.indexOf(l.id),1),pu(this,a),gu(this),{id:l.id,active:!1,type:"text",bandwidth:0,language:t,label:o||null,kind:n,width:null,height:null}}}.bind(this))},Ws.prototype.addTextTrack=Ws.prototype.addTextTrack,Ws.prototype.cc=function(e,t){this.mb.width=e,this.mb.height=t},Ws.prototype.setMaxHardwareResolution=Ws.prototype.cc,Ws.prototype.ac=function(){if(this.a){var e=this.a;if(e.f)e=!1;else if(e.l)e=!1;else{for(var t in e.c){var n=e.c[t];n.Ya&&(n.Ya=!1,Wa(e,n,.1))}e=!0}}else e=!1;return e},Ws.prototype.retryStreaming=Ws.prototype.ac,Ws.prototype.sd=function(){return this.b},Ws.prototype.getManifest=Ws.prototype.sd,n=Ws.prototype,n.ld=function(e){var t=[1001,1002,1003];this.R()&&0<=t.indexOf(e.code)&&(e.severity=1,this.ac())},n.ec=function(e){e.forEach(Rn.bind(null,this.i,this.a?Ea(this.a):null,this.a?ba(this.a):null));var t=ve(e,function(e){return e.variants.some(Bn)});if(0==t)throw new ae(2,4,4032);if(t<e.length)throw new ae(2,4,4011);e.forEach(function(e){if(Dn(e,this.c.restrictions,this.mb)&&this.a&&va(this.a)==e&&gu(this),!e.variants.some(Bn))throw new ae(2,4,4012)}.bind(this))},n.tb=function(e){Rn(this.i,this.a?Ea(this.a):null,this.a?ba(this.a):null,e);var t=e.variants,n=t.some(Bn);if(Dn(e,this.c.restrictions,this.mb)&&this.a&&va(this.a)==e&&gu(this),e=t.some(Bn),!n)throw new ae(2,4,4011);if(!e)throw new ae(2,4,4012);if(n=this.i?this.i.b:null)for(t=c(t),e=t.next();!e.done;e=t.next()){e=c(e.value.drmInfos);for(var r=e.next();!r.done;r=e.next())if(r=r.value,r.keySystem==n.keySystem){r=c(r.initData||[]);for(var i=r.next();!i.done;i=r.next())i=i.value,mt(this.i,i.initDataType,i.initData)}}},n.Ke=function(e,t){this.h&&this.h.segmentDownloaded(e,t)},n.Uc=function(e){if(cu(this),this.ob=e,this.ib(),this.g){var t=this.g.a;e!=t.g&&(t.g=e,aa(t,t.f))}this.dispatchEvent(new ke("buffering",{buffering:e}))},n.Ie=function(){gu(this)},n.ib=function(){if(!this.ha){var e=this.ob?"buffering":this.f.ended?"ended":this.f.paused?"paused":"playing",t=Date.now()/1e3;if(this.l.stateHistory.length){var n=this.l.stateHistory[this.l.stateHistory.length-1];if(n.duration=t-n.timestamp,e==n.state)return}this.l.stateHistory.push({timestamp:t,state:e,duration:0})}},n.Je=function(){if(this.A){var e=this.A;e.c.forEach(e.m.bind(e,!0))}this.a&&Da(this.a)},n.Id=function(e){this.xa=!0,this.h.disable();var t={audio:!1,text:!1},n=Un(e.variants,this.M,this.Ga,this.fa,t),r=Kn(e.textStreams,this.ga,this.Ua,t);if(n=hu(this,n),r=r[0]||null,this.T){e:{for(var i=this.b,o=0;o<i.periods.length;++o)for(var a=i.periods[o],s=0;s<a.variants.length;++s)if(a.variants[s]==this.T){i=o;break e}i=-1}this.b.periods[i]==e&&(n=this.T),this.T=null}return this.G&&(this.b.periods[Wn(this.b,this.G)]==e&&(r=this.G),this.G=null),n&&ru(this,n,!0),r&&(iu(this,r,!0),!_a(this.a)&&n&&n.audio&&t.text&&r.language!=n.audio.language&&(this.v.setTextVisibility(!0),yu(this))),this.c.streaming.alwaysStreamText||this.Nb()?{variant:n,text:r}:{variant:n,text:null}},n.gd=function(){this.xa=!1,this.c.abr.enabled&&this.h.enable(),this.T&&(xa(this.a,this.T,this.kc),this.T=null),this.G&&(Aa(this.a,this.G,!0),this.G=null)},n.Pd=function(){this.m&&this.m.update&&this.m.update()},n.Zd=function(){this.g&&this.g.ab()},n.Le=function(e,t){ru(this,e,!0),this.a&&(xa(this.a,e,t||!1),mu(this))},n.Ta=function(e){if(!this.ha){var t=new ke("error",{detail:e});this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)}},n.be=function(e){this.A?this.A.o(e):this.nb.push(e)},n.gb=function(e){this.dispatchEvent(e)},n.ce=function(){if(this.f.error){var e=this.f.error.code;if(1!=e){var t=this.f.error.msExtendedCode;t&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),this.Ta(new ae(2,3,3016,e,t,this.f.error.message))}}},n.Nd=function(e){var t=["output-restricted","internal-error"],n=va(this.a),r=!1,i=Object.keys(e),o=1==i.length&&"00"==i[0];i.length&&n.variants.forEach(function(n){var i=[];n.audio&&i.push(n.audio),n.video&&i.push(n.video),i.forEach(function(i){var a=n.allowedByKeySystem;i.keyId&&(i=e[o?"00":i.keyId],n.allowedByKeySystem=!!i&&0>t.indexOf(i)),a!=n.allowedByKeySystem&&(r=!0)})}),(i=Gn(Ea(this.a),ba(this.a),n.variants))&&!i.allowedByKeySystem&&pu(this,n),r&&(gu(this),n=Un(n.variants,this.M,this.Ga,this.fa),this.h.setVariants(n))},n.Kd=function(e,t){this.m&&this.m.onExpirationUpdated&&this.m.onExpirationUpdated(e,t),this.dispatchEvent(new ke("expirationupdated"))},P("shaka.offline.Storage",Su),Su.support=Iu,Su.prototype.destroy=function(){return this.a=this.b=null,Promise.resolve()},Su.prototype.destroy=Su.prototype.destroy,Su.prototype.configure=function(e){_e(this.b,e,Mu(this),{},"")},Su.prototype.configure=Su.prototype.configure,Su.prototype.store=function(e,t,n){var r=this;return p(function i(){var o,a,s,u,l,d;return M(i,function(i){switch(i.u){case 1:return Uu(),r.g?i["return"](Promise.reject(new ae(2,9,9006))):(r.g=!0,o=t||{},a=null,s=function(e){a=a||e},v(i,Du(r,e,s,n),2));case 2:if(u=i.J,l=!u.manifest.presentationTimeline.R()&&!u.manifest.presentationTimeline.Aa(),!l)throw new ae(2,9,9005,e);if(ku(r),a)throw a;return d=new ds,i["return"](be([d,u.Fb],function(){return p(function t(){var n,i,s,l,c,f,h;return M(t,function(t){switch(t.u){case 1:return E(t),v(t,d.init(),4);case 4:return ku(r),Cu(r,u.Fb,u.manifest.periods),v(t,cs(d),5);case 5:return n=t.J,ku(r),_(t,6),v(t,wu(r,n.O,u.Fb,u.manifest,e,o||{}),8);case 8:return i=t.J,ku(r),v(t,n.O.addManifests([i]),9);case 9:return s=t.J,ku(r),l=new Ls("manifest",n.path.ea,n.path.O,s[0]),t["return"](_u(l,i));case 6:return c=T(t),f=r.f,h=function(){},v(t,n.O.removeSegments(f,h),10);case 10:throw a||c;case 2:S(t),r.g=!1,r.c=null,r.f=[],I(t,0)}})})}))}})})},Su.prototype.store=Su.prototype.store,Su.prototype.remove=function(e){var t=this;Uu();var n=Os(e);if(null==n||"manifest"!=n.a)return Promise.reject(new ae(2,9,9004,e));var r=new ds;return be([r],function(){return p(function e(){var i,o,a;return M(e,function(e){switch(e.u){case 1:return v(e,r.init(),2);case 2:return v(e,hs(r,n.ea(),n.O()),3);case 3:return i=e.J,v(e,i.getManifests([n.key()]),4);case 4:return o=e.J,a=o[0],v(e,Promise.all([xu(t,n,a),Au(t,i,n,a)]),0)}})})})},Su.prototype.remove=Su.prototype.remove,Su.prototype.list=function(){function e(e,n){return p(function r(){var i;return M(r,function(r){switch(r.u){case 1:return v(r,n.getAllManifests(),2);case 2:i=r.J,ze.forEach(i,function(n,r){var i=_u(new Ls("manifest",e.ea,e.O,n),r);t.push(i)}),r.u=0}})})}Uu();var t=[],n=new ds;return be([n],function(){return p(function t(){var r;return M(t,function(t){switch(t.u){case 1:return v(t,n.init(),2);case 2:return r=Promise.resolve(),fs(n,function(t,n){r=r.then(function(){return e(t,n)})}),v(t,r,0)}})})}).then(function(){return t})},Su.prototype.list=Su.prototype.list,Su.deleteAll=function(){return p(function e(){var t;return M(e,function(e){switch(e.u){case 1:return t=new ds,E(e),v(e,ps(t),2);case 2:return S(e),v(e,t.destroy(),5);case 5:I(e,0)}})})},$s.offline=Iu,P("shaka.polyfill.installAll",function(){for(var e=0;e<Yu.length;++e)Yu[e].ed()});var qu,Gu,Yu=[];function zu(e,t){t=t||0;for(var n={priority:t,ed:e},r=0;r<Yu.length;r++)if(Yu[r].priority<t)return void Yu.splice(r,0,n);Yu.push(n)}function Wu(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"===typeof Event)var n=new Event(t,e);else n=document.createEvent("Event"),n.initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(n)}function Xu(e,t,n){if("input"==e)switch(this.type){case"range":e="change"}qu.call(this,e,t,n)}function $u(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,arguments);return t.abort=function(){},t}}function Qu(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function Ju(){var e=MediaSource.prototype.endOfStream;MediaSource.prototype.endOfStream=function(){for(var t=0,n=0;n<this.sourceBuffers.length;++n){var r=this.sourceBuffers[n];r=r.buffered.end(r.buffered.length-1),t=Math.max(t,r)}if(!isNaN(this.duration)&&t<this.duration)for(this.vc=!0,t=0;t<this.sourceBuffers.length;++t)this.sourceBuffers[t].qc=!1;return e.apply(this,arguments)};var t=!1,n=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var e=n.apply(this,arguments);return e.mediaSource_=this,e.addEventListener("updateend",Zu,!1),t||(this.addEventListener("sourceclose",el,!1),t=!0),e}}function Zu(e){var t=e.target,n=t.mediaSource_;if(n.vc){for(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.qc=!0,e=0;e<n.sourceBuffers.length;++e)if(0==n.sourceBuffers[e].qc)return;n.vc=!1}}function el(e){e=e.target;for(var t=0;t<e.sourceBuffers.length;++t)e.sourceBuffers[t].removeEventListener("updateend",Zu,!1);e.removeEventListener("sourceclose",el,!1)}function tl(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(/ *; */)[0].split("/")[1]&&e(t)}}function nl(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var n=t.split("."),r=n[0];return n.pop(),"opus"!=r&&e(t)}}function rl(){var e=MediaSource.isTypeSupported,t=/^dv(?:he|av)\./;MediaSource.isTypeSupported=function(n){for(var r=n.split(/ *; */),i=r[0],o={},a=1;a<r.length;++a){var s=r[a].split("="),u=s[0];s=s[1].replace(/"(.*)"/,"$1"),o[u]=s}if(r=o.codecs,!r)return e(n);var l=!1,d=!1;for(var c in n=r.split(",").filter(function(e){return t.test(e)?(d=!0,!1):(/^(hev|hvc)1\.2/.test(e)&&(l=!0),!0)}),d&&(l=!1),o.codecs=n.join(","),l&&(o.eotf="smpte2084"),o)i+="; "+c+'="'+o[c]+'"';return cast.__platform__.canDisplayType(i)}}function il(e){this.f=[],this.b=[],this.a=[],(new ai).Y("pssh",this.c.bind(this)).parse(e.buffer)}function ol(e,t){try{var n=new al(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function al(e,t){this.keySystem=e;for(var n=!1,r=0;r<t.length;++r){var i=t[r],o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label},a=!1;if(i.audioCapabilities)for(var s=0;s<i.audioCapabilities.length;++s){var u=i.audioCapabilities[s];if(u.contentType){a=!0;var l=u.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,l)&&(o.audioCapabilities.push(u),n=!0)}}if(i.videoCapabilities)for(s=0;s<i.videoCapabilities.length;++s)u=i.videoCapabilities[s],u.contentType&&(a=!0,l=u.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,l)&&(o.videoCapabilities.push(u),n=!0));if(a||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==i.persistentState&&(n=!1),n)return void(this.a=o)}throw n=Error("Unsupported keySystem"),n.name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function sl(e){var t=this.mediaKeys;return t&&t!=e&&ll(t,null),delete this.mediaKeys,(this.mediaKeys=e)?ll(e,this):Promise.resolve()}function ul(e){this.a=new MSMediaKeys(e),this.b=new Pe}function ll(e,t){function n(){t.msSetMediaKeys(r.a),t.removeEventListener("loadedmetadata",n)}if(Fe(e.b),!t)return Promise.resolve();Le(e.b,t,"msneedkey",cl);var r=e;try{return 1<=t.readyState?t.msSetMediaKeys(e.a):t.addEventListener("loadedmetadata",n),Promise.resolve()}catch(i){return Promise.reject(i)}}function dl(e){yr.call(this),this.c=null,this.g=e,this.b=this.a=null,this.f=new Pe,this.sessionId="",this.expiration=NaN,this.closed=new ne,this.keyStatuses=new pl}function cl(e){if(e.initData){var t=document.createEvent("CustomEvent");if(t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",e=e.initData){var n=new il(e);if(!(1>=n.a.length)){for(var r=[],i=0;i<n.a.length;i++)r.push(e.subarray(n.a[i].start,n.a[i].end+1));for(e=me(r,fl),r=n=0;r<e.length;r++)n+=e[r].length;for(n=new Uint8Array(n),i=r=0;i<e.length;i++)n.set(e[i],r),r+=e[i].length;e=n}}t.initData=e,this.dispatchEvent(t)}}function fl(e,t){return lt(e,t)}function hl(e,t){var n=e.keyStatuses;n.size=void 0==t?0:1,n.a=t,e.dispatchEvent(new ke("keystatuseschange"))}function pl(){this.size=0,this.a=void 0}function ml(){return Promise.reject(Error("The key system specified is not supported."))}function gl(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function yl(){throw new TypeError("Illegal constructor.")}function vl(){throw new TypeError("Illegal constructor.")}P("shaka.polyfill.register",zu),zu(function(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,t=Document.prototype,t.exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitExitFullscreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Wu),document.addEventListener("webkitfullscreenerror",Wu),document.addEventListener("mozfullscreenchange",Wu),document.addEventListener("mozfullscreenerror",Wu),document.addEventListener("MSFullscreenChange",Wu),document.addEventListener("MSFullscreenError",Wu)}}),zu(function(){var t=navigator.userAgent;t&&0<=t.indexOf("CrKey")&&delete e.indexedDB}),zu(function(){0>navigator.userAgent.indexOf("Trident/")||HTMLInputElement.prototype.addEventListener==Xu||(qu=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=Xu)}),zu(function(){}),zu(function(){if(e.MediaSource)if(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType)rl();else if(navigator.vendor&&0<=navigator.vendor.indexOf("Apple")){var t=navigator.appVersion;tl(),0<=t.indexOf("Version/8")?e.MediaSource=null:0<=t.indexOf("Version/9")?$u():0<=t.indexOf("Version/10")?($u(),Ju()):(t.includes("Version/11")||t.includes("Version/12"))&&($u(),Qu())}else(navigator.userAgent||"").includes("Tizen")&&nl()}),il.prototype.c=function(e){if(!(1<e.version)){var t=ut(e.reader.Da(16)),n=[];if(0<e.version)for(var r=e.reader.B(),i=0;i<r;++i){var o=ut(e.reader.Da(16));n.push(o)}r=e.reader.B(),e.reader.F(r),this.b.push.apply(this.b,n),this.f.push(t),this.a.push({start:e.start,end:e.start+e.size-1})}},al.prototype.createMediaKeys=function(){var e=new ul(this.keySystem);return Promise.resolve(e)},al.prototype.getConfiguration=function(){return this.a},ul.prototype.createSession=function(e){var t=e||"temporary";if("temporary"!=t)throw new TypeError("Session type "+e+" is unsupported on this platform.");return new dl(this.a,t)},ul.prototype.setServerCertificate=function(){return Promise.resolve(!1)},L(dl,yr),n=dl.prototype,n.generateRequest=function(e,t){this.a=new ne;try{this.c=this.g.createSession("video/mp4",new Uint8Array(t),null),Le(this.f,this.c,"mskeymessage",this.Td.bind(this)),Le(this.f,this.c,"mskeyadded",this.Rd.bind(this)),Le(this.f,this.c,"mskeyerror",this.Sd.bind(this)),hl(this,"status-pending")}catch(n){this.a.reject(n)}return this.a},n.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},n.update=function(e){this.b=new ne;try{this.c.update(new Uint8Array(e))}catch(t){this.b.reject(t)}return this.b},n.close=function(){try{this.c.close(),this.closed.resolve(),Fe(this.f)}catch(e){this.closed.reject(e)}return this.closed},n.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},n.Td=function(e){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new ke("message",{messageType:void 0==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},n.Rd=function(){this.a?(hl(this,"usable"),this.a.resolve(),this.a=null):this.b&&(hl(this,"usable"),this.b.resolve(),this.b=null)},n.Sd=function(){var e=Error("EME PatchedMediaKeysMs key error");if(e.errorCode=this.c.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.b)this.b.reject(e),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:hl(this,"output-not-allowed");break;default:hl(this,"internal-error")}},n=pl.prototype,n.forEach=function(e){this.a&&e(this.a,Gu)},n.get=function(e){if(this.has(e))return this.a},n.has=function(e){var t=Gu;return!(!this.a||!lt(new Uint8Array(e),new Uint8Array(t)))},n.entries=function(){},n.keys=function(){},n.values=function(){},zu(function(){!e.HTMLVideoElement||!e.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(Gu=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=sl,e.MediaKeys=ul,e.MediaKeySystemAccess=al,navigator.requestMediaKeySystemAccess=ol)}),yl.prototype.createSession=function(){},yl.prototype.setServerCertificate=function(){},vl.prototype.getConfiguration=function(){},vl.prototype.createMediaKeys=function(){},zu(function(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=ml,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=gl,e.MediaKeys=yl,e.MediaKeySystemAccess=vl)},-10);var _l,El="";function bl(e){var t=El;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function Tl(e,t){try{var n=new Il(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function Sl(e){var t=this.mediaKeys;return t&&t!=e&&xl(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&xl(e,this),Promise.resolve()}function Il(e,t){this.a=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.a="webkit-org.w3.clearkey",n=!1);var r=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video");for(var o=0;o<t.length;++o){var a=t[o],s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:a.initDataTypes,sessionTypes:["temporary"],label:a.label},u=!1;if(a.audioCapabilities)for(var l=0;l<a.audioCapabilities.length;++l){var d=a.audioCapabilities[l];if(d.contentType){u=!0;var c=d.contentType.split(";")[0];i.canPlayType(c,this.a)&&(s.audioCapabilities.push(d),r=!0)}}if(a.videoCapabilities)for(l=0;l<a.videoCapabilities.length;++l)d=a.videoCapabilities[l],d.contentType&&(u=!0,i.canPlayType(d.contentType,this.a)&&(s.videoCapabilities.push(d),r=!0));if(u||(r=i.canPlayType("video/mp4",this.a)||i.canPlayType("video/webm",this.a)),"required"==a.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):r=!1),r)return void(this.b=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),n=Error(n),n.name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function wl(e){this.g=e,this.b=null,this.a=new Pe,this.c=[],this.f={}}function xl(e,t){e.b=t,Fe(e.a);var n=El;t&&(Le(e.a,t,n+"needkey",e.ge.bind(e)),Le(e.a,t,n+"keymessage",e.fe.bind(e)),Le(e.a,t,n+"keyadded",e.de.bind(e)),Le(e.a,t,n+"keyerror",e.ee.bind(e)))}function Al(e,t){var n=e.f[t];return n||((n=e.c.shift())?(n.sessionId=t,e.f[t]=n):null)}function Dl(e,t,n){yr.call(this),this.f=e,this.h=!1,this.a=this.b=null,this.c=t,this.g=n,this.sessionId="",this.expiration=NaN,this.closed=new ne,this.keyStatuses=new Cl}function Rl(e,t,n){if(e.h)return Promise.reject(Error("The session is already initialized."));e.h=!0;try{if("persistent-license"==e.g)if(n)var r=new Uint8Array(et("LOAD_SESSION|"+n));else{var o=et("PERSISTENT|"),a=new Uint8Array(o.byteLength+t.byteLength);a.set(new Uint8Array(o),0),a.set(new Uint8Array(t),o.byteLength),r=a}else r=new Uint8Array(t)}catch(i){return Promise.reject(i)}e.b=new ne;var s=bl("generateKeyRequest");try{e.f[s](e.c,r)}catch(i){if("InvalidStateError"!=i.name)return e.b=null,Promise.reject(i);setTimeout(function(){try{this.f[s](this.c,r)}catch(e){this.b.reject(e),this.b=null}}.bind(e),10)}return e.b}function Ml(e,t){var n=e.keyStatuses;n.size=void 0==t?0:1,n.a=t,e.dispatchEvent(new ke("keystatuseschange"))}function Cl(){this.size=0,this.a=void 0}function Nl(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Pl(t,n,r){return new e.TextTrackCue(t,n,r)}function Ll(t,n,r){return new e.TextTrackCue(t+"-"+n+"-"+r,t,n,r)}function Ol(){}Il.prototype.createMediaKeys=function(){var e=new wl(this.a);return Promise.resolve(e)},Il.prototype.getConfiguration=function(){return this.b},n=wl.prototype,n.createSession=function(e){var t=e||"temporary";if("temporary"!=t&&"persistent-license"!=t)throw new TypeError("Session type "+e+" is unsupported on this platform.");return e=this.b||document.createElement("video"),e.src||(e.src="about:blank"),t=new Dl(e,this.g,t),this.c.push(t),t},n.setServerCertificate=function(){return Promise.resolve(!1)},n.ge=function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="webm",t.initData=e.initData,this.b.dispatchEvent(t)},n.fe=function(e){var t=Al(this,e.sessionId);t&&(e=new ke("message",{messageType:void 0==t.keyStatuses.a?"licenserequest":"licenserenewal",message:e.message}),t.b&&(t.b.resolve(),t.b=null),t.dispatchEvent(e))},n.de=function(e){(e=Al(this,e.sessionId))&&(Ml(e,"usable"),e.a&&e.a.resolve(),e.a=null)},n.ee=function(e){var t=Al(this,e.sessionId);if(t){var n=Error("EME v0.1b key error");n.errorCode=e.errorCode,n.errorCode.systemCode=e.systemCode,!e.sessionId&&t.b?(n.method="generateRequest",45==e.systemCode&&(n.message="Unsupported session type."),t.b.reject(n),t.b=null):e.sessionId&&t.a?(n.method="update",t.a.reject(n),t.a=null):(n=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Ml(t,"output-restricted"):Ml(t,1==n?"expired":"internal-error"))}},L(Dl,yr),n=Dl.prototype,n.fc=function(e,t){if(this.a)this.a.then(this.fc.bind(this,e,t))["catch"](this.fc.bind(this,e,t));else{if(this.a=e,"webkit-org.w3.clearkey"==this.c){var n=Qe(t),r=JSON.parse(n);"oct"!=r.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),n=at(r.keys[0].k),r=at(r.keys[0].kid)}else n=new Uint8Array(t),r=null;var i=bl("addKey");try{this.f[i](this.c,n,r,this.sessionId)}catch(o){this.a.reject(o),this.a=null}}},n.generateRequest=function(e,t){return Rl(this,t,null)},n.load=function(e){return"persistent-license"==this.g?Rl(this,null,e):Promise.reject(Error("Not a persistent session."))},n.update=function(e){var t=new ne;return this.fc(t,e),t},n.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=bl("cancelKeyRequest");try{this.f[e](this.c,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},n.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},n=Cl.prototype,n.forEach=function(e){this.a&&e(this.a,_l)},n.get=function(e){if(this.has(e))return this.a},n.has=function(e){var t=_l;return!(!this.a||!lt(new Uint8Array(e),new Uint8Array(t)))},n.entries=function(){},n.keys=function(){},n.values=function(){},zu(function(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)El="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;_l=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=Tl,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Sl,e.MediaKeys=wl,e.MediaKeySystemAccess=Il}}),zu(function(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this,arguments);return e&&e["catch"](function(){}),e}}}),zu(function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in t&&(t.getVideoPlaybackQuality=Nl)}}),zu(function(){if(!e.VTTCue&&e.TextTrackCue){var t=TextTrackCue.length;if(3==t)e.VTTCue=Pl;else if(6==t)e.VTTCue=Ll;else{try{var n=!!Pl(1,2,"")}catch(r){n=!1}n&&(e.VTTCue=Pl)}}}),Ol.prototype.parseInit=function(){},Ol.prototype.parseMedia=function(e,t){var n=Qe(e),r=[],i=new DOMParser,o=null;try{o=i.parseFromString(n,"text/xml")}catch(m){throw new ae(2,2,2005)}if(o){if(!(i=o.getElementsByTagName("tt")[0]))throw new ae(2,2,2005);o=Nr(i,"http://www.w3.org/ns/ttml#parameter","frameRate");var a=Nr(i,"http://www.w3.org/ns/ttml#parameter","subFrameRate"),s=Nr(i,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier"),u=Nr(i,"http://www.w3.org/ns/ttml#parameter","tickRate");if(n=i.getAttribute("xml:space")||"default","default"!=n&&"preserve"!=n)throw new ae(2,2,2005);n="default"==n,o=new id(o,a,s,u),a=zl(i.getElementsByTagName("styling")[0]),s=zl(i.getElementsByTagName("layout")[0]),u=[];for(var l=0;l<s.length;l++){var d,c=s[l],f=a,h=new Jt,p=c.getAttribute("xml:id");if(p)h.id=p,(d=Zl(c,f,"extent"))&&(d=(p=Fl.exec(d))||kl.exec(d),null!=d&&(h.width=Number(d[1]),h.height=Number(d[2]),h.widthUnits=p?Zt:0,h.heightUnits=p?Zt:0)),(c=Zl(c,f,"origin"))&&(d=(p=Fl.exec(c))||kl.exec(c),null!=d&&(h.viewportAnchorX=Number(d[1]),h.viewportAnchorY=Number(d[2]),h.viewportAnchorUnits=p?Zt:0));else h=null;h&&u.push(h)}for(i=zl(i.getElementsByTagName("body")[0]),l=0;l<i.length;l++)(h=Xl(i[l],t.periodStart,o,a,s,u,n))&&r.push(h)}return r};var Fl=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,Bl=/^(\d+px|\d+em)$/,kl=/^(\d+)px (\d+)px$/,Ul=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Hl=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,jl=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Kl=/^(\d*(?:\.\d*)?)f$/,Vl=/^(\d*(?:\.\d*)?)t$/,ql=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,Gl={left:"start",center:zt,right:"end",start:"start",end:"end"},Yl={left:"line-left",center:"center",right:"line-right"};function zl(e){var t=[];if(!e)return t;for(var n=e.childNodes,r=0;r<n.length;r++){var i="span"==n[r].nodeName&&"p"==e.nodeName;n[r].nodeType!=Node.ELEMENT_NODE||"br"==n[r].nodeName||i||(i=zl(n[r]),t=t.concat(i))}return t.length||t.push(e),t}function Wl(e,t){for(var n=e.childNodes,r=0;r<n.length;r++)if("br"==n[r].nodeName&&0<r)n[r-1].textContent+="\n";else if(0<n[r].childNodes.length)Wl(n[r],t);else if(t){var i=n[r].textContent.trim();i=i.replace(/\s+/g," "),n[r].textContent=i}}function Xl(e,t,n,r,i,o,a){if(!e.hasAttribute("begin")&&!e.hasAttribute("end")&&/^\s*$/.test(e.textContent))return null;Wl(e,a),a=nd(e.getAttribute("begin"),n);var s=nd(e.getAttribute("end"),n);n=nd(e.getAttribute("dur"),n);var u=e.textContent;if(null==s&&null!=n&&(s=a+n),null==a||null==s)throw new ae(2,2,2001);if(t=new Ut(a+t,s+t,u),(i=td(e,"region",i))&&i.getAttribute("xml:id")){var l=i.getAttribute("xml:id");o=o.filter(function(e){return e.id==l}),t.region=o[0]}return $l(t,e,i,r),t}function $l(e,t,n,r){"rtl"==Jl(t,n,r,"direction")&&(e.writingDirection=1);var i=Jl(t,n,r,"writingMode");"tb"==i||"tblr"==i?e.writingDirection=2:"tbrl"==i?e.writingDirection=3:"rltb"==i||"rl"==i?e.writingDirection=1:i&&(e.writingDirection=Gt),(i=Jl(t,n,r,"textAlign"))&&(e.positionAlign=Yl[i],e.lineAlign=Gl[i],e.textAlign=Kt[i.toUpperCase()]),(i=Jl(t,n,r,"displayAlign"))&&(e.displayAlign=qt[i.toUpperCase()]),(i=Jl(t,n,r,"color"))&&(e.color=i),(i=Jl(t,n,r,"backgroundColor"))&&(e.backgroundColor=i),(i=Jl(t,n,r,"fontFamily"))&&(e.fontFamily=i),(i=Jl(t,n,r,"fontWeight"))&&"bold"==i&&(e.fontWeight=700),(i=Jl(t,n,r,"wrapOption"))&&"noWrap"==i&&(e.wrapLine=!1),(i=Jl(t,n,r,"lineHeight"))&&i.match(Bl)&&(e.lineHeight=i),(i=Jl(t,n,r,"fontSize"))&&i.match(Bl)&&(e.fontSize=i),(i=Jl(t,n,r,"fontStyle"))&&(e.fontStyle=Qt[i.toUpperCase()]),(n=Zl(n,r,"textDecoration"))&&Ql(e,n),(t=ed(t,r,"textDecoration"))&&Ql(e,t)}function Ql(e,t){for(var n=t.split(" "),r=0;r<n.length;r++)switch(n[r]){case"underline":0>e.textDecoration.indexOf("underline")&&e.textDecoration.push("underline");break;case"noUnderline":0<=e.textDecoration.indexOf("underline")&&ye(e.textDecoration,"underline");break;case"lineThrough":0>e.textDecoration.indexOf("lineThrough")&&e.textDecoration.push("lineThrough");break;case"noLineThrough":0<=e.textDecoration.indexOf("lineThrough")&&ye(e.textDecoration,"lineThrough");break;case"overline":0>e.textDecoration.indexOf("overline")&&e.textDecoration.push("overline");break;case"noOverline":0<=e.textDecoration.indexOf("overline")&&ye(e.textDecoration,"overline")}}function Jl(e,t,n,r){return(e=ed(e,n,r))?e:Zl(t,n,r)}function Zl(e,t,n){for(var r=zl(e),i=0;i<r.length;i++){var o=Nr(r[i],"http://www.w3.org/ns/ttml#styling",n);if(o)return o}return(e=td(e,"style",t))?Nr(e,"http://www.w3.org/ns/ttml#styling",n):null}function ed(e,t,n){return(e=td(e,"style",t))?Nr(e,"http://www.w3.org/ns/ttml#styling",n):null}function td(e,t,n){if(!e||1>n.length)return null;var r=null,i=e;for(e=null;i&&!(e=i.getAttribute(t))&&(i=i.parentNode,i instanceof Element););if(t=e)for(e=0;e<n.length;e++)if(n[e].getAttribute("xml:id")==t){r=n[e];break}return r}function nd(e,t){var n=null;if(Ul.test(e)){n=Ul.exec(e);var r=Number(n[1]),i=Number(n[2]),o=Number(n[3]),a=Number(n[4]);a+=(Number(n[5])||0)/t.b,o+=a/t.frameRate,n=o+60*i+3600*r}else Hl.test(e)?n=rd(Hl,e):jl.test(e)?n=rd(jl,e):Kl.test(e)?(n=Kl.exec(e),n=Number(n[1])/t.frameRate):Vl.test(e)?(n=Vl.exec(e),n=Number(n[1])/t.a):ql.test(e)&&(n=rd(ql,e));return n}function rd(e,t){var n=e.exec(t);return null==n||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function id(e,t,n,r){this.frameRate=Number(e)||30,this.b=Number(t)||1,this.a=Number(r),0==this.a&&(this.a=e?this.frameRate*this.b:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=e[1]/e[2])}function od(){this.a=new Ol}function ad(){}function sd(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],e.textAlign="middle"==t?jt:Kt[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingDirection="lr"==r[1]?2:3:(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(r=/^region:(.*)$/.exec(t))?(t=ud(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Wt[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Yt,e.line=Number(n[1]),n[2]&&(e.lineAlign=Wt[n[2].toUpperCase()]))}function ud(e,t){var n=e.filter(function(e){return e.id==t});return n.length?n[0]:null}function ld(e){if(e=po(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g),null==e)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function dd(){this.a=null}function cd(e,t,n){var r,i,o;return(new ai).C("payl",li(function(e){r=Qe(e)})).C("iden",li(function(e){i=Qe(e)})).C("sttg",li(function(e){o=Qe(e)})).parse(e),r?fd(r,i,o,t,n):null}function fd(e,t,n,r,i){if(e=new Ut(r,i,e),t&&(e.id=t),n)for(t=new fo(n),n=mo(t);n;)sd(e,n,[]),ho(t),n=mo(t);return e}sn["application/ttml+xml"]=Ol,od.prototype.parseInit=function(e){var t=!1;if((new ai).C("moov",si).C("trak",si).C("mdia",si).C("minf",si).C("stbl",si).Y("stsd",ui).C("stpp",function(e){t=!0,e.parser.stop()}).parse(e),!t)throw new ae(2,2,2007)},od.prototype.parseMedia=function(e,t){var n=!1,r=[];if((new ai).C("mdat",li(function(e){n=!0,r=r.concat(this.a.parseMedia(e,t))}.bind(this))).parse(e),!n)throw new ae(2,2,2007);return r},sn['application/mp4; codecs="stpp"']=od,sn['application/mp4; codecs="stpp.TTML.im1t"']=od,ad.prototype.parseInit=function(){},ad.prototype.parseMedia=function(e,t){var n=Qe(e);if(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n"),n=n.split(/\n{2,}/m),!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new ae(2,2,2e3);var r=t.segmentStart;if(null==r&&(r=0,0<=n[0].indexOf("X-TIMESTAMP-MAP"))){var i=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),o=n[0].match(/MPEGTS:(\d+)/m);i&&o&&(r=ld(new fo(i[1])),r=t.periodStart+(Number(o[1])/9e4-r))}o=[];var a=n[0].split("\n");for(i=1;i<a.length;i++)if(/^Region:/.test(a[i])){var s=new fo(a[i]),u=new Jt;mo(s),ho(s);for(var l=mo(s);l;){var d=u,c=l;(l=/^id=(.*)$/.exec(c))?d.id=l[1]:(l=/^width=(\d{1,2}|100)%$/.exec(c))?d.width=Number(l[1]):(l=/^lines=(\d+)$/.exec(c))?(d.height=Number(l[1]),d.heightUnits=2):(l=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(c))?(d.regionAnchorX=Number(l[1]),d.regionAnchorY=Number(l[2])):(l=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(c))?(d.viewportAnchorX=Number(l[1]),d.viewportAnchorY=Number(l[2])):/^scroll=up$/.exec(c)&&(d.scroll="up"),ho(s),l=mo(s)}o.push(u)}for(i=[],s=1;s<n.length;s++){if(a=n[s].split("\n"),l=a,c=r,a=o,1==l.length&&!l[0]||/^NOTE($|[ \t])/.test(l[0])||"STYLE"==l[0])a=null;else{u=null,0>l[0].indexOf("--\x3e")&&(u=l[0],l.splice(0,1)),d=new fo(l[0]);var f=ld(d),h=po(d,/[ \t]+--\x3e[ \t]+/g),p=ld(d);if(null==f||null==h||null==p)throw new ae(2,2,2001);for(l=new Ut(f+c,p+c,l.slice(1).join("\n").trim()),ho(d),c=mo(d);c;)sd(l,c,a),ho(d),c=mo(d);null!=u&&(l.id=u),a=l}a&&i.push(a)}return i},sn["text/vtt"]=ad,sn['text/vtt; codecs="vtt"']=ad,dd.prototype.parseInit=function(e){var t=!1;if((new ai).C("moov",si).C("trak",si).C("mdia",si).Y("mdhd",function(e){0==e.version?(e.reader.F(4),e.reader.F(4),this.a=e.reader.B(),e.reader.F(4)):(e.reader.F(8),e.reader.F(8),this.a=e.reader.B(),e.reader.F(8)),e.reader.F(4)}.bind(this)).C("minf",si).C("stbl",si).Y("stsd",ui).C("wvtt",function(){t=!0}).parse(e),!this.a)throw new ae(2,2,2008);if(!t)throw new ae(2,2,2008)},dd.prototype.parseMedia=function(e,t){var n=this;if(!this.a)throw new ae(2,2,2008);var r,i=0,o=[],a=[],s=!1,u=!1,l=!1,d=null;if((new ai).C("moof",si).C("traf",si).Y("tfdt",function(e){s=!0,i=0==e.version?e.reader.B():e.reader.Ra()}).Y("tfhd",function(e){var t=e.flags;e=e.reader,e.F(4),1&t&&e.F(8),2&t&&e.F(4),d=8&t?e.B():null}).Y("trun",function(e){u=!0;var t=e.version,n=e.flags;e=e.reader;var r=e.B();1&n&&e.F(4),4&n&&e.F(4);for(var i=[],a=0;a<r;a++){var s={duration:null,sampleSize:null,gc:null};256&n&&(s.duration=e.B()),512&n&&(s.sampleSize=e.B()),1024&n&&e.F(4),2048&n&&(s.gc=0==t?e.B():e.Lc()),i.push(s)}o=i}).C("mdat",li(function(e){l=!0,r=e})).parse(e),!l&&!s&&!u)throw new ae(2,2,2008);var c=i,f=new DataView(r.buffer,r.byteOffset,r.byteLength),h=new ni(f,0);return o.forEach(function(e){var r=e.duration||d,o=e.gc?i+e.gc:c;c=o+(r||0);var s=0;do{var u=h.B();s+=u;var l=h.B(),f=null;"vttc"==ci(l)?8<u&&(f=h.Da(u-8)):h.F(u-8),r&&f&&a.push(cd(f,t.periodStart+o/n.a,t.periodStart+c/n.a))}while(e.sampleSize&&s<e.sampleSize)}),a.filter(Ke)},sn['application/mp4; codecs="wvtt"']=dd}.call(r,n,n),r.shaka)t[i]=r.shaka[i]})()}).call(this,n("c8ba"))},4517:function(e,t,n){var r=n("a22a");e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},4526:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("5beb");function s(e,t){var n=e.timelineConverter,r=void 0;function i(e,r,i,o){var s=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,u=e.segmentDuration,l=e.segmentAvailabilityRange,d=[],c=null,f=null,h=void 0,p=void 0,m=void 0,g=void 0,y=void 0;for(y=e.startNumber,h=isNaN(u)&&!t?{start:y,end:y}:(0,a.decideSegmentListRangeForTemplate)(n,t,e,r,i,o),m=h.start,g=h.end,p=m;p<=g;p++)f=(0,a.getIndexBasedSegment)(n,t,e,p),f.replacementTime=(y+p-1)*e.segmentDuration,c=s.media,c=(0,a.replaceTokenForTemplate)(c,"Number",f.replacementNumber),c=(0,a.replaceTokenForTemplate)(c,"Time",f.replacementTime),f.media=c,d.push(f),f=null;return isNaN(u)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((l.end-l.start)/u),d}return r={getSegments:i},r}s.__dashjs_factory_name="TemplateSegmentsGetter";var u=o["default"].getClassFactory(s);t["default"]=u,e.exports=t["default"]},4588:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},"45f2":function(e,t,n){var r=n("d9f6").f,i=n("07e3"),o=n("5168")("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},"45f6":function(e,t,n){"use strict";function r(){var e=void 0,t="http://schemas.xmlsoap.org/soap/envelope/";function n(e){var t=String.fromCharCode.apply(null,new Uint8Array(e)),n=decodeURIComponent(escape(t));return n}function r(e){if(window.DOMParser){var r=n(e),i=new window.DOMParser,o=i.parseFromString(r,"text/xml"),a=o?o.getElementsByTagNameNS(t,"Envelope")[0]:null,s=a?a.getElementsByTagNameNS(t,"Body")[0]:null,u=s?s.getElementsByTagNameNS(t,"Fault")[0]:null;if(u)return null}return e}function i(e){var r="",i="",o="",a=-1,s=-1;if(window.DOMParser){var u=n(e),l=new window.DOMParser,d=l.parseFromString(u,"text/xml"),c=d?d.getElementsByTagNameNS(t,"Envelope")[0]:null,f=c?c.getElementsByTagNameNS(t,"Body")[0]:null,h=f?f.getElementsByTagNameNS(t,"Fault")[0]:null,p=h?h.getElementsByTagName("detail")[0]:null,m=p?p.getElementsByTagName("Exception")[0]:null,g=null;if(null===h)return u;g=h.getElementsByTagName("faultstring")[0].firstChild,r=g?g.nodeValue:null,null!==m&&(g=m.getElementsByTagName("StatusCode")[0],i=g?g.firstChild.nodeValue:null,g=m.getElementsByTagName("Message")[0],o=g?g.firstChild.nodeValue:null,a=o?o.lastIndexOf("[")+1:-1,s=o?o.indexOf("]"):-1,o=o?o.substring(a,s):"")}var y="code: "+i+", name: "+r;return o&&(y+=", message: "+o),y}function o(e){return e}function a(){return"POST"}function s(){return"arraybuffer"}function u(e){return r.call(this,e)}function l(e){return i.call(this,e)}return e={getServerURLFromMessage:o,getHTTPMethod:a,getResponseType:s,getLicenseMessage:u,getErrorResponse:l},e}Object.defineProperty(t,"__esModule",{value:!0}),r.__dashjs_factory_name="PlayReady",t["default"]=dashjs.FactoryMaker.getSingletonFactory(r),e.exports=t["default"]},4630:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"467b":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=void 0,t=[],n={},r={};function i(e,t,n,r){!r[e]&&t&&(r[e]={instance:t,override:n})}function o(e,n){for(var r in t){var i=t[r];if(i.context===e&&i.name===n)return i.instance}return null}function a(e,n,r){for(var i in t){var o=t[i];if(o.context===e&&o.name===n)return void(t[i].instance=r)}t.push({name:n,context:e,instance:r})}function s(e,t){return t[e]}function u(e,t,n){e in n&&(n[e]=t)}function l(e,t){u(e,t,r)}function d(e){return s(e,r)}function c(e){var t=s(e.__dashjs_factory_name,r);return t||(t=function(t){return void 0===t&&(t={}),{create:function(){return m(e,t,arguments)}}},r[e.__dashjs_factory_name]=t),t}function f(e,t){u(e,t,n)}function h(e){return s(e,n)}function p(e){var r=s(e.__dashjs_factory_name,n);return r||(r=function(n){var r=void 0;return void 0===n&&(n={}),{getInstance:function(){return r||(r=o(n,e.__dashjs_factory_name)),r||(r=m(e,n,arguments),t.push({name:e.__dashjs_factory_name,context:n,instance:r})),r}}},n[e.__dashjs_factory_name]=r),r}function m(t,n,r){var i=void 0,o=t.__dashjs_factory_name,a=n[o];if(a){var s=a.instance;if(!a.override)return s.apply({context:n,factory:e},r);for(var u in i=t.apply({context:n},r),s=s.apply({context:n,factory:e,parent:i},r),s)i.hasOwnProperty(u)&&(i[u]=s[u])}else i=t.apply({context:n},r);return i.getClassName=function(){return o},i}return e={extend:i,getSingletonInstance:o,setSingletonInstance:a,getSingletonFactory:p,getSingletonFactoryByName:h,updateSingletonFactory:f,getClassFactory:c,getClassFactoryByName:d,updateClassFactory:l},e}();t["default"]=r,e.exports=t["default"]},4681:function(e,t,n){"use strict";var r=n("966d");function i(e,t){var n=this,i=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return i||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(a,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(r.nextTick(a,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(e,t){e.emit("error",t)}e.exports={destroy:i,undestroy:o}},"46c1":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n,i,o,a){r(this,e),this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),n&&n.length&&(this.videoCapabilities=n),this.distinctiveIdentifier=i,this.persistentState=o,this.sessionTypes=a};t["default"]=i,e.exports=t["default"]},"46ee":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]};t["default"]=i,e.exports=t["default"]},"473d":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN};t["default"]=i,e.exports=t["default"]},"476a":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(){var e=0,t=void 0;function n(e){for(var t="",n=0;n<e.length;++n){var r=e[n];t+=r.uchar}var i=t.length,o=t.replace(/^\s+/,"").length;return i-o}function r(e){return"left: "+3.125*e.x+"%; top: "+6.66*e.y1+"%; width: "+(100-3.125*e.x)+"%; height: "+6.66*Math.max(e.y2-1-e.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function i(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function o(e,t){var n=e.videoHeight/15;return t?"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?i(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?i(t.background):"transparent")+";":"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function a(e){return e.replace(/^\s+/g,"")}function s(e){return e.replace(/\s+$/g,"")}function u(t,i,u,l){var d=null,c=null,f=!1,h=-1,p={start:i,end:u,spans:[]},m="style_cea608_white_black",g={},y={},v=[],_=void 0,E=void 0;for(_=0;_<15;++_){var b=l.rows[_],T="",S=null;if(!1===b.isEmpty()){var I=n(b.chars);null===d&&(d={x:I,y1:_,y2:_+1,p:[]}),I!==h&&f&&(d.p.push(p),p={start:i,end:u,spans:[]},d.y2=_,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===g.hasOwnProperty(d.name)?(v.push(d),g[d.name]=d):(c=g[d.name],c.p.contat(d.p)),d={x:I,y1:_,y2:_+1,p:[]});for(var w=0;w<b.chars.length;++w){var x=b.chars[w],A=x.penState;if(null===S||!A.equals(S)){T.trim().length>0&&(p.spans.push({name:m,line:T,row:_}),T="");var D="style_cea608_"+A.foreground+"_"+A.background;A.underline&&(D+="_underline"),A.italics&&(D+="_italics"),y.hasOwnProperty(D)||(y[D]=JSON.parse(JSON.stringify(A))),S=A,m=D}T+=x.uchar}T.trim().length>0&&p.spans.push({name:m,line:T,row:_}),f=!0,h=I}else f=!1,h=-1,d&&(d.p.push(p),p={start:i,end:u,spans:[]},d.y2=_,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===g.hasOwnProperty(d.name)?(v.push(d),g[d.name]=d):(c=g[d.name],c.p.contat(d.p)),d=null)}d&&(d.p.push(p),d.y2=_+1,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===g.hasOwnProperty(d.name)?(v.push(d),g[d.name]=d):(c=g[d.name],c.p.contat(d.p)),d=null);var R=[];for(_=0;_<v.length;++_){var M=v[_],C="sub_cea608_"+e++,N=document.createElement("div");N.id=C;var P=r(M);N.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+P;var L=document.createElement("div");L.className="paragraph bodyStyle",L.style.cssText=o(t);var O=document.createElement("div");O.className="cueUniWrapper",O.style.cssText="unicode-bidi: normal; direction: ltr;";for(var F=0;F<M.p.length;++F){var B=M.p[F],k=0;for(E=0;E<B.spans.length;++E){var U=B.spans[E];if(U.line.length>0){if(0!==E&&k!=U.row){var H=document.createElement("br");H.className="lineBreak",O.appendChild(H)}var j=!1;k===U.row&&(j=!0),k=U.row;var K=y[U.name],V=document.createElement("span");V.className="spanPadding "+U.name+" customSpanColor",V.style.cssText=o(t,K),0!==E&&j?E===B.spans.length-1?V.textContent=s(U.line):V.textContent=U.line:B.spans.length>1&&E<B.spans.length-1&&U.row===B.spans[E+1].row?V.textContent=a(U.line):V.textContent=U.line.trim(),O.appendChild(V)}}}L.appendChild(O),N.appendChild(L);var q={bodyStyle:["%",90]};for(var G in y)y.hasOwnProperty(G)&&(q[G]=["%",90]);R.push({type:"html",start:i,end:u,cueHTMLElement:N,cueID:C,cellResolution:[32,15],isFromCEA608:!0,fontSize:q,lineHeight:{},linePadding:{}})}return R}return t={createHTMLCaptionsFromScreen:u},t}a.__dashjs_factory_name="EmbeddedTextHtmlRender",t["default"]=o["default"].getSingletonFactory(a),e.exports=t["default"]},"477f":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2d62"),o=r(i);function a(e){e=e||{};var t=!1,n=this.context,r=void 0,i=void 0,a=e.mediaElement;function s(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,n=t+e.duration;i.add(t,n)}),t=!!e[0]._useWallClockTime)}function u(){i.clear()}function l(){i=(0,o["default"])(n).create()}function d(){var e=i.length,n=void 0;if(!e)return!0;n=t?(new Date).getTime()/1e3:a.currentTime;for(var r=0;r<e;r+=1){var o=i.start(r),s=i.end(r);if(o<=n&&n<s)return!0}return!1}return r={initialize:s,reset:u,isEnabled:d},l(),r}a.__dashjs_factory_name="RangeController",t["default"]=dashjs.FactoryMaker.getClassFactory(a),e.exports=t["default"]},"47e4":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){i(this,e),this.init()}return r(e,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors"}}]),e}(),a=new o;t["default"]=a,e.exports=t["default"]},"481b":function(e,t){e.exports={}},"4a59":function(e,t,n){var r=n("9b43"),i=n("1fa8"),o=n("33a4"),a=n("cb7c"),s=n("9def"),u=n("27ee"),l={},d={};t=e.exports=function(e,t,n,c,f){var h,p,m,g,y=f?function(){return e}:u(e),v=r(n,c,t?2:1),_=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(h=s(e.length);h>_;_++)if(g=t?v(a(p=e[_])[0],p[1]):v(e[_]),g===l||g===d)return g}else for(m=y.call(e);!(p=m.next()).done;)if(g=i(m,v,p.value,t),g===l||g===d)return g};t.BREAK=l,t.RETURN=d},"4ac7":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("e217"),o=r(i),a=n("5fb0"),s=r(a),u=n("6a2d"),l=r(u),d=n("b4be"),c=r(d),f=n("46c1"),h=r(f),p=n("f288"),m=r(p),g=n("d0a4"),y=r(g);function v(e){e=e||{};var t=this.context,n=e.eventBus,r=e.events,i=e.debug,a=e.api,u=e.errHandler,d=void 0,f=void 0,p=void 0,g=void 0,v=void 0,_=void 0,E=void 0,b=void 0,T=void 0;function S(){f=i.getLogger(d),p=null,g=null,_=[],E=[],v=(0,o["default"])(t).getInstance(),T=F()}function I(){p&&k();for(var e=0;e<E.length;e++)N(E[e]);n.trigger(r.TEARDOWN_COMPLETE)}function w(){return g}function x(){for(var e=[],t=0;t<_.length;t++)e.push(_[t].initData);for(t=0;t<E.length;t++)e.push(E[t].initData);return e}function A(e){var t=p;t||(t=document.createElement("video"));for(var i=!1,o=0;o<e.length;o++)for(var a=e[o].ks.systemString,s=e[o].configs,u=null,l=null,d=0;d<s.length;d++){var c=s[d].videoCapabilities;if(c&&0!==c.length){l=[];for(var f=0;f<c.length;f++)""!==t.canPlayType(c[f].contentType,a)&&l.push(c[f])}if(!(!u&&!l||u&&0===u.length||l&&0===l.length)){i=!0;var g=new h["default"](u,l),y=v.getKeySystemBySystemString(a);n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{data:new m["default"](y,g)});break}}i||n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})}function D(e){g=e.keySystem,n.trigger(r.INTERNAL_KEY_SYSTEM_SELECTED)}function R(e){if(p!==e){if(p){k();for(var t=0;t<E.length;t++)N(E[t]);E=[]}p=e,p&&(p.addEventListener(a.keyerror,T),p.addEventListener(a.needkey,T),p.addEventListener(a.keymessage,T),p.addEventListener(a.keyadded,T),n.trigger(r.VIDEO_ELEMENT_SELECTED))}}function M(e){if(!g)throw new Error("Can not create sessions until you have selected a key system");if(b||0===E.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return _.push(t),p[a.generateKeyRequest](g.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")}function C(e,t){var n=e.sessionID;if(v.isClearKey(g))for(var r=0;r<t.keyPairs.length;r++)p[a.addKey](g.systemString,t.keyPairs[r].key,t.keyPairs[r].keyID,n);else p[a.addKey](g.systemString,new Uint8Array(t),new Uint8Array(e.initData),n)}function N(e){try{p[a.cancelKeyRequest](g.systemString,e.sessionID)}catch(t){n.trigger(r.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.sessionID+") "+t.message})}}function P(){}function L(){}function O(){}function F(){return{handleEvent:function(e){var t=null;switch(e.type){case a.needkey:var i=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;n.trigger(r.NEED_KEY,{key:new s["default"](i,"cenc")});break;case a.keyerror:if(t=B(E,e.sessionId),t||(t=B(_,e.sessionId)),t){var o=y["default"].MEDIA_KEYERR_CODE,d="";switch(e.errorCode.code){case 1:o=y["default"].MEDIA_KEYERR_UNKNOWN_CODE,d+="MEDIA_KEYERR_UNKNOWN - "+y["default"].MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:o=y["default"].MEDIA_KEYERR_CLIENT_CODE,d+="MEDIA_KEYERR_CLIENT - "+y["default"].MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:o=y["default"].MEDIA_KEYERR_SERVICE_CODE,d+="MEDIA_KEYERR_SERVICE - "+y["default"].MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:o=y["default"].MEDIA_KEYERR_OUTPUT_CODE,d+="MEDIA_KEYERR_OUTPUT - "+y["default"].MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:o=y["default"].MEDIA_KEYERR_HARDWARECHANGE_CODE,d+="MEDIA_KEYERR_HARDWARECHANGE - "+y["default"].MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:o=y["default"].MEDIA_KEYERR_DOMAIN_CODE,d+="MEDIA_KEYERR_DOMAIN - "+y["default"].MEDIA_KEYERR_DOMAIN_MESSAGE;break}d+="  System Code = "+e.systemCode,n.trigger(r.KEY_ERROR,{data:new l["default"](o,d,t)})}else f.error("No session token found for key error");break;case a.keyadded:t=B(E,e.sessionId),t||(t=B(_,e.sessionId)),t?(f.debug("DRM: Key added."),n.trigger(r.KEY_ADDED,{data:t})):f.debug("No session token found for key added");break;case a.keymessage:if(b=null!==e.sessionId&&void 0!==e.sessionId,b?(t=B(E,e.sessionId),!t&&_.length>0&&(t=_.shift(),E.push(t),t.sessionID=e.sessionId,n.trigger(r.KEY_SESSION_CREATED,{data:t}))):_.length>0&&(t=_.shift(),E.push(t),0!==_.length&&(u.mediaKeyMessageError(y["default"].MEDIA_KEY_MESSAGE_ERROR_MESSAGE),u.error(new l["default"](y["default"].MEDIA_KEY_MESSAGE_ERROR_CODE,y["default"].MEDIA_KEY_MESSAGE_ERROR_MESSAGE)))),t){var h=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;t.keyMessage=h,n.trigger(r.INTERNAL_KEY_MESSAGE,{data:new c["default"](t,h,e.defaultURL)})}else f.warn("No session token found for key message");break}}}}function B(e,t){if(t&&e){for(var n=e.length,r=0;r<n;r++)if(e[r].sessionID==t)return e[r];return null}return null}function k(){p.removeEventListener(a.keyerror,T),p.removeEventListener(a.needkey,T),p.removeEventListener(a.keymessage,T),p.removeEventListener(a.keyadded,T)}return d={getAllInitData:x,requestKeySystemAccess:A,getKeySystem:w,selectKeySystem:D,setMediaElement:R,createKeySession:M,updateKeySession:C,closeKeySession:N,setServerCertificate:P,loadKeySession:L,removeKeySession:O,stop:I,reset:I},S(),d}v.__dashjs_factory_name="ProtectionModel_01b",t["default"]=dashjs.FactoryMaker.getClassFactory(v),e.exports=t["default"]},"4be9":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("ae98"),o=r(i),a=n("9859"),s=r(a),u=n("4e7a"),l=r(u),d=n("f447"),c=r(d),f=n("467b"),h=r(f),p=n("8a43"),m=r(p),g=n("1d48"),y=r(g);function v(){var e=void 0,t=void 0,n=this.context,r=(0,m["default"])(n).getInstance(),i=(0,l["default"])(n).getInstance(),a=void 0,u=void 0;function d(e){a.invalidateSelectedIndexes(e.entry)}function f(){a=(0,o["default"])(n).create(),u=(0,s["default"])(n).create(),r.on(y["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,d,e)}function h(e){e.baseURLTreeModel&&(a=e.baseURLTreeModel),e.baseURLSelector&&(u=e.baseURLSelector),e.dashManifestModel&&(t=e.dashManifestModel)}function p(e){a.update(e),u.chooseSelectorFromManifest(e)}function g(e){var t=a.getForPath(e),n=t.reduce(function(e,t){var n=u.select(t);return n?(i.isRelative(n.url)?e.url=i.resolve(n.url,e.url):(e.url=n.url,e.serviceLocation=n.serviceLocation),e.availabilityTimeOffset=n.availabilityTimeOffset,e.availabilityTimeComplete=n.availabilityTimeComplete,e):new c["default"]},new c["default"]);if(!i.isRelative(n.url))return n}function v(){a.reset(),u.reset()}function _(e){a.setConfig({dashManifestModel:t}),u.setConfig({dashManifestModel:t}),p(e)}return e={reset:v,initialize:_,resolve:g,setConfig:h},f(),e}v.__dashjs_factory_name="BaseURLController",t["default"]=h["default"].getSingletonFactory(v),e.exports=t["default"]},"4bf8":function(e,t,n){var r=n("be13");e.exports=function(e){return Object(r(e))}},"4c95":function(e,t,n){"use strict";var r=n("e53d"),i=n("584a"),o=n("d9f6"),a=n("8e60"),s=n("5168")("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},"4e47":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("8e4c"),s=r(a),u=n("2b8a"),l=r(u),d=n("efb7"),c=r(d),f=n("36b1"),h=r(f),p=n("d665"),m=r(p),g=n("8a43"),y=r(g),v=n("1d48"),_=r(v),E=n("d25a"),b=r(E),T=n("467b"),S=r(T),I=n("589e"),w=r(I),x=n("0eda"),A=r(x),D=n("6a2d"),R=r(D),M=n("e172"),C=r(M),N=n("0757"),P="bufferLoaded",L="bufferStalled",O=.5,F=.5,B=.01,k=22,U="BufferController";function H(e){e=e||{};var t=this.context,n=(0,y["default"])(t).getInstance(),r=e.metricsModel,i=e.mediaPlayerModel,a=e.errHandler,u=e.streamController,d=e.mediaController,f=e.adapter,p=e.textController,g=e.abrController,v=e.playbackController,E=e.type,T=e.streamProcessor,S=void 0,I=void 0,x=void 0,D=void 0,M=void 0,H=void 0,j=void 0,K=void 0,V=void 0,q=void 0,G=void 0,Y=void 0,z=void 0,W=void 0,X=void 0,$=void 0,Q=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0;function ne(){I=(0,w["default"])(t).getInstance().getLogger(S),$=(0,A["default"])(t).getInstance(),et()}function re(){return U}function ie(e){We(e),x=g.getQualityFor(E,T.getStreamInfo()),n.on(_["default"].DATA_UPDATE_COMPLETED,Be,this),n.on(_["default"].INIT_FRAGMENT_LOADED,ue,this),n.on(_["default"].MEDIA_FRAGMENT_LOADED,de,this),n.on(_["default"].QUALITY_CHANGE_REQUESTED,pe,this),n.on(_["default"].STREAM_COMPLETED,ke,this),n.on(_["default"].PLAYBACK_PLAYING,Te,this),n.on(_["default"].PLAYBACK_PROGRESS,Ee,this),n.on(_["default"].PLAYBACK_TIME_UPDATED,Ee,this),n.on(_["default"].PLAYBACK_RATE_CHANGED,je,this),n.on(_["default"].PLAYBACK_SEEKING,me,this),n.on(_["default"].PLAYBACK_SEEKED,ge,this),n.on(_["default"].PLAYBACK_STALLED,be,this),n.on(_["default"].WALLCLOCK_TIME_UPDATED,He,this),n.on(_["default"].CURRENT_TRACK_CHANGED,Ue,this,y["default"].EVENT_PRIORITY_HIGH),n.on(_["default"].SOURCEBUFFER_REMOVE_COMPLETED,Oe,this)}function oe(e,n){if(!$||!e||!T)return null;if(j)try{q=n&&n[E]?(0,l["default"])(t).create(j,e,he.bind(this),n[E]):(0,l["default"])(t).create(j,e,he.bind(this)),"function"===typeof q.getBuffer().initialize&&q.getBuffer().initialize(E,T)}catch(r){I.fatal("Caught error on create SourceBuffer: "+r),a.mediaSourceError("Error creating "+E+" source buffer."),a.error(new R["default"](C["default"].MEDIASOURCE_TYPE_UNSUPPORTED_CODE,C["default"].MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+E))}else q=(0,c["default"])(t).create(he.bind(this));return Fe(T.getRepresentationInfo(x).MSETimeOffset),q}function ae(){if(q&&G&&"function"===typeof G.discharge){var e=G.getAllBufferRanges();if(e.length>0){for(var t="Beginning "+E+"PreBuffer discharge, adding buffer for:",n=0;n<e.length;n++)t+=" start: "+e.start(n)+", end: "+e.end(n)+";";I.debug(t)}else I.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");for(var r=G.discharge(),i=null,o=0;o<r.length;o++){var a=r[o],s=$.extract(a.streamId,a.representationId);s&&(i!==s&&(q.append(s),i=s),q.append(a))}G.reset(),G=null}}function se(){return T&&u&&T.getStreamInfo()}function ue(e){e.fragmentModel===T.getFragmentModel()&&(I.info("Init fragment finished loading saving to",E+"'s init cache"),$.save(e.chunk),I.debug("Append Init fragment",E," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality,", data size:",e.chunk.bytes.byteLength),ce(e.chunk))}function le(e,t,r){var i=$.extract(e,t);ee=!0===r&&r,i?(I.info("Append Init fragment",E," with representationId:",i.representationId," and quality:",i.quality,", data size:",i.bytes.byteLength),ce(i)):n.trigger(_["default"].INIT_REQUESTED,{sender:S})}function de(e){if(e.fragmentModel===T.getFragmentModel()){var t=e.chunk,n=t.bytes,r=t.quality,i=T.getRepresentationInfo(r),o=f.getEventsFor(i.mediaInfo,T),a=f.getEventsFor(i,T);if(o&&o.length>0||a&&a.length>0){var u=T.getFragmentModel().getRequests({state:s["default"].FRAGMENT_MODEL_EXECUTED,quality:r,index:t.index})[0],l=Me(n,u,o,a);T.addInbandEvents(l)}if(ee){te=t;var d=q&&q.getAllBufferRanges();d&&d.length>0&&v.getTimeToStreamEnd()>O&&(I.debug("Clearing buffer because track changed - "+(d.end(d.length-1)+F)),Pe([{start:0,end:d.end(d.length-1)+F,force:!0}]))}else ce(t)}}function ce(e){q.append(e),e.mediaInfo.type===o["default"].VIDEO&&n.trigger(_["default"].VIDEO_CHUNK_RECEIVED,{chunk:e})}function fe(e){if(e&&e.length>0)for(var t=0,n=e.length;t<n;t++)I.debug("Buffered Range for type:",E,":",e.start(t)," - ",e.end(t)," currentTime = ",v.getTime())}function he(e){if(e.error){if(e.error.code===k&&(H=.8*Je(),I.warn("Quota exceeded for type: "+E+", Critical Buffer: "+H),H>0)){var t=Math.max(.2*H,1),r=H-t;i.setBufferToKeep(parseFloat(t.toFixed(5))),i.setBufferAheadToKeep(parseFloat(r.toFixed(5)))}e.error.code!==k&&Ze()||(I.warn("Clearing playback buffer to overcome quota exceed situation for type: "+E),n.trigger(_["default"].QUOTA_EXCEEDED,{sender:S,criticalBufferLevel:H}),ye())}else{z=e.chunk,z&&!isNaN(z.index)&&(K=Math.max(z.index,K),Ae());var o=q.getAllBufferRanges();if(z.segmentType===N.HTTPRequest.MEDIA_SEGMENT_TYPE)fe(o),Ee();else if(ee){var a=v.getTime();I.debug("AppendToBuffer seek target should be "+a),T.getScheduleController().setSeekTarget(a),f.setIndexHandlerTime(T,a)}var s={sender:S,quality:z.quality,startTime:z.start,index:z.index,bufferedRanges:o};z&&!z.endFragment?n.trigger(_["default"].BYTES_APPENDED,s):z&&n.trigger(_["default"].BYTES_APPENDED_END_FRAGMENT,s)}}function pe(e){x!==e.newQuality&&E===e.mediaType&&T.getStreamInfo().id===e.streamInfo.id&&(Fe(T.getRepresentationInfo(e.newQuality).MSETimeOffset),x=e.newQuality)}function me(){D&&(J=!0,D=!1,V=Number.POSITIVE_INFINITY),E!==o["default"].FRAGMENTED_TEXT?ye():Ee()}function ge(){Q=void 0}function ye(){var e=ve();e&&0!==e.length||Ee(),Pe(e)}function ve(){var e=[],t=q.getAllBufferRanges();if(!t||0===t.length)return e;var n=v.getTime(),r=t.end(t.length-1)+F,i=T.getFragmentModel().getRequests({state:s["default"].FRAGMENT_MODEL_EXECUTED,time:n,threshold:B})[0];if(i){var o={start:0,end:i.startTime-O},a=T.getFragmentModel().getRequests({state:s["default"].FRAGMENT_MODEL_EXECUTED,time:i.startTime-i.duration/2,threshold:B})[0];a&&a.startTime!=i.startTime&&(o.end=a.startTime),o.start<o.end&&o.end>t.start(0)&&e.push(o);var u={start:i.startTime+i.duration+O,end:r},l=T.getFragmentModel().getRequests({state:s["default"].FRAGMENT_MODEL_EXECUTED,time:i.startTime+i.duration+O,threshold:B})[0];l&&l.startTime!==i.startTime&&(u.start=l.startTime+l.duration+O),u.start<u.end&&u.start<r&&e.push(u)}else I.debug("getAllRangesWithSafetyFactor for",E,"- No request found in current time position, removing full buffer 0 -",r),e.push({start:0,end:r});return e}function _e(){var e=v.getTime();if(Q){var t=q.getAllBufferRanges();t&&t.length&&(e=Math.max(t.start(0),Q))}return e}function Ee(){(!ee||E===o["default"].FRAGMENTED_TEXT&&p.isTextEnabled())&&(we(),xe())}function be(){De()}function Te(){De()}function Se(e,t){var n=q.getAllBufferRanges(),r=0,i=0,o=null,a=null,s=0,u=void 0,l=void 0,d=t||.15;if(null!==n&&void 0!==n){for(l=0,u=n.length;l<u;l++)if(r=n.start(l),i=n.end(l),null===o)s=Math.abs(r-e),e>=r&&e<i?(o=r,a=i):s<=d&&(o=r,a=i);else{if(s=r-a,!(s<=d))break;a=i}if(null!==o)return{start:o,end:a}}return null}function Ie(e,t){var n=void 0,r=void 0;return n=Se(e,t),r=null===n?0:n.end-e,r}function we(){v&&(M=Ie(_e()||0),n.trigger(_["default"].BUFFER_LEVEL_UPDATED,{sender:S,bufferLevel:M}),De())}function xe(){se()&&(r.addBufferState(E,Y,T.getScheduleController().getBufferTarget()),r.addBufferLevel(E,new Date,1e3*M))}function Ae(){var e=K>=V-1;e&&!D&&void 0===q.discharge&&(D=!0,I.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED"),n.trigger(_["default"].BUFFERING_COMPLETED,{sender:S,streamInfo:T.getStreamInfo()}))}function De(){"audio"!==E&&"video"!==E||(J&&!D&&v&&v.getTimeToStreamEnd()-M<O&&(J=!1,D=!0,I.debug("checkIfSufficientBuffer trigger BUFFERING_COMPLETED"),n.trigger(_["default"].BUFFERING_COMPLETED,{sender:S,streamInfo:T.getStreamInfo()})),(!i.getLowLatencyEnabled()&&M<O||0===M)&&!D?Re(L):(D||M>=i.getStableBufferTime())&&Re(P))}function Re(e){Y===e||e===L&&0===v.getTime()||E===o["default"].FRAGMENTED_TEXT&&!p.isTextEnabled()||(Y=e,xe(),n.trigger(_["default"].BUFFER_LEVEL_STATE_CHANGED,{sender:S,state:e,mediaType:E,streamInfo:T.getStreamInfo()}),n.trigger(e===P?_["default"].BUFFER_LOADED:_["default"].BUFFER_EMPTY,{mediaType:E}),I.debug(e===P?"Got enough buffer to start for "+E:"Waiting for more buffer before starting playback for "+E))}function Me(e,n,r,i){for(var o=Math.max(!n||isNaN(n.startTime)?0:n.startTime,0),a=[],s=[],u=r.concat(i),l=0,d=u.length;l<d;l++)a[u[l].schemeIdUri+"/"+u[l].value]=u[l];var c=(0,b["default"])(t).getInstance().parse(e),h=c.getBoxes("emsg");for(l=0,d=h.length;l<d;l++){var p=f.getEvent(h[l],a,o);p&&s.push(p)}return s}function Ce(){q&&E!==o["default"].FRAGMENTED_TEXT&&(D||Pe(Ne()))}function Ne(){var e=[],t=q.getAllBufferRanges();if(!t||0===t.length)return e;var n=v.getTime(),r={start:Math.max(0,n-i.getBufferToKeep()),end:n+i.getBufferAheadToKeep()},o=T.getFragmentModel().getRequests({state:s["default"].FRAGMENT_MODEL_EXECUTED,time:n,threshold:B})[0];if(o)r.start=Math.min(o.startTime,r.start),r.end=Math.max(o.startTime+o.duration,r.end);else if(0===n&&v.getIsDynamic())return[];if(t.start(0)<=r.start){for(var a={start:0,end:r.start},u=0;u<t.length&&t.end(u)<=r.start;u++)a.end=t.end(u);a.start<a.end&&e.push(a)}if(t.end(t.length-1)>=r.end){var l={start:r.end,end:t.end(t.length-1)+B};l.start<l.end&&e.push(l)}return e}function Pe(e){e&&q&&0!==e.length&&(Z.push.apply(Z,e),X||Le())}function Le(){if(0===Z.length||!q)return I.debug("Nothing to prune, halt pruning"),Z=[],void(X=!1);var e=q.getBuffer();if(!e||!e.buffered||0===e.buffered.length)return I.debug("SourceBuffer is empty (or does not exist), halt pruning"),Z=[],void(X=!1);var t=Z.shift();I.debug("Removing",E,"buffer from:",t.start,"to",t.end),X=!0;var n=v.getTime();n<t.end&&(D=!1,K=0,ee||(T.getScheduleController().setSeekTarget(n),f.setIndexHandlerTime(T,n))),q.remove(t.start,t.end,t.force)}function Oe(e){if(q===e.buffer){I.debug("onRemoved buffer from:",e.from,"to",e.to);var t=q.getAllBufferRanges();fe(t),0===Z.length&&(X=!1),e.unintended&&(I.warn("Detected unintended removal from:",e.from,"to",e.to,"setting index handler time to",e.from),f.setIndexHandlerTime(T,e.from)),X?Le():(ee?(ee=!1,te&&ce(te)):(I.debug("onRemoved : call updateBufferLevel"),we()),n.trigger(_["default"].BUFFER_CLEARED,{sender:S,from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:Ze()}))}}function Fe(e){q&&q.updateTimestampOffset&&q.updateTimestampOffset(e)}function Be(e){e.sender.getStreamProcessor()!==T||e.error||Fe(e.currentRepresentation.MSETimeOffset)}function ke(e){e.fragmentModel===T.getFragmentModel()&&(V=e.request.index,Ae())}function Ue(e){var t=q&&q.getAllBufferRanges();t&&e.newMediaInfo.type===E&&e.newMediaInfo.streamInfo.id===T.getStreamInfo().id&&(I.info("Track change asked"),d.getSwitchMode(E)===m["default"].TRACK_SWITCH_MODE_ALWAYS_REPLACE&&t&&t.length>0&&v.getTimeToStreamEnd()>O&&(D=!1,V=Number.POSITIVE_INFINITY))}function He(){W++;var e=W*(i.getWallclockTimeUpdateInterval()/1e3);e>=i.getBufferPruningInterval()&&(W=0,Ce())}function je(){De()}function Ke(){return E}function Ve(){return T}function qe(e){Q=e}function Ge(){return q}function Ye(e){q=e}function ze(){return M}function We(e,t){j=e,q&&t&&"function"===typeof q.discharge&&(G=q,oe(t))}function Xe(){return j}function $e(){return D}function Qe(){return X}function Je(){var e=q.getAllBufferRanges(),t=0,n=void 0,r=void 0;if(!e)return t;for(r=0,n=e.length;r<n;r++)t+=e.end(r)-e.start(r);return t}function Ze(){var e=Je();return e<H}function et(e,t){H=Number.POSITIVE_INFINITY,Y=void 0,x=h["default"].QUALITY_DEFAULT,V=Number.POSITIVE_INFINITY,K=0,z=null,D=!1,X=!1,J=!1,M=0,W=0,Z=[],q&&(e||q.abort(),q.reset(t),q=null),ee=!1}function tt(e,t){n.off(_["default"].DATA_UPDATE_COMPLETED,Be,this),n.off(_["default"].QUALITY_CHANGE_REQUESTED,pe,this),n.off(_["default"].INIT_FRAGMENT_LOADED,ue,this),n.off(_["default"].MEDIA_FRAGMENT_LOADED,de,this),n.off(_["default"].STREAM_COMPLETED,ke,this),n.off(_["default"].CURRENT_TRACK_CHANGED,Ue,this),n.off(_["default"].PLAYBACK_PLAYING,Te,this),n.off(_["default"].PLAYBACK_PROGRESS,Ee,this),n.off(_["default"].PLAYBACK_TIME_UPDATED,Ee,this),n.off(_["default"].PLAYBACK_RATE_CHANGED,je,this),n.off(_["default"].PLAYBACK_SEEKING,me,this),n.off(_["default"].PLAYBACK_SEEKED,ge,this),n.off(_["default"].PLAYBACK_STALLED,be,this),n.off(_["default"].WALLCLOCK_TIME_UPDATED,He,this),n.off(_["default"].SOURCEBUFFER_REMOVE_COMPLETED,Oe,this),et(e,t)}return S={getBufferControllerType:re,initialize:ie,createBuffer:oe,dischargePreBuffer:ae,getType:Ke,getStreamProcessor:Ve,setSeekStartTime:qe,getBuffer:Ge,setBuffer:Ye,getBufferLevel:ze,getRangeAt:Se,setMediaSource:We,getMediaSource:Xe,getIsBufferingCompleted:$e,switchInitData:le,getIsPruningInProgress:Qe,reset:tt},ne(),S}H.__dashjs_factory_name=U;var j=S["default"].getClassFactory(H);j.BUFFER_LOADED=P,j.BUFFER_EMPTY=L,S["default"].updateClassFactory(H.__dashjs_factory_name,j),t["default"]=j,e.exports=t["default"]},"4e7a":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(){var e=void 0,t=/^[a-z][a-z0-9+\-.]*:/i,n=/^https?:\/\//i,r=/^https:\/\//i,i=/^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i,o=function(e,t){try{return new window.URL(e,t).toString()}catch(n){return e}},a=function(e,t){var n=u;if(!t)return e;if(!c(e))return e;f(e)&&(n=l),h(e)&&(n=d);var r=n(t),i="/"!==r.charAt(r.length-1)&&"/"!==e.charAt(0)?"/":"";return[r,e].join(i)};function s(){try{new window.URL("x","http://y");e=o}catch(t){}finally{e=e||a}}function u(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function l(e){var t=e.match(i);return t?t[1]:""}function d(e){var n=e.match(t);return n?n[0]:""}function c(e){return!t.test(e)}function f(e){return c(e)&&"/"===e.charAt(0)}function h(e){return 0===e.indexOf("//")}function p(e){return n.test(e)}function m(e){return r.test(e)}function g(t,n){return e(t,n)}s();var y={parseBaseUrl:u,parseOrigin:l,parseScheme:d,isRelative:c,isPathAbsolute:f,isSchemeRelative:h,isHTTPURL:p,isHTTPS:m,resolve:g};return y}a.__dashjs_factory_name="URLUtils",t["default"]=o["default"].getSingletonFactory(a),e.exports=t["default"]},"4ee1":function(e,t,n){var r=n("5168")("iterator"),i=!1;try{var o=[7][r]();o["return"]=function(){i=!0},Array.from(o,function(){throw 2})}catch(a){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},e(o)}catch(a){}return n}},"4f3c":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(t){i(this,e);var n=function(e){return e&&e.length&&e.charAt(0)===e.charAt(0).toUpperCase()};this._name=t,this._merge=n(t)}return r(e,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),e}();t["default"]=o,e.exports=t["default"]},"502a":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n,i){r(this,e),this.lastCompletedOffset=t,this.found=n,this.size=i};t["default"]=i,e.exports=t["default"]},5037:function(e,t,n){n("c207"),n("1654"),n("6c1c"),n("837d"),n("5cb6"),n("fe1e"),n("7554"),e.exports=n("584a").Map},5058:function(e,t,n){(function(n){var r,o;(function(n,i){r=[],o=function(){return n["MediaPlayer"]=i()}.apply(t,r),void 0===o||(e.exports=o)})(this,function(){var t,r,o,u={},l={},d={},c={};c=function(){var e,n="1.2.0",r="1.15.1",i="b21165b9",a="2019-2-13_11:37:25",s=new c.di.Context,u=new o.System,l=!1,d=null,f=null,h=null,p=[],m=[],g=null,y=null,v="und",_="und",E=!1,S={video:-1,audio:-1},I=null,w=!1,x=!1,A=!0,D=null,R=!1,M="Safari"===b().name,C={},N=function(){if(!l)throw new Error("MediaPlayer not initialized !!!")},P=function(){if(!e.getElement())throw new Error("MediaPlayer.play(): Video element not attached to MediaPlayer")},L=function(){if(!D)throw new Error("MediaPlayer.play(): Source not attached to MediaPlayer")},O=function(){var n,r=[],i=[];if(N(),P(),L(),M&&"HLS"===D.protocol||c.hasMediaSourceExtension()){for(var o in C)r.push(C[o].deferInit.promise);t.all(r).then(function(){for(var r in C)n=C[r],n.deferLoad=t.defer(),i.push(n.deferLoad.promise),n.load(D,function(){this.deferLoad.resolve()}.bind(n));t.all(i).then(function(){x=!0,this.metricsModel.addSession(null,D.url,e.getElement().loop,null,"MediaPlayer.js_"+this.getVersion()),this.debug.log("[MediaPlayer] Version: "+this.getVersionFull()+" - "+this.getBuildDate()),this.debug.log("[MediaPlayer] user-agent: "+navigator.userAgent),this.debug.log("[MediaPlayer] Load stream:\n",JSON.stringify(D,null,"  ")),I||(I=u.getObject("streamController"),I.setVideoModel(e),I.setAutoPlay(A)),I.setDefaultAudioLang(v),I.setDefaultSubtitleLang(_),I.enableSubtitles(E),I.load(D),u.mapValue("scheduleWhilePaused",R),u.mapOutlet("scheduleWhilePaused","stream")}.bind(this))}.bind(this))}else this.errHandler.sendError(c.dependencies.ErrorHandler.prototype.CAPABILITY_ERR_MEDIASOURCE,"MediaSource extension not supported by the browser")},F=function(){return l&&e.getElement()&&D&&!w},B=function(){F()&&O.call(this)},k=function(t,n){var r=document.createEvent("CustomEvent");r.initCustomEvent(t,!1,!1,{type:n.streamType,bitrate:n.switchedQuality,representationId:n.representationId,time:e.getCurrentTime(),width:n.width,height:n.height}),e.getElement().dispatchEvent(r)},U=function(t){var n;switch(t.data.metric){case"ManifestReady":N(),this.debug.log("[MediaPlayer] ManifestReady"),f=this.metricsExt.getBitratesForType("video"),this.debug.log("[MediaPlayer] video bitrates: "+JSON.stringify(f)),n=document.createEvent("CustomEvent"),n.initCustomEvent("manifest_loaded",!1,!1,{}),e.getElement().dispatchEvent(n);break;case"RepresentationSwitch":N(),"video"==t.data.stream?(f=this.metricsExt.getBitratesForType(t.data.stream),f&&(k("download_bitrate",{streamType:t.data.stream,switchedQuality:f[t.data.value.lto],representationId:t.data.value.to,width:this.metricsExt.getVideoWidthForRepresentation(t.data.value.to),height:this.metricsExt.getVideoHeightForRepresentation(t.data.value.to)}),this.debug.log("[MediaPlayer]["+t.data.stream+"] send download_bitrate - b="+f[t.data.value.lto]))):"audio"==t.data.stream&&(h=this.metricsExt.getBitratesForType(t.data.stream),h&&(k("download_bitrate",{streamType:t.data.stream,switchedQuality:h[t.data.value.lto],representationId:t.data.value.to,width:this.metricsExt.getVideoWidthForRepresentation(t.data.value.to),height:this.metricsExt.getVideoHeightForRepresentation(t.data.value.to)}),this.debug.log("[MediaPlayer]["+t.data.stream+"] send download_bitrate - b="+f[t.data.value.lto])));break;case"BufferedSwitch":N(),"video"==t.data.stream?p.push({streamType:t.data.stream,mediaStartTime:t.data.value.mt,switchedQuality:f[t.data.value.lto],representationId:t.data.value.to,width:this.metricsExt.getVideoWidthForRepresentation(t.data.value.to),height:this.metricsExt.getVideoHeightForRepresentation(t.data.value.to)}):"audio"==t.data.stream&&m.push({streamType:t.data.stream,mediaStartTime:t.data.value.mt,switchedQuality:h[t.data.value.lto],representationId:t.data.value.to,width:this.metricsExt.getVideoWidthForRepresentation(t.data.value.to),height:this.metricsExt.getVideoHeightForRepresentation(t.data.value.to)});break;case"BufferLevel":n=document.createEvent("CustomEvent"),n.initCustomEvent("bufferLevel_updated",!1,!1,{type:t.data.stream,level:t.data.value.level}),e.getElement().dispatchEvent(n);break;case"State":n=document.createEvent("CustomEvent"),n.initCustomEvent("state_changed",!1,!1,{type:t.data.stream,state:t.data.value.current}),e.getElement().dispatchEvent(n);break}},H=function(e){g=e.data,this.reset(2)},j=function(e){y=e.data},K=function(e,t){var n=0;for(n=t.length-1;n>=0;n-=1)e.splice(n,1)},V=function(t){var n=e.getCurrentTime(),r=null,i=[],o=0;for(o=0;o<t.length;o+=1)r=t[o],n>=r.mediaStartTime&&(k("play_bitrate",r),this.debug.log("[MediaPlayer]["+r.streamType+"] send play_bitrate - b="+r.switchedQuality+", t="+r.mediaStartTime+"("+e.getPlaybackRate()+")"),i.push(o));K(t,i)},q=function(){0!==e.getPlaybackRate()&&(V.call(this,p),V.call(this,m))},G=function(){this.addEventListener("metricAdded",U.bind(this)),this.addEventListener("error",H.bind(this)),this.addEventListener("warning",j.bind(this)),this.addEventListener("timeupdate",q.bind(this))},Y=function(e){if(!0===e.altKey&&!0===e.ctrlKey&&!0===e.shiftKey&&86===e.keyCode)for(var t in console.log("[MediaPlayer] Version: "+this.getVersion()+" - "+this.getBuildDate()),C)console.log("["+C[t].getName()+"] Version: "+C[t].getVersion()+" - "+C[t].getBuildDate())},z=function(e){if(x&&I){if(!w){w=!0;var t={};t[c.dependencies.StreamController.eventList.ENAME_TEARDOWN_COMPLETE]=function(){for(var e in C)C[e].reset();I=null,x=!1,w=!1,this.debug.log("[MediaPlayer] Player is stopped"),F.call(this)&&B.call(this)}.bind(this),I.subscribe(c.dependencies.StreamController.eventList.ENAME_TEARDOWN_COMPLETE,t,void 0,!0),I.reset(e)}}else F.call(this)&&B.call(this)},W=function(e){if(!e)return null;var t={};return e.id&&(t.id=e.id),e.lang&&(t.lang=e.lang),e.subType&&(t.subType=e.subType),t},X=function(e){if(!I)return null;switch(e){case c.TRACKS_TYPE.AUDIO:return I.getAudioTracks();case c.TRACKS_TYPE.TEXT:return I.getSubtitleTracks()}return null},$=function(e){if(!I)return null;switch(e){case c.TRACKS_TYPE.AUDIO:return I.getSelectedAudioTrack();case c.TRACKS_TYPE.TEXT:return I.getSelectedSubtitleTrack()}return null},Q=function(e,t){if(!I)return null;switch(e){case c.TRACKS_TYPE.AUDIO:I.setAudioTrack(t);break;case c.TRACKS_TYPE.TEXT:I.setSubtitleTrack(t);break}return null},J=function(e,t){return!e&&!t||e===t},Z=function(e,t){return J(e.id,t.id)&&J(e.lang,t.lang)&&J(e.subType,t.subType)},ee=function(){if(arguments&&arguments.length>0){var e={};return"string"===typeof arguments[0]&&(e.url=arguments[0]),arguments[1]&&(e.protData=arguments[1]),e}},te=function(){var e=this.metricsModel.getReadOnlyMetricsFor("video"),t=e?this.metricsExt.getCurrentDVRInfo(e):null;return t};return u.mapValue("system",u),u.mapOutlet("system"),u.injectInto(s),{notifier:void 0,debug:void 0,eventBus:void 0,metricsExt:void 0,abrController:void 0,metricsModel:void 0,errHandler:void 0,config:void 0,getVersion:function(){return r},getVersionFull:function(){return-1===i.indexOf("@@")?r+"_"+i:r},getVersionDashJS:function(){return n},getBuildDate:function(){return-1===a.indexOf("@@")?a:"Not a builded version"},init:function(t){if(!t)throw new Error("MediaPlayer.init(): Invalid Argument");l||(u.injectInto(this),l=!0,this.debug.log("[MediaPlayer] Version: "+this.getVersionFull()+" - "+this.getBuildDate()),this.debug.log("[MediaPlayer] user-agent: "+navigator.userAgent)),e=u.getObject("videoModel"),e.setElement(t),G.call(this),d=u.getObject("debugController"),d.init(r),window.addEventListener("keydown",Y.bind(this))},addEventListener:function(t,n,r){N(),"hasplayer"===c.PUBLIC_EVENTS[t]?this.eventBus.addEventListener(t,n,r):e.listen(t,n,r)},removeEventListener:function(t,n){N(),"hasplayer"===c.PUBLIC_EVENTS[t]?this.eventBus.removeEventListener(t,n):e.unlisten(t,n)},getVideoModel:function(){return e},getDebug:function(){return this.debug},getMetricsExt:function(){return this.metricsExt},setConfig:function(e){this.config&&e&&(this.debug.log("[MediaPlayer] set config: "+JSON.stringify(e,null,"\t")),this.config.setParams(e))},setParams:function(e){this.setConfig(e)},setDebug:function(e){if(N(),"boolean"!==typeof e)throw new Error("MediaPlayer.setDebug(): Invalid Arguments");!0===e?this.debug.setLevel(4):this.debug.setLevel(0)},getAutoPlay:function(){return A},setAutoPlay:function(e){A=e},setInitialQualityFor:function(e,t){S[e]=t},getQualityFor:function(e){return N(),this.abrController.getQualityFor(e)},setQualityFor:function(e,t){if(N(),"number"!==typeof t)throw new Error("MediaPlayer.setQualityFor(): Invalid Arguments");this.abrController.setQualityFor(e,t)},getAutoSwitchQuality:function(){return N(),this.abrController.getAutoSwitchBitrate()},setAutoSwitchQuality:function(e){if(N(),"boolean"!==typeof e)throw new Error("MediaPlayer.setAutoSwitchQuality(): Invalid Arguments");this.abrController.setAutoSwitchBitrate(e)},getScheduleWhilePaused:function(){return R},setScheduleWhilePaused:function(e){if("boolean"!==typeof e)throw new Error("MediaPlayer.setScheduleWhilePaused(): Invalid Arguments");R=e},setDefaultAudioLang:function(e){if("string"!==typeof e)throw new Error("MediaPlayer.setDefaultAudioLang(): Invalid Arguments");v=e},getDefaultAudioLang:function(){return v},setDefaultSubtitleLang:function(e){if("string"!==typeof e)throw new Error("MediaPlayer.setDefaultSubtitleLang(): Invalid Arguments");_=e},getDefaultSubtitleLang:function(){return _},load:function(e){var t={video:{"ABR.keepBandwidthCondition":!0},audio:{"ABR.keepBandwidthCondition":!0}};if(arguments&&arguments.length>0&&"object"!==typeof arguments[0]&&(console.warn('You are using "deprecated" call of the method load, please refer to the documentation to change prameters call'),e=ee.apply(null,arguments)),!e||!e.url)throw new Error("MediaPlayer.load(): stream has no url.");p=[],m=[],N(),this.reset(0),S.video>=0&&(this.abrController.setQualityFor("video",S.video),t.video["ABR.keepBandwidthCondition"]=!1,S.video=-1),S.audio>=0&&(this.abrController.setQualityFor("audio",S.audio),t.audio["ABR.keepBandwidthCondition"]=!1,S.audio=-1),this.setConfig(t),g=null,y=null,D=e,z.call(this,0)},play:function(){N(),e.play()},seek:function(t){var n=null,r=0;if(N(),"number"!==typeof t||isNaN(t))throw new Error("MediaPlayer.seek(): Invalid Arguments");if(this.isLive()){if(n=this.getDVRWindowRange(),r=I.getLiveDelay(),null===n)throw new Error("MediaPlayer.seek(): impossible for live stream");if(t<n.start||t>n.end)throw new Error("MediaPlayer.seek(): seek value outside available time range");t>n.end-r&&(t=n.end-r),I.seek(t,!0)}else{if(t<0||t>e.getDuration())throw new Error("MediaPlayer.seek(): seek value outside available time range");e.setCurrentTime(t)}},pause:function(){N(),e.pause()},stop:function(){for(var t in N(),e.pause(),this.isLive()||e.setCurrentTime(0),C)C[t].stop()},reset:function(e){N(),this.setQualityFor("video",0),this.setQualityFor("audio",0),D=null,z.call(this,e)},refreshManifest:function(e){N(),I.refreshManifest(e)},getDuration:function(){return N(),e.getDuration()},isLive:function(){return N(),e.getDuration()===Number.POSITIVE_INFINITY},getPosition:function(){return N(),e.getCurrentTime()},getDVRWindowRange:function(){if(N(),!this.isLive())return null;var e=te.call(this);return e?e.range:null},getDVRWindowSize:function(){return N(),this.isLive(),null},getDVRSeekOffset:function(e){if(N(),!this.isLive())return null;var t=te.call(this),n=t?t.range.start+e:null;return n&&n>t.range.end&&(n=t.range.end),n},getVideoBitrates:function(){return N(),f?f.slice():[]},getMetricsFor:function(e){var t=this.metricsModel.getReadOnlyMetricsFor(e);return t},getTrickModeSpeed:function(){return I?I.getTrickModeSpeed():0},setTrickModeSpeed:function(e){N(),I&&I.setTrickModeSpeed(e)},getError:function(){return g},getWarning:function(){return y},getTracks:function(e){if(N(),!e||e!==c.TRACKS_TYPE.AUDIO&&e!==c.TRACKS_TYPE.TEXT)throw new Error('MediaPlayer Invalid Argument - "type" should be defined and shoud be kind of MediaPlayer.TRACKS_TYPE');var t=X(e);if(!t)return[];for(var n=[],r=0;r<t.length;r+=1)n.push(W(t[r]));return n},selectTrack:function(e,t){if(N(),!e||e!==c.TRACKS_TYPE.AUDIO&&e!==c.TRACKS_TYPE.TEXT)throw new Error('MediaPlayer Invalid Argument - "type" should be defined and shoud be kind of MediaPlayer.TRACKS_TYPE');if(!t||!(t.id||t.lang||t.subType))throw new Error("MediaPlayer.selectTrack(): track parameter is not in valid");var n=X(e);if(n){var r=$(e);if(r&&Z(r,t))this.debug.log("[MediaPlayer] "+e+" track ["+t.id+" - "+t.lang+"] is already selected");else for(var i=0;i<n.length;i+=1)if(Z(n[i],t))return void Q(e,n[i])}else this.debug.error("[MediaPlayer] No available track for type "+e)},getSelectedTrack:function(e){if(N(),!e||e!==c.TRACKS_TYPE.AUDIO&&e!==c.TRACKS_TYPE.TEXT)throw new Error('MediaPlayer Invalid Argument - "type" should be defined and shoud be kind of MediaPlayer.TRACKS_TYPE');return W($(e))},enableSubtitles:function(e){if(N(),"boolean"!==typeof e)throw new Error("MediaPlayer.enableSubtitles(): Invalid Arguments");E=e,I&&I.enableSubtitles(E)},isSubtitlesEnabled:function(){return N(),E},enableSubtitleExternDisplay:function(e){if("boolean"!==typeof e)throw new Error("MediaPlayer.enableSubtitleExternDisplay(): Invalid Arguments");this.config.setParams({"TextTrackExtensions.displayModeExtern":e})},getTTMLRenderingDiv:function(){return e?e.getTTMLRenderingDiv():null},attachTTMLRenderingDiv:function(t){N(),e.setTTMLRenderingDiv(t)},getMute:function(){return N(),e.getMute()},setMute:function(t){if(N(),"boolean"!==typeof t)throw new Error("MediaPlayer.setMute(): Invalid Arguments");e.setMute(t)},getVolume:function(){return N(),e.getVolume()},setVolume:function(t){if(N(),"number"!==typeof t||t<0||t>1)throw new Error("MediaPlayer.setVolume(): Invalid Arguments");e.setVolume(t)},getTerminalId:function(){var e=b(),t=T();return t.name+"-"+t.bits+"-"+e.name},addPlugin:function(e){if(N(),void 0===e)throw new Error("MediaPlayer.addPlugin(): plugin undefined");if("function"!==typeof e.getName||"function"!==typeof e.getVersion||"function"!==typeof e.init||"function"!==typeof e.load||"function"!==typeof e.stop||"function"!==typeof e.reset)throw new Error("MediaPlayer.addPlugin(): plugin API not compliant");C[e.getName()]&&C[e.getName()].destroy(),this.debug.log("[MediaPlayer] Add plugin '"+e.getName()+"' (v"+e.getVersion()+")"),C[e.getName()]=e,e.deferInit=t.defer(),l&&e.init(this,function(){this.deferInit.resolve()}.bind(e))},removePlugin:function(e){var t;if(void 0===e)throw new Error("MediaPlayer.removePlugin(): plugin undefined");if("string"===typeof e)t=e;else{if("function"!==typeof e.getName)throw new Error("MediaPlayer.removePlugin(): plugin API not compliant");t=e.getName()}C[t]&&(this.debug.log("[MediaPlayer] Remove plugin '"+t),C[t].destroy(),C[t]=null,delete C[t])}}},c.prototype={constructor:c},c.dependencies={},c.dependencies.protection={},c.dependencies.protection.servers={},c.utils={},c.models={},c.modules={},c.vo={},c.vo.metrics={},c.vo.protection={},c.rules={},c.rules.o={},c.di={},c.PUBLIC_EVENTS={error:"hasplayer",warning:"hasplayer",manifestUrlUpdate:"hasplayer",metricAdded:"hasplayer",metricChanged:"hasplayer",cueEnter:"hasplayer",cueExit:"hasplayer",play_bitrate:"video",download_bitrate:"video",bufferLevel_updated:"video",state_changed:"video"},c.TRACKS_TYPE={AUDIO:"audio",TEXT:"text"},c.hasMediaSourceExtension=function(){return(new c.utils.Capabilities).supportsMediaSource()},c.hasMediaKeysExtension=function(){return(new c.utils.Capabilities).supportsMediaKeys()},c.dependencies.AbrController=function(){"use strict";var e=!0,t={},n={},r={},i={},o="",a=function(e){return t.hasOwnProperty(e)||(t[e]=!0),t[e]},s=function(e,n){t[e]=n},u=function(e){var t;return n.hasOwnProperty(e)||(n[e]=0),t=n[e],t},l=function(e,t){n[e]=t},d=function(e){var t;return i.hasOwnProperty(e)||(i[e]=0),t=i[e],t},f=function(e,t){i[e]=t},h=function(t,n){var i,s,l,f,h,p,m=this,g=a(t),y=u(t),v=d(t),_=c.rules.SwitchRequest.prototype.NO_CHANGE,E=c.rules.SwitchRequest.prototype.NO_CHANGE,b=c.rules.SwitchRequest.prototype.NO_CHANGE,T=[],S={};if(!e||!g)return m.debug.log("[AbrController]["+t+"] ABR disabled"),{quality:y,confidence:v};for(m.debug.log("[AbrController]["+t+"] Check rules...."),l=m.getMetricsFor(n),h=m.abrRulesCollection.getRules(c.rules.BaseRulesCollection.prototype.QUALITY_SWITCH_RULES),i=0,s=h.length;i<s;i+=1)T.push(h[i].checkIndex(y,l,n,o));for(S[c.rules.SwitchRequest.prototype.STRONG]=c.rules.SwitchRequest.prototype.NO_CHANGE,S[c.rules.SwitchRequest.prototype.WEAK]=c.rules.SwitchRequest.prototype.NO_CHANGE,S[c.rules.SwitchRequest.prototype.DEFAULT]=c.rules.SwitchRequest.prototype.NO_CHANGE,i=0,s=T.length;i<s;i+=1)f=T[i],f.quality!==c.rules.SwitchRequest.prototype.NO_CHANGE&&(m.debug.log("[AbrController]["+t+"] Request for quality "+f.quality+", priority = "+f.priority+" ("+h[i].name+")"),S[f.priority]=Math.min(S[f.priority],f.quality)),!0===f.max&&(b=Math.min(b,f.quality));return S[c.rules.SwitchRequest.prototype.WEAK]!==c.rules.SwitchRequest.prototype.NO_CHANGE&&(E=c.rules.SwitchRequest.prototype.WEAK,_=S[c.rules.SwitchRequest.prototype.WEAK]),S[c.rules.SwitchRequest.prototype.DEFAULT]!==c.rules.SwitchRequest.prototype.NO_CHANGE&&(E=c.rules.SwitchRequest.prototype.DEFAULT,_=S[c.rules.SwitchRequest.prototype.DEFAULT]),S[c.rules.SwitchRequest.prototype.STRONG]!==c.rules.SwitchRequest.prototype.NO_CHANGE&&(E=c.rules.SwitchRequest.prototype.STRONG,_=S[c.rules.SwitchRequest.prototype.STRONG]),_!==c.rules.SwitchRequest.prototype.NO_CHANGE&&void 0!==_&&(y=_),E!==c.rules.SwitchRequest.prototype.NO_CHANGE&&void 0!==E&&(v=E),b!==c.rules.SwitchRequest.prototype.NO_CHANGE&&(r[t]=b),p=m.manifestExt.getRepresentationCount(n),y<0&&(y=0),y>=p&&(y=p-1),v!==c.rules.SwitchRequest.prototype.STRONG&&v!==c.rules.SwitchRequest.prototype.WEAK&&(v=c.rules.SwitchRequest.prototype.DEFAULT),m.debug.info("[AbrController]["+t+"] Request quality: "+y),{quality:y,confidence:v}},p=function(e,t){var n,r=this.metricsExt.getBitratesForType(e,t),i=this.config.getParamFor(e,"ABR.minQuality","number",-1),o=this.config.getParamFor(e,"ABR.maxQuality","number",-1),a=this.config.getParamFor(e,"ABR.minBandwidth","number",-1),s=this.config.getParamFor(e,"ABR.maxBandwidth","number",-1),u=r.length;if(-1!==a)for(n=0;n<r.length;n++)if(r[n]>=a){i=-1===i?n:Math.max(n,i);break}if(-1!==s)for(n=r.length-1;n>=0;n--)if(r[n]<=s){o=-1===o?n:Math.min(n,o);break}return i=i>=u?u-1:i,i=i<0?0:i,o=o>=u||o<0?u-1:o,{min:i,max:o}};return{debug:void 0,abrRulesCollection:void 0,manifestExt:void 0,metricsModel:void 0,metricsExt:void 0,config:void 0,getAutoSwitchBitrate:function(){return e},setAutoSwitchBitrate:function(t){this.debug.log("[AbrController] Set auto switch: "+t),e=t},getMetricsFor:function(e){var t,n;return t=this.manifestExt.getIsVideo(e),t?this.metricsModel.getMetricsFor("video"):(n=this.manifestExt.getIsAudio(e),n?this.metricsModel.getMetricsFor("audio"):this.metricsModel.getMetricsFor("stream"))},getPlaybackQuality:function(e,t){var n,i,o,a=this,s=this.getQualityFor(e),u=-1,d=-1,c=this.config.getParamFor(e,"ABR.switchUpIncrementally","boolean",!1);if(o=h.call(this,e,t),n=o.quality,i=o.confidence,a.getAutoSwitchBitrate()){c&&n>s&&(a.debug.log("[AbrController]["+e+"] Incremental switch => quality: "+n),n=s+1);var m=p.call(a,e,t);u=m.min,d=m.max,n<u&&(n=u,a.debug.log("[AbrController]["+e+"] New quality < min => "+n)),n>d&&(n=d,a.debug.log("[AbrController]["+e+"] New quality > max => "+n)),n>r[e]&&(n=r[e],a.debug.log("[AbrController]["+e+"] Max allowed quality = "+n))}return l.call(a,e,n),f.call(a,e,i),a.debug.info("[AbrController]["+e+"] Set quality: "+n),{quality:n,confidence:i}},getAutoSwitchFor:function(e){return a(e)},setAutoSwitchFor:function(e,t){var n=a(e);t!==n&&(this.debug.log("[AbrController]["+e+"] Set auto switch: "+t),s(e,t))},getQualityFor:function(e){return u(e)},setQualityFor:function(e,t){var n=u(e);t!==n&&(this.debug.log("[AbrController]["+e+"] Set playback quality: "+t),l(e,t))},isMinQuality:function(e,t,n){var r=p.call(this,e,t);return n<=r.min},setPlayerState:function(e){o=e}}},c.dependencies.AbrController.prototype={constructor:c.dependencies.AbrController},c.dependencies.AbrController.BANDWIDTH_SAFETY=.9,c.dependencies.BufferController=function(){"use strict";var e,n,r,i,o,a,s,u,l,f,h="READY",p=h,m=!1,g=!1,y=!1,v=[],E=!1,T=-1,S=!0,I=!1,w=!1,x=-1,A=-1,D=!1,R=!1,M=!1,C=null,N=null,P=null,L=0,O=!1,F=null,B=null,k=!1,U=0,H=!0,j=!1,K=null,V=null,q=!0,G=!1,Y=-1,z=0,W=1,X=Y,$=-1,Q=null,J=3,Z=0,ee=null,te=-1,ne=null,re=NaN,ie="Safari"===b().name,oe="WebKit"===b().name,ae="Firefox"===b().name,se=function(){we.call(this)&&null!==P&&this.fragmentController.onBufferControllerStateChange()},ue=function(e,t){var n=0,r=null;!1===q&&(r=V.start,n=e.getTime()-r.getTime(),V.duration=n,V.stopreason=t,q=!0)},le=function(e){"text"!==i&&(this.debug.info("[BufferController]["+i+"] stalled = "+e),D=e,this.videoModel.stallStream(i,D),this.abrController.setPlayerState(D?"buffering":"playing"))},de=function(){m&&g&&(this.debug.info("[BufferController]["+i+"] startPlayback"),Ue.call(this))},ce=function(){var e;if(!0!==g&&null===Q){if(!1===E&&(e=new Date,ue(e,c.vo.metrics.PlayList.Trace.USER_REQUEST_STOP_REASON),K=this.metricsModel.addPlayList(i,e,0,c.vo.metrics.PlayList.INITIAL_PLAY_START_REASON)),M){if("application/ttml+xml"===F.mimeType)return;M=!1}g=!0,this.debug.info("[BufferController]["+i+"] START"),y=!0,X===Y&&this.metricsModel.addState(i,"buffering",this.videoModel.getCurrentTime()),X=z,$=-1,ee=null,this.fragmentController.clearExecutedRequests(P),de.call(this)}},fe=function(e){var n=this;!0===E&&T===e||(this.debug.info("[BufferController]["+i+"] SEEK: "+e),!0===g&&pe.call(this),E=!0,T=e,t.when(!Q||Q.promise).then(function(){le.call(n,!0),ce.call(n)}))},he=function(){this.debug.info("[BufferController]["+i+"] SEEKED"),E=!1,T=-1},pe=function(){g&&(this.debug.info("[BufferController]["+i+"] STOP"),clearTimeout(l),clearTimeout(f),g=!1,y=!1,E=!1,T=-1,ue(new Date,c.vo.metrics.PlayList.Trace.USER_REQUEST_STOP_REASON),this.fragmentController.abortRequestsForModel(P))},me=function(t){return e[t]},ge=function(e){this.debug.info("[BufferController]["+i+"] Load request ",null!==e.url?e.url:e.quality)},ye=function(e,t){void 0!==e.sequenceNumber&&(te=e.sequenceNumber),this.fragmentController.isInitializationRequest(e)?ve.call(this,e,t):_e.call(this,e,t)},ve=function(e,t){if(we.call(this)){var n=t.data,r=e.quality,o=this;this.debug.log("[BufferController]["+i+"] Initialization loaded ",r);try{this.fragmentController.process(n).then(function(t){t?(v[r]=t,o.debug.info("[BufferController]["+i+"] Buffer initialization segment ",null!==e.url?e.url:e.quality),Ee.call(o,t,e.quality).then(function(){we.call(o)&&Ne.call(o)})):Ne.call(o)},function(e){xe.call(o),e.name?o.errHandler.sendError(e.name,e.message,e.data):o.errHandler.sendError(c.dependencies.ErrorHandler.prototype.INTERNAL_ERROR,"Internal error while processing media segment",e.message)})}catch(a){xe.call(o),a.name?o.errHandler.sendError(a.name,a.message,a.data):o.errHandler.sendError(c.dependencies.ErrorHandler.prototype.INTERNAL_ERROR,"Internal error while processing media segment",a.message)}}},_e=function(e,r){if(we.call(this)){var o,a=this.manifestExt.getEventStreamForAdaptationSet(this.getData()),s=this.manifestExt.getEventStreamForRepresentation(this.getData(),n),u=this;re=e.duration,Z=0,this.debug.log("[BufferController]["+i+"] Media loaded ",e.url),!0===this.chunkAborted&&(this.chunkAborted=!1),1===this.chunkMissingCount&&(this.chunkMissingCount=0);try{this.fragmentController.process(r.data,e,n).then(function(r){r?((a.length>0||s.length>0)&&(o=Se.call(u,r,e,a,s),u.eventController.addInbandEvents(o)),u.debug.info("[BufferController]["+i+"] Buffer segment from url ",e.url),r=Ie.call(u,r),t.when(!w||De.call(u)).then(function(){w=!1,ae&&(B.timestampOffset=-Te(r,e)),Ee.call(u,r,e.quality,e).then(function(){x!==e.quality&&(u.debug.log("[BufferController]["+i+"] Buffered quality changed: "+e.quality),u.metricsModel.addBufferedSwitch(i,e.startTime,n.id,e.quality),x=e.quality),xe.call(u),Ue.call(u)})})):(u.debug.error("[BufferController]["+i+"] Error with segment data, no bytes to push"),xe.call(u),Ue.call(u))},function(e){xe.call(u),e.name?u.errHandler.sendError(e.name,e.message,e.data):u.errHandler.sendError(c.dependencies.ErrorHandler.prototype.INTERNAL_ERROR,"Internal error while processing media segment",e.message)})}catch(l){xe.call(u),l.name?u.errHandler.sendError(l.name,l.message,l.data):u.errHandler.sendError(c.dependencies.ErrorHandler.prototype.INTERNAL_ERROR,"Internal error while processing media segment",l.message)}}},Ee=function(e,r,o){var a=t.defer(),u=this.videoModel.getCurrentTime(),l=new Date,d=this;if(!0===q&&(q=!1,V=this.metricsModel.appendPlayListTrace(K,n.id,null,l,u,null,1,null)),Le())return Ae.call(this).then(function(){Le()&&(d.debug.log("[BufferController]["+i+"] Buffering segment"),d.sourceBufferExt.append(B,e,o).then(function(){if(d.debug.log("[BufferController]["+i+"] Segment buffered"),O=!1,L>1&&!ie&&!oe)De.call(d,-1,Fe.call(d)-s).then(function(){be.call(d),a.resolve()});else if(k){var e=j?-1:Fe.call(d)+re,t=j?Fe.call(d)-re:-1;De.call(d,e,t).then(function(){be.call(d),a.resolve()})}else be.call(d),a.resolve();d.system.notify("bufferUpdated")},function(t){"text"===i?(d.debug.error("[BufferController]["+i+"] Failed to append data in source buffer : "+t.err.message),a.resolve()):(d.errHandler.sendError(c.dependencies.ErrorHandler.prototype.MEDIA_ERR_APPEND_SOURCEBUFFER,"Failed to append data into "+i+" source buffer",new c.vo.Error(t.err.code,t.err.name,t.err.message)),t.err.code===c.dependencies.ErrorHandler.prototype.DOM_ERR_QUOTA_EXCEEDED?({data:e,quality:r},C=a,O=!0,0,pe.call(d)):a.resolve())}))}),a.promise},be=function(){var e,t,n=null;if(this.debug.getLevel()>=this.debug.INFO&&B){if(n=this.sourceBufferExt.getAllRanges(B),null===n||0===n.length)return;for(e=0,t=n.length;e<t;e+=1)this.debug.info("[BufferController]["+i+"] Buffered range ["+e+"]: "+n.start(e)+" - "+n.end(e)+" ("+this.getVideoModel().getCurrentTime()+")")}},Te=function(e,t){var n,r,i=_.deserialize(e),o=i.getBoxByType("moov"),a=i.getBoxByType("moof"),s=null===a?null:a.getBoxByType("traf"),u=null===s?null:s.getBoxByType("trun");if(null===u||0===u.samples_table.length)return 0;if(n=u.samples_table[0].sample_composition_time_offset,void 0===n)return 0;if(o){var l=o.getBoxByType("mvhd");r=l.timescale}else r=t.timescale;return n/r},Se=function(e,t,n,r){var i,o,a,s=[],u=0,l=Math.pow(256,2),c=Math.pow(256,3),f=Math.max(isNaN(t.startTime)?0:t.startTime,0),h=[];G=!1,a=n.concat(r);for(var p=0;p<a.length;p++)h[a[p].schemeIdUri]=a[p];while(u<e.length){if(i=String.fromCharCode(e[u+4],e[u+5],e[u+6],e[u+7]),o=e[u]*c+e[u+1]*l+256*e[u+2]+1*e[u+3],"moov"===i||"moof"===i)break;if("emsg"===i){G=!0;var m=["","",0,0,0,0,""],g=0,y=u+12;while(y<o+u)0===g||1===g||6===g?(0!==e[y]?m[g]+=String.fromCharCode(e[y]):g+=1,y+=1):(m[g]=e[y]*c+e[y+1]*l+256*e[y+2]+1*e[y+3],y+=4,g+=1);var v=m[0],_=m[1],E=m[2],b=m[3],T=m[4],S=m[5],I=m[6],w=f*E+b;if(h[v]){var x=new d.vo.Event;x.eventStream=h[v],x.eventStream.value=_,x.eventStream.timescale=E,x.duration=T,x.id=S,x.presentationTime=w,x.messageData=I,x.presentationTimeDelta=b,s.push(x)}}u+=o}return s},Ie=function(e){if(!G)return e;var t,n,r=e.length,i=0,o=0,a=0,s=Math.pow(256,2),u=Math.pow(256,3),l=new Uint8Array(e.length);while(i<r){if(t=String.fromCharCode(e[i+4],e[i+5],e[i+6],e[i+7]),n=e[i]*u+e[i+1]*s+256*e[i+2]+1*e[i+3],"emsg"!==t)for(a=i;a<i+n;a++)l[o]=e[a],o+=1;i+=n}return l.subarray(0,o)},we=function(){return!!g||(xe.call(this),!1)},xe=function(){Q&&(Q.resolve(),Q=null)},Ae=function(){var e,n,r=t.defer(),i=0;return O?(n=function(){var t,o,a=this.videoModel.getCurrentTime(),s=0;o=this.fragmentController.getExecutedRequestForTime(P,a),t=o&&!isNaN(o.startTime)?o.startTime:Math.floor(a),e=o&&!isNaN(o.duration)?o.duration:1,De.call(this,s,t).then(function(t){i+=t,i>=e?r.resolve():setTimeout(n,1e3*e)})},n.call(this),r.promise):t.when(!0)},De=function(e,n){var o,a,s=t.defer(),u=this;return 0===B.buffered.length?(s.resolve(0),s.promise):(o=void 0!==e&&-1!==e?e:B.buffered.start(0),a=void 0!==n&&-1!==n?n:B.buffered.end(B.buffered.length-1),a<=o?(s.resolve(0),s.promise):(this.debug.info("[BufferController]["+i+"] Remove from "+o+" to "+a+" ("+this.getVideoModel().getCurrentTime()+")"),"text"!==i&&this.sourceBufferExt.abort(r,B),this.sourceBufferExt.remove(B,o,a,N.duration,r).then(function(){u.fragmentController.removeExecutedRequestsBeforeTime(P,a+1),u.fragmentController.cancelPendingRequestsForModel(P),s.resolve(a-o)},function(e){u.errHandler.sendWarning(c.dependencies.ErrorHandler.prototype.MEDIA_ERR_REMOVE_SOURCEBUFFER,"Failed to remove data from "+i+" source buffer",new c.vo.Error(e.code,e.name,e.message)),s.resolve(0)}),s.promise))},Re=function(e){we.call(this)&&(xe.call(this),e.aborted?je.call(this):"text"!==i?(Z+=1,Z===J?this.errHandler.sendError(c.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_CONTENT,"Failed to download media segment",{url:e.url,status:e.status}):(this.errHandler.sendWarning(c.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_CONTENT,"Failed to download media segment",{url:e.url,status:e.status}),ee=e,X===z&&Ye.call(this))):this.errHandler.sendWarning(c.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_CONTENT,"Failed to download media segment",{url:e.url,status:e.status}))},Me=function(){this.debug.log("[BufferController]["+i+"] Stream is complete."),M=!0,ue(new Date,c.vo.metrics.PlayList.Trace.END_OF_CONTENT_STOP_REASON),xe.call(this),pe.call(this),this.system.notify("bufferingCompleted")},Ce=function(n){if(!we.call(this))return t.when(null);var r=this;return v[n]?(this.debug.info("[BufferController]["+i+"] Buffer initialization segment, quality = ",n),Ee.call(this,v[n],n).then(function(){r.debug.log("[BufferController]["+i+"] Initialization segment buffered"),we.call(r)&&Ne.call(r)}),t.when(null)):this.indexHandler.getInitRequest(e[n])},Ne=function(){if(we.call(this)){var e,t,r=Fe.call(this),o=this;w?t=r:(e=this.sourceBufferExt.getBufferRange(B,r),t=e?e.end:r),-1===te||E||w?(this.debug.log("[BufferController]["+i+"] loadNextFragment for time: "+t),this.indexHandler.getSegmentRequestForTime(n,t).then(Pe.bind(this),function(){A=-1,Me.call(o)})):(this.debug.log("[BufferController]["+i+"] loadNextFragment for sequence number: "+te),this.indexHandler.getNextSegmentRequestFromSN(n,te).then(Pe.bind(this)))}},Pe=function(e){if(we.call(this)){var t=this.manifestModel.getValue();null===e||e.action!==e.ACTION_COMPLETE?null!==e?(k&&(e=this.indexHandler.getIFrameRequest(e)),this.fragmentController.isFragmentLoadedOrPending(this,e)?(this.debug.log("[BufferController]["+i+"] new fragment request => already loaded or pending "+e.url),this.indexHandler.getNextSegmentRequest(n).then(Pe.bind(this))):(this.fragmentController.prepareFragmentForLoading(this,e,ge,ye,Re,null),se.call(this))):(this.debug.log("[BufferController]["+i+"] loadNextFragment failed"),xe.call(this),R?"M3U"===t.name&&He.call(this):Me.call(this)):Me.call(this)}},Le=function(){return!!F&&!!B},Oe=function(){var e=this.videoModel.getCurrentTime();return N.start+N.duration-e},Fe=function(){var e=-1,t=this.videoModel.getCurrentTime();return e=E?T:t,e},Be=function(){var e,r=t.defer(),o=n.segmentAvailabilityRange.end,a=this;return this.debug.log("[BufferController]["+i+"] Manifest live edge = "+o),e=Math.max(o-u,n.segmentAvailabilityRange.start),this.indexHandler.getSegmentRequestForTime(n,e).then(function(e){N.liveEdge=e.startTime,a.debug.log("[BufferController]["+i+"] Live edge = "+N.liveEdge),r.resolve(N.liveEdge)}),r.promise},ke=function(e){if(Le()){var t=Fe.call(this);L=this.sourceBufferExt.getBufferLength(B,t),this.debug.log("[BufferController]["+i+"] Working time = "+t+", Buffer level = "+L.toFixed(3)),e&&this.metricsModel.addBufferLevel(i,new Date,L),this.updateBufferState()}},Ue=function(){var e,t;we.call(this)&&(this.debug.log("[BufferController]["+i+"] Check buffer..."),ke.call(this,!0),D&&L>a&&le.call(this,!1),e=Oe.call(this),this.debug.log("[BufferController]["+i+"] time to end = "+e),k?L<1&&je.call(this):I||w||L<o&&(o<e||o>=e&&!M)?je.call(this):(t=L-o+.5,He.call(this,t)))},He=function(e){var t=this;e=e||1,this.debug.log("[BufferController]["+i+"] Check buffer in = "+e.toFixed(3)+" ms (bufferLevel = "+L+")"),clearTimeout(l),l=setTimeout(function(){l=null,Ue.call(t)},1e3*e)},je=function(){var e,r=new Date,o=this.videoModel.getCurrentTime(),a=this.manifestModel.getValue(),s=!1,u=null,l=this;null!==Q&&this.debug.error("[BufferController]["+i+"] deferredFragmentBuffered has not been resolved, create a new one is not correct."),Q=t.defer(),this.debug.log("[BufferController]["+i+"] Start buffering process..."),qe.call(this),s=0===v.length&&"M3U"!==a.name,e=this.abrController.getPlaybackQuality(i,F).quality,n=me.call(this,e),e!==A&&(this.debug.log("[BufferController]["+i+"] currentDownloadQuality changed : "+e),A=e,s=!0,ue(new Date,c.vo.metrics.PlayList.Trace.REPRESENTATION_SWITCH_STOP_REASON),this.debug.log("[BufferController]["+i+"] Send RepresentationSwitch with quality = "+e),this.metricsModel.addRepresentationSwitch(i,r,o,n.id,e),u=Ke.call(this)),t.when(u||!0).then(function(){!0===s?Ce.call(l,e).then(function(e){null!==e&&(l.fragmentController.prepareFragmentForLoading(l,e,ge,ye,Re,null),se.call(l))},function(e){xe.call(l),e.name===c.dependencies.ErrorHandler.prototype.MEDIA_ERR_CODEC_UNSUPPORTED?l.errHandler.sendError(e.name,e.message,e.data):l.errHandler.sendError(c.dependencies.ErrorHandler.prototype.INTERNAL_ERROR,"Internal error while processing initialization segment",e.message)}):Ne.call(l)},function(e){xe.call(l),e&&l.errHandler.sendError(e.name,e.message,e.data)})},Ke=function(){var r,o,a,s=this.manifestModel.getValue(),u=this;return"M3U"!==s.name?t.when(!0):R||"SegmentList"!==n.segmentInfoType?(ne&&(clearTimeout(ne),ne=null),r=t.defer(),a=this.manifestExt.getDataIndex(F,s,N.index),o=s.Period_asArray[N.index].AdaptationSet_asArray[a].Representation_asArray[A],this.debug.log("[BufferController]["+i+"] Update playlist for representation "+o.id),this.parser.hlsParser.updatePlaylist(o,F).then(function(){e=Ve.call(u,F,N),n=me.call(u,A),o=s.Period_asArray[N.index].AdaptationSet_asArray[a].Representation_asArray[A];var t=o.SegmentList.SegmentURL_asArray;t>0&&(re=t[t.length-1]-1),ne=setTimeout(function(){Ke.call(u)},1e3*re),r.resolve()},function(e){e&&u.errHandler.sendWarning(e.name,e.message,e.data),r.reject(e)}),r.promise):t.when(!0)},Ve=function(e,t){var n,r,i=this.manifestModel.getValue();return n=this.manifestExt.getDataIndex(e,i,t.index),r=this.manifestExt.getAdaptationsForPeriod(i,t),this.manifestExt.getRepresentationsForAdaptation(i,r[n])},qe=function(){if(!1===S)return!1;this.debug.log("[BufferController]["+i+"] Data changed"),e=Ve.call(this,F,N),n=me.call(this,this.abrController.getPlaybackQuality(i,F).quality),this.bufferExt.updateData(F,i),I&&(v=[],this.fragmentController.clearExecutedRequests(P),w=!0,"text"===i&&(B.UpdateLang(F.id,F.lang),"application/ttml+xml"===F.mimeType&&De.call(this))),S=!1,I=!1},Ge=function(e){var t,n,r=this.abrController.getQualityFor(i);if(!this.abrController.isMinQuality(i,F,r)){n=this.abrRulesCollection.getRules(c.rules.BaseRulesCollection.prototype.ABANDON_FRAGMENT_RULES);var o=function(e){e.quality<r&&(this.fragmentController.abortRequestsForModel(P),this.debug.info("[BufferController]["+i+"] Abandon current segment download"))};for(t=0;t<n.length;t++)n[t].execute(e.data.request,o.bind(this))}},Ye=function(){null!==ee&&(this.debug.log("[BufferController]["+i+"] Signal segment loading failed"),this.system.notify("segmentLoadingFailed",ee),ee=null)};return{videoModel:void 0,metricsModel:void 0,manifestExt:void 0,manifestModel:void 0,bufferExt:void 0,sourceBufferExt:void 0,abrController:void 0,parser:void 0,fragmentExt:void 0,indexHandler:void 0,debug:void 0,system:void 0,errHandler:void 0,config:void 0,abrRulesCollection:void 0,initialize:function(e,t,n,r,i,l,d){var f=this.manifestModel.getValue();this.debug.log("[BufferController]["+e+"] Initialize"),this[c.dependencies.FragmentLoader.eventList.ENAME_LOADING_PROGRESS]=Ge,R=this.manifestExt.getIsDynamic(f),this.setMediaSource(l),this.setType(e),this.setBuffer(r),this.setFragmentController(i),this.setEventController(d),o=this.config.getParamFor(e,"BufferController.minBufferTime","number",-1),a=this.config.getParamFor(e,"BufferController.minBufferTimeForPlaying","number",c.dependencies.BufferExtensions.BUFFER_TIME_AT_STARTUP),s=this.config.getParamFor(e,"BufferController.bufferToKeep","number",c.dependencies.BufferExtensions.DEFAULT_BUFFER_TO_KEEP),u=this.config.getParamFor(e,"BufferController.liveDelay","number",-1),this.updateData(n,t),this.load(),m=!0},load:function(){var e=this.manifestModel.getValue(),t=this;qe.call(this),n=me.call(this,this.abrController.getPlaybackQuality(i,F).quality),A=-1,De.call(this).then(function(){n&&(t.indexHandler.setIsDynamic(R),-1===o&&(o=t.bufferExt.decideBufferLength(e.minBufferTime,N.duration,y)),(-1===u||u<o)&&(u=o),e.minBufferTime=o,"video"===i&&(R?t.indexHandler.updateSegmentList(n).then(function(){Be.call(t).then(function(e){t.system.notify("startTimeFound",e)})}):t.indexHandler.getCurrentTime(n).then(function(e){e<n.segmentAvailabilityRange.start&&(e=n.segmentAvailabilityRange.start),t.system.notify("startTimeFound",e)})))})},getIndexHandler:function(){return this.indexHandler},getType:function(){return i},setType:function(e){i=e,void 0!==this.indexHandler&&this.indexHandler.setType(e)},getPeriodInfo:function(){return N},getVideoModel:function(){return this.videoModel},setVideoModel:function(e){this.videoModel=e},getFragmentController:function(){return this.fragmentController},setFragmentController:function(e){e&&(this.fragmentController=e,P=this.fragmentController.attachBufferController(this),P.fragmentLoader.subscribe(c.dependencies.FragmentLoader.eventList.ENAME_LOADING_PROGRESS,this),P.setType(i))},setEventController:function(e){this.eventController=e},getData:function(){return F},updateData:function(e,t){this.debug.log("[BufferController]["+i+"] Update data"),I=null!==F&&(F.id!==e.id||F.lang!==e.lang||F.subType!==e.subType),F=e,N=t,S=!0,I&&(this.debug.log("[BufferController]["+i+"] Track changed"),clearTimeout(l),l=null,M=!1,ce.call(this),null===Q&&Ue.call(this))},getHtmlVideoState:function(){return X},getAvailableRepresentations:function(){return e},getCurrentRepresentation:function(){return n},getBuffer:function(){return B},setBuffer:function(e){B=e},getMinBufferTime:function(){return o},setMinBufferTime:function(e){o=e},getLiveDelay:function(){return u},setMediaSource:function(e){r=e},isReady:function(){return p===h},isBufferingCompleted:function(){return M},updateManifest:function(){this.system.notify("manifestUpdate")},updateBufferState:function(){var e,t=this.videoModel.getCurrentTime(),n=-1===$?t:$,r=t-n,o=this;if(clearTimeout(f),f=null,!1!==g&&"text"!==i&&!k){switch(X){case Y:X=z,this.debug.info("[BufferController]["+i+"] BUFFERING - "+t+" - "+L),this.metricsModel.addState(i,"buffering",t);break;case z:!this.getVideoModel().isPaused()&&r>0&&L>=1?(X=W,this.debug.info("[BufferController]["+i+"] PLAYING - "+t),this.metricsModel.addState(i,"playing",t),E=!1,T=-1,Z=0):this.getVideoModel().isStalled()||(e=this.sourceBufferExt.getAllRanges(B));break;case W:if(!this.getVideoModel().isPaused()&&!this.getVideoModel().isSeeking()&&(r<=0&&L<=1||0===L))if(X=z,this.debug.info("[BufferController]["+i+"] BUFFERING - "+t+" - "+L),this.metricsModel.addState(i,"buffering",t),ee)Ye.call(this);else{var a;for(e=this.sourceBufferExt.getAllRanges(B),a=0;a<e.length;a++)if(t<e.start(a)&&(!R||e.start(a)-t<re))break;a<e.length&&(this.debug.info("[BufferController]["+i+"] BUFFERING => skip buffer discontinuity, seek to "+e.start(a)),this.videoModel.setCurrentTime(e.start(a)))}f=setTimeout(function(){f=null,ke.call(o,!1)},1e3);break}t>0&&($=t)}},updateStalledState:function(){D=this.videoModel.isStalled()},reset:function(e){var n=function(e){e&&(e.reject(),e=null)},o=t.defer(),a=this;return pe.call(this),this.sourceBufferExt.abort(r,B),ne&&(clearTimeout(ne),ne=null),t.when(!Q||Q.promise).then(function(){n(C),n(Q),P&&(P.fragmentLoader.unsubscribe(c.dependencies.FragmentLoader.eventList.ENAME_LOADING_PROGRESS,a.abrController),a.fragmentController.abortRequestsForModel(P),a.fragmentController.detachBufferController(P),P=null),v=[],!0,O=!1,null,!1,k&&(a.abrController.setAutoSwitchFor(i,H),a.abrController.setQualityFor(i,U)),e||a.sourceBufferExt.removeSourceBuffer(r,B),F=null,B=null,o.resolve()},function(){o.reject()}),o.promise},getSegmentDuration:function(){return re},setTrickMode:function(e,n){var r=t.defer();return this.debug.log("[BufferController]["+i+"] setTrickMode - enabled = "+e),k===e?(r.resolve(),r.promise):(k=e,k?(j=n,U=this.abrController.getQualityFor(i),H=this.abrController.getAutoSwitchFor(i),this.abrController.setAutoSwitchFor(i,!1),this.abrController.setQualityFor(i,0),r.resolve()):(this.abrController.setAutoSwitchFor(i,H),this.abrController.setQualityFor(i,U),De.call(this).then(function(){r.resolve()})),r.promise)},start:ce,seek:fe,stop:pe,seeked:he,updateBufferLevel:ke}},c.dependencies.BufferController.prototype={constructor:c.dependencies.BufferController},c.dependencies.BufferExtensions=function(){"use strict";var e,n,r=0,i=0,o=null,a=null,s=function(e){var t=this.metricsExt.getCurrentHttpRequest(e);return null!==t?(t.tresponse.getTime()-t.trequest.getTime())/1e3:0},u=function(){var e,t,n,s=this;return e=o?s.abrController.getQualityFor("audio"):r,t=a?s.abrController.getQualityFor("video"):i,n=e===r&&t===i,n};return{system:void 0,videoModel:void 0,metricsExt:void 0,metricsModel:void 0,abrController:void 0,bufferMax:void 0,updateData:function(e,t){if(e){var n=e.Representation_asArray.length-1;"audio"===t?(r=n,o=e):"video"===t&&(i=n,a=e)}},getTopQualityIndex:function(e){var t=null;return"audio"===e?t=r:"video"===e&&(t=i),t},decideBufferLength:function(t,n){return e=n===1/0?t>0?t:c.dependencies.BufferExtensions.DEFAULT_MIN_BUFFER_TIME:t>=n?Math.min(n,c.dependencies.BufferExtensions.DEFAULT_MIN_BUFFER_TIME):Math.min(n,t),e},getLeastBufferLevel:function(){var e=this.metricsModel.getReadOnlyMetricsFor("video"),t=this.metricsExt.getCurrentBufferLevel(e),n=this.metricsModel.getReadOnlyMetricsFor("audio"),r=this.metricsExt.getCurrentBufferLevel(n),i=null;return i=null===t||null===r?null!==r?r.level:null!==t?t.level:null:Math.min(r.level,t.level),i},getRequiredBufferLength:function(r,i,o,a){var l,d=this,f=d.metricsModel.getReadOnlyMetricsFor("video"),h=d.metricsModel.getReadOnlyMetricsFor("audio"),p=a>=c.dependencies.BufferExtensions.LONG_FORM_CONTENT_DURATION_THRESHOLD,m=t.defer(),g=!1;return d.bufferMax===c.dependencies.BufferExtensions.BUFFER_SIZE_MIN?(l=e,m.resolve(l)):d.bufferMax===c.dependencies.BufferExtensions.BUFFER_SIZE_INFINITY?(l=a,m.resolve(l)):d.bufferMax===c.dependencies.BufferExtensions.BUFFER_SIZE_REQUIRED?(n=e,o||r||(g=u.call(d)),g&&(n=p?c.dependencies.BufferExtensions.BUFFER_TIME_AT_TOP_QUALITY_LONG_FORM:c.dependencies.BufferExtensions.BUFFER_TIME_AT_TOP_QUALITY),l=n+i+Math.max(s.call(d,f),s.call(d,h)),m.resolve(l)):m.reject("invalid bufferMax value: "+d.bufferMax),m.promise},getBufferTarget:function(){return void 0===n?e:n}}},c.dependencies.BufferExtensions.BUFFER_SIZE_REQUIRED="required",c.dependencies.BufferExtensions.BUFFER_SIZE_MIN="min",c.dependencies.BufferExtensions.BUFFER_SIZE_INFINITY="infinity",c.dependencies.BufferExtensions.BUFFER_TIME_AT_STARTUP=1,c.dependencies.BufferExtensions.DEFAULT_MIN_BUFFER_TIME=16,c.dependencies.BufferExtensions.DEFAULT_BUFFER_TO_KEEP=30,c.dependencies.BufferExtensions.DEFAULT_LIVE_DELAY=16,c.dependencies.BufferExtensions.BUFFER_TIME_AT_TOP_QUALITY=30,c.dependencies.BufferExtensions.BUFFER_TIME_AT_TOP_QUALITY_LONG_FORM=300,c.dependencies.BufferExtensions.LONG_FORM_CONTENT_DURATION_THRESHOLD=600,c.dependencies.BufferExtensions.prototype.constructor=c.dependencies.BufferExtensions,c.utils.Capabilities=function(){},c.utils.Capabilities.prototype={constructor:c.utils.Capabilities,system:void 0,supportsMediaSource:function(){"use strict";var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t},supportsMediaKeys:function(){"use strict";var e="WebKitMediaKeys"in window,t="MSMediaKeys"in window,n="MediaKeys"in window;return e||t||n},supportsEncryptedMedia:function(){return this.system.hasMapping("protectionModel")},supportsCodec:function(e,t){"use strict";if(!(e instanceof HTMLMediaElement))throw"element must be of type HTMLMediaElement.";var n=e.canPlayType(t);return"probably"===n||"maybe"===n}},c.utils.Config=function(){"use strict";var e=["video","audio"],t={"BufferController.minBufferTimeForPlaying":-1,"BufferController.minBufferTime":-1,"BufferController.bufferToKeep":-1,"BufferController.liveDelay":-1,"ABR.minBandwidth":-1,"ABR.maxBandwidth":-1,"ABR.minQuality":-1,"ABR.maxQuality":-1,"ABR.switchUpIncrementally":-1,"ABR.switchUpRatioSafetyFactor":-1,"ABR.latencyInBandwidth":-1,"ABR.switchDownBufferTime":-1,"ABR.switchDownBufferRatio":-1,"ABR.switchLowerBufferTime":-1,"ABR.switchLowerBufferRatio":-1,"ABR.switchUpBufferTime":-1,"ABR.switchUpBufferRatio":-1,"ABR.keepBandwidthCondition":-1,"ABR.droppedFramesMinRatio":-1,"ABR.droppedFramesMaxRatio":-1,"ManifestLoader.RetryAttempts":-1,"ManifestLoader.RetryInterval":-1,"FragmentLoader.RetryAttempts":-1,"FragmentLoader.RetryInterval":-1,"Protection.licensePersistence":-1,backoffSeekToEnd:2,video:{},audio:{}},n=function(n){var r,i,o;for(r in n)if(n.hasOwnProperty(r)&&-1===r.indexOf("//"))if(e.indexOf(r)>-1)for(o in i=n[r],i)i.hasOwnProperty(o)&&(t[r][o]=n[r][o]);else t[r]=n[r]},r=function(e,t,n,r){var i=e[t];if(void 0===i||-1===i)return r;if(void 0!==n&&typeof i!==n)switch(n){case"number":i=Number(i);break;case"boolean":i="true"===i||"1"===i||1===i;break;default:break}return i},i=function(e,n,i){return r(t,e,n,i)},o=function(e,n,i,o){var a=t[e];return void 0!==a&&void 0!==a[n]?r(a,n,i,o):r(t,n,i,o)};return{debug:void 0,setup:function(){},setParams:function(e){n(e);var t=this.getParam("Debug.level","number",-1);-1!==t&&this.debug.setLevel(t)},getParam:function(e,t,n){return i(e,t,n)},getParamFor:function(e,t,n,r){return o(e,t,n,r)}}},c.utils.Config.prototype={constructor:c.utils.Config},c.di.Context=function(){"use strict";var e=function(){var e=document.createElement("video"),t=this.system.getObject("debug");c.models.ProtectionModel_21Jan2015.detect(e)?this.system.mapSingleton("protectionModel",c.models.ProtectionModel_21Jan2015):c.models.ProtectionModel_3Feb2014.detect(e)?this.system.mapClass("protectionModel",c.models.ProtectionModel_3Feb2014):c.models.ProtectionModel_01b.detect(e)?this.system.mapClass("protectionModel",c.models.ProtectionModel_01b):(t.log("No supported version of EME detected on this user agent!"),t.log("Attempts to play encrypted content will fail!"))};return{system:void 0,setup:function(){this.system.autoMapOutlets=!0,this.system.mapSingleton("capabilities",c.utils.Capabilities),this.system.mapSingleton("config",c.utils.Config),this.system.mapSingleton("debug",c.utils.Debug),this.system.mapSingleton("debugController",c.utils.DebugController),this.system.mapClass("domParser",c.utils.DOMParser),this.system.mapSingleton("eventBus",c.utils.EventBus),this.system.mapSingleton("textTrackExtensions",c.utils.TextTrackExtensions),this.system.mapSingleton("tokenAuthentication",c.utils.TokenAuthentication),this.system.mapSingleton("vttParser",c.utils.VTTParser),this.system.mapSingleton("ttmlParser",c.utils.TTMLParser),this.system.mapSingleton("ttmlRenderer",c.utils.TTMLRenderer),this.system.mapSingleton("manifestModel",c.models.ManifestModel),this.system.mapClass("metrics",c.models.MetricsList),this.system.mapSingleton("metricsModel",c.models.MetricsModel),this.system.mapSingleton("uriQueryFragModel",c.models.URIQueryAndFragmentModel),this.system.mapSingleton("videoModel",c.models.VideoModel),this.system.mapSingleton("abrController",c.dependencies.AbrController),this.system.mapClass("bufferController",c.dependencies.BufferController),this.system.mapSingleton("bufferExt",c.dependencies.BufferExtensions),this.system.mapSingleton("errHandler",c.dependencies.ErrorHandler),this.system.mapClass("eventController",c.dependencies.EventController),this.system.mapClass("fragmentController",c.dependencies.FragmentController),this.system.mapClass("fragmentLoader",c.dependencies.FragmentLoader),this.system.mapClass("fragmentModel",c.dependencies.FragmentModel),this.system.mapClass("manifestLoader",c.dependencies.ManifestLoader),this.system.mapSingleton("manifestUpdater",c.dependencies.ManifestUpdater),this.system.mapSingleton("mediaSourceExt",c.dependencies.MediaSourceExtensions),this.system.mapSingleton("notifier",c.dependencies.Notifier),this.system.mapSingleton("parser",c.dependencies.Parser),this.system.mapSingleton("sourceBufferExt",c.dependencies.SourceBufferExtensions),this.system.mapClass("stream",c.dependencies.Stream),this.system.mapSingleton("streamController",c.dependencies.StreamController),this.system.mapClass("textController",c.dependencies.TextController),this.system.mapSingleton("textSourceBuffer",c.dependencies.TextSourceBuffer),this.system.mapSingleton("textTTMLXMLMP4SourceBuffer",c.dependencies.TextTTMLXMLMP4SourceBuffer),this.system.mapSingleton("videoExt",c.dependencies.VideoModelExtensions),c.dependencies.ProtectionController&&(this.system.mapClass("protectionController",c.dependencies.ProtectionController),this.system.mapSingleton("protectionExt",c.dependencies.ProtectionExtensions),this.system.mapSingleton("ksClearKey",c.dependencies.protection.KeySystem_ClearKey),this.system.mapSingleton("ksPlayReady",c.dependencies.protection.KeySystem_PlayReady),this.system.mapSingleton("ksWidevine",c.dependencies.protection.KeySystem_Widevine),this.system.mapSingleton("serverClearKey",c.dependencies.protection.servers.ClearKey),this.system.mapSingleton("serverDRMToday",c.dependencies.protection.servers.DRMToday),this.system.mapSingleton("serverPlayReady",c.dependencies.protection.servers.PlayReady),this.system.mapSingleton("serverWidevine",c.dependencies.protection.servers.Widevine),e.call(this)),this.system.mapClass("abrRulesCollection",c.rules.BaseRulesCollection),this.system.mapClass("abandonRequestRule",c.rules.AbandonRequestsRule),this.system.mapClass("downloadRatioRule",c.rules.DownloadRatioRule),this.system.mapClass("droppedFramesRule",c.rules.DroppedFramesRule),this.system.mapClass("insufficientBufferRule",c.rules.InsufficientBufferRule),this.system.mapClass("limitSwitchesRule",c.rules.LimitSwitchesRule),this.system.mapClass("baseURLExt",d.dependencies.BaseURLExtensions),this.system.mapClass("fragmentExt",d.dependencies.FragmentExtensions),this.system.mapClass("indexHandler",d.dependencies.DashHandler),this.system.mapSingleton("manifestExt",d.dependencies.DashManifestExtensions),this.system.mapSingleton("metricsExt",c.dependencies.MetricsExtensions),this.system.mapSingleton("timelineConverter",d.dependencies.TimelineConverter),this.system.mapClass("dashParser",d.dependencies.DashParser),u.dependencies.MssParser&&this.system.mapClass("mssParser",u.dependencies.MssParser),l.dependencies.HlsParser&&(this.system.mapClass("hlsParser",l.dependencies.HlsParser),this.system.mapSingleton("hlsDemux",l.dependencies.HlsDemux)),this.system.mapClass("hlsStream",l.dependencies.HlsStream),this.system.mapSingleton("contextManager",c.modules.ContextManager),this.system.mapHandler("setContext","contextManager","setContext")}}},c.modules.ContextManager=function(){"use strict";return{system:void 0,debug:void 0,setContext:function(e){this.system.autoMapOutlets=!0,"MSS"===e?(this.system.mapClass("mp4Processor",c.dependencies.Mp4Processor),this.system.mapClass("indexHandler",u.dependencies.MssHandler),this.system.mapClass("fragmentController",u.dependencies.MssFragmentController),this.system.mapClass("mssFragmentInfoController",u.dependencies.MssFragmentInfoController)):"HLS"===e?(this.system.mapClass("mp4Processor",c.dependencies.Mp4Processor),this.system.mapClass("fragmentController",l.dependencies.HlsFragmentController),this.system.mapClass("indexHandler",l.dependencies.HlsHandler)):(this.system.mapClass("fragmentController",c.dependencies.FragmentController),this.system.mapClass("indexHandler",d.dependencies.DashHandler))}}},c.modules.ContextManager.prototype={constructor:c.modules.ContextManager},c.utils.Debug=function(){"use strict";Date.prototype.HHMMSSmmm=function(){var e=this.getHours().toString(),t=this.getMinutes().toString(),n=this.getSeconds().toString(),r=this.getMilliseconds().toString(),i=e[1]?e:"0"+e[0],o=t[1]?t:"0"+t[0],a=n[1]?n:"0"+n[0],s=r[2]?r:"0"+(r[1]?r:"0"+r[0]);return i+":"+o+":"+a+"."+s},Date.prototype.MMSSmmm=function(){var e=this.getMinutes().toString(),t=this.getSeconds().toString(),n=this.getMilliseconds().toString(),r=e[1]?e:"0"+e[0],i=t[1]?t:"0"+t[0],o=n[2]?n:"0"+(n[1]?n:"0"+n[0]);return r+":"+i+"."+o};var e=function(){this.logArray=[],this.showLevel=!0};e.prototype.error=e.prototype.warn=e.prototype.info=e.prototype.debug=function(e){this.logArray.push(e)},e.prototype.getLogs=function(){return this.logArray};var t=0,n=1,r=2,i=3,o=4,a=4,s=0,u=!0,l=!1,d=new Date,c=console,f=function(e,t){if(e<=m()){var a=h(e,t);switch(e){case n:c.error(a);break;case r:c.warn(a);break;case i:c.info(a);break;case o:c.debug(a);break}}},h=function(e,t){var n="",r=null;return u&&(r=new Date,n+="["+r.HHMMSSmmm()+"]"),c&&c.showLevel&&(n+="["+p(e)+"]"),l&&(n+="["+new Date(r-d).MMSSmmm()+"]"),Array.apply(null,t).forEach(function(e){n+=e+" "}),n},p=function(e){switch(e){case n:return"ERROR";case r:return"WARN";case i:return"INFO";case o:return"DEBUG";default:return""}},m=function(){return s},g=function(){return c};return{NONE:t,ERROR:n,WARN:r,INFO:i,DEBUG:o,ALL:a,getLevel:m,getLogger:g,setLevel:function(e){s=e},setLogger:function(t){switch(t){case"log4javascript":var n=new log4javascript.PopUpAppender,r=new log4javascript.PatternLayout("%d{HH:mm:ss.SSS} %-5p - %m%n");n.setLayout(r),c.addAppender(n),c.setLevel(log4javascript.Level.ALL),c.initialized=!0;break;case"memory":c=new e;break;case"console":c=console;break;default:c=null}},error:function(){f.call(this,n,arguments)},warn:function(){f.call(this,r,arguments)},info:function(){f.call(this,i,arguments)},log:function(){f.call(this,o,arguments)}}},c.utils.DebugController=function(){"use strict";var e={isInDebug:!1,level:0,loggerType:"console"},t="",n=function(n){!0!==n.altKey||!0!==n.ctrlKey||!0!==n.shiftKey||68!==n.keyCode&&90!==n.keyCode||(e.isInDebug?(console.log("hasplayer.js debug OFF (v"+t+")"),e.isInDebug=!1,90===n.keyCode?(r(this.debug.getLogger().getLogs()),this.debug.setLevel(e.level),this.debug.setLogger(e.loggerType)):this.debug.setLevel(0)):(console.log("hasplayer.js debug ON (v"+t+")"),e.isInDebug=!0,e.level=this.debug.getLevel(),this.debug.setLevel(68===n.keyCode?4:3),this.debug.setLogger(68===n.keyCode?"console":"memory")))},r=function(e){if(e&&e.length>0){var t="hasplayer_logs.txt",n=JSON.stringify(e,null,"\r\n"),r=new Blob([n],{type:"text/json"});if(navigator.msSaveBlob)navigator.msSaveBlob(r,t);else{var i=document.createEvent("MouseEvents"),o=document.createElement("a");o.download=t,o.href=window.URL.createObjectURL(r),o.dataset.downloadurl=["text/json",o.download,o.href].join(":"),i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(i)}}};return{debug:void 0,setup:function(){window.addEventListener("keydown",n.bind(this))},init:function(e){t=e}}},c.utils.DebugController.prototype={constructor:c.utils.DebugController},c.dependencies.ErrorHandler=function(){"use strict";return{eventBus:void 0,debug:void 0,sendWarning:function(e,t,n){this.debug.warn("[Warn] Code: "+e+", Message: "+t+", Data: "+JSON.stringify(n,null,"\t")),this.eventBus.dispatchEvent({type:"warning",data:{code:e,message:t,data:n}})},sendError:function(e,t,n){this.debug.error("[Error] Code: "+e+", Message: "+t+", Data: "+JSON.stringify(n,null,"\t")),this.eventBus.dispatchEvent({type:"error",data:{code:e,message:t,data:n}})}}},c.dependencies.ErrorHandler.prototype={constructor:c.dependencies.ErrorHandler},c.dependencies.ErrorHandler.prototype.INTERNAL_ERROR="INTERNAL_ERROR",c.dependencies.ErrorHandler.prototype.MEDIA_ERR_ABORTED="MEDIA_ERR_ABORTED",c.dependencies.ErrorHandler.prototype.MEDIA_ERR_NETWORK="MEDIA_ERR_NETWORK",c.dependencies.ErrorHandler.prototype.MEDIA_ERR_DECODE="MEDIA_ERR_DECODE",c.dependencies.ErrorHandler.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED="MEDIA_ERR_SRC_NOT_SUPPORTED",c.dependencies.ErrorHandler.prototype.MEDIA_ERR_ENCRYPTED="MEDIA_ERR_ENCRYPTED",c.dependencies.ErrorHandler.prototype.CAPABILITY_ERR_MEDIASOURCE="CAPABILITY_ERR_MEDIASOURCE",c.dependencies.ErrorHandler.prototype.CAPABILITY_ERR_MEDIAKEYS="CAPABILITY_ERR_MEDIAKEYS",c.dependencies.ErrorHandler.prototype.MEDIA_ERR_CREATE_MEDIASOURCE="MEDIA_ERR_CREATE_MEDIASOURCE",c.dependencies.ErrorHandler.prototype.MEDIA_ERR_CODEC_UNSUPPORTED="MEDIA_ERR_CODEC_UNSUPPORTED",c.dependencies.ErrorHandler.prototype.MEDIA_ERR_CREATE_SOURCEBUFFER="MEDIA_ERR_CREATE_SOURCEBUFFER",c.dependencies.ErrorHandler.prototype.MEDIA_ERR_APPEND_SOURCEBUFFER="MEDIA_ERR_APPEND_SOURCEBUFFER",c.dependencies.ErrorHandler.prototype.MEDIA_ERR_REMOVE_SOURCEBUFFER="MEDIA_ERR_REMOVE_SOURCEBUFFER",c.dependencies.ErrorHandler.prototype.MANIFEST_ERR_PARSE="MANIFEST_ERR_PARSE",c.dependencies.ErrorHandler.prototype.MANIFEST_ERR_NO_STREAM="MANIFEST_ERR_NO_STREAM",c.dependencies.ErrorHandler.prototype.MANIFEST_ERR_NO_VIDEO="MANIFEST_ERR_NO_VIDEO",c.dependencies.ErrorHandler.prototype.MANIFEST_ERR_NO_AUDIO="MANIFEST_ERR_NO_AUDIO",c.dependencies.ErrorHandler.prototype.MANIFEST_ERR_NO_TEXT="MANIFEST_ERR_NO_TEXT",c.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_MANIFEST="DOWNLOAD_ERR_MANIFEST",c.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_SIDX="DOWNLOAD_ERR_SIDX",c.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_INIT="DOWNLOAD_ERR_INIT",c.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_CONTENT="DOWNLOAD_ERR_CONTENT",c.dependencies.ErrorHandler.prototype.MSS_NO_TFRF="MSS_NO_TFRF",c.dependencies.ErrorHandler.prototype.HLS_INVALID_PACKET_ERROR="HLS_INVALID_PACKET_ERROR",c.dependencies.ErrorHandler.prototype.HLS_DEMUX_ERROR="HLS_DEMUX_ERROR",c.dependencies.ErrorHandler.prototype.HLS_INVALID_KEY_ERROR="HLS_INVALID_KEY_ERROR",c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR="MEDIA_KEYERR",c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_UNKNOWN="MEDIA_KEYERR_UNKNOWN",c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_CLIENT="MEDIA_KEYERR_CLIENT",c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_SERVICE="MEDIA_KEYERR_SERVICE",c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_OUTPUT="MEDIA_KEYERR_OUTPUT",c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_HARDWARECHANGE="MEDIA_KEYERR_HARDWARECHANGE",c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_DOMAIN="MEDIA_KEYERR_DOMAIN",c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_EXPIRED="MEDIA_KEYERR_EXPIRED",c.dependencies.ErrorHandler.prototype.MEDIA_KEYSYSERR_ACCESS_DENIED="MEDIA_KEYSYSERR_ACCESS_DENIED",c.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_URL_LICENSER_UNKNOWN="MEDIA_KEYMESSERR_URL_LICENSER_UNKNOWN",c.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_NO_CHALLENGE="MEDIA_KEYMESSERR_NO_CHALLENGE",c.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_LICENSER_ERROR="MEDIA_KEYMESSERR_LICENSER_ERROR",c.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_NO_SESSION="MEDIA_KEYMESSERR_NO_SESSION",c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_SERVER_CERTIFICATE="MEDIA_KEYERR_SERVER_CERTIFICATE",c.dependencies.ErrorHandler.prototype.DOM_ERR_INDEX_SIZE=1,c.dependencies.ErrorHandler.prototype.DOM_ERR_HIERARCHY_REQUEST=3,c.dependencies.ErrorHandler.prototype.DOM_ERR_WRONG_DOCUMENT=4,c.dependencies.ErrorHandler.prototype.DOM_ERR_INVALID_CHARACTER=5,c.dependencies.ErrorHandler.prototype.DOM_ERR_NO_MODIFICATION_ALLOWED=7,c.dependencies.ErrorHandler.prototype.DOM_ERR_NOT_FOUND=8,c.dependencies.ErrorHandler.prototype.DOM_ERR_NOT_SUPPORTED=9,c.dependencies.ErrorHandler.prototype.DOM_ERR_INVALID_STATE=11,c.dependencies.ErrorHandler.prototype.DOM_ERR_SYNTAX=12,c.dependencies.ErrorHandler.prototype.DOM_ERR_INVALID_MODIFICATION=13,c.dependencies.ErrorHandler.prototype.DOM_ERR_NAMESPACE=14,c.dependencies.ErrorHandler.prototype.DOM_ERR_INVALID_ACCESS=15,c.dependencies.ErrorHandler.prototype.DOM_ERR_SECURITY=18,c.dependencies.ErrorHandler.prototype.DOM_ERR_NETWORK=19,c.dependencies.ErrorHandler.prototype.DOM_ERR_ABORT=20,c.dependencies.ErrorHandler.prototype.DOM_ERR_URL_MISMATCH=21,c.dependencies.ErrorHandler.prototype.DOM_ERR_QUOTA_EXCEEDED=22,c.dependencies.ErrorHandler.prototype.DOM_ERR_TIMEOUT=23,c.dependencies.ErrorHandler.prototype.DOM_ERR_INVALID_NODE_TYPE=24,c.dependencies.ErrorHandler.prototype.DOM_ERR_DATA_CLONE=25,c.utils.EventBus=function(){"use strict";var e,t=function(t,n){var r=(n?"1":"0")+t;return r in e||(e[r]=[]),e[r]},n=function(){e={}};return n(),{addEventListener:function(e,n,r){var i=t(e,r),o=i.indexOf(n);-1===o&&i.push(n)},removeEventListener:function(e,n,r){var i=t(e,r),o=i.indexOf(n);-1!==o&&i.splice(o,1)},dispatchEvent:function(e){var n=t(e.type,!1).slice(),r=0;for(r=0;r<n.length;r+=1)n[r].call(this,e);return!e.defaultPrevented}}},c.dependencies.EventController=function(){"use strict";var e=[],t=[],n=[],r=null,i=100,o=i/1e3,a="urn:mpeg:dash:event:2012",s=1,u=function(){null!==r&&(clearInterval(r),r=null),e=null,t=null,n=null},l=function(){null!==r&&(clearInterval(r),r=null)},d=function(){var e=this;e.debug.log("[EventController] Start Event Controller"),isNaN(i)||(r=setInterval(h.bind(this),i))},c=function(t){var n=this;e=[],t&&t.length>0&&(e=t),n.debug.log("[EventController] Added "+t.length+" inline events")},f=function(e){var n,r=this,i=0;for(i=0;i<e.length;i++)n=e[i],t[n.id]=n,r.debug.log("[EventController] Add inband event with id "+n.id)},h=function(){p.call(this,t),p.call(this,e),m.call(this)},p=function(e){var t,r,i=this,u=this.videoModel.getCurrentTime(),l=0;if(e)for(l=0;l<e.length;l++)r=e[l],void 0!==r&&(t=r.presentationTime/r.eventStream.timescale,(0===t||t<=u&&t+o>u)&&(i.debug.log("[EventController] Start Event at "+u),r.duration>0&&n.push(r),r.eventStream.schemeIdUri===a&&r.eventStream.value===s&&g.call(this),e.splice(l,1)))},m=function(){var e,t,r=this,i=0;if(n)for(e=this.videoModel.getCurrentTime(),i=0;i<n.length;i++)t=n[i],null!==t&&(t.duration+t.presentationTime)/t.eventStream.timescale<e&&(r.debug.log("[EventController] Remove Event at time "+e),t=null,n.splice(i,1))},g=function(){var e=this,t=e.manifestModel.getValue(),n=t.mpdUrl;t.hasOwnProperty("Location")&&(n=t.Location),e.debug.log("[EventController] Refresh manifest @ "+n),e.manifestLoader.load(n).then(function(t){e.manifestModel.setValue(t)})};return{manifestModel:void 0,manifestLoader:void 0,debug:void 0,system:void 0,videoModel:void 0,addInlineEvents:c,addInbandEvents:f,reset:u,clear:l,start:d}},c.dependencies.EventController.prototype={constructor:c.dependencies.EventController},c.dependencies.FragmentController=function(){"use strict";var e=[],n=function(t){var n=e.length,r=0;for(r=0;r<n;r+=1)if(e[r].getContext()===t)return e[r];return null},r=function(){var t=!0,n=e.length,r=0;for(r=0;r<n;r+=1)if(!e[r].isReady()){t=!1;break}return t},i=function(){var t=0;for(t=0;t<e.length;t+=1)e[t].executeCurrentRequest()};return{system:void 0,debug:void 0,process:function(e){var n=null;return null!==e&&void 0!==e&&e.byteLength>0&&(n=new Uint8Array(e)),t.when(n)},attachBufferController:function(t){var r;return t?(r=n(t),r||(r=this.system.getObject("fragmentModel"),r.setContext(t),e.push(r)),r):null},detachBufferController:function(t){var n=e.indexOf(t);n>-1&&e.splice(n,1)},onBufferControllerStateChange:function(){r()&&i.call(this)},isFragmentLoadedOrPending:function(e,t){var r,i=n(e);return!!i&&(r=i.isFragmentLoadedOrPending(t),r)},getPendingRequests:function(e){var t=n(e);return t?t.getPendingRequests():null},getLoadingRequests:function(e){var t=n(e);return t?t.getLoadingRequests():null},isInitializationRequest:function(e){return e&&e.type&&"initialization segment"===e.type.toLowerCase()},getLoadingTime:function(e){var t=n(e);return t?t.getLoadingTime():null},getExecutedRequestForTime:function(e,t){return e?e.getExecutedRequestForTime(t):null},removeExecutedRequest:function(e,t){e&&e.removeExecutedRequest(t)},removeExecutedRequestsBeforeTime:function(e,t){e&&e.removeExecutedRequestsBeforeTime(t)},clearExecutedRequests:function(e){e&&e.clearExecutedRequests()},cancelPendingRequestsForModel:function(e){e&&e.cancelPendingRequests()},abortRequestsForModel:function(e){e&&e.abortRequests()},prepareFragmentForLoading:function(e,t,r,i,o,a){var s=n(e);return s&&t?(s.addRequest(t),s.setCallbacks(r,i,o,a),!0):null}}},c.dependencies.FragmentController.prototype={constructor:c.dependencies.FragmentController},c.dependencies.FragmentLoader=function(){"use strict";var e,n=2,r=500,i=n,o=r,a=0,s=[],u=function(e){var t=new XMLHttpRequest,n=!1;t.open("HEAD",e.url,!0),t.onload=function(){t.status<200||t.status>399||(n=!0,e.deferred.resolve(e))},t.onloadend=t.onerror=function(){n||e.deferred.reject(t)},t.send()},l=function(n){var r=t.defer(),i=new XMLHttpRequest,o=null,a=!0,u=!0,l=null,d=this;return s.push(i),n.requestStartDate=new Date,o=d.metricsModel.addHttpRequest(n.streamType,null,n.type,n.url,null,n.range,n.requestStartDate,null,null,null,null,n.duration,n.startTime,n.quality),d.metricsModel.appendHttpTrace(o,n.requestStartDate,n.requestStartDate.getTime()-n.requestStartDate.getTime(),[0]),l=n.requestStartDate,i.open("GET",d.tokenAuthentication.addTokenAsQueryArg(n.url),!0),i.responseType="arraybuffer",i=d.tokenAuthentication.setTokenInRequestHeader(i),n.range&&i.setRequestHeader("Range","bytes="+n.range),i.onprogress=function(e){var t=new Date;a&&(a=!1,(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(n.firstByteDate=t,o.tresponse=t)),e.lengthComputable&&(n.bytesLoaded=e.loaded,n.bytesTotal=e.total),d.metricsModel.appendHttpTrace(o,t,t.getTime()-l.getTime(),[n.bytesLoaded?n.bytesLoaded:0]),l=t,d.notify(c.dependencies.FragmentLoader.eventList.ENAME_LOADING_PROGRESS,{request:n,httpRequestMetrics:o,lastTraceTime:l})},i.onload=function(){if(!(i.status<200||i.status>399)){u=!1;var t,a,s=new Date,c=i.response,f=c?c.byteLength:0;n.firstByteDate||(n.firstByteDate=n.requestStartDate),n.requestEndDate=s,t=n.firstByteDate.getTime()-n.requestStartDate.getTime(),a=n.requestEndDate.getTime()-n.firstByteDate.getTime(),d.debug.log("[FragmentLoader]["+e+"] Loaded: "+n.url+" ("+i.status+", "+t+"ms, "+a+"ms)"),o.tresponse=n.firstByteDate,o.tfinish=n.requestEndDate,o.responsecode=i.status,o.bytesLength=f,d.metricsModel.appendHttpTrace(o,s,s.getTime()-l.getTime(),[f]),l=s,r.resolve({data:c,request:n})}},i.onabort=function(){var e,t,r=new Date;i.aborted=!0,0!==o.trace.length&&(e=o.trace[o.trace.length-1],t=e.b[0],n.requestEndDate=r,o.tresponse=n.firstByteDate,o.tfinish=n.requestEndDate,o.responsecode=i.status,o.bytesLength=t)},i.onloadend=i.onerror=function(){-1!==s.indexOf(i)&&(s.splice(s.indexOf(i),1),u&&(u=!1,o.responsecode=i.status,r.reject(i)))},d.debug.log("[FragmentLoader]["+e+"] Load: "+n.url),i.send(),r.promise},d=function(e,t){var n=this;l.call(n,e).then(function(e){a=0,t.resolve(e)},function(r){r.aborted?(e.status=0,e.aborted=!0,t.reject(e)):a>=i?(a=0,e.status=r.status,t.reject(e)):setTimeout(function(){a++,d.call(n,e,t)},o)})};return{metricsModel:void 0,debug:void 0,tokenAuthentication:void 0,config:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,setup:function(){i=this.config.getParam("FragmentLoader.RetryAttempts","number",n),o=this.config.getParam("FragmentLoader.RetryInterval","number",r)},setType:function(t){e=t},load:function(e){var n=t.defer();return"Initialization Segment"===e.type&&e.data?n.resolve(e,{data:e.data}):d.call(this,e,n),n.promise},abort:function(){var t=0;for(t=0;t<s.length;t+=1)this.debug.log("[FragmentLoader]["+e+"] Abort XHR "+(s[t].responseURL?s[t].responseURL:"")),s[t].abort()},checkForExistence:function(e){return e?(e.deferred=t.defer(),u.call(this,e),e.deferred.promise):t.when(null)}}},c.dependencies.FragmentLoader.prototype={constructor:c.dependencies.FragmentLoader},c.dependencies.FragmentLoader.eventList={ENAME_LOADING_PROGRESS:"loadingProgress"},c.dependencies.FragmentModel=function(){"use strict";var e,t,n,r,i,o=[],a=[],s=[],u=2,l=function(i){var a,u,l=this;t.call(e,i),a=function(t,r){s.splice(s.indexOf(t),1),o.push(t),n.call(e,t,r),t.deferred=null},u=function(t){s.splice(s.indexOf(t),1),r.call(e,t),t.deferred=null},l.fragmentLoader.load(i).then(a.bind(e,i),u.bind(e,i))},d=function(e,t){var n=function(e,n){return e[t]<n[t]?-1:e[t]>n[t]?1:0};e.sort(n)},c=function(e){var t=o.indexOf(e);-1!==t&&o.splice(t,1)};return{system:void 0,debug:void 0,fragmentLoader:void 0,setContext:function(t){e=t},getContext:function(){return e},setType:function(e){e,this.fragmentLoader&&this.fragmentLoader.setType(e)},addRequest:function(e){if(e){if(this.isFragmentLoadedOrPending(e))return;a.push(e),d.call(this,a,"index")}},setCallbacks:function(e,o,a,s){t=e,i=s,r=a,n=o},isFragmentLoadedOrPending:function(e){var t,n=!1,r=0;for(r=0;r<o.length;r++)if(t=o[r],e.startTime===t.startTime||"complete"===t.action&&e.action===t.action){if(e.url===t.url){n=!0;break}o.splice(r,1),r--}if(!n)for(r=0;r<a.length;r++)t=a[r],e.url===t.url&&e.startTime===t.startTime&&(n=!0);if(!n)for(r=0;r<s.length;r++)t=s[r],e.url===t.url&&e.startTime===t.startTime&&(n=!0);return n},isReady:function(){return e.isReady()},getPendingRequests:function(){return a},getLoadingRequests:function(){return s},getLoadingTime:function(){var e,t,n=0;for(t=o.length-1;t>=0;t-=1)if(e=o[t],e.requestEndDate instanceof Date&&e.firstByteDate instanceof Date){n=e.requestEndDate.getTime()-e.firstByteDate.getTime();break}return n},getExecutedRequestForTime:function(e){var t,n=o.length-1,r=NaN,i=NaN,a=null;for(t=n;t>=0;t-=1)if(a=o[t],r=a.startTime,i=r+a.duration,!isNaN(r)&&!isNaN(i)&&e>r&&e<i)return a;return null},getExecutedRequestForQualityAndIndex:function(e,t){var n,r=o.length-1,i=null;for(n=r;n>=0;n-=1)if(i=o[n],i.quality===e&&i.index===t)return i;return null},removeExecutedRequest:function(e){c.call(this,e)},removeExecutedRequestsBeforeTime:function(e){var t,n=o.length-1,r=NaN,i=null;for(t=n;t>=0;t-=1)i=o[t],r=i.startTime,!isNaN(r)&&r<e&&c.call(this,i)},clearExecutedRequests:function(){o=[]},cancelPendingRequests:function(){a=[]},abortRequests:function(){this.fragmentLoader.abort(),s=[]},executeCurrentRequest:function(){var t,n=this;if(0!==a.length&&!(s.length>=u))switch(t=a.shift(),t.action){case"complete":o.push(t),i.call(e,t);break;case"download":s.push(t),l.call(n,t);break;default:this.debug.log("Unknown request action."),t.deferred?(t.deferred.reject(),t.deferred=null):r.call(e,t)}}}},c.dependencies.FragmentModel.prototype={constructor:c.dependencies.FragmentModel},c.dependencies.ManifestLoader=function(){"use strict";var e=2,n=500,r=e,i=n,o=null,a=function(e){var t,n="",r=0;if(e.length<1)return e;if(15360!==e.charCodeAt(0))return e;for(r=0;r<e.length;r+=1)t=e.charCodeAt(r),n+=String.fromCharCode((255&t)<<8|(65280&t)>>8);return n},s=function(e){var t=null;return-1!==e.indexOf("/")&&(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),t=e.substring(0,e.lastIndexOf("/")+1)),t},u=function(){null!==o&&o.abort(),this.parser.abort()},l=function(e){var n=s(e),u=t.defer(),l=this;return o=new c.dependencies.XHRLoader,o.initialize(null,r,i),o.load(e).then(function(t){t.responseURL&&(l.debug.log("[ManifestLoader] Redirect URL: "+t.responseURL),n=s(t.responseURL)),l.tokenAuthentication.checkRequestHeaderForToken(t),l.metricsModel.addHttpRequest("stream",null,"MPD",e,null,null,t.startDate,t.endDate,t.status,null,null),l.parser.parse(a(t.responseText),n).then(function(n){n?(n.mpdUrl=e,n.mpdLoadedTime=t.endDate,l.metricsModel.addManifestUpdate("stream",n.type,t.startDate,t.endDate,n.availabilityStartTime),u.resolve(n)):u.reject()},function(t){t&&t.name&&t.message?u.reject(t):(l.debug.error("[ManifestLoader] Manifest parsing error"),u.reject({name:c.dependencies.ErrorHandler.prototype.MANIFEST_ERR_PARSE,message:"Failed to parse manifest",data:{url:e}}))})},function(t){!t||t.aborted?u.reject():(l.metricsModel.addHttpRequest("stream",null,"MPD",e,null,null,t.startDate,t.endDate,t.status,null,null),u.reject({name:c.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_MANIFEST,message:"Failed to download manifest",data:{url:e,status:t.status}}))}),u.promise};return{debug:void 0,parser:void 0,config:void 0,metricsModel:void 0,tokenAuthentication:void 0,setup:function(){r=this.config.getParam("ManifestLoader.RetryAttempts","number",e),i=this.config.getParam("ManifestLoader.RetryInterval","number",n)},load:l,abort:u}},c.dependencies.ManifestLoader.prototype={constructor:c.dependencies.ManifestLoader},c.dependencies.ManifestUpdater=function(){"use strict";var e,n=NaN,r=null,i=!1,o=function(){null!==r&&(clearInterval(r),r=null)},a=function(){o.call(this),isNaN(n)||(this.debug.log("Refresh manifest in "+n+" seconds."),r=setTimeout(u.bind(this),Math.min(1e3*n,Math.pow(2,31)-1),this))},s=function(){var e,t,r=this,i=r.manifestModel.getValue();void 0!==i&&null!==i&&(t=r.manifestExt.getRefreshDelay(i),e=((new Date).getTime()-i.mpdLoadedTime.getTime())/1e3,n=Math.max(t-e,0),a.call(r))},u=function(){var n,r,o=this;t.when(!e||e.promise).then(function(){e=t.defer(),n=o.manifestModel.getValue(),r=n.mpdUrl,n.hasOwnProperty("Location")&&(r=n.Location),o.manifestLoader.load(r).then(function(e){o.manifestModel.setValue(e),o.debug.log("Manifest has been refreshed."),i||s.call(o)})})},l=function(){e&&e.resolve()};return{debug:void 0,system:void 0,manifestModel:void 0,manifestExt:void 0,manifestLoader:void 0,setup:function(){s.call(this),this.system.mapHandler("streamsComposed",void 0,l.bind(this))},start:function(){i=!1,s.call(this)},stop:function(){i=!0,o.call(this)}}},c.dependencies.ManifestUpdater.prototype={constructor:c.dependencies.ManifestUpdater},c.models.ManifestModel=function(){"use strict";var e=null;return{system:void 0,eventBus:void 0,getValue:function(){return e},setValue:function(t){e=t,e&&this.system.notify("manifestUpdated"),null!==e&&this.eventBus.dispatchEvent({type:"manifestLoaded",data:t})}}},c.models.ManifestModel.prototype={constructor:c.models.ManifestModel},c.dependencies.MediaSourceExtensions=function(){},c.dependencies.MediaSourceExtensions.prototype={constructor:c.dependencies.MediaSourceExtensions,createMediaSource:function(){"use strict";var e="WebKitMediaSource"in window,t="MediaSource"in window;return t?new MediaSource:e?new WebKitMediaSource:null},attachMediaSource:function(e,t){"use strict";return t.setSource(window.URL.createObjectURL(e)),!0},detachMediaSource:function(e){"use strict";return e.setSource(null),!0},setDuration:function(e,t){"use strict";var n,r=!1;if("open"!==e.readyState)return e.duration;for(n=0;n<e.sourceBuffers.length;n++)if(e.sourceBuffers[n].updating){r=!0;break}return r||(e.duration=t),e.duration},signalEndOfStream:function(e){"use strict";var t=e.sourceBuffers,n=t.length,r=0;if("open"===e.readyState){for(r;r<n;r++){if(t[r].updating)return;if(0===t[r].buffered.length)return}return e.endOfStream(),!0}}},c.dependencies.MetricsExtensions=function(){"use strict";var e={42:"Baseline","4D":"Main",58:"Extended",64:"High"},t=function(e,t){var n,r,i,o,a,s,u,l;for(s=0;s<e.length;s+=1)for(n=e[s],i=n.AdaptationSet_asArray,u=0;u<i.length;u+=1)for(r=i[u],a=r.Representation_asArray,l=0;l<a.length;l+=1)if(o=a[l],t===o.id)return o;return null},n=function(e,t){var n=!1;return"video"===t?(this.manifestExt.getIsVideo(e),"video"===e.type&&(n=!0)):"audio"===t?(this.manifestExt.getIsAudio(e),"audio"===e.type&&(n=!0)):"text"===t?(this.manifestExt.getIsText(e),"text"===e.type&&(n=!0)):n=!1,n},r=c.utils.copyMethods(d.dependencies.DashMetricsExtensions);return r.config=void 0,r.getDuration=function(){var e=this,t=e.manifestModel.getValue(),n=t?t.Period.duration:null;return n!==1/0?n:-1},r.getFormatForType=function(e){var t,n=this,r=n.manifestModel.getValue(),i=0;if(!r)return null;for(i=0;i<r.Period.AdaptationSet.length;i++)if(t=r.Period.AdaptationSet[i],t.type===e)return t.mimeType;return null},r.getCodecForType=function(e){var t,n=this,r=n.manifestModel.getValue(),i=0;if(!r)return null;for(i=0;i<r.Period.AdaptationSet.length;i++)if(t=r.Period.AdaptationSet[i],t.type===e||t.contentType===e)return t.Representation_asArray[0].codecs;return null},r.getVideoWidthForRepresentation=function(e){var n,r,i=this,o=i.manifestModel.getValue();return o?(r=o.Period_asArray,n=t.call(i,r,e),null===n?null:n.width):null},r.getVideoHeightForRepresentation=function(e){var n,r,i=this,o=i.manifestModel.getValue();return o?(r=o.Period_asArray,n=t.call(i,r,e),null===n?null:n.height):null},r.getCodecsForRepresentation=function(e){var n,r=this,i=r.manifestModel.getValue(),o=i.Period_asArray;return i?(n=t.call(r,o,e),null===n?null:n.codecs):null},r.getH264ProfileLevel=function(t){if(t.indexOf("avc1")<0)return"";var n=e[t.substr(5,2)],r=parseInt(t.substr(9,2),16)/10;return n+"@"+r.toString()},r.getBitratesForType=function(e,t){var r,i,o,a,s,u,l,d,c=this,f=c.manifestModel.getValue(),h=null,p=[];if(!f)return null;if(t)h=t;else for(r=f.Period_asArray,o=0;o<r.length;o+=1)for(i=r[o],a=i.AdaptationSet_asArray,l=0;l<a.length;l+=1)if(h=a[l],n.call(c,a[l],e)){h=a[l];break}if(null!==h)for(h=c.manifestExt.processAdaptation(h),u=h.Representation_asArray,d=0;d<u.length;d+=1)s=u[d],p.push(s.bandwidth);return p},r.getBitratesWithResolutionForType=function(e){var t,r,i,o,a,s,u,l,d,c=this,f=c.manifestModel.getValue(),h=[];if(!f)return null;for(t=f.Period_asArray,i=0;i<t.length;i+=1)for(r=t[i],a=r.AdaptationSet_asArray,l=0;l<a.length;l+=1)if(o=a[l],n.call(c,o,e)){for(o=c.manifestExt.processAdaptation(o),u=o.Representation_asArray,d=0;d<u.length;d+=1){s=u[d];var p={bitrate:s.bandwidth,width:s.width,height:s.height};h.push(p)}return h}return h},r},c.dependencies.MetricsExtensions.prototype={constructor:c.dependencies.MetricsExtensions},c.models.MetricsModel=function(){"use strict";return{system:void 0,eventBus:void 0,config:void 0,streamMetrics:{},metricsChanged:function(){this.eventBus.dispatchEvent({type:"metricsChanged",data:{}})},metricChanged:function(e){this.eventBus.dispatchEvent({type:"metricChanged",data:{stream:e}}),this.metricsChanged()},metricUpdated:function(e,t,n){this.eventBus.dispatchEvent({type:"metricUpdated",data:{stream:e,metric:t,value:n}}),this.metricChanged(e)},metricAdded:function(e,t,n){this.eventBus.dispatchEvent({type:"metricAdded",data:{stream:e,metric:t,value:n}}),this.metricChanged(e)},clearAllCurrentMetrics:function(){var e=this;for(var t in this.streamMetrics)if(this.streamMetrics.hasOwnProperty(t)&&"stream"===t)delete this.streamMetrics[t];else{var n=this.config.getParamFor(t,"ABR.keepBandwidthCondition","boolean",!0);for(var r in this.streamMetrics[t])!this.streamMetrics[t].hasOwnProperty(r)||"HttpList"===r&&!1!==n||(this.streamMetrics[t][r]=[])}this.metricsChanged.call(e)},getReadOnlyMetricsFor:function(e){return this.streamMetrics.hasOwnProperty(e)?this.streamMetrics[e]:null},getMetricsFor:function(e){var t;return this.streamMetrics.hasOwnProperty(e)?t=this.streamMetrics[e]:(t=this.system.getObject("metrics"),this.streamMetrics[e]=t),t},addTcpConnection:function(e,t,n,r,i,o){var a=new c.vo.metrics.TCPConnection;return a.tcpid=t,a.dest=n,a.topen=r,a.tclose=i,a.tconnect=o,this.getMetricsFor(e).TcpList.push(a),this.metricAdded(e,"TcpConnection",a),a},addHttpRequest:function(e,t,n,r,i,o,a,s,u,l,d,f,h,p){var m=new c.vo.metrics.HTTPRequest,g=this.getMetricsFor(e).HttpList;return m.stream=e,m.tcpid=t,m.type=n,m.url=r,m.actualurl=i,m.range=o,m.trequest=a,m.tresponse=s,m.tfinish=u,m.responsecode=l,m.interval=d,m.mediaduration=f,m.startTime=h,m.quality=p,g.push(m),this.metricAdded(e,"HttpRequest",m),g.length>10&&g.shift(),m},appendHttpTrace:function(e,t,n,r){var i=new c.vo.metrics.HTTPRequest.Trace;return i.s=t,i.d=n,i.b=r,e.trace.push(i),this.metricUpdated(e.stream,"HttpRequestTrace",e),i},addRepresentationSwitch:function(e,t,n,r,i){var o=new c.vo.metrics.RepresentationSwitch;return o.t=t,o.mt=n,o.to=r,o.lto=i,this.getMetricsFor(e).RepSwitchList.push(o),this.metricAdded(e,"RepresentationSwitch",o),o},addBufferedSwitch:function(e,t,n,r){var i=new c.vo.metrics.BufferedSwitch;return i.mt=t,i.to=n,i.lto=r,this.getMetricsFor(e).BufferedSwitchList.push(i),this.metricAdded(e,"BufferedSwitch",i),i},addState:function(e,t,n,r){var i=this.getMetricsFor(e).State;if(!(i.length>0&&i[i.length-1].current===t)){var o=new c.vo.metrics.State,a=this.getMetricsFor(e).State;return o.current=t,o.position=n,o.reason=r,a.push(o),this.metricAdded(e,"State",o),a.length>10&&a.shift(),o}},addSession:function(e,t,n,r,i){var o=new c.vo.metrics.Session;return o.uri=t,o.loopMode=n?1:0,o.endTime=r,o.playerType=i,this.metricAdded(e,"Session",o),o},addCondition:function(e,t,n,r,i,o){var a=new c.vo.metrics.Condition;return a.isFullScreen=t,a.windowSize=n+"x"+r,a.fps=o,a.droppedFrames=i,this.metricAdded(e,"Condition",a),a},addMetaData:function(){this.metricAdded(null,"ManifestReady",null)},addBufferLevel:function(e,t,n){var r=new c.vo.metrics.BufferLevel,i=this.getMetricsFor(e).BufferLevel;return r.t=t,r.level=Number(n.toFixed(3)),i.push(r),this.metricAdded(e,"BufferLevel",r),i.length>10&&i.shift(),r},addDVRInfo:function(e,t,n){var r=new c.vo.metrics.DVRInfo,i=this.getMetricsFor(e).DVRInfo;return r.t=t,r.range=n,i.push(r),this.metricAdded(e,"DVRInfo",r),i.length>10&&i.shift(),r},addDroppedFrames:function(e,t){var n=new c.vo.metrics.DroppedFrames,r=this.getMetricsFor(e).DroppedFrames;return n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,n.decodedFrameCount=t.totalVideoFrames,r.length>0&&r[r.length-1]===n?r[r.length-1]:(r.push(n),this.metricAdded(e,"DroppedFrames",n),n)},addPlaybackQuality:function(e,t,n,r){var i=new c.vo.metrics.PlaybackQuality,o=this.getMetricsFor(e).PlaybackQuality;return i.t=t,i.mt=r,i.droppedFrames=n.droppedVideoFrames,i.totalVideoFrames=n.totalVideoFrames,o.length>0&&i.droppedFrames===o[o.length-1].droppedFrames&&i.totalVideoFrames===o[o.length-1].totalVideoFrames?o[o.length-1]:(o.push(i),this.metricAdded(e,"PlaybackQuality",i),o.length>10&&o.shift(),i)},addVideoResolution:function(e,t,n,r,i){var o=new c.vo.metrics.VideoResolution,a=this.getMetricsFor(e).VideoResolution;return o.t=t,o.mt=i,o.width=n,o.height=r,a.length>0&&o.width===a[a.length-1].width&&o.height===a[a.length-1].height?a[a.length-1]:(a.push(o),this.metricAdded(e,"VideoResolution",o),o)},addManifestUpdate:function(e,t,n,r,i,o,a,s,u,l){var d=new c.vo.metrics.ManifestUpdate,f=this.getMetricsFor("stream");return d.streamType=e,d.type=t,d.requestTime=n,d.fetchTime=r,d.availabilityStartTime=i,d.presentationStartTime=o,d.clientTimeOffset=a,d.currentTime=s,d.buffered=u,d.latency=l,f.ManifestUpdate.push(d),this.metricAdded(e,"ManifestUpdate",d),d},updateManifestUpdateInfo:function(e,t){if(e&&t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);this.metricUpdated(e.streamType,"ManifestUpdate",e)}},addManifestUpdatePeriodInfo:function(e,t,n,r,i){var o=new c.vo.metrics.ManifestUpdate.PeriodInfo;return o.id=t,o.index=n,o.start=r,o.duration=i,e.periodInfo.push(o),this.metricUpdated(e.streamType,"ManifestUpdatePeriodInfo",e),o},addManifestUpdateRepresentationInfo:function(e,t,n,r,i,o,a,s){var u=new c.vo.metrics.ManifestUpdate.RepresentationInfo;return u.id=t,u.index=n,u.periodIndex=r,u.streamType=i,u.startNumber=a,u.segmentInfoType=s,u.presentationTimeOffset=o,e.representationInfo.push(u),this.metricUpdated(e.streamType,"ManifestUpdateRepresentationInfo",e),u},addPlayList:function(e,t,n,r,i){var o=new c.vo.metrics.PlayList,a=this.getMetricsFor(e).PlayList;return o.stream=e,o.start=t,o.mstart=n,o.starttype=r,o.speed=i,a.push(o),this.metricAdded(e,"PlayList",o),a.length>10&&a.shift(),o},appendPlayListTrace:function(e,t,n,r,i,o,a,s){var u=new c.vo.metrics.PlayList.Trace;return u.representationid=t,u.subreplevel=n,u.start=r,u.mstart=i,u.duration=o,u.playbackspeed=a,u.stopreason=s,e&&Array.isArray(e.trace)&&(e.trace.push(u),this.metricUpdated(e.stream,"PlayListTrace",e),e.trace.length>10&&e.trace.shift()),u}}},c.models.MetricsModel.prototype={constructor:c.models.MetricsModel},c.dependencies.Mp4Processor=function(){"use strict";var e=function(e){var t=new _.boxes.MovieHeaderBox,n=e[e.length-1];return t.version=1,t.creation_time=0,t.modification_time=0,t.timescale=n.timescale,t.duration=Math.round(n.duration*n.timescale),t.rate=65536,t.volume=256,t.reserved=0,t.reserved_2=[0,0],t.matrix=[65536,0,0,0,65536,0,0,0,1073741824],t.pre_defined=[0,0,0,0,0,0],t.next_track_ID=n.trackId+1,t.flags=0,t},t=function(e){var t,n,i;return t=new _.boxes.TrackBox,n=new _.boxes.TrackHeaderBox,n.version=1,n.flags=7,n.creation_time=0,n.modification_time=0,n.track_id=e.trackId,n.reserved=0,n.duration=Math.round(e.duration*e.timescale),n.reserved_2=[0,0],n.layer=0,n.alternate_group=0,n.volume=256,n.reserved_3=0,n.matrix=[65536,0,0,0,65536,0,0,0,1073741824],n.width=e.width<<16,n.height=e.height<<16,t.boxes.push(n),i=new _.boxes.MediaBox,i.boxes.push(r(e)),i.boxes.push(o(e)),i.boxes.push(a(e)),t.boxes.push(i),t},n=function(e){var t,n,r,i=0;return t=e.charCodeAt(0)-96<<10,n=e.charCodeAt(1)-96<<5,r=e.charCodeAt(2)-96,i=t|n|r,i},r=function(e){var t=new _.boxes.MediaHeaderBox;return t.flags=0,t.version=1,t.creation_time=0,t.modification_time=0,t.timescale=e.timescale,t.duration=Math.round(e.duration*e.timescale),t.pad=0,t.language=n(e.language),t.pre_defined=0,t},i=function(e){var t,n=0;for(t=0;t<e.length;t+=1)n|=e.charCodeAt(t)<<8*(e.length-t-1);return n},o=function(e){var t=new _.boxes.HandlerBox;switch(t.version=0,t.pre_defined=0,e.type){case"video":t.handler_type=i(t.HANDLERTYPEVIDEO),t.name=t.HANDLERVIDEONAME;break;case"audio":t.handler_type=i(t.HANDLERTYPEAUDIO),t.name=t.HANDLERAUDIONAME;break;default:t.handler_type=i(t.HANDLERTYPETEXT),t.name=t.HANDLERTEXTNAME}return t.name+="\0",t.reserved=[0,0,0],t.flags=0,t},a=function(e){var t=new _.boxes.MediaInformationBox;switch(e.type){case"video":t.boxes.push(M(e));break;case"audio":t.boxes.push(C(e));break;default:}return t.boxes.push(s(e)),t.boxes.push(R(e)),t},s=function(){var e,t,n;return e=new _.boxes.DataInformationBox,t=new _.boxes.DataReferenceBox,t.version=0,t.entry_count=1,t.flags=0,n=new _.boxes.DataEntryUrlBox,n.location="",n.version=0,n.flags=1,t.boxes.push(n),e.boxes.push(t),e},u=function(){var e=new _.boxes.TimeToSampleBox;return e.version=0,e.entry_count=0,e.flags=0,e.entry=[],e},l=function(){var e=new _.boxes.SampleToChunkBox;return e.flags=0,e.version=0,e.entry_count=0,e.entry=[],e},d=function(){var e=new _.boxes.ChunkOffsetBox;return e.version=0,e.entry_count=0,e.flags=0,e.chunk_offset=[],e},f=function(){var e=new _.boxes.SampleSizeBox;return e.version=0,e.flags=0,e.sample_count=0,e.sample_size=0,e},h=function(e){var t,n=new Uint8Array(e.length/2);for(t=0;t<e.length/2;t+=1)n[t]=parseInt(""+e[2*t]+e[2*t+1],16);return n},p=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e,0),n.set(t,e.length),n},m=function(e){var t,n,r,i,o,a,s,u,l,d=new RegExp("^[A-Z0-9]7","gi"),c=new RegExp("^[A-Z0-9]8","gi");for(t=new _.boxes.AVCConfigurationBox,t.configurationVersion=1,t.lengthSizeMinusOne=3,t.reserved=63,t.SPS_NAL=[],t.PPS_NAL=[],n=new Uint8Array(0),r=e.codecPrivateData,i=r.split("00000001"),i.splice(0,1),o=0,a=0,s=0;s<i.length;s+=1)u=h(i[s]),i[s].match(d)&&(t.SPS_NAL[o++]={NAL_length:u.length,NAL:u},t.AVCProfileIndication=parseInt(i[s].substr(2,2),16),t.profile_compatibility=parseInt(i[s].substr(4,2),16),t.AVCLevelIndication=parseInt(i[s].substr(6,2),16)),i[s].match(c)&&(t.PPS_NAL[a++]={NAL_length:u.length,NAL:u}),l=new Uint8Array(u.length+4),l[3]=u.length,l.set(u,4),n=p(n,l);return t.numOfSequenceParameterSets=o,t.numOfPictureParameterSets=a,t},g=function(e){var t=null;return t=void 0!==e.contentProtection?new _.boxes.EncryptedVideoBox:new _.boxes.AVC1VisualSampleEntryBox,t.data_reference_index=1,t.compressorname=[10,65,86,67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t.depth=24,t.reserved=[0,0,0,0,0,0],t.reserved_2=0,t.reserved_3=0,t.pre_defined=0,t.pre_defined_2=[0,0,0],t.pre_defined_3=65535,t.frame_count=1,t.horizresolution=4718592,t.vertresolution=4718592,t.height=e.height,t.width=e.width,t.boxes.push(m(e)),void 0!==e.contentProtection&&t.boxes.push(T(e)),t},y=function(e){var t=new _.boxes.OriginalFormatBox;return t.data_format=i(e.codecs.substring(0,e.codecs.indexOf("."))),t},v=function(){var e=new _.boxes.SchemeTypeBox;return e.flags=0,e.version=0,e.scheme_type=1667591779,e.scheme_version=65536,e},E=function(e){var t=new _.boxes.SchemeInformationBox;return t.boxes.push(b(e)),t},b=function(e){var t=new _.boxes.TrackEncryptionBox;return t.flags=0,t.version=0,t.default_IsEncrypted=1,t.default_IV_size=8,t.default_KID=e.contentProtection&&e.contentProtection.length>0&&e.contentProtection[0]["cenc:default_KID"]?e.contentProtection[0]["cenc:default_KID"]:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t},T=function(e){var t=new _.boxes.ProtectionSchemeInformationBox;return t.boxes.push(y(e)),t.boxes.push(v()),t.boxes.push(E(e)),t},S=function(e){var t=e.codecs.substring(0,e.codecs.indexOf("."));switch(t){case"avc1":return g(e);default:throw{name:c.dependencies.ErrorHandler.prototype.MEDIA_ERR_CODEC_UNSUPPORTED,message:"Video codec is not supported (MP4)",data:{codec:t}}}},I=function(e){var t=[];while(e.length>=2)t.push(parseInt(e.substring(0,2),16)),e=e.substring(2,e.length);return t},w=function(e){var t,n,r,i,o,a,s;return t=I(e.codecPrivateData),n=t.length,r=new Uint8Array(2+n),r[0]=5,r[1]=n,r.set(t,2),i=13+r.length,o=new Uint8Array(2+i),o[0]=4,o[1]=i,o[2]=64,o[3]=20,o[3]|=0,o[3]|=1,o[4]=255,o[5]=255,o[6]=255,o[7]=(4278190080&e.bandwidth)>>24,o[8]=(16711680&e.bandwidth)>>16,o[9]=(65280&e.bandwidth)>>8,o[10]=255&e.bandwidth,o[11]=(4278190080&e.bandwidth)>>24,o[12]|=(16711680&e.bandwidth)>>16,o[13]|=(65280&e.bandwidth)>>8,o[14]|=255&e.bandwidth,o.set(r,15),a=3+o.length,s=new Uint8Array(2+a),s[0]=3,s[1]=a,s[2]=(65280&e.trackId)>>8,s[3]=255&e.trackId,s[4]=0,s.set(o,5),s},x=function(e){var t,n,r=null;return r=void 0!==e.contentProtection?new _.boxes.EncryptedAudioBox:new _.boxes.MP4AudioSampleEntryBox,r.reserved=[0,0,0,0,0,0],r.data_reference_index=1,r.reserved_2=[0,0],r.channelcount=e.channels,r.samplesize=16,r.pre_defined=0,r.reserved_3=0,r.samplerate=e.samplingRate<<16,t=new _.boxes.ESDBox,n=w(e),t.ES_tag=n[0],t.ES_length=n[1],t.ES_data=n.subarray(2,n.length),t.version=0,t.flags=0,r.boxes.push(t),void 0!==e.contentProtection&&r.boxes.push(T(e)),r},A=function(e){var t=e.codecs.substring(0,e.codecs.indexOf("."));switch(t){case"mp4a":return x(e);default:throw{name:c.dependencies.ErrorHandler.prototype.MEDIA_ERR_CODEC_UNSUPPORTED,message:"Audio codec is not supported (MP4)",data:{codec:t}}}return null},D=function(e){var t=new _.boxes.SampleDescriptionBox;switch(t.version=0,t.flags=0,e.type){case"video":t.boxes.push(S(e));break;case"audio":t.boxes.push(A(e));break;default:break}return t},R=function(e){var t=new _.boxes.SampleTableBox;return t.boxes.push(u(e)),t.boxes.push(l(e)),t.boxes.push(d(e)),t.boxes.push(f(e)),t.boxes.push(D(e)),t},M=function(){var e=new _.boxes.VideoMediaHeaderBox;return e.version=0,e.flags=1,e.graphicsmode=0,e.opcolor=[0,0,0],e},C=function(){var e=new _.boxes.SoundMediaHeaderBox;return e.version=0,e.balance=0,e.reserved=0,e.flags=1,e},N=function(){var e=new _.boxes.FileTypeBox;return e.major_brand=1769172790,e.minor_brand=1,e.compatible_brands=[],e.compatible_brands[0]=1769172845,e.compatible_brands[1]=1769172790,e.compatible_brands[2]=1836278888,e},P=function(e){var t,n,r,i=e[e.length-1];for(t=new _.boxes.MovieExtendsBox,r=0;r<e.length;r+=1)i=e[r],n=new _.boxes.TrackExtendsBox,n.version=0,n.flags=0,n.track_ID=i.trackId,n.default_sample_description_index=1,n.default_sample_duration=0,n.default_sample_flags=0,n.default_sample_size=0,t.boxes.push(n);return t},L=function(e){var t,n,r,i=[];for(r=0;r<e.length;r+=1)t=new Uint8Array(e[r].initData),n=new _.boxes.ProtectionSystemSpecificHeaderBox,n.read(t,8,t.length),i.push(n);return i},O=function(n){var r,i,o,a=[];for(r=new _.boxes.MovieBox,r.boxes.push(e(n)),o=0;o<n.length;o+=1)r.boxes.push(t(n[o]));for(r.boxes.push(P(n)),o=0;o<n.length;o++)void 0!==n[o].contentProtection&&(i=this.protectionExt.getSupportedKeySystemsFromContentProtection(n[o].contentProtection),r.boxes.push.apply(r.boxes,L(i)));return a.push(N()),a.push(r),a},F=1,B=function(){var e=new _.boxes.MovieFragmentHeaderBox;return e.version=0,e.flags=0,e.sequence_number=F++,e},k=function(e){var t=new _.boxes.TrackFragmentBox;return t.version=0,t.flags=0,t.boxes.push(U(e)),t.boxes.push(H(e)),t.boxes.push(j(e)),t.boxes.push(K(e)),t},U=function(e){var t=new _.boxes.TrackFragmentHeaderBox;return t.version=0,t.flags=131072,t.track_ID=e.trackId,t},H=function(e){var t=new _.boxes.TrackFragmentBaseMediaDecodeTimeBox;return t.version=1,t.flags=0,t.baseMediaDecodeTime=e.samples.length>0?e.samples[0].dts:0,t},j=function(e){var t,n,r,i=new _.boxes.TrackFragmentRunBox;for(e.samples[0].cts,n=e.samples[0].duration>0?256:0,i.version=0,i.flags=1537|n|("video"===e.type?2048:0),i.data_offset=0,i.samples_table=[],i.sample_count=e.samples.length,t=0;t<e.samples.length;t++)r={sample_duration:e.samples[t].duration,sample_size:e.samples[t].size,sample_composition_time_offset:e.samples[t].cts-e.samples[t].dts,sample_flags:e.samples[t].flags},r.sample_composition_time_offset<0&&(i.version=1),i.samples_table.push(r);return i},K=function(e){var t,n=new _.boxes.SampleDependencyTableBox;for(n.version=0,n.flags=0,n.sample_dependency_table=[],t=0;t<e.samples.length;t++)n.sample_dependency_table.push((267386880&e.samples[t].flags)>>20);return n},V=function(e){var t=new _.boxes.MediaDataBox;return t.data=e.data,t},q=function(e){var t,n,r,i,o=[],a=0,s={},u=[],l=0;if(t=new _.boxes.MovieFragmentBox,t.boxes.push(B()),e)for(n=0;n<e.length;n+=1)t.boxes.push(k(e[n]));if(o.push(t),t.computeLength(),r=t.size,i=t.getBoxesByType("traf"),r+=8,e&&e.length&&(u=[e.length]),e)for(n=0;n<e.length;n+=1)i[n].getBoxByType("trun").data_offset=r,r+=e[n].data.length,u[n]=e[n].data,a+=u[n].length;for(s.data=new Uint8Array(a),n=0;n<u.length;n++)s.data.set(u[n],l),l+=u[n].length;return o.push(V(s)),o};return{protectionExt:void 0,generateInitSegment:function(e){var t=new _.boxes.File;return t.boxes=O.call(this,e),_.serialize(t)},generateMediaSegment:function(e){var t=new _.boxes.File;return t.boxes=q.call(this,e),_.serialize(t)},generateInitMediaSegment:function(e){var t=new _.boxes.File;return t.boxes=O.call(this,e),t.boxes=t.boxes.concat(q.call(this,e)),_.serialize(t)}}},c.dependencies.Mp4Processor.prototype={constructor:c.dependencies.Mp4Processor},c.dependencies.Notifier=function(){"use strict";var e,t="observableId",n=0,r=function(){return this[t]||(n+=1,this[t]="_id_"+n),this[t]};return{system:void 0,setup:function(){e=this.system,e.mapValue("notify",this.notify),e.mapValue("subscribe",this.subscribe),e.mapValue("unsubscribe",this.unsubscribe)},notify:function(){var t=arguments[0]+r.call(this),n=new c.vo.Event;n.sender=this,n.type=arguments[0],n.data=arguments[1],n.error=arguments[2],n.timestamp=(new Date).getTime(),e.notify.call(e,t,n)},subscribe:function(t,n,i,o){if(!i&&n[t]&&(i=n[t]=n[t].bind(n)),!n)throw"observer object cannot be null or undefined";if(!i)throw"event handler cannot be null or undefined";t+=r.call(this),e.mapHandler(t,void 0,i,o)},unsubscribe:function(t,n,i){i=i||n[t],t+=r.call(this),e.unmapHandler(t,void 0,i)}}},c.dependencies.Notifier.prototype={constructor:c.dependencies.Notifier},c.dependencies.Parser=function(){"use strict";var e=null,n=function(n,r){if(null===e)if(n.indexOf("SmoothStreamingMedia")>-1&&"undefined"!==typeof this.mssParser)this.system.notify("setContext","MSS"),e=this.mssParser;else if(n.indexOf("#EXTM3U")>-1&&"undefined"!==typeof this.hlsParser)this.system.notify("setContext","HLS"),e=this.hlsParser;else{if(!(n.indexOf("MPD")>-1&&"undefined"!==typeof this.dashParser))return t.reject("manifest cannot be parsed, protocol is unsupported!");this.system.notify("setContext","MPD"),e=this.dashParser}return e.parse(n,r)},r=function(){null!==e&&void 0!==e.abort&&e.abort()},i=function(){e=null};return{debug:void 0,system:void 0,dashParser:void 0,mssParser:void 0,hlsParser:void 0,metricsModel:void 0,parse:n,abort:r,reset:i}},c.dependencies.Parser.prototype={constructor:c.dependencies.Parser},c.dependencies.SourceBufferExtensions=function(){"use strict";this.system=void 0,this.manifestExt=void 0},c.dependencies.SourceBufferExtensions.prototype={constructor:c.dependencies.SourceBufferExtensions,createSourceBuffer:function(e,t){"use strict";var n=null;if(!e)return null;try{n=e.addSourceBuffer(t)}catch(r){if(!this.manifestExt.getIsTextTrack(t))throw r;if("text/vtt"===t||"text/ttml"===t)n=this.system.getObject("textSourceBuffer");else{if("application/ttml+xml+mp4"!==t&&"application/mp4"!==t&&"application/ttml+xml"!==t)throw r;n=this.system.getObject("textTTMLXMLMP4SourceBuffer")}}return n},removeSourceBuffer:function(e,t){"use strict";try{e.removeSourceBuffer(t)}catch(n){}},getBufferRange:function(e,t,n){"use strict";var r,i,o=null,a=0,s=0,u=null,l=null,d=0,c=n||.03;try{o=e.buffered}catch(f){return null}if(o){for(i=0,r=o.length;i<r;i+=1)if(a=o.start(i),s=o.end(i),null===u){if(d=Math.abs(a-t),t>=a&&t<s){u=a,l=s;continue}if(d<=c){u=a,l=s;continue}}else{if(d=a-l,!(d<=c))break;l=s}if(null!==u)return{start:u,end:l}}return null},getAllRanges:function(e){var t=null;try{return t=e.buffered,t}catch(n){return null}},getBufferLength:function(e,t,n){"use strict";var r,i,o=this;return r=o.getBufferRange(e,t,n),i=null===r?0:r.end-t,i},waitForUpdateEnd:function(e){"use strict";var n,r=t.defer(),i=50,o=function(){e.updating||(clearInterval(n),r.resolve(!0))},a=function(){e.updating||(e.removeEventListener("updateend",a,!1),r.resolve(!0))};if(!e.updating)return r.resolve(!0),r.promise;if("function"===typeof e.addEventListener)try{e.addEventListener("updateend",a,!1)}catch(s){n=setInterval(o,i)}else n=setInterval(o,i);return r.promise},append:function(e,n,r){var i=t.defer(),o=this;return o.waitForUpdateEnd(e).then(function(){try{"append"in e?e.append(n,r):"appendBuffer"in e&&e.appendBuffer(n),o.waitForUpdateEnd(e,r).then(function(){i.resolve()})}catch(t){i.reject({err:t,data:n})}}),i.promise},remove:function(e,n,r,i,o){var a=t.defer(),s=this;return s.waitForUpdateEnd(e).then(function(){try{n>=0&&n<i&&r>n&&"ended"!==o.readyState&&e.remove(n,r),isNaN(r)&&"ended"!==o.readyState&&e.remove(n),s.waitForUpdateEnd(e).then(function(){a.resolve()})}catch(t){a.reject(t)}}),a.promise},abort:function(e,t){"use strict";try{"open"===e.readyState&&t.abort()}catch(n){}}},Math.sign||(Math.sign=function(e){"use strict";return e<0?-1:0===e?0:1}),c.dependencies.Stream=function(){"use strict";var e,n,r,i,o,a,s,u,l,d,f,h,p,m,g,y,v,_,E,b,T,S,I,w,x,A,D,R,M=null,C=null,N=-1,P=null,L=-1,O=null,F=!1,B=!1,k=null,U=null,H=null,j=-1,K=!0,V=!1,q=!1,G="und",Y="und",z=null,W=-1,X=-1,$="Stopped",Q=1,J=!1,Z=!1,ee=null,te=!0,ne=null,re=!1,ie=-1,oe=-1,ae=function(e){this.errHandler.sendError(e.data.code,e.data.message,e.data.data)},se=function(){V&&(this.debug.info("[Stream] Play."),this.videoModel.play())},ue=function(){this.debug.info("[Stream] Pause."),this.videoModel.pause()},le=function(t,n){V&&(this.debug.info("[Stream] Seek: "+t),this.manifestExt.getIsDynamic(e)&&!re&&0!==this.videoModel.getCurrentTime()&&ye.call(this),!0===n?(_=t,this.system.unmapHandler("bufferUpdated"),this.system.mapHandler("bufferUpdated",void 0,qe.bind(this)),Fe.call(this,_)):this.videoModel.setCurrentTime(t))},de=function(e){var n=t.defer(),r=this,i=function(){e.removeEventListener("sourceopen",i),e.removeEventListener("webkitsourceopen",i),n.resolve(e)};return e.addEventListener("sourceopen",i,!1),e.addEventListener("webkitsourceopen",i,!1),r.mediaSourceExt.attachMediaSource(e,r.videoModel),n.promise},ce=function(){var r=this,i=[],o=t.defer(),a=function(){C&&i.push(C.reset(q)),k&&i.push(k.reset(q)),P&&i.push(P.reset(q)),U&&i.push(U.reset(q)),O&&i.push(O.reset(q)),H&&i.push(H.reset(q)),t.all(i).then(function(){ee&&(ee.reset(),ee=void 0),n&&r.mediaSourceExt.detachMediaSource(r.videoModel),V=!1,M=null,C=null,P=null,O=null,n=null,e=null,o.resolve()})};return t.when(te).then(function(){a()}),o.promise},fe=function(e,t){var r=null,i=null;if(("video"===e.type||"audio"===e.type)&&!this.capabilities.supportsCodec(this.videoModel.getElement(),t))return this.errHandler.sendError(c.dependencies.ErrorHandler.prototype.MEDIA_ERR_CODEC_UNSUPPORTED,"Codec is not supported (HTMLMediaElement)",{codec:t}),null;try{i=this.sourceBufferExt.createSourceBuffer(n,t)}catch(o){return this.errHandler.sendError(c.dependencies.ErrorHandler.prototype.MEDIA_ERR_CREATE_SOURCEBUFFER,"Failed to create "+e.type+" source buffer",new c.vo.Error(o.code,o.name,o.message)),null}return r=this.system.getObject("bufferController"),r.initialize(e.type,z,e,i,this.fragmentController,n,ee),"text"===e.type&&i.hasOwnProperty("initialize")&&i.initialize(t,r,e),r},he=function(t,n){if("MSS"!==e.name||!this.manifestExt.getIsDynamic(e)&&!this.manifestExt.getIsStartOver(e))return null;var r=null;return t&&n&&n.type&&(r=this.system.getObject("mssFragmentInfoController"),r.initialize(n.type,this.fragmentController,t)),r},pe=function(){var n,r,i=null,o=null,a=null,s=this;return n=this.manifestExt.getVideoData(e,z.index),n&&(a=this.manifestExt.getCodec(n),M=this.manifestExt.getContentProtectionData(n)),n=this.manifestExt.getSpecificAudioData(e,z.index,G),n&&(o=this.manifestExt.getCodec(n)),M?this.capabilities.supportsEncryptedMedia()?R?(i=t.defer(),r={},r[c.dependencies.ProtectionController.eventList.ENAME_KEY_SYSTEM_SELECTED]=function(){s.debug.log("[Stream] ProtectionController initialized"),R.unsubscribe(c.dependencies.ProtectionController.eventList.ENAME_KEY_SYSTEM_SELECTED,r),i.resolve(!0)},R.subscribe(c.dependencies.ProtectionController.eventList.ENAME_KEY_SYSTEM_SELECTED,r),this.debug.log("[Stream] Initialize ProtectionController"),R.init(M,o,a),i.promise):t.when(!0):(this.errHandler.sendError(c.dependencies.ErrorHandler.prototype.CAPABILITY_ERR_MEDIAKEYS,"EME is not supported/enabled",null),t.when(!1)):t.when(!0)},me=function(){var t,n,r,i;if(e)if(te=!1,ee=this.system.getObject("eventController"),t=this.manifestExt.getVideoData(e,z.index),null===t?this.errHandler.sendError(c.dependencies.ErrorHandler.prototype.MANIFEST_ERR_NO_VIDEO,"No Video data in manifest"):(ze.call(this,t),N=this.manifestExt.getDataIndex(t,e,z.index),n=this.manifestExt.getCodec(t),M=this.manifestExt.getContentProtectionData(t),null===n?this.errHandler.sendError(c.dependencies.ErrorHandler.prototype.MEDIA_ERR_CODEC_UNSUPPORTED,"Video codec information not available",{codec:""}):(C=fe.call(this,t,n),k=he.call(this,C,t))),null!==C){if(t=this.manifestExt.getSpecificAudioData(e,z.index,G),null===t)this.errHandler.sendWarning(c.dependencies.ErrorHandler.prototype.MANIFEST_ERR_NO_AUDIO,"No audio data in manifest");else if(ze.call(this,t),L=this.manifestExt.getDataIndex(t,e,z.index),r=this.manifestExt.getCodec(t),null===r)this.errHandler.sendWarning(c.dependencies.ErrorHandler.prototype.MEDIA_ERR_CODEC_UNSUPPORTED,"Audio codec information not available",{codec:""});else{if(P=fe.call(this,t,r),null===P)return void(te=!0);U=he.call(this,P,t)}t=this.manifestExt.getSpecificTextData(e,z.index,Y),null!==t&&(j=this.manifestExt.getDataIndex(t,e,z.index),i=this.manifestExt.getMimeType(t),null===i?this.errHandler.sendWarning(c.dependencies.ErrorHandler.prototype.MANIFEST_ERR_NO_TEXT,"Text codec information not available"):(O=fe.call(this,t,i),H=he.call(this,O,t))),ee&&ee.addInlineEvents(this.manifestExt.getEventsForPeriod(e,z)),te=!0}else te=!0},ge=function(){this.debug.log("[Stream] Setting duration: "+z.duration),this.mediaSourceExt.setDuration(n,z.duration),V=!0},ye=function(){"MSS"===e.name&&(this.manifestExt.getIsDynamic(e)||this.manifestExt.getIsStartOver(e))&&(k&&!1===B&&(B=!0,k.start(C.getSegmentDuration())),U&&U.start(P.getSegmentDuration()),H&&F&&H.start(O.getSegmentDuration()))},ve=function(){k&&(B=!1,k.stop()),U&&U.stop(),H&&H.stop()},_e=function(){this.debug.info("[Stream] <video> loadedmetadata event")},Ee=function(){this.debug.info("[Stream] <video> canplay event")},be=function(){this.debug.info("[Stream] <video> playing event"),this.metricsModel.addState("video","playing",this.getVideoModel().getCurrentTime()),ie=(new Date).getTime()/1e3,oe=this.getVideoModel().getCurrentTime()},Te=function(){this.debug.info("[Stream] <video> loadstart event")},Se=function(){this.debug.info("[Stream] <video> play event"),this.videoModel.listen("pause",a),1!==Q?this.setTrickModeSpeed(1):X>=0?(je.call(this,X),X=-1):Fe.call(this),this.metricsModel.addPlayList("video",(new Date).getTime(),this.videoModel.getCurrentTime(),"play")},Ie=function(){this.debug.info("[Stream] <video> ended event"),this.metricsModel.addState("video","stopped",this.videoModel.getCurrentTime(),1),this.manifestExt.getIsStartOver(e)&&ve.call(this)},we=function(){this.debug.info("[Stream] <video> pause event"),ie=-1,oe=-1,1===Q&&(this.metricsModel.addState("video","paused",this.videoModel.getCurrentTime()),this.metricsModel.addPlayList("video",(new Date).getTime(),this.videoModel.getCurrentTime(),"pause")),Ue.call(this),"MSS"===e.name&&this.manifestExt.getIsDynamic(e)&&ye.call(this)},xe=function(e){var t,n=e.target.error,r="[Stream] <video> error: ";if(-1!==n.code){switch(n.code){case 1:t=c.dependencies.ErrorHandler.prototype.MEDIA_ERR_ABORTED,r+="fetching process aborted";break;case 2:t=c.dependencies.ErrorHandler.prototype.MEDIA_ERR_NETWORK,r+="network error";break;case 3:t=c.dependencies.ErrorHandler.prototype.MEDIA_ERR_DECODE,r+="media decoding error";break;case 4:t=c.dependencies.ErrorHandler.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED,r+="media format not supported";break;case 5:t=c.dependencies.ErrorHandler.prototype.MEDIA_ERR_ENCRYPTED,r+="media is encrypted";break}q=!0,this.errHandler.sendError(t,r)}},Ae=function(){var e=this.videoModel.getCurrentTime(),t=this.videoModel.getDuration();if(this.debug.info("[Stream] <video> seeking event: "+e),1===Q||e.toFixed(3)===D.toFixed(3)){e=e<this.getStartTime()?this.getStartTime():e;var n=this.config.getParam("backoffSeekToEnd","number",2);t!==1/0&&e>=t-n?je.call(this,t-n):(1===Q&&(this.metricsModel.addState("video","seeking",this.getVideoModel().getCurrentTime()),this.metricsModel.addPlayList("video",(new Date).getTime(),e,c.vo.metrics.PlayList.SEEK_START_REASON)),Fe.call(this,e))}else this.setTrickModeSpeed(1)},De=function(){var e,t,n,r,i,o,a,s,l,d=this,c=.9,f=function(e,t){if(d.videoModel.getCurrentTime()===d.getStartTime()||J)return d.debug.log("[Stream] Trick mode (x"+Q+"): stop"),void(J&&(s=document.createEvent("Event"),s.initEvent("ended",!0,!0),d.videoModel.getElement().dispatchEvent(s)));t<d.getStartTime()?t=d.getStartTime():t>=d.videoModel.getDuration()&&(t=d.videoModel.getDuration()-I,J=!0),e>0&&d.debug.log("[Stream] Trick mode (x"+Q+"): wait "+e.toFixed(3)+" s"),A=setTimeout(function(){x=(new Date).getTime()/1e3,d.debug.log("[Stream] Trick mode (x"+Q+"): seek time = "+t.toFixed(3)),D=t,d.videoModel.setCurrentTime(t)},e>0?1e3*e:0)};if(this.debug.info("[Stream] <video> seeked event"),ke.call(this),1!==Q){if(e=(new Date).getTime()/1e3,t=d.videoModel.getCurrentTime(),n=e-T,r=e-x,i=Math.abs(t-S),o=i/n,d.debug.log("[Stream] Trick mode (x"+Q+"): elapsed time = "+n.toFixed(3)+", elapsed video time = "+i.toFixed(3)+", speed = "+o.toFixed(3)),"Changed"===$)clearTimeout(A),$="Running",T=(new Date).getTime()/1e3,S=t,d.debug.info("[Stream] Trick mode (x"+Q+"): videoTime = "+S),w=Math.abs(b/Q)>1?w/Math.abs(b/Q):w,a=t+w*Math.sign(Q),l=0;else if(o<Math.abs(Q)*c){var h=Math.abs(Q/o);w*=Math.round(h)+Math.round(h%I),d.debug.info("[Stream] Trick mode (x"+Q+"): seek step = "+w),a=t+w*Math.sign(Q),l=0}else a=t+w*Math.sign(Q),l=Math.abs(a-S)/Math.abs(Q)-n-r;f.call(d,l,a)}this.videoModel.listen("seeking",u),re=!1,ie=-1,oe=-1},Re=function(){this.debug.info("[Stream] <video> progress event"),Oe.call(this)},Me=function(){this.debug.info("[Stream] <video> timeupdate event: "+this.videoModel.getCurrentTime()),Oe.call(this)},Ce=function(){this.debug.info("[Stream] <video> waiting event"),this.getVideoModel().isSeeking()||this.metricsModel.addState("video","buffering",this.getVideoModel().getCurrentTime())},Ne=function(){var e=this.videoModel.getDuration();this.debug.info("[Stream] <video> durationchange event: "+e)},Pe=function(){this.debug.info("[Stream] <video> ratechange event: "+this.videoModel.getPlaybackRate()),C&&C.updateStalledState(),P&&P.updateStalledState(),O&&O.updateStalledState()},Le=function(){ue.call(this),re=!0,this.system.notify("manifestUpdate",!0)},Oe=function(){C&&C.updateBufferLevel(!0),P&&P.updateBufferLevel(!0),O&&O.updateBufferLevel(!0)},Fe=function(e){this.debug.log("[Stream] startBuffering"+(void 0===e?"":" at time "+e)),C&&(void 0===e?C.start():C.seek(e)),P&&(void 0===e?P.start():P.seek(e)),O&&F&&1===Q&&(void 0===e?O.start():O.seek(e))},Be=function(){this.debug.log("[Stream] stopBuffering"),C&&C.stop(),P&&P.stop(),O&&O.stop()},ke=function(){C&&C.seeked(),P&&P.seeked(),O&&O.seeked()},Ue=function(){this.scheduleWhilePaused&&!this.manifestExt.getIsDynamic(e)||Be.call(this),clearInterval(E)},He=function(t){var r=this;e=t,r.debug.log("[Stream] Create MediaSource");try{n=r.mediaSourceExt.createMediaSource()}catch(i){r.errHandler.sendError(c.dependencies.ErrorHandler.prototype.MEDIA_ERR_CREATE_MEDIASOURCE,"Failed to create MediaSource",{name:i.name,message:i.message})}null!==n&&pe.call(r).then(function(){r.debug.log("[Stream] Setup MediaSource"),de.call(r,n).then(function(e){n=e,r.debug.log("[Stream] Initialize MediaSource"),me.call(r),r.debug.log("[Stream] Initialize playback"),ge.call(r),r.debug.log("[Stream] Playback initialized")})})},je=function(e){this.debug.log("[Stream] Set video model current time: "+e),this.videoModel.unlisten("seeking",u),this.videoModel.setCurrentTime(e)},Ke=function(){C&&!C.isBufferingCompleted()||P&&!P.isBufferingCompleted()||n&&(this.videoModel.unlisten("pause",a),this.debug.info("[Stream] Signal end of stream"),this.mediaSourceExt.signalEndOfStream(n))},Ve=function(t){this.debug.info("[Stream] Start time = "+t),-1!==W&&!this.manifestExt.getIsDynamic(e)&&W<z.duration&&(this.debug.info("[Stream] Initial start time = "+W),t=W),le.call(this,t,0===z.index&&K)},qe=function(){var t,n,r;if(this.debug.info("[Stream] Check start time"),t=this.sourceBufferExt.getBufferRange(C.getBuffer(),_,C.getSegmentDuration()),null!==t&&(r=Math.max(_,t.start),!(t.end<r))){if(P){if(n=this.sourceBufferExt.getBufferRange(P.getBuffer(),_,P.getSegmentDuration()),null===n)return;if(this.debug.info("[Stream] Check start time: A["+n.start+"-"+n.end+"], V["+t.start+"-"+t.end+"]"),n.end<r)return;r=Math.max(r,n.start)}this.debug.info("[Stream] Check start time: OK => "+r),this.system.unmapHandler("bufferUpdated"),this.videoModel.isPaused()?X=r:je.call(this,r),this.manifestExt.getIsStartOver(e)&&ye.call(this),se.call(this)}},Ge=function(t){this.debug.info("[Stream] Source duration changed: "+t),this.mediaSourceExt.setDuration(n,t),e.mediaPresentationDuration=t,z.duration=t},Ye=function(t,n,r){var i=-1;return t?-1===r?r:(i=this.manifestExt.getDataIndex(n,e,z.index),i!==r&&("MSS"===e.name&&(this.manifestExt.getIsDynamic(e)||this.manifestExt.getIsStartOver(e))?this.system.notify("manifestUpdate"):t.updateData(n,z)),i):r},ze=function(e){var t,n;n=1;while(n<e.Representation_asArray.length)t=this.manifestExt.getCodecForRepresentation(e.Representation_asArray[n]),t&&(this.capabilities.supportsCodec(this.videoModel.getElement(),t)||(this.debug.warn("[Stream] codec not supported: "+t),e.Representation_asArray.splice(n,1),n--)),n++},We=function(t){var n,r;if(e=this.manifestModel.getValue(),z=t,this.debug.log("[Stream] Manifest updated ... set new data on buffers."),C&&(n=C.getData(),r=n&&n.hasOwnProperty("id")?this.manifestExt.getDataForId(n.id,e,z.index):this.manifestExt.getDataForIndex(N,e,z.index),ze.call(this,r),C.updateData(r,z)),P&&(r=this.manifestExt.getDataForIndex(L,e,z.index),ze.call(this,r),P.updateData(r,z)),O&&(r=this.manifestExt.getDataForIndex(j,e,z.index),O.updateData(r,z)),ee){var i=this.manifestExt.getEventsForPeriod(e,z);ee.addInlineEvents(i)}re&&C&&(this.system.unmapHandler("bufferUpdated"),this.system.mapHandler("bufferUpdated",void 0,qe.bind(this)),C.load()),B&&ye.call(this)},Xe=function(){var e=this.videoModel.getCurrentTime();O.seek(e),O.seeked()},$e=function(t){var n=this;if(this.debug.log("[Stream] Segment loading failed: start time = "+t.startTime+", duration = "+t.duration),(this.manifestExt.getIsDynamic(e)||this.manifestExt.getIsStartOver(e))&&null===ne){re=!0;var r=t.duration;this.debug.info("[Stream] Reload session in "+r+" s."),ne=setTimeout(function(){ne=null,re=!0,n.debug.info("[Stream] Reload session (update manifest)"),n.system.notify("manifestUpdate",!0),ve.call(n)},1e3*r)}else le.call(this,t.startTime+t.duration)},Qe=function(){if(!0!==document.hidden&&-1!==ie){var e=(new Date).getTime()/1e3,t=this.getVideoModel().getCurrentTime(),n=e-ie,r=t-oe;this.debug.log("[Stream] VisibilityChange: elapsedClockTime = "+n+", elapsedStreamTime = "+r+" ("+(n-r)+")"),n-r>1&&Le.call(this)}};return{system:void 0,videoModel:void 0,manifestLoader:void 0,manifestModel:void 0,mediaSourceExt:void 0,sourceBufferExt:void 0,manifestExt:void 0,fragmentController:void 0,fragmentExt:void 0,protectionExt:void 0,capabilities:void 0,debug:void 0,metricsExt:void 0,errHandler:void 0,timelineConverter:void 0,scheduleWhilePaused:void 0,textTrackExtensions:void 0,metricsModel:void 0,eventBus:void 0,notify:void 0,config:void 0,setup:function(){this.system.mapHandler("startTimeFound",void 0,Ve.bind(this)),this.system.mapHandler("segmentLoadingFailed",void 0,$e.bind(this)),this.system.mapHandler("bufferingCompleted",void 0,Ke.bind(this)),this.system.mapHandler("sourceDurationChanged",void 0,Ge.bind(this)),c.dependencies.ProtectionController&&(this[c.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR]=ae.bind(this)),o=Se.bind(this),a=we.bind(this),s=xe.bind(this),u=Ae.bind(this),l=De.bind(this),d=Ce.bind(this),p=Re.bind(this),m=Pe.bind(this),f=Me.bind(this),h=Ne.bind(this),i=_e.bind(this),g=Ee.bind(this),y=be.bind(this),v=Te.bind(this),r=Ie.bind(this),Qe.bind(this)},load:function(e,t){z=t,He.call(this,e)},setVideoModel:function(e){this.videoModel=e,this.videoModel.listen("play",o),this.videoModel.listen("pause",a),this.videoModel.listen("error",s),this.videoModel.listen("seeking",u),this.videoModel.listen("seeked",l),this.videoModel.listen("waiting",d),this.videoModel.listen("timeupdate",f),this.videoModel.listen("durationchange",h),this.videoModel.listen("progress",p),this.videoModel.listen("ratechange",m),this.videoModel.listen("loadedmetadata",i),this.videoModel.listen("ended",r),this.videoModel.listen("canplay",g),this.videoModel.listen("playing",y),this.videoModel.listen("loadstart",v)},setInitialStartTime:function(e){var t=parseFloat(e);isNaN(t)||(W=t)},getAudioTracks:function(){return this.manifestExt.getAudioDatas(e,z.index)},setAudioTrack:function(e){U&&U.stop(),L=Ye.call(this,P,e,L)},getSelectedAudioTrack:function(){if(P)return this.manifestExt.getDataForIndex(L,e,z.index)},getSubtitleTracks:function(){return this.manifestExt.getTextDatas(e,z.index)},setSubtitleTrack:function(e){H&&H.stop(),j=Ye.call(this,O,e,j)},getSelectedSubtitleTrack:function(){if(O&&F)return this.manifestExt.getDataForIndex(j,e,z.index)},initProtection:function(e){R=e,R&&R.subscribe(c.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,this)},getVideoModel:function(){return this.videoModel},getManifestExt:function(){var e=this;return e.manifestExt},setAutoPlay:function(e){K=e},setDefaultAudioLang:function(e){G=e},setDefaultSubtitleLang:function(e){Y=e},getAutoPlay:function(){return K},reset:function(){var e=t.defer(),n=this;return this.debug.info("[Stream] Reset"),Be.call(this),ve.call(this),ue.call(this),clearTimeout(A),clearTimeout(ne),1!==Q&&this.videoModel.setMute(Z),this.videoModel.unlisten("play",o),this.videoModel.unlisten("pause",a),this.videoModel.unlisten("error",s),this.videoModel.unlisten("seeking",u),this.videoModel.unlisten("seeked",l),this.videoModel.unlisten("waiting",d),this.videoModel.unlisten("timeupdate",f),this.videoModel.unlisten("durationchange",h),this.videoModel.unlisten("progress",p),this.videoModel.unlisten("ratechange",m),this.videoModel.unlisten("loadedmetadata",i),this.videoModel.unlisten("ended",r),this.videoModel.unlisten("canplay",g),this.videoModel.unlisten("playing",y),this.videoModel.unlisten("loadstart",v),this.system.unmapHandler("streamsComposed",void 0,Xe),this.system.unmapHandler("bufferUpdated"),this.system.unmapHandler("startTimeFound"),this.system.unmapHandler("segmentLoadingFailed"),this.system.unmapHandler("bufferingCompleted"),this.system.unmapHandler("sourceDurationChanged"),ce.call(this).then(function(){R&&R.unsubscribe(c.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,n),R=void 0,n.fragmentController=void 0,e.resolve()}),e.promise},getDuration:function(){return z.duration},getStartTime:function(){return z.start},getPeriodIndex:function(){return z.index},getId:function(){return z.id},getPeriodInfo:function(){return z},getMinbufferTime:function(){return C?C.getMinbufferTime():c.dependencies.BufferExtensions.DEFAULT_MIN_BUFFER_TIME},getLiveDelay:function(){return C?C.getLiveDelay():c.dependencies.BufferExtensions.DEFAULT_LIVE_DELAY},startEventController:function(){ee.start()},resetEventController:function(){ee.reset()},enableSubtitles:function(t){var n;t!==F&&(F=t,n=this.textTrackExtensions.getCurrentTextTrack(this.videoModel.getElement()),this.textTrackExtensions.cleanSubtitles(),O&&(t?("MSS"===e.name&&(this.manifestExt.getIsDynamic(e)||this.manifestExt.getIsStartOver(e))?(this.system.mapHandler("streamsComposed",void 0,Xe.bind(this),!0),this.system.notify("manifestUpdate")):Xe.call(this),n&&"metadata"!==n.kind&&"showing"!==n.mode?n.mode="showing":n&&(n.mode="hidden")):(H&&H.stop(),n&&(n.mode="disabled"),O.stop())))},setTrickModeSpeed:function(e){var n,r,i=[],o=this,s=1!==e,u=function(){o.videoModel.getCurrentTime()>n+1&&(o.videoModel.unlisten("timeupdate",u),o.debug.info("[Stream] Set mute: "+Z+", the mute state before using trick mode."),o.videoModel.setMute(Z))};e!==Q&&C&&(o.debug.info("[Stream] Trick mode: speed = "+e),s&&"Stopped"===$?(this.videoModel.unlisten("pause",a),o.debug.info("[Stream] Set mute: true"),Z=o.videoModel.getMute(),Z||o.videoModel.setMute(!0),o.videoModel.pause()):s||(o.metricsModel.addPlayList("video",(new Date).getTime(),S,"trickMode",Q),Q=1,clearTimeout(A),Be.call(o)),i.push(C.setTrickMode(s,e>1)),P&&i.push(P.setTrickMode(s,e>1)),t.all(i).then(function(){b=Q,Q=e,n=o.videoModel.getCurrentTime(),s?"Running"===$?(o.metricsModel.addPlayList("video",(new Date).getTime(),S,"trickMode",b),$="Changed"):"Stopped"===$&&(J=!1,$="Running",w=I=C.getSegmentDuration(),T=x=(new Date).getTime()/1e3,S=n,o.debug.info("[Stream] Trick mode (x"+Q+"): videoTime = "+S),r=n+w*Math.sign(Q),r=Math.round(1e3*(r-r%I))/1e3,o.debug.info("[Stream] Trick mode (x"+Q+"): seek step = "+w),D=r,le.call(o,r)):(o.videoModel.listen("pause",a),o.debug.info("[Stream] Trick mode: Stopped, current time = "+n),$="Stopped",o.videoModel.listen("timeupdate",u),n=J?o.getStartTime():n,le.call(o,n,!0))}))},getTrickModeSpeed:function(){return Q},updateData:We,play:se,seek:le,pause:ue}},c.dependencies.Stream.prototype={constructor:c.dependencies.Stream},c.dependencies.StreamController=function(){"use strict";var e,n,r,i,o,a,s,u,l,d=!1,f=[],h=!1,p=6,m=.2,g=!0,y=!1,v="und",_="und",E=!1,T=!1,S=null,I="Safari"===b().name,w=function(e,t){var n=e.getElement(),r=t.getElement();return r.parentNode||n.parentNode.insertBefore(r,n),n.style.width="0px",r.style.width="100%",D(n,r),A.call(this,e),x.call(this,t),!0},x=function(e){e.listen("seeking",o),e.listen("progress",a),e.listen("timeupdate",i),e.listen("pause",s),e.listen("play",u)},A=function(e){e.unlisten("seeking",o),e.unlisten("progress",a),e.unlisten("timeupdate",i),e.unlisten("pause",s),e.unlisten("play",u)},D=function(e,t){["controls","loop","muted","playbackRate","volume"].forEach(function(n){t[n]=e[n]})},R=function(){var e=n.getVideoModel().getElement().buffered;if(e.length){var t=e.length-1,r=e.end(t),i=n.getStartTime()+n.getDuration()-r;i<p&&(n.getVideoModel().unlisten("progress",a),O())}},M=function(e,t,r){!y&&e&&t&&e!==t&&(y=!0,e.pause(),n=t,w.call(this,e.getVideoModel(),t.getVideoModel()),r?this.seek(e.getVideoModel().getCurrentTime()):this.seek(t.getStartTime()),this.play(),e.resetEventController(),n.startEventController(),y=!1)},C=function(){if(n){var e=this,t=new Date,r=n.getStartTime()+n.getDuration(),i=n.getVideoModel().getElement(),o=i.currentTime,a=e.videoExt.getPlaybackQuality(i);a&&e.metricsModel.addPlaybackQuality("video",t,a,o),e.metricsModel.addVideoResolution("video",t,i.videoWidth,i.videoHeight,o),F()&&(n.getVideoModel().getElement().seeking||r-o<m&&M.call(this,n,F()))}},N=function(){var e=n.getVideoModel().getCurrentTime(),t=B(e);t&&t!==n&&M.call(this,n,t,e)},P=function(){this.manifestUpdater.stop()},L=function(){this.manifestUpdater.start()},O=function(){var e=F();e&&e.seek(e.getStartTime())},F=function(){var e=n.getPeriodIndex()+1;return e<f.length?f[e]:null},B=function(e){var t=0,n=null,r=f.length,i=0;for(r>0&&(t+=f[0].getStartTime()),i=0;i<r;i+=1)if(n=f[i],t+=n.getDuration(),e<t)return n},k=function(){var e=this.system.getObject("videoModel"),t=document.createElement("video");return e.setElement(t),e},U=function(e){e.parentNode&&e.parentNode.removeChild(e)},H=function(){var t,i,o,a,s,u,d,c,p,m=this.manifestModel.getValue(),y=this.metricsModel.getMetricsFor("stream"),b=this.metricsExt.getCurrentManifestUpdate(y);if(!m)return!1;if(e.startOver&&(m.startOver=!0),this.debug.info("[StreamController] composeStreams"),this.capabilities.supportsEncryptedMedia()&&(r||(r=this.system.getObject("protectionController"),h=!0),r.setMediaElement(this.videoModel.getElement()),l&&r.setProtectionData(l)),c=this.manifestExt.getMpd(m),n&&(t=n.getPeriodInfo(),c.isClientServerTimeSyncCompleted=t.mpd.isClientServerTimeSyncCompleted,c.clientServerTimeShift=t.mpd.clientServerTimeShift),i=this.manifestExt.getRegularPeriods(m,c),0===i.length)return!1;for(s=0,o=i.length;s<o;s+=1){for(d=i[s],u=0,a=f.length;u<a;u+=1)f[u].getId()===d.id&&(p=f[u],this.debug.info("[StreamController] update stream data"),p.updateData(d));p||(this.debug.info("[StreamController] Create stream"),p=this.system.getObject("stream"),p.setVideoModel(0===s?this.videoModel:k.call(this)),p.initProtection(r),p.setAutoPlay(g),p.setDefaultAudioLang(v),p.setDefaultSubtitleLang(_),p.enableSubtitles(E),p.setInitialStartTime(e.startTime),p.load(m,d),f.push(p)),this.metricsModel.addManifestUpdatePeriodInfo(b,d.id,d.index,d.start,d.duration),p=null}return n||(n=f[0],x.call(this,n.getVideoModel())),this.metricsModel.updateManifestUpdateInfo(b,{currentTime:this.videoModel.getCurrentTime(),buffered:this.videoModel.getElement().buffered,presentationStartTime:i[0].start,clientTimeOffset:c.clientServerTimeShift}),S&&(S.resolve(),S=null),!0},j=function(e){!0===e&&(T=!0),this.refreshManifest()},K=function(){if(d){this.debug.info("[StreamController] Manifest updated");var e=H.call(this);e?this.system.notify("streamsComposed"):this.errHandler.sendError(c.dependencies.ErrorHandler.prototype.MANIFEST_ERR_NO_STREAM,"No stream/period is provided in the manifest"),S&&(S.resolve(),S=null)}else S&&(S.resolve(),S=null)},V=function(e){if(I&&"HLS"===e.protocol){var t=this.system.getObject("hlsStream");return t.setVideoModel(this.videoModel),t.setProtectionData(l),t.setAutoPlay(g),t.setDefaultAudioLang(v),t.setDefaultSubtitleLang(_),t.enableSubtitles(E),t.setInitialStartTime(e.startTime),f.push(t),n=t,x.call(this,n.getVideoModel()),t.load(e.url),!0}return!1};return{system:void 0,videoModel:void 0,parser:void 0,manifestLoader:void 0,manifestUpdater:void 0,manifestModel:void 0,manifestExt:void 0,fragmentExt:void 0,capabilities:void 0,debug:void 0,metricsModel:void 0,metricsExt:void 0,videoExt:void 0,errHandler:void 0,eventBus:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,setup:function(){this.system.mapHandler("manifestUpdate",void 0,j.bind(this)),this.system.mapHandler("manifestUpdated",void 0,K.bind(this)),i=C.bind(this),a=R.bind(this),o=N.bind(this),s=P.bind(this),u=L.bind(this)},getManifestExt:function(){return n.getManifestExt()},setAutoPlay:function(e){g=e},getAutoPlay:function(){return g},getVideoModel:function(){return this.videoModel},setVideoModel:function(e){this.videoModel=e},getAudioTracks:function(){return n?n.getAudioTracks():null},getSelectedAudioTrack:function(){if(n)return n.getSelectedAudioTrack()},setAudioTrack:function(e){n&&n.setAudioTrack(e)},getSubtitleTracks:function(){return n?n.getSubtitleTracks():null},setSubtitleTrack:function(e){n&&n.setSubtitleTrack(e)},getSelectedSubtitleTrack:function(){if(n)return n.getSelectedSubtitleTrack()},getMinbufferTime:function(){return n?n.getMinbufferTime():c.dependencies.BufferExtensions.DEFAULT_MIN_BUFFER_TIME},getLiveDelay:function(){return n?n.getLiveDelay():c.dependencies.BufferExtensions.DEFAULT_LIVE_DELAY},load:function(n){var r=this;d=!0,e=n,e.protData&&(l=e.protData),V.call(this,e)||(T=!1,S=t.defer(),r.debug.info("[StreamController] load url: "+e.url),r.manifestLoader.load(e.url).then(function(e){r.manifestModel.setValue(e),r.metricsModel.addMetaData(),r.debug.info("[StreamController] Manifest has loaded."),r.manifestUpdater.start()},function(e){S.resolve(),S=null,e&&r.errHandler.sendError(e.name,e.message,e.data)}))},refreshManifest:function(e){var t=this.manifestModel.getValue(),n=e||(t.hasOwnProperty("Location")?t.Location:t.mpdUrl);this.debug.log("[StreamController] Refresh manifest: "+n);var r=this;this.manifestLoader.abort(),this.manifestLoader.load(n,!0).then(function(e){r.manifestModel.setValue(e),r.debug.log("[StreamController] Manifest has been refreshed"),T=!1},function(t){void 0!==t&&(e?T&&r.errHandler.sendError(t.name,t.message,t.data):(r.errHandler.sendWarning(t.name,t.message,t.data),r.eventBus.dispatchEvent({type:"manifestUrlUpdate",data:{url:n}})))})},reset:function(e){var i,o,a={},s=[],u=this;this.debug.info("[StreamController] Reset"),n&&A.call(this,n.getVideoModel()),d=!1,u.manifestLoader.abort(),u.manifestUpdater.stop(),u.parser.reset(),a[c.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE]=function(){h=!1,r=null,l=null,u.manifestModel.setValue(null),u.metricsModel.addState("video","stopped",u.videoModel.getCurrentTime(),e),u.metricsModel.clearAllCurrentMetrics(),u.notify(c.dependencies.StreamController.eventList.ENAME_TEARDOWN_COMPLETE)},t.when(!S||S.promise).then(function(){for(u.pause(),y=!1,o=0;o<f.length;o+=1)i=f[o],s.push(i.reset()),i!==n&&U(i.getVideoModel().getElement());u.videoModel.reset(),t.all(s).then(function(){f=[],n=null,r?h?(r.protectionModel.subscribe(c.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE,a,void 0,!0),r.teardown()):(r.setMediaElement(null),a[c.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE]()):a[c.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE]()})})},setDefaultAudioLang:function(e){v=e},setDefaultSubtitleLang:function(e){_=e},enableSubtitles:function(e){E=e,n&&n.enableSubtitles(e)},setTrickModeSpeed:function(e){n&&n.setTrickModeSpeed(e)},getTrickModeSpeed:function(){return n?n.getTrickModeSpeed():0},play:function(){n.play()},pause:function(){n&&n.pause()},seek:function(e,t){n&&n.seek(e,t)}}},c.dependencies.StreamController.prototype={constructor:c.dependencies.StreamController},c.dependencies.StreamController.eventList={ENAME_STREAMS_COMPOSED:"streamsComposed",ENAME_TEARDOWN_COMPLETE:"streamTeardownComplete"},c.utils.TokenAuthentication=function(){"use strict";var e={type:c.utils.TokenAuthentication.TYPE_QUERY};return{debug:void 0,getTokenAuthentication:function(){return e},setTokenAuthentication:function(t){e=t},checkRequestHeaderForToken:function(t){void 0!==e.name&&null!==t.getResponseHeader(e.name)&&(e.token=t.getResponseHeader(e.name),this.debug.log(e.name+" received: "+e.token))},addTokenAsQueryArg:function(t){if(void 0!==e.name&&void 0!==e.token&&e.type===c.utils.TokenAuthentication.TYPE_QUERY){var n=-1===t.indexOf("?")?"?":"&";t+=n+e.name+"="+e.token,this.debug.log(e.name+" is being appended on the request url with a value of : "+e.token)}return t},setTokenInRequestHeader:function(t){return e.type===c.utils.TokenAuthentication.TYPE_HEADER&&(t.setRequestHeader(e.name,e.token),this.debug.log(e.name+" is being set in the request header with a value of : "+e.token)),t}}},c.utils.TokenAuthentication.TYPE_QUERY="query",c.utils.TokenAuthentication.TYPE_HEADER="header",c.models.URIQueryAndFragmentModel=function(){"use strict";var e=new c.vo.URIFragmentData,t=[],n=function(){e=new c.vo.URIFragmentData,t=[]},r=function(n){var r=[],i=new RegExp(/[?]/),o=new RegExp(/[#]/),a=i.test(n),s=o.test(n);function u(e,t,n,r){var i=r[0].split(/[=]/);return r.push({key:i[0],value:i[1]}),r.shift(),r}function l(e,n,i){return n>0&&(a&&0===t.length?t=i[n].split(/[&]/):s&&(r=i[n].split(/[&]/))),i}return n.split(/[?#]/).map(l),t.length>0&&(t=t.reduce(u,null)),r.length>0&&(r=r.reduce(u,null),r.forEach(function(t){e[t.key]=t.value})),n};return{parseURI:r,reset:n,getURIFragmentData:function(){return e},getURIQueryData:t}},c.models.URIQueryAndFragmentModel.prototype={constructor:c.models.URIQueryAndFragmentModel},c.models.VideoModel=function(){"use strict";var e,t=[],n=null,r=function(e){null!==e&&-1===t.indexOf(e)&&(this.debug.info("<video> # stall stream "+e),t.push(e),1===t.length&&this.setPlaybackRate(0))},i=function(n){var r=t.indexOf(n);null!==n&&(this.debug.info("<video> # unstall stream "+n),-1!==r&&t.splice(r,1),!1===this.isStalled()&&0===e.playbackRate&&this.setPlaybackRate(1))};return{system:void 0,debug:void 0,setup:function(){t=[]},reset:function(){t=[]},play:function(){this.debug.info("<video> # play()"),e.play()},pause:function(){this.debug.info("<video> # pause()"),e.pause()},isPaused:function(){return e.paused},isSeeking:function(){return e.seeking},getDuration:function(){return e.duration},getPlaybackRate:function(){return e.playbackRate},setPlaybackRate:function(t){this.debug.info("<video> # playbackRate = "+t),e.playbackRate=t},getMute:function(){return e.muted},setMute:function(t){e.muted=t},getVolume:function(){return e.volume},setVolume:function(t){e.volume=t},getCurrentTime:function(){return e.currentTime},setCurrentTime:function(t){this.debug.info("<video> # currentTime = "+t),e.currentTime=t},listen:function(t,n){e.addEventListener(t,n,!1)},unlisten:function(t,n){e.removeEventListener(t,n,!1)},listenOnParent:function(t,n){e.parentElement.addEventListener(t,n,!1)},unlistenOnParent:function(t,n){e.parentElement.removeEventListener(t,n,!1)},getElement:function(){return e},setElement:function(t){e=t},setSource:function(t){t?(this.debug.info("<video> # set source"),e.src=t):(this.debug.info("<video> # reset source"),e.removeAttribute("src"),e.load())},isStalled:function(){return t.length>0},stallStream:function(e,t){t?r.call(this,e):i.call(this,e)},getTTMLRenderingDiv:function(){return n},setTTMLRenderingDiv:function(e){n=e,n.style.position="absolute",n.style.display="flex",n.style.overflow="hidden",n.style.pointerEvents="none",n.style.top=0,n.style.left=0}}},c.models.VideoModel.prototype={constructor:c.models.VideoModel},c.dependencies.VideoModelExtensions=function(){"use strict";return{getPlaybackQuality:function(e){var t="webkitDroppedFrameCount"in e,n="getVideoPlaybackQuality"in e,r=null;return n?r=e.getVideoPlaybackQuality():t&&(r={droppedVideoFrames:e.webkitDroppedFrameCount,creationTime:new Date,totalVideoFrames:e.webkitDecodedFrameCount}),r}}},c.dependencies.VideoModelExtensions.prototype={constructor:c.dependencies.VideoModelExtensions},c.dependencies.XHRLoader=function(){"use strict";var e=null,n=null,r=null,i=null,o=null,a=0,s=0,u=0,l=null,d=null,c=function(){null!==e&&e.readyState>0&&e.readyState<4?e.abort():l&&(clearTimeout(l),l=null,d.reject())},f=function(){var t=!0,c=function(t){o&&o(e,t)},h=function(){e.aborted=!0},p=function(){e.status<200||e.status>299||200===e.status&&4===e.readyState&&(t=!1,e.endDate=new Date,d.resolve(e))},m=function(){t&&(t=!1,e.endDate=new Date,u++,!e.aborted&&a>0&&u<=a?l=setTimeout(function(){f()},s):d.reject(e))};try{e=new XMLHttpRequest,e.open("GET",n,!0),r&&(e.responseType=r),i&&e.setRequestHeader("Range","bytes="+i),e.onprogress=c,e.onabort=h,e.onload=p,e.onloadend=m,e.onerror=m,e.startDate=new Date,e.send()}catch(g){e.onerror()}};return{initialize:function(e,t,n,i){r=e,a=t,s=n,o=i},load:function(e,r){return n=e,i=r,u=0,d=t.defer(),f(),d.promise},abort:c}},c.dependencies.XHRLoader.prototype={constructor:c.dependencies.XHRLoader},c.dependencies.TextController=function(){var e,t,n,r,i="LOADING",o="READY",a=!1,s=null,u=o,l=function(e){this.debug.log("TextController setState to:"+e),u=e},d=function(){if(a&&u===o){var e=this;e.indexHandler.getInitRequest(r[0]).then(function(t){e.fragmentLoader.load(t).then(h.bind(e,t),p.bind(e,t)),l.call(e,i)})}},c=function(){d.call(this)},f=function(e,t){var n,r,i=this.manifestModel.getValue();return r=this.manifestExt.getDataIndex(e,i,t.index),n=this.manifestExt.getAdaptationsForPeriod(i,t),this.manifestExt.getRepresentationsForAdaptation(i,n[r])},h=function(e,t){var r=this;r.fragmentController.process(t.data,e).then(function(e){null!==e&&r.sourceBufferExt.append(n,e,r.videoModel)})},p=function(){};return{videoModel:void 0,fragmentLoader:void 0,fragmentController:void 0,indexHandler:void 0,sourceBufferExt:void 0,manifestModel:void 0,manifestExt:void 0,debug:void 0,initialize:function(e,t,n,r,i){var o=this;o.setVideoModel(r),o.setBuffer(n),o.setMediaSource(i),o.updateData(t,e),a=!0,d.call(o)},setPeriodInfo:function(e){s=e},getPeriodIndex:function(){return s.index},getVideoModel:function(){return this.videoModel},setVideoModel:function(e){this.videoModel=e},getData:function(){return t},setData:function(e){t=e},getBuffer:function(){return n},setBuffer:function(e){n=e},setMediaSource:function(t){e=t},updateData:function(e,n){t=e,s=n,r=f.call(this,t,s),l.call(this,o),d.call(this)},reset:function(t){t||(this.sourceBufferExt.abort(e,n),this.sourceBufferExt.removeSourceBuffer(e,n))},start:c}},c.dependencies.TextController.prototype={constructor:c.dependencies.TextController},c.dependencies.TextSourceBuffer=function(){var e,t,n,r=function(e){var t="",n=0,r=0,i=0,o=0,a=new Uint8Array(e);a.length>=3&&239===a[0]&&187===a[1]&&191===a[2]&&(n=3);while(n<a.length)if(r=a[n],r<128)t+=String.fromCharCode(r),n++;else if(r>191&&r<224){if(n+1>=a.length)throw"UTF-8 Decode failed. Two byte character was truncated.";i=a[n+1],t+=String.fromCharCode((31&r)<<6|63&i),n+=2}else{if(n+2>=a.length)throw"UTF-8 Decode failed. Multi byte character was truncated.";i=a[n+1],o=a[n+2],t+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&o),n+=3}return t},i={length:0,ranges:[],start:function(e){return this.ranges[e].start},end:function(e){return this.ranges[e].end},addRange:function(e,t){var n=0,r=!1,i=.01;for(n=0;n<this.ranges.length;n++)this.ranges[n].end<=e+i&&this.ranges[n].end>=e-i&&(r=!0,this.ranges[n].end=t),this.ranges[n].start<=t+i&&this.ranges[n].start>=t-i&&(r=!0,this.ranges[n].start=e);r||(this.ranges.push({start:e,end:t}),this.length=this.length+1,this.ranges.sort(function(e,t){return e.start-t.start}))},removeRange:function(e,t){var n=0;for(n=this.ranges.length-1;n>=0;n-=1)(void 0===t||-1===t||this.ranges[n].end<=t)&&(void 0===e||-1===e||this.ranges[n].start>=e)&&this.ranges.splice(n,1);this.length=this.ranges.length},reset:function(){this.length=0,this.ranges=[]}};return{system:void 0,eventBus:void 0,errHandler:void 0,textTrackExtensions:void 0,buffered:i,initialize:function(r,o){n=r,e=o.getVideoModel().getElement(),t=o.getData(),i.reset()},remove:function(t,n){if(t<0||t>=n)throw"INVALID_ACCESS_ERR";this.textTrackExtensions.deleteCues(e,!1,t,n),this.buffered.removeRange(t,n)},append:function(n,i){var o=this,a=r(n),s=o.getParser().parse(a,i);0===e.textTracks.length&&o.textTrackExtensions.addTextTrack(e,[],t.Representation_asArray[0].id,t.lang,!0),0!==e.textTracks.length&&(o.textTrackExtensions.addCues(e.textTracks[0],s),i&&o.buffered.addRange(i.startTime,i.startTime+i.duration))},abort:function(){this.textTrackExtensions.deleteCues(e),this.buffered.reset()},getParser:function(){var e;return"text/vtt"===n&&(e=this.system.getObject("vttParser")),e},addEventListener:function(e,t,n){this.eventBus.addEventListener(e,t,n)},removeEventListener:function(e,t,n){this.eventBus.removeEventListener(e,t,n)}}},c.dependencies.TextSourceBuffer.prototype={constructor:c.dependencies.TextSourceBuffer},c.utils.TextTrackExtensions=function(){"use strict";var e,t="",n=null;return{system:void 0,eventBus:void 0,videoModel:void 0,debug:void 0,config:void 0,setup:function(){e=window.VTTCue||window.TextTrackCue},cueEnter:function(e,t,n){this.eventBus.dispatchEvent({type:"cueEnter",data:{text:t,style:e,type:n}})},cueExit:function(e,t,n){this.eventBus.dispatchEvent({type:"cueExit",data:{text:t,style:e,type:n}})},getCurrentTextTrack:function(e){for(var t=0;t<e.textTracks.length;t++)if("hascaption"===e.textTracks[t].label)return e.textTracks[t];return null},addTextTrack:function(r,i,o,a,s){var u,l=null,d=null,c="subtitles",f=this.videoModel.getTTMLRenderingDiv();for(l=this.getCurrentTextTrack(r),l?(this.cleanSubtitles(),l.default=s,"showing"!==l.mode&&"metadata"!==l.kind&&(l.mode="showing"),t=a):(f&&(n=this.system.getObject("ttmlRenderer"),n.initialize(f)),c=null!==f?"metadata":"subtitles","subtitles"===c&&(c=!0===this.config.getParam("TextTrackExtensions.displayModeExtern","boolean")?"metadata":"subtitles"),l=r.addTextTrack(c,"hascaption",a),t=a,l.default=s,l.mode="metadata"!==c?"showing":"hidden"),u=0;u<i.length;u+=1)d=i[u],l.addCue(new e(d.start,d.end,d.data));return l},onCueEnter:function(e){var t=this.videoModel.getTTMLRenderingDiv();"image"===e.currentTarget.type&&null===t&&this.debug.warn("[TextTrackExtensions] Rendering image subtitles without div is impossible"),t&&n.onCueEnter(e),this.cueEnter(e.currentTarget.style,e.currentTarget.text,e.currentTarget.type)},onCueExit:function(e){var t=this.videoModel.getTTMLRenderingDiv();t&&n.onCueExit(e),this.cueExit(e.currentTarget.style,e.currentTarget.text)},addCues:function(n,r){var i=0,o=null,a=null;for(i=0;i<r.length;i+=1)o=r[i],o.start<o.end&&(a=new e(o.start,o.end,o.data),a.id=t,a.type=o.type,a.onenter=this.onCueEnter.bind(this),a.onexit=this.onCueExit.bind(this),a.snapToLines=!1,a.line=o.line,o.style&&(a.style=o.style),n.addCue(a))},deleteCues:function(e,t,n,r){var i,o=null,a=null,s=null,u=0;if(e&&(o=e.textTracks[0],o)){if(i=o.mode,"disabled"===i&&(o.mode="hidden"),a=o.cues,a)for(s=a.length-1,u=s;u>=0;u-=1)(void 0===r||-1===r||a[u].endTime<=r)&&(void 0===n||-1===n||a[u].startTime>=n)&&o.removeCue(a[u]);o.mode=i}},cleanSubtitles:function(){var e=this.videoModel.getTTMLRenderingDiv();e&&n&&n.cleanSubtitles()}}},c.dependencies.TextTTMLXMLMP4SourceBuffer=function(){var e,n,r,i,o={length:0,ranges:[],start:function(e){return this.ranges[e].start},end:function(e){return this.ranges[e].end},addRange:function(e,t){var n=0,r=!1,i=.01;for(n=0;n<this.ranges.length;n++)this.ranges[n].end<=e+i&&this.ranges[n].end>=e-i&&(r=!0,this.ranges[n].end=t),this.ranges[n].start<=t+i&&this.ranges[n].start>=t-i&&(r=!0,this.ranges[n].start=e);r||(this.ranges.push({start:e,end:t}),this.length=this.length+1,this.ranges.sort(function(e,t){return e.start-t.start}))},removeRange:function(e,t){var n=0;for(n=this.ranges.length-1;n>=0;n-=1)(void 0===t||-1===t||this.ranges[n].end<=t)&&(void 0===e||-1===e||this.ranges[n].start>=e)&&this.ranges.splice(n,1);this.length=this.ranges.length},reset:function(){this.length=0,this.ranges=[]}};return{updating:!1,system:void 0,eventBus:void 0,buffered:o,textTrackExtensions:void 0,ttmlParser:void 0,debug:void 0,manifestModel:void 0,errHandler:void 0,initialize:function(t,a,s){n=t,e=a.getVideoModel().getElement(),o.reset(),r=s.lang,i=s.id},remove:function(t,n){if(t<0||t>=n)throw"INVALID_ACCESS_ERR";this.getTextTrackExtensions().deleteCues(e,!1,t,n),this.buffered.removeRange(t,n)},append:function(t){var o,a,s,u,l,d,f,h,p,m,g=this,y=_.deserialize(t),v=y.getBoxByType("moov"),E=0,b="utf-8";if("application/ttml+xml"===n)return this.track=this.textTrackExtensions.addTextTrack(e,[],i,r,!0),c.utils.isUTF16(t)&&(b="utf-16"),void this.convertUTFToString(t,b).then(function(t){g.ttmlParser.parse(t).then(function(t){t&&(g.textTrackExtensions.addCues(g.track,t),g.buffered.addRange(0,e.duration),g.eventBus.dispatchEvent({type:"updateend"}))},function(e){g.errHandler.sendWarning(c.dependencies.ErrorHandler.prototype.INTERNAL_ERROR,"Internal error while parsing TTML data",e)})});if(v)return o=v.getBoxByType("mvhd"),g.timescale=o.timescale,this.track=this.textTrackExtensions.addTextTrack(e,[],i,r,!0),void this.eventBus.dispatchEvent({type:"updateend"});if(a=y.getBoxByType("moof"),a){if(s=y.getBoxByType("mdat"),u=a.getBoxByType("traf"),l=u.getBoxByType("tfhd"),d=u.getBoxByType("tfdt"),f=u.getBoxByType("trun"),h=u.getBoxByType("subs"),p=d.baseMediaDecodeTime/g.timescale,E=0,E=256&f.flags?f.samples_table[0].sample_duration/g.timescale:l.default_sample_duration/g.timescale,g.buffered.addRange(p,p+E),h)for(var T=0;T<h.entry_count;T++)for(var S=0;S<h.entry[T].subsample_count;S++){m=s.data.subarray(0,h.entry[T].subSampleEntries[0].subsample_size);break}else m=s.data;c.utils.isUTF16(m)&&(b="utf-16"),g.convertUTFToString(m,b).then(function(e){g.ttmlParser.parse(e).then(function(e){var t,n=g.manifestModel.getValue();if(e){if("MSS"===n.name)for(t=0;t<e.length;t+=1)e[t].start=e[t].start+p,e[t].end=e[t].end+p;g.textTrackExtensions.addCues(g.track,e),g.eventBus.dispatchEvent({type:"updateend"})}},function(e){g.errHandler.sendWarning(c.dependencies.ErrorHandler.prototype.INTERNAL_ERROR,"Internal error while parsing TTML data",e)})})}},convertUTFToString:function(e,n){var r=t.defer(),i=new Blob([e],{type:"text/xml"}),o=new FileReader;return o.onload=function(e){r.resolve(e.target.result)},o.readAsText(i,n),r.promise},UpdateLang:function(e,t){i=e,r=t},abort:function(){this.getTextTrackExtensions().deleteCues(e,!0)},getTextTrackExtensions:function(){return this.textTrackExtensions},addEventListener:function(e,t,n){this.eventBus.addEventListener(e,t,n),this.updating||this.eventBus.dispatchEvent({type:"updateend"})},removeEventListener:function(e,t,n){this.eventBus.removeEventListener(e,t,n)}}},c.dependencies.TextTTMLXMLMP4SourceBuffer.prototype={constructor:c.dependencies.TextTTMLXMLMP4SourceBuffer},c.utils.TTMLParser=function(){"use strict";var e=3600,n=60,r="http://www.w3.org/2006/10/ttaf1",i="http://www.w3.org/2006/10/ttaf1#parameter",o="http://www.w3.org/2006/10/ttaf1#styling",a="http://www.w3.org/ns/ttml",s="http://www.w3.org/ns/ttml#parameter",u="http://www.w3.org/ns/ttml#styling",l="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",d=[a,r],c=[u,o],f=[s,i],h=[l],p=/^(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])((\.[0-9][0-9][0-9])|(:[0-9][0-9]))$/,m=/^\d+(\.\d+|)(h|m|s|ms|f)$/,g=null,y=null,v=null,_=null,E=null,b=[],T=[],S=[],I=function(t){var r,i,o;if(p.test(t))return r=t.split(":"),i=parseFloat(r[0])*e+parseFloat(r[1])*n+parseFloat(r[2]),r[3]&&E&&!isNaN(E)&&(i+=parseFloat(r[3])/E),i;if(m.test(t)){switch("ms"==t.substr(t.length-2)?(i=parseFloat(t.substr(0,t.length-3)),o=t.substr(t.length-2)):(i=parseFloat(t.substr(0,t.length-2)),o=t.substr(t.length-1)),o){case"h":i=60*i*60;break;case"m":i*=60;break;case"s":break;case"ms":i*=.01;break;case"f":if(!E||isNaN(E))return NaN;i/=E;break}return i}return NaN},w=function(){var e=!1;return y=g?this.domParser.getChildNode(g,"tt"):null,v=y?this.domParser.getChildNode(y,"head"):null,v?this.domParser.getChildNode(v,"layout"):null,v?this.domParser.getChildNode(v,"styling"):null,_=y?this.domParser.getChildNode(y,"body"):null,y&&v&&_&&(e=!0),e},x=function(e,t,n){var r,i,o=null,a=0;for(a=0;a<e.length;a+=1){if(o=D.call(this,[e[a]],c,t),o)return o;if(r=D.call(this,[e[a]],d,"style"),r){if(o=A.call(this,b,r,t),o)return o;r=A.call(this,b,r,"style");while(r){if(o=A.call(this,b,r,t),o)return o;r=A.call(this,b,r,"style")}}if(i=D.call(this,[e[a]],d,"region"),i){if(o=A.call(this,T,i,t),o)return o;if(r=A.call(this,T,i,"style"),r){if(o=A.call(this,b,r,t),o)return o;r=A.call(this,b,r,"style");while(r){if(o=A.call(this,b,r,t),o)return o;r=A.call(this,b,r,"style")}}}}return void 0!==n?n:null},A=function(e,t,n){var r=0,i=null,o=0;for(r=0;r<e[t].length;r+=1){for(o=0;o<c.length;o+=1)if(i=e[t].getNamedItem(n),i||(i=e[t].getNamedItemNS(c[o],n)),i)return i.nodeValue;for(o=0;o<d.length;o+=1)if(i=e[t].getNamedItem(n),i||(i=e[t].getNamedItemNS(d[o],n)),i)return i.nodeValue}return null},D=function(e,t,n){var r=null,i=0,o=0;for(i=0;i<e.length;i+=1)for(o=0;o<t.length;o+=1)if(r=this.domParser.getAttributeValue(e[i],n,t[o]),r)return r;return r},R=function(e){e||(e="32 15");var t=e,n=0;for(t=t.split(" "),n=0;n<t.length;n+=1)t[n]=parseFloat(t[n]);return t},M=function(e,t){var n={backgroundColor:null,color:null,fontSize:null,fontFamily:null,fontStyle:null,textOutline:{color:null,with:null},textAlign:null,displayAlign:null,origin:null,extent:null,cellResolution:null,rootExtent:t,showBackground:null};return n.backgroundColor=x.call(this,e,"backgroundColor","transparent"),n.color=x.call(this,e,"color"),n.fontSize=x.call(this,e,"fontSize"),n.fontFamily=x.call(this,e,"fontFamily"),n.fontStyle=x.call(this,e,"fontStyle","normal"),n.textOutline=x.call(this,e,"textOutline"),n.extent=x.call(this,e,"extent"),n.origin=x.call(this,e,"origin"),n.textAlign=x.call(this,e,"textAlign","start"),n.displayAlign=x.call(this,e,"displayAlign","before"),n.showBackground=x.call(this,e,"showBackground"),n.cellResolution=D.call(this,e,f,"cellResolution"),n.cellResolution=R(n.cellResolution),n},C=function(e){var n,r,i,o,a,s,u,l,c,p,m,v,A,R,C,N=[],P=null,L=null,O=null,F="",B="";try{if(null!==this.videoModel.getTTMLRenderingDiv()&&(B="html"),g=this.domParser.createXmlTree(e),!w.call(this))return n="TTML document has incorrect structure",t.reject(n);for(l=0;l<f.length;l+=1)E=this.domParser.getAttributeValue(y,"frameRate",f[l])?parseInt(E,10):null;if(u=this.domParser.getChildNodes(_,"div"),!u||0===u.length)return n="TTML body document does not contain any div",t.reject(n);for(b=this.domParser.getAllSpecificNodes(y,"style"),T=this.domParser.getAllSpecificNodes(y,"region"),S=this.domParser.getAllSpecificNodes(y,"image"),v=x.call(this,[y],"extent"),m=0;m<u.length;m+=1)if(R=D.call(this,[u[m]],h,"backgroundImage"),R&&void 0!==S[R.substring(1)]&&(o=I(D.call(this,[u[m]],d,"begin")),a=I(D.call(this,[u[m]],d,"end")),O=M.call(this,[u[m],y],v),s={start:o,end:a,data:"data:image/"+S[R.substring(1)].imagetype.nodeValue+";base64, "+this.domParser.getChildNode(S[R.substring(1)],"#text").nodeValue,type:"image",line:80,style:O},N.push(s)),r=this.domParser.getChildNodes(u[m],"p"),r&&0!==r.length)for(l=0;l<r.length;l+=1)if(s=null,O=null,i=r[l],o=I(D.call(this,[i],d,"begin")),a=I(D.call(this,[i],d,"end")),isNaN(o)||isNaN(a)||a<o)n="TTML document has incorrect timing value";else if(R=D.call(this,[i],h,"backgroundImage"),R&&void 0!==S[R.substring(1)]&&(O=M.call(this,[i,u[m],y],v),s={start:o,end:a,data:"data:image/"+S[R.substring(1)].imagetype.nodeValue+";base64, "+this.domParser.getChildNode(S[R.substring(1)],"#text").nodeValue,type:"image",line:80,style:O}),c=this.domParser.getChildNodes(i,"span"),c.length>0){for(p=0;p<c.length;p++){p>0&&(F+="\n"),0===p&&(O=M.call(this,[c[p],i,_,y,u[m]],v)),A=this.domParser.getTextNodesIn(c[p]);for(var k=0;k<A.length;k+=1)k>0&&(F+="\n"),F+=A[k].textContent}s={start:o,end:a,data:F,type:"text",line:80,style:O},F="",N.push(s)}else{if(O=M.call(this,[i,_,y],v),l>0&&(P=I(D.call(this,[r[l-1]],d,"begin")),L=I(D.call(this,[r[l-1]],d,"end"))),o===P&&a===L||o>=P&&a<=L)""!==i.textContent&&("html"===B?s={start:o,end:a,data:i.textContent,type:"text",line:80,style:O}:(o>=P&&a<=L?(C=N[N.length-1],C.end=o):C=N.pop(),s={start:o,end:a,data:C.data+"\n"+i.textContent,type:"text",line:80,style:O}));else{for(A=this.domParser.getTextNodesIn(i),p=0;p<A.length;p+=1)p>0&&(F+="\n"),F+=A[p].textContent;""!==F&&(s={start:o,end:a,data:F,type:"text",line:80,style:O},F="")}null!==s&&N.push(s)}else n="TTML document does not contain any cues";return N.length>0?t.when(N):t.reject(n)}catch(U){return n=U.message,t.reject(n)}};return{domParser:void 0,videoModel:void 0,parse:C}},c.utils.TTMLRenderer=function(){"use strict";var e,t=[],n=function(){var n=0;for(n=0;n<t.length;n++)d(t[n],t[n].ttmlStyle,e)},r=function(){this.cleanSubtitles()},i=function(){var t=document.createElement("div");return t.style.position="absolute",t.style.display="flex",t.style.flexDirection="row",t.style.overflow="initial",t.style.pointerEvents="none",e.appendChild(t),t},o=function(t){e.hasChildNodes()&&e.removeChild(t)},a=function(e,t){var n,r;if(e&&"%"===e[e.length-1])n=parseFloat(e.substr(0,e.length-1))/100*t[1]+"px";else if(e&&"x"===e[e.length-1])n=e;else if(e&&"c"===e[e.length-1]){var i=e.replace(/\s/g,"").split("c");for(r=0;r<i.length;r+=1)i[r]=parseFloat(i[r]);n=isNaN(i[1])?i[0]*t[1]+"px":i[1]*t[1]+"px"}else n=t[1]+"px";return n},s=function(e,t,n){var r,i={color:n,width:null},o=0;if(e&&(e=e.split(" "),e[0]&&isNaN(e[0][0])?(i.color=e[0],o=1):i.color=n,i.color&&"#"===i.color[0]&&(i.color=u(i.color)),e[o]))switch(r=e[o][e[o].length-1],r){case"c":e[o]=e[o].split("c"),e[o][0]&&(i.width=e[o][0]*t[1]+"px");break;case"x":i.width=e[o];break}return i},u=function(e){e=e.replace("#","");var t=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16),i=e.length>6?parseInt(e.substring(6,8),16):255,o="rgba("+t+","+n+","+r+","+i+")";return o},l=function(e){var t,n,r=e;return t=e.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),t[t.length-1]>1&&(n=parseInt(t[t.length-1],10)/255,r="rgba("+t[0]+","+t[1]+","+t[2]+","+n+")"),r},d=function(e,t,n){var r,i,o,d,c=[n.clientWidth/t.cellResolution[0],n.clientHeight/t.cellResolution[1]];if(e){if(t.backgroundColor&&"#"===t.backgroundColor[0]?t.backgroundColor=u(t.backgroundColor):t.backgroundColor&&"a"===t.backgroundColor[3]&&(t.backgroundColor=l(t.backgroundColor)),t.color&&"#"===t.color[0]?t.color=u(t.color):t.color&&"a"===t.color[3]&&(t.color=l(t.color)),t.origin&&"%"===t.origin[t.origin.length-1])r=t.origin.split("%"),e.style.left=parseInt(r[0],10)+"%",e.style.top=parseInt(r[1],10)+"%",t.extent&&"%"===t.extent[t.extent.length-1]&&(i=t.extent.split("%"),e.style.width=parseInt(i[0],10)+"%",e.style.height=parseInt(i[1],10)+"%");else if(t.origin&&"x"===t.origin[t.origin.length-1])if(r=t.origin.split("px"),t.rootExtent&&"x"===t.rootExtent[t.rootExtent.length-1]){d=t.rootExtent.split("px");var f=r[0]/d[0]*n.clientWidth;e.style.left=f/n.clientWidth*100+"%",f=r[1]/d[1]*n.clientHeight,e.style.top=f/n.clientHeight*100+"%",t.extent&&"x"===t.extent[t.extent.length-1]&&(i=t.extent.split("px"),f=i[0]/d[0]*n.clientWidth,e.style.width=f/n.clientWidth*100+"%",f=i[1]/d[1]*n.clientHeight,e.style.height=f/n.clientHeight*100+"%")}else e.style.left=r[0]+"px",e.style.top=r[1]+"px";else t.origin&&"c"===t.origin[t.origin.length-1]&&(r=t.origin.split("c"),e.style.left=r[0]*c[0]+"px",e.style.top=r[1]*c[1]+"px",t.extent&&"c"===t.extent[t.extent.length-1]&&(i=t.extent.split("c"),e.style.width=i[0]*c[0]+"px",e.style.height=i[1]*c[1]+"px"));switch(o=s(t.textOutline,c,t.color),e.style.webkitTextStrokeWidth=o.width,e.style.webkitTextStroke=o.color,t.textAlign){case"start":e.style.justifyContent="flex-start";break;case"end":e.style.justifyContent="flex-end";break;case"center":e.style.justifyContent="center";break;case"right":e.style.justifyContent="flex-end";break;case"left":e.style.justifyContent="flex-start";break;default:e.style.justifyContent="flex-start"}switch(t.displayAlign){case"before":e.style.alignItems="flex-start";break;case"center":e.style.alignItems=t.displayAlign;break;case"after":e.style.alignItems="flex-end";break;default:e.style.alignItems="flex-start"}e.style.fontStyle=t.fontStyle,t.showBackground&&"whenActive"===t.showBackground?e.style.backgroundColor="transparent":e.style.backgroundColor=t.backgroundColor,e.style.color=t.color,e.style.fontSize=a(t.fontSize,c),e.style.fontFamily=t.fontFamily}};return{videoModel:void 0,initialize:function(t){e=t,document.addEventListener("webkitfullscreenchange",n.bind(this)),document.addEventListener("mozfullscreenchange",n.bind(this)),document.addEventListener("fullscreenchange",n.bind(this)),this.videoModel.listen("seeking",r.bind(this))},cleanSubtitles:function(){var e=0;for(e=0;e<t.length;e++)o(t[e]);t=[]},onCueEnter:function(n){var r=i();if(n.currentTarget.style&&(d(r,n.currentTarget.style,e),r.ttmlStyle=n.currentTarget.style),"image"!==n.currentTarget.type){var o=document.createElement("p");r.appendChild(o),o.innerText=n.currentTarget.text,o.style.marginTop="auto",r.ttmlStyle&&r.ttmlStyle.showBackground&&"whenActive"===r.ttmlStyle.showBackground&&(o.style.backgroundColor=n.currentTarget.style.backgroundColor)}else{var a=new Image;a.style.height="auto",a.style.width="auto",a.src=n.currentTarget.text,r.appendChild(a)}r.data=n.currentTarget.text,t.push(r)},onCueExit:function(e){var n=0;for(n=0;n<t.length;n++)if(e.currentTarget.text===t[n].data&&t[n].ttmlStyle===e.currentTarget.style)break;o(t[n]),t.splice(n,1)}}},c.utils.VTTParser=function(){"use strict";var e=/X-TIMESTAMP-MAP=(.+)/,t=/\s*(.+?)\s*:((?:\".*?\")|.*?)(?:,|$)/g,n=/(\S*)[\s]*-->[\s]*(\S*)(.*)/g,r=/(?:\r\n|\r|\n)/gm,i=function(e){for(var t=e.split(":"),n=t.length,r=0,i=0;i<n;i++)r+=parseFloat(t[i],10)*Math.pow(60,n-i-1);return r},o=function(n){var r,o,a,s,u=null,l=null;if(r=e.exec(n),!r)return-1;o=r[1];while(null!==(r=t.exec(o)))switch(a=r[1],s=r[2],a){case"MPEGTS":l=parseInt(s,10);break;case"LOCAL":u=i(s)}return null===u||null===l?-1:{local:u,mpegts:l}},a=function(e,t){if(-1===e)return 0;var n=this.manifestModel.getValue().timestampMap;if(!n)return e.local-t.startTime;var r=(e.mpegts-n.mpegts)/9e4;return e.local-n.local-r};return{manifestModel:void 0,parse:function(e,t){var s,u,l,d=[],c=null,f=a.call(this,o(e),t),h=e.split(r);for(l=0;l<h.length;l++)s=h[l].trim(),0!==s.length&&(h[l].match(n)?(null!==c&&d.push(c),u=h[l].split(n),c={type:"text",line:80,start:i(u[1])-f,end:i(u[2])-f,data:""}):null!==c&&(c.data+=(0===c.data.length?"":"\n")+h[l]));return null!==c&&d.push(c),d}}},c.rules.AbandonRequestsRule=function(){"use strict";var e=.5,t=2;return{debug:void 0,metricsExt:void 0,name:"AbandonRequestRule",execute:function(n,r){var i,o,a,s=(new Date).getTime(),u=n.streamType,l=new c.rules.SwitchRequest(c.rules.SwitchRequest.prototype.NO_CHANGE,c.rules.SwitchRequest.prototype.WEAK);if(null===n.firstByteDate||n.aborted)return this.debug.log("[AbandonRequestsRule]["+u+"] Request has already been aborted."),void r(l);i=(s-n.firstByteDate.getTime())/1e3,n.bytesLoaded<n.bytesTotal&&i>=n.duration*e&&(o=n.bytesLoaded/i,a=n.bytesTotal/o,a>n.duration*t&&(l=new c.rules.SwitchRequest(0,c.rules.SwitchRequest.prototype.STRONG),this.debug.info("[AbandonRequestsRule]["+u+"] BW = "+(8*o/1e3).toFixed(3)+" kb/s => switch to lowest quality"))),r(l)}}},c.rules.AbandonRequestsRule.prototype={constructor:c.rules.AbandonRequestsRule},c.rules.BaseRulesCollection=function(){"use strict";var e=[],t=[];return{downloadRatioRule:void 0,insufficientBufferRule:void 0,droppedFramesRule:void 0,abandonRequestRule:void 0,getRules:function(n){switch(n){case c.rules.BaseRulesCollection.prototype.QUALITY_SWITCH_RULES:return e;case c.rules.BaseRulesCollection.prototype.ABANDON_FRAGMENT_RULES:return t;default:return null}},setup:function(){e.push(this.downloadRatioRule),e.push(this.insufficientBufferRule),e.push(this.droppedFramesRule),t.push(this.abandonRequestRule)}}},c.rules.BaseRulesCollection.prototype={constructor:c.rules.BaseRulesCollection,QUALITY_SWITCH_RULES:"qualitySwitchRules",ABANDON_FRAGMENT_RULES:"abandonFragmentRules"},c.rules.DownloadRatioRule=function(){"use strict";return{debug:void 0,manifestExt:void 0,metricsExt:void 0,manifestModel:void 0,config:void 0,name:"DownloadRatioRule",checkIndex:function(e,t,n){var r,i,o,a,s,u,l,d,f,h=this.metricsExt.getHttpRequests(t),p=null,m=[],g=c.rules.SwitchRequest.prototype.NO_CHANGE,y=0,v=c.rules.SwitchRequest.prototype.DEFAULT;if(n&&n.hasOwnProperty("type")){if(s=this.config.getParamFor(n.type,"ABR.latencyInBandwidth","boolean",!0),u=this.config.getParamFor(n.type,"ABR.switchUpRatioSafetyFactor","number",1.5),this.debug.log("[DownloadRatioRule]["+n.type+"] Checking download ratio rule... (current = "+e+")"),!t)return this.debug.log("[DownloadRatioRule]["+n.type+"] No metrics, bailing."),new c.rules.SwitchRequest;f=h.length-1;while(f>=0&&null===p)h[f].tfinish&&h[f].trequest&&h[f].tresponse&&h[f].bytesLength>0&&(p=h[f]),f--;if(null===p)return this.debug.log("[DownloadRatioRule]["+n.type+"] No valid requests made for this stream yet, bailing."),new c.rules.SwitchRequest;if(i=(p.tfinish.getTime()-p.trequest.getTime())/1e3,r=(p.tfinish.getTime()-p.tresponse.getTime())/1e3,i<=0)return this.debug.log("[DownloadRatioRule]["+n.type+"] Don't know how long the download of the last fragment took, bailing."),new c.rules.SwitchRequest;if(null===p.mediaduration||void 0===p.mediaduration||p.mediaduration<=0||isNaN(p.mediaduration))return this.debug.log("[DownloadRatioRule]["+n.type+"] Don't know the duration of the last media fragment, bailing."),new c.rules.SwitchRequest;y=p.bytesLength,this.debug.log("[DownloadRatioRule]["+n.type+"] DL: "+Number(r.toFixed(3))+"s, Total: "+Number(i.toFixed(3))+"s, Length: "+y),d=1;while(f>=0&&d<3){if(h[f].tfinish&&h[f].trequest&&h[f].tresponse&&h[f].bytesLength>0){var _=(h[f].tfinish.getTime()-h[f].trequest.getTime())/1e3,E=(h[f].tfinish.getTime()-h[f].tresponse.getTime())/1e3;this.debug.log("[DownloadRatioRule]["+n.type+"] DL: "+Number(E.toFixed(3))+"s, Total: "+Number(_.toFixed(3))+"s, Length: "+h[f].bytesLength),i+=_,r+=E,y+=h[f].bytesLength,d+=1}f--}if(y*=8,o=s?y/i:y/r,this.debug.log("[DownloadRatioRule]["+n.type+"] BW = "+Math.round(o/1e3)+" kb/s"),isNaN(o))return new c.rules.SwitchRequest;for(d=this.manifestExt.getRepresentationCount(n),l=this.manifestExt.getRepresentationFor(e,n),a=this.manifestExt.getBandwidth(l),f=0;f<d;f+=1)m.push(this.manifestExt.getRepresentationBandwidth(n,f));if(o<=a){for(f=e-1;f>0;f-=1)if(m[f]<=o)break;return g=f,v=c.rules.SwitchRequest.prototype.WEAK,this.debug.info("[DownloadRatioRule]["+n.type+"] SwitchRequest: q="+g+"/"+(d-1)+" ("+m[g]+"), p="+v),new c.rules.SwitchRequest(g,v)}for(f=d-1;f>e;f-=1)if(o>m[f]*u)break;return g=f,v=c.rules.SwitchRequest.prototype.STRONG,this.debug.info("[DownloadRatioRule]["+n.type+"] SwitchRequest: q="+g+"/"+(d-1)+" ("+m[g]+"), p="+v),new c.rules.SwitchRequest(g,v)}return new c.rules.SwitchRequest}}},c.rules.DownloadRatioRule.prototype={constructor:c.rules.DownloadRatioRule},c.rules.DroppedFramesRule=function(){"use strict";var e=1,t=null,n=-1,r=-1,i=function(i){var o;null!==t?(o=i.mt-t.mt,o<e||(n=i.droppedFrames-t.droppedFrames,r=i.totalVideoFrames-t.totalVideoFrames,t=i)):t=i};return{debug:void 0,metricsExt:void 0,manifestModel:void 0,config:void 0,name:"DroppedFramesRule",checkIndex:function(e,o,a,s){var u,l=this.config.getParamFor(a.type,"ABR.droppedFramesMaxRatio","number",.3),d=this.config.getParamFor(a.type,"ABR.droppedFramesMinRatio","number",.1),f=this.metricsExt.getCurrentPlaybackQuality(o),h=c.rules.SwitchRequest.prototype.NO_CHANGE,p=c.rules.SwitchRequest.prototype.DEFAULT;return null===a?new c.rules.SwitchRequest:"video"!==a.type?new c.rules.SwitchRequest:null===f?(t=null,n=r=-1,new c.rules.SwitchRequest):"buffering"===s?(t=null,n=r=-1,new c.rules.SwitchRequest):(i(f),-1===n?new c.rules.SwitchRequest:(u=n/r,this.debug.info("[DroppedFramesRule]["+a.type+"] DroppedFrames:"+n+", totalVideoFrames:"+r+" => ratio = "+u),u>l&&e>0?(h=e-1,p=c.rules.SwitchRequest.prototype.STRONG):u>d&&(h=e,p=c.rules.SwitchRequest.prototype.STRONG),this.debug.info("[DroppedFramesRule]["+a.type+"] SwitchRequest: q="+h+", p="+p),new c.rules.SwitchRequest(h,p)))}}},c.rules.DroppedFramesRule.prototype={constructor:c.rules.DroppedFramesRule},c.rules.InsufficientBufferRule=function(){"use strict";return{debug:void 0,manifestExt:void 0,metricsExt:void 0,manifestModel:void 0,config:void 0,isStartBuffering:{},name:"InsufficientBufferRule",checkIndex:function(e,t,n,r){var i,o,a,s,u,l,d,f=this.metricsExt.getCurrentBufferLevel(t),h=e,p=c.rules.SwitchRequest.prototype.DEFAULT;if(null===n)return new c.rules.SwitchRequest;if("buffering"===r&&(this.isStartBuffering[n.type]=!0),null===f)return new c.rules.SwitchRequest;if(this.debug.info("[InsufficientBufferRule]["+n.type+"] Checking buffer level ... (current = "+e+", buffer level = "+Math.round(100*f.level)/100+", buffering = "+this.isStartBuffering[n.type]+")"),d=this.manifestExt.getMpd(this.manifestModel.getValue()),d){if(i=this.config.getParamFor(n.type,"BufferController.minBufferTime","number",d.manifest.minBufferTime),o=this.config.getParamFor(n.type,"ABR.switchLowerBufferRatio","number",.25),a=this.config.getParamFor(n.type,"ABR.switchLowerBufferTime","number",o*i),s=this.config.getParamFor(n.type,"ABR.switchDownBufferRatio","number",.5),u=this.config.getParamFor(n.type,"ABR.switchDownBufferTime","number",s*i),l=this.config.getParamFor(n.type,"ABR.switchUpBufferRatio","number",.75),this.config.getParamFor(n.type,"ABR.switchUpBufferTime","number",l*i),f.level<u&&this.isStartBuffering[n.type])return new c.rules.SwitchRequest;f.level>=u&&(this.isStartBuffering[n.type]=!1);this.manifestExt.getRepresentationCount(n);return 1,f.level<=a?(h=0,p=c.rules.SwitchRequest.prototype.STRONG):f.level<=u&&(h=e>0?e-1:0,p=c.rules.SwitchRequest.prototype.DEFAULT),this.debug.info("[InsufficientBufferRule]["+n.type+"] SwitchRequest: q="+h+", p="+p),new c.rules.SwitchRequest(h,p)}return this.debug.log("[InsufficientBufferRule]["+n.type+"] Manifest not present yet"),new c.rules.SwitchRequest}}},c.rules.InsufficientBufferRule.prototype={constructor:c.rules.OInsufficientBufferRule},c.rules.LimitSwitchesRule=function(){"use strict";var e=10,t=2e4,n=5,r=0;return{debug:void 0,name:"LimitSwitchesRule",checkIndex:function(i,o){if(r>0)return r-=1,new c.rules.SwitchRequest(i,c.rules.SwitchRequest.prototype.STRONG);var a,s,u,l=this,d=!1,f=(new Date).getTime(),h=o.RepSwitchList.length;for(u=h-1;u>=0;u-=1){if(a=o.RepSwitchList[u],s=f-a.t.getTime(),s>=t){l.debug.log("Reached time limit, bailing.");break}if(u>=e){l.debug.log("Found too many switches within validation time, force the stream to not change."),d=!0;break}}return d?(l.debug.log("Wait some time before allowing another switch."),r=n,new c.rules.SwitchRequest(i,c.rules.SwitchRequest.prototype.STRONG)):new c.rules.SwitchRequest(c.rules.SwitchRequest.prototype.NO_CHANGE,c.rules.SwitchRequest.prototype.STRONG)}}},c.rules.LimitSwitchesRule.prototype={constructor:c.rules.LimitSwitchesRule},c.rules.SwitchRequest=function(e,t){"use strict";this.quality=e,this.priority=t,void 0===this.quality&&(this.quality=999),void 0===this.priority&&(this.priority=.5)},c.rules.SwitchRequest.prototype={constructor:c.rules.SwitchRequest,NO_CHANGE:999,DEFAULT:.5,STRONG:1,WEAK:0},c.models.ProtectionModel=function(){},c.models.ProtectionModel.eventList={ENAME_NEED_KEY:"needkey",ENAME_KEY_SYSTEM_ACCESS_COMPLETE:"keySystemAccessComplete",ENAME_KEY_SYSTEM_SELECTED:"keySystemSelected",ENAME_VIDEO_ELEMENT_SELECTED:"videoElementSelected",ENAME_SERVER_CERTIFICATE_UPDATED:"serverCertificateUpdated",ENAME_KEY_MESSAGE:"keyMessage",ENAME_KEY_ADDED:"keyAdded",ENAME_KEY_ERROR:"keyError",ENAME_KEY_SESSION_CREATED:"keySessionCreated",ENAME_KEY_SESSION_REMOVED:"keySessionRemoved",ENAME_KEY_SESSION_CLOSED:"keySessionClosed",ENAME_KEY_STATUSES_CHANGED:"keyStatusesChanged",ENAME_TEARDOWN_COMPLETE:"protectionTeardownComplete"},c.vo.Error=function(e,t,n){"use strict";this.code=e||null,this.message=t||null,this.data=n||null},c.vo.Error.prototype={constructor:c.vo.Error},c.vo.Event=function(){"use strict";this.type=null,this.sender=null,this.data=null,this.error=null,this.timestamp=NaN},c.vo.Event.prototype={constructor:c.vo.Event},c.models.MetricsList=function(){"use strict";return{TcpList:[],HttpList:[],RepSwitchList:[],BufferedSwitchList:[],BufferLevel:[],PlayList:[],State:[],DroppedFrames:[],PlaybackQuality:[],VideoResolution:[],DVRInfo:[],ManifestUpdate:[]}},c.models.MetricsList.prototype={constructor:c.models.MetricsList},c.vo.Mp4Track=function(){"use strict";this.type="und",this.trackId=0,this.timescale=0,this.duration=0,this.codecs="",this.codecPrivateData="",this.bandwidth="",this.width=0,this.height=0,this.language="und",this.channels=0,this.samplingRate=0,this.contentProtection=void 0,this.samples=[],this.data=null},c.vo.Mp4Track.prototype={constructor:c.vo.Mp4Track},c.vo.Mp4Track.Sample=function(){"use strict";this.dts=0,this.cts=0,this.duration=0,this.flags=0,this.data=null,this.size=0},c.vo.Mp4Track.Sample.prototype={constructor:c.vo.Mp4Track.Sample},c.vo.SegmentRequest=function(){"use strict";this.action="download",this.startTime=NaN,this.streamType=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.deferred=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null},c.vo.SegmentRequest.prototype={constructor:c.vo.SegmentRequest,ACTION_DOWNLOAD:"download",ACTION_COMPLETE:"complete"},c.vo.URIFragmentData=function(){"use strict";this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null},c.vo.URIFragmentData.prototype={constructor:c.vo.URIFragmentData},c.vo.metrics.BufferedSwitch=function(){"use strict";this.mt=null,this.to=null,this.lto=null},c.vo.metrics.BufferedSwitch.prototype={constructor:c.vo.metrics.BufferedSwitch},c.vo.metrics.BufferLevel=function(){"use strict";this.t=null,this.level=null},c.vo.metrics.BufferLevel.prototype={constructor:c.vo.metrics.BufferLevel},c.vo.metrics.Condition=function(){"use strict";this.isFullScreen=null,this.windowSize=null,this.droppedFrames=null,this.fps=null,this.bandwidth=null},c.vo.metrics.Condition.prototype={constructor:c.vo.metrics.Condition},c.vo.metrics.DroppedFrames=function(){"use strict";this.time=null,this.droppedFrames=null},c.vo.metrics.DroppedFrames.prototype={constructor:c.vo.metrics.DroppedFrames},c.vo.metrics.DVRInfo=function(){"use strict";this.time=null,this.range=null},c.vo.metrics.DVRInfo.prototype={constructor:c.vo.metrics.DVRInfo},c.vo.metrics.HTTPRequest=function(){"use strict";this.stream=null,this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.tfinish=null,this.responsecode=null,this.interval=null,this.mediaduration=null,this.trace=[],this.startTime=null,this.quality=null,this.bytesLength=null},c.vo.metrics.HTTPRequest.prototype={constructor:c.vo.metrics.HTTPRequest},c.vo.metrics.HTTPRequest.Trace=function(){"use strict";this.s=null,this.d=null,this.b=[]},c.vo.metrics.HTTPRequest.Trace.prototype={constructor:c.vo.metrics.HTTPRequest.Trace},c.vo.metrics.ManifestUpdate=function(){"use strict";this.streamType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.periodInfo=[],this.representationInfo=[]},c.vo.metrics.ManifestUpdate.PeriodInfo=function(){"use strict";this.id=null,this.index=null,this.start=null,this.duration=null},c.vo.metrics.ManifestUpdate.RepresentationInfo=function(){"use strict";this.id=null,this.index=null,this.streamType=null,this.periodIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.segmentInfoType=null},c.vo.metrics.ManifestUpdate.prototype={constructor:c.vo.metrics.ManifestUpdate},c.vo.metrics.ManifestUpdate.PeriodInfo.prototype={constructor:c.vo.metrics.ManifestUpdate.PeriodInfo},c.vo.metrics.ManifestUpdate.RepresentationInfo.prototype={constructor:c.vo.metrics.ManifestUpdate.RepresentationInfo},c.vo.metrics.PlaybackQuality=function(){"use strict";this.t=null,this.mt=null,this.droppedFrames=null,this.totalVideoFrames=null},c.vo.metrics.PlaybackQuality.prototype={constructor:c.vo.metrics.PlaybackQuality},c.vo.metrics.PlayList=function(){"use strict";this.stream=null,this.start=null,this.mstart=null,this.starttype=null,this.trace=[]},c.vo.metrics.PlayList.Trace=function(){"use strict";this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null},c.vo.metrics.PlayList.prototype={constructor:c.vo.metrics.PlayList},c.vo.metrics.PlayList.INITIAL_PLAY_START_REASON="initial_start",c.vo.metrics.PlayList.SEEK_START_REASON="seek",c.vo.metrics.PlayList.Trace.prototype={constructor:c.vo.metrics.PlayList.Trace()},c.vo.metrics.PlayList.Trace.USER_REQUEST_STOP_REASON="user_request",c.vo.metrics.PlayList.Trace.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",c.vo.metrics.PlayList.Trace.END_OF_CONTENT_STOP_REASON="end_of_content",c.vo.metrics.PlayList.Trace.REBUFFERING_REASON="rebuffering",c.vo.metrics.RepresentationSwitch=function(){"use strict";this.t=null,this.mt=null,this.to=null,this.lto=null},c.vo.metrics.RepresentationSwitch.prototype={constructor:c.vo.metrics.RepresentationSwitch},c.vo.metrics.Session=function(){"use strict";this.uri=null,this.loopMode=null,this.endTime=null,this.playerType=null},c.vo.metrics.Session.prototype={constructor:c.vo.metrics.Session},c.vo.metrics.State=function(){"use strict";this.t=null,this.current=null,this.position=null,this.reason=null},c.vo.metrics.State.prototype={constructor:c.vo.metrics.State},c.vo.metrics.TCPConnection=function(){"use strict";this.tcpid=null,this.dest=null,this.topen=null,this.tclose=null,this.tconnect=null},c.vo.metrics.TCPConnection.prototype={constructor:c.vo.metrics.TCPConnection},c.vo.metrics.VideoResolution=function(){"use strict";this.t=null,this.mt=null,this.width=null,this.height=null},c.vo.metrics.VideoResolution.prototype={constructor:c.vo.metrics.VideoResolution},d=function(){"use strict";return{modules:{},dependencies:{},vo:{},di:{}}}(),d.dependencies.BaseURLExtensions=function(){"use strict";var e=function(e,t){var n,r,i,o,a,s,u,l,d,c,f=new DataView(e),h={},p=0;while("sidx"!==l&&p<f.byteLength){for(d=f.getUint32(p),p+=4,l="",o=0;o<4;o+=1)c=f.getInt8(p),l+=String.fromCharCode(c),p+=1;"moof"!==l&&"traf"!==l&&"sidx"!==l?p+=d-8:"sidx"===l&&(p-=8)}if(i=f.getUint32(p,!1)+p,i>e.byteLength)throw"sidx terminates after array buffer";for(h.version=f.getUint8(p+8),p+=12,h.timescale=f.getUint32(p+4,!1),p+=8,0===h.version?(h.earliest_presentation_time=f.getUint32(p,!1),h.first_offset=f.getUint32(p+4,!1),p+=8):(h.earliest_presentation_time=g.Math.to64BitNumber(f.getUint32(p+4,!1),f.getUint32(p,!1)),h.first_offset=(f.getUint32(p+8,!1)<<32)+f.getUint32(p+12,!1),p+=16),h.first_offset+=i+(t||0),h.reference_count=f.getUint16(p+2,!1),p+=4,h.references=[],n=h.first_offset,r=h.earliest_presentation_time,o=0;o<h.reference_count;o+=1)s=f.getUint32(p,!1),a=s>>>31,s&=2147483647,u=f.getUint32(p+4,!1),p+=12,s>0&&h.references.push({size:s,type:a,offset:n,duration:u,time:r,timescale:h.timescale}),n+=s,r+=u;if(p!==i)throw"Error: final pos "+p+" differs from SIDX end "+i;return h},n=function(t,n,r){var i,o,a,s,u,l,c,f;for(i=e.call(this,t,r),o=i.references,a=[],u=0,l=o.length;u<l;u+=1)s=new d.vo.Segment,s.duration=o[u].duration,s.media=n,s.startTime=o[u].time,s.timescale=o[u].timescale,c=o[u].offset,f=o[u].offset+o[u].size-1,s.mediaRange=c+"-"+f,a.push(s);return this.debug.log("Parsed SIDX box: "+a.length+" segments."),a},r=function(e,n){var i,o,a,s,u,l,d,c,f=t.defer(),h=new DataView(e),p=0,m="",g=0,y=!1,v=this;v.debug.log("Searching for initialization.");while("moov"!==m&&p<h.byteLength){for(g=h.getUint32(p),p+=4,m="",u=0;u<4;u+=1)l=h.getInt8(p),m+=String.fromCharCode(l),p+=1;"ftyp"===m&&(i=p-8),"moov"===m&&(o=p-8),"moov"!==m&&(p+=g-8)}return h.byteLength-p,"moov"!==m?(v.debug.log("Loading more bytes to find initialization."),n.range.start=0,n.range.end=n.bytesLoaded+n.bytesToLoad,d=new XMLHttpRequest,d.onloadend=function(){y||f.reject("Error loading initialization.")},d.onload=function(){y=!0,n.bytesLoaded=n.range.end,r.call(v,d.response).then(function(e){f.resolve(e)})},d.onerror=function(){f.reject("Error loading initialization.")},d.open("GET",v.tokenAuthentication.addTokenAsQueryArg(n.url)),d.responseType="arraybuffer",d.setRequestHeader("Range","bytes="+n.range.start+"-"+n.range.end),d=v.tokenAuthentication.setTokenInRequestHeader(d),d.send(null)):(a=void 0===i?o:i,s=o+g-1,c=a+"-"+s,v.debug.log("Found the initialization.  Range: "+c),f.resolve(c)),f.promise},i=function(e){var n=t.defer(),i=new XMLHttpRequest,o=!0,a=this,s={url:e,range:{},searching:!1,bytesLoaded:0,bytesToLoad:1500,request:i};return a.debug.log("Start searching for initialization."),s.range.start=0,s.range.end=s.bytesToLoad,i.onload=function(){i.status<200||i.status>299||(o=!1,s.bytesLoaded=s.range.end,r.call(a,i.response,s).then(function(e){n.resolve(e)},function(){n.reject()}))},i.onloadend=i.onerror=function(){if(o){o=!1;var e={};e.url=s.url,e.request=i,a.errHandler.sendError(c.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_INIT,null,e),n.reject(i)}},i.open("GET",a.tokenAuthentication.addTokenAsQueryArg(s.url)),i.responseType="arraybuffer",i.setRequestHeader("Range","bytes="+s.range.start+"-"+s.range.end),i=a.tokenAuthentication.setTokenInRequestHeader(i),i.send(null),a.debug.log("Perform init search: "+s.url),n.promise},o=function(e,r){var i,a,s,u,l,d,f,h,p=t.defer(),m=new DataView(e),g=new XMLHttpRequest,y=0,v="",_=0,E=!0,b=!1,T=this;T.debug.log("Searching for SIDX box."),T.debug.log(r.bytesLoaded+" bytes loaded.");while("sidx"!==v&&y<m.byteLength){for(_=m.getUint32(y),y+=4,v="",l=0;l<4;l+=1)d=m.getInt8(y),v+=String.fromCharCode(d),y+=1;"sidx"!==v&&(y+=_-8)}if(i=m.byteLength-y,"sidx"!==v)p.reject();else if(i<_-8)T.debug.log("Found SIDX but we don't have all of it."),r.range.start=0,r.range.end=r.bytesLoaded+(_-i),g.onload=function(){g.status<200||g.status>299||(E=!1,r.bytesLoaded=r.range.end,o.call(T,g.response,r).then(function(e){p.resolve(e)}))},g.onloadend=g.onerror=function(){if(E){E=!1;var e={};e.url=r.url,e.request=g,T.errHandler.sendError(c.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_SIDX,null,e),p.reject(g)}},g.open("GET",T.tokenAuthentication.addTokenAsQueryArg(r.url)),g.responseType="arraybuffer",g.setRequestHeader("Range","bytes="+r.range.start+"-"+r.range.end),g=T.tokenAuthentication.setTokenInRequestHeader(g),g.send(null);else if(r.range.start=y-8,r.range.end=r.range.start+_,T.debug.log("Found the SIDX box.  Start: "+r.range.start+" | End: "+r.range.end),a=new ArrayBuffer(r.range.end-r.range.start),u=new Uint8Array(a),s=new Uint8Array(e,r.range.start,r.range.end-r.range.start),u.set(s),f=this.parseSIDX.call(this,a,r.range.start),h=f.references,null!==h&&void 0!==h&&h.length>0&&(b=1===h[0].type),b){T.debug.log("Initiate multiple SIDX load.");var S,I,w,x,A,D,R=[];for(S=0,I=h.length;S<I;S+=1)w=h[S].offset,x=h[S].offset+h[S].size-1,A=w+"-"+x,R.push(this.loadSegments.call(T,r.url,A));t.all(R).then(function(e){for(D=[],S=0,I=e.length;S<I;S+=1)D=D.concat(e[S]);p.resolve(D)},function(e){p.reject(e)})}else T.debug.log("Parsing segments from SIDX."),p.resolve(n.call(T,a,r.url,r.range.start));return p.promise},a=function(e,r){var i,a=t.defer(),s=new XMLHttpRequest,u=!0,l=this,d={url:e,range:{},searching:!1,bytesLoaded:0,bytesToLoad:1500,request:s};return null===r?(l.debug.log("No known range for SIDX request."),d.searching=!0,d.range.start=0,d.range.end=d.bytesToLoad):(i=r.split("-"),d.range.start=parseFloat(i[0]),d.range.end=parseFloat(i[1])),s.onload=function(){s.status<200||s.status>299||(u=!1,d.searching?(d.bytesLoaded=d.range.end,o.call(l,s.response,d).then(function(e){a.resolve(e)},function(){a.reject()})):a.resolve(n.call(l,s.response,d.url,d.range.start)))},s.onloadend=s.onerror=function(){if(u){u=!1;var e={};e.url=d.url,e.request=s,l.errHandler.sendError(c.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_SIDX,null,e),a.reject(s)}},s.open("GET",l.tokenAuthentication.addTokenAsQueryArg(d.url)),s.responseType="arraybuffer",s.setRequestHeader("Range","bytes="+d.range.start+"-"+d.range.end),s=l.tokenAuthentication.setTokenInRequestHeader(s),s.send(null),l.debug.log("Perform SIDX load: "+d.url),a.promise};return{debug:void 0,errHandler:void 0,tokenAuthentication:void 0,loadSegments:a,loadInitialization:i,parseSegments:n,parseSIDX:e,findSIDX:o}},d.dependencies.BaseURLExtensions.prototype={constructor:d.dependencies.BaseURLExtensions},d.di.DashContext=function(){"use strict";return{system:void 0,setup:function(){d.di.DashContext.prototype.setup.call(this),this.system.mapClass("parser",d.dependencies.DashParser),this.system.mapClass("indexHandler",d.dependencies.DashHandler),this.system.mapClass("baseURLExt",d.dependencies.BaseURLExtensions),this.system.mapClass("fragmentExt",d.dependencies.FragmentExtensions),this.system.mapSingleton("manifestExt",d.dependencies.DashManifestExtensions),this.system.mapSingleton("metricsExt",d.dependencies.DashMetricsExtensions),this.system.mapSingleton("timelineConverter",d.dependencies.TimelineConverter)}}},d.di.DashContext.prototype=new c.di.Context,d.di.DashContext.prototype.constructor=d.di.DashContext,d.dependencies.DashHandler=function(){"use strict";var e,n,r=-1,i=null,o=function(e,t){while(e.length<t)e="0"+e;return e},a=function(e,t,n){var r,i,a,s,u=0,l=0,d=t.length,c="%0",f=c.length;while(1){if(u=e.indexOf("$"+t),u<0)return e;if(l=e.indexOf("$",u+d),l<0)return e;if(r=e.indexOf(c,u+d),r>u&&r<l)switch(i=e.charAt(l-1),a=parseInt(e.substring(r+f,l-1),10),i){case"d":case"i":case"u":s=o(n.toString(),a);break;case"x":s=o(n.toString(16),a);break;case"X":s=o(n.toString(16),a).toUpperCase();break;case"o":s=o(n.toString(8),a);break;default:return this.debug.log("Unsupported/invalid IEEE 1003.1 format identifier string in URL"),e}else s=n;e=e.substring(0,u)+s+e.substring(l+1)}},s=function(e){return e.split("$$").join("$")},u=function(e,t){if(null===t||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)},l=function(e,t){return e.representation.startNumber+t},f=function(e,t){var n,r=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].BaseURL;return n=e===r?e:-1!==e.indexOf("http://")||-1!==e.indexOf("https://")?e:r+e,n},h=function(t,n){var r,i,o=this,a=new c.vo.SegmentRequest;return r=t.adaptation.period,a.streamType=n,a.type="Initialization Segment",a.url=f(t.initialization,t),a.range=t.range,i=r.start,a.availabilityStartTime=o.timelineConverter.calcAvailabilityStartTimeFromPresentationTime(i,t.adaptation.period.mpd,e),a.availabilityEndTime=o.timelineConverter.calcAvailabilityEndTimeFromPresentationTime(i+r.duration,r.mpd,e),a.quality=t.index,a},p=function(e){var r=t.defer(),i=null,o=null,a=this;return e?(e.initialization?(i=h.call(a,e,n),r.resolve(i)):(o=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].BaseURL,a.baseURLExt.loadInitialization(o).then(function(t){e.range=t,e.initialization=o,i=h.call(a,e,n),r.resolve(i)},function(e){r.reject(e)})),r.promise):t.reject("no represenation")},m=function(t){var n,i,o,a=t.adaptation.period,s=!1;return e?s=!1:r<0?s=!1:r<t.availableSegmentsNumber+t.segmentStartIndex?(i=D(r,t),i&&(o=i.presentationStartTime-a.start,n=t.adaptation.period.duration,s=o>=n)):s=!0,s},g=function(t,n){var r,i,o,a,s=this;return i=t.segmentDuration,o=t.adaptation.period.start+n*i,a=o+i,r=new d.vo.Segment,r.representation=t,r.duration=i,r.presentationStartTime=o,r.mediaStartTime=s.timelineConverter.calcMediaTimeFromPresentationTime(r.presentationStartTime,t),r.availabilityStartTime=s.timelineConverter.calcAvailabilityStartTimeFromPresentationTime(r.presentationStartTime,t.adaptation.period.mpd,e),r.availabilityEndTime=s.timelineConverter.calcAvailabilityEndTimeFromPresentationTime(a,t.adaptation.period.mpd,e),r.wallStartTime=s.timelineConverter.calcWallTimeForSegment(r,e),r.replacementNumber=l(r,n),r.availabilityIdx=n,r},y=function(e){var n,r,o,a,s,u,l,d,c,f,h,p,m,g=this,y=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,v=y.SegmentTimeline,_=e.availableSegmentsNumber>0,b=10,S=[],I=0,w=-1,x=!1,A=function(t){return T.call(g,e,I,t.d,m,y.media,t.mediaRange,w,t.tManifest)};for(m=e.timescale,n=v.S_asArray,c=E.call(g,e),c?(h=c.start,p=c.end):f=g.timelineConverter.calcMediaTimeFromPresentationTime(i||0,e),o=0,a=n.length;o<a;o+=1)if(r=n[o],u=0,r.hasOwnProperty("r")&&(u=r.r),r.hasOwnProperty("t")&&(I=r.t),u<0&&(d=n[o+1],l=d&&d.hasOwnProperty("t")?d.t/m:e.adaptation.period.duration,u=Math.ceil((l-I/m)/(r.d/m))-1),x){if(_)break;w+=u+1}else for(s=0;s<=u;s+=1){if(w+=1,c){if(w>p){if(x=!0,_)break;continue}w>=h&&S.push(A.call(g,r))}else{if(S.length>b){if(x=!0,_)break;continue}I/m>=f-r.d/m&&S.push(A.call(g,r))}I+=r.d}var D,R,M=n[0];return D=void 0===M.t?0:g.timelineConverter.calcPresentationTimeFromMediaTime(M.t/m,e),R=g.timelineConverter.calcPresentationTimeFromMediaTime((I-r.d)/m,e),e.segmentAvailabilityRange={start:D,end:R},e.availableSegmentsNumber=w+1,e.segmentStartIndex=0,t.when(S)},v=function(n){var r,i,o,s,u=[],l=this,d=t.defer(),c=n.adaptation.period.mpd.manifest.Period_asArray[n.adaptation.period.index].AdaptationSet_asArray[n.adaptation.index].Representation_asArray[n.index].SegmentTemplate,f=n.segmentDuration,h=null,p=Math.floor(n.adaptation.period.start/f),m=null,y=null;return s=n.startNumber,b.call(l,n).then(function(t){for(n.segmentAvailabilityRange=t,h=_.call(l,n),i=h.start,o=h.end,r=i;r<=o;r+=1)m=g.call(l,n,r-(e?p:0)),m.replacementTime=(s+r-1)*n.segmentDuration,y=c.media,y=a(y,"Number",m.replacementNumber),y=a(y,"Time",m.replacementTime),m.media=y,u.push(m),m=null;n.availableSegmentsNumber=p+Math.ceil((t.end-t.start)/f),n.segmentStartIndex=i,d.resolve(u)}),d.promise},_=function(t){var n,o,a,s=this,u=t.adaptation.period.start,l=t.segmentDuration,d=t.adaptation.period.mpd.manifest.minBufferTime,c=t.segmentAvailabilityRange,f=NaN,h=null,p=t.segments,m=2*l,g=Math.max(2*d,10*l);return c||(c=s.timelineConverter.calcSegmentAvailabilityRange(t,e)),e&&!t.adaptation.period.mpd.isClientServerTimeSyncCompleted?(n=Math.floor(c.start/l),o=Math.floor(c.end/l),a={start:n,end:o},a):(p?(h=D(r,t),f=h?h.presentationStartTime-u:r>0?r*l:i-u||p[0].presentationStartTime-u):f=r>0?r*l:e?c.end:c.start,n=Math.floor(Math.max(f-m,c.start)/l),o=Math.floor(Math.min(n+g/l,c.end/l)),a={start:n,end:o},a)},E=function(t){var n,o,a,s=NaN,u=t.segments,l=2,d=10,c=0,f=Number.POSITIVE_INFINITY;if(e&&!t.adaptation.period.mpd.isClientServerTimeSyncCompleted)return a={start:c,end:f},a;if(!e&&null!==i)return null;if(u){if(r<0)return null;s=r}else s=r>0?r:e?f:c;return n=Math.max(s-l,c),o=Math.min(s+d,f),a={start:n,end:o},a},b=function(n){var r,i,o=this,a=t.defer(),s=function(){r=o.timelineConverter.calcSegmentAvailabilityRange(n,e),r.end>0?a.resolve(r):(i=1e3*Math.abs(r.end),setTimeout(s,i))};return s(),a.promise},T=function(t,n,r,i,o,s,u,c){var f,h,p,m=this,g=n/i,y=Math.min(r/i,t.adaptation.period.mpd.maxSegmentDuration);return f=m.timelineConverter.calcPresentationTimeFromMediaTime(g,t),f=g,h=f+y,p=new d.vo.Segment,p.representation=t,p.duration=y,p.mediaStartTime=g,p.presentationStartTime=f,p.availabilityStartTime=t.adaptation.period.mpd.manifest.mpdLoadedTime,p.availabilityEndTime=m.timelineConverter.calcAvailabilityEndTimeFromPresentationTime(h,t.adaptation.period.mpd,e),p.wallStartTime=m.timelineConverter.calcWallTimeForSegment(p,e),p.replacementTime=c||n,p.replacementNumber=l(p,u),o=a(o,"Number",p.replacementNumber),o=a(o,"Time",p.replacementTime),p.media=o,p.mediaRange=s,p.availabilityIdx=u,p},S=function(n){var r,i,o,a,s,u=this,l=[],d=t.defer(),c=n.adaptation.period.mpd.manifest.Period_asArray[n.adaptation.period.index].AdaptationSet_asArray[n.adaptation.index].Representation_asArray[n.index].SegmentList,f=c.SegmentURL_asArray.length,h=0,p=c.SegmentURL_asArray.length;return s=n.startNumber,b.call(u,n).then(function(t){for(e||(a=_.call(u,n),h=a.start,p=a.end),r=h;r<p;r+=1)o=c.SegmentURL_asArray[r],i=g.call(u,n,r),i.replacementTime=(s+r-1)*n.segmentDuration,i.media=o.media,i.mediaRange=o.mediaRange,i.index=o.index,i.indexRange=o.indexRange,o.duration&&(i.duration=o.duration,i.presentationStartTime=i.mediaStartTime=o.time),void 0!==o.sequenceNumber&&(i.sequenceNumber=o.sequenceNumber),void 0!==o.decryptionInfo&&(i.decryptionInfo=o.decryptionInfo),l.push(i),i=null;n.segmentAvailabilityRange=t,n.availableSegmentsNumber=f,n.segmentStartIndex=h,d.resolve(l)}),d.promise},I=function(e){var n,r,i,o,a=this,s=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].BaseURL,u=t.defer(),l=[],d=0,c=null;return e.indexRange&&(c=e.indexRange),this.baseURLExt.loadSegments(s,c).then(function(t){for(r=0,i=t.length;r<i;r+=1)n=t[r],o=T.call(a,e,n.startTime,n.duration,n.timescale,n.media,n.mediaRange,d),l.push(o),o=null,d+=1;e.segmentAvailabilityRange={start:l[0].presentationStartTime,end:l[i-1].presentationStartTime},e.availableSegmentsNumber=i,e.segmentStartIndex=0,u.resolve(l)},function(){u.reject()}),u.promise},w=function(n){var r,i,o=t.defer(),a=this;return M.call(a,n)?(r="SegmentTimeline"===n.segmentInfoType?y.call(a,n):"SegmentTemplate"===n.segmentInfoType?v.call(a,n):"SegmentList"===n.segmentInfoType?S.call(a,n):I.call(a,n),t.when(r).then(function(t){if(n.segments=t,i=t.length-1,e&&isNaN(n.adaptation.period.liveEdge)){var r=a.metricsModel.getMetricsFor("stream"),s=t[i].presentationStartTime;n.adaptation.period.liveEdge=s,a.metricsModel.updateManifestUpdateInfo(a.metricsExt.getCurrentManifestUpdate(r),{presentationStartTime:s})}o.resolve(t)},function(){o.reject()}),o.promise):t.when(n.segments)},x=function(e){var r=this,i=t.defer();return e.segments=null,r.debug.log("[DashHandler]["+n+"] updateSegmentList for representation ",e.id),w.call(r,e).then(function(t){e.segments=t,i.resolve(t)}),i.promise},A=function(e,r){var i,o,a,s,u=null===r?null:r.segments,l=null===u?0:u.length-1,c=-1,f=this;if(f.debug.log("[DashHandler]["+n+"] getIndexForSegments for time ",e),u&&u.length>0)for(s=l;s>=0;s--){if(i=u[s],o=i.presentationStartTime,a=i.duration,e+d.dependencies.DashHandler.EPSILON>=o&&e-d.dependencies.DashHandler.EPSILON<=o+a){c=i.availabilityIdx,f.debug.log("[DashHandler]["+n+"] getIndexForSegments, idx =  ",c);break}if(-1===c&&e-d.dependencies.DashHandler.EPSILON>o+a){f.debug.log("[DashHandler]["+n+"] getIndexForSegments, (past the end) idx =  ",c),c=isNaN(r.segmentDuration)?i.availabilityIdx+1:Math.floor((e-r.adaptation.period.start)/r.segmentDuration);break}}return-1===c&&(isNaN(r.segmentDuration)?u&&u.length>0&&e<u[0].presentationStartTime?(f.debug.log("[DashHandler]["+n+"] getIndexForSegments, (before start) idx =  ",c),c=0):f.debug.log("[DashHandler]["+n+"] Couldn't figure out segment for time: "+e):(f.debug.log("[DashHandler]["+n+"] getIndexForSegments, (segment duration) idx =  ",c),c=Math.floor((e-r.adaptation.period.start)/r.segmentDuration))),t.when(c)},D=function(e,t){if(!t||!t.segments)return null;var n,r,i=t.segments.length;for(r=0;r<i;r+=1)if(n=t.segments[r],n.availabilityIdx===e)return n;return null},R=function(e,t){if(!t||!t.segments)return null;var n,r,i=t.segments.length;for(r=0;r<i;r+=1)if(n=t.segments[r],void 0!==n.sequenceNumber&&n.sequenceNumber===e)return r<i-1?t.segments[r+1]:null;return null},M=function(e){var t,n,o,a,s=!1,u=e.segments;return u&&0!==u.length?null!==i?(a=u[0].presentationStartTime,o=u[u.length-1].presentationStartTime,s=i<a||i>o):(n=u[0].availabilityIdx,t=u[u.length-1].availabilityIdx,s=r<n||r>t):s=!0,s},C=function(e){if(null===e||void 0===e)return null;var t,r=new c.vo.SegmentRequest,i=e.representation,o=i.adaptation.period.mpd.manifest.Period_asArray[i.adaptation.period.index].AdaptationSet_asArray[i.adaptation.index].Representation_asArray[i.index].bandwidth;return t=f(e.media,i),t=a(t,"Number",e.replacementNumber),t=a(t,"Time",e.replacementTime),t=a(t,"Bandwidth",o),t=u(t,i.id),t=s(t),r.streamType=n,r.type="Media Segment",r.url=t,r.range=e.mediaRange,r.startTime=e.presentationStartTime,r.duration=e.duration,r.timescale=i.timescale,r.availabilityStartTime=e.availabilityStartTime,r.availabilityEndTime=e.availabilityEndTime,r.wallStartTime=e.wallStartTime,r.quality=i.index,r.index=e.availabilityIdx,void 0!==e.sequenceNumber&&(r.sequenceNumber=e.sequenceNumber),void 0!==e.decryptionInfo&&(r.decryptionInfo=e.decryptionInfo),r},N=function(e,o){var a,s,u,l=this;return e?(i=o,r=-1,l.debug.log("[DashHandler]["+n+"] Getting the request for time: "+o),a=t.defer(),w.call(l,e).then(function(){var t;return t=A.call(l,o,e),t},function(){a.reject()}).then(function(i){return l.debug.log("[DashHandler]["+n+"] Index for time "+o+" is "+i),r=i,t.when(m.call(l,e))}).then(function(i){var o=null;return i?(s=new c.vo.SegmentRequest,s.action=s.ACTION_COMPLETE,s.index=r,l.debug.log("[DashHandler]["+n+"] Signal complete."),l.debug.log(s),a.resolve(s)):(u=D(r,e),o=C.call(l,u)),t.when(o)}).then(function(e){a.resolve(e)}),a.promise):t.reject("no representation")},P=function(e){var o,a,s,u,l=this;if(!e)return t.reject("no represenation");if(-1===r)throw"You must call getSegmentRequestForTime first.";return i=null,r+=1,o=t.defer(),l.debug.log("[DashHandler]["+n+"] Getting the next request => index = "+r),u=m.call(l,e),u?(a=new c.vo.SegmentRequest,a.action=a.ACTION_COMPLETE,a.index=r,l.debug.log("[DashHandler]["+n+"] Signal complete."),o.resolve(a)):w.call(l,e).then(function(){var n;return s=D(r,e),n=C.call(l,s),t.when(n)}).then(function(e){o.resolve(e)}),o.promise},L=function(e,o){var a,s,u,l,d=this;if(!e)return t.reject("no represenation");if(-1===r)throw"You must call getSegmentRequestForTime first.";return i=null,r+=1,a=t.defer(),d.debug.log("[DashHandler]["+n+"] Getting the next request => sn = "+o),w.call(d,e).then(function(){if(l=m.call(d,e),l)s=new c.vo.SegmentRequest,s.action=s.ACTION_COMPLETE,s.index=r,d.debug.log("[DashHandler]["+n+"] Signal complete."),a.resolve(s);else if(u=R(o,e),null===u)a.resolve(null);else{r=u.availabilityIdx;var t=C.call(d,u);a.resolve(t)}}),a.promise},O=function(e,r,i){var o,a=this,s=Math.max(r-i,0),u=t.defer(),l=0;return e?(a.debug.log("[DashHandler]["+n+"] getSegmentCountForDuration"),w.call(a,e).then(function(e){o=e[0].duration,l=Math.ceil(s/o),u.resolve(l)},function(){u.resolve(0)}),u.promise):t.reject("no represenation")},F=function(e){var i,o,a=this,s=t.defer();return e?(o=r,w.call(a,e).then(function(t){o<0?i=a.timelineConverter.calcPresentationStartTime(e.adaptation.period):(o=o<t[0].availabilityIdx?t[0].availabilityIdx:Math.min(t[t.length-1].availabilityIdx,o),i=D(o,e).presentationStartTime,a.debug.log("[DashHandler]["+n+"] getSegmentByIndex, index = "+o+" => time = "+i)),a.debug.log("[DashHandler]["+n+"] getCurrentTime => ",i),s.resolve(i)},function(){s.reject()}),s.promise):t.reject("no represenation")},B=function(){},k=function(){};return{debug:void 0,baseURLExt:void 0,metricsModel:void 0,metricsExt:void 0,manifestModel:void 0,manifestExt:void 0,timelineConverter:void 0,capabilities:void 0,videoModel:void 0,getType:function(){return n},setType:function(e){n=e},getIsDynamic:function(){return e},setIsDynamic:function(t){e=t},getInitRequest:p,getSegmentRequestForTime:N,getNextSegmentRequest:P,getNextSegmentRequestFromSN:L,getCurrentTime:F,getSegmentCountForDuration:O,updateSegmentList:x,getIFrameRequest:B,getFragmentInfoRequest:k}},d.dependencies.DashHandler.EPSILON=.003,d.dependencies.DashHandler.prototype={constructor:d.dependencies.DashHandler},d.dependencies.DashManifestExtensions=function(){"use strict";this.timelineConverter=void 0},d.dependencies.DashManifestExtensions.prototype={constructor:d.dependencies.DashManifestExtensions,isInteger:Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},getIsType:function(e,t,n){"use strict";var r,i,o,a,s=!1;if(!e)return!1;if(void 0===e.type&&(e.type=null),o=e.ContentComponent_asArray,o)for(r=0;r<e.ContentComponent_asArray.length&&!s;r++)e.ContentComponent_asArray[r].contentType===t&&(e.type=t,s=!0);if(!s&&e.mimeType)for(r=0;r<n.length&&!s;r++)-1!==e.mimeType.indexOf(n[r])&&(e.type=t,s=!0);if(!s)for(r=0;r<e.Representation_asArray.length&&!s;r++)for(a=e.Representation_asArray[r],i=0;i<n.length&&!s;i++)-1!==a.mimeType.indexOf(n[i])&&(e.type=t,s=!0);return s},getIsVideo:function(e){return this.getIsType(e,"video",["video"])},getIsAudio:function(e){return this.getIsType(e,"audio",["audio"])},getIsText:function(e){return this.getIsType(e,"text",["vtt","ttml","application/mp4"])},getIsTextTrack:function(e){return"text/vtt"===e||"application/ttml+xml"===e||"application/ttml+xml+mp4"===e||"application/mp4"===e},getIsMain:function(){"use strict";return!1},processAdaptation:function(e){"use strict";return void 0!==e.Representation_asArray&&null!==e.Representation_asArray&&e.Representation_asArray.sort(function(e,t){return e.bandwidth-t.bandwidth}),e},getDataForId:function(e,t,n){"use strict";var r,i,o=t.Period_asArray[n].AdaptationSet_asArray;for(r=0,i=o.length;r<i;r+=1)if(o[r].hasOwnProperty("id")&&o[r].id===e)return o[r];return null},getDataForIndex:function(e,t,n){"use strict";var r;return t&&n>=0&&(r=t.Period_asArray[n].AdaptationSet_asArray,r&&r.length>0&&!isNaN(e))?r[e]:[]},getIndex:function(e,t){var n,r,i,o=t.Period_asArray;for(r=0;r<o.length;r+=1)for(n=o[r].AdaptationSet_asArray,i=0;i<n.length;i+=1)if(n[i]===e)return i;return-1},getDataIndex:function(e,t,n){"use strict";var r,i,o;if(t&&n>=0)if(r=t.Period_asArray[n].AdaptationSet_asArray,e.id){for(i=0,o=r.length;i<o;i+=1)if(r[i].id&&r[i].id===e.id)return i}else{var a,s=JSON.stringify(e);for(i=0,o=r.length;i<o;i+=1)if(a=JSON.stringify(r[i]),a===s)return i}return-1},getVideoData:function(e,t){"use strict";var n,r;if(!e||t<0)return null;if(n=e.Period_asArray[t].AdaptationSet_asArray,0===n.length)return null;for(r=0;r<n.length;r+=1)if(this.getIsVideo(n[r]))return n[r];return null},getTextDatas:function(e,t){"use strict";var n,r,i=[];if(!e||t<0)return i;if(n=e.Period_asArray[t].AdaptationSet_asArray,0===n.length)return i;for(r=0;r<n.length;r+=1)this.getIsText(n[r])&&i.push(n[r]);return i},getAudioDatas:function(e,t){"use strict";var n,r,i=[];if(!e||t<0)return i;if(n=e.Period_asArray[t].AdaptationSet_asArray,0===n.length)return i;for(r=0;r<n.length;r+=1)this.getIsAudio(n[r])&&i.push(n[r]);return i},getSpecificAudioData:function(e,t,n){"use strict";var r,i;if(!e||t<0)return null;if(i=this.getAudioDatas(e,t),0===i.length)return null;for(r=0;r<i.length;r+=1)if(i[r].lang===n)return this.processAdaptation(i[r]);return this.processAdaptation(i[0])},getSpecificTextData:function(e,t,n){"use strict";var r,i;if(!e||t<0)return null;if(i=this.getTextDatas(e,t),0===i.length)return null;for(r=0;r<i.length;r+=1)if(i[r].lang===n)return this.processAdaptation(i[r]);return this.processAdaptation(i[0])},getCodec:function(e){"use strict";var t,n=0,r=null;while(null===r&&n<e.Representation_asArray.length)t=e.Representation_asArray[n],r=this.getCodecForRepresentation(t),n++;return r},getCodecForRepresentation:function(e){"use strict";return null===e.codecs||""===e.codecs?null:e.mimeType+';codecs="'+e.codecs+'"'},getMimeType:function(e){"use strict";return e.Representation_asArray[0].mimeType},getKID:function(e){"use strict";return e&&e.hasOwnProperty("cenc:default_KID")?e["cenc:default_KID"]:null},getContentProtectionData:function(e){"use strict";return e&&e.hasOwnProperty("ContentProtection_asArray")&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:function(e){"use strict";var t=!1,n="dynamic";return e&&e.hasOwnProperty("type")&&(t=e.type===n),t},getIsDVR:function(e){"use strict";var t,n,r=this.getIsDynamic(e);return t=!isNaN(e.timeShiftBufferDepth),n=r&&t,n},getIsOnDemand:function(e){"use strict";var t=!1;return e.profiles&&e.profiles.length>0&&(t=-1!==e.profiles.indexOf("urn:mpeg:dash:profile:isoff-on-demand:2011")),t},getIsStartOver:function(e){"use strict";var t=!1;return e&&e.hasOwnProperty("startOver")&&(t=!0===e.startOver),t},getDuration:function(e){var t;return t=e&&e.hasOwnProperty("mediaPresentationDuration")?e.mediaPresentationDuration:Number.POSITIVE_INFINITY,t},getBandwidth:function(e){"use strict";return e&&e.bandwidth?e.bandwidth:NaN},getRefreshDelay:function(e){"use strict";var t=NaN,n=2;return e.hasOwnProperty("minimumUpdatePeriod")&&(t=Math.max(parseFloat(e.minimumUpdatePeriod),n)),t},getRepresentationCount:function(e){"use strict";return e?e.Representation_asArray.length:null},getRepresentationFor:function(e,t){"use strict";return t&&t.Representation_asArray&&t.Representation_asArray.length>0&&this.isInteger(e)&&e<t.Representation_asArray.length?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e,t){var n,r,i,o,a,s=[];if(e&&t){n=this.processAdaptation(e.Period_asArray[t.period.index].AdaptationSet_asArray[t.index]);for(var u=0;u<n.Representation_asArray.length;u+=1)a=n.Representation_asArray[u],r=new d.vo.Representation,r.index=u,r.adaptation=t,a.hasOwnProperty("id")&&(r.id=a.id),a.hasOwnProperty("SegmentBase")?(o=a.SegmentBase,r.segmentInfoType="SegmentBase"):a.hasOwnProperty("SegmentList")?(o=a.SegmentList,r.segmentInfoType="SegmentList",r.useCalculatedLiveEdgeTime=!0):a.hasOwnProperty("SegmentTemplate")?(o=a.SegmentTemplate,o.hasOwnProperty("SegmentTimeline")?r.segmentInfoType="SegmentTimeline":r.segmentInfoType="SegmentTemplate",o.hasOwnProperty("initialization")&&(r.initialization=o.initialization.split("$Bandwidth$").join(a.bandwidth).split("$RepresentationID$").join(a.id))):(o=a.BaseURL,r.segmentInfoType="BaseURL"),o.hasOwnProperty("Initialization")?(i=o.Initialization,i.hasOwnProperty("sourceURL")?r.initialization=i.sourceURL:i.hasOwnProperty("range")&&(r.initialization=a.BaseURL,r.range=i.range)):a.hasOwnProperty("mimeType")&&this.getIsTextTrack(a.mimeType)&&!r.initialization&&(r.initialization=a.BaseURL,r.range=0),o.hasOwnProperty("timescale")&&(r.timescale=o.timescale),o.hasOwnProperty("duration")&&(r.segmentDuration=o.duration/r.timescale),o.hasOwnProperty("startNumber")&&(r.startNumber=o.startNumber),o.hasOwnProperty("indexRange")&&(r.indexRange=o.indexRange),o.hasOwnProperty("presentationTimeOffset")&&(r.presentationTimeOffset=o.presentationTimeOffset/r.timescale),r.MSETimeOffset=this.timelineConverter.calcMSETimeOffset(r),s.push(r)}return s},getAdaptationsForPeriod:function(e,t){var n,r=null===e?null:e.Period_asArray[t.index],i=[];if(r)for(var o=0;o<r.AdaptationSet_asArray.length;o+=1)n=new d.vo.AdaptationSet,n.index=o,n.period=t,i.push(n);return i},getRegularPeriods:function(e,t){var n,r,i=[],o=this.getIsDynamic(e),a=null,s=null,u=null,l=null;for(n=0,r=e.Period_asArray.length;n<r;n+=1)s=e.Period_asArray[n],s.hasOwnProperty("start")?(l=new d.vo.Period,l.start=s.start):null!==a&&s.hasOwnProperty("duration")?(l=new d.vo.Period,l.start=u.start+u.duration,l.duration=s.duration):0!==n||o||(l=new d.vo.Period,l.start=0),null!==u&&isNaN(u.duration)&&(u.duration=l.start-u.start),null!==l&&s.hasOwnProperty("id")&&(l.id=s.id),null!==l&&s.hasOwnProperty("duration")&&(l.duration=s.duration),null!==l&&(l.index=n,l.mpd=t,i.push(l)),a=s,s=null,u=l,l=null;return 0===i.length?i:(t.checkTime=this.getCheckTime(e,i[0]),null!==u&&isNaN(u.duration)&&(u.duration=this.getEndTimeForLastPeriod(t)-u.start),i)},getMpd:function(e){var t=new d.vo.Mpd;return e?(t.manifest=e,e.hasOwnProperty("availabilityStartTime")?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):t.availabilityStartTime=new Date(e.mpdLoadedTime.getTime()),e.hasOwnProperty("availabilityEndTime")&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty("suggestedPresentationDelay")&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty("timeShiftBufferDepth")&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty("maxSegmentDuration")&&(t.maxSegmentDuration=e.maxSegmentDuration),t):null},getFetchTime:function(e,t){var n=this.timelineConverter.calcPresentationTimeFromWallTime(e.mpdLoadedTime,t);return n},getCheckTime:function(e,t){var n=NaN;return e.hasOwnProperty("minimumUpdatePeriod")&&(n=this.getFetchTime(e,t)+e.minimumUpdatePeriod),n},getEndTimeForLastPeriod:function(e){var t;if(e.manifest.mediaPresentationDuration)t=e.manifest.mediaPresentationDuration;else{if(isNaN(e.checkTime))return new Error("Must have @mediaPresentationDuration or @minimumUpdatePeriod on MPD or an explicit @duration on the last period.");t=e.checkTime}return t},getEventsForPeriod:function(e,t){var n=null===e?null:e.Period_asArray,r=null===n?null:n[t.index].EventStream_asArray,i=[];if(r)for(var o=0;o<r.length;o+=1){var a=new d.vo.EventStream;if(a.period=t,a.timescale=1,!r[o].hasOwnProperty("schemeIdUri"))throw"Invalid EventStream. SchemeIdUri has to be set";a.schemeIdUri=r[o].schemeIdUri,r[o].hasOwnProperty("timescale")&&(a.timescale=r[o].timescale),r[o].hasOwnProperty("value")&&(a.value=r[o].value);for(var s=0;s<r[o].Event_asArray.length;s+=1){var u=new d.vo.Event;u.presentationTime=0,u.eventStream=a,r[o].Event_asArray[s].hasOwnProperty("presentationTime")&&(u.presentationTime=r[o].Event_asArray[s].presentationTime),r[o].Event_asArray[s].hasOwnProperty("duration")&&(u.duration=r[o].Event_asArray[s].duration),r[o].Event_asArray[s].hasOwnProperty("id")&&(u.id=r[o].Event_asArray[s].id),i.push(u)}}return i},getEventStreamForAdaptationSet:function(e){var t,n=[];if(e&&(t=e.InbandEventStream_asArray,t))for(var r=0;r<t.length;r+=1){var i=new d.vo.EventStream;if(i.timescale=1,!t[r].hasOwnProperty("schemeIdUri"))throw"Invalid EventStream. SchemeIdUri has to be set";i.schemeIdUri=t[r].schemeIdUri,t[r].hasOwnProperty("timescale")&&(i.timescale=t[r].timescale),t[r].hasOwnProperty("value")&&(i.value=t[r].value),n.push(i)}return n},getEventStreamForRepresentation:function(e,t){var n,r=[];if(e&&t&&(n=e.Representation_asArray[t.index].InbandEventStream_asArray,n))for(var i=0;i<n.length;i++){var o=new d.vo.EventStream;if(o.timescale=1,o.representation=t,!n[i].hasOwnProperty("schemeIdUri"))throw"Invalid EventStream. SchemeIdUri has to be set";o.schemeIdUri=n[i].schemeIdUri,n[i].hasOwnProperty("timescale")&&(o.timescale=n[i].timescale),n[i].hasOwnProperty("value")&&(o.value=n[i].value),r.push(o)}return r},getRepresentationBandwidth:function(e,t){return this.getBandwidth(this.getRepresentationFor(t,e))}},d.dependencies.DashMetricsExtensions=function(){"use strict";var e=function(e,t){var n,r,i,o,a,s,u,l;for(s=0;s<e.length;s+=1)for(n=e[s],i=n.AdaptationSet_asArray,u=0;u<i.length;u+=1)for(r=i[u],a=r.Representation_asArray,l=0;l<a.length;l+=1)if(o=a[l],t===o.id)return l;return-1},t=function(e,t){var n,r,i,o,a,s,u,l;for(s=0;s<e.length;s+=1)for(n=e[s],i=n.AdaptationSet_asArray,u=0;u<i.length;u+=1)for(r=i[u],a=r.Representation_asArray,l=0;l<a.length;l+=1)if(o=a[l],t===o.id)return o;return null},n=function(e,t){var n=!1;return"video"===t?(this.manifestExt.getIsVideo(e),"video"===e.type&&(n=!0)):"audio"===t?(this.manifestExt.getIsAudio(e),"audio"===e.type&&(n=!0)):n=!1,n},r=function(e,t){var r,i,o,a,s,u;for(s=0;s<e.length;s+=1)for(r=e[s],o=r.AdaptationSet_asArray,u=0;u<o.length;u+=1)if(i=o[u],a=i.Representation_asArray,n.call(this,i,t))return a.length;return-1},i=function(e){var n,r=this,i=r.manifestModel.getValue(),o=null===i?null:i.Period_asArray;return o?(n=t.call(r,o,e),null===n?null:n.bandwidth):null},o=function(t){var n,r=this,i=r.manifestModel.getValue(),o=null===i?null:i.Period_asArray;return o?(n=e.call(r,o,t),n):null},a=function(e){var t,n=this,i=n.manifestModel.getValue(),o=null===i?null:i.Period_asArray;return o?(t=r.call(this,o,e),t):null},s=function(e){if(null===e)return null;var t,n,r,i=e.RepSwitchList;return null===i||i.length<=0?null:(t=i.length,n=t-1,r=i[n],r)},u=function(e){if(null===e)return null;var t,n,r,i=e.BufferLevel;return null===i||i.length<=0?null:(t=i.length,n=t-1,r=i[n],r)},l=function(e){if(null===e)return null;var t,n,r=e.HttpList,i=null;if(null===r||r.length<=0)return null;t=r.length,n=t-1;while(n>=0){if(null!==r[n].responsecode){i=r[n];break}n-=1}return i},d=function(e){return null===e?[]:e.HttpList?e.HttpList:[]},c=function(e){if(null===e)return null;var t,n,r,i=e.DroppedFrames;return null===i||i.length<=0?null:(t=i.length,n=t-1,r=i[n],r)},f=function(e){if(null===e)return null;var t=e.PlaybackQuality;return null===t||t.length<=0?null:t[t.length-1]},h=function(e){if(null===e)return null;var t,n=e.DVRInfo,r=null;return null===n||n.length<=0?null:(t=n.length-1,r=n[t],r)},p=function(e){if(null===e)return null;var t,n,r,i=e.ManifestUpdate;return null===i||i.length<=0?null:(t=i.length,n=t-1,r=i[n],r)};return{manifestModel:void 0,manifestExt:void 0,getBandwidthForRepresentation:i,getIndexForRepresentation:o,getMaxIndexForBufferType:a,getCurrentRepresentationSwitch:s,getCurrentBufferLevel:u,getCurrentHttpRequest:l,getHttpRequests:d,getCurrentDroppedFrames:c,getCurrentPlaybackQuality:f,getCurrentDVRInfo:h,getCurrentManifestUpdate:p}},d.dependencies.DashMetricsExtensions.prototype={constructor:d.dependencies.DashMetricsExtensions},d.dependencies.DashParser=function(){"use strict";var e=31536e3,n=2592e3,r=86400,i=3600,o=60,a=60,s=1e3,u=/^P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,l=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})([0-9]{2}))?/,d=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,c=[{type:"duration",test:function(e){return u.test(e)},converter:function(t){var a=u.exec(t);return parseFloat(a[2]||0)*e+parseFloat(a[4]||0)*n+parseFloat(a[6]||0)*r+parseFloat(a[8]||0)*i+parseFloat(a[10]||0)*o+parseFloat(a[12]||0)}},{type:"datetime",test:function(e){return l.test(e)},converter:function(e){var t,n=l.exec(e);if(t=Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10),n[6]&&parseInt(n[6],10)||0,n[7]&&parseFloat(n[7])*s||0),n[9]&&n[10]){var r=parseInt(n[9],10)*a+parseInt(n[10],10);t+=("+"===n[8]?-1:1)*r*o*s}return new Date(t)}},{type:"numeric",test:function(e){return d.test(e)},converter:function(e){return parseFloat(e)}}],f=function(){var e,t,n,r;return r=[{name:"profiles",merge:!1},{name:"width",merge:!1},{name:"height",merge:!1},{name:"sar",merge:!1},{name:"frameRate",merge:!1},{name:"audioSamplingRate",merge:!1},{name:"mimeType",merge:!1},{name:"segmentProfiles",merge:!1},{name:"codecs",merge:!1},{name:"maximumSAPPeriod",merge:!1},{name:"startsWithSap",merge:!1},{name:"maxPlayoutRate",merge:!1},{name:"codingDependency",merge:!1},{name:"scanType",merge:!1},{name:"FramePacking",merge:!0},{name:"AudioChannelConfiguration",merge:!0},{name:"ContentProtection",merge:!0}],e={},e.name="AdaptationSet",e.isRoot=!1,e.isArray=!0,e.parent=null,e.children=[],e.properties=r,t={},t.name="Representation",t.isRoot=!1,t.isArray=!0,t.parent=e,t.children=[],t.properties=r,e.children.push(t),n={},n.name="SubRepresentation",n.isRoot=!1,n.isArray=!0,n.parent=t,n.children=[],n.properties=r,t.children.push(n),e},h=function(){var e,t,n,r;return r=[{name:"SegmentBase",merge:!0},{name:"SegmentTemplate",merge:!0},{name:"SegmentList",merge:!0}],e={},e.name="Period",e.isRoot=!1,e.isArray=!0,e.parent=null,e.children=[],e.properties=r,t={},t.name="AdaptationSet",t.isRoot=!1,t.isArray=!0,t.parent=e,t.children=[],t.properties=r,e.children.push(t),n={},n.name="Representation",n.isRoot=!1,n.isArray=!0,n.parent=t,n.children=[],n.properties=r,t.children.push(n),e},p=function(){var e,t,n,r,i;return i=[{name:"BaseURL",merge:!0,mergeFunction:function(e,t){var n;return n=0===t.indexOf("http://")?t:e+t,n}}],e={},e.name="mpd",e.isRoot=!0,e.isArray=!0,e.parent=null,e.children=[],e.properties=i,t={},t.name="Period",t.isRoot=!1,t.isArray=!0,t.parent=null,t.children=[],t.properties=i,e.children.push(t),n={},n.name="AdaptationSet",n.isRoot=!1,n.isArray=!0,n.parent=t,n.children=[],n.properties=i,t.children.push(n),r={},r.name="Representation",r.isRoot=!1,r.isArray=!0,r.parent=n,r.children=[],r.properties=i,n.children.push(r),e},m=function(){var e=[];return e.push(f()),e.push(h()),e.push(p()),e},g=function(e,n){var r,i=new v(c,"",!0),o=new y(m()),a=new Date,s=null,u=null;try{r=i.xml_str2json(e),s=new Date,r.hasOwnProperty("BaseURL")?(r.BaseURL=r.BaseURL_asArray[0],0!==r.BaseURL.toString().indexOf("http")&&(r.BaseURL=n+r.BaseURL)):r.BaseURL=n,o.run(r),u=new Date,this.debug.log("Parsing complete: ( xml2json: "+(s.getTime()-a.getTime())+"ms, objectiron: "+(u.getTime()-s.getTime())+"ms, total: "+(u.getTime()-a.getTime())/1e3+"s)")}catch(l){return t.reject(null)}return t.when(r)};return{debug:void 0,parse:g}},d.dependencies.DashParser.prototype={constructor:d.dependencies.DashParser},d.dependencies.FragmentExtensions=function(){"use strict";var e=function(e){var t,n,r,i,o,a,s=new DataView(e),u=0;while("tfdt"!==i&&u<s.byteLength){for(r=s.getUint32(u),u+=4,i="",o=0;o<4;o+=1)a=s.getInt8(u),i+=String.fromCharCode(a),u+=1;"moof"!==i&&"traf"!==i&&"tfdt"!==i&&(u+=r-8)}if(u===s.byteLength)throw"Error finding live offset.";return n=s.getUint8(u),this.debug.log("position: "+u),0===n?(u+=4,t=s.getUint32(u,!1)):(u+=r-16,t=g.Math.to64BitNumber(s.getUint32(u+4,!1),s.getUint32(u,!1))),{version:n,base_media_decode_time:t}},n=function(e){var n,r,i,o,a,s,u,l=new DataView(e),d=0;while("sidx"!==a&&d<l.byteLength){for(s=l.getUint32(d),d+=4,a="",o=0;o<4;o+=1)u=l.getInt8(d),a+=String.fromCharCode(u),d+=1;"moof"!==a&&"traf"!==a&&"sidx"!==a?d+=s-8:"sidx"===a&&(d-=8)}return n=l.getUint8(d+8),d+=12,r=l.getUint32(d+4,!1),d+=8,i=0===n?l.getUint32(d,!1):g.Math.to64BitNumber(l.getUint32(d+4,!1),l.getUint32(d,!1)),t.when({earliestPresentationTime:i,timescale:r})},r=function(n){var r,i,o,a=t.defer(),s=new XMLHttpRequest,u=!1;return r=n,s.onloadend=function(){u||(i="Error loading fragment: "+r,a.reject(i))},s.onload=function(){u=!0,o=e(s.response),a.resolve(o)},s.onerror=function(){i="Error loading fragment: "+r,a.reject(i)},s.open("GET",r),s.responseType="arraybuffer",s.send(null),a.promise};return{debug:void 0,loadFragment:r,parseTFDT:e,parseSIDX:n}},d.dependencies.FragmentExtensions.prototype={constructor:d.dependencies.FragmentExtensions},d.dependencies.TimelineConverter=function(){"use strict";var e=0,t=function(e,t,n,r){var i=NaN;return i=r?n&&t.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*e):t.availabilityStartTime,i},n=function(e,n,r){return t.call(this,e,n,r)},r=function(e,n,r){return t.call(this,e,n,r,!0)},i=function(e){var t,n="dynamic"===e.mpd.manifest.type,r=parseInt(this.uriQueryFragModel.getURIFragmentData().s,10);return n?(!isNaN(r)&&r>1262304e3&&(t=r-e.mpd.availabilityStartTime.getTime()/1e3,(t>e.liveEdge||t<e.liveEdge-e.mpd.timeShiftBufferDepth)&&(t=null)),t=t||e.liveEdge):t=!isNaN(r)&&r<e.duration&&r>=0?r:e.start,t},o=function(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime())/1e3},a=function(e,t){var n=t.presentationTimeOffset;return e-n},s=function(e,t){var n=t.presentationTimeOffset;return n+e},u=function(e,t){var n,r,i;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,r=e.presentationStartTime+n,i=new Date(e.availabilityStartTime.getTime()+1e3*r)),i},l=function(e,t,n){var r,i=this,o=i.calcSegmentAvailabilityRange(e,n);return t>=o.start&&t<=o.end?t:(r=Math.max(o.end-2*e.adaptation.period.mpd.manifest.minBufferTime,o.start),r)},d=function(t,n){var r,i,a=t.segmentDuration,s=0,u=t.adaptation.period.duration,l={start:s,end:u};return n?t.adaptation.period.mpd.isClientServerTimeSyncCompleted&&!isNaN(a)||!t.segmentAvailabilityRange?(r=t.adaptation.period.mpd.checkTime,i=o(new Date((new Date).getTime()+e),t.adaptation.period),s=Math.max(i-t.adaptation.period.mpd.timeShiftBufferDepth,0),r+=e/1e3,u=isNaN(r)?i:Math.min(r,i),l={start:s,end:u},l):t.segmentAvailabilityRange:l},c=function(e){var t=e.presentationTimeOffset;return-t};return{system:void 0,debug:void 0,uriQueryFragModel:void 0,setup:function(){},calcAvailabilityStartTimeFromPresentationTime:n,calcAvailabilityEndTimeFromPresentationTime:r,calcPresentationTimeFromWallTime:o,calcPresentationTimeFromMediaTime:a,calcPresentationStartTime:i,calcActualPresentationTime:l,calcMediaTimeFromPresentationTime:s,calcSegmentAvailabilityRange:d,calcWallTimeForSegment:u,calcMSETimeOffset:c}},d.dependencies.TimelineConverter.prototype={constructor:d.dependencies.TimelineConverter},d.vo.AdaptationSet=function(){"use strict";this.period=null,this.index=-1},d.vo.AdaptationSet.prototype={constructor:d.vo.AdaptationSet},d.vo.Event=function(){"use strict";this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},d.vo.Event.prototype={constructor:d.vo.Event},d.vo.EventStream=function(){"use strict";this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""},d.vo.EventStream.prototype={constructor:d.vo.EventStream},d.vo.Mpd=function(){"use strict";this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.checkTime=NaN,this.clientServerTimeShift=0,this.isClientServerTimeSyncCompleted=!1},d.vo.Mpd.prototype={constructor:d.vo.Mpd},d.vo.Period=function(){"use strict";this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.liveEdge=NaN},d.vo.Period.prototype={constructor:d.vo.Period},d.vo.Representation=function(){"use strict";this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0},d.vo.Representation.prototype={constructor:d.vo.Representation},d.vo.Segment=function(){"use strict";this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null},d.vo.Segment.prototype={constructor:d.vo.Segment},l=function(){"use strict";return{dependencies:{}}}(),l.dependencies.HlsStream=function(){"use strict";var e,n,r,i,o,a,s,u,l,d,f,p,m,g,y,v,_,E,b,T,S,I={stream:{responseType:"arraybuffer",contentType:"application/octet-stream"},text:{responseType:"text",contentType:"application/x-www-form-urlencoded"}},w=null,x=!1,A=!0,D=!1,R=null,M="und",C="und",N=-1,P=function(){D&&(this.debug.info("[Stream] Play."),this.videoModel.play())},L=function(){this.debug.info("[Stream] Pause."),this.videoModel.pause()},O=function(e){D&&(this.debug.info("[Stream] Seek: "+e),this.videoModel.setCurrentTime(e))},F=function(){this.debug.info("[Stream] <video> loadedmetadata event"),this.metricsModel.addMetaData(),this.metricsModel.addState("video","buffering",this.getVideoModel().getCurrentTime())},B=function(){this.debug.info("[Stream] <video> loadeddata event"),this.setAudioLang(M),this.enableSubtitles(x)},k=function(){this.debug.info("[Stream] <video> canplay event"),A&&this.videoModel.play()},U=function(){this.debug.info("[Stream] <video> playing event"),this.metricsModel.addState("video","playing",this.getVideoModel().getCurrentTime())},H=function(){this.debug.info("[Stream] <video> loadstart event")},j=function(){this.debug.info("[Stream] <video> play event"),this.metricsModel.addPlayList("video",(new Date).getTime(),this.videoModel.getCurrentTime(),"play")},K=function(){this.debug.info("[Stream] <video> ended event"),this.metricsModel.addState("video","stopped",this.videoModel.getCurrentTime(),1)},V=function(){this.debug.info("[Stream] <video> pause event"),this.metricsModel.addState("video","paused",this.videoModel.getCurrentTime()),this.metricsModel.addPlayList("video",(new Date).getTime(),this.videoModel.getCurrentTime(),"pause")},q=function(e){var t,n=e.target.error,r="[Stream] <video> error: ",i=null;if(-1!==n.code){switch(n.code){case 1:t=c.dependencies.ErrorHandler.prototype.MEDIA_ERR_ABORTED,r+="[HLS] The fetching process for the media resource was aborted by the user";break;case 2:t=c.dependencies.ErrorHandler.prototype.MEDIA_ERR_NETWORK,r+="[HLS] A network error has caused the user agent to stop fetching the media resource";break;case 3:t=c.dependencies.ErrorHandler.prototype.MEDIA_ERR_DECODE,r+="[HLS] An error has occurred in the decoding of the media resource";break;case 4:t=c.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_MANIFEST,r="[HLS] Failed to download manifest",i={url:w,status:0};break;case 5:t=c.dependencies.ErrorHandler.prototype.MEDIA_ERR_ENCRYPTED,r+="[HLS] The encrypted media stream could not be played";break}!0,this.errHandler.sendError(t,r,i)}},G=function(){this.debug.info("[Stream] <video> seeking event: "+this.videoModel.getCurrentTime()),this.metricsModel.addState("video","seeking",this.videoModel.getCurrentTime()),this.metricsModel.addPlayList("video",(new Date).getTime(),this.getVideoModel().getCurrentTime(),c.vo.metrics.PlayList.SEEK_START_REASON)},Y=function(){},z=function(){},W=function(){this.debug.info("[Stream] <video> timeupdate event: "+this.videoModel.getCurrentTime())},X=function(){this.debug.info("[Stream] <video> waiting event"),this.getVideoModel().isSeeking()||this.metricsModel.addState("video","buffering",this.getVideoModel().getCurrentTime())},$=function(){this.debug.info("[Stream] <video> durationchange event: "+this.videoModel.getDuration())},Q=function(){this.debug.info("[Stream] <video> ratechange event: "+this.videoModel.getPlaybackRate())},J=function(t){return e?e[t]:null},Z=function(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},ee=function(e){var t=String.fromCharCode.apply(null,new Uint16Array(e.buffer)),n=t.split("//");if(2!=n.length)throw"Invalid content key format";return n[1]},te=function(){var e=J("com.apple.fps.1_0");return e&&e.serverCertificate?h.decodeArray(e.serverCertificate):new Uint8Array(0)},ne=function(e,t,n){"string"==typeof t&&(t=Z(t));var r=0,i=new ArrayBuffer(e.byteLength+4+t.byteLength+4+n.byteLength),o=new DataView(i),a=new Uint8Array(i,r,e.byteLength);a.set(e),r+=a.byteLength,o.setUint32(r,t.byteLength,!0),r+=4;var s=new Uint16Array(i,r,t.length);s.set(t),r+=s.byteLength,o.setUint32(r,n.byteLength,!0),r+=4;var u=new Uint8Array(i,r,n.byteLength);return u.set(n),new Uint8Array(i,0,i.byteLength)},re=function(e,t,n){return"text"===t&&(n=String.fromCharCode.apply(null,n),n="spc="+h.encodeASCII(n)+"&assetId="+encodeURIComponent(e.contentId)),n},ie=function(e,t,n,r){var i=this,o=!0,a=new XMLHttpRequest;a.responseType=I[t].responseType,a.session=e,a.onload=function(){this.status<200||this.status>299||200===this.status&&4===this.readyState&&(i.debug.log("[DRM] Received license response"),o=!1,oe(this,t))},a.onerror=a.onloadend=function(){o?(o=!1,this.aborted||i.errHandler.sendError(c.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_LICENSER_ERROR,"License request failed",{url:n,status:this.status,error:this.response}),a=null):a=null},a.open("POST",n,!0),a.setRequestHeader("Content-Type",I[t].contentType),a.send(r)},oe=function(e,t){var n;"text"===t?(n=e.responseText.trim(),"<ckc>"===n.substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6)),n=h.decodeArray(n)):n=new Uint8Array(e.response),e.session.update(n)},ae=function(e){var t=e.target.error,n=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR,r="MediakeyError";if(t)switch(t.code){case 1:n=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_UNKNOWN,r="An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break;case 2:n=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_CLIENT,r="The Key System could not be installed or updated.";break;case 3:n=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_SERVICE,r="The message passed into update indicated an error from the license service.";break;case 4:n=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_OUTPUT,r="There is no available output device with the required characteristics for the content protection system.";break;case 5:n=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_HARDWARECHANGE,r+="A hardware configuration change caused a content protection error.";break;case 6:n=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_DOMAIN,r="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.";break;default:n=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_UNKNOWN,r="An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break}else n=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_UNKNOWN,r="An unspecified error occurred. This value is used for errors that don't match any of the other codes.";return t.systemCode&&(r+="  (System Code = "+e.systemCode+")"),new c.vo.protection.KeyError(n,r)},se=function(e){this.debug.info("[Stream] <video> needkey event",e);var t=this.videoModel.getElement(),n=ee(e.initData),r=te(),i=ne(e.initData,n,r),o=new WebKitMediaKeys("com.apple.fps.1_0");t.webkitSetMediaKeys(o);var a=t.webkitKeys.createSession("video/mp4",i);if(!a)throw"Could not create key session";a.error&&this.errHandler.sendError(c.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_NO_SESSION,"Failed to create key session",{code:a.error.code,systemCode:a.error.systemCode}),a.contentId=n,a.addEventListener("webkitkeymessage",b,!1),a.addEventListener("webkitkeyadded",T,!1),a.addEventListener("webkitkeyerror",S,!1)},ue=function(e){this.debug.info("[Stream] keymessage event",e);var t,n=e.target,r=e.message,i=null,o=J("com.apple.fps.1_0");o&&(o.serverURL&&"string"===typeof o.serverURL&&""!==o.serverURL?i=o.serverURL:o.laURL&&""!==o.laURL&&(i=o.laURL)),null!==i?(t=o&&o.requestType&&"text"===o.requestType?"text":"stream",r=re(n,t,r),ie.call(this,n,t,i,r)):this.errHandler.sendError(c.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_URL_LICENSER_UNKNOWN,"No license server URL specified")},le=function(e){this.debug.info("[Stream] keyadded event",e)},de=function(e){this.debug.info("[Stream] keyerror event",e);var t=ae(e);this.errHandler.sendError(t.code,t.msg)};return{system:void 0,videoModel:void 0,capabilities:void 0,debug:void 0,metricsExt:void 0,errHandler:void 0,metricsModel:void 0,eventBus:void 0,notify:void 0,setup:function(){o=j.bind(this),a=V.bind(this),s=q.bind(this),u=G.bind(this),l=Y.bind(this),m=z.bind(this),g=Q.bind(this),d=W.bind(this),f=X.bind(this),p=$.bind(this),r=F.bind(this),i=B.bind(this),y=k.bind(this),v=U.bind(this),_=H.bind(this),E=se.bind(this),b=ue.bind(this),T=le.bind(this),S=de.bind(this),n=K.bind(this)},load:function(e){w=e,N>=0&&(e+="#t="+N),this.videoModel.setSource(e)},setVideoModel:function(e){this.videoModel=e,this.videoModel.listen("play",o),this.videoModel.listen("pause",a),this.videoModel.listen("error",s),this.videoModel.listen("seeking",u),this.videoModel.listen("seeked",l),this.videoModel.listen("timeupdate",d),this.videoModel.listen("waiting",f),this.videoModel.listen("durationchange",p),this.videoModel.listen("progress",m),this.videoModel.listen("ratechange",g),this.videoModel.listen("loadedmetadata",r),this.videoModel.listen("loadeddata",i),this.videoModel.listen("ended",n),this.videoModel.listen("canplay",y),this.videoModel.listen("playing",v),this.videoModel.listen("loadstart",_),this.videoModel.listen("webkitneedkey",E)},reset:function(){return this.debug.info("[Stream] Reset"),L.call(this),R&&(R.aborted=!0,R.abort()),this.videoModel.unlisten("play",o),this.videoModel.unlisten("pause",a),this.videoModel.unlisten("error",s),this.videoModel.unlisten("seeking",u),this.videoModel.unlisten("seeked",l),this.videoModel.unlisten("timeupdate",d),this.videoModel.unlisten("waiting",f),this.videoModel.unlisten("durationchange",p),this.videoModel.unlisten("progress",m),this.videoModel.unlisten("ratechange",g),this.videoModel.unlisten("loadedmetadata",r),this.videoModel.unlisten("loadeddata",i),this.videoModel.unlisten("ended",n),this.videoModel.unlisten("canplay",y),this.videoModel.unlisten("playing",v),this.videoModel.unlisten("loadstart",_),this.videoModel.unlisten("webkitneedkey",E),this.debug.info("[Stream] Reset source"),this.videoModel.setSource(null),this.videoModel=null,t.when(!0)},setProtectionData:function(t){e=t},setInitialStartTime:function(e){var t=parseFloat(e);isNaN(t)||(N=t)},getAudioTracks:function(){var e=[],t=this.getVideoModel().getElement().audioTracks;if(0===t.length)return[];for(var n=0;n<t.length;n++)e.push({type:"audio",id:t[n].id,lang:t[n].language});return e},setAudioLang:function(e){this.debug.log("[Stream] Set audio lang: "+e);var t=this.getVideoModel().getElement().audioTracks;if(0!==t.length)for(var n=0;n<t.length;n++)e===t[n].language&&(t[n].enabled=!0)},setAudioTrack:function(e){this.debug.log("[Stream] Set audio track: "+e.lang);var t=this.getVideoModel().getElement().audioTracks;if(0!==t.length)for(var n=0;n<t.length;n++)e.id===t[n].id&&e.lang===t[n].language&&(t[n].enabled=!0)},getSelectedAudioTrack:function(){for(var e=this.getVideoModel().getElement().audioTracks,t=0;t<e.length;t++)if(e[t].enabled)return{type:"audio",id:e[t].id,lang:e[t].language};return null},getSubtitleTracks:function(){var e=[],t=this.getVideoModel().getElement().textTracks;if(0===t.length)return[];for(var n=0;n<t.length;n++)e.push({type:"text",id:t[n].label,lang:t[n].language});return e},enableSubtitles:function(e){x=e;var t=this.getVideoModel().getElement().textTracks;if(0!==t.length){e&&this.debug.log("[Stream] Set subtitle lang: "+C);for(var n=!1,r=0;r<t.length;r++)e&&C===t[r].language?(t[r].mode="showing",n=!0):t[r].mode="hidden";e&&!n&&(t[0].mode="showing")}},setSubtitleTrack:function(e){this.debug.log("[Stream] Set subtitle track: "+e.lang);var t=this.getVideoModel().getElement().textTracks;if(0!==t.length)for(var n=0;n<t.length;n++)e.id===t[n].label&&e.lang===t[n].language&&(t[n].mode="showing")},getSelectedSubtitleTrack:function(){for(var e=this.getVideoModel().getElement().textTracks,t=0;t<e.length;t++)if("showing"===e[t].mode)return{type:"text",id:e[t].label,lang:e[t].language};return null},initProtection:function(){},getVideoModel:function(){return this.videoModel},setAutoPlay:function(e){A=e},setDefaultAudioLang:function(e){M=e},setDefaultSubtitleLang:function(e){C=e},getAutoPlay:function(){return A},getDuration:function(){return this.videoModel.getDuration()},getStartTime:function(){return 0},getPeriodIndex:function(){return 0},getId:function(){return""},getPeriodInfo:function(){return null},getMinbufferTime:function(){return 0},getLiveDelay:function(){return-1},startEventController:function(){},resetEventController:function(){},setTrickModeSpeed:function(){},getTrickModeSpeed:function(){return-1},updateData:function(){},play:P,seek:O,pause:L}},l.dependencies.HlsStream.prototype={constructor:l.dependencies.HlsStream},u=function(){"use strict";return{dependencies:{}}}(),c.utils.copyMethods=function(e){var t=new e;for(var n in t.parent={},t)t.parent[n]=t[n];return t.setup=function(){for(var e in this.parent)void 0===this.parent[e]&&(this.parent[e]=this[e])},t},c.utils.DOMParser=function(){"use strict";var e=null,t=null;return{getAllSpecificNodes:function(e,t){var n,r,i=0,o=[];if(e&&(r=e.querySelectorAll(t),r))for(i=0;i<r.length;i++)n=this.getAttributeValue(r[i],"xml:id"),n&&(o[n]=r[i].attributes,r[i].childNodes.length>0&&(o[n].childNodes=r[i].childNodes));return o},getAttributeName:function(e,t){var n=[],r=null,i=0,o=null;if(e&&e.attributes&&(o=e.attributes,o))for(i=0;i<o.length;i++)r=o[i],r.value===t&&n.push(r.name);return n},getTextNodesIn:function(e){var t=[],n=0,r=null,i=null,o=null;if(e)for(r=e.childNodes,n=0;n<r.length;n++)i=r[n],o=i.nodeType,3==o?t.push(i):1!=o&&9!=o&&11!=o||(t=t.concat(this.getTextNodesIn(i)));return t},getAttributeValue:function(e,t,n){var r=null;return e&&"function"==typeof e.getAttribute&&(r=e.getAttribute(t),null===r&&n&&(r=e.getAttributeNS(n,t))),r},getChildNode:function(e,t){var n,r=0;if(e&&e.childNodes)for(r=0;r<e.childNodes.length;r++){if(n=e.childNodes[r],n.nodeName===t)return n;n=void 0}return n},getChildNodes:function(e,t){var n=0,r=[];if(e&&e.childNodes)for(n=0;n<e.childNodes.length;n++)e.childNodes[n].nodeName===t&&r.push(e.childNodes[n]);return r},createXmlTree:function(n){if(window.DOMParser)try{if(e||(e=new window.DOMParser),t=e.parseFromString(n,"text/xml"),t.getElementsByTagName("parsererror").length>0)throw new Error("Error parsing XML")}catch(r){t=null}return t}}},c.utils.isUTF16=function(e){var t,n,r,i,o=0,a=e&&e.length,s=null;if(a<2){if(e[0]>255)return!1}else{if(t=e[0],n=e[1],255===t&&254===n)return!0;if(254===t&&255===n)return!0;for(;o<a;o++){if(0===e[o]){s=o;break}if(e[o]>255)return!1}if(null===s)return!1;if(r=e[s+1],void 0!==r&&r>0&&r<128)return!0;if(i=e[s-1],void 0!==i&&i>0&&i<128)return!0}return!1},c.utils.ObjectIron=function(e){var t;t=[];for(var n=0,r=e.length;n<r;n+=1)e[n].isRoot?t.push("root"):t.push(e[n].name);var i=function(e,t){var n;if(null!==e&&null!==t)for(n in e)e.hasOwnProperty(n)&&(t.hasOwnProperty(n)||(t[n]=e[n]))},o=function(e,t,n){var r,o,a,s,u;if(null!==e&&0!==e.length)for(r=0,o=e.length;r<o;r+=1)a=e[r],t.hasOwnProperty(a.name)&&(n.hasOwnProperty(a.name)?a.merge&&(s=t[a.name],u=n[a.name],"object"===typeof s&&"object"===typeof u?i(s,u):null!==a.mergeFunction?n[a.name]=a.mergeFunction(s,u):n[a.name]=s+u):n[a.name]=t[a.name])},a=function(e,t){var n,r,i,s,u,l,d,c=e;if(e.transformFunc&&(t=e.transformFunc(t)),null===c.children||0===c.children.length)return t;for(n=0,r=c.children.length;n<r;n+=1){l=c.children[n];var f=null;if(t.hasOwnProperty(l.name))if(l.isArray)for(u=t[l.name+"_asArray"],i=0,s=u.length;i<s;i+=1)d=u[i],o(c.properties,t,d),f=a(l,d),t[l.name+"_asArray"][i]=f,t[l.name][i]=f;else d=t[l.name],o(c.properties,t,d),f=a(l,d),t[l.name]=f,t[l.name+"_asArray"]=[f]}return t},s=function(n){var r,i,o,u,l,d,c;if(null===n)return n;if("object"!==typeof n)return n;for(r=0,i=t.length;r<i;r+=1)"root"===t[r]&&(l=e[r],d=n,n=a(l,d));for(u in n)if(n.hasOwnProperty(u)){if(o=t.indexOf(u),-1!==o)if(l=e[o],l.isArray)for(c=n[u+"_asArray"],r=0,i=c.length;r<i;r+=1)d=c[r],n[u][r]=a(l,d),n[u+"_asArray"][r]=a(l,d);else d=n[u],n[u]=a(l,d),n[u+"_asArray"]=[a(l,d)];n[u]=s(n[u])}return n};return{run:s}},c.dependencies.protection.CommonEncryption={findCencContentProtection:function(e){var t,n=null,r=0;for(r=0;r<e.length;++r)t=e[r],"urn:mpeg:dash:mp4protection:2011"===t.schemeIdUri.toLowerCase()&&"cenc"===t.value.toLowerCase()&&(n=t);return n},getPSSHData:function(e){var t=8,n=new DataView(e),r=n.getUint8(t);return t+=20,r>0&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)},getPSSHForKeySystem:function(e,t){var n=c.dependencies.protection.CommonEncryption.parsePSSHList(t);return n.hasOwnProperty(e.uuid.toLowerCase())?n[e.uuid.toLowerCase()]:null},parseInitDataFromContentProtection:function(e){return e&&"pssh"in e?h.decodeArray(e.pssh.__text).buffer:null},readBytes:function(e,t,n){var r=0,i=0;for(i=0;i<n;i++)r<<=8,r+=e[t],t++;return r},parsePSSHList:function(e){if(null===e)return[];var t=new DataView(e),n=!1,r={},i=0;while(!n){var o,a,s,u,l=i;if(i>=t.buffer.byteLength)break;if(o=t.getUint32(i),a=i+o,i+=4,1886614376===t.getUint32(i))if(i+=4,s=t.getUint8(i),0===s||1===s){var d,c;for(i++,i+=3,u="",d=0;d<4;d++)c=t.getUint8(i+d).toString(16),u+=1===c.length?"0"+c:c;for(i+=4,u+="-",d=0;d<2;d++)c=t.getUint8(i+d).toString(16),u+=1===c.length?"0"+c:c;for(i+=2,u+="-",d=0;d<2;d++)c=t.getUint8(i+d).toString(16),u+=1===c.length?"0"+c:c;for(i+=2,u+="-",d=0;d<2;d++)c=t.getUint8(i+d).toString(16),u+=1===c.length?"0"+c:c;for(i+=2,u+="-",d=0;d<6;d++)c=t.getUint8(i+d).toString(16),u+=1===c.length?"0"+c:c;i+=6,u=u.toLowerCase(),t.getUint32(i),i+=4,r[u]=t.buffer.slice(l,a),i=a}else i=a;else i=a}return r},getKeySystemConfigurations:function(e,t,n){var r=[],i=[];return e&&i.push(new c.vo.protection.MediaCapability(e)),t&&r.push(new c.vo.protection.MediaCapability(t)),[new c.vo.protection.KeySystemConfiguration(r,i,"optional","temporary"===n?"optional":"required",[n])]}},ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return e&&e.buffer instanceof ArrayBuffer}),ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,t){var n,r,i,o=this.byteLength;return e=0|e||0,t=void 0===t?o:0|t,e<0&&(e=Math.max(e+o,0)),t<0&&(t=Math.max(t+o,0)),0===o||e>=o||e>=t?new ArrayBuffer(0):(n=Math.min(o-e,t-e),r=new ArrayBuffer(n),i=new Uint8Array(r),i.set(new Uint8Array(this,e,n)),r)}),c.dependencies.ProtectionController=function(){"use strict";var e,t,n,r=[],i=null,o=!1,a=function(e){var t=null,r=e.systemString;return n&&(t=r in n?n[r]:null),t},s=function(n,i){var o,a,s,u,l,d=this,f=[],h=[],p=0;if(this.keySystem){for(a=0;a<n.length;a++)if(this.keySystem===n[a].ks){o=n[a].ks.sessionType,f.push({ks:n[a].ks,configs:n[a].ks.getKeySystemConfigurations(t,e,o)}),h.push({schemeIdURI:n[a].ks.schemeIdURI,systemString:n[a].ks.systemString}),s={},s[c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE]=function(e){d.protectionModel.unsubscribe(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,s),e.error?(d.debug.log("[DRM] KeySystem Access Denied! -- "+e.error),d.eventBus.dispatchEvent({type:c.dependencies.ProtectionController.events.KEY_SYSTEM_SELECTED,error:"[DRM] KeySystem Access Denied! -- "+e.error})):(d.debug.log("[DRM] KeySystem Access Granted"),d.eventBus.dispatchEvent({type:c.dependencies.ProtectionController.events.KEY_SYSTEM_SELECTED,data:e.data}),d.createKeySession(n[a].initData,n[a].cdmData))},this.protectionModel.subscribe(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,s,void 0,!0),this.protectionModel.requestKeySystemAccess(f);break}}else if(void 0===this.keySystem){for(this.keySystem=null,r.push(n),p=0;p<n.length;p++)o=n[p].ks.sessionType,f.push({ks:n[p].ks,configs:n[p].ks.getKeySystemConfigurations(t,e,o)}),h.push({schemeIdURI:n[p].ks.schemeIdURI,systemString:n[p].ks.systemString});u={},u[c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE]=function(e){d.protectionModel&&(d.protectionModel.unsubscribe(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,u),e.error?(d.debug.log("[DRM] KeySystem Access Denied! -- "+e.error),d.keySystem=void 0,d.protectionModel.unsubscribe(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,u),i||d.eventBus.dispatchEvent({type:c.dependencies.ProtectionController.events.KEY_SYSTEM_SELECTED,error:"[DRM] KeySystem Access Denied! -- "+e.error}),d.notify(c.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new c.vo.Error(c.dependencies.ErrorHandler.prototype.MEDIA_KEYSYSERR_ACCESS_DENIED,"No KeySystem/CDM available",{keySystems:h}))):(l=e.data,d.debug.log("[DRM] KeySystem Access ("+l.keySystem.systemString+") Granted!  Selecting key system..."),d.protectionModel.selectKeySystem(l)))},u[c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED]=function(e){if(d.protectionModel)if(d.protectionModel.unsubscribe(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,u),e.error)d.keySystem=void 0,i||d.eventBus.dispatchEvent({type:c.dependencies.ProtectionController.events.KEY_SYSTEM_SELECTED,error:"[DRM] Error selecting key system! -- "+e.error}),d.notify(c.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new c.vo.Error(c.dependencies.ErrorHandler.prototype.MEDIA_KEYSYSERR_ACCESS_DENIED,"No KeySystem/CDM available",{keySystems:h}));else for(d.debug.log("[DRM] KeySystem selected => create key session"),d.keySystem=d.protectionModel.keySystem,d.notify(c.dependencies.ProtectionController.eventList.ENAME_KEY_SYSTEM_SELECTED,l),d.eventBus.dispatchEvent({type:c.dependencies.ProtectionController.events.KEY_SYSTEM_SELECTED,data:l}),p=0;p<r.length;p++)for(a=0;a<r[p].length;a++)if(d.keySystem===r[p][a].ks){d.createKeySession(r[p][a].initData,r[p][a].cdmData);break}},this.protectionModel.subscribe(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,u,void 0,!0),this.protectionModel.subscribe(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,u,void 0,!0),this.protectionModel.requestKeySystemAccess(f)}else r.push(n)},u=function(e){var t,n,r=this,o=null;t=e.data,n=t.messageType?t.messageType:"license-request",this.debug.log("[DRM] Key message: type = "+n),this.eventBus.dispatchEvent({type:c.dependencies.ProtectionController.events.KEY_MESSAGE,data:t});var s=t.message,u=t.sessionToken,l=a(this.keySystem),d=this.keySystem.systemString,f=this.protectionExt.getLicenseServer(this.keySystem,l,n),h=!0;if(s&&0!==s.byteLength)if(f){if(this.protectionExt.isClearKey(this.keySystem)){var p=this.protectionExt.processClearKeyLicenseRequest(l,s);if(p)return this.debug.log("[DRM] ClearKey license request handled by application!"),void this.protectionModel.updateKeySession(u,p)}i=new XMLHttpRequest;var m=null;if(l)if(l.serverURL){var g=l.serverURL;"string"===typeof g&&""!==g?m=g:"object"===typeof g&&g.hasOwnProperty(n)&&(m=g[n])}else l.laURL&&""!==l.laURL&&(m=l.laURL);if(null===m&&(m=this.keySystem.getLicenseServerURLFromInitData(c.dependencies.protection.CommonEncryption.getPSSHData(u.initData)),m||(m=e.data.defaultURL)),m=f.getServerURLFromMessage(m,s,n),this.debug.log("[DRM] Licenser server url: "+m),m){i.open(f.getHTTPMethod(n),m,!0),i.responseType=f.getResponseType(d,n),i.onload=function(){this.status<200||this.status>299||200===this.status&&4===this.readyState&&(r.debug.log("[DRM] Received license response"),h=!1,o=f.getLicenseMessage(this.response,d,n),null!==o?(h=!1,r.protectionModel.updateKeySession(u,o)):h=!0)},i.onerror=i.onloadend=function(){h?(h=!1,this.aborted||r.notify(c.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new c.vo.Error(c.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_LICENSER_ERROR,"License request failed",{url:m,status:this.status,error:this.response&&null!==this.response?f.getErrorResponse(this.response):""})),i=null):i=null};var y=function(e){var t;if(e)for(t in e)"authorization"===t.toLowerCase()&&(i.withCredentials=!0),i.setRequestHeader(t,e[t])};l&&y(l.httpRequestHeaders),y(this.keySystem.getRequestHeadersFromMessage(s)),l&&l.withCredentials&&(i.withCredentials=!0),this.debug.log("[DRM] Send license request");var v=this.keySystem.getLicenseRequestFromMessage(s);null===v&&this.notify(c.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new c.vo.Error(c.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_NO_CHALLENGE,"No license challenge from CDM key message")),i.send(v)}else this.notify(c.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new c.vo.Error(c.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_URL_LICENSER_UNKNOWN,"No license server URL specified"))}else this.debug.log("[DRM] License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+u.getSessionID());else this.notify(c.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new c.vo.Error(c.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_NO_CHALLENGE,"Empty key message from CDM"))},l=function(e){var t,n,r=this;if(r.debug.log("[DRM] onNeedKey, initDataType = "+e.data.initDataType),"cenc"===e.data.initDataType){if(t=e.data.initData,ArrayBuffer.isView(t)&&(t=t.buffer),this.keySystem)for(var i=c.dependencies.protection.CommonEncryption.getPSSHForKeySystem(this.keySystem,t),o=this.protectionModel.getAllInitData(),a=0;a<o.length;a++)if(this.protectionExt.initDataEquals(i,o[a]))return void this.debug.log("[DRM] Ignoring initData because we have already seen it!");n=this.protectionExt.getSupportedKeySystems(t),0!==n.length?s.call(this,n,!1):r.debug.log("[DRM] Received needkey event with initData, but we don't support any of the key systems!")}else r.debug.log("[DRM] Only 'cenc' initData is supported!  Ignoring initData of type: "+e.data.initDataType)},d=function(e){e.error?(this.debug.error("[DRM] Failed to set license server certificate"),this.notify(c.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new c.vo.Error(c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_SERVER_CERTIFICATE,"Failed to set server certificate",e.error))):this.debug.log("[DRM] License server certificate successfully updated")},f=function(e){e.error?(this.debug.error("[DRM] Failed to create key session"),this.notify(c.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new c.vo.Error(c.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_NO_SESSION,"Failed to create key session",e.error))):this.debug.log("[DRM] Session created.  SessionID = "+e.data.getSessionID())},h=function(){this.debug.log("[DRM] Key added")},p=function(e){this.notify(c.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new c.vo.Error(e.data.code,e.data.message,e.data.data))},m=function(e){e.error?this.debug.warn("[DRM] Failed to close session"):this.debug.log("[DRM] Session closed. SessionID = "+e.data)},g=function(e){e.error?this.debug.warn("[DRM] Failed to remove session"):this.debug.log("[DRM] Session removed. SessionID = "+e.data)},y=function(e){e.error?this.notify(c.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new c.vo.Error(e.error.code,e.error.message,e.error.data)):this.debug.log("[DRM] Key statuses changed. statuses = "+e.data)};return{system:void 0,debug:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,protectionExt:void 0,keySystem:void 0,setup:function(){this[c.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE]=u.bind(this),this[c.models.ProtectionModel.eventList.ENAME_NEED_KEY]=l.bind(this),this[c.models.ProtectionModel.eventList.ENAME_SERVER_CERTIFICATE_UPDATED]=d.bind(this),this[c.models.ProtectionModel.eventList.ENAME_KEY_ADDED]=h.bind(this),this[c.models.ProtectionModel.eventList.ENAME_KEY_ERROR]=p.bind(this),this[c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED]=f.bind(this),this[c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED]=m.bind(this),this[c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_REMOVED]=g.bind(this),this[c.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED]=y.bind(this),this.protectionExt.getKeySystems(),this.protectionModel=this.system.getObject("protectionModel"),this.protectionModel.init(),this.eventBus=this.system.getObject("eventBus"),this.protectionModel.subscribe(c.models.ProtectionModel.eventList.ENAME_SERVER_CERTIFICATE_UPDATED,this),this.protectionModel.subscribe(c.models.ProtectionModel.eventList.ENAME_KEY_ADDED,this),this.protectionModel.subscribe(c.models.ProtectionModel.eventList.ENAME_KEY_ERROR,this),this.protectionModel.subscribe(c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,this),this.protectionModel.subscribe(c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED,this),this.protectionModel.subscribe(c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_REMOVED,this),this.protectionModel.subscribe(c.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,this),this.protectionModel.subscribe(c.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED,this)},init:function(n,r,i){var a;o||(this.debug.log("[DRM] Initialize ProtectionController ("+i+", "+r+")"),e=r,t=i,a=this.protectionExt.getSupportedKeySystemsFromContentProtection(n),a&&a.length>0&&s.call(this,a,!0),o=!0)},addEventListener:function(e,t){this.eventBus.addEventListener(e,t)},removeEventListener:function(e,t){this.eventBus.removeEventListener(e,t)},teardown:function(){var e=this;i&&(i.aborted=!0,i.abort()),this.protectionModel.unsubscribe(c.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,this),this.protectionModel.unsubscribe(c.models.ProtectionModel.eventList.ENAME_SERVER_CERTIFICATE_UPDATED,this),this.protectionModel.unsubscribe(c.models.ProtectionModel.eventList.ENAME_KEY_ADDED,this),this.protectionModel.unsubscribe(c.models.ProtectionModel.eventList.ENAME_KEY_ERROR,this),this.protectionModel.unsubscribe(c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,this),this.protectionModel.unsubscribe(c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED,this),this.protectionModel.unsubscribe(c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_REMOVED,this),this.protectionModel.unsubscribe(c.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,this),this.protectionModel.unsubscribe(c.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED,this),this.keySystem=void 0,this.setMediaElement(null).then(function(){e.protectionModel.teardown(),e.protectionModel=void 0})},createKeySession:function(e,t){var n,r=c.dependencies.protection.CommonEncryption.getPSSHForKeySystem(this.keySystem,e),i=0;if(r){for(this.debug.log("[DRM] create key session for initData:",String.fromCharCode.apply(null,new Uint8Array(r))),n=this.protectionModel.getAllInitData(),i=0;i<n.length;i++)if(this.protectionExt.initDataEquals(r,n[i]))return void this.debug.log("[DRM] Ignoring initData because we have already seen it!");try{this.protectionModel.createKeySession(r,this.keySystem.sessionType,t)}catch(o){this.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,null,{reason:"Create key session raised en exception",error:new c.vo.Error(o.code,o.name,o.message)})}}else this.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,null,{reason:"needkey/encrypted event contains no initData corresponding to that key system "+this.keySystem.systemString,error:null})},loadKeySession:function(e){this.protectionModel.loadKeySession(e)},removeKeySession:function(e){this.protectionModel.removeKeySession(e)},closeKeySession:function(e){this.protectionModel.closeKeySession(e)},setServerCertificate:function(e){this.protectionModel.setServerCertificate(e)},setMediaElement:function(e){return e?this.protectionModel.subscribe(c.models.ProtectionModel.eventList.ENAME_NEED_KEY,this):null===e&&this.protectionModel.unsubscribe(c.models.ProtectionModel.eventList.ENAME_NEED_KEY,this),this.protectionModel.setMediaElement(e)},setSessionType:function(e){this.keysystem&&(this.keySystem.sessionType=e)},setProtectionData:function(e){n=e,this.protectionExt.init(e)}}},c.dependencies.ProtectionController.events={KEY_SYSTEM_SELECTED:"keySystemSelected",SERVER_CERTIFICATE_UPDATED:"serverCertificateUpdated",KEY_ADDED:"keyAdded",KEY_SESSION_CREATED:"keySessionCreated",KEY_SESSION_REMOVED:"keySessionRemoved",KEY_SESSION_CLOSED:"keySessionClosed",KEY_STATUSES_CHANGED:"keyStatusesChanged",KEY_MESSAGE:"keyMessage",LICENSE_REQUEST_COMPLETE:"licenseRequestComplete"},c.dependencies.ProtectionController.eventList={ENAME_PROTECTION_ERROR:"protectionError",ENAME_KEY_SYSTEM_SELECTED:"keySystemSelected"},c.dependencies.ProtectionController.prototype={constructor:c.dependencies.ProtectionController},c.dependencies.ProtectionExtensions=function(){"use strict";this.system=void 0,this.debug=void 0,this.keySystems=[],this.clearkeyKeySystem=void 0},c.dependencies.ProtectionExtensions.prototype={constructor:c.dependencies.ProtectionExtensions,setup:function(){var e;e=this.system.getObject("ksPlayReady"),this.keySystems.push(e),e=this.system.getObject("ksWidevine"),this.keySystems.push(e),e=this.system.getObject("ksClearKey"),this.keySystems.push(e),this.clearkeyKeySystem=e},init:function(e){for(var t=function(t){var n=null;return e&&(n=t in e?e[t]:null),n},n=0;n<this.keySystems.length;n++){var r=this.keySystems[n];r.init(t(r.systemString))}},getKeySystems:function(){return this.keySystems},getKeySystemBySystemString:function(e){for(var t=0;t<this.keySystems.length;t++)if(this.keySystems[t].systemString===e)return this.keySystems[t];return null},isClearKey:function(e){return e===this.clearkeyKeySystem},initDataEquals:function(e,t){if(e.byteLength===t.byteLength){for(var n=new Uint8Array(e),r=new Uint8Array(t),i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}return!1},getSupportedKeySystemsFromContentProtection:function(e){var t,n,r,i,o=[];if(e)for(r=0;r<this.keySystems.length;++r)for(n=this.keySystems[r],i=0;i<e.length;++i)if(t=e[i],t.schemeIdUri.toLowerCase()===n.schemeIdURI){var a=n.getInitData(t);a&&o.push({ks:this.keySystems[r],initData:a,cdmData:n.getCDMData()})}return o},getSupportedKeySystems:function(e){var t,n=[],r=c.dependencies.protection.CommonEncryption.parsePSSHList(e);for(this.debug.log("[DRM] Get supported key systems from init data"),t=0;t<this.keySystems.length;++t)this.keySystems[t].uuid in r&&n.push({ks:this.keySystems[t],initData:r[this.keySystems[t].uuid],cdmData:this.keySystems[t].getCDMData()});return n},getLicenseServer:function(e,t,n){if("license-release"===n||"individualization-request"==n)return null;var r=null;return t&&t.hasOwnProperty("drmtoday")?r=this.system.getObject("serverDRMToday"):"com.widevine.alpha"===e.systemString?r=this.system.getObject("serverWidevine"):"com.microsoft.playready"===e.systemString?r=this.system.getObject("serverPlayReady"):"org.w3.clearkey"===e.systemString&&(r=this.system.getObject("serverClearKey")),r},processClearKeyLicenseRequest:function(e,t){try{return c.dependencies.protection.KeySystem_ClearKey.getClearKeysFromProtectionData(e,t)}catch(n){return this.log("Failed to retrieve clearkeys from ProtectionData"),null}},autoSelectKeySystem:function(e,t,n,r){if(this.debug.log("[DRM] Auto select key system: "),this.debug.log("[DRM] ---- video codec = "+n),this.debug.log("[DRM] ---- audio codec = "+r),0===e.length)throw new Error("DRM system for this content not supported by the player!");var i=[],o=[];n&&o.push(new c.vo.protection.MediaCapability(n)),r&&i.push(new c.vo.protection.MediaCapability(r));for(var a=new c.vo.protection.KeySystemConfiguration(i,o),s=[],u=0;u<e.length;u++)s.push({ks:e[u].ks,configs:[a]});var l=this;(function(e){var t={};t[c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE]=function(t){if(e.protectionModel.unsubscribe(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,this),t.error)l.debug.log(t.error),e.notify(c.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new c.vo.Error(c.dependencies.ErrorHandler.prototype.MEDIA_KEYSYSERR_ACCESS_DENIED,"[DRM] KeySystem Access Denied! -- "+t.error,null));else{var n=t.data;l.debug.log("[DRM] KeySystem Access Granted ("+n.keySystem.systemString+")!"),e.selectKeySystem(n)}},e.protectionModel.subscribe(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,t),e.requestKeySystemAccess(s)})(t)}},c.models.ProtectionModel_01b=function(){var e,n=null,r=null,i=[],o=[],a=function(){var t=this;return{handleEvent:function(n){var a=null;switch(n.type){case r.needkey:var s=ArrayBuffer.isView(n.initData)?n.initData.buffer:n.initData;t.notify(c.models.ProtectionModel.eventList.ENAME_NEED_KEY,new c.vo.protection.NeedKey(s,"cenc"));break;case r.keyerror:if(a=u(o,n.sessionId),a||(a=u(i,n.sessionId)),a){var l=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR,d="MediakeyError";switch(n.errorCode.code){case 1:l=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_UNKNOWN,d+="An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break;case 2:l=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_CLIENT,d+="The Key System could not be installed or updated.";break;case 3:l=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_SERVICE,d+="The message passed into update indicated an error from the license service.";break;case 4:l=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_OUTPUT,d+="There is no available output device with the required characteristics for the content protection system.";break;case 5:l=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_HARDWARECHANGE,d+="A hardware configuration change caused a content protection error.";break;case 6:l=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_DOMAIN,d+="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.";break}n.systemCode&&(d+="  (System Code = "+n.systemCode+")"),t.notify(c.models.ProtectionModel.eventList.ENAME_KEY_ERROR,new c.vo.protection.KeyError(l,d))}else t.log("No session token found for key error");break;case r.keyadded:a=u(o,n.sessionId),a||(a=u(i,n.sessionId)),a?t.notify(c.models.ProtectionModel.eventList.ENAME_KEY_ADDED,a):t.log("No session token found for key added");break;case r.keymessage:if(e=null!==n.sessionId&&void 0!==n.sessionId,e?(a=u(o,n.sessionId),!a&&i.length>0&&(a=i.shift(),o.push(a),a.sessionID=n.sessionId)):i.length>0&&(a=i.shift(),o.push(a),0!==i.length&&t.errHandler.mediaKeyMessageError("Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!")),a){var f=ArrayBuffer.isView(n.message)?n.message.buffer:n.message;a.keyMessage=f,t.notify(c.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,new c.vo.protection.KeyMessage(a,f,n.defaultURL))}else t.log("No session token found for key message");break}}}},s=null,u=function(e,t){if(t&&e){for(var n=e.length,r=0;r<n;r++)if(e[r].sessionID===t)return e[r];return null}return null},l=function(){n.removeEventListener(r.keyerror,s),n.removeEventListener(r.needkey,s),n.removeEventListener(r.keymessage,s),n.removeEventListener(r.keyadded,s)};return{system:void 0,log:void 0,errHandler:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,protectionExt:void 0,keySystem:null,setup:function(){s=a.call(this)},init:function(){var e=document.createElement("video");r=c.models.ProtectionModel_01b.detect(e)},teardown:function(){n&&l();for(var e=0;e<o.length;e++)this.closeKeySession(o[e]);this.notify(c.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE)},getAllInitData:function(){var e,t=[];for(e=0;e<i.length;e++)t.push(i[e].initData);for(e=0;e<o.length;e++)t.push(o[e].initData);return t},requestKeySystemAccess:function(e){var t=n;t||(t=document.createElement("video"));for(var r=!1,i=0;i<e.length;i++)for(var o=e[i].ks.systemString,a=e[i].configs,s=null,u=null,l=0;l<a.length;l++){var d=a[l].videoCapabilities;if(d&&0!==d.length){u=[];for(var f=0;f<d.length;f++)""!==t.canPlayType(d[f].contentType,o)&&u.push(d[f])}if(!(!s&&!u||s&&0===s.length||u&&0===u.length)){r=!0;var h=new c.vo.protection.KeySystemConfiguration(s,u),p=this.protectionExt.getKeySystemBySystemString(o),m=new c.vo.protection.KeySystemAccess(p,h);this.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,m);break}}r||this.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,null,"Key system access denied! -- No valid audio/video content configurations detected!")},selectKeySystem:function(e){this.keySystem=e.keySystem,this.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED)},setMediaElement:function(e){if(n!==e)return n&&l(),n=e,n&&(n.addEventListener(r.keyerror,s),n.addEventListener(r.needkey,s),n.addEventListener(r.keymessage,s),n.addEventListener(r.keyadded,s),this.notify(c.models.ProtectionModel.eventList.ENAME_VIDEO_ELEMENT_SELECTED)),t.when()},createKeySession:function(t){if(!this.keySystem)throw new Error("Can not create sessions until you have selected a key system");if(e||0===o.length){var a={sessionID:null,initData:t,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return i.push(a),n[r.generateKeyRequest](this.keySystem.systemString,new Uint8Array(t)),a}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var i=e.sessionID;if(this.protectionExt.isClearKey(this.keySystem))for(var o=0;o<t.keyPairs.length;o++)n[r.addKey](this.keySystem.systemString,t.keyPairs[o].key,t.keyPairs[o].keyID,i);else n[r.addKey](this.keySystem.systemString,new Uint8Array(t),new Uint8Array(e.initData),i)},closeKeySession:function(e){n[r.cancelKeyRequest](this.keySystem.systemString,e.sessionID)},setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},checkIfEncrypted:function(){}}},c.models.ProtectionModel_01b.prototype={constructor:c.models.ProtectionModel_01b},c.models.ProtectionModel_01b.APIs=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],c.models.ProtectionModel_01b.detect=function(e){for(var t=c.models.ProtectionModel_01b.APIs,n=0;n<t.length;n++){var r=t[n];if("function"===typeof e[r.generateKeyRequest]&&("function"===typeof e[r.addKey]&&"function"===typeof e[r.cancelKeyRequest]))return r}return null},c.models.ProtectionModel_3Feb2014=function(){var e=null,n=null,r=null,i=null,o=null,a=[],s=function(){var e=this;return{handleEvent:function(t){switch(t.type){case o.needkey:if(t.initData){var n=ArrayBuffer.isView(t.initData)?t.initData.buffer:t.initData;e.notify(c.models.ProtectionModel.eventList.ENAME_NEED_KEY,new c.vo.protection.NeedKey(n,"cenc"))}break}}}},u=null,l=function(){var t=function(){e.removeEventListener("loadedmetadata",i),e[o.setMediaKeys](n),this.notify(c.models.ProtectionModel.eventList.ENAME_VIDEO_ELEMENT_SELECTED)};e.readyState>=1?t.call(this):(i=t.bind(this),e.addEventListener("loadedmetadata",i))},d=function(e){var t=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR,n="MediakeyError";if(e.errorCode)switch(e.errorCode.code){case 1:t=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_UNKNOWN,n="An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break;case 2:t=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_CLIENT,n="The Key System could not be installed or updated.";break;case 3:t=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_SERVICE,n="The message passed into update indicated an error from the license service.";break;case 4:t=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_OUTPUT,n="There is no available output device with the required characteristics for the content protection system.";break;case 5:t=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_HARDWARECHANGE,n+="A hardware configuration change caused a content protection error.";break;case 6:t=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_DOMAIN,n="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.";break;default:t=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_UNKNOWN,n="An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break}else t=c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_UNKNOWN,n="An unspecified error occurred. This value is used for errors that don't match any of the other codes.";return e.systemCode&&(n+="  (System Code = "+e.systemCode+")"),new c.vo.protection.KeyError(t,n)},f=function(e,t){var n=this;return{session:e,initData:t,handleEvent:function(e){switch(e.type){case o.error:n.notify(c.models.ProtectionModel.eventList.ENAME_KEY_ERROR,d(e));break;case o.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;n.notify(c.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,new c.vo.protection.KeyMessage(this,t,e.destinationURL));break;case o.ready:n.notify(c.models.ProtectionModel.eventList.ENAME_KEY_ADDED,this);break;case o.close:n.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED,this.getSessionID());break}},getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}}};return{system:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,protectionExt:void 0,debug:void 0,keySystem:null,setup:function(){u=s.call(this)},init:function(){var e=document.createElement("video");o=c.models.ProtectionModel_3Feb2014.detect(e)},teardown:function(){try{for(var t=0;t<a.length;t++)this.closeKeySession(a[t]);e&&e.removeEventListener(o.needkey,u),this.notify(c.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE)}catch(n){this.notify(c.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE,null,"Error tearing down key sessions and MediaKeys! -- "+n.message)}},getAllInitData:function(){for(var e=[],t=0;t<a.length;t++)e.push(a[t].initData);return e},requestKeySystemAccess:function(e){for(var t=!1,n=0;n<e.length;n++){var r=e[n].ks.systemString,i=e[n].configs,a=null,s=null;this.debug.log("[DRM][3Feb2014] Request access for key system "+r);for(var u=0;u<i.length;u++){var l=i[u].audioCapabilities,d=i[u].videoCapabilities;if(l&&0!==l.length){a=[];for(var f=0;f<l.length;f++)window[o.MediaKeys].isTypeSupported(r,l[f].contentType)&&a.push(l[f])}if(d&&0!==d.length){s=[];for(var h=0;h<d.length;h++)window[o.MediaKeys].isTypeSupported(r,d[h].contentType)&&s.push(d[h])}if(!(!a&&!s||a&&0===a.length||s&&0===s.length)){t=!0;var p=new c.vo.protection.KeySystemConfiguration(a,s),m=this.protectionExt.getKeySystemBySystemString(r),g=new c.vo.protection.KeySystemAccess(m,p);this.debug.log("[DRM][3Feb2014] configuration supported = audio:"+JSON.stringify(a)+", video:"+JSON.stringify(s)),this.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,g);break}}}t||this.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,null,"[DRM][3Feb2014] Key system access denied! -- No valid audio/video content configurations detected!")},selectKeySystem:function(t){this.debug.log("[DRM][3Feb2014] Select key system "+t.keySystem.systemString);try{n=t.mediaKeys=new window[o.MediaKeys](t.keySystem.systemString),this.keySystem=t.keySystem,r=t,e&&l.call(this),this.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED)}catch(i){this.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,null,"Error selecting keys system ("+this.keySystem.systemString+")! Could not create MediaKeys -- TODO")}},setMediaElement:function(r){if(e!==r)return e&&(e.removeEventListener(o.needkey,u),e.removeEventListener("loadedmetadata",i)),e=r,e&&n&&l.call(this),t.when()},createKeySession:function(e,t,i){if(!this.keySystem||!n||!r)throw new Error("Can not create sessions until you have selected a key system");this.debug.log("[DRM][3Feb2014] Create key session");var s=r.ksConfiguration.videoCapabilities[0].contentType,u=n.createSession(s,new Uint8Array(e),i?new Uint8Array(i):null),l=f.call(this,u,e);u.addEventListener(o.error,l),u.addEventListener(o.message,l),u.addEventListener(o.ready,l),u.addEventListener(o.close,l),a.push(l),this.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,l)},updateKeySession:function(e,t){var n=e.session;this.debug.log("[DRM][3Feb2014] Update key session"),this.protectionExt.isClearKey(this.keySystem)?n.update(new Uint8Array(t.toJWK())):n.update(new Uint8Array(t))},closeKeySession:function(e){this.debug.log("[DRM][3Feb2014] Close key session, token = "+e.session.sessionId);var t=e.session;t.removeEventListener(o.error,e),t.removeEventListener(o.message,e),t.removeEventListener(o.ready,e),t.removeEventListener(o.close,e);for(var n=0;n<a.length;n++)if(a[n]===e){a.splice(n,1);break}t[o.release]()},setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},checkIfEncrypted:function(){}}},c.models.ProtectionModel_3Feb2014.APIs=[{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"},{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"}],c.models.ProtectionModel_3Feb2014.detect=function(e){for(var t=c.models.ProtectionModel_3Feb2014.APIs,n=0;n<t.length;n++){var r=t[n];if("function"===typeof e[r.setMediaKeys]&&"function"===typeof window[r.MediaKeys])return r}return null},c.models.ProtectionModel_3Feb2014.prototype={constructor:c.models.ProtectionModel_3Feb2014},c.models.ProtectionModel_21Jan2015=function(){var e=null,n=null,r=null,i=[],o=function(e){var t,n="[";for(t=0;t<e.length;t++)n+="0x"+e[t].toString(16),t<e.length-1&&(n+=",");return n+="]",n},a=function(e,t){var n=this;void 0!==navigator.requestMediaKeySystemAccess&&"function"===typeof navigator.requestMediaKeySystemAccess?function(t){var r=e[t].ks,i=e[t].configs;n.debug.log("[DRM][PM_21Jan2015] requestMediaKeySystemAccess: "+r.systemString),navigator.requestMediaKeySystemAccess(r.systemString,i).then(function(e){var t="function"===typeof e.getConfiguration?e.getConfiguration():null,i=new c.vo.protection.KeySystemAccess(r,t);i.mksa=e,n.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,i)}).catch(function(){++t<e.length?a.call(n,e,t):n.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,null,"Key system access denied!")})}(t):this.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,null,"Insecure origins are not allowed")},s=function(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()},u=function(){var e=this;return{session:null,handleEvent:function(t){switch(t.type){case"encrypted":if(e.debug.log("[DRM][PM_21Jan2015] 'encrypted' event"),t.initData){var n=ArrayBuffer.isView(t.initData)?t.initData.buffer:t.initData;e.notify(c.models.ProtectionModel.eventList.ENAME_NEED_KEY,new c.vo.protection.NeedKey(n,"cenc"))}break;case"waitingforkey":e.debug.log("[DRM][PM_21Jan2015] 'waitingforkey' event"),null!==this.session&&this.session.usable&&(this.session.usable=!1,e.notify(c.models.ProtectionModel.eventList.ENAME_KEY_ERROR,new c.vo.protection.KeyError(c.dependencies.ErrorHandler.prototype.MEDIA_ERR_ENCRYPTED,"Media is encrypted and no valid key is available")));break}}}},l=function(e){for(var t=0;t<i.length;t++)if(i[t]===e){i.splice(t,1);break}},d=function(t,n,a){var s=this,u=function(e,t){for(var n=0;n<i.length;n++)if(i[n].session===e){i[n].usable=t;break}},d={session:t,initData:n,usable:!1,handleEvent:function(t){switch(t.type){case"keystatuseschange":s.notify(c.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED,this),t.target.keyStatuses.forEach(function(){var n,i;switch(arguments&&arguments.length>0&&(arguments[0]&&("string"===typeof arguments[0]?n=arguments[0]:i=arguments[0]),arguments[1]&&("string"===typeof arguments[1]?n=arguments[1]:i=arguments[1])),s.debug.log("[DRM][PM_21Jan2015] status = "+n+" for KID "+o(new Uint8Array(i))),n){case"expired":u(t.target,!1),s.notify(c.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED,null,new c.vo.Error(c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_EXPIRED,"License has expired",null));break;case"output-restricted":u(t.target,!1),s.notify(c.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED,null,new c.vo.Error(c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_OUTPUT,"There is no available output device with the required characteristics for the content protection system",null));break;case"usable":u(t.target,!0),e.addEventListener("waitingforkey",r);break;default:s.notify(c.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED,{status:n,keyId:i})}});break;case"message":s.debug.log("[DRM][PM_21Jan2015] 'message' event: ",t);var n=ArrayBuffer.isView(t.message)?t.message.buffer:t.message;s.notify(c.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,new c.vo.protection.KeyMessage(this,n,void 0,t.messageType));break}},getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return this.session.expiration},getKeyStatuses:function(){return this.session.keyStatuses},getSessionType:function(){return a}};return t.addEventListener("keystatuseschange",d),t.addEventListener("message",d),t.closed.then(function(){l(d),s.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED,d.getSessionID())}),i.push(d),d};return{system:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,protectionExt:void 0,keySystem:null,config:null,debug:null,setup:function(){r=u.call(this)},init:function(){r.session=null},teardown:function(){var e,t,r,o=i.length,a=this;if(this.debug.log("[DRM][PM_21Jan2015] Teardown"),this.config.getParam("Protection.licensePersistence","boolean",!1)){for(t=0;t<i.length;t++)e=i[t],e.usable||(i.splice(t,1),t--);this.notify(c.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE)}else{var u=function(e){a.debug.log("[DRM][PM_21Jan2015] Session closed"),l(e),t>=o-1&&(n=null,clearTimeout(r),a.notify(c.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE))},d=function(){for(t=0;t<o;t++)u(i[t])};if(0===o)return n=null,void this.notify(c.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE);for(t=0;t<o;t++)e=i[t],function(t){a.debug.log("[DRM][PM_21Jan2015] Close session "+e.getSessionID()),e.session.closed.then(function(){u(t)}),s(e).catch(function(){u(t)})}(e);r=setTimeout(d,1e3)}},getAllInitData:function(){for(var e=[],t=0;t<i.length;t++)e.push(i[t].initData);return e},requestKeySystemAccess:function(e){a.call(this,e,0)},selectKeySystem:function(t){var i=this;if(i.debug.log("[DRM][PM_21Jan2015] Select key system, create new MediaKeys"),null!==n)return i.debug.log("[DRM][PM_21Jan2015] MediaKeys already created"),void i.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED);t.mksa.createMediaKeys().then(function(o){i.keySystem=t.keySystem,n=o,e&&e.setMediaKeys(n).then(function(){var t=i.keySystem.getServerCertificate();t?i.setServerCertificate(t).then(function(){i.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED),e.addEventListener("encrypted",r)}):(i.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED),e.addEventListener("encrypted",r))})}).catch(function(){i.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,null,"Error selecting keys system ("+t.keySystem.systemString+")! Could not create MediaKeys -- TODO")})},setMediaElement:function(i){var o=this,a=t.defer();return e===i?(a.resolve(),a.promise):(e&&(e.removeEventListener("encrypted",r),e.removeEventListener("waitingforkey",r),e.setMediaKeys?e.setMediaKeys(null).then(function(){o.debug.log("[DRM][PM_21Jan2015] Successfully detached MediaKeys from video element"),a.resolve()},function(e){o.debug.error("[DRM][PM_21Jan2015] Failed to detach MediaKeys from video element: "+e),a.resolve()}):a.resolve()),e=i,e&&n&&e.setMediaKeys&&(e.addEventListener("encrypted",r),e.setMediaKeys(n)),a.promise)},setServerCertificate:function(e){if(!this.keySystem||!n)throw new Error("Can not set server certificate until you have selected a key system");this.debug.log("[DRM][PM_21Jan2015] Set server certificate");var r=this,i=t.defer();return n.setServerCertificate(e).then(function(){r.notify(c.models.ProtectionModel.eventList.ENAME_SERVER_CERTIFICATE_UPDATED),i.resolve()}).catch(function(e){r.notify(c.models.ProtectionModel.eventList.ENAME_SERVER_CERTIFICATE_UPDATED,null,"Error updating server certificate -- "+e.name),i.reject()}),i.promise},createKeySession:function(e,t){if(!this.keySystem||!n)throw new Error("Can not create sessions until you have selected a key system");this.debug.log("[DRM][PM_21Jan2015] Create key session, type = "+t),this.debug.log("[DRM][PM_21Jan2015] initData = "+String.fromCharCode.apply(null,new Uint8Array(e)));var r=n.createSession(t),i=d.call(this,r,e,t),o=this;r.generateRequest("cenc",e).then(function(){o.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,i)}).catch(function(e){l(i),o.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,null,{reason:"Failed to generate key request",error:new c.vo.Error(e.code,e.name,e.message)})})},updateKeySession:function(e,t){var n=e.session,i=this;i.debug.log("[DRM][PM_21Jan2015] Update key session. SessionID = "+n.sessionId),this.protectionExt.isClearKey(this.keySystem)&&(t=t.toJWK()),n.update(t).then(function(){r.session=e}).catch(function(e){i.notify(c.models.ProtectionModel.eventList.ENAME_KEY_ERROR,new c.vo.protection.KeyError(c.dependencies.ErrorHandler.prototype.MEDIA_KEYERR,"Error while providing license to the CDM",e))})},loadKeySession:function(e){if(!this.keySystem||!n)throw new Error("Can not load sessions until you have selected a key system");this.debug.log("[DRM][PM_21Jan2015] Load key session. SessionID = "+e);var t=n.createSession(),r=this;t.load(e).then(function(n){if(n){var i=d.call(this,t);r.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,i)}else r.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,null,{reason:"Failed to load session "+e,error:null})}).catch(function(t){r.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,{reason:"Failed to load session "+e,error:new c.vo.Error(t.code,t.name,t.message)})})},removeKeySession:function(e){var t=e.session;this.debug.log("[DRM][PM_21Jan2015] Remove key session. SessionID = "+e.getSessionID());var n=this;t.remove().then(function(){n.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_REMOVED,e.getSessionID())},function(t){n.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_REMOVED,null,"Error removing session ("+e.getSessionID()+"). "+t.name)})},closeKeySession:function(e){this.debug.log("[DRM][PM_21Jan2015] Close key session. SessionID = "+e.getSessionID());var t=this;s(e).catch(function(n){l(e),t.notify(c.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED,null,"Error closing session ("+e.getSessionID()+") "+n.name)})},checkIfEncrypted:function(){}}},c.models.ProtectionModel_21Jan2015.detect=function(e){return void 0!==e.onencrypted&&void 0!==e.mediaKeys&&!window.MSMediaKeys},c.models.ProtectionModel_21Jan2015.prototype={constructor:c.models.ProtectionModel_21Jan2015},c.dependencies.protection.KeySystem=function(){},c.dependencies.protection.KeySystem_Access=function(){},c.dependencies.protection.KeySystem_Access.prototype={constructor:c.dependencies.protection.KeySystem_Access},c.dependencies.protection.KeySystem_ClearKey=function(){"use strict";var e="org.w3.clearkey",t="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b";return{system:void 0,schemeIdURI:"urn:uuid:"+t,systemString:e,uuid:t,sessionType:"temporary",init:function(e){e},getInitData:c.dependencies.protection.CommonEncryption.parseInitDataFromContentProtection,getKeySystemConfigurations:c.dependencies.protection.CommonEncryption.getKeySystemConfigurations,getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getServerCertificate:function(){return null}}},c.dependencies.protection.KeySystem_ClearKey.prototype={constructor:c.dependencies.protection.KeySystem_ClearKey},c.dependencies.protection.KeySystem_ClearKey.getClearKeysFromProtectionData=function(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],o=0;o<r.kids.length;o++){var a=r.kids[o],s=e.clearkeys.hasOwnProperty(a)?e.clearkeys[a]:null;if(!s)throw new Error("[DRM] ClearKey keyID ("+a+") is not known!");i.push(new c.vo.protection.KeyPair(a,s))}n=new c.vo.protection.ClearKeyKeySet(i)}return n},c.dependencies.protection.KeySystem_PlayReady=function(){"use strict";var e,t="com.microsoft.playready",n="9a04f079-9840-4286-ab92-e65be0885f95",r='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>',i=function(e){var t,n,r,i,o={},a=e instanceof ArrayBuffer?e:e.buffer,s=c.utils.isUTF16(new Uint8Array(a))?new Uint16Array(a):new Uint8Array(a),u=0;for(t=String.fromCharCode.apply(null,s),n=this.domParser.createXmlTree(t),r=n.getElementsByTagName("name"),i=n.getElementsByTagName("value"),u=0;u<r.length;u+=1)o[r[u].childNodes[0].nodeValue]=i[u].childNodes[0].nodeValue;return o.hasOwnProperty("Content")&&(o["Content-Type"]=o.Content,delete o.Content),o.hasOwnProperty("Content-Type")||(o["Content-Type"]="text/xml; charset=utf-8"),o},o=function(e){var t,n,r,i=null,o=e instanceof ArrayBuffer?e:e.buffer,a=c.utils.isUTF16(new Uint8Array(o))?new Uint16Array(o):new Uint8Array(o);return t=String.fromCharCode.apply(null,a),n=this.domParser.createXmlTree(t),n.getElementsByTagName("Challenge")[0]&&(r=n.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue,r&&(i=h.decode(r))),i||(i=t),i},a=function(e){if(e){var t,n,r,i,o,a,s,u=new DataView(e),l=u.getUint16(4,!0),d=6,c=0;for(c=0;c<l;c++)if(t=u.getUint16(d,!0),d+=2,n=u.getUint16(d,!0),d+=2,1===t){if(r=e.slice(d,d+n),i=String.fromCharCode.apply(null,new Uint16Array(r)),o=this.domParser.createXmlTree(i),o.getElementsByTagName("LA_URL")[0]&&(a=o.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue,a))return a;if(o.getElementsByTagName("LUI_URL")[0]&&(s=o.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue,s))return s}else d+=n}return null},s=function(e){var t,n,r,i,o,a=0,s=new Uint8Array([112,115,115,104,0,0,0,0]),u=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),l=null;if("pssh"in e)return c.dependencies.protection.CommonEncryption.parseInitDataFromContentProtection(e);if("pro"in e)l=h.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;l=h.decodeArray(e.prheader.__text)}return t=l.length,n=4+s.length+u.length+4+t,r=new ArrayBuffer(n),i=new Uint8Array(r),o=new DataView(r),o.setUint32(a,n),a+=4,i.set(s,a),a+=s.length,i.set(u,a),a+=u.length,o.setUint32(a,t),a+=4,i.set(l,a),a+=t,i.buffer},u=function(){var t,n,i,o;if(e&&e.cdmData){for(t=[],o=0;o<e.cdmData.length;++o)t.push(e.cdmData.charCodeAt(o)),t.push(0);for(t=String.fromCharCode.apply(null,t),t=h.encode(t),n=r.replace("%CUSTOMDATA%",t),i=[],o=0;o<n.length;++o)i.push(n.charCodeAt(o)),i.push(0);return new Uint8Array(i).buffer}return null};return{schemeIdURI:"urn:uuid:"+n,systemString:t,uuid:n,notify:void 0,subscribe:void 0,unsubscribe:void 0,domParser:void 0,sessionType:"temporary",init:function(t){t&&(e=t,e.sessionType&&(this.sessionType=e.sessionType))},getInitData:s,getKeySystemConfigurations:c.dependencies.protection.CommonEncryption.getKeySystemConfigurations,getRequestHeadersFromMessage:i,getLicenseRequestFromMessage:o,getLicenseServerURLFromInitData:a,getCDMData:u,getServerCertificate:function(){return null}}},c.dependencies.protection.KeySystem_PlayReady.prototype={constructor:c.dependencies.protection.KeySystem_PlayReady},c.dependencies.protection.KeySystem_Widevine=function(){"use strict";var e,t="com.widevine.alpha",n="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",r=function(e){return c.dependencies.protection.CommonEncryption.parseInitDataFromContentProtection(e)},i=function(t,n,r){var i=c.dependencies.protection.CommonEncryption.getKeySystemConfigurations(t,n,r);return e&&(e.audioRobustness&&i[0].audioCapabilities.length>0&&(i[0].audioCapabilities[0].robustness=e.audioRobustness),e.videoRobustness&&i[0].videoCapabilities.length>0&&(i[0].videoCapabilities[0].robustness=e.videoRobustness)),i},o=function(){return e&&e.serverCertificate&&e.serverCertificate.length>0?h.decodeArray(e.serverCertificate).buffer:null};return{schemeIdURI:"urn:uuid:"+n,systemString:t,uuid:n,sessionType:"temporary",init:function(t){e=t,e&&e.sessionType&&(this.sessionType=e.sessionType)},getInitData:r,getKeySystemConfigurations:i,getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getServerCertificate:o}},c.dependencies.protection.KeySystem_Widevine.prototype={constructor:c.dependencies.protection.KeySystem_Widevine},c.dependencies.protection.servers.ClearKey=function(){"use strict";return{getServerURLFromMessage:function(e,t){var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),r=0;for(e+="/?",r=0;r<n.kids.length;r++)e+=n.kids[r]+"&";return e=e.substring(0,e.length-1),e},getHTTPMethod:function(){return"GET"},getResponseType:function(){return"json"},getLicenseMessage:function(e){var t,n,r,i,o=[];if(!e.hasOwnProperty("keys"))return null;for(t=0;t<e.keys.length;t++)n=e.keys[t],r=n.kid.replace(/=/g,""),i=n.k.replace(/=/g,""),o.push(new c.vo.protection.KeyPair(r,i));return new c.vo.protection.ClearKeyKeySet(o)},getErrorResponse:function(e){return{code:0,name:"UnknownError",message:String.fromCharCode.apply(null,new Uint8Array(e))}}}},c.dependencies.protection.servers.ClearKey.prototype={constructor:c.dependencies.protection.servers.ClearKey},c.dependencies.protection.servers.DRMToday=function(){"use strict";var e={"com.widevine.alpha":{responseType:"json",getLicenseMessage:function(e){return h.decodeArray(e.license)},getErrorResponse:function(e){return e}},"com.microsoft.playready":{responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}};return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(t){return e[t].responseType},getLicenseMessage:function(t,n){return e[n].getLicenseMessage(t)},getErrorResponse:function(t,n){return{code:0,name:"UnknownError",message:e[n].getErrorResponse(t)}}}},c.dependencies.protection.servers.DRMToday.prototype={constructor:c.dependencies.protection.servers.DRMToday},c.dependencies.protection.servers.LicenseServer=function(){},c.dependencies.protection.servers.PlayReady=function(){"use strict";var e=function(e){var t="",n=0,r=0,i=0,o=0,a=new Uint8Array(e);a.length>=3&&239===a[0]&&187===a[1]&&191===a[2]&&(n=3);while(n<a.length)if(r=a[n],r<128)t+=String.fromCharCode(r),n++;else if(r>191&&r<224){if(n+1>=a.length)throw"UTF-8 Decode failed. Two byte character was truncated.";i=a[n+1],t+=String.fromCharCode((31&r)<<6|63&i),n+=2}else{if(n+2>=a.length)throw"UTF-8 Decode failed. Multi byte character was truncated.";i=a[n+1],o=a[n+2],t+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&o),n+=3}return t},t=function(t){var n=e(t),r=this.domParser.createXmlTree(n),i=r?this.domParser.getChildNode(r,"soap:Envelope"):null,o=i?this.domParser.getChildNode(i,"soap:Body"):null,a=o?this.domParser.getChildNode(o,"soap:Fault"):null;return a?null:t},n=function(t){var n=e(t),r=this.domParser.createXmlTree(n),i=r?this.domParser.getChildNode(r,"soap:Envelope"):null,o=i?this.domParser.getChildNode(i,"soap:Body"):null,a=o?this.domParser.getChildNode(o,"soap:Fault"):null,s=a?this.domParser.getChildNode(a,"detail"):null,u=s?this.domParser.getChildNode(s,"Exception"):null,l=null,d="",c="",f="",h=-1,p=-1;return null===a?{code:0,name:"UnknownError",message:String.fromCharCode.apply(null,new Uint8Array(t))}:(l=this.domParser.getChildNode(a,"faultstring").firstChild,d=l?l.nodeValue:null,null!==u&&(l=this.domParser.getChildNode(u,"StatusCode"),c=l?l.firstChild.nodeValue:null,l=this.domParser.getChildNode(u,"Message"),f=l?l.firstChild.nodeValue:null,h=f?f.lastIndexOf("[")+1:-1,p=f?f.indexOf("]"):-1),{code:c,name:d,message:f?f.substring(h,p):""})};return{domParser:void 0,getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return t.call(this,e)},getErrorResponse:function(e){return n.call(this,e)}}},c.dependencies.protection.servers.PlayReady.prototype={constructor:c.dependencies.protection.servers.PlayReady},c.dependencies.protection.servers.Widevine=function(){"use strict";return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return{code:0,name:"UnknownError",message:String.fromCharCode.apply(null,new Uint8Array(e))}}}},c.dependencies.protection.servers.Widevine.prototype={constructor:c.dependencies.protection.servers.Widevine},c.vo.protection.ClearKeyKeySet=function(e,t){if(t&&"persistent"!==t&&"temporary"!==t)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=t,this.toJWK=function(){var e,t=this.keyPairs.length,n={keys:[]};for(e=0;e<t;e++){var r={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(r)}this.type&&(n.type=this.type);var i=JSON.stringify(n),o=i.length,a=new ArrayBuffer(o),s=new Uint8Array(a);for(e=0;e<o;e++)s[e]=i.charCodeAt(e);return a}},c.vo.protection.ClearKeyKeySet.prototype={constructor:c.vo.protection.ClearKeyKeySet},c.vo.protection.KeyError=function(e,t,n){"use strict";this.code=e,this.message=t,this.data=n},c.vo.protection.KeyError.prototype={constructor:c.vo.protection.KeyError},c.vo.protection.KeyMessage=function(e,t,n,r){"use strict";this.sessionToken=e,this.message=t,this.defaultURL=n,this.messageType=r},c.vo.protection.KeyMessage.prototype={constructor:c.vo.protection.KeyMessage},c.vo.protection.KeyPair=function(e,t){"use strict";this.keyID=e,this.key=t},c.vo.protection.KeyPair.prototype={constructor:c.vo.protection.KeyPair},c.vo.protection.KeySystemAccess=function(e,t){this.keySystem=e,this.ksConfiguration=t},c.vo.protection.KeySystemAccess.prototype={constructor:c.vo.protection.KeySystemAccess},c.vo.protection.KeySystemConfiguration=function(e,t,n,r,i){this.initDataTypes=["cenc"],this.audioCapabilities=e,this.videoCapabilities=t,this.distinctiveIdentifier=n,this.persistentState=r,this.sessionTypes=i},c.vo.protection.KeySystemConfiguration.prototype={constructor:c.vo.protection.KeySystemConfiguration},c.vo.protection.LicenseRequestComplete=function(e,t){"use strict";this.message=e,this.requestData=t},c.vo.protection.LicenseRequestComplete.prototype={constructor:c.vo.protection.LicenseRequestComplete},c.vo.protection.MediaCapability=function(e,t){this.contentType=e,this.robustness=t},c.vo.protection.MediaCapability.prototype={constructor:c.vo.protection.MediaCapability},c.vo.protection.NeedKey=function(e,t){this.initData=e,this.initDataType=t},c.vo.protection.NeedKey.prototype={constructor:c.vo.protection.NeedKey},c.vo.protection.ProtectionData=function(e,t,n,r){this.laURL=e,this.httpRequestHeaders=t,this.bearerToken=n,this.clearkeys=r},c.vo.protection.ProtectionData.prototype={constructor:c.vo.protection.ProtectionData},c.models.SessionToken=function(){},c.models.SessionToken.prototype={initData:null,getSessionID:function(){return""},getExpirationTime:function(){return NaN},getKeyStatuses:function(){return null}},l.dependencies.AES=function(){this.init=function(e){this._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],this._precompute.call(this);var t,n,r,i,o,a=this._tables[0][4],s=this._tables[1],u=e.length,l=1;if(4!==u&&6!==u&&8!==u)throw new Error("Invalid aes key size="+u);for(i=e.slice(0),o=[],this._key=[i,o],t=u;t<4*u+28;t++)r=i[t-1],(t%u===0||8===u&&t%u===4)&&(r=a[r>>>24]<<24^a[r>>16&255]<<16^a[r>>8&255]<<8^a[255&r],t%u===0&&(r=r<<8^r>>>24^l<<24,l=l<<1^283*(l>>7))),i[t]=i[t-u]^r;for(n=0;t;n++,t--)r=i[3&n?t:t-4],o[n]=t<=4||n<4?r:s[0][a[r>>>24]]^s[1][a[r>>16&255]]^s[2][a[r>>8&255]]^s[3][a[255&r]]},this._precompute=function(){var e,t,n,r,i,o,a,s,u,l=this._tables[0],d=this._tables[1],c=l[4],f=d[4],h=[],p=[];for(e=0;e<256;e++)p[(h[e]=e<<1^283*(e>>7))^e]=e;for(t=n=0;!c[t];t^=r||1,n=p[n]||1)for(a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^255&a^99,c[t]=a,f[a]=t,o=h[i=h[r=h[t]]],u=16843009*o^65537*i^257*r^16843008*t,s=257*h[a]^16843008*a,e=0;e<4;e++)l[e][t]=s=s<<24^s>>>8,d[e][a]=u=u<<24^u>>>8;for(e=0;e<5;e++)l[e]=l[e].slice(0),d[e]=d[e].slice(0)},this.decrypt=function(e,t,n,r,i,o){var a,s,u,l,d=this._key[1],c=e^d[0],f=r^d[1],h=n^d[2],p=t^d[3],m=d.length/4-2,g=4,y=this._tables[1],v=y[0],_=y[1],E=y[2],b=y[3],T=y[4];for(l=0;l<m;l++)a=v[c>>>24]^_[f>>16&255]^E[h>>8&255]^b[255&p]^d[g],s=v[f>>>24]^_[h>>16&255]^E[p>>8&255]^b[255&c]^d[g+1],u=v[h>>>24]^_[p>>16&255]^E[c>>8&255]^b[255&f]^d[g+2],p=v[p>>>24]^_[c>>16&255]^E[f>>8&255]^b[255&h]^d[g+3],g+=4,c=a,f=s,h=u;for(l=0;l<4;l++)i[(3&-l)+o]=T[c>>>24]<<24^T[f>>16&255]<<16^T[h>>8&255]<<8^T[255&p]^d[g++],a=c,c=f,f=h,h=p,p=a}},l.dependencies.AES.prototype={constructor:l.dependencies.AES},l.dependencies.AES128Decrypter=function(e,t){"use strict";this.key=e,this.iv=t,this.ntoh=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},this.doDecrypt=function(e,t,n){var r,i,o,a,s,u,d,c,f,h=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),p=new l.dependencies.AES,m=new Uint8Array(e.byteLength),g=new Int32Array(m.buffer);for(p.init(Array.prototype.slice.call(t)),r=~~n[0],i=~~n[1],o=~~n[2],a=~~n[3],f=0;f<h.length;f+=4)s=~~this.ntoh(h[f]),u=~~this.ntoh(h[f+1]),d=~~this.ntoh(h[f+2]),c=~~this.ntoh(h[f+3]),p.decrypt(s,u,d,c,g,f),g[f]=this.ntoh(g[f]^r),g[f+1]=this.ntoh(g[f+1]^i),g[f+2]=this.ntoh(g[f+2]^o),g[f+3]=this.ntoh(g[f+3]^a),r=s,i=u,o=d,a=c;return m},this.localDecrypt=function(e,t,n,r){var i=this.doDecrypt(e,t,n);r.set(i,e.byteOffset)},this.decrypt=function(e){var t=32e3,n=new Int32Array(e),r=new Uint8Array(e.byteLength),i=0,o=this.key,a=this.iv;for(this.localDecrypt(n.subarray(i,i+t),o,a,r),i=t;i<n.length;i+=t)a=new Uint32Array([this.ntoh(n[i-4]),this.ntoh(n[i-3]),this.ntoh(n[i-2]),this.ntoh(n[i-1])]),this.localDecrypt(n.subarray(i,i+t),o,a,r);return r}},l.dependencies.AES128Decrypter.prototype={constructor:l.dependencies.AES128Decrypter},l.dependencies.HlsDemux=function(){"use strict";var e=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(e,0),n.set(t,e.byteLength),n},t=[1,5,6],n=1,r=[],i=[],o=-1,a=-1,s=function(e,t,n,r){var i,o=t;while(o<e.length){if(i=new E.ts.TsPacket,i.parse(e.subarray(o,o+E.ts.TsPacket.prototype.TS_PACKET_SIZE)),i.getPid()===n&&(void 0===r||i.getPusi()===r))return{offset:o,packet:i};o+=E.ts.TsPacket.prototype.TS_PACKET_SIZE}return null},u=function(e){var t=new E.ts.TsPacket;return t.checkSyncWord(e.subarray(0,E.ts.TsPacket.prototype.TS_PACKET_SIZE))},l=function(e){var t=s.call(this,e,0,E.ts.TsPacket.prototype.PAT_PID);if(null===t)return null;var n=new E.si.PAT;return n.parse(t.packet.getPayload()),n},d=function(e,t){var n=s.call(this,e,0,t);if(null===n)return null;var r=new E.si.PMT;return r.parse(n.packet.getPayload()),r},f=function(e){var t,n,i,s,u=null,l=null;if(t=new E.ts.TsPacket,t.parse(e),!t.hasAdaptationFieldOnly()&&(n=t.getPid(),i=r[n],i))if(t.getPusi())if(s=new E.pes.PesPacket,s.parse(t.getPayload()),u=new c.vo.Mp4Track.Sample,u.cts=s.getPts().getValue(),u.dts=null!==s.getDts()?s.getDts().getValue():u.cts,u.size=0,u.duration=0,u.subSamples=[],-1===o&&(o=u.dts),u.mpegTimestamp=u.cts,u.dts-=o,u.cts-=o,u.dts+=a,u.cts+=a,l=s.getPayload(),"audio"===i.type&&(u.flags=16777216),"video"===i.type&&-1!==i.streamType.search("H.264")&&(u.flags=E.h264.isIDR(l)?33554432:16842752),u.subSamples.push(l),u.dts>=0)i.samples.push(u);else{var d=Math.abs(u.dts)/9e4;if(d>10)throw{name:c.dependencies.ErrorHandler.prototype.HLS_DEMUX_ERROR,message:"A/V desynchronization ("+Math.round(d)+" s.)"}}else i.samples.length>0&&(u=i.samples[i.samples.length-1],u.subSamples.push(t.getPayload()))},h=function(e){var t,n,r,i,o=0,a=0;if(0!==e.samples.length){for(r=0;r<e.samples.length;r++){for(n=0,t=e.samples[r],i=0;i<t.subSamples.length;i++)n+=t.subSamples[i].length;r>0&&(e.samples[r-1].duration=e.samples[r].dts-e.samples[r-1].dts),t.size=n,o+=n}for(e.samples[e.samples.length-1].duration=e.samples[e.samples.length-2].duration,e.data=new Uint8Array(o),e.dataCTS=[],r=0;r<e.samples.length;r++)for(t=e.samples[r],-1!==e.streamType.search("ADTS")&&(e.dataCTS[a]=t.cts),i=0;i<t.subSamples.length;i++)e.data.set(t.subSamples[i],a),a+=t.subSamples[i].length;if(-1!==e.streamType.search("H.264")&&p.call(this,e),-1!==e.streamType.search("ADTS")&&m.call(this,e),e.previousCts&&e.previousDuration){t=e.samples[0];var s=t.cts-(e.previousCts+e.previousDuration);s>0&&s<e.timescale&&(t.cts-=s,t.dts-=s,t.duration+=s,this.debug.log("[HlsDemux]["+e.type+"] Patch sample duration, cts = "+(t.cts/9e4).toFixed(3)+", duration = "+(t.duration/9e4).toFixed(3)))}}},p=function(e){var n,r,i,o,a,s,u;for(i=0,a=0,s=0;s<e.samples.length;s++){for(n=e.samples[s],n.nalus=E.h264.parseNALUs(e.data.subarray(a,a+n.size)),u=0;u<n.nalus.length;u++)r=n.nalus[u],-1!==t.indexOf(r.type)?(r.offset+=a,i+=4+n.nalus[u].size):(n.nalus.splice(u,1),u--);a+=n.size}for(o=new Uint8Array(i),a=0,s=0;s<e.samples.length;s++)for(n=e.samples[s],n.size=0,u=0;u<n.nalus.length;u++)r=n.nalus[u],o[a++]=(4278190080&r.size)>>24,o[a++]=(16711680&r.size)>>16,o[a++]=(65280&r.size)>>8,o[a++]=255&r.size,o.set(e.data.subarray(r.offset,r.offset+r.size),a),a+=r.size,n.size+=4+r.size;e.data=o},m=function(e){var t,n,r,i,o,a,s,u,l=[];for(t=E.aac.parseADTS(e.data,e.dataCTS),n=0,u=0;u<t.length;u++)n+=t[u].length;for(i=new Uint8Array(n),a=e.samples[0].cts,s=1024*e.timescale/e.samplingRate,r=0,u=0;u<t.length;u++)o=new c.vo.Mp4Track.Sample,o.cts=o.dts=t[u].cts?t[u].cts:a,o.size=t[u].length,o.duration=s,o.flags=16777216,0===l.length&&(o.mpegTimestamp=e.samples[0].mpegTimestamp),l.push(o),a=o.cts+s,u>0&&(l[u-1].duration=l[u].cts-l[u-1].cts,l[u-1].duration>s&&this.debug.log("[HlsDemux]["+e.type+"] Patch sample duration, cts = "+(l[u-1].cts/9e4).toFixed(3)+", duration = "+(l[u-1].duration/9e4).toFixed(3))),i.set(e.data.subarray(t[u].offset,t[u].offset+t[u].length),r),r+=t[u].length;e.data=i,e.samples=l},g=function(e){var t="",n=0,r=0;for(n=0;n<e.length;n++)r=e[n].toString(16),r.length<2&&(r="0"+r),t+=r;return t},y=function(){this.debug.log("[HlsDemux] Reset"),n=1,r=[],i=[],o=-1,a=-1},v=function(t,n){var r,i,o,a,u,l,d,f;if(r=s.call(this,t,0,n.pid,!0),null===r)throw{name:c.dependencies.ErrorHandler.prototype.HLS_DEMUX_ERROR,message:"No packets for track "+n.type};if(i=new E.pes.PesPacket,i.parse(r.packet.getPayload()),o=i.getPayload(),-1!==n.streamType.search("H.264")){a=E.h264.getSequenceHeader(o);while(null===a)r=s.call(this,t,r.offset+E.ts.TsPacket.prototype.TS_PACKET_SIZE,n.pid,!1),o=e(o,r.packet.getPayload()),a=E.h264.getSequenceHeader(o);n.codecPrivateData=g(a.bytes),n.codecs="avc1.",u=/00000001[0-9]7/.exec(n.codecPrivateData),u&&u[0]&&(n.codecs+=n.codecPrivateData.substr(n.codecPrivateData.indexOf(u[0])+10,6)),n.width=a.width,n.height=a.height,this.debug.log("[HlsDemux] width  = "+n.width),this.debug.log("[HlsDemux] height = "+n.height)}-1!==n.streamType.search("AAC")&&(l=E.aac.getAudioSpecificConfig(o),d=(248&l[0])>>3,n.codecPrivateData=g(l),n.codecs="mp4a.40."+d,f=(7&l[0])<<1|(128&l[1])>>7,n.samplingRate=E.aac.SAMPLING_FREQUENCY[f],n.channels=(120&l[1])>>3,n.bandwidth=0),this.debug.log("[HlsDemux] codecs = "+n.codecs),this.debug.log("[HlsDemux] codecPrivateData = "+n.codecPrivateData)},_=function(e){var t,o,a,s,f,h,p=0;if(!u.call(this,e))throw{name:c.dependencies.ErrorHandler.prototype.HLS_INVALID_PACKET_ERROR,message:"Failed to demux, packet is invalid, missing SYNC byte"};if(t=l.call(this,e),null===t)throw{name:c.dependencies.ErrorHandler.prototype.HLS_DEMUX_ERROR,message:"Failed to demux, missing signalization (PAT)"};if(o=d.call(this,e,t.getPmtPid()),null===o)throw{name:c.dependencies.ErrorHandler.prototype.HLS_DEMUX_ERROR,message:"Failed to demux, missing signalization (PMT)"};for(p=0;p<o.m_listOfComponents.length;p++){if(a=o.m_listOfComponents[p],s=a.m_elementary_PID,f=r[s],!f){if(f=new c.vo.Mp4Track,f.timescale=E.Pts.prototype.SYSTEM_CLOCK_FREQUENCY,f.pid=s,h=o.gStreamTypes[a.m_stream_type],null===h){this.debug.log("[HlsDemux] Stream Type "+a.m_stream_type+" unknown!");continue}switch(f.streamType=h.name,h.value){case 224:f.type="video";break;case 192:f.type="audio";break;case 252:f.type="data";break;default:f.type="und"}}if(v.call(this,e,f),""===f.codecs)throw{name:c.dependencies.ErrorHandler.prototype.HLS_DEMUX_ERROR,message:"Failed to get codec information for track "+f.type};r[s]||(f.trackId=n,n++,this.debug.log("[HlsDemux] Add track: type = "+f.type+", PID = "+f.pid+", trackId = "+f.trackId),i.push(f),r[s]=f)}return i},b=function(e,t){var n,r,o=0,s=-1;for(-1===a&&(a=9e4*t.startTime,this.debug.log("[HlsDemux] Media start time = "+a+" ("+t.startTime+")")),this.debug.log("[HlsDemux] Demux chunk, size = "+e.length+", nb packets = "+Math.round(e.length/E.ts.TsPacket.prototype.TS_PACKET_SIZE)),_.call(this,e),o=0;o<i.length;o++)n=i[o],n.samples.length>0&&(n.previousCts=n.samples[n.samples.length-1].cts,n.previousDuration=n.samples[n.samples.length-1].duration),i[o].samples=[],i[o].data=null;o=0;while(o<e.length){if(o+E.ts.TsPacket.prototype.TS_PACKET_SIZE>e.length){this.debug.log("[HlsDemux] Demux chunk, residual bytes = "+(e.length-o));break}f.call(this,e.subarray(o,o+E.ts.TsPacket.prototype.TS_PACKET_SIZE)),o+=E.ts.TsPacket.prototype.TS_PACKET_SIZE}for(o=0;o<i.length;o++)if(n=i[o],0!==n.samples.length&&(h.call(this,n),this.debug.log("[HlsDemux]["+n.type+"] Demux: 1st PTS = "+n.samples[0].dts+" ("+n.samples[0].dts/9e4+")"),s=Math.max(s,n.samples[0].dts),r=Math.abs(n.samples[0].dts-s)/9e4,r>10))throw{name:c.dependencies.ErrorHandler.prototype.HLS_DEMUX_ERROR,message:"A/V desynchronization ("+Math.round(r)+" s.)"};var u=[];for(o=0;o<i.length;o++)i[o].samples.length>0&&u.push(i[o]);return u};return{debug:void 0,reset:y,getTracks:_,demux:b}},l.dependencies.HlsDemux.prototype={constructor:l.dependencies.HlsDemux},l.dependencies.HlsFragmentController=function(){"use strict";var e={},n=function(e,t){var n=0,r=s.hlsDemux.demux(new Uint8Array(e),t);for(n=0;n<r.length;n+=1)!s.manifestModel.getValue().timestampMap&&r[n].samples[0].mpegTimestamp&&(s.manifestModel.getValue().timestampMap={local:r[n].samples[0].cts/9e4,mpegts:r[n].samples[0].mpegTimestamp});return s.mp4Processor.generateInitMediaSegment(r)},r=function(e){var t=new Uint8Array(16),n=0;for(n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},i=function(e,t){var n=new Date,i=new DataView(t.key.buffer),o=new Uint32Array([i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12)]);i=new DataView(r(t.iv).buffer);var a=new Uint32Array([i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12)]),u=new l.dependencies.AES128Decrypter(o,a);return s.debug.log("[HlsFragmentController] decrypted chunk ("+(((new Date).getTime()-n.getTime())/1e3).toFixed(3)+"s.)"),u.decrypt(e)},o=function(e){var n=t.defer();this.debug.log("[HlsFragmentController]","Load decryption key: "+e.uri);var r=new c.dependencies.XHRLoader;return r.initialize("arraybuffer",0,0),r.load(e.uri).then(function(t){e.key=new Uint8Array(t.response),n.resolve()},function(t){!t||t.aborted?n.reject():n.reject({name:c.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_MANIFEST,message:"Failed to download HLS decryption key",data:{url:e.uri,status:t.status}})}),n.promise},a=function(n,r){var a,s=t.defer(),u=this;return r.decryptionInfo&&"NONE"!==r.decryptionInfo.method?(a=e[r.decryptionInfo.uri],a?s.resolve(i.call(this,n,a)):(a=r.decryptionInfo,o.call(this,a).then(function(){if(a.key&&16!==a.key.byteLength)return s.reject({name:c.dependencies.ErrorHandler.prototype.HLS_INVALID_KEY_ERROR,message:"Invalid HLS key - Key length ("+a.key.byteLength+") does not respect specification"});e[a.uri]=a,s.resolve(i.call(u,n,a))},function(e){s.reject(e)})),s.promise):(s.resolve(n),s.promise)},s=c.utils.copyMethods(c.dependencies.FragmentController);return s.manifestModel=void 0,s.hlsDemux=void 0,s.mp4Processor=void 0,s.process=function(e,r){var i=t.defer(),o=null;return null===e||void 0===e||0===e.byteLength?(i.resolve(null),i.promise):r&&"Media Segment"===r.type?"text"===r.streamType?(i.resolve(e),i.promise):(a.call(s,e,r).then(function(e){try{s.manifestModel.getValue()?(o=n(e,r),s.sequenceNumber++,i.resolve(o)):i.resolve(null)}catch(t){i.reject(t)}},function(e){i.reject(e)}),i.promise):(i.resolve(null),i.promise)},s},l.dependencies.HlsFragmentController.prototype={constructor:l.dependencies.HlsFragmentController},l.dependencies.HlsHandler=function(){"use strict";var e=function(e){var r,i,o,a=null,s=this,u=null,l=t.defer();return a=e.adaptation.period,u=a.start,r=n.manifestModel.getValue(),i=n.manifestExt.getIsDynamic(r),o=new c.vo.SegmentRequest,o.streamType=n.getType(),o.type="Initialization Segment",o.url=null,o.data=1,o.range=e.range,o.availabilityStartTime=s.timelineConverter.calcAvailabilityStartTimeFromPresentationTime(u,e.adaptation.period.mpd,i),o.availabilityEndTime=s.timelineConverter.calcAvailabilityEndTimeFromPresentationTime(u+a.duration,a.mpd,i),o.quality=e.index,l.resolve(o),l.promise},n=c.utils.copyMethods(d.dependencies.DashHandler);return n.getInitRequest=e,n},l.dependencies.HlsHandler.prototype={constructor:l.dependencies.HlsHandler},l.dependencies.HlsParser=function(){var e,n=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,r=/#EXT-X-MEDIA:(.*)/g,i="(?:#(EXT-X-MEDIA-SEQUENCE):*(\\d+))",o="(?:#(EXT-X-TARGETDURATION):*(\\d+))",a="(?:#(EXT-X-PROGRAM-DATE-TIME):*(.+))",s="(?:#(EXT-X-KEY):(.+))",u="(?:#(EXTINF):*(\\d+(?:\\.\\d+)?)(?:,(.*))?[\r\n]*(.*))",l="(?:#(EXT-X-ENDLIST))",d=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,f=new RegExp("(?:"+i+"|"+o+"|"+a+"|"+s+"|"+u+"|"+l+")","g"),h=2,p=500,m=h,g=p,y=function(e){var t,n,r,i={};while(null!==(t=d.exec(e)))n=t[1],r=t[2].replace(/"/g,""),i[n]=r;return i},v=function(e,t){return 0===e.indexOf("http://")||0===e.indexOf("https://")?e:t+e},_=function(e){var t,r,i,o,a,s,u,l,d,c,f=[];while(null!==(r=n.exec(e))){for(i=y(r[1]),o=i["CODECS"]||"",o=o.split(","),a=s="",c=0;c<o.length;c++)-1!==o[c].indexOf("avc1")?s=o[c]:a=o[c];u=i["RESOLUTION"]||"0x0",u=u.split("x"),l=parseInt(u[0],10),d=parseInt(u[1],10),t={programId:i["PROGRAM-ID"]||"",bandwidth:parseInt(i["BANDWIDTH"]||"0",10),audioCodec:a,videoCodec:s,width:l,height:d,audioId:i["AUDIO"]||"",subtitlesId:i["SUBTITLES"]||"",uri:r[2]},f.push(t)}return f},E=function(e){var t,n,i,o,a=[];while(null!==(t=r.exec(e))){if(n=y(t[1]),i=(n["TYPE"]||"").toLowerCase(),0===i.length)break;o={type:i,groupId:n["GROUP-ID"]||"",name:i+(n["NAME"]?"_"+n["NAME"]:""),language:n["LANGUAGE"]||"",autoSelect:"YES"===n["AUTO-SELECT"],default:"YES"===n["SUTITLES"],uri:n["URI"]||""},a.push(o)}return a},b=function(e,t){for(var n=0;n<e.length;n++){if(!(e[n].sequenceNumber<t))break;e.shift(),n--}},T=function(e,t,n){var r,i,o,a,s,u,l,d,c=null,h=0,p=0,m=null;if(!e||e&&e.length<0)return!1;if(0!==e.indexOf("#EXTM3U"))return!1;r=t["SegmentList"],r||(r={name:"SegmentList",isRoot:!1,isArray:!1,duration:0,startNumber:0,timescale:1,BaseURL:t.BaseURL,SegmentURL_asArray:[]},t["SegmentList"]=r),i=r.SegmentURL_asArray,t.duration=1/0;while(null!==(u=f.exec(e)))switch(u=u.filter(function(e){return void 0!==e}),l=u[1],l){case"EXT-X-MEDIA-SEQUENCE":p=parseInt(u[2]),r.startNumber=p;break;case"EXT-X-TARGETDURATION":r.duration=parseInt(u[2]);break;case"EXT-X-KEY":d=y(u[2]),c={method:d["METHOD"]||"NONE",uri:v(d["URI"],r.BaseURL),iv:d["IV"]};break;case"EXTINF":o={name:"SegmentURL",isRoot:!1,isArray:!0,media:v(u[4],r.BaseURL),sequenceNumber:p,time:0===i.length?0:i[i.length-1].time+i[i.length-1].duration,duration:parseFloat(u[2]),decryptionInfo:c},o.decryptionInfo&&!o.decryptionInfo.iv&&(o.decryptionInfo.iv=o.sequenceNumber),(0===i.length||o.sequenceNumber>i[i.length-1].sequenceNumber)&&i.push(o),p++,h+=o.duration,m&&(o.programDateTime=m,m+=1e3*o.duration);break;case"EXT-X-ENDLIST":t.duration=h;break;case"EXT-X-PROGRAM-DATE-TIME":m=Date.parse(u[2]);break;default:break}if(b(i,r.startNumber),n.segments&&n.segments.length>0&&(b(i,n.segments[0].sequenceNumber),i.length>0&&(b(n.segments,i[0].sequenceNumber),n.segments.length>0&&i[0].time!==n.segments[0].time)))for(i[0].time=n.segments[0].time,s=1;s<i.length;s++)i[s].time=i[s-1].time+i[s-1].duration;if(0===i.length)return!0;n.segments=i;var g={start:i[0].time,end:i[i.length-1].time+i[i.length-1].duration};return m&&(g.programStart=i[0].programDateTime,g.programEnd=i[i.length-1].programDateTime+i[i.length-1].duration),"video"===n.contentType&&this.metricsModel.addDVRInfo("video",new Date,g),a={name:"Initialization",sourceURL:t.SegmentList.SegmentURL_asArray[0].media},t.SegmentList.Initialization=a,!0},S=function(e,n){var r,i,o,a,s,u,l=t.defer(),d=e.Period_asArray[0],f=d.AdaptationSet_asArray[0],h=f.Representation_asArray[n],p=new c.vo.SegmentRequest;for(d.start=0,f.duration=h.duration,d.duration=h.duration,h.duration!==1/0&&(e.mediaPresentationDuration=h.duration),e.type=h.duration===1/0?"dynamic":"static",r=h.SegmentList.duration*h.SegmentList.SegmentURL_asArray.length,"dynamic"===e.type&&(i=new Date,e.availabilityStartTime=new Date(i.getTime()-1e3*r),e.timeShiftBufferDepth=r),e.minBufferTime=3*h.SegmentList.duration,o=Math.max.apply(null,d.AdaptationSet_asArray.map(function(e){var t=n>e.Representation_asArray.length?0:n;return e.Representation_asArray[t].SegmentList.startNumber})),a=0;a<d.AdaptationSet_asArray.length;a++){var m=d.AdaptationSet_asArray[a];for(s=0;s<m.Representation_asArray.length;s++)if(m.Representation_asArray[s].SegmentList){var g=m.Representation_asArray[s].SegmentList.SegmentURL_asArray;if(g.length>0&&g[0].sequenceNumber<o&&(b(g,o),g.length>0))for(g[0].time=0,u=1;u<g.length;u++)g[u].time=g[u-1].time+g[u-1].duration}}h=f.Representation_asArray[n],p.type="Initialization Segment",p.url=h.SegmentList.Initialization.sourceURL;var y=function(e,t){var n=this.hlsDemux.getTracks(new Uint8Array(t.data)),r=0;for(e.codecs="",r=0;r<n.length;r++)e.codecs+=n[r].codecs,r<n.length-1&&(e.codecs+=",");l.resolve()},v=function(){l.resolve()};return""===h.codecs?(this.debug.log("[HlsParser]","Load initialization segment: "+p.url),this.fragmentLoader.load(p).then(y.bind(this,h),v.bind(this))):l.resolve(),l.promise},I=function(e){var t=null;return-1!==e.indexOf("/")&&(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),t=e.substring(0,e.lastIndexOf("/")+1)),t},w=function(n,r){var i=this,o=t.defer();return this.debug.log("[HlsParser]","Load playlist manifest: "+n.url),e=new c.dependencies.XHRLoader,e.initialize("text",m,g),e.load(n.url).then(function(e){T.call(i,e.response,n,r)?o.resolve():o.reject({name:c.dependencies.ErrorHandler.prototype.MANIFEST_ERR_PARSE,message:"Failed to parse variant stream playlist",data:{url:n.url}})},function(e){!e||e.aborted?o.reject():o.reject({name:c.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_MANIFEST,message:"Failed to download variant stream playlist",data:{url:n.url,status:e.status}})}),o.promise},x=function(e,n){var r,i,o,a,s,u,l,d,c=this,f=t.defer(),h=[],p=0,m=[],g=[],y=[],b=0;if(0!==e.indexOf("#EXTM3U"))return this.debug.error("[HlsParser] no stream in HLS manifest"),f.reject(),f.promise;if(r={},r.name="M3U",r.isRoot=!0,r.isArray=!0,r.parent=null,r.BaseURL=n,r.profiles="urn:mpeg:dash:profile:isoff-live:2011",r.type="static",i={},i.name="Period",i.isRoot=!1,i.isArray=!1,i.parent=r,i.duration=0,i.BaseURL=r.BaseURL,r.Period=i,r.Period_asArray=[i],h=[],i.AdaptationSet=h,i.AdaptationSet_asArray=h,m=_(e),0===m.length)return this.debug.error("[HlsParser] No stream in HLS manifest"),f.reject(),f.promise;for(m.sort(function(e,t){return e.bandwidth-t.bandwidth}),o={name:"AdaptationSet",isRoot:!1,isArray:!0,id:"video",lang:"",contentType:"video",mimeType:"video/mp4",maxWidth:0,maxHeight:0,BaseURL:i.BaseURL},a=[],b=0;b<m.length;b++){if(u=m[b],u.bandwidth<=64e3)break;s={name:"Representation",isRoot:!1,isArray:!0,id:p.toString(),mimeType:"video/mp4",codecs:u.videoCodec.length>0?u.audioId.length>0?u.videoCodec:u.videoCodec+","+u.audioCodec:"",bandwidth:u.bandwidth,width:u.width,height:u.height,url:v(u.uri,o.BaseURL)},s.BaseURL=I(s.url),a.push(s),p++}for(o.Representation=a.length>1?a:a[0],o.Representation_asArray=a,h.push(o),d=this.abrController.getPlaybackQuality("video",h[0]).quality,s=h[0].Representation_asArray[d],y.push(w.call(this,s,o)),g=E(e),b=0;b<g.length;b++)l=g[b],o={name:"AdaptationSet",isRoot:!1,isArray:!0,id:l.name,lang:l.language,contentType:l.type,mimeType:"audio"===l.type?"audio/mp4":"text/vtt",maxWidth:0,maxHeight:0,BaseURL:i.BaseURL},s={name:"Representation",isRoot:!1,isArray:!0,id:"",mimeType:"audio"===l.type?"audio/mp4":"text/vtt",codecs:"audio"===l.type?m[0].audioCodec:"WebVTT",bandwidth:0,width:0,height:0,url:v(l.uri,o.BaseURL)},s.BaseURL=I(s.url),o.Representation=s,o.Representation_asArray=[s],h.push(o),y.push(w.call(this,s,o));return t.all(y).then(function(){S.call(c,r,d).then(function(){f.resolve(r)})},function(e){e?f.reject(e):f.resolve(null)}),f.promise},A=function(e,t){return this.hlsDemux.reset(),this.debug.log("[HlsParser]","Doing parse."),this.debug.log("[HlsParser]",e),x.call(this,e,t)},D=function(){null!==e&&e.abort()};return{debug:void 0,config:void 0,manifestModel:void 0,fragmentLoader:void 0,abrController:void 0,hlsDemux:void 0,metricsModel:void 0,setup:function(){m=this.config.getParam("ManifestLoader.RetryAttempts","number",h),g=this.config.getParam("ManifestLoader.RetryInterval","number",p)},parse:A,updatePlaylist:w,abort:D}},l.dependencies.HlsParser.prototype={constructor:l.dependencies.HlsParser},Number.MAX_SAFE_INTEGER||(Number.MAX_SAFE_INTEGER=9007199254740991),u.dependencies.MssParser=function(){"use strict";var e=1e7,n=["AAC","AACL","AVC1","H264","TTML","DFXP"],i={96000:0,88200:1,64000:2,48000:3,44100:4,32000:5,24000:6,22050:7,16000:8,12000:9,11025:10,8000:11,7350:12},o={video:"video/mp4",audio:"audio/mp4",text:"application/ttml+xml+mp4"},a=null,s=null,u=function(e){var t,n,r={},i=[],o=this.domParser.getChildNode(a,"SmoothStreamingMedia");for(r.BaseURL=s,n=0;n<o.childNodes.length;n++)"StreamIndex"===o.childNodes[n].nodeName&&(t=l.call(this,o.childNodes[n],e),null!==t&&i.push(t));return i.length>0&&(r.AdaptationSet=i.length>1?i:i[0]),r.AdaptationSet_asArray=i,r},l=function(e,t){var n,r,i={},a=[],u={},l=null,c=null;for(i.id=this.domParser.getAttributeValue(e,"Name"),i.lang=this.domParser.getAttributeValue(e,"Language"),i.contentType=this.domParser.getAttributeValue(e,"Type"),i.mimeType=o[i.contentType],i.maxWidth=this.domParser.getAttributeValue(e,"MaxWidth"),i.maxHeight=this.domParser.getAttributeValue(e,"MaxHeight"),i.BaseURL=s,c=this.domParser.getAttributeValue(e,"Subtype"),c&&(i.subType=c),u=m.call(this,e,t),l=this.domParser.getChildNodes(e,"QualityLevel"),r=0;r<l.length;r++)l[r].BaseURL=i.BaseURL,l[r].mimeType=i.mimeType,l[r].Id=i.id+"_"+this.domParser.getAttributeValue(l[r],"Index"),n=d.call(this,l[r],e),null!==n&&(n.SegmentTemplate=u,a.push(n));return 0===a.length?null:(i.Representation=a.length>1?a:a[0],i.Representation_asArray=a,i.SegmentTemplate=u,i)},d=function(e,t){var r={},i=null,o=this.domParser.getAttributeValue(t,"Type");if(r.id=e.Id,r.bandwidth=parseInt(this.domParser.getAttributeValue(e,"Bitrate"),10),r.mimeType=e.mimeType,r.width=parseInt(this.domParser.getAttributeValue(e,"MaxWidth"),10),r.height=parseInt(this.domParser.getAttributeValue(e,"MaxHeight"),10),i=this.domParser.getAttributeValue(e,"FourCC"),null!==i&&""!==i||(i=this.domParser.getAttributeValue(t,"FourCC")),null===i||""===i){if("audio"!==o)return this.errHandler.sendWarning(c.dependencies.ErrorHandler.prototype.MEDIA_ERR_CODEC_UNSUPPORTED,o+" codec/FourCC not provided",{codec:""}),null;i="AAC"}return-1===n.indexOf(i.toUpperCase())?(this.debug.warn("[MssParser] Codec not supported: "+i),null):("H264"===i||"AVC1"===i?r.codecs=f.call(this,e):i.indexOf("AAC")>=0&&(r.codecs=p.call(this,e,i),r.audioSamplingRate=parseInt(this.domParser.getAttributeValue(e,"SamplingRate"),10),r.audioChannels=parseInt(this.domParser.getAttributeValue(e,"Channels"),10)),r.codecPrivateData=""+this.domParser.getAttributeValue(e,"CodecPrivateData"),r.BaseURL=e.BaseURL,r)},f=function(e){var t,n,r=this.domParser.getAttributeValue(e,"CodecPrivateData").toString();return t=/00000001[0-9]7/.exec(r),n=t&&t[0]?r.substr(r.indexOf(t[0])+10,6):void 0,"avc1."+n},p=function(e,t){var n,r,o,a,s=0,u=this.domParser.getAttributeValue(e,"CodecPrivateData").toString(),l=parseInt(this.domParser.getAttributeValue(e,"SamplingRate"),10);return"AACH"===t&&(s=5),void 0===u||""===u?(s=2,o=i[l],"AACH"===t?(s=5,u=new Uint8Array(4),a=i[2*l],u[0]=s<<3|o>>1,u[1]=o<<7|e.Channels<<3|a>>1,u[2]=a<<7|8,u[3]=0,r=new Uint16Array(2),r[0]=(u[0]<<8)+u[1],r[1]=(u[2]<<8)+u[3],n=r[0].toString(16),n=r[0].toString(16)+r[1].toString(16)):(u=new Uint8Array(2),u[0]=s<<3|o>>1,u[1]=o<<7|parseInt(this.domParser.getAttributeValue(e,"Channels"),10)<<3,r=new Uint16Array(1),r[0]=(u[0]<<8)+u[1],n=r[0].toString(16)),u=""+n,u=u.toUpperCase(),e.setAttribute("CodecPrivateData",u)):0===s&&(s=(248&parseInt(u.substr(0,2),16))>>3),"mp4a.40."+s},m=function(e,t){var n,r,i={};return n=this.domParser.getAttributeValue(e,"Url").replace("{bitrate}","$Bandwidth$"),n=n.replace("{start time}","$Time$"),r=this.domParser.getAttributeValue(e,"TimeScale"),r=r?parseFloat(r):t,i.media=n,i.timescale=r,i.SegmentTimeline=g.call(this,e,i.timescale),i},g=function(e,t){var n,i,o,a,s,u,l={},d=this.domParser.getChildNodes(e,"c"),c=[],f=0;for(o=0;o<d.length;o++)if(n={},u=this.domParser.getAttributeValue(d[o],"t"),u&&r.math.Long.fromString(u).greaterThan(r.math.Long.fromNumber(Number.MAX_SAFE_INTEGER))&&(n.tManifest=u),n.t=parseFloat(u),n.d=parseFloat(this.domParser.getAttributeValue(d[o],"d")),0!==o||n.t||(n.t=0),o>0&&(i=c[c.length-1],i.d||(i.tManifest?i.d=r.math.Long.fromString(u).subtract(r.math.Long.fromString(i.tManifest)).toNumber():i.d=n.t-i.t,f+=i.d),n.t||(i.tManifest?(n.tManifest=r.math.Long.fromString(i.tManifest).add(r.math.Long.fromNumber(i.d)).toString(),n.t=parseFloat(n.tManifest)):n.t=i.t+i.d)),n.d&&(f+=n.d),c.push(n),s=parseFloat(this.domParser.getAttributeValue(d[o],"r")),s)for(a=0;a<s-1;a++)i=c[c.length-1],n={},n.t=i.t+i.d,n.d=i.d,i.tManifest&&(n.tManifest=r.math.Long.fromString(i.tManifest).add(r.math.Long.fromNumber(i.d)).toString()),f+=n.d,c.push(n);return l.S=c,l.S_asArray=c,l.duration=f/t,l},y=function(e){var t,n,r,i;return t=h.decodeArray(e.firstChild.data),n=v(t),n=new Uint16Array(n.buffer),n=String.fromCharCode.apply(null,n),r=(new DOMParser).parseFromString(n,"application/xml"),i=r.querySelector("KID").textContent,i=h.decodeArray(i),_(i),i},v=function(e){var t,n,r,i=0;e[i+3],e[i+2],e[i+1],e[i],i+=4,e[i+1],e[i],i+=2;while(i<e.length)if(t=(e[i+1]<<8)+e[i],i+=2,1===t)return n=(e[i+1]<<8)+e[i],i+=2,r=new Uint8Array(n),r.set(e.subarray(i,i+n)),r;return null},_=function(e){E(e,0,3),E(e,1,2),E(e,4,5),E(e,6,7)},E=function(e,t,n){var r=e[t];e[t]=e[n],e[n]=r},b=function(e){var t,n={},r=this.system.getObject("ksPlayReady");return t={__text:e.firstChild.data,__prefix:"mspr"},n.schemeIdUri=r.schemeIdURI,n.value=r.systemString,n.pro=t,n.pro_asArray=t,n},T=function(e){var t={},n=this.system.getObject("ksWidevine");t.schemeIdUri=n.schemeIdURI,t.value=n.systemString;var r=new Uint8Array(2+e.length);r[0]=18,r[1]=16,r.set(e,2);var i=32+r.length,o=new Uint8Array(i),a=0;return o[a++]=(4278190080&i)>>24,o[a++]=(16711680&i)>>16,o[a++]=(65280&i)>>8,o[a++]=255&i,o.set([112,115,115,104,0,0,0,0],a),a+=8,o.set([237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237],a),a+=16,o[a++]=(4278190080&r.length)>>24,o[a++]=(16711680&r.length)>>16,o[a++]=(65280&r.length)>>8,o[a++]=255&r.length,o.set(r,a),o=String.fromCharCode.apply(null,o),o=h.encodeASCII(o),t.pssh={__text:o},t},S=function(e){var t=e.SegmentTemplate,n=t.SegmentTimeline.S_asArray;if(0!==n.length){var r={start:n[0].t/t.timescale,end:(n[n.length-1].t+n[n.length-1].d)/t.timescale};this.metricsModel.addDVRInfo(e.contentType,new Date,r)}},I=function(t){var n,r,i,o,l,d,f,h,p,m={},g=[],v=this.domParser.getChildNode(a,"SmoothStreamingMedia"),_=this.domParser.getChildNode(v,"Protection"),E=null;m.name="MSS",m.profiles="urn:mpeg:dash:profile:isoff-live:2011";var I=this.domParser.getAttributeValue(v,"TimeScale");m.timescale=I?parseFloat(I):e;var w=this.domParser.getAttributeValue(v,"IsLive");m.type=null!==w&&"true"===w.toLowerCase()?"dynamic":"static";var x=this.domParser.getAttributeValue(v,"CanSeek"),A=parseFloat(this.domParser.getAttributeValue(v,"DVRWindowLength"));0===A&&null!==x&&"true"===x.toLowerCase()&&(A=1/0),m.timeShiftBufferDepth=A/m.timescale;var D=parseFloat(this.domParser.getAttributeValue(v,"Duration"));if("dynamic"===m.type&&D>0&&(m.type="static",m.startOver=!0,m.timeShiftBufferDepth=D/m.timescale),m.mediaPresentationDuration=0===D?1/0:D/m.timescale,m.BaseURL=s,m.minBufferTime=c.dependencies.BufferExtensions.DEFAULT_MIN_BUFFER_TIME,"dynamic"===m.type&&m.timeShiftBufferDepth<1/0&&(m.availabilityStartTime=new Date(t.getTime()-1e3*m.timeShiftBufferDepth)),m.Period=u.call(this,m.timescale),m.Period_asArray=[m.Period],n=m.Period,n.start=0,void 0!==_){if(!c.dependencies.ProtectionController)return m.error={name:c.dependencies.ErrorHandler.prototype.MEDIA_ERR_ENCRYPTED,message:"protected content detected but protection module is not included."},m;E=this.domParser.getChildNode(_,"ProtectionHeader"),E.firstChild.data=E.firstChild.data.replace(/\n|\r/g,""),o=y(E),i=b.call(this,E),i["cenc:default_KID"]=o,g.push(i),i=T.call(this,o),i["cenc:default_KID"]=o,g.push(i),m.ContentProtection=g.length>1?g:g[0],m.ContentProtection_asArray=g}for(r=n.AdaptationSet_asArray,h=0;h<r.length;h+=1)void 0!==m.ContentProtection&&(r[h].ContentProtection=m.ContentProtection,r[h].ContentProtection_asArray=m.ContentProtection_asArray),"dynamic"===m.type&&(m.timeShiftBufferDepth===1/0&&(m.availabilityStartTime=new Date(t.getTime()-1e3*r[1].SegmentTemplate.SegmentTimeline.duration)),m.timeShiftBufferDepth>0&&m.timeShiftBufferDepth!==1/0&&"video"===r[h].contentType&&m.timeShiftBufferDepth>r[h].SegmentTemplate.SegmentTimeline.duration&&(m.timeShiftBufferDepth=r[h].SegmentTemplate.SegmentTimeline.duration),S.call(this,r[h]));if(m.timeShiftBufferDepth<m.minBufferTime&&(m.minBufferTime=m.timeShiftBufferDepth),delete m.ContentProtection,delete m.ContentProtection_asArray,"static"===m.type){var R=this.manifestModel.getValue();if(R&&R.timestampOffset)l=R.timestampOffset;else for(h=0;h<r.length;h++)"audio"!==r[h].contentType&&"video"!==r[h].contentType||(f=r[h].SegmentTemplate.SegmentTimeline.S_asArray,d=f[0].t/r[h].SegmentTemplate.timescale,void 0===l&&(l=d),l=Math.min(l,d),m.mediaPresentationDuration=Math.min(m.mediaPresentationDuration,r[h].SegmentTemplate.SegmentTimeline.duration));if(l>0){for(m.timestampOffset=l,h=0;h<r.length;h++){for(f=r[h].SegmentTemplate.SegmentTimeline.S_asArray,p=0;p<f.length;p++)f[p].tManifest||(f[p].tManifest=f[p].t),f[p].t-=l*r[h].SegmentTemplate.timescale;"audio"!==r[h].contentType&&"video"!==r[h].contentType||(n.start=Math.max(f[0].t,n.start))}n.start/=m.timescale}}return m.mediaPresentationDuration=Math.floor(1e3*m.mediaPresentationDuration)/1e3,n.duration=m.mediaPresentationDuration,m},w=function(e,n){this.debug.info("[MssParser]","Doing parse.");var r=new Date,i=null,o=null,u=null;return a=this.domParser.createXmlTree(e),i=new Date,null===a?t.reject(null):(s=n,o=I.call(this,r),o.error?t.reject(o.error):(u=new Date,this.debug.info("[MssParser]","Parsing complete (xmlParser: "+(i.getTime()-r.getTime())+"ms, mss2dash: "+(u.getTime()-i.getTime())+"ms, total: "+((new Date).getTime()-r.getTime())/1e3+"s)"),t.when(o)))};return{debug:void 0,system:void 0,errHandler:void 0,domParser:void 0,metricsModel:void 0,manifestModel:void 0,parse:w}},u.dependencies.MssParser.prototype={constructor:u.dependencies.MssParser},u.dependencies.MssHandler=function(){"use strict";var e=function(e,t){var n=1;return e.audioChannels?n=e.audioChannels:t.audioChannels&&(n=t.audioChannels),n},n=function(e,t){var n=1;return n=e.audioSamplingRate?e.audioSamplingRate:t.audioSamplingRate,n},r=function(t){var r,o,a,s,u,l=i.manifestModel.getValue();if(t.initData)return t.initData;if(r=t.adaptation,o=l.Period_asArray[r.period.index].AdaptationSet_asArray[r.index],a=o.Representation_asArray[t.index],s=new c.vo.Mp4Track,s.type=i.getType()||"und",s.trackId=r.index+1,s.timescale=t.timescale,s.duration=t.adaptation.period.duration,s.codecs=a.codecs,s.codecPrivateData=a.codecPrivateData,s.bandwidth=a.bandwidth,"text"!==s.type&&(u=a.mimeType+';codecs="'+a.codecs+'"',!this.capabilities.supportsCodec(this.videoModel.getElement(),u)))throw{name:c.dependencies.ErrorHandler.prototype.MEDIA_ERR_CODEC_UNSUPPORTED,message:"Codec is not supported (HTMLMediaElement)",data:{codec:u,bandwidth:a.bandwidth,codecPrivateData:a.codecPrivateData}};return o.ContentProtection_asArray&&o.ContentProtection_asArray.length>0&&(s.contentProtection=o.ContentProtection_asArray),s.width=a.width||o.maxWidth,s.height=a.height||o.maxHeight,s.language=o.lang?o.lang:"und",s.channels=e(o,a),s.samplingRate=n(o,a),t.initData=i.mp4Processor.generateInitSegment([s]),t.initData},i=c.utils.copyMethods(d.dependencies.DashHandler);return i.mp4Processor=void 0,i.getInitRequest=function(e){var n=null,o=this,a=null,s=null,u=t.defer();if(!e)throw new Error("MssHandler.getInitRequest(): representation is undefined");n=e.adaptation.period,a=n.start,s=new c.vo.SegmentRequest,s.streamType=i.getType(),s.type="Initialization Segment",s.url=null;try{s.data=r.call(this,e)}catch(l){return u.reject(l),u.promise}return s.range=e.range,s.availabilityStartTime=o.timelineConverter.calcAvailabilityStartTimeFromPresentationTime(a,e.adaptation.period.mpd,i.getIsDynamic()),s.availabilityEndTime=o.timelineConverter.calcAvailabilityEndTimeFromPresentationTime(a+n.duration,n.mpd,i.getIsDynamic()),s.quality=e.index,u.resolve(s),u.promise},i.getIFrameRequest=function(e){return e&&e.url&&("video"===e.streamType||"audio"===e.streamType)&&(e.url=e.url.replace("Fragments","KeyFrames")),e},i.getFragmentInfoRequest=function(e){return e&&e.url&&(e.url=e.url.replace("Fragments","FragmentInfo"),e.type="FragmentInfo Segment"),e},i},u.dependencies.MssHandler.prototype={constructor:u.dependencies.MssHandler},u.dependencies.MssFragmentController=function(){"use strict";var e=function(e,t,n,i){var o,a,s,u=this.manifestModel.getValue(),l=i.SegmentTemplate.SegmentTimeline.S_asArray,d=i.SegmentTemplate.timescale,c=t.entry,f=null,h=0,p=null,m=i.type;if((this.manifestExt.getIsDynamic(u)||this.manifestExt.getIsStartOver(u))&&0!==c.length&&(o=c[0],o.fragment_absolute_time.greaterThan(r.math.Long.fromNumber(Number.MAX_SAFE_INTEGER))&&(o.fragment_absolute_timeManifest=o.fragment_absolute_time.toString()),o.fragment_absolute_time=o.fragment_absolute_time.toNumber(),o.fragment_duration=o.fragment_duration.toNumber(),!(this.manifestExt.getIsStartOver(u)&&(a=l[0].tManifest?parseFloat(l[0].tManifest):l[0].t,o.fragment_absolute_time>a+u.timeShiftBufferDepth*d))&&(a=l[l.length-1].tManifest?parseFloat(l[l.length-1].tManifest):l[l.length-1].t,!(o.fragment_absolute_time<=a))))if(this.debug.log("[MssFragmentController]["+m+"] Add new segment - t = "+o.fragment_absolute_time/d),f={},f.t=o.fragment_absolute_time,f.d=o.fragment_duration,l[0].tManifest&&(f.t-=parseFloat(l[0].tManifest)-l[0].t),o.fragment_absolute_timeManifest?f.tManifest=o.fragment_absolute_timeManifest:l[0].tManifest&&(f.tManifest=o.fragment_absolute_time),l.push(f),this.manifestExt.getIsStartOver(u)){if("video"===m){f=l[l.length-1];var g=(f.t+f.d)/d;g>this.videoModel.getDuration()&&this.system.notify("sourceDurationChanged",g)}}else if(u.timeShiftBufferDepth&&u.timeShiftBufferDepth>0){f=l[l.length-1],h=f.t,p=h-u.timeShiftBufferDepth*d,f=l[0];while(f.t<p)this.debug.log("[MssFragmentController]["+m+"] Remove segment  - t = "+f.t/d),l.splice(0,1),f=l[0];s={start:l[0].t/i.SegmentTemplate.timescale,end:n.baseMediaDecodeTime/i.SegmentTemplate.timescale+e.duration};var y=this.metricsModel.getMetricsFor(i.type).DVRInfo;y&&y.length>0&&s.end>y[y.length-1].range.end&&this.metricsModel.addDVRInfo(i.type,new Date,s)}},n=function(t,n,r){var i,o=null,a=null,s=null,u=null,l=null;if(o=_.deserialize(t),a=o.getBoxByType("moof"),s=a.getBoxByType("traf"),u=s.getBoxByType("tfdt"),null===u&&(u=new _.boxes.TrackFragmentBaseMediaDecodeTimeBox,u.version=1,u.flags=0,u.baseMediaDecodeTime=Math.floor(n.startTime*n.timescale),i=s.getBoxIndexByType("tfhd"),s.boxes.splice(i+1,0,u)),l=s.getBoxesByType("tfrf"),null===l||0===l.length)throw{name:c.dependencies.ErrorHandler.prototype.MSS_NO_TFRF,message:"Missing tfrf in live FragmentInfo segment",data:{url:n.url}};e.call(this,n,l[0],u,r)},i=function(e,t){var n,r,i,o,a,s=null,u=null,l=null,d=null,c=null,f=null;for(s=e.getBoxByType("moof"),u=e.getBoxByType("mdat"),l=s.getBoxByType("traf"),d=l.getBoxByType("trun"),n=l.getBoxByType("tfhd"),d.samples_table[0].sample_duration||(d.samples_table[0].sample_duration=n.default_sample_duration),d.flags|=256,n.flags&=16777207,i=Math.floor(t/d.samples_table[0].sample_duration),r=0;r<i-1;r++)d.samples_table.push(d.samples_table[0]);if(d.sample_count=d.samples_table.length,o=i*d.samples_table[0].sample_duration,o<t&&(d.samples_table[d.samples_table.length-1].sample_duration+=t-o),c=l.getBoxByType("sepiff"),null!==c){for(c.sample_count>1&&(c.entry=c.entry.slice(0,1)),r=0;r<i-1;r+=1)c.entry.push(c.entry[0]);c.sample_count=c.entry.length}if(f=l.getBoxByType("saiz"),null!==f){if(0===f.default_sample_info_size)for(f.sample_count>1&&(f.sample_info_size=f.sample_info_size.slice(0,1)),r=0;r<i-1;r+=1)f.sample_info_size.push(f.sample_info_size[0]);f.sample_count=c.entry.length}for(a=u.data,u.data=new Uint8Array(a.length*d.sample_count),r=0;r<d.sample_count;r++)u.data.set(a,a.length*r)},o=function(t,n,r){var o,a,s=0,u=this.manifestModel.getValue(),l=u?this.manifestExt.getIndex(r,u)+1:-1,d=_.deserialize(t),f=null,h=null,p=null,m=null,g=null,y=null,v=null,E=null,b=null,T=null,S=-1,I=0,w=0,x=0,A=0,D=null;if(!d)return null;if(f=d.getBoxByType("moof"),h=d.getBoxByType("mdat"),p=f.getBoxByType("traf"),m=p.getBoxByType("trun"),g=p.getBoxByType("tfhd"),a=void 0!==m.samples_table[0].sample_duration?m.samples_table[0].sample_duration:g.default_sample_duration,o=n.duration*n.timescale,1===m.samples_table.length&&a<o&&i(d,o),g.track_ID=l,p.removeBoxByType("tfxd"),b=p.getBoxByType("tfdt"),null===b&&(b=new _.boxes.TrackFragmentBaseMediaDecodeTimeBox,b.version=1,b.flags=0,b.baseMediaDecodeTime=Math.floor(n.startTime*n.timescale),S=p.getBoxIndexByType("tfhd"),p.boxes.splice(S+1,0,b)),"dynamic"===u.type){if(T=p.getBoxesByType("tfrf"),null===T||0===T.length)throw{name:c.dependencies.ErrorHandler.prototype.MSS_NO_TFRF,message:"Missing tfrf in live media segment",data:{url:n.url}};e.call(this,n,T[0],b,r),p.removeBoxByType("tfrf")}if(v=p.getBoxByType("sepiff"),null!==v&&(v.boxtype="senc",v.extended_type=void 0,y=p.getBoxByType("saio"),null===y)){if(y=new _.boxes.SampleAuxiliaryInformationOffsetsBox,y.version=0,y.flags=0,y.entry_count=1,y.offset=[],E=new _.boxes.SampleAuxiliaryInformationSizesBox,E.version=0,E.flags=0,E.sample_count=v.sample_count,E.default_sample_info_size=0,E.sample_info_size=[],2&v.flags)for(s=0;s<v.sample_count;s+=1)E.sample_info_size[s]=10+6*v.entry[s].NumberOfEntries;else E.default_sample_info_size=8;p.boxes.push(E),p.boxes.push(y)}return g.flags&=16777214,g.flags|=131072,m.flags|=1,m.data_offset=0,I=d.getLength(),m.data_offset=I-h.size+8,y=p.getBoxByType("saio"),null!==y&&(w=d.getBoxOffsetByType("moof"),x=f.getBoxOffsetByType("traf"),A=p.getBoxOffsetByType("senc"),y.offset[0]=w+x+A+16),D=_.serialize(d),D},a=c.utils.copyMethods(c.dependencies.FragmentController);return a.manifestModel=void 0,a.manifestExt=void 0,a.metricsModel=void 0,a.videoModel=void 0,a.mediaSourceExt=void 0,a.process=function(e,r,i){var a=t.defer(),s=null,u=this.manifestModel.getValue(),l=null;if(!(null!==e&&void 0!==e&&e.byteLength>0))return a.resolve(null),a.promise;if(s=new Uint8Array(e),u&&i)try{l=u.Period_asArray[i.adaptation.period.index].AdaptationSet_asArray[i.adaptation.index],r&&("Media Segment"===r.type?(s=o.call(this,s,r,l),a.resolve(s||null)):"FragmentInfo Segment"===r.type?(n.call(this,s,r,l),a.resolve(s)):a.resolve(s))}catch(d){a.reject(d)}else a.resolve(s);return a.promise},a},u.dependencies.MssFragmentController.prototype={constructor:u.dependencies.MssFragmentController},u.dependencies.MssFragmentInfoController=function(){"use strict";var e,n,r,i=!1,o=!1,a=null,s=null,u=null,l=null,d=function(t,r,o){this.debug.log("[MssFragmentInfoController]["+t+"] Initialize"),n=o,e=t,a=r,s=a.attachBufferController(this),s.setType(t),i=!0},f=function(){return p.call(this),s&&(a.abortRequestsForModel(s),a.detachBufferController(s),s=null),t.when(null)},h=function(t){i&&!o&&(this.debug.info("[MssFragmentInfoController]["+e+"] START"),o=!0,u=(new Date).getTime()+1e3*t,b.call(this,t))},p=function(){o&&(this.debug.info("[MssFragmentInfoController]["+e+"] STOP"),a.abortRequestsForModel(s),clearTimeout(r),o=!1)},m=function(){if(o){var t,r=n.getData(),i=r.SegmentTemplate.SegmentTimeline.S_asArray,a=i[i.length-1],s=r.Representation_asArray[0];this.debug.log("[MssFragmentInfoController]["+e+"] Load next fragment for time: "+a.t/r.SegmentTemplate.timescale),t=g(r,s,a),y.call(this,t)}},g=function(t,n,r){var i=t.SegmentTemplate.timescale,o=new c.vo.SegmentRequest;return o.action="download",o.startTime=r.t/i,o.streamType=e,o.type="FragmentInfo Segment",o.duration=r.d/i,o.timescale=i,o.quality=n.quality,o.url=t.BaseURL+t.SegmentTemplate.media,o.url=o.url.replace("$Bandwidth$",n.bandwidth),o.url=o.url.replace("$Time$",r.tManifest?r.tManifest:r.t),o.url=o.url.replace("/Fragments(","/FragmentInfo("),o},y=function(t){a.isFragmentLoadedOrPending(this,t)?this.debug.log("[MssFragmentInfoController]["+e+"] No more fragments"):(this.debug.log("[MssFragmentInfoController]["+e+"] Request fragment info "+t.url),a.prepareFragmentForLoading(this,t,v,_,E,null),a.onBufferControllerStateChange())},v=function(t){this.debug.info("[MssFragmentInfoController]["+e+"] Load request ",null!==t.url?t.url:t.quality)},_=function(t,r){var i,o,s=this,d=n.getAvailableRepresentations()[0];this.debug.log("[MssFragmentInfoController]["+e+"] FragmentInfo loaded ",t.url),l||(l=t.startTime);try{a.process(r.data,t,d).then(function(){i=((new Date).getTime()-u)/1e3,o=t.startTime+t.duration-l,b.call(s,Math.max(0,o-i))})}catch(f){this.errHandler.sendError(c.dependencies.ErrorHandler.prototype.INTERNAL_ERROR,"Internal error while processing fragment info segment",f.message)}},E=function(e){o||this.errHandler.sendWarning(c.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_CONTENT,"Failed to download fragmentInfo segment",{url:e.url,status:e.status})},b=function(t){var n=this;this.debug.log("[MssFragmentInfoController]["+e+"] Load next fragment in "+t+" s."),clearTimeout(r),r=setTimeout(function(){r=null,m.call(n)},1e3*t)};return{debug:void 0,system:void 0,errHandler:void 0,initialize:d,reset:f,start:h,stop:p,isReady:function(){return i}}},u.dependencies.MssFragmentInfoController.prototype={constructor:u.dependencies.MssFragmentInfoController};var f={encode:function(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|63&r)):r<65536?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t},decode:function(e){var t=[],n=0;while(n<e.length){var r=e[n++];r<128||(r<224?(r=(31&r)<<6,r|=63&e[n++]):r<240?(r=(15&r)<<12,r|=(63&e[n++])<<6,r|=63&e[n++]):(r=(7&r)<<18,r|=(63&e[n++])<<12,r|=(63&e[n++])<<6,r|=63&e[n++])),t.push(String.fromCharCode(r))}return t.join("")}},h={};if(function(e){var t=function(t){var n=0,r=[],i=0|t.length/3;while(0<i--){var o=(t[n]<<16)+(t[n+1]<<8)+t[n+2];n+=3,r.push(e.charAt(63&o>>18)),r.push(e.charAt(63&o>>12)),r.push(e.charAt(63&o>>6)),r.push(e.charAt(63&o))}if(2==t.length-n){o=(t[n]<<16)+(t[n+1]<<8);r.push(e.charAt(63&o>>18)),r.push(e.charAt(63&o>>12)),r.push(e.charAt(63&o>>6)),r.push("=")}else if(1==t.length-n){o=t[n]<<16;r.push(e.charAt(63&o>>18)),r.push(e.charAt(63&o>>12)),r.push("==")}return r.join("")},n=function(){for(var t=[],n=0;n<e.length;++n)t[e.charCodeAt(n)]=n;return t["=".charCodeAt(0)]=0,t}(),r=function(e){var t=0,r=[],i=0|e.length/4;while(0<i--){var o=(n[e.charCodeAt(t)]<<18)+(n[e.charCodeAt(t+1)]<<12)+(n[e.charCodeAt(t+2)]<<6)+n[e.charCodeAt(t+3)];r.push(255&o>>16),r.push(255&o>>8),r.push(255&o),t+=4}return r&&("="==e.charAt(t-2)?(r.pop(),r.pop()):"="==e.charAt(t-1)&&r.pop()),r},i={encode:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}};h.decodeArray=function(e){var t=r(e);return new Uint8Array(t)},h.encodeASCII=function(e){var n=i.encode(e);return t(n)},h.decodeASCII=function(e){var t=r(e);return i.decode(t)},h.encode=function(e){var n=f.encode(e);return t(n)},h.decode=function(e){var t=r(e);return f.decode(t)}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),void 0===p)var p=h.encode;if(void 0===m)var m=h.decode;if(function(e){"use strict";var t={VERSION:"0.5.3",System:function(){this._mappings={},this._outlets={},this._handlers={},this.strictInjections=!0,this.autoMapOutlets=!1,this.postInjectionHook="setup"}};t.System.prototype={_createAndSetupInstance:function(e,t){var n=new t;return this.injectInto(n,e),n},_retrieveFromCacheOrCreate:function(e,t){var n;if("undefined"===typeof t&&(t=!1),!this._mappings.hasOwnProperty(e))throw new Error(1e3);var r=this._mappings[e];return!t&&r.isSingleton?(null==r.object&&(r.object=this._createAndSetupInstance(e,r.clazz)),n=r.object):n=r.clazz?this._createAndSetupInstance(e,r.clazz):r.object,n},mapOutlet:function(e,t,n){if("undefined"===typeof e)throw new Error(1010);return t=t||"global",n=n||e,this._outlets.hasOwnProperty(t)||(this._outlets[t]={}),this._outlets[t][n]=e,this},getObject:function(e){if("undefined"===typeof e)throw new Error(1020);return this._retrieveFromCacheOrCreate(e)},mapValue:function(e,t){if("undefined"===typeof e)throw new Error(1030);return this._mappings[e]={clazz:null,object:t,isSingleton:!0},this.autoMapOutlets&&this.mapOutlet(e),this.hasMapping(e)&&this.injectInto(t,e),this},hasMapping:function(e){if("undefined"===typeof e)throw new Error(1040);return this._mappings.hasOwnProperty(e)},mapClass:function(e,t){if("undefined"===typeof e)throw new Error(1050);if("undefined"===typeof t)throw new Error(1051);return this._mappings[e]={clazz:t,object:null,isSingleton:!1},this.autoMapOutlets&&this.mapOutlet(e),this},mapSingleton:function(e,t){if("undefined"===typeof e)throw new Error(1060);if("undefined"===typeof t)throw new Error(1061);return this._mappings[e]={clazz:t,object:null,isSingleton:!0},this.autoMapOutlets&&this.mapOutlet(e),this},instantiate:function(e){if("undefined"===typeof e)throw new Error(1070);return this._retrieveFromCacheOrCreate(e,!0)},injectInto:function(e,t){if("undefined"===typeof e)throw new Error(1080);if("object"===typeof e){var n=[];for(var r in this._outlets.hasOwnProperty("global")&&n.push(this._outlets["global"]),"undefined"!==typeof t&&this._outlets.hasOwnProperty(t)&&n.push(this._outlets[t]),n){var i=n[r];for(var o in i){var a=i[o];(!this.strictInjections||o in e)&&(e[o]=this.getObject(a))}}"setup"in e&&e.setup.call(e)}return this},unmap:function(e){if("undefined"===typeof e)throw new Error(1090);return delete this._mappings[e],this},unmapOutlet:function(e,t){if("undefined"===typeof e)throw new Error(1100);if("undefined"===typeof t)throw new Error(1101);return delete this._outlets[e][t],this},mapHandler:function(e,t,n,r,i){if("undefined"===typeof e)throw new Error(1110);return t=t||"global",n=n||e,"undefined"===typeof r&&(r=!1),"undefined"===typeof i&&(i=!1),this._handlers.hasOwnProperty(e)||(this._handlers[e]={}),this._handlers[e].hasOwnProperty(t)||(this._handlers[e][t]=[]),this._handlers[e][t].push({handler:n,oneShot:r,passEvent:i}),this},unmapHandler:function(e,t,n){if("undefined"===typeof e)throw new Error(1120);if(t=t||"global",this._handlers.hasOwnProperty(e)&&this._handlers[e].hasOwnProperty(t)){var r=this._handlers[e][t];for(var i in r){var o=r[i];if(!n||o.handler===n){r.splice(i,1);break}}}return this},notify:function(e){if("undefined"===typeof e)throw new Error(1130);var t=Array.prototype.slice.call(arguments),n=t.slice(1);if(this._handlers.hasOwnProperty(e)){var r=this._handlers[e];for(var i in r){var o,a=r[i];"global"!==i&&(o=this.getObject(i));var s,u,l=[];for(s=0,u=a.length;s<u;s++){var d,c=a[s];d=o&&"string"===typeof c.handler?o[c.handler]:c.handler,c.oneShot&&l.unshift(s),c.passEvent?d.apply(o,t):d.apply(o,n)}for(s=0,u=l.length;s<u;s++)a.splice(l[s],1)}}return this}},e.dijon=t}(this),r={},r.math={},r.math.Long=function(e,t){this.low_=0|e,this.high_=0|t},r.math.Long.IntCache_={},r.math.Long.fromInt=function(e){if(-128<=e&&e<128){var t=r.math.Long.IntCache_[e];if(t)return t}var n=new r.math.Long(0|e,e<0?-1:0);return-128<=e&&e<128&&(r.math.Long.IntCache_[e]=n),n},r.math.Long.fromNumber=function(e){return isNaN(e)||!isFinite(e)?r.math.Long.ZERO:e<=-r.math.Long.TWO_PWR_63_DBL_?r.math.Long.MIN_VALUE:e+1>=r.math.Long.TWO_PWR_63_DBL_?r.math.Long.MAX_VALUE:e<0?r.math.Long.fromNumber(-e).negate():new r.math.Long(e%r.math.Long.TWO_PWR_32_DBL_|0,e/r.math.Long.TWO_PWR_32_DBL_|0)},r.math.Long.fromBits=function(e,t){return new r.math.Long(e,t)},r.math.Long.fromString=function(e,t){if(0==e.length)throw Error("number format error: empty string");var n=t||10;if(n<2||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return r.math.Long.fromString(e.substring(1),n).negate();if(e.indexOf("-")>=0)throw Error('number format error: interior "-" character: '+e);for(var i=r.math.Long.fromNumber(Math.pow(n,8)),o=r.math.Long.ZERO,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),u=parseInt(e.substring(a,a+s),n);if(s<8){var l=r.math.Long.fromNumber(Math.pow(n,s));o=o.multiply(l).add(r.math.Long.fromNumber(u))}else o=o.multiply(i),o=o.add(r.math.Long.fromNumber(u))}return o},r.math.Long.TWO_PWR_16_DBL_=65536,r.math.Long.TWO_PWR_24_DBL_=1<<24,r.math.Long.TWO_PWR_32_DBL_=r.math.Long.TWO_PWR_16_DBL_*r.math.Long.TWO_PWR_16_DBL_,r.math.Long.TWO_PWR_31_DBL_=r.math.Long.TWO_PWR_32_DBL_/2,r.math.Long.TWO_PWR_48_DBL_=r.math.Long.TWO_PWR_32_DBL_*r.math.Long.TWO_PWR_16_DBL_,r.math.Long.TWO_PWR_64_DBL_=r.math.Long.TWO_PWR_32_DBL_*r.math.Long.TWO_PWR_32_DBL_,r.math.Long.TWO_PWR_63_DBL_=r.math.Long.TWO_PWR_64_DBL_/2,r.math.Long.ZERO=r.math.Long.fromInt(0),r.math.Long.ONE=r.math.Long.fromInt(1),r.math.Long.NEG_ONE=r.math.Long.fromInt(-1),r.math.Long.MAX_VALUE=r.math.Long.fromBits(-1,2147483647),r.math.Long.MIN_VALUE=r.math.Long.fromBits(0,-2147483648),r.math.Long.TWO_PWR_24_=r.math.Long.fromInt(1<<24),r.math.Long.prototype.toInt=function(){return this.low_},r.math.Long.prototype.toNumber=function(){return this.high_*r.math.Long.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},r.math.Long.prototype.toString=function(e){var t=e||10;if(t<2||36<t)throw Error("radix out of range: "+t);if(this.isZero())return"0";if(this.isNegative()){if(this.equals(r.math.Long.MIN_VALUE)){var n=r.math.Long.fromNumber(t),i=this.div(n),o=i.multiply(n).subtract(this);return i.toString(t)+o.toInt().toString(t)}return"-"+this.negate().toString(t)}var a=r.math.Long.fromNumber(Math.pow(t,6)),s=(o=this,"");while(1){var u=o.div(a),l=o.subtract(u.multiply(a)).toInt(),d=l.toString(t);if(o=u,o.isZero())return d+s;while(d.length<6)d="0"+d;s=""+d+s}},r.math.Long.prototype.getHighBits=function(){return this.high_},r.math.Long.prototype.getLowBits=function(){return this.low_},r.math.Long.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:r.math.Long.TWO_PWR_32_DBL_+this.low_},r.math.Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(r.math.Long.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!=this.high_?this.high_:this.low_,t=31;t>0;t--)if(0!=(e&1<<t))break;return 0!=this.high_?t+33:t+1},r.math.Long.prototype.isZero=function(){return 0==this.high_&&0==this.low_},r.math.Long.prototype.isNegative=function(){return this.high_<0},r.math.Long.prototype.isOdd=function(){return 1==(1&this.low_)},r.math.Long.prototype.equals=function(e){return this.high_==e.high_&&this.low_==e.low_},r.math.Long.prototype.notEquals=function(e){return this.high_!=e.high_||this.low_!=e.low_},r.math.Long.prototype.lessThan=function(e){return this.compare(e)<0},r.math.Long.prototype.lessThanOrEqual=function(e){return this.compare(e)<=0},r.math.Long.prototype.greaterThan=function(e){return this.compare(e)>0},r.math.Long.prototype.greaterThanOrEqual=function(e){return this.compare(e)>=0},r.math.Long.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.subtract(e).isNegative()?-1:1},r.math.Long.prototype.negate=function(){return this.equals(r.math.Long.MIN_VALUE)?r.math.Long.MIN_VALUE:this.not().add(r.math.Long.ONE)},r.math.Long.prototype.add=function(e){var t=this.high_>>>16,n=65535&this.high_,i=this.low_>>>16,o=65535&this.low_,a=e.high_>>>16,s=65535&e.high_,u=e.low_>>>16,l=65535&e.low_,d=0,c=0,f=0,h=0;return h+=o+l,f+=h>>>16,h&=65535,f+=i+u,c+=f>>>16,f&=65535,c+=n+s,d+=c>>>16,c&=65535,d+=t+a,d&=65535,r.math.Long.fromBits(f<<16|h,d<<16|c)},r.math.Long.prototype.subtract=function(e){return this.add(e.negate())},r.math.Long.prototype.multiply=function(e){if(this.isZero())return r.math.Long.ZERO;if(e.isZero())return r.math.Long.ZERO;if(this.equals(r.math.Long.MIN_VALUE))return e.isOdd()?r.math.Long.MIN_VALUE:r.math.Long.ZERO;if(e.equals(r.math.Long.MIN_VALUE))return this.isOdd()?r.math.Long.MIN_VALUE:r.math.Long.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(r.math.Long.TWO_PWR_24_)&&e.lessThan(r.math.Long.TWO_PWR_24_))return r.math.Long.fromNumber(this.toNumber()*e.toNumber());var t=this.high_>>>16,n=65535&this.high_,i=this.low_>>>16,o=65535&this.low_,a=e.high_>>>16,s=65535&e.high_,u=e.low_>>>16,l=65535&e.low_,d=0,c=0,f=0,h=0;return h+=o*l,f+=h>>>16,h&=65535,f+=i*l,c+=f>>>16,f&=65535,f+=o*u,c+=f>>>16,f&=65535,c+=n*l,d+=c>>>16,c&=65535,c+=i*u,d+=c>>>16,c&=65535,c+=o*s,d+=c>>>16,c&=65535,d+=t*l+n*u+i*s+o*a,d&=65535,r.math.Long.fromBits(f<<16|h,d<<16|c)},r.math.Long.prototype.div=function(e){if(e.isZero())throw Error("division by zero");if(this.isZero())return r.math.Long.ZERO;if(this.equals(r.math.Long.MIN_VALUE)){if(e.equals(r.math.Long.ONE)||e.equals(r.math.Long.NEG_ONE))return r.math.Long.MIN_VALUE;if(e.equals(r.math.Long.MIN_VALUE))return r.math.Long.ONE;var t=this.shiftRight(1),n=t.div(e).shiftLeft(1);if(n.equals(r.math.Long.ZERO))return e.isNegative()?r.math.Long.ONE:r.math.Long.NEG_ONE;var i=this.subtract(e.multiply(n)),o=n.add(i.div(e));return o}if(e.equals(r.math.Long.MIN_VALUE))return r.math.Long.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();var a=r.math.Long.ZERO;i=this;while(i.greaterThanOrEqual(e)){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));var s=Math.ceil(Math.log(n)/Math.LN2),u=s<=48?1:Math.pow(2,s-48),l=r.math.Long.fromNumber(n),d=l.multiply(e);while(d.isNegative()||d.greaterThan(i))n-=u,l=r.math.Long.fromNumber(n),d=l.multiply(e);l.isZero()&&(l=r.math.Long.ONE),a=a.add(l),i=i.subtract(d)}return a},r.math.Long.prototype.modulo=function(e){return this.subtract(this.div(e).multiply(e))},r.math.Long.prototype.not=function(){return r.math.Long.fromBits(~this.low_,~this.high_)},r.math.Long.prototype.and=function(e){return r.math.Long.fromBits(this.low_&e.low_,this.high_&e.high_)},r.math.Long.prototype.or=function(e){return r.math.Long.fromBits(this.low_|e.low_,this.high_|e.high_)},r.math.Long.prototype.xor=function(e){return r.math.Long.fromBits(this.low_^e.low_,this.high_^e.high_)},r.math.Long.prototype.shiftLeft=function(e){if(e&=63,0==e)return this;var t=this.low_;if(e<32){var n=this.high_;return r.math.Long.fromBits(t<<e,n<<e|t>>>32-e)}return r.math.Long.fromBits(0,t<<e-32)},r.math.Long.prototype.shiftRight=function(e){if(e&=63,0==e)return this;var t=this.high_;if(e<32){var n=this.low_;return r.math.Long.fromBits(n>>>e|t<<32-e,t>>e)}return r.math.Long.fromBits(t>>e-32,t>=0?0:-1)},r.math.Long.prototype.shiftRightUnsigned=function(e){if(e&=63,0==e)return this;var t=this.high_;if(e<32){var n=this.low_;return r.math.Long.fromBits(n>>>e|t<<32-e,t>>>e)}return 32==e?r.math.Long.fromBits(t,0):r.math.Long.fromBits(t>>>e-32,0)},"undefined"==typeof g)var g={};function y(e){var t;for(t=[],i=0,len=e.length;i<len;i+=1)e[i].isRoot?t.push("root"):t.push(e[i].name);var n=function(e,t){var n;if(null!==e&&null!==t)for(n in e)e.hasOwnProperty(n)&&(t.hasOwnProperty(n)||(t[n]=e[n]))},r=function(e,t,r){var i,o,a,s,u;if(null!==e&&0!==e.length)for(i=0,o=e.length;i<o;i+=1)a=e[i],t.hasOwnProperty(a.name)&&(r.hasOwnProperty(a.name)?a.merge&&(s=t[a.name],u=r[a.name],"object"===typeof s&&"object"===typeof u?n(s,u):null!=a.mergeFunction?r[a.name]=a.mergeFunction(s,u):r[a.name]=s+u):r[a.name]=t[a.name])},o=function(e,t){var n,i,a,s,u,l,d,c=e;if(null!==c.children&&0!==c.children.length)for(n=0,i=c.children.length;n<i;n+=1)if(l=c.children[n],t.hasOwnProperty(l.name))if(l.isArray)for(u=t[l.name+"_asArray"],a=0,s=u.length;a<s;a+=1)d=u[a],r(c.properties,t,d),o(l,d);else d=t[l.name],r(c.properties,t,d),o(l,d)},a=function(n){var r,i,s,u,l,d,c;if(null===n)return n;if("object"!==typeof n)return n;for(r=0,i=t.length;r<i;r+=1)"root"===t[r]&&(l=e[r],d=n,o(l,d));for(u in n)if(n.hasOwnProperty(u)){if(s=t.indexOf(u),-1!==s)if(l=e[s],l.isArray)for(c=n[u+"_asArray"],r=0,i=c.length;r<i;r+=1)d=c[r],o(l,d);else d=n[u],o(l,d);a(n[u])}return n};return{run:a}}
/*!
 *
 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */function v(e,t,n){null!==t&&void 0!==t||(t="_"),null!==n&&void 0!==n||(n=!1);var r="1.0.11",i=!1,o={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function a(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function s(e){return e.prefix}function u(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):e}function l(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}function d(r){if(r.nodeType==o.DOCUMENT_NODE){var u,c,f=r.firstChild;for(u=0,c=r.childNodes.length;u<c;u+=1)if(r.childNodes[u].nodeType!==o.COMMENT_NODE){f=r.childNodes[u];break}if(n)p=d(f);else{p={};var h=a(f);p[h]=d(f)}return p}if(r.nodeType==o.ELEMENT_NODE){var p=new Object;p.__cnt=0;for(var m=r.childNodes,g=0;g<m.length;g++){f=m.item(g),h=a(f);if(p.__cnt++,null==p[h])p[h]=d(f),p[h+"_asArray"]=new Array(1),p[h+"_asArray"][0]=p[h];else{if(null!=p[h]&&!(p[h]instanceof Array)){var y=p[h];p[h]=new Array,p[h][0]=y,p[h+"_asArray"]=p[h]}var v=0;while(null!=p[h][v])v++;p[h][v]=d(f)}}for(var _=0;_<r.attributes.length;_++){var E=r.attributes.item(_);p.__cnt++;for(var b=E.value,T=0,S=e.length;T<S;T++){var I=e[T];I.test.call(this,E.value)&&(b=I.converter.call(this,E.value))}p[t+E.name]=b}var w=s(r);return null!=w&&""!=w&&(p.__cnt++,p.__prefix=w),1==p.__cnt&&null!=p["#text"]&&(p=p["#text"]),null!=p["#text"]&&(p.__text=p["#text"],i&&(p.__text=l(p.__text)),delete p["#text"],delete p["#text_asArray"]),null!=p["#cdata-section"]&&(p.__cdata=p["#cdata-section"],delete p["#cdata-section"],delete p["#cdata-section_asArray"]),null==p.__text&&null==p.__cdata||(p.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),p}return r.nodeType==o.TEXT_NODE||r.nodeType==o.CDATA_SECTION_NODE?r.nodeValue:r.nodeType==o.COMMENT_NODE?null:void 0}function c(e,t,n,r){var i="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=n)for(var o=0;o<n.length;o++){var a=n[o],s=e[a];i+=" "+a.substr(1)+"='"+s+"'"}return i+=r?"/>":">",i}function f(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function h(e,t){return-1!==e.indexOf(t,e.length-t.length)}function p(e,t){return!!(h(t.toString(),"_asArray")||0==t.toString().indexOf("_")||e[t]instanceof Function)}function m(e){var t=0;if(e instanceof Object)for(var n in e)p(e,n)||t++;return t}function g(e){var t=[];if(e instanceof Object)for(var n in e)-1==n.toString().indexOf("__")&&0==n.toString().indexOf("_")&&t.push(n);return t}function y(e){var t="";return null!=e.__cdata&&(t+="<![CDATA["+e.__cdata+"]]>"),null!=e.__text&&(t+=i?u(e.__text):e.__text),t}function v(e){var t="";return e instanceof Object?t+=y(e):null!=e&&(t+=i?u(e):e),t}function _(e,t,n){var r="";if(0==e.length)r+=c(e,t,n,!0);else for(var i=0;i<e.length;i++)r+=c(e[i],t,g(e[i]),!1),r+=E(e[i]),r+=f(e[i],t);return r}function E(e){var t="",n=m(e);if(n>0)for(var r in e)if(!p(e,r)){var i=e[r],o=g(i);if(null==i||void 0==i)t+=c(i,r,o,!0);else if(i instanceof Object)if(i instanceof Array)t+=_(i,r,o);else{var a=m(i);a>0||null!=i.__text||null!=i.__cdata?(t+=c(i,r,o,!1),t+=E(i),t+=f(i,r)):t+=c(i,r,o,!0)}else t+=c(i,r,o,!1),t+=v(i),t+=f(i,r)}return t+=v(e),t}this.parseXmlString=function(e){var t;if(window.DOMParser)try{var n=new window.DOMParser;if(t=n.parseFromString(e,"text/xml"),t.getElementsByTagName("parsererror").length>0)throw new Error("Error parsing XML")}catch(r){return null}return t},this.xml2json=function(e){return d(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null===t?t:this.xml2json(t)},this.json2xml_str=function(e){return E(e)},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return r},this.escapeMode=function(e){i=e}}"undefined"==typeof g.Math&&(g.Math={}),g.Math.to64BitNumber=function(e,t){var n,i,o;return n=new r.math.Long(0,t),i=new r.math.Long(e,0),o=n.add(i),o.toNumber()},
/*!
 *
 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
function(e){t=e()}(function(){"use strict";var e,t,r=b(),i=function(){};function o(e){var t=Function.call;return function(){return t.apply(e,arguments)}}"undefined"!==typeof n?t=n.nextTick:"function"===typeof setImmediate?t="undefined"!==typeof window?setImmediate.bind(window):setImmediate:function(){var e,n={task:void 0,next:null},r=n,i=2,o=0,a=0,s=0;function u(){if(--o,++s>=i){s=0,i*=4;var t=a&&Math.min(a-1,i);while(o<t)++o,e()}while(a){--a,n=n.next;var r=n.task;n.task=void 0,r()}s=0}if(t=function(t){r=r.next={task:t,next:null},o<++a&&o<i&&(++o,e())},"undefined"!==typeof MessageChannel){var l=new MessageChannel;l.port1.onmessage=u,e=function(){l.port2.postMessage(0)}}else e=function(){setTimeout(u,0)}}();var a,s=o(Array.prototype.slice),u=o(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(1===arguments.length)do{if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}while(1);for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),l=o(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),d=o(Array.prototype.map||function(e,t){var n=this,r=[];return u(n,function(i,o,a){r.push(e.call(t,o,a,n))},void 0),r}),c=Object.create||function(e){function t(){}return t.prototype=e,new t},f=o(Object.prototype.hasOwnProperty),h=Object.keys||function(e){var t=[];for(var n in e)f(e,n)&&t.push(n);return t},p=o(Object.prototype.toString);function m(e){return"[object StopIteration]"===p(e)||e instanceof a}a="undefined"!==typeof ReturnValue?ReturnValue:function(e){this.value=e},T.longStackJumpLimit=1;var g="From previous event:";function y(e,t){t.stack&&"object"===typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(g)&&(e.stack=v(e.stack)+"\n"+g+"\n"+v(t.stack))}function v(e){for(var t=e.split("\n"),n=[],r=0;r<t.length;++r){var i=t[r];E(i)||_(i)||n.push(i)}return n.join("\n")}function _(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function E(t){var n=/at .+ \((.*):(\d+):\d+\)/.exec(t);if(!n)return!1;var i=n[1],o=n[2];return i===e&&o>=r&&o<=fe}function b(){if(Error.captureStackTrace){var t,n,r=Error.prepareStackTrace;return Error.prepareStackTrace=function(e,r){t=r[1].getFileName(),n=r[1].getLineNumber()},(new Error).stack,Error.prepareStackTrace=r,e=t,n}}function T(e){return F(e)}function S(){var e,n=[],r=[],i=c(S.prototype),o=c(w.prototype);function a(i){n&&(e=F(i),u(n,function(n,r){t(function(){e.promiseDispatch.apply(e,r)})},void 0),n=void 0,r=void 0)}return o.promiseDispatch=function(i,o,a){var u=s(arguments);n?(n.push(u),"when"===o&&a[1]&&r.push(a[1])):t(function(){e.promiseDispatch.apply(e,u)})},o.valueOf=function(){return n?o:(e=x(e),e)},Error.captureStackTrace&&T.longStackJumpLimit>0&&(Error.captureStackTrace(o,S),o.stack=o.stack.substring(o.stack.indexOf("\n")+1)),i.promise=o,i.resolve=a,i.fulfill=function(e){a(O(e))},i.reject=function(e){a(L(e))},i.notify=function(e){n&&u(r,function(n,r){t(function(){r(e)})},void 0)},i}function I(e){var t=S();return X(e,t.resolve,t.reject,t.notify).fail(t.reject),t.promise}function w(e,t,n,r,i){void 0===t&&(t=function(e){return L(new Error("Promise does not support operation: "+e))});var o=c(w.prototype);return o.promiseDispatch=function(n,i,a){var s;try{s=e[i]?e[i].apply(o,a):t.call(o,i,a)}catch(r){s=L(r)}n&&n(s)},n&&(o.valueOf=n),i&&(o.exception=r),o}function x(e){return A(e)?e.valueOf():e}function A(e){return e&&"function"===typeof e.promiseDispatch}function D(e){return e&&"function"===typeof e.then}function R(e){return!M(e)&&!C(e)}function M(e){return!D(x(e))}function C(e){return e=x(e),A(e)&&"exception"in e}T.nextTick=t,T.defer=S,S.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(s(arguments,1)):e.resolve(n)}},T.promise=I,T.makePromise=w,w.prototype.then=function(e,t,n){return U(this,e,t,n)},w.prototype.thenResolve=function(e){return U(this,function(){return e})},u(["isFulfilled","isRejected","isPending","dispatch","when","spread","get","put","set","del","delete","post","send","invoke","keys","fapply","fcall","fbind","all","allResolved","timeout","delay","catch","finally","fail","fin","progress","done","nfcall","nfapply","nfbind","denodeify","nbind","ncall","napply","nbind","npost","nsend","ninvoke","nodeify"],function(e,t){w.prototype[t]=function(){return T[t].apply(T,[this].concat(s(arguments)))}},void 0),w.prototype.toSource=function(){return this.toString()},w.prototype.toString=function(){return"[object Promise]"},T.nearer=x,T.isPromise=A,T.isPromiseAlike=D,T.isPending=R,T.isFulfilled=M,T.isRejected=C;var N=[],P=[];function L(e){var t=w({when:function(t){if(t){var n=l(N,this);-1!==n&&(P.splice(n,1),N.splice(n,1))}return t?t(e):this}},function(){return L(e)},function(){return this},e,!0);return N.push(t),P.push(e),t}function O(e){return w({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},delete:function(t){delete e[t]},post:function(t,n){return null==t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return h(e)}},void 0,function(){return e})}function F(e){return A(e)?e:(e=x(e),D(e)?B(e):O(e))}function B(e){var n=S();return t(function(){try{e.then(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}}),n.promise}function k(e){return w({isDef:function(){}},function(t,n){return q(e,t,n)},function(){return x(e)})}function U(e,n,r,i){var o=S(),a=!1;function s(e){try{return"function"===typeof n?n(e):e}catch(t){return L(t)}}function u(e){if("function"===typeof r){y(e,d);try{return r(e)}catch(t){return L(t)}}return L(e)}function l(e){return"function"===typeof i?i(e):e}var d=F(e);return t(function(){d.promiseDispatch(function(e){a||(a=!0,o.resolve(s(e)))},"when",[function(e){a||(a=!0,o.resolve(u(e)))}])}),d.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=l(e)}catch(r){if(n=!0,!T.onerror)throw r;T.onerror(r)}n||o.notify(t)}]),o.promise}function H(e,t,n){return U(e,function(e){return Q(e).then(function(e){return t.apply(void 0,e)},n)},n)}function j(e){return function(){function t(e,t){var o;try{o=n[e](t)}catch(a){return m(a)?a.value:L(a)}return U(o,r,i)}var n=e.apply(this,arguments),r=t.bind(t,"send"),i=t.bind(t,"throw");return r()}}function K(e){throw new a(e)}function V(e){return function(){return H([this,Q(arguments)],function(t,n){return e.apply(t,n)})}}function q(e,n,r){var i=S();return t(function(){F(e).promiseDispatch(i.resolve,n,r)}),i.promise}function G(e){return function(t){var n=s(arguments,1);return q(t,e,n)}}"undefined"!==typeof n&&n.on&&n.on("exit",function(){for(var e=0;e<P.length;e++){var t=P[e];t&&"undefined"!==typeof t.stack?console.warn("Unhandled rejected promise:",t.stack):console.warn("Unhandled rejected promise (no stack):",t)}}),T.reject=L,T.fulfill=O,T.resolve=F,T.master=k,T.when=U,T.spread=H,T.async=j,T["return"]=K,T.promised=V,T.dispatch=q,T.dispatcher=G,T.get=G("get"),T.set=G("set"),T["delete"]=T.del=G("delete");var Y=T.post=G("post");function z(e,t){var n=s(arguments,2);return Y(e,t,n)}function W(e,t){return q(e,"apply",[void 0,t])}function X(e){var t=s(arguments,1);return W(e,t)}function $(e){var t=s(arguments,1);return function(){var n=t.concat(s(arguments));return q(e,"apply",[this,n])}}function Q(e){return U(e,function(e){var t=e.length;if(0===t)return F(e);var n=S();return u(e,function(r,i,o){M(i)?(e[o]=x(i),0===--t&&n.resolve(e)):U(i,function(r){e[o]=r,0===--t&&n.resolve(e)}).fail(n.reject)},void 0),n.promise})}function J(e){return U(e,function(e){return e=d(e,F),U(Q(d(e,function(e){return U(e,i,i)})),function(){return e})})}function Z(e,t){return U(e,void 0,t)}function ee(e,t){return U(e,void 0,void 0,t)}function te(e,t){return U(e,function(e){return U(t(),function(){return e})},function(e){return U(t(),function(){return L(e)})})}function ne(e,r,i,o){var a=function(n){t(function(){if(y(n,e),!T.onerror)throw n;T.onerror(n)})},s=r||i||o?U(e,r,i,o):e;"object"===typeof n&&n&&n.domain&&(a=n.domain.bind(a)),Z(s,a)}function re(e,t){var n=S(),r=setTimeout(function(){n.reject(new Error("Timed out after "+t+" ms"))},t);return U(e,function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)}),n.promise}function ie(e,t){void 0===t&&(t=e,e=void 0);var n=S();return setTimeout(function(){n.resolve(e)},t),n.promise}function oe(e,t){var n=s(t),r=S();return n.push(r.makeNodeResolver()),W(e,n).fail(r.reject),r.promise}function ae(e){var t=s(arguments,1),n=S();return t.push(n.makeNodeResolver()),W(e,t).fail(n.reject),n.promise}function se(e){var t=s(arguments,1);return function(){var n=t.concat(s(arguments)),r=S();return n.push(r.makeNodeResolver()),W(e,n).fail(r.reject),r.promise}}function ue(e){var t=s(arguments,1);return function(){var n=t.concat(s(arguments)),r=S();n.push(r.makeNodeResolver());var i=this;function o(){return e.apply(i,arguments)}return W(o,n).fail(r.reject),r.promise}}function le(e,t,n){var r=s(n||[]),i=S();return r.push(i.makeNodeResolver()),Y(e,t,r).fail(i.reject),i.promise}function de(e,t){var n=s(arguments,2),r=S();return n.push(r.makeNodeResolver()),Y(e,t,n).fail(r.reject),r.promise}function ce(e,n){if(!n)return e;e.then(function(e){t(function(){n(null,e)})},function(e){t(function(){n(e)})})}T.send=z,T.invoke=z,T.fapply=W,T["try"]=X,T.fcall=X,T.fbind=$,T.keys=G("keys"),T.all=Q,T.allResolved=J,T["catch"]=T.fail=Z,T.progress=ee,T["finally"]=T.fin=te,T.done=ne,T.timeout=re,T.delay=ie,T.nfapply=oe,T.nfcall=ae,T.nfbind=se,T.denodeify=T.nfbind,T.nbind=ue,T.npost=le,T.nsend=de,T.ninvoke=T.nsend,T.nodeify=ce;var fe=b();return T});var _=function(){var e={boxes:{},fields:{},debug:!1,warningHandler:function(e){}},t={};return e.registerTypeBoxes=function(){t["moov"]=e.boxes.MovieBox,t["moof"]=e.boxes.MovieFragmentBox,t["ftyp"]=e.boxes.FileTypeBox,t["mfhd"]=e.boxes.MovieFragmentHeaderBox,t["mfra"]=e.boxes.MovieFragmentRandomAccessBox,t["udta"]=e.boxes.UserDataBox,t["trak"]=e.boxes.TrackBox,t["edts"]=e.boxes.EditBox,t["mdia"]=e.boxes.MediaBox,t["minf"]=e.boxes.MediaInformationBox,t["dinf"]=e.boxes.DataInformationBox,t["stbl"]=e.boxes.SampleTableBox,t["mvex"]=e.boxes.MovieExtendsBox,t["traf"]=e.boxes.TrackFragmentBox,t["meta"]=e.boxes.MetaBox,t["mvhd"]=e.boxes.MovieHeaderBox,t["mdat"]=e.boxes.MediaDataBox,t["free"]=e.boxes.FreeSpaceBox,t["sidx"]=e.boxes.SegmentIndexBox,t["tkhd"]=e.boxes.TrackHeaderBox,t["mdhd"]=e.boxes.MediaHeaderBox,t["mehd"]=e.boxes.MovieExtendsHeaderBox,t["hdlr"]=e.boxes.HandlerBox,t["stts"]=e.boxes.TimeToSampleBox,t["stsc"]=e.boxes.SampleToChunkBox,t["stco"]=e.boxes.ChunkOffsetBox,t["trex"]=e.boxes.TrackExtendsBox,t["vmhd"]=e.boxes.VideoMediaHeaderBox,t["smhd"]=e.boxes.SoundMediaHeaderBox,t["dref"]=e.boxes.DataReferenceBox,t["url "]=e.boxes.DataEntryUrlBox,t["urn "]=e.boxes.DataEntryUrnBox,t["tfhd"]=e.boxes.TrackFragmentHeaderBox,t["tfdt"]=e.boxes.TrackFragmentBaseMediaDecodeTimeBox,t["trun"]=e.boxes.TrackFragmentRunBox,t["stsd"]=e.boxes.SampleDescriptionBox,t["sdtp"]=e.boxes.SampleDependencyTableBox,t["avc1"]=e.boxes.AVC1VisualSampleEntryBox,t["encv"]=e.boxes.EncryptedVideoBox,t["avcC"]=e.boxes.AVCConfigurationBox,t["pasp"]=e.boxes.PixelAspectRatioBox,t["mp4a"]=e.boxes.MP4AudioSampleEntryBox,t["enca"]=e.boxes.EncryptedAudioBox,t["esds"]=e.boxes.ESDBox,t["stsz"]=e.boxes.SampleSizeBox,t["pssh"]=e.boxes.ProtectionSystemSpecificHeaderBox,t["senc"]=e.boxes.SampleEncryptionBox,t["saiz"]=e.boxes.SampleAuxiliaryInformationSizesBox,t["saio"]=e.boxes.SampleAuxiliaryInformationOffsetsBox,t["sinf"]=e.boxes.ProtectionSchemeInformationBox,t["schi"]=e.boxes.SchemeInformationBox,t["tenc"]=e.boxes.TrackEncryptionBox,t["schm"]=e.boxes.SchemeTypeBox,t["elst"]=e.boxes.EditListBox,t["hmhd"]=e.boxes.HintMediaHeaderBox,t["nmhd"]=e.boxes.NullMediaHeaderBox,t["ctts"]=e.boxes.CompositionOffsetBox,t["cslg"]=e.boxes.CompositionToDecodeBox,t["stss"]=e.boxes.SyncSampleBox,t["tref"]=e.boxes.TrackReferenceBox,t["frma"]=e.boxes.OriginalFormatBox,t["subs"]=e.boxes.SubSampleInformationBox,t[JSON.stringify([109,29,155,5,66,213,68,230,128,226,20,29,175,247,87,178])]=e.boxes.TfxdBox,t[JSON.stringify([212,128,126,242,202,57,70,149,142,84,38,203,158,70,167,159])]=e.boxes.TfrfBox,t[JSON.stringify([208,138,79,24,16,243,74,130,182,200,50,216,171,161,131,211])]=e.boxes.PiffProtectionSystemSpecificHeaderBox,t[JSON.stringify([137,116,219,206,123,231,76,81,132,249,113,72,249,136,37,84])]=e.boxes.PiffTrackEncryptionBox,t[JSON.stringify([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244])]=e.boxes.PiffSampleEncryptionBox},e.constructorTypeBox=function(e){var t,n;return t=Object.create(e.prototype),n=Array.prototype.slice.call(arguments,1),e.apply(t,n),t},e.searchBox=function(n,r){var i;return i=r?t[r]:t[n],i||(i=e.boxes.UnknownBox),i},e.createBox=function(t,n,r){return e.constructorTypeBox.apply(null,[e.searchBox(t,r),n])},e.deserialize=function(t){var n=new e.boxes.File;try{n.read(t)}catch(r){return e.warningHandler(r.message),null}return n},e.serialize=function(e){var t=e.getLength(),n=new Uint8Array(t);return e.write(n),n},e.ParseException=function(e){this.message=e,this.name="ParseException"},e.DataIntegrityException=function(e){this.message=e,this.name="DataIntegrityException"},e}();"undefined"!==typeof e.exports?e.exports=_:window.mp4lib=_,_.fields.readBytes=function(e,t,n){var r=0,i=0;for(i=0;i<n;i++)r<<=8,r+=e[t],t++;return r},_.fields.writeBytes=function(e,t,n,r){var i=0;for(i=0;i<n;i++)e[t+n-i-1]=255&r,r>>=8},_.fields.readString=function(e,t,n){var r,i="";for(r=t;r<t+n;r++)i+=String.fromCharCode(e[r]);return i},_.fields.NumberField=function(e,t){this.bits=e,this.signed=t},_.fields.NumberField.prototype.read=function(e,t){return _.fields.readBytes(e,t,this.bits/8)},_.fields.NumberField.prototype.write=function(e,t,n){_.fields.writeBytes(e,t,this.bits/8,n)},_.fields.NumberField.prototype.getLength=function(){return this.bits/8},_.fields.LongNumberField=function(){},_.fields.LongNumberField.prototype.read=function(e,t){var n=_.fields.readBytes(e,t,4),i=_.fields.readBytes(e,t+4,4);return r.math.Long.fromBits(i,n)},_.fields.LongNumberField.prototype.write=function(e,t,n){var i="function"===typeof n.getLowBits?n:r.math.Long.fromNumber(n),o=i.getLowBits(),a=i.getHighBits();_.fields.writeBytes(e,t,4,a),_.fields.writeBytes(e,t+4,4,o)},_.fields.LongNumberField.prototype.getLength=function(){return 8},_.fields.FixedLenStringField=function(e){this.size=e},_.fields.FixedLenStringField.prototype.read=function(e,t){var n="",r=0;for(r=0;r<this.size;r++)n+=String.fromCharCode(e[t+r]);return n},_.fields.FixedLenStringField.prototype.write=function(e,t,n){var r=0;for(r=0;r<this.size;r++)e[t+r]=n.charCodeAt(r)},_.fields.FixedLenStringField.prototype.getLength=function(){return this.size},_.fields.BoxTypeField=function(){},_.fields.BoxTypeField.prototype.read=function(e,t){var n="",r=0;for(r=0;r<4;r++)n+=String.fromCharCode(e[t+r]);return n},_.fields.BoxTypeField.prototype.write=function(e,t,n){var r=0;for(r=0;r<4;r++)e[t+r]=n.charCodeAt(r)},_.fields.BoxTypeField.prototype.getLength=function(){return 4},_.fields.StringField=function(){},_.fields.StringField.prototype.read=function(e,t,n){var r="",i=0;for(i=t;i<n;i++)if(r+=String.fromCharCode(e[i]),0===e[i])return r;if(n-t<255&&e[0]==String.fromCharCode(n-t))return r=r.substr(1,n-t),_.warningHandler('null-terminated string expected, but found a string "'+r+'", which seems to be length-prefixed instead. Conversion done.'),r;throw new _.ParseException('expected null-terminated string, but end of field reached without termination. Read so far:"'+r+'"')},_.fields.StringField.prototype.write=function(e,t,n){var r=0;for(r=0;r<n.length;r++)e[t+r]=n.charCodeAt(r);e[t+n.length]=0},_.fields.StringField.prototype.getLength=function(e){return e.length},_.fields.ArrayField=function(e,t){this.innerField=e,this.size=t},_.fields.ArrayField.prototype.read=function(e,t){var n=-1,r=[],i=0;for(i=0;i<this.size;i++)r.push(this.innerField.read(e,t)),-1==n&&(n=this.innerField.getLength(r[i])),t+=n;return r},_.fields.FIELD_INT8=new _.fields.NumberField(8,!0),_.fields.FIELD_INT16=new _.fields.NumberField(16,!0),_.fields.FIELD_INT32=new _.fields.NumberField(32,!0),_.fields.FIELD_INT64=new _.fields.LongNumberField,_.fields.FIELD_UINT8=new _.fields.NumberField(8,!1),_.fields.FIELD_UINT16=new _.fields.NumberField(16,!1),_.fields.FIELD_UINT32=new _.fields.NumberField(32,!1),_.fields.FIELD_UINT64=new _.fields.LongNumberField,_.fields.FIELD_BIT8=new _.fields.NumberField(8,!1),_.fields.FIELD_BIT16=new _.fields.NumberField(16,!1),_.fields.FIELD_BIT24=new _.fields.NumberField(24,!1),_.fields.FIELD_BIT32=new _.fields.NumberField(32,!1),_.fields.FIELD_ID=new _.fields.BoxTypeField(4),_.fields.FIELD_STRING=new _.fields.StringField,_.boxes.File=function(){this.boxes=[]},_.boxes.File.prototype.getBoxByType=function(e){var t=0;for(t=0;t<this.boxes.length;t++)if(this.boxes[t].boxtype===e)return this.boxes[t];return null},_.boxes.File.prototype.getLength=function(){var e=0,t=0;for(t=0;t<this.boxes.length;t++)this.boxes[t].computeLength(),e+=this.boxes[t].size;return e},_.boxes.File.prototype.write=function(e){var t=0,n=0;for(n=0;n<this.boxes.length;n++)t=this.boxes[n].write(e,t)},_.boxes.File.prototype.read=function(e){var t,n=0,r=null,i=0,o=null,a=0,s=e.length;while(a<s)if(n=_.fields.FIELD_UINT32.read(e,a),r=_.fields.readString(e,a+4,4),"uuid"==r&&(i=1==n?16:8,o=new _.fields.ArrayField(_.fields.FIELD_INT8,16).read(e,a+i,a+i+16),o=JSON.stringify(o)),t=_.createBox(r,n,o),"uuid"===r?(a=t.read(e,a+16*_.fields.FIELD_INT8.getLength()+8,a+n),o=null):a=t.read(e,a+8,a+n),_.debug&&(t.__sourceBuffer=e.subarray(a-t.size,a)),t.boxtype&&this.boxes.push(t),t.size<=0||null===t.size)throw new _.ParseException("Problem on size of box "+t.boxtype+", parsing stopped to avoid infinite loop")},_.boxes.File.prototype.getBoxOffsetByType=function(e){var t=0,n=0;for(n=0;n<this.boxes.length;n++){if(this.boxes[n].boxtype===e)return t;t+=this.boxes[n].size}return-1},_.boxes.File.prototype.getBoxIndexByType=function(e){var t=0,n=0;for(n=0;n<this.boxes.length;n++){if(this.boxes[n].boxtype===e)return t;t++}return-1},_.boxes.Box=function(e,t,n,r){this.size=t||null,this.boxtype=e,1===this.size&&r&&(this.largesize=r),n&&(this.extended_type=n),this.localPos=0,this.localEnd=0},_.boxes.Box.prototype.write=function(e,t){this.localPos=t;var n=0;if(this._writeData(e,_.fields.FIELD_UINT32,this.size),this.extended_type?this._writeData(e,_.fields.FIELD_ID,"uuid"):this._writeData(e,_.fields.FIELD_ID,this.boxtype),1===this.size&&this._writeData(e,_.fields.FIELD_INT64,this.largesize),this.extended_type)for(n=0;n<16;n++)this._writeData(e,_.fields.FIELD_INT8,this.extended_type[n])},_.boxes.Box.prototype.getBoxByType=function(e){var t=0;if(this.hasOwnProperty("boxes"))for(t=0;t<this.boxes.length;t++)if(this.boxes[t].boxtype===e)return this.boxes[t];return null},_.boxes.Box.prototype.getBoxesByType=function(e){var t=[],n=0;if(this.hasOwnProperty("boxes"))for(n=0;n<this.boxes.length;n++)this.boxes[n].boxtype===e&&t.push(this.boxes[n]);return t},_.boxes.Box.prototype.removeBoxByType=function(e){var t=0;if(this.hasOwnProperty("boxes"))for(t=0;t<this.boxes.length;t++)this.boxes[t].boxtype===e&&this.boxes.splice(t,1);else _.warningHandler(this.boxtype+"does not have "+e+" box, impossible to remove it")},_.boxes.Box.prototype.getBoxOffsetByType=function(e){var t=8,n=0;if(this.hasOwnProperty("boxes"))for(n=0;n<this.boxes.length;n++){if(this.boxes[n].boxtype===e)return t;t+=this.boxes[n].size}return null},_.boxes.Box.prototype.getBoxIndexByType=function(e){var t=0,n=0;if(this.hasOwnProperty("boxes"))for(n=0;n<this.boxes.length;n++){if(this.boxes[n].boxtype===e)return t;t++}return null},_.boxes.Box.prototype.computeLength=function(){this.size=_.fields.FIELD_UINT32.getLength()+_.fields.FIELD_ID.getLength(),this.extended_type&&(this.size+=16*_.fields.FIELD_INT8.getLength())},_.boxes.Box.prototype._readData=function(e,t){var n=t.read(e,this.localPos,this.localEnd);return this.localPos+=t.getLength(n),n},_.boxes.Box.prototype._writeData=function(e,t,n){if(void 0===n||null===n)throw new _.ParseException("a field to write is null or undefined for box : "+this.boxtype);t.write(e,this.localPos,n),this.localPos+=t.getLength(n)},_.boxes.Box.prototype._writeBuffer=function(e,t,n){e.set(t,this.localPos),this.localPos+=n},_.boxes.Box.prototype._writeArrayData=function(e,t,n){var r=0;if(void 0===n||null===n||0===n.length)throw new _.ParseException("an array to write is null, undefined or length = 0 for box : "+this.boxtype);for(r=0;r<n.length;r++)this._writeData(e,t,n[r])},_.boxes.Box.prototype._readArrayData=function(e,t){var n=[],r=t.getLength(),i=(this.localEnd-this.localPos)/r,o=0;for(o=0;o<i;o++)n.push(t.read(e,this.localPos)),this.localPos+=r;return n},_.boxes.Box.prototype._readArrayFieldData=function(e,t,n){var r=-1,i=[],o=0;for(o=0;o<n;o++)i.push(t.read(e,this.localPos)),-1===r&&(r=t.getLength(i[o])),this.localPos+=r;return i},_.boxes.ContainerBox=function(e,t){_.boxes.Box.call(this,e,t),this.boxes=[]},_.boxes.ContainerBox.prototype=Object.create(_.boxes.Box.prototype),_.boxes.ContainerBox.prototype.constructor=_.boxes.ContainerBox,_.boxes.ContainerBox.prototype.computeLength=function(){_.boxes.Box.prototype.computeLength.call(this);var e=0;for(e=0;e<this.boxes.length;e++)this.boxes[e].computeLength(),this.size+=this.boxes[e].size},_.boxes.ContainerBox.prototype.write=function(e,t){_.boxes.Box.prototype.write.call(this,e,t);var n=0;for(n=0;n<this.boxes.length;n++)this.localPos=this.boxes[n].write(e,this.localPos);return this.localPos},_.boxes.ContainerBox.prototype.read=function(e,t,n){var r,i,o=0,a=0,s=null;while(t<n)if(o=_.fields.FIELD_UINT32.read(e,t),r=_.fields.readString(e,t+4,4),"uuid"===r&&(a=1==o?16:8,s=new _.fields.ArrayField(_.fields.FIELD_INT8,16).read(e,t+a,t+a+16),s=JSON.stringify(s)),i=_.createBox(r,o,s),"uuid"===r?(t=i.read(e,t+16*_.fields.FIELD_INT8.getLength()+8,t+o),s=null):t=i.read(e,t+8,t+o),_.debug&&(i.__sourceBuffer=e.subarray(t-i.size,t)),i.boxtype&&this.boxes.push(i),i.size<=0||null===i.size)throw new _.ParseException("Problem on size of box "+i.boxtype+", parsing stopped to avoid infinite loop");return t},_.boxes.FullBox=function(e,t,n){_.boxes.Box.call(this,e,t,n),this.version=null,this.flags=null},_.boxes.FullBox.prototype=Object.create(_.boxes.Box.prototype),_.boxes.FullBox.prototype.constructor=_.boxes.FullBox,_.boxes.FullBox.prototype.read=function(e,t,n){this.localPos=t,this.localEnd=n,this.version=this._readData(e,_.fields.FIELD_INT8),this.flags=this._readData(e,_.fields.FIELD_BIT24)},_.boxes.FullBox.prototype.write=function(e,t){_.boxes.Box.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_INT8,this.version),this._writeData(e,_.fields.FIELD_BIT24,this.flags)},_.boxes.FullBox.prototype.getFullBoxAttributesLength=function(){this.size+=_.fields.FIELD_INT8.getLength()+_.fields.FIELD_BIT24.getLength()},_.boxes.FullBox.prototype.computeLength=function(){_.boxes.Box.prototype.computeLength.call(this),_.boxes.FullBox.prototype.getFullBoxAttributesLength.call(this)},_.boxes.ContainerFullBox=function(e,t){_.boxes.FullBox.call(this,e,t),this.boxes=[]},_.boxes.ContainerFullBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.ContainerFullBox.prototype.constructor=_.boxes.ContainerFullBox,_.boxes.ContainerFullBox.prototype.computeLength=function(e){_.boxes.FullBox.prototype.computeLength.call(this);var t=0;for(e&&(this.size+=_.fields.FIELD_UINT32.getLength()),t=0;t<this.boxes.length;t++)this.boxes[t].computeLength(),this.size+=this.boxes[t].size},_.boxes.ContainerFullBox.prototype.read=function(e,t,n,r){_.boxes.FullBox.prototype.read.call(this,e,t,n);var i,o,a=0,s=0,u=null;r&&(this.entry_count=this._readData(e,_.fields.FIELD_UINT32));while(this.localPos<this.localEnd)if(a=_.fields.FIELD_UINT32.read(e,this.localPos),i=_.fields.readString(e,this.localPos+4,4),"uuid"==i&&(s=1==a?16:8,u=new _.fields.ArrayField(_.fields.FIELD_INT8,16).read(e,this.localPos+s,this.localPos+s+16),u=JSON.stringify(u)),o=_.createBox(i,a,u),"uuid"===i?(this.localPos=o.read(e,this.localPos+16*_.fields.FIELD_INT8.getLength()+8,this.localPos+a),u=null):this.localPos=o.read(e,this.localPos+8,this.localPos+a),_.debug&&(o.__sourceBuffer=e.subarray(this.localPos-o.size,this.localPos)),o.boxtype&&this.boxes.push(o),o.size<=0||null===o.size)throw new _.ParseException("Problem on size of box "+o.boxtype+", parsing stopped to avoid infinite loop");return this.localPos},_.boxes.ContainerFullBox.prototype.write=function(e,t,n){_.boxes.FullBox.prototype.write.call(this,e,t);var r=0;for(!0===n&&this._writeData(e,_.fields.FIELD_UINT32,this.entry_count),r=0;r<this.boxes.length;r++)this.localPos=this.boxes[r].write(e,this.localPos);return this.localPos},_.boxes.UnknownBox=function(e){_.boxes.Box.call(this,null,e)},_.boxes.UnknownBox.prototype=Object.create(_.boxes.Box.prototype),_.boxes.UnknownBox.prototype.constructor=_.boxes.UnknownBox,_.boxes.UnknownBox.prototype.read=function(e,t,n){return this.localPos=t,this.localEnd=n,this.unrecognized_data=e.subarray(this.localPos,this.localEnd),this.localEnd},_.boxes.UnknownBox.prototype.write=function(e,t){return _.boxes.Box.prototype.write.call(this,e,t),this._writeBuffer(e,this.unrecognized_data,this.unrecognized_data.length),this.localPos},_.boxes.UnknownBox.prototype.computeLength=function(){_.boxes.Box.prototype.computeLength.call(this),this.size+=this.unrecognized_data.length},_.boxes.FileTypeBox=function(e){_.boxes.Box.call(this,"ftyp",e)},_.boxes.FileTypeBox.prototype=Object.create(_.boxes.Box.prototype),_.boxes.FileTypeBox.prototype.constructor=_.boxes.FileTypeBox,_.boxes.FileTypeBox.prototype.computeLength=function(){_.boxes.Box.prototype.computeLength.call(this),this.size+=2*_.fields.FIELD_INT32.getLength()+_.fields.FIELD_INT32.getLength()*this.compatible_brands.length},_.boxes.FileTypeBox.prototype.read=function(e,t,n){return this.localPos=t,this.localEnd=n,this.major_brand=this._readData(e,_.fields.FIELD_INT32),this.minor_brand=this._readData(e,_.fields.FIELD_INT32),this.compatible_brands=this._readArrayData(e,_.fields.FIELD_INT32),this.localPos},_.boxes.FileTypeBox.prototype.write=function(e,t){return _.boxes.Box.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_INT32,this.major_brand),this._writeData(e,_.fields.FIELD_INT32,this.minor_brand),this._writeArrayData(e,_.fields.FIELD_INT32,this.compatible_brands),this.localPos},_.boxes.MovieBox=function(e){_.boxes.ContainerBox.call(this,"moov",e)},_.boxes.MovieBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.MovieBox.prototype.constructor=_.boxes.MovieBox,_.boxes.MovieFragmentBox=function(e){_.boxes.ContainerBox.call(this,"moof",e)},_.boxes.MovieFragmentBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.MovieFragmentBox.prototype.constructor=_.boxes.MovieFragmentBox,_.boxes.MovieFragmentRandomAccessBox=function(e){_.boxes.ContainerBox.call(this,"mfra",e)},_.boxes.MovieFragmentRandomAccessBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.MovieFragmentRandomAccessBox.prototype.constructor=_.boxes.MovieFragmentRandomAccessBox,_.boxes.UserDataBox=function(e){_.boxes.ContainerBox.call(this,"udta",e)},_.boxes.UserDataBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.UserDataBox.prototype.constructor=_.boxes.UserDataBox,_.boxes.TrackBox=function(e){_.boxes.ContainerBox.call(this,"trak",e)},_.boxes.TrackBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.TrackBox.prototype.constructor=_.boxes.TrackBox,_.boxes.EditBox=function(e){_.boxes.ContainerBox.call(this,"edts",e)},_.boxes.EditBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.EditBox.prototype.constructor=_.boxes.EditBox,_.boxes.MediaBox=function(e){_.boxes.ContainerBox.call(this,"mdia",e)},_.boxes.MediaBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.MediaBox.prototype.constructor=_.boxes.MediaBox,_.boxes.MediaInformationBox=function(e){_.boxes.ContainerBox.call(this,"minf",e)},_.boxes.MediaInformationBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.MediaInformationBox.prototype.constructor=_.boxes.MediaInformationBox,_.boxes.DataInformationBox=function(e){_.boxes.ContainerBox.call(this,"dinf",e)},_.boxes.DataInformationBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.DataInformationBox.prototype.constructor=_.boxes.DataInformationBox,_.boxes.SampleTableBox=function(e){_.boxes.ContainerBox.call(this,"stbl",e)},_.boxes.SampleTableBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.SampleTableBox.prototype.constructor=_.boxes.SampleTableBox,_.boxes.MovieExtendsBox=function(e){_.boxes.ContainerBox.call(this,"mvex",e)},_.boxes.MovieExtendsBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.MovieExtendsBox.prototype.constructor=_.boxes.MovieExtendsBox,_.boxes.TrackFragmentBox=function(e){_.boxes.ContainerBox.call(this,"traf",e)},_.boxes.TrackFragmentBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.TrackFragmentBox.prototype.constructor=_.boxes.TrackFragmentBox,_.boxes.MetaBox=function(e){_.boxes.ContainerFullBox.call(this,"meta",e)},_.boxes.MetaBox.prototype=Object.create(_.boxes.ContainerFullBox.prototype),_.boxes.MetaBox.prototype.constructor=_.boxes.MetaBox,_.boxes.MetaBox.prototype.computeLength=function(){_.boxes.ContainerFullBox.prototype.computeLength.call(this,!1)},_.boxes.MetaBox.prototype.read=function(e,t,n){return _.boxes.ContainerFullBox.prototype.read.call(this,e,t,n,!1)},_.boxes.MetaBox.prototype.write=function(e,t){return _.boxes.ContainerFullBox.prototype.write.call(this,e,t,!1)},_.boxes.MovieHeaderBox=function(e){_.boxes.FullBox.call(this,"mvhd",e)},_.boxes.MovieHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.MovieHeaderBox.prototype.constructor=_.boxes.MovieHeaderBox,_.boxes.MovieHeaderBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_INT32.getLength()+2*_.fields.FIELD_INT16.getLength(),this.size+=2*_.fields.FIELD_INT32.getLength()+9*_.fields.FIELD_INT32.getLength(),this.size+=6*_.fields.FIELD_BIT32.getLength()+_.fields.FIELD_UINT32.getLength(),1===this.version?this.size+=3*_.fields.FIELD_UINT64.getLength()+_.fields.FIELD_UINT32.getLength():this.size+=4*_.fields.FIELD_UINT32.getLength()},_.boxes.MovieHeaderBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),1===this.version?(this._writeData(e,_.fields.FIELD_UINT64,this.creation_time),this._writeData(e,_.fields.FIELD_UINT64,this.modification_time),this._writeData(e,_.fields.FIELD_UINT32,this.timescale),this._writeData(e,_.fields.FIELD_UINT64,this.duration)):(this._writeData(e,_.fields.FIELD_UINT32,this.creation_time),this._writeData(e,_.fields.FIELD_UINT32,this.modification_time),this._writeData(e,_.fields.FIELD_UINT32,this.timescale),this._writeData(e,_.fields.FIELD_UINT32,this.duration)),this._writeData(e,_.fields.FIELD_INT32,this.rate),this._writeData(e,_.fields.FIELD_INT16,this.volume),this._writeData(e,_.fields.FIELD_INT16,this.reserved),this._writeArrayData(e,_.fields.FIELD_INT32,this.reserved_2),this._writeArrayData(e,_.fields.FIELD_INT32,this.matrix),this._writeArrayData(e,_.fields.FIELD_BIT32,this.pre_defined),this._writeData(e,_.fields.FIELD_UINT32,this.next_track_ID),this.localPos},_.boxes.MovieHeaderBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),1==this.version?(this.creation_time=this._readData(e,_.fields.FIELD_UINT64),this.modification_time=this._readData(e,_.fields.FIELD_UINT64),this.timescale=this._readData(e,_.fields.FIELD_UINT32),this.duration=this._readData(e,_.fields.FIELD_UINT64)):(this.creation_time=this._readData(e,_.fields.FIELD_UINT32),this.modification_time=this._readData(e,_.fields.FIELD_UINT32),this.timescale=this._readData(e,_.fields.FIELD_UINT32),this.duration=this._readData(e,_.fields.FIELD_UINT32)),this.rate=this._readData(e,_.fields.FIELD_INT32),this.volume=this._readData(e,_.fields.FIELD_INT16),this.reserved=this._readData(e,_.fields.FIELD_INT16),this.reserved_2=this._readArrayFieldData(e,_.fields.FIELD_INT32,2),this.matrix=this._readArrayFieldData(e,_.fields.FIELD_INT32,9),this.pre_defined=this._readArrayFieldData(e,_.fields.FIELD_BIT32,6),this.next_track_ID=this._readData(e,_.fields.FIELD_UINT32),this.localPos},_.boxes.MediaDataBox=function(e){_.boxes.Box.call(this,"mdat",e)},_.boxes.MediaDataBox.prototype=Object.create(_.boxes.Box.prototype),_.boxes.MediaDataBox.prototype.constructor=_.boxes.MediaDataBox,_.boxes.MediaDataBox.prototype.computeLength=function(){_.boxes.Box.prototype.computeLength.call(this),this.size+=this.data.length},_.boxes.MediaDataBox.prototype.read=function(e,t,n){return this.data=e.subarray(t,n),n},_.boxes.MediaDataBox.prototype.write=function(e,t){return _.boxes.Box.prototype.write.call(this,e,t),this._writeBuffer(e,this.data,this.data.length),this.localPos},_.boxes.FreeSpaceBox=function(e){_.boxes.Box.call(this,"free",e)},_.boxes.FreeSpaceBox.prototype=Object.create(_.boxes.Box.prototype),_.boxes.FreeSpaceBox.prototype.constructor=_.boxes.FreeSpaceBox,_.boxes.FreeSpaceBox.prototype.computeLength=function(){_.boxes.Box.prototype.computeLength.call(this),this.size+=this.data.length},_.boxes.FreeSpaceBox.prototype.read=function(e,t,n){return this.localPos=t,this.localEnd=n,this.data=e.subarray(this.localPos,this.localEnd),this.localEnd},_.boxes.FreeSpaceBox.prototype.write=function(e,t){return _.boxes.Box.prototype.write.call(this,e,t),this._writeBuffer(e,this.data,this.data.length),this.localPos},_.boxes.SegmentIndexBox=function(e){_.boxes.FullBox.call(this,"sidx",e)},_.boxes.SegmentIndexBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SegmentIndexBox.prototype.constructor=_.boxes.SegmentIndexBox,_.boxes.SegmentIndexBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=2*_.fields.FIELD_UINT32.getLength(),1===this.version?this.size+=2*_.fields.FIELD_UINT64.getLength():this.size+=2*_.fields.FIELD_UINT32.getLength(),this.size+=_.fields.FIELD_UINT16.getLength(),this.size+=_.fields.FIELD_UINT16.getLength(),this.size+=(_.fields.FIELD_UINT64.getLength()+_.fields.FIELD_UINT32.getLength())*this.reference_count},_.boxes.SegmentIndexBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i={};for(this.reference_ID=this._readData(e,_.fields.FIELD_UINT32),this.timescale=this._readData(e,_.fields.FIELD_UINT32),1===this.version?(this.earliest_presentation_time=this._readData(e,_.fields.FIELD_UINT64),this.first_offset=this._readData(e,_.fields.FIELD_UINT64)):(this.earliest_presentation_time=this._readData(e,_.fields.FIELD_UINT32),this.first_offset=this._readData(e,_.fields.FIELD_UINT32)),this.reserved=this._readData(e,_.fields.FIELD_UINT16),this.reference_count=this._readData(e,_.fields.FIELD_UINT16),this.references=[],r=0;r<this.reference_count;r++)i={},i.reference_info=this._readData(e,_.fields.FIELD_UINT64),i.SAP=this._readData(e,_.fields.FIELD_UINT32),this.references.push(i);return this.localPos},_.boxes.SegmentIndexBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.reference_ID),this._writeData(e,_.fields.FIELD_UINT32,this.timescale),1===this.version?(this._writeData(e,_.fields.FIELD_UINT64,this.earliest_presentation_time),this._writeData(e,_.fields.FIELD_UINT64,this.first_offset)):(this._writeData(e,_.fields.FIELD_UINT32,this.earliest_presentation_time),this._writeData(e,_.fields.FIELD_UINT32,this.first_offset)),this._writeData(e,_.fields.FIELD_UINT16,this.reserved),this._writeData(e,_.fields.FIELD_UINT16,this.reference_count),n=0;n<this.reference_count;n++)this._writeData(e,_.fields.FIELD_UINT64,this.references[n].reference_info),this._writeData(e,_.fields.FIELD_UINT32,this.references[n].SAP);return this.localPos},_.boxes.TrackHeaderBox=function(e){_.boxes.FullBox.call(this,"tkhd",e)},_.boxes.TrackHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.TrackHeaderBox.prototype.constructor=_.boxes.TrackHeaderBox,_.boxes.TrackHeaderBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=4*_.fields.FIELD_INT16.getLength()+2*_.fields.FIELD_INT32.getLength()+2*_.fields.FIELD_UINT32.getLength()+9*_.fields.FIELD_INT32.getLength(),1==this.version?this.size+=3*_.fields.FIELD_UINT64.getLength()+2*_.fields.FIELD_UINT32.getLength():this.size+=5*_.fields.FIELD_UINT32.getLength()},_.boxes.TrackHeaderBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),1===this.version?(this.creation_time=this._readData(e,_.fields.FIELD_UINT64),this.modification_time=this._readData(e,_.fields.FIELD_UINT64),this.track_id=this._readData(e,_.fields.FIELD_UINT32),this.reserved=this._readData(e,_.fields.FIELD_UINT32),this.duration=this._readData(e,_.fields.FIELD_UINT64)):(this.creation_time=this._readData(e,_.fields.FIELD_UINT32),this.modification_time=this._readData(e,_.fields.FIELD_UINT32),this.track_id=this._readData(e,_.fields.FIELD_UINT32),this.reserved=this._readData(e,_.fields.FIELD_UINT32),this.duration=this._readData(e,_.fields.FIELD_UINT32)),this.reserved_2=this._readArrayFieldData(e,_.fields.FIELD_UINT32,2),this.layer=this._readData(e,_.fields.FIELD_INT16),this.alternate_group=this._readData(e,_.fields.FIELD_INT16),this.volume=this._readData(e,_.fields.FIELD_INT16),this.reserved_3=this._readData(e,_.fields.FIELD_INT16),this.matrix=this._readArrayFieldData(e,_.fields.FIELD_INT32,9),this.width=this._readData(e,_.fields.FIELD_INT32),this.height=this._readData(e,_.fields.FIELD_INT32),this.localPos},_.boxes.TrackHeaderBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),1===this.version?(this._writeData(e,_.fields.FIELD_UINT64,this.creation_time),this._writeData(e,_.fields.FIELD_UINT64,this.modification_time),this._writeData(e,_.fields.FIELD_UINT32,this.track_id),this._writeData(e,_.fields.FIELD_UINT32,this.reserved),this._writeData(e,_.fields.FIELD_UINT64,this.duration)):(this._writeData(e,_.fields.FIELD_UINT32,this.creation_time),this._writeData(e,_.fields.FIELD_UINT32,this.modification_time),this._writeData(e,_.fields.FIELD_UINT32,this.track_id),this._writeData(e,_.fields.FIELD_UINT32,this.reserved),this._writeData(e,_.fields.FIELD_UINT32,this.duration)),this._writeArrayData(e,_.fields.FIELD_UINT32,this.reserved_2),this._writeData(e,_.fields.FIELD_INT16,this.layer),this._writeData(e,_.fields.FIELD_INT16,this.alternate_group),this._writeData(e,_.fields.FIELD_INT16,this.volume),this._writeData(e,_.fields.FIELD_INT16,this.reserved_3),this._writeArrayData(e,_.fields.FIELD_INT32,this.matrix),this._writeData(e,_.fields.FIELD_INT32,this.width),this._writeData(e,_.fields.FIELD_INT32,this.height),this.localPos},_.boxes.MediaHeaderBox=function(e){_.boxes.FullBox.call(this,"mdhd",e)},_.boxes.MediaHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.MediaHeaderBox.prototype.constructor=_.boxes.MediaHeaderBox,_.boxes.MediaHeaderBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=2*_.fields.FIELD_UINT16.getLength(),1==this.version?this.size+=3*_.fields.FIELD_UINT64.getLength()+_.fields.FIELD_UINT32.getLength():this.size+=4*_.fields.FIELD_UINT32.getLength()},_.boxes.MediaHeaderBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),1===this.version?(this.creation_time=this._readData(e,_.fields.FIELD_UINT64),this.modification_time=this._readData(e,_.fields.FIELD_UINT64),this.timescale=this._readData(e,_.fields.FIELD_UINT32),this.duration=this._readData(e,_.fields.FIELD_UINT64)):(this.creation_time=this._readData(e,_.fields.FIELD_UINT32),this.modification_time=this._readData(e,_.fields.FIELD_UINT32),this.timescale=this._readData(e,_.fields.FIELD_UINT32),this.duration=this._readData(e,_.fields.FIELD_UINT32)),this.language=this._readData(e,_.fields.FIELD_UINT16),this.pre_defined=this._readData(e,_.fields.FIELD_UINT16),this.localPos},_.boxes.MediaHeaderBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),1===this.version?(this._writeData(e,_.fields.FIELD_UINT64,this.creation_time),this._writeData(e,_.fields.FIELD_UINT64,this.modification_time),this._writeData(e,_.fields.FIELD_UINT32,this.timescale),this._writeData(e,_.fields.FIELD_UINT64,this.duration)):(this._writeData(e,_.fields.FIELD_UINT32,this.creation_time),this._writeData(e,_.fields.FIELD_UINT32,this.modification_time),this._writeData(e,_.fields.FIELD_UINT32,this.timescale),this._writeData(e,_.fields.FIELD_UINT32,this.duration)),this._writeData(e,_.fields.FIELD_UINT16,this.language),this._writeData(e,_.fields.FIELD_UINT16,this.pre_defined),this.localPos},_.boxes.MovieExtendsHeaderBox=function(e){_.boxes.FullBox.call(this,"mehd",e)},_.boxes.MovieExtendsHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.MovieExtendsHeaderBox.prototype.constructor=_.boxes.MovieExtendsHeaderBox,_.boxes.MovieExtendsHeaderBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),1==this.version?this.size+=_.fields.FIELD_UINT64.getLength():this.size+=_.fields.FIELD_UINT32.getLength()},_.boxes.MovieExtendsHeaderBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),1===this.version?this.fragment_duration=this._readData(e,_.fields.FIELD_UINT64):this.fragment_duration=this._readData(e,_.fields.FIELD_UINT32),this.localPos},_.boxes.MovieExtendsHeaderBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),1===this.version?this._writeData(e,_.fields.FIELD_UINT64,this.fragment_duration):this._writeData(e,_.fields.FIELD_UINT32,this.fragment_duration),this.localPos},_.boxes.HandlerBox=function(e){_.boxes.FullBox.call(this,"hdlr",e)},_.boxes.HandlerBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.HandlerBox.prototype.constructor=_.boxes.HandlerBox,_.boxes.HandlerBox.prototype.HANDLERTYPEVIDEO="vide",_.boxes.HandlerBox.prototype.HANDLERTYPEAUDIO="soun",_.boxes.HandlerBox.prototype.HANDLERTYPETEXT="meta",_.boxes.HandlerBox.prototype.HANDLERVIDEONAME="Video Track",_.boxes.HandlerBox.prototype.HANDLERAUDIONAME="Audio Track",_.boxes.HandlerBox.prototype.HANDLERTEXTNAME="Text Track",_.boxes.HandlerBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=2*_.fields.FIELD_UINT32.getLength()+3*_.fields.FIELD_UINT32.getLength()+_.fields.FIELD_STRING.getLength(this.name)},_.boxes.HandlerBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.pre_defined=this._readData(e,_.fields.FIELD_UINT32),this.handler_type=this._readData(e,_.fields.FIELD_UINT32),this.reserved=this._readArrayFieldData(e,_.fields.FIELD_UINT32,3),this.name=this._readData(e,_.fields.FIELD_STRING),this.localPos},_.boxes.HandlerBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_UINT32,this.pre_defined),this._writeData(e,_.fields.FIELD_UINT32,this.handler_type),this._writeArrayData(e,_.fields.FIELD_UINT32,this.reserved),this._writeData(e,_.fields.FIELD_STRING,this.name),this.localPos},_.boxes.TimeToSampleBox=function(e){_.boxes.FullBox.call(this,"stts",e)},_.boxes.TimeToSampleBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.TimeToSampleBox.prototype.constructor=_.boxes.TimeToSampleBox,_.boxes.TimeToSampleBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength(),this.size+=this.entry_count*(2*_.fields.FIELD_UINT32.getLength())},_.boxes.TimeToSampleBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i={};for(this.entry_count=this._readData(e,_.fields.FIELD_UINT32),this.entry=[],r=0;r<this.entry_count;r++)i={},i.sample_count=this._readData(e,_.fields.FIELD_UINT32),i.sample_delta=this._readData(e,_.fields.FIELD_UINT32),this.entry.push(i);return this.localPos},_.boxes.TimeToSampleBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.entry_count),n=0;n<this.entry_count;n++)this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].sample_count),this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].sample_delta);return this.localPos},_.boxes.SampleToChunkBox=function(e){_.boxes.FullBox.call(this,"stsc",e)},_.boxes.SampleToChunkBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SampleToChunkBox.prototype.constructor=_.boxes.SampleToChunkBox,_.boxes.SampleToChunkBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength(),this.size+=this.entry_count*(3*_.fields.FIELD_UINT32.getLength())},_.boxes.SampleToChunkBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i={};for(this.entry_count=this._readData(e,_.fields.FIELD_UINT32),this.entry=[],r=0;r<this.entry_count;r++)i={},i.first_chunk=this._readData(e,_.fields.FIELD_UINT32),i.samples_per_chunk=this._readData(e,_.fields.FIELD_UINT32),i.samples_description_index=this._readData(e,_.fields.FIELD_UINT32),this.entry.push(i);return this.localPos},_.boxes.SampleToChunkBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.entry_count),n=0;n<this.entry_count;n++)this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].first_chunk),this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].samples_per_chunk),this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].samples_description_index);return this.localPos},_.boxes.ChunkOffsetBox=function(e){_.boxes.FullBox.call(this,"stco",e)},_.boxes.ChunkOffsetBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.ChunkOffsetBox.prototype.constructor=_.boxes.ChunkOffsetBox,_.boxes.ChunkOffsetBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength()+this.entry_count*_.fields.FIELD_UINT32.getLength()},_.boxes.ChunkOffsetBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.entry_count=this._readData(e,_.fields.FIELD_UINT32),this.chunk_offset=this._readArrayFieldData(e,_.fields.FIELD_UINT32,this.entry_count),this.localPos},_.boxes.ChunkOffsetBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.entry_count),n=0;n<this.entry_count;n++)this._writeData(e,_.fields.FIELD_UINT32,this.chunk_offset[n]);return this.localPos},_.boxes.TrackExtendsBox=function(e){_.boxes.FullBox.call(this,"trex",e)},_.boxes.TrackExtendsBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.TrackExtendsBox.prototype.constructor=_.boxes.TrackExtendsBox,_.boxes.TrackExtendsBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=5*_.fields.FIELD_UINT32.getLength()},_.boxes.TrackExtendsBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.track_ID=this._readData(e,_.fields.FIELD_UINT32),this.default_sample_description_index=this._readData(e,_.fields.FIELD_UINT32),this.default_sample_duration=this._readData(e,_.fields.FIELD_UINT32),this.default_sample_size=this._readData(e,_.fields.FIELD_UINT32),this.default_sample_flags=this._readData(e,_.fields.FIELD_UINT32),this.localPos},_.boxes.TrackExtendsBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_UINT32,this.track_ID),this._writeData(e,_.fields.FIELD_UINT32,this.default_sample_description_index),this._writeData(e,_.fields.FIELD_UINT32,this.default_sample_duration),this._writeData(e,_.fields.FIELD_UINT32,this.default_sample_size),this._writeData(e,_.fields.FIELD_UINT32,this.default_sample_flags),this.localPos},_.boxes.VideoMediaHeaderBox=function(e){_.boxes.FullBox.call(this,"vmhd",e)},_.boxes.VideoMediaHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.VideoMediaHeaderBox.prototype.constructor=_.boxes.VideoMediaHeaderBox,_.boxes.VideoMediaHeaderBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_INT16.getLength()+3*_.fields.FIELD_UINT16.getLength()},_.boxes.VideoMediaHeaderBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.graphicsmode=this._readData(e,_.fields.FIELD_INT16),this.opcolor=this._readArrayFieldData(e,_.fields.FIELD_UINT16,3),this.localPos},_.boxes.VideoMediaHeaderBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_INT16,this.graphicsmode),this._writeArrayData(e,_.fields.FIELD_UINT16,this.opcolor),this.localPos},_.boxes.SoundMediaHeaderBox=function(e){_.boxes.FullBox.call(this,"smhd",e)},_.boxes.SoundMediaHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SoundMediaHeaderBox.prototype.constructor=_.boxes.SoundMediaHeaderBox,_.boxes.SoundMediaHeaderBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_INT16.getLength()+_.fields.FIELD_UINT16.getLength()},_.boxes.SoundMediaHeaderBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.balance=this._readData(e,_.fields.FIELD_INT16),this.reserved=this._readData(e,_.fields.FIELD_UINT16),this.localPos},_.boxes.SoundMediaHeaderBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_INT16,this.balance),this._writeData(e,_.fields.FIELD_UINT16,this.reserved),this.localPos},_.boxes.DataReferenceBox=function(e){_.boxes.ContainerFullBox.call(this,"dref",e)},_.boxes.DataReferenceBox.prototype=Object.create(_.boxes.ContainerFullBox.prototype),_.boxes.DataReferenceBox.prototype.constructor=_.boxes.DataReferenceBox,_.boxes.DataReferenceBox.prototype.computeLength=function(){_.boxes.ContainerFullBox.prototype.computeLength.call(this,!0)},_.boxes.DataReferenceBox.prototype.read=function(e,t,n){return _.boxes.ContainerFullBox.prototype.read.call(this,e,t,n,!0)},_.boxes.DataReferenceBox.prototype.write=function(e,t){return this.entry_count||(this.entry_count=this.boxes.length),_.boxes.ContainerFullBox.prototype.write.call(this,e,t,!0)},_.boxes.DataEntryUrlBox=function(e){_.boxes.FullBox.call(this,"url ",e)},_.boxes.DataEntryUrlBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.DataEntryUrlBox.prototype.constructor=_.boxes.DataEntryUrlBox,_.boxes.DataEntryUrlBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),void 0!==this.location&&(this.size+=_.fields.FIELD_STRING.getLength(this.location))},_.boxes.DataEntryUrlBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),!1&this.flags&&(this.location=this._readData(e,_.fields.FIELD_STRING)),this.localPos},_.boxes.DataEntryUrlBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),void 0!==this.location&&this._writeData(e,_.fields.FIELD_STRING,this.location),this.localPos},_.boxes.DataEntryUrnBox=function(e){_.boxes.FullBox.call(this,"urn ",e)},_.boxes.DataEntryUrnBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.DataEntryUrnBox.prototype.constructor=_.boxes.DataEntryUrnBox,_.boxes.DataEntryUrnBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),!1&this.flags&&(this.size+=_.fields.FIELD_STRING.getLength(this.name)+_.fields.FIELD_STRING.getLength(this.location))},_.boxes.DataEntryUrnBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),!1&this.flags&&(this.name=this._readData(e,_.fields.FIELD_STRING),this.location=this._readData(e,_.fields.FIELD_STRING)),this.localPos},_.boxes.DataEntryUrnBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),!1&this.flags&&(this._writeData(e,_.fields.FIELD_STRING,this.name),this._writeData(e,_.fields.FIELD_STRING,this.location)),this.localPos},_.boxes.MovieFragmentHeaderBox=function(e){_.boxes.FullBox.call(this,"mfhd",e)},_.boxes.MovieFragmentHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.MovieFragmentHeaderBox.prototype.constructor=_.boxes.MovieFragmentHeaderBox,_.boxes.MovieFragmentHeaderBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength()},_.boxes.MovieFragmentHeaderBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.sequence_number=this._readData(e,_.fields.FIELD_UINT32),this.localPos},_.boxes.MovieFragmentHeaderBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_UINT32,this.sequence_number),this.localPos},_.boxes.TrackFragmentHeaderBox=function(e){_.boxes.FullBox.call(this,"tfhd",e)},_.boxes.TrackFragmentHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.TrackFragmentHeaderBox.prototype.constructor=_.boxes.TrackFragmentHeaderBox,_.boxes.TrackFragmentHeaderBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength(),0!==(1&this.flags)&&void 0!==this.base_data_offset&&(this.size+=_.fields.FIELD_UINT64.getLength()),0!==(2&this.flags)&&void 0!==this.sample_description_index&&(this.size+=_.fields.FIELD_UINT32.getLength()),0!==(8&this.flags)&&void 0!==this.default_sample_duration&&(this.size+=_.fields.FIELD_UINT32.getLength()),0!==(16&this.flags)&&void 0!==this.default_sample_size&&(this.size+=_.fields.FIELD_UINT32.getLength()),0!==(32&this.flags)&&void 0!==this.default_sample_flags&&(this.size+=_.fields.FIELD_UINT32.getLength())},_.boxes.TrackFragmentHeaderBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.track_ID=this._readData(e,_.fields.FIELD_UINT32),0!==(1&this.flags)&&(this.base_data_offset=this._readData(e,_.fields.FIELD_UINT64)),0!==(2&this.flags)&&(this.sample_description_index=this._readData(e,_.fields.FIELD_UINT32)),0!==(8&this.flags)&&(this.default_sample_duration=this._readData(e,_.fields.FIELD_UINT32)),0!==(16&this.flags)&&(this.default_sample_size=this._readData(e,_.fields.FIELD_UINT32)),0!==(32&this.flags)&&(this.default_sample_flags=this._readData(e,_.fields.FIELD_UINT32)),this.localPos},_.boxes.TrackFragmentHeaderBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_UINT32,this.track_ID),0!==(1&this.flags)&&this._writeData(e,_.fields.FIELD_UINT64,this.base_data_offset),0!==(2&this.flags)&&this._writeData(e,_.fields.FIELD_UINT32,this.sample_description_index),0!==(8&this.flags)&&this._writeData(e,_.fields.FIELD_UINT32,this.default_sample_duration),0!==(16&this.flags)&&this._writeData(e,_.fields.FIELD_UINT32,this.default_sample_size),0!==(32&this.flags)&&this._writeData(e,_.fields.FIELD_UINT32,this.default_sample_flags),this.localPos},_.boxes.TrackFragmentBaseMediaDecodeTimeBox=function(e){_.boxes.FullBox.call(this,"tfdt",e)},_.boxes.TrackFragmentBaseMediaDecodeTimeBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.TrackFragmentBaseMediaDecodeTimeBox.prototype.constructor=_.boxes.TrackFragmentBaseMediaDecodeTimeBox,_.boxes.TrackFragmentBaseMediaDecodeTimeBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),1===this.version?this.size+=_.fields.FIELD_UINT64.getLength():this.size+=_.fields.FIELD_UINT32.getLength()},_.boxes.TrackFragmentBaseMediaDecodeTimeBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),1===this.version?this.baseMediaDecodeTime=this._readData(e,_.fields.FIELD_UINT64):this.baseMediaDecodeTime=this._readData(e,_.fields.FIELD_UINT32),this.localPos},_.boxes.TrackFragmentBaseMediaDecodeTimeBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),1===this.version?this._writeData(e,_.fields.FIELD_UINT64,this.baseMediaDecodeTime):this._writeData(e,_.fields.FIELD_UINT32,this.baseMediaDecodeTime),this.localPos},_.boxes.TrackFragmentRunBox=function(e){_.boxes.FullBox.call(this,"trun",e)},_.boxes.TrackFragmentRunBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.TrackFragmentRunBox.prototype.constructor=_.boxes.TrackFragmentRunBox,_.boxes.TrackFragmentRunBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this);var e=0;for(this.size+=_.fields.FIELD_UINT32.getLength(),0!==(1&this.flags)&&void 0!==this.data_offset&&(this.size+=_.fields.FIELD_INT32.getLength()),0!==(4&this.flags)&&void 0!==this.first_sample_flags&&(this.size+=_.fields.FIELD_UINT32.getLength()),e=0;e<this.sample_count;e++)0!==(256&this.flags)&&void 0!==this.samples_table[e].sample_duration&&(this.size+=_.fields.FIELD_UINT32.getLength()),0!==(512&this.flags)&&void 0!==this.samples_table[e].sample_size&&(this.size+=_.fields.FIELD_UINT32.getLength()),0!==(1024&this.flags)&&void 0!==this.samples_table[e].sample_flags&&(this.size+=_.fields.FIELD_UINT32.getLength()),1===this.version?0!==(2048&this.flags)&&void 0!==this.samples_table[e].sample_composition_time_offset&&(this.size+=_.fields.FIELD_INT32.getLength()):0!==(2048&this.flags)&&void 0!==this.samples_table[e].sample_composition_time_offset&&(this.size+=_.fields.FIELD_UINT32.getLength())},_.boxes.TrackFragmentRunBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i={};for(this.sample_count=this._readData(e,_.fields.FIELD_UINT32),0!==(1&this.flags)&&(this.data_offset=this._readData(e,_.fields.FIELD_INT32)),0!==(4&this.flags)&&(this.first_sample_flags=this._readData(e,_.fields.FIELD_UINT32)),this.samples_table=[],r=0;r<this.sample_count;r++)i={},0!==(256&this.flags)&&(i.sample_duration=this._readData(e,_.fields.FIELD_UINT32)),0!==(512&this.flags)&&(i.sample_size=this._readData(e,_.fields.FIELD_UINT32)),0!==(1024&this.flags)&&(i.sample_flags=this._readData(e,_.fields.FIELD_UINT32)),1===this.version?0!==(2048&this.flags)&&(i.sample_composition_time_offset=this._readData(e,_.fields.FIELD_INT32)):0!==(2048&this.flags)&&(i.sample_composition_time_offset=this._readData(e,_.fields.FIELD_UINT32)),this.samples_table.push(i);return this.localPos},_.boxes.TrackFragmentRunBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.sample_count),0!==(1&this.flags)&&this._writeData(e,_.fields.FIELD_INT32,this.data_offset),0!==(4&this.flags)&&this._writeData(e,_.fields.FIELD_UINT32,this.first_sample_flags),n=0;n<this.sample_count;n++)0!==(256&this.flags)&&this._writeData(e,_.fields.FIELD_UINT32,this.samples_table[n].sample_duration),0!==(512&this.flags)&&this._writeData(e,_.fields.FIELD_UINT32,this.samples_table[n].sample_size),0!==(1024&this.flags)&&this._writeData(e,_.fields.FIELD_UINT32,this.samples_table[n].sample_flags),1===this.version?0!==(2048&this.flags)&&this._writeData(e,_.fields.FIELD_INT32,this.samples_table[n].sample_composition_time_offset):0!==(2048&this.flags)&&this._writeData(e,_.fields.FIELD_UINT32,this.samples_table[n].sample_composition_time_offset);return this.localPos},_.boxes.SampleDescriptionBox=function(e){_.boxes.ContainerFullBox.call(this,"stsd",e)},_.boxes.SampleDescriptionBox.prototype=Object.create(_.boxes.ContainerFullBox.prototype),_.boxes.SampleDescriptionBox.prototype.constructor=_.boxes.SampleDescriptionBox,_.boxes.SampleDescriptionBox.prototype.computeLength=function(){_.boxes.ContainerFullBox.prototype.computeLength.call(this,!0)},_.boxes.SampleDescriptionBox.prototype.read=function(e,t,n){return _.boxes.ContainerFullBox.prototype.read.call(this,e,t,n,!0)},_.boxes.SampleDescriptionBox.prototype.write=function(e,t){return this.entry_count=this.boxes.length,_.boxes.ContainerFullBox.prototype.write.call(this,e,t,!0)},_.boxes.SampleDependencyTableBox=function(e){_.boxes.FullBox.call(this,"sdtp",e)},_.boxes.SampleDependencyTableBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SampleDependencyTableBox.prototype.constructor=_.boxes.SampleDependencyTableBox,_.boxes.SampleDependencyTableBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT8.getLength()*this.sample_dependency_table.length},_.boxes.SampleDependencyTableBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.sample_dependency_table=this._readArrayData(e,_.fields.FIELD_UINT8),this.localPos},_.boxes.SampleDependencyTableBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeArrayData(e,_.fields.FIELD_UINT8,this.sample_dependency_table),this.localPos},_.boxes.SampleEntryBox=function(e,t){_.boxes.Box.call(this,e,t)},_.boxes.SampleEntryBox.prototype=Object.create(_.boxes.Box.prototype),_.boxes.SampleEntryBox.prototype.constructor=_.boxes.SampleEntryBox,_.boxes.SampleEntryBox.prototype.computeLength=function(){_.boxes.Box.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT16.getLength()+6*_.fields.FIELD_UINT8.getLength()},_.boxes.SampleEntryBox.prototype.read=function(e,t,n){return this.localPos=t,this.localEnd=n,this.reserved=this._readArrayFieldData(e,_.fields.FIELD_UINT8,6),this.data_reference_index=this._readData(e,_.fields.FIELD_UINT16),this.localPos},_.boxes.SampleEntryBox.prototype.write=function(e,t){return _.boxes.Box.prototype.write.call(this,e,t),this._writeArrayData(e,_.fields.FIELD_UINT8,this.reserved),this._writeData(e,_.fields.FIELD_UINT16,this.data_reference_index),this.localPos},_.boxes.VisualSampleEntryBox=function(e,t){_.boxes.SampleEntryBox.call(this,e,t)},_.boxes.VisualSampleEntryBox.prototype=Object.create(_.boxes.SampleEntryBox.prototype),_.boxes.VisualSampleEntryBox.prototype.constructor=_.boxes.VisualSampleEntryBox,_.boxes.VisualSampleEntryBox.prototype.computeLength=function(){_.boxes.SampleEntryBox.prototype.computeLength.call(this),this.size+=7*_.fields.FIELD_UINT16.getLength()+3*_.fields.FIELD_UINT32.getLength(),this.size+=3*_.fields.FIELD_UINT32.getLength(),this.size+=32},_.boxes.VisualSampleEntryBox.prototype.read=function(e,t,n){return _.boxes.SampleEntryBox.prototype.read.call(this,e,t,n),this.pre_defined=this._readData(e,_.fields.FIELD_UINT16),this.reserved_2=this._readData(e,_.fields.FIELD_UINT16),this.pre_defined_2=this._readArrayFieldData(e,_.fields.FIELD_UINT32,3),this.width=this._readData(e,_.fields.FIELD_UINT16),this.height=this._readData(e,_.fields.FIELD_UINT16),this.horizresolution=this._readData(e,_.fields.FIELD_UINT32),this.vertresolution=this._readData(e,_.fields.FIELD_UINT32),this.reserved_3=this._readData(e,_.fields.FIELD_UINT32),this.frame_count=this._readData(e,_.fields.FIELD_UINT16),this.compressorname=this._readArrayFieldData(e,_.fields.FIELD_UINT8,32),this.depth=this._readData(e,_.fields.FIELD_UINT16),this.pre_defined_3=this._readData(e,_.fields.FIELD_INT16),this.localPos},_.boxes.VisualSampleEntryBox.prototype.write=function(e,t){return _.boxes.SampleEntryBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_UINT16,this.pre_defined),this._writeData(e,_.fields.FIELD_UINT16,this.reserved_2),this._writeArrayData(e,_.fields.FIELD_UINT32,this.pre_defined_2),this._writeData(e,_.fields.FIELD_UINT16,this.width),this._writeData(e,_.fields.FIELD_UINT16,this.height),this._writeData(e,_.fields.FIELD_UINT32,this.horizresolution),this._writeData(e,_.fields.FIELD_UINT32,this.vertresolution),this._writeData(e,_.fields.FIELD_UINT32,this.reserved_3),this._writeData(e,_.fields.FIELD_UINT16,this.frame_count),this._writeArrayData(e,_.fields.FIELD_UINT8,this.compressorname),this._writeData(e,_.fields.FIELD_UINT16,this.depth),this._writeData(e,_.fields.FIELD_INT16,this.pre_defined_3),this.localPos},_.boxes.VisualSampleEntryContainerBox=function(e,t){_.boxes.VisualSampleEntryBox.call(this,e,t),this.boxes=[]},_.boxes.VisualSampleEntryContainerBox.prototype=Object.create(_.boxes.VisualSampleEntryBox.prototype),_.boxes.VisualSampleEntryContainerBox.prototype.constructor=_.boxes.VisualSampleEntryContainerBox,_.boxes.VisualSampleEntryContainerBox.prototype.computeLength=function(){_.boxes.VisualSampleEntryBox.prototype.computeLength.call(this);var e=0;for(e=0;e<this.boxes.length;e++)this.boxes[e].computeLength(),this.size+=this.boxes[e].size},_.boxes.VisualSampleEntryContainerBox.prototype.read=function(e,t,n){_.boxes.VisualSampleEntryBox.prototype.read.call(this,e,t,n);var r,i,o=0,a=0,s=null;while(this.localPos<this.localEnd){if(o=_.fields.FIELD_UINT32.read(e,this.localPos),r=_.fields.readString(e,this.localPos+4,4),"uuid"==r&&(a=1==o?16:8,s=new _.fields.ArrayField(_.fields.FIELD_INT8,16).read(e,this.localPos+a,this.localPos+a+16),s=JSON.stringify(s)),i=_.createBox(r,o,s),this.localPos="uuid"===r?i.read(e,this.localPos+16*_.fields.FIELD_INT8.getLength()+8,this.localPos+o):i.read(e,this.localPos+8,this.localPos+o),_.debug&&(i.__sourceBuffer=e.subarray(this.localPos-i.size,this.localPos)),this.boxes.push(i),i.size<=0||null===i.size)throw new _.ParseException("Problem on size of box "+i.boxtype+", parsing stopped to avoid infinite loop");if(!i.boxtype)throw new _.ParseException("Problem on unknown box, parsing stopped to avoid infinite loop")}return this.localPos},_.boxes.VisualSampleEntryContainerBox.prototype.write=function(e,t){_.boxes.VisualSampleEntryBox.prototype.write.call(this,e,t);var n=0;for(n=0;n<this.boxes.length;n++)this.localPos=this.boxes[n].write(e,this.localPos);return this.localPos},_.boxes.AVC1VisualSampleEntryBox=function(e){_.boxes.VisualSampleEntryContainerBox.call(this,"avc1",e)},_.boxes.AVC1VisualSampleEntryBox.prototype=Object.create(_.boxes.VisualSampleEntryContainerBox.prototype),_.boxes.AVC1VisualSampleEntryBox.prototype.constructor=_.boxes.AVC1VisualSampleEntryBox,_.boxes.EncryptedVideoBox=function(e){_.boxes.VisualSampleEntryContainerBox.call(this,"encv",e)},_.boxes.EncryptedVideoBox.prototype=Object.create(_.boxes.VisualSampleEntryContainerBox.prototype),_.boxes.EncryptedVideoBox.prototype.constructor=_.boxes.EncryptedVideoBox,_.boxes.AVCConfigurationBox=function(e){_.boxes.Box.call(this,"avcC",e)},_.boxes.AVCConfigurationBox.prototype=Object.create(_.boxes.Box.prototype),_.boxes.AVCConfigurationBox.prototype.constructor=_.boxes.AVCConfigurationBox,_.boxes.AVCConfigurationBox.prototype.computeLength=function(){_.boxes.Box.prototype.computeLength.call(this),this.size+=4*_.fields.FIELD_UINT8.getLength()+3*_.fields.FIELD_UINT8.getLength(),this.size+=this._getNALLength(this.numOfSequenceParameterSets,this.SPS_NAL),this.size+=this._getNALLength(this.numOfPictureParameterSets,this.PPS_NAL)},_.boxes.AVCConfigurationBox.prototype._getNALLength=function(e,t){var n=0,r=0;for(r=0;r<e;r++)n+=_.fields.FIELD_UINT16.getLength()+t[r].NAL_length;return n},_.boxes.AVCConfigurationBox.prototype.read=function(e,t,n){return this.localPos=t,this.localEnd=n,this.configurationVersion=this._readData(e,_.fields.FIELD_UINT8),this.AVCProfileIndication=this._readData(e,_.fields.FIELD_UINT8),this.profile_compatibility=this._readData(e,_.fields.FIELD_UINT8),this.AVCLevelIndication=this._readData(e,_.fields.FIELD_UINT8),this.temp=this._readData(e,_.fields.FIELD_UINT8),this.lengthSizeMinusOne=3&this.temp,this.numOfSequenceParameterSets_tmp=this._readData(e,_.fields.FIELD_UINT8),this.numOfSequenceParameterSets=31&this.numOfSequenceParameterSets_tmp,this.SPS_NAL=this._readNAL(e,this.numOfSequenceParameterSets),this.numOfPictureParameterSets=this._readData(e,_.fields.FIELD_UINT8),this.PPS_NAL=this._readNAL(e,this.numOfPictureParameterSets),this.localPos},_.boxes.AVCConfigurationBox.prototype._readNAL=function(e,t){var n=[],r=0,i={};for(r=0;r<t;r++)i={},i.NAL_length=this._readData(e,_.fields.FIELD_UINT16),i.NAL=e.subarray(this.localPos,this.localPos+i.NAL_length),this.localPos+=i.NAL_length,n.push(i);return n},_.boxes.AVCConfigurationBox.prototype.write=function(e,t){return _.boxes.Box.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_UINT8,this.configurationVersion),this._writeData(e,_.fields.FIELD_UINT8,this.AVCProfileIndication),this._writeData(e,_.fields.FIELD_UINT8,this.profile_compatibility),this._writeData(e,_.fields.FIELD_UINT8,this.AVCLevelIndication),this.temp=252|this.lengthSizeMinusOne,this._writeData(e,_.fields.FIELD_UINT8,this.temp),this.numOfSequenceParameterSets=this.SPS_NAL.length,this.numOfSequenceParameterSets_tmp=224|this.numOfSequenceParameterSets,this._writeData(e,_.fields.FIELD_UINT8,this.numOfSequenceParameterSets_tmp),this._writeNAL(e,this.numOfSequenceParameterSets,this.SPS_NAL),this._writeData(e,_.fields.FIELD_UINT8,this.numOfPictureParameterSets),this._writeNAL(e,this.numOfPictureParameterSets,this.PPS_NAL),this.localPos},_.boxes.AVCConfigurationBox.prototype._writeNAL=function(e,t,n){var r=0;for(r=0;r<t;r++)this._writeData(e,_.fields.FIELD_UINT16,n[r].NAL_length),this._writeBuffer(e,n[r].NAL,n[r].NAL_length)},_.boxes.PixelAspectRatioBox=function(e){_.boxes.Box.call(this,"pasp",e)},_.boxes.PixelAspectRatioBox.prototype=Object.create(_.boxes.Box.prototype),_.boxes.PixelAspectRatioBox.prototype.constructor=_.boxes.PixelAspectRatioBox,_.boxes.PixelAspectRatioBox.prototype.computeLength=function(){_.boxes.Box.prototype.computeLength.call(this),this.size+=2*_.fields.FIELD_INT32.getLength()},_.boxes.PixelAspectRatioBox.prototype.read=function(e,t,n){return this.localPos=t,this.localEnd=n,this.hSpacing=this._readData(e,_.fields.FIELD_INT32),this.vSpacing=this._readData(e,_.fields.FIELD_INT32),this.localPos},_.boxes.PixelAspectRatioBox.prototype.write=function(e,t){return _.boxes.Box.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_INT32,this.hSpacing),this._writeData(e,_.fields.FIELD_INT32,this.vSpacing),this.localPos},_.boxes.AudioSampleEntryBox=function(e,t){_.boxes.SampleEntryBox.call(this,e,t)},_.boxes.AudioSampleEntryBox.prototype=Object.create(_.boxes.SampleEntryBox.prototype),_.boxes.AudioSampleEntryBox.prototype.constructor=_.boxes.AudioSampleEntryBox,_.boxes.AudioSampleEntryBox.prototype.computeLength=function(){_.boxes.SampleEntryBox.prototype.computeLength.call(this),this.size+=4*_.fields.FIELD_UINT16.getLength()+3*_.fields.FIELD_UINT32.getLength()},_.boxes.AudioSampleEntryBox.prototype.read=function(e,t,n){return _.boxes.SampleEntryBox.prototype.read.call(this,e,t,n),this.reserved_2=this._readArrayFieldData(e,_.fields.FIELD_UINT32,2),this.channelcount=this._readData(e,_.fields.FIELD_UINT16),this.samplesize=this._readData(e,_.fields.FIELD_UINT16),this.pre_defined=this._readData(e,_.fields.FIELD_UINT16),this.reserved_3=this._readData(e,_.fields.FIELD_UINT16),this.samplerate=this._readData(e,_.fields.FIELD_UINT32),this.localPos},_.boxes.AudioSampleEntryBox.prototype.write=function(e,t){return _.boxes.SampleEntryBox.prototype.write.call(this,e,t),this._writeArrayData(e,_.fields.FIELD_UINT32,this.reserved_2),this._writeData(e,_.fields.FIELD_UINT16,this.channelcount),this._writeData(e,_.fields.FIELD_UINT16,this.samplesize),this._writeData(e,_.fields.FIELD_UINT16,this.pre_defined),this._writeData(e,_.fields.FIELD_UINT16,this.reserved_3),this._writeData(e,_.fields.FIELD_UINT32,this.samplerate),this.localPos},_.boxes.AudioSampleEntryContainerBox=function(e,t){_.boxes.AudioSampleEntryBox.call(this,e,t),this.boxes=[]},_.boxes.AudioSampleEntryContainerBox.prototype=Object.create(_.boxes.AudioSampleEntryBox.prototype),_.boxes.AudioSampleEntryContainerBox.prototype.constructor=_.boxes.AudioSampleEntryContainerBox,_.boxes.AudioSampleEntryContainerBox.prototype.computeLength=function(){_.boxes.AudioSampleEntryBox.prototype.computeLength.call(this);var e=0;for(e=0;e<this.boxes.length;e++)this.boxes[e].computeLength(),this.size+=this.boxes[e].size},_.boxes.AudioSampleEntryContainerBox.prototype.read=function(e,t,n){_.boxes.AudioSampleEntryBox.prototype.read.call(this,e,t,n);var r,i,o=0,a=0,s=null;while(this.localPos<this.localEnd){if(o=_.fields.FIELD_UINT32.read(e,this.localPos),r=_.fields.readString(e,this.localPos+4,4),"uuid"==r&&(a=1==o?16:8,s=new _.fields.ArrayField(_.fields.FIELD_INT8,16).read(e,this.localPos+a,this.localPos+a+16),s=JSON.stringify(s)),i=_.createBox(r,o,s),this.localPos="uuid"===r?i.read(e,this.localPos+16*_.fields.FIELD_INT8.getLength()+8,this.localPos+o):i.read(e,this.localPos+8,this.localPos+o),_.debug&&(i.__sourceBuffer=e.subarray(this.localPos-i.size,this.localPos)),this.boxes.push(i),i.size<=0||null===i.size)throw new _.ParseException("Problem on size of box "+i.boxtype+", parsing stopped to avoid infinite loop");if(!i.boxtype)throw new _.ParseException("Problem on unknown box, parsing stopped to avoid infinite loop")}return this.localPos},_.boxes.AudioSampleEntryContainerBox.prototype.write=function(e,t){_.boxes.AudioSampleEntryBox.prototype.write.call(this,e,t);var n=0;for(n=0;n<this.boxes.length;n++)this.localPos=this.boxes[n].write(e,this.localPos);return this.localPos},_.boxes.MP4AudioSampleEntryBox=function(e){_.boxes.AudioSampleEntryContainerBox.call(this,"mp4a",e)},_.boxes.MP4AudioSampleEntryBox.prototype=Object.create(_.boxes.AudioSampleEntryContainerBox.prototype),_.boxes.MP4AudioSampleEntryBox.prototype.constructor=_.boxes.MP4AudioSampleEntryBox,_.boxes.EncryptedAudioBox=function(e){_.boxes.AudioSampleEntryContainerBox.call(this,"enca",e)},_.boxes.EncryptedAudioBox.prototype=Object.create(_.boxes.AudioSampleEntryContainerBox.prototype),_.boxes.EncryptedAudioBox.prototype.constructor=_.boxes.EncryptedAudioBox,_.boxes.ESDBox=function(e){_.boxes.FullBox.call(this,"esds",e)},_.boxes.ESDBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.ESDBox.prototype.constructor=_.boxes.ESDBox,_.boxes.ESDBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=2*_.fields.FIELD_UINT8.getLength()+this.ES_length},_.boxes.ESDBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.ES_tag=this._readData(e,_.fields.FIELD_UINT8),this.ES_length=this._readData(e,_.fields.FIELD_UINT8),this.ES_data=e.subarray(this.localPos,this.localPos+this.ES_length),this.localPos+=this.ES_length,this.localPos},_.boxes.ESDBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_UINT8,this.ES_tag),this._writeData(e,_.fields.FIELD_UINT8,this.ES_length),this._writeBuffer(e,this.ES_data,this.ES_length),this.localPos},_.boxes.SampleSizeBox=function(e){_.boxes.FullBox.call(this,"stsz",e)},_.boxes.SampleSizeBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SampleSizeBox.prototype.constructor=_.boxes.SampleSizeBox,_.boxes.SampleSizeBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=2*_.fields.FIELD_UINT32.getLength()+_.fields.FIELD_UINT32.getLength()*this.sample_count},_.boxes.SampleSizeBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.sample_size=this._readData(e,_.fields.FIELD_UINT32),this.sample_count=this._readData(e,_.fields.FIELD_UINT32),this.entries=this._readArrayFieldData(e,_.fields.FIELD_UINT32,this.sample_count),this.localPos},_.boxes.SampleSizeBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.sample_size),this._writeData(e,_.fields.FIELD_UINT32,this.sample_count),n=0;n<this.sample_count;n++)this._writeData(e,_.fields.FIELD_UINT32,this.entries[n]);return this.localPos},_.boxes.ProtectionSystemSpecificHeaderBox=function(e){_.boxes.FullBox.call(this,"pssh",e)},_.boxes.ProtectionSystemSpecificHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.ProtectionSystemSpecificHeaderBox.prototype.constructor=_.boxes.ProtectionSystemSpecificHeaderBox,_.boxes.ProtectionSystemSpecificHeaderBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=16*_.fields.FIELD_UINT8.getLength(),this.size+=_.fields.FIELD_UINT32.getLength(),this.size+=_.fields.FIELD_UINT8.getLength()*this.DataSize},_.boxes.ProtectionSystemSpecificHeaderBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.SystemID=this._readArrayFieldData(e,_.fields.FIELD_UINT8,16),this.DataSize=this._readData(e,_.fields.FIELD_UINT32),this.Data=this._readArrayFieldData(e,_.fields.FIELD_UINT8,this.DataSize),this.localPos},_.boxes.ProtectionSystemSpecificHeaderBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(n=0;n<16;n++)this._writeData(e,_.fields.FIELD_UINT8,this.SystemID[n]);for(this._writeData(e,_.fields.FIELD_UINT32,this.DataSize),n=0;n<this.DataSize;n++)this._writeData(e,_.fields.FIELD_UINT8,this.Data[n]);return this.localPos},_.boxes.SampleEncryptionBox=function(e){_.boxes.FullBox.call(this,"senc",e)},_.boxes.SampleEncryptionBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SampleEncryptionBox.prototype.constructor=_.boxes.SampleEncryptionBox,_.boxes.SampleEncryptionBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this);var e=0,t=0;for(this.size+=_.fields.FIELD_UINT32.getLength(),1&this.flags&&(this.size+=_.fields.FIELD_UINT8.getLength()),e=0;e<this.sample_count;e++)if(this.size+=8,2&this.flags)for(this.size+=_.fields.FIELD_UINT16.getLength(),t=0;t<this.entry[e].NumberOfEntries;t++)this.size+=_.fields.FIELD_UINT16.getLength(),this.size+=_.fields.FIELD_UINT32.getLength()},_.boxes.SampleEncryptionBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0,r=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.sample_count),1&this.flags&&this._writeData(e,_.fields.FIELD_UINT8,this.IV_size),n=0;n<this.sample_count;n++)if(this._writeBuffer(e,this.entry[n].InitializationVector,8),2&this.flags)for(this._writeData(e,_.fields.FIELD_UINT16,this.entry[n].NumberOfEntries),r=0;r<this.entry[n].NumberOfEntries;r++)this._writeData(e,_.fields.FIELD_UINT16,this.entry[n].clearAndCryptedData[r].BytesOfClearData),this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].clearAndCryptedData[r].BytesOfEncryptedData);return this.localPos},_.boxes.SampleEncryptionBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i=0,o={},a={};for(this.sample_count=this._readData(e,_.fields.FIELD_UINT32),1&this.flags&&(this.IV_size=this._readData(e,_.fields.FIELD_UINT8)),this.entry=[],r=0;r<this.sample_count;r++){if(a={},a.InitializationVector=e.subarray(this.localPos,this.localPos+8),this.localPos+=8,2&this.flags)for(a.NumberOfEntries=this._readData(e,_.fields.FIELD_UINT16),a.clearAndCryptedData=[],i=0;i<a.NumberOfEntries;i++)o={},o.BytesOfClearData=this._readData(e,_.fields.FIELD_UINT16),o.BytesOfEncryptedData=this._readData(e,_.fields.FIELD_UINT32),a.clearAndCryptedData.push(o);this.entry.push(a)}return this.localPos},_.boxes.SampleAuxiliaryInformationSizesBox=function(e){_.boxes.FullBox.call(this,"saiz",e)},_.boxes.SampleAuxiliaryInformationSizesBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SampleAuxiliaryInformationSizesBox.prototype.constructor=_.boxes.SampleAuxiliaryInformationSizesBox,_.boxes.SampleAuxiliaryInformationSizesBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),1&this.flags&&(this.size+=2*_.fields.FIELD_UINT32.getLength()),this.size+=_.fields.FIELD_UINT8.getLength()+_.fields.FIELD_UINT32.getLength(),0===this.default_sample_info_size&&(this.size+=_.fields.FIELD_UINT8.getLength()*this.sample_count)},_.boxes.SampleAuxiliaryInformationSizesBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),1&this.flags&&(this.aux_info_type=this._readData(e,_.fields.FIELD_UINT32),this.aux_info_type_parameter=this._readData(e,_.fields.FIELD_UINT32)),this.default_sample_info_size=this._readData(e,_.fields.FIELD_UINT8),this.sample_count=this._readData(e,_.fields.FIELD_UINT32),0===this.default_sample_info_size&&(this.sample_info_size=this._readArrayFieldData(e,_.fields.FIELD_UINT8,this.sample_count)),this.localPos},_.boxes.SampleAuxiliaryInformationSizesBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;if(1&this.flags&&(this._writeData(e,_.fields.FIELD_UINT32,this.aux_info_type),this._writeData(e,_.fields.FIELD_UINT32,this.aux_info_type_parameter)),this._writeData(e,_.fields.FIELD_UINT8,this.default_sample_info_size),this._writeData(e,_.fields.FIELD_UINT32,this.sample_count),0===this.default_sample_info_size)for(n=0;n<this.sample_count;n++)this._writeData(e,_.fields.FIELD_UINT8,this.sample_info_size[n]);return this.localPos},_.boxes.SampleAuxiliaryInformationOffsetsBox=function(e){_.boxes.FullBox.call(this,"saio",e)},_.boxes.SampleAuxiliaryInformationOffsetsBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SampleAuxiliaryInformationOffsetsBox.prototype.constructor=_.boxes.SampleAuxiliaryInformationOffsetsBox,_.boxes.SampleAuxiliaryInformationOffsetsBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),1&this.flags&&(this.size+=2*_.fields.FIELD_UINT32.getLength()),this.size+=_.fields.FIELD_UINT32.getLength(),0===this.version?this.size+=_.fields.FIELD_UINT32.getLength()*this.entry_count:this.size+=_.fields.FIELD_UINT64.getLength()*this.entry_count},_.boxes.SampleAuxiliaryInformationOffsetsBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),1&this.flags&&(this.aux_info_type=this._readData(e,_.fields.FIELD_UINT32),this.aux_info_type_parameter=this._readData(e,_.fields.FIELD_UINT32)),this.entry_count=this._readData(e,_.fields.FIELD_UINT32),0===this.version?this.offset=this._readArrayFieldData(e,_.fields.FIELD_UINT32,this.entry_count):this.offset=this._readArrayFieldData(e,_.fields.FIELD_UINT64,this.entry_count),this.localPos},_.boxes.SampleAuxiliaryInformationOffsetsBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;if(1&this.flags&&(this._writeData(e,_.fields.FIELD_UINT32,this.aux_info_type),this._writeData(e,_.fields.FIELD_UINT32,this.aux_info_type_parameter)),this._writeData(e,_.fields.FIELD_UINT32,this.entry_count),0===this.version)for(n=0;n<this.entry_count;n++)this._writeData(e,_.fields.FIELD_UINT32,this.offset[n]);else for(n=0;n<this.entry_count;n++)this._writeData(e,_.fields.FIELD_UINT64,this.offset[n]);return this.localPos},_.boxes.ProtectionSchemeInformationBox=function(e){_.boxes.ContainerBox.call(this,"sinf",e)},_.boxes.ProtectionSchemeInformationBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.ProtectionSchemeInformationBox.prototype.constructor=_.boxes.ProtectionSchemeInformationBox,_.boxes.SchemeInformationBox=function(e){_.boxes.ContainerBox.call(this,"schi",e)},_.boxes.SchemeInformationBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.SchemeInformationBox.prototype.constructor=_.boxes.SchemeInformationBox,_.boxes.TrackEncryptionBox=function(e){_.boxes.FullBox.call(this,"tenc",e)},_.boxes.TrackEncryptionBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.TrackEncryptionBox.prototype.constructor=_.boxes.TrackEncryptionBox,_.boxes.TrackEncryptionBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_BIT24.getLength(),this.size+=_.fields.FIELD_UINT8.getLength(),this.size+=16*_.fields.FIELD_UINT8.getLength()},_.boxes.TrackEncryptionBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.default_IsEncrypted=this._readData(e,_.fields.FIELD_BIT24),this.default_IV_size=this._readData(e,_.fields.FIELD_UINT8),this.default_KID=this._readArrayFieldData(e,_.fields.FIELD_UINT8,16),this.localPos},_.boxes.TrackEncryptionBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_BIT24,this.default_IsEncrypted),this._writeData(e,_.fields.FIELD_UINT8,this.default_IV_size),this._writeArrayData(e,_.fields.FIELD_UINT8,this.default_KID),this.localPos},_.boxes.SchemeTypeBox=function(e){_.boxes.FullBox.call(this,"schm",e)},_.boxes.SchemeTypeBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SchemeTypeBox.prototype.constructor=_.boxes.SchemeTypeBox,_.boxes.SchemeTypeBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=2*_.fields.FIELD_UINT32.getLength(),1&this.flags&&(this.size+=_.fields.FIELD_STRING.getLength(this.scheme_uri))},_.boxes.SchemeTypeBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.scheme_type=this._readData(e,_.fields.FIELD_UINT32),this.scheme_version=this._readData(e,_.fields.FIELD_UINT32),1&this.flags&&(this.scheme_uri=this._readData(e,_.fields.FIELD_STRING)),this.localPos},_.boxes.SchemeTypeBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_UINT32,this.scheme_type),this._writeData(e,_.fields.FIELD_UINT32,this.scheme_version),1&this.flags&&this._writeData(e,_.fields.FIELD_STRING,this.scheme_uri),this.localPos},_.boxes.EditListBox=function(e){_.boxes.FullBox.call(this,"elst",e),this.entries=[]},_.boxes.EditListBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.EditListBox.prototype.constructor=_.boxes.EditListBox,_.boxes.EditListBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength(),1===this.version?this.size+=(2*_.fields.FIELD_UINT64.getLength()+2*_.fields.FIELD_UINT16.getLength())*this.entry_count:this.size+=(2*_.fields.FIELD_UINT32.getLength()+2*_.fields.FIELD_UINT16.getLength())*this.entry_count},_.boxes.EditListBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i={};for(this.entry_count=this._readData(e,_.fields.FIELD_UINT32),r=0;r<this.entry_count;r++)i={},1===this.version?(i.segment_duration=this._readData(e,_.fields.FIELD_UINT64),i.media_time=this._readData(e,_.fields.FIELD_UINT64)):(i.segment_duration=this._readData(e,_.fields.FIELD_UINT32),i.media_time=this._readData(e,_.fields.FIELD_UINT32)),i.media_rate_integer=this._readData(e,_.fields.FIELD_UINT16),i.media_rate_fraction=this._readData(e,_.fields.FIELD_UINT16),this.entries.push(i);return this.localPos},_.boxes.EditListBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.entry_count),n=0;n<this.entry_count;n++)1===this.version?(this._writeData(e,_.fields.FIELD_UINT64,this.entries[n].segment_duration),this._writeData(e,_.fields.FIELD_UINT64,this.entries[n].media_time)):(this._writeData(e,_.fields.FIELD_UINT32,this.entries[n].segment_duration),this._writeData(e,_.fields.FIELD_UINT32,this.entries[n].media_time)),this._writeData(e,_.fields.FIELD_UINT16,this.entries[n].media_rate_integer),this._writeData(e,_.fields.FIELD_UINT16,this.entries[n].media_rate_fraction);return this.localPos},_.boxes.HintMediaHeaderBox=function(e){_.boxes.FullBox.call(this,"hmhd",e)},_.boxes.HintMediaHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.HintMediaHeaderBox.prototype.constructor=_.boxes.HintMediaHeaderBox,_.boxes.HintMediaHeaderBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=2*_.fields.FIELD_UINT16.getLength(),this.size+=3*_.fields.FIELD_UINT32.getLength()},_.boxes.HintMediaHeaderBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.maxPDUsize=this._readData(e,_.fields.FIELD_UINT16),this.avgPDUsize=this._readData(e,_.fields.FIELD_UINT16),this.maxbitrate=this._readData(e,_.fields.FIELD_UINT32),this.avgbitrate=this._readData(e,_.fields.FIELD_UINT32),this.reserved=this._readData(e,_.fields.FIELD_UINT32),this.localPos},_.boxes.HintMediaHeaderBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_UINT16,this.maxPDUsize),this._writeData(e,_.fields.FIELD_UINT16,this.avgPDUsize),this._writeData(e,_.fields.FIELD_UINT32,this.maxbitrate),this._writeData(e,_.fields.FIELD_UINT32,this.avgbitrate),this._writeData(e,_.fields.FIELD_UINT32,this.reserved),this.localPos},_.boxes.NullMediaHeaderBox=function(e){_.boxes.FullBox.call(this,"nmhd",e)},_.boxes.NullMediaHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.NullMediaHeaderBox.prototype.constructor=_.boxes.NullMediaHeaderBox,_.boxes.CompositionOffsetBox=function(e){_.boxes.FullBox.call(this,"ctts",e),this.entries=[]},_.boxes.CompositionOffsetBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.CompositionOffsetBox.prototype.constructor=_.boxes.CompositionOffsetBox,_.boxes.CompositionOffsetBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength(),0===this.version?this.size+=2*_.fields.FIELD_UINT32.getLength()*this.entry_count:this.size+=(_.fields.FIELD_UINT32.getLength()+_.fields.FIELD_INT32.getLength())*this.entry_count},_.boxes.CompositionOffsetBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i={};for(this.entry_count=this._readData(e,_.fields.FIELD_UINT32),r=0;r<this.entry_count;r++)i={},0===this.version?(i.sample_count=this._readData(e,_.fields.FIELD_UINT32),i.sample_offset=this._readData(e,_.fields.FIELD_UINT32)):(i.sample_count=this._readData(e,_.fields.FIELD_UINT32),i.sample_offset=this._readData(e,_.fields.FIELD_INT32)),this.entries.push(i);return this.localPos},_.boxes.CompositionOffsetBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.entry_count),n=0;n<this.entry_count;n++)0===this.version?(this._writeData(e,_.fields.FIELD_UINT32,this.entries[n].sample_count),this._writeData(e,_.fields.FIELD_UINT32,this.entries[n].sample_offset)):(this._writeData(e,_.fields.FIELD_UINT32,this.entries[n].sample_count),this._writeData(e,_.fields.FIELD_INT32,this.entries[n].sample_offset));return this.localPos},_.boxes.CompositionToDecodeBox=function(e){_.boxes.FullBox.call(this,"cslg",e)},_.boxes.CompositionToDecodeBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.CompositionToDecodeBox.prototype.constructor=_.boxes.CompositionToDecodeBox,_.boxes.CompositionToDecodeBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=5*_.fields.FIELD_INT32.getLength()},_.boxes.CompositionToDecodeBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.compositionToDTSShift=this._readData(e,_.fields.FIELD_INT32),this.leastDecodeToDisplayDelta=this._readData(e,_.fields.FIELD_INT32),this.greatestDecodeToDisplayDelta=this._readData(e,_.fields.FIELD_INT32),this.compositionStartTime=this._readData(e,_.fields.FIELD_INT32),this.compositionEndTime=this._readData(e,_.fields.FIELD_INT32),this.localPos},_.boxes.CompositionToDecodeBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_INT32,this.compositionToDTSShift),this._writeData(e,_.fields.FIELD_INT32,this.leastDecodeToDisplayDelta),this._writeData(e,_.fields.FIELD_INT32,this.greatestDecodeToDisplayDelta),this._writeData(e,_.fields.FIELD_INT32,this.compositionStartTime),this._writeData(e,_.fields.FIELD_INT32,this.compositionEndTime),this.localPos},_.boxes.SyncSampleBox=function(e){_.boxes.FullBox.call(this,"stss",e),this.entries=[]},_.boxes.SyncSampleBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SyncSampleBox.prototype.constructor=_.boxes.SyncSampleBox,_.boxes.SyncSampleBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength(),this.size+=_.fields.FIELD_UINT32.getLength()*this.entry_count},_.boxes.SyncSampleBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i={};for(this.entry_count=this._readData(e,_.fields.FIELD_UINT32),r=0;r<this.entry_count;r++)i={},i.sample_number=this._readData(e,_.fields.FIELD_UINT32),this.entries.push(i);return this.localPos},_.boxes.SyncSampleBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.entry_count),n=0;n<this.entry_count;n++)this._writeData(e,_.fields.FIELD_UINT32,this.entries[n].sample_number);return this.localPos},_.boxes.TrackReferenceBox=function(e){_.boxes.FullBox.call(this,"tref",e)},_.boxes.TrackReferenceBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.TrackReferenceBox.prototype.constructor=_.boxes.TrackReferenceBox,_.boxes.TrackReferenceBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength()*this.track_IDs.length},_.boxes.TrackReferenceBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.track_IDs=this._readArrayData(e,_.fields.FIELD_UINT32),this.localPos},_.boxes.TrackReferenceBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeArrayData(e,_.fields.FIELD_UINT32,this.track_IDs),this.localPos},_.boxes.OriginalFormatBox=function(e){_.boxes.Box.call(this,"frma",e)},_.boxes.OriginalFormatBox.prototype=Object.create(_.boxes.Box.prototype),_.boxes.OriginalFormatBox.prototype.constructor=_.boxes.OriginalFormatBox,_.boxes.OriginalFormatBox.prototype.computeLength=function(){_.boxes.Box.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength()},_.boxes.OriginalFormatBox.prototype.read=function(e,t,n){return this.localPos=t,this.localEnd=n,this.data_format=this._readData(e,_.fields.FIELD_UINT32),this.localPos},_.boxes.OriginalFormatBox.prototype.write=function(e,t){return _.boxes.Box.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_UINT32,this.data_format),this.localPos},_.boxes.PiffSampleEncryptionBox=function(e){_.boxes.FullBox.call(this,"sepiff",e,[162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244])},_.boxes.PiffSampleEncryptionBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.PiffSampleEncryptionBox.prototype.constructor=_.boxes.PiffSampleEncryptionBox,_.boxes.PiffSampleEncryptionBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this);var e=0,t=0;for(this.size+=_.fields.FIELD_UINT32.getLength(),1&this.flags&&(this.size+=_.fields.FIELD_UINT8.getLength()),e=0;e<this.sample_count;e++)if(this.size+=8,2&this.flags)for(this.size+=_.fields.FIELD_UINT16.getLength(),t=0;t<this.entry[e].NumberOfEntries;t++)this.size+=_.fields.FIELD_UINT16.getLength(),this.size+=_.fields.FIELD_UINT32.getLength()},_.boxes.PiffSampleEncryptionBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0,r=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.sample_count),1&this.flags&&this._writeData(e,_.fields.FIELD_UINT8,this.IV_size),n=0;n<this.sample_count;n++)if(this._writeBuffer(e,this.entry[n].InitializationVector,8),2&this.flags)for(this._writeData(e,_.fields.FIELD_UINT16,this.entry[n].NumberOfEntries),r=0;r<this.entry[n].NumberOfEntries;r++)this._writeData(e,_.fields.FIELD_UINT16,this.entry[n].clearAndCryptedData[r].BytesOfClearData),this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].clearAndCryptedData[r].BytesOfEncryptedData);return this.localPos},_.boxes.PiffSampleEncryptionBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i=0,o={},a={};for(this.sample_count=this._readData(e,_.fields.FIELD_UINT32),1&this.flags&&(this.IV_size=this._readData(e,_.fields.FIELD_UINT8)),this.entry=[],r=0;r<this.sample_count;r++){if(a={},a.InitializationVector=e.subarray(this.localPos,this.localPos+8),this.localPos+=8,2&this.flags)for(a.NumberOfEntries=this._readData(e,_.fields.FIELD_UINT16),a.clearAndCryptedData=[],i=0;i<a.NumberOfEntries;i++)o={},o.BytesOfClearData=this._readData(e,_.fields.FIELD_UINT16),o.BytesOfEncryptedData=this._readData(e,_.fields.FIELD_UINT32),a.clearAndCryptedData.push(o);this.entry.push(a)}return this.localPos},_.boxes.PiffTrackEncryptionBox=function(e){_.boxes.FullBox.call(this,"tepiff",e,[137,116,219,206,123,231,76,81,132,249,113,72,249,136,37,84])},_.boxes.PiffTrackEncryptionBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.PiffTrackEncryptionBox.prototype.constructor=_.boxes.PiffTrackEncryptionBox,_.boxes.PiffProtectionSystemSpecificHeaderBox=function(e){_.boxes.FullBox.call(this,"psshpiff",e,[208,138,79,24,16,243,74,130,182,200,50,216,171,161,131,211])},_.boxes.PiffProtectionSystemSpecificHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.PiffProtectionSystemSpecificHeaderBox.prototype.constructor=_.boxes.PiffProtectionSystemSpecificHeaderBox,_.boxes.TfxdBox=function(e){_.boxes.FullBox.call(this,"tfxd",e,[109,29,155,5,66,213,68,230,128,226,20,29,175,247,87,178])},_.boxes.TfxdBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.TfxdBox.prototype.constructor=_.boxes.TfxdBox,_.boxes.TfxdBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),1===this.version?this.size+=2*_.fields.FIELD_UINT64.getLength():this.size+=2*_.fields.FIELD_UINT32.getLength()},_.boxes.TfxdBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),1===this.version?(this._writeData(e,_.fields.FIELD_UINT64,this.fragment_absolute_time),this._writeData(e,_.fields.FIELD_UINT64,this.fragment_duration)):(this._writeData(e,_.fields.FIELD_UINT32,this.fragment_absolute_time),this._writeData(e,_.fields.FIELD_UINT32,this.fragment_duration)),this.localPos},_.boxes.TfxdBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),1===this.version?(this.fragment_absolute_time=this._readData(e,_.fields.FIELD_UINT64),this.fragment_duration=this._readData(e,_.fields.FIELD_UINT64)):(this.fragment_absolute_time=this._readData(e,_.fields.FIELD_UINT32),this.fragment_duration=this._readData(e,_.fields.FIELD_UINT32)),this.localPos},_.boxes.TfrfBox=function(e){_.boxes.FullBox.call(this,"tfrf",e,[212,128,126,242,202,57,70,149,142,84,38,203,158,70,167,159])},_.boxes.TfrfBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.TfrfBox.prototype.constructor=_.boxes.TfrfBox,_.boxes.TfrfBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT8.getLength(),1===this.version?this.size+=2*_.fields.FIELD_UINT64.getLength()*this.fragment_count:this.size+=2*_.fields.FIELD_UINT32.getLength()*this.fragment_count},_.boxes.TfrfBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(this._writeData(e,_.fields.FIELD_UINT8,this.fragment_count),n=0;n<this.fragment_count;n++)1===this.version?(this._writeData(e,_.fields.FIELD_UINT64,this.entry[n].fragment_absolute_time),this._writeData(e,_.fields.FIELD_UINT64,this.entry[n].fragment_duration)):(this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].fragment_absolute_time),this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].fragment_duration));return this.localPos},_.boxes.TfrfBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i={};for(this.fragment_count=this._readData(e,_.fields.FIELD_UINT8),this.entry=[],r=0;r<this.fragment_count;r++)i={},1===this.version?(i.fragment_absolute_time=this._readData(e,_.fields.FIELD_UINT64),i.fragment_duration=this._readData(e,_.fields.FIELD_UINT64)):(i.fragment_absolute_time=this._readData(e,_.fields.FIELD_UINT32),i.fragment_duration=this._readData(e,_.fields.FIELD_UINT32)),this.entry.push(i);return this.localPos},_.boxes.SubSampleInformationBox=function(e){_.boxes.FullBox.call(this,"subs",e)},_.boxes.SubSampleInformationBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SubSampleInformationBox.prototype.constructor=_.boxes.SubSampleInformationBox,_.boxes.SubSampleInformationBox.prototype.computeLength=function(){for(_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength(),i=0;i<this.entry_count;i++)if(this.size+=_.fields.FIELD_UINT32.getLength(),this.size+=_.fields.FIELD_UINT16.getLength(),this.entry[i].subsample_count>0)for(j=0;j<this.entry[i].subsample_count;j++)1===this.version?this.size+=_.fields.FIELD_UINT32.getLength():this.size+=_.fields.FIELD_UINT16.getLength(),this.size+=_.fields.FIELD_UINT8.getLength(),this.size+=_.fields.FIELD_UINT8.getLength(),this.size+=_.fields.FIELD_UINT32.getLength()},_.boxes.SubSampleInformationBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i=0,o={},a={};for(this.entry_count=this._readData(e,_.fields.FIELD_UINT32),this.entry=[],r=0;r<this.entry_count;r++){if(o={},o.sample_delta=this._readData(e,_.fields.FIELD_UINT32),o.subsample_count=this._readData(e,_.fields.FIELD_UINT16),o.subsample_count>0)for(o.subSampleEntries=[],i=0;i<o.subsample_count;i++)a={},1===this.version?a.subsample_size=this._readData(e,_.fields.FIELD_UINT32):a.subsample_size=this._readData(e,_.fields.FIELD_UINT16),a.subsample_priority=this._readData(e,_.fields.FIELD_UINT8),a.discardable=this._readData(e,_.fields.FIELD_UINT8),a.reserved=this._readData(e,_.fields.FIELD_UINT32),o.subSampleEntries.push(a);this.entry.push(o)}return this.localPos},_.boxes.SubSampleInformationBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0,r=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.entry_count),n=0;n<this.entry_count;n++)if(this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].sample_delta),this._writeData(e,_.fields.FIELD_UINT16,this.entry[n].subsample_count),this.entry[n].subsample_count>0)for(r=0;r<this.entry[n].subsample_count;r++)1===this.version?this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].subSampleEntries[r].subsample_size):this._writeData(e,_.fields.FIELD_UINT16,this.entry[n].subSampleEntries[r].subsample_size),this._writeData(e,_.fields.FIELD_UINT8,this.entry[n].subSampleEntries[r].subsample_priority),this._writeData(e,_.fields.FIELD_UINT8,this.entry[n].subSampleEntries[r].discardable),this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].subSampleEntries[r].reserved);return this.localPos},_.registerTypeBoxes();var E=function(){return{pes:{},si:{},binary:{},ts:{},Pts:{},aac:{},h264:{}}}();function b(){"use strict";var e,t,n;try{e=navigator.userAgent.toLowerCase(),/msie (\d+\.\d+);/.test(e)?(n=Number(RegExp.$1),e.indexOf("trident/6")>-1&&(n=10),e.indexOf("trident/5")>-1&&(n=9),e.indexOf("trident/4")>-1&&(n=8),t="Internet Explorer"):e.indexOf("trident/7")>-1?(n=11,t="Internet Explorer"):/edge[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Edge"):/firefox[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Firefox"):/opera[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Opera"):/chrome[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Chrome"):/version[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Safari"):/rv[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Mozilla"):/mozilla[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Mozilla"):/binget[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Library (BinGet)"):/curl[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Library (cURL)"):/java[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Library (Java)"):/libwww-perl[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Library (libwww-perl)"):/microsoft url control -[\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Library (Microsoft URL Control)"):/peach[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Library (Peach)"):/php[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Library (PHP)"):/pxyscand[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Library (pxyscand)"):/pycurl[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Library (PycURL)"):/python-urllib[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Library (Python URLlib)"):/appengine-google/.test(e)?(n=Number(RegExp.$1),t="Cloud (Google AppEngine)"):/trident/.test(e)?(n=Number(RegExp.$1),t="Trident"):/adventurer/.test(e)?(n=Number(RegExp.$1),t="Adventurer"):/webkit[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="WebKit"):(n="unknown",t="unknown")}catch(r){t="error",n="error"}return{name:t.replace(/\s+/g,""),version:n}}function T(){"use strict";var e,t,n,r;try{e=navigator.userAgent.toLowerCase(),n=-1!==e.indexOf("windows nt 10.0")?"Windows 10":-1!==e.indexOf("windows nt 6.3")?"Windows 8.1":-1!==e.indexOf("windows nt 6.2")?"Windows 8":-1!==e.indexOf("windows nt 6.1")?"Windows 7":-1!==e.indexOf("windows nt 6.0")?"Windows Vista/Windows Server 2008":-1!==e.indexOf("windows nt 5.2")?"Windows XP x64/Windows Server 2003":-1!==e.indexOf("windows nt 5.1")?"Windows XP":-1!==e.indexOf("windows nt 5.01")?"Windows 2000, Service Pack 1 (SP1)":-1!==e.indexOf("windows xp")?"Windows XP":-1!==e.indexOf("windows 2000")?"Windows 2000":-1!==e.indexOf("windows nt 5.0")?"Windows 2000":-1!==e.indexOf("windows nt 4.0")?"Windows NT 4.0":-1!==e.indexOf("windows nt")?"Windows NT 4.0":-1!==e.indexOf("winnt4.0")?"Windows NT 4.0":-1!==e.indexOf("winnt")?"Windows NT 4.0":-1!==e.indexOf("windows me")?"Windows ME":-1!==e.indexOf("win 9x 4.90")?"Windows ME":-1!==e.indexOf("windows 98")?"Windows 98":-1!==e.indexOf("win98")?"Windows 98":-1!==e.indexOf("windows 95")?"Windows 95":-1!==e.indexOf("windows_95")?"Windows 95":-1!==e.indexOf("win95")?"Windows 95":-1!==e.indexOf("ce")?"Windows CE":-1!==e.indexOf("win16")?"Windows 3.11":-1!==e.indexOf("iemobile")?"Windows Mobile":-1!==e.indexOf("wm5 pie")?"Windows Mobile":-1!==e.indexOf("windows phone 10.0")?"Windows Phone 10":-1!==e.indexOf("windows")?"Windows (Unknown Version)":-1!==e.indexOf("openbsd")?"Open BSD":-1!==e.indexOf("sunos")?"Sun OS":-1!==e.indexOf("ubuntu")?"Ubuntu":-1!==e.indexOf("ipad")?"iOS (iPad)":-1!==e.indexOf("ipod")?"iOS (iTouch)":-1!==e.indexOf("iphone")?"iOS (iPhone)":-1!==e.indexOf("mac os x beta")?"Mac O SX Beta":-1!==e.indexOf("mac os x 10")?/mac os x 10_(\d+)\_(\d+)/.test(e)?"Mac OS X 10."+RegExp.$1:"Mac OS X 10":-1!==e.indexOf("mac os x")?"Mac OS X":-1!==e.indexOf("mac_68000")?"Mac OS Classic (68000)":-1!==e.indexOf("68K")?"Mac OS Classic (68000)":-1!==e.indexOf("mac_powerpc")?"Mac OS Classic (PowerPC)":-1!==e.indexOf("ppc mac")?"Mac OS Classic (PowerPC)":-1!==e.indexOf("macintosh")?"Mac OS Classic":-1!==e.indexOf("googletv")?"Android (GoogleTV)":-1!==e.indexOf("xoom")?"Android (Xoom)":-1!==e.indexOf("htc_flyer")?"Android (HTC Flyer)":-1!==e.indexOf("android")?"Android":-1!==e.indexOf("symbian")?"Symbian":-1!==e.indexOf("series60")?"Symbian (Series 60)":-1!==e.indexOf("series70")?"Symbian (Series 70)":-1!==e.indexOf("series80")?"Symbian (Series 80)":-1!==e.indexOf("series90")?"Symbian (Series 90)":-1!==e.indexOf("x11")?"UNIX":-1!==e.indexOf("nix")?"UNIX":-1!==e.indexOf("linux")?"Linux":-1!==e.indexOf("qnx")?"QNX":-1!==e.indexOf("os/2")?"IBM OS/2":-1!==e.indexOf("beos")?"BeOS":-1!==e.indexOf("blackberry95")?"Blackberry (Storm 1/2)":-1!==e.indexOf("blackberry97")?"Blackberry (Bold)":-1!==e.indexOf("blackberry96")?"Blackberry (Tour)":-1!==e.indexOf("blackberry89")?"Blackberry (Curve 2)":-1!==e.indexOf("blackberry98")?"Blackberry (Torch)":-1!==e.indexOf("playbook")?"Blackberry (Playbook)":-1!==e.indexOf("wnd.rim")?"Blackberry (IE/FF Emulator)":-1!==e.indexOf("blackberry")?"Blackberry":-1!==e.indexOf("palm")?"Palm OS":-1!==e.indexOf("webos")?"WebOS":-1!==e.indexOf("hpwos")?"WebOS (HP)":-1!==e.indexOf("blazer")?"Palm OS (Blazer)":-1!==e.indexOf("xiino")?"Palm OS (Xiino)":-1!==e.indexOf("kindle")?"Kindle":-1!==e.indexOf("wii")?"Nintendo (Wii)":-1!==e.indexOf("nintendo ds")?"Nintendo (DS)":-1!==e.indexOf("playstation 3")?"Sony (Playstation Console)":-1!==e.indexOf("playstation portable")?"Sony (Playstation Portable)":-1!==e.indexOf("webtv")?"MSN TV (WebTV)":-1!==e.indexOf("inferno")?"Inferno":"Unknown",t=navigator.platform.toLowerCase(),r=-1!==t.indexOf("x64")?"64":-1!==e.indexOf("x86_64")?"64":-1!==e.indexOf("x86-64")?"64":-1!==e.indexOf("win64")?"64":-1!==e.indexOf("x64;")?"64":-1!==e.indexOf("amd64")?"64":-1!==e.indexOf("wow64")?"64":-1!==e.indexOf("x64_64")?"64":-1!==e.indexOf("ia65")?"64":-1!==e.indexOf("sparc64")?"64":-1!==e.indexOf("ppc64")?"64":-1!==e.indexOf("irix64")?"64":-1!==e.indexOf("irix64")?"64":"32"}catch(i){n="error",r="error"}return{name:n.replace(/\s+/g,""),bits:"x"+r}}return"undefined"!==typeof e.exports?e.exports=E:window.mpegts=E,E.si.PSISection=function(e){this.m_table_id=e,this.m_section_syntax_indicator=1,this.m_section_length=E.si.PSISection.prototype.SECTION_LENGTH,this.m_transport_stream_id=0,this.m_version_number=0,this.m_current_next_indicator=!0,this.m_section_number=0,this.m_last_section_number=0,this.m_bValid=null},E.si.PSISection.prototype.parse=function(e){this.m_bValid=!1;var t=0,n=e[t];return t=0===n?t+1:t+n,this.m_table_id=e[t],t++,this.m_section_syntax_indicator=E.binary.getBitFromByte(e[t],0),this.m_section_length=E.binary.getValueFrom2Bytes(e.subarray(t,t+2),4),t+=2,this.m_transport_stream_id=E.binary.getValueFrom2Bytes(e.subarray(t,t+2)),t+=2,this.m_version_number=E.binary.getValueFromByte(e[t],2,5),this.m_current_next_indicator=E.binary.getBitFromByte(e[t],7),t++,this.m_section_number=e[t],t++,this.m_last_section_number=e[t],this.m_bValid=!0,t},E.si.PSISection.prototype.getSectionLength=function(){return this.m_section_length},E.si.PSISection.prototype.SECTION_LENGTH=9,E.si.PSISection.prototype.HEADER_LENGTH=8,E.aac.SAMPLING_FREQUENCY=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],E.aac.getAudioSpecificConfig=function(e){var t=E.binary.getValueFromByte(e[2],0,2),n=E.binary.getValueFromByte(e[2],2,4),r=E.binary.getValueFrom2Bytes(e.subarray(2,5),7,3),i=new Uint8Array(2);return i[0]=t+1<<3,i[0]|=(14&n)>>1,i[1]|=(1&n)<<7,i[1]|=r<<3,i},E.aac.parseADTS=function(e,t){var n,r,i=[],o={},a=0;while(a<e.length)r=a,o.syncword=(e[a]<<4)+((240&e[a+1])>>4),o.protection_absent=1&e[a+1],o.sampling_frequency_index=(60&e[a+2])>>2,o.channel_configuration=((1&e[a+2])<<1)+((192&e[a+3])>>6),o.aac_frame_length=((3&e[a+3])<<11)+(e[a+4]<<3)+((224&e[a+5])>>5),o.number_of_raw_data_blocks_in_frame=(3&e[a+6])>>2,a+=7,0===o.number_of_raw_data_blocks_in_frame&&(0===o.protection_absent&&(a+=2),n={},n.offset=a,n.length=o.aac_frame_length-(a-r),t&&t[r]&&(n.cts=t[r]),i.push(n),a+=n.length);return i},E.ts.AdaptationField=function(){this.m_cAFLength=null,this.m_bDiscontinuityInd=null,this.m_bRAI=null,this.m_bESPriority=null,this.m_bPCRFlag=null,this.m_bOPCRFlag=null,this.m_bSplicingPointFlag=null,this.m_bPrivateDataFlag=null,this.m_bAdaptationFieldExtFlag=null},E.ts.AdaptationField.prototype.getLength=function(){return this.m_cAFLength+1},E.ts.AdaptationField.prototype.parse=function(e){if(this.m_cAFLength=e[0],0!==this.m_cAFLength){var t=1;this.m_bDiscontinuityInd=E.binary.getBitFromByte(e[t],0),this.m_bRAI=E.binary.getBitFromByte(e[t],1),this.m_bESPriority=E.binary.getBitFromByte(e[t],2),this.m_bPCRFlag=E.binary.getBitFromByte(e[t],3),this.m_bOPCRFlag=E.binary.getBitFromByte(e[t],4),this.m_bSplicingPointFlag=E.binary.getBitFromByte(e[t],5),this.m_bPrivateDataFlag=E.binary.getBitFromByte(e[t],6),this.m_bAdaptationFieldExtFlag=E.binary.getBitFromByte(e[t],7)}},E.binary.readBytes=function(e,t,n){for(var r=0,i=0;i<n;i++)r<<=8,r+=e[t],t++;return r},E.binary.getBitFromByte=function(e,t){var n=0;return n+=1<<7-t,0!==(e&n)},E.binary.getValueFrom3Bytes=function(e,t,n){"undefined"===typeof n&&(n=-1),"undefined"===typeof t&&(t=0);var r=-1==n?-1:n-(16-t),i=-1==n?0:8-r,o=E.binary.getValueFromByte(e[0],t),a=E.binary.getValueFromByte(e[1]),s=E.binary.getValueFromByte(e[2],0,r,!1);return(o<<16&16711680|a<<8&65280|255&s)>>i},E.binary.getValueFrom2Bytes=function(e,t,n){"undefined"===typeof n&&(n=-1),"undefined"===typeof t&&(t=0);var r=-1==n?-1:n-(8-t),i=-1==n?0:8-r,o=E.binary.getValueFromByte(e[0],t),a=E.binary.getValueFromByte(e[1],0,r,!1);return(o<<8&65280|255&a)>>i},E.binary.getValueFromByte=function(e,t,n,r){var i=0,o=0;"undefined"===typeof n&&(n=-1),"undefined"===typeof t&&(t=0);var a=-1==n?7:t+n-1;for(o=t;o<=a;o++)i+=1<<7-o;var s=e&i;return(r||"undefined"===typeof r)&&(s>>=7-a),s},E.h264.getSequenceHeader=function(e){var t,n=-1,r=-1,i=0,o=null,a=0,s=0;while(i<e.length)if(0===e[i]&&0===e[i+1]&&0===e[i+2]&&1===e[i+3]){if(t=31&e[i+4],t>=E.h264.NALUTYPE_SPS&&t<=E.h264.NALUTYPE_PPS){if(-1===n&&(n=i),t===E.h264.NALUTYPE_SPS){var u=E.h264.parseSPS(e.subarray(i+5));a=u.pic_width_in_mbs_minus1+1<<4,s=u.pic_height_in_map_units_minus1+1<<4}}else n>0&&(r=i-n);if(t===E.h264.NALUTYPE_IDR||t===E.h264.NALUTYPE_NONIDR)break;i+=4}else{if(0===e[i]&&0===e[i+1]&&1===e[i+2]){n>0&&(r=i-n);break}i++}return-1===n||-1===r?null:(o=new Uint8Array(r),o.set(e.subarray(n,n+r)),{bytes:o,width:a,height:s})},E.h264.read_ue=function(e,t){var n=1,r=0,i=0;t._bit=t._byte>>t._bitPos&1,t._bitPos--,t._bitPos<0&&(t._byte=e[t._bytePos],t._bytePos++,t._bitPos=7);while(0===t._bit)i++,n<<=1,t._bit=t._byte>>t._bitPos&1,t._bitPos--,t._bitPos<0&&(t._byte=e[t._bytePos],t._bytePos++,t._bitPos=7);if(n-=1,r=0,i)while(i>0)t._bit=t._byte>>t._bitPos&1,t._bitPos--,r=(r<<1)+t._bit,i--,t._bitPos<0&&(t._byte=e[t._bytePos],t._bytePos++,t._bitPos=7);return n+=r,n},E.h264.read_flag=function(e,t){var n=0;return t._bit=t._byte>>t._bitPos&1,t._bitPos--,t._bitPos<0&&(t._byte=e[t._bytePos],t._bytePos++,t._bitPos=7),n=t._bit,n},E.h264.parseSPS=function(e){var t={profile_idc:0,constraint_set0_flag:0,constraint_set1_flag:0,constraint_set2_flag:0,constraint_set3_flag:0,level_idc:0,seq_parameter_set_id:0,chroma_format_idc:0,separate_colour_plane_flag:0,bit_depth_luma_minus8:0,bit_depth_chroma_minus8:0,qpprime_y_zero_transform_bypass_flag:0,seq_scaling_matrix_present_flag:0,log2_max_frame_num_minus4:0,pic_order_cnt_type:0,log2_max_pic_order_cnt_lsb_minus4:0,num_ref_frames:0,gaps_in_frame_num_value_allowed_flag:0,pic_width_in_mbs_minus1:0,pic_height_in_map_units_minus1:0},n={_byte:0,_bit:0,_bytePos:0,_bitPos:0};return n._bytePos=n._bitPos=0,n._byte=e[n._bytePos],n._bytePos++,t.profile_idc=n._byte,n._byte=e[n._bytePos],n._bytePos++,t.constraint_set0_flag=(128&n._byte)>>7,t.constraint_set1_flag=(64&n._byte)>>6,t.constraint_set2_flag=(32&n._byte)>>5,t.constraint_set3_flag=(16&n._byte)>>4,n._byte=e[n._bytePos],n._bytePos++,t.level_idc=n._byte,n._byte=e[n._bytePos],n._bytePos++,n._bitPos=7,t.seq_parameter_set_id=E.h264.read_ue(e,n),100!==t.profile_idc&&110!==t.profile_idc&&122!==t.profile_idc&&244!==t.profile_idc&&44!==t.profile_idc&&83!==t.profile_idc&&86!==t.profile_idc||(t.chroma_format_idc=E.h264.read_ue(e,n),3===t.chroma_format_idc&&(t.separate_colour_plane_flag=E.h264.read_flag(e,n)),t.bit_depth_luma_minus8=E.h264.read_ue(e,n),t.bit_depth_chroma_minus8=E.h264.read_ue(e,n),t.qpprime_y_zero_transform_bypass_flag=E.h264.read_flag(e,n),t.seq_scaling_matrix_present_flag=E.h264.read_flag(e,n),t.seq_scaling_matrix_present_flag),t.log2_max_frame_num_minus4=E.h264.read_ue(e,n),t.pic_order_cnt_type=E.h264.read_ue(e,n),0===t.pic_order_cnt_type?t.log2_max_pic_order_cnt_lsb_minus4=E.h264.read_ue(e,n):t.pic_order_cnt_type,t.num_ref_frames=E.h264.read_ue(e,n),t.gaps_in_frame_num_value_allowed_flag=E.h264.read_flag(e,n),t.pic_width_in_mbs_minus1=E.h264.read_ue(e,n),t.pic_height_in_map_units_minus1=E.h264.read_ue(e,n),t},E.h264.parseNALUs=function(e){var t,n=0,r=e.length,i=0,o=[];while(n<r)0===e[n]&&i++,1===e[n]&&i>=2&&(n++,o.length>0&&(o[o.length-1].size=n-(i+1)-o[o.length-1].offset),t={},t.type=31&e[n],t.offset=n,o.push(t),i=0),e[n]&&(i=0),n++;return o.length>0&&(o[o.length-1].size=n-o[o.length-1].offset),o},E.h264.bytestreamToMp4=function(e){var t=0,n=e.length,r=-1,i=0;while(t<n)0===e[t]&&0===e[t+1]&&0===e[t+2]&&1===e[t+3]?(r>=0&&(i=t-r-4,e[r]=(4278190080&i)>>24,e[r+1]=(16711680&i)>>16,e[r+2]=(65280&i)>>8,e[r+3]=255&i),r=t,t+=4):t++;i=t-r-4,e[r]=(4278190080&i)>>24,e[r+1]=(16711680&i)>>16,e[r+2]=(65280&i)>>8,e[r+3]=255&i},E.h264.isIDR=function(e){var t,n=0;while(n<e.length)if(0===e[n]&&0===e[n+1]&&1===e[n+2]){if(t=31&e[n+3],t===E.h264.NALUTYPE_IDR)return!0;n+=3}else n++;return!1},E.h264.NALUTYPE_NONIDR=1,E.h264.NALUTYPE_IDR=5,E.h264.NALUTYPE_SEI=6,E.h264.NALUTYPE_SPS=7,E.h264.NALUTYPE_PPS=8,E.h264.NALUTYPE_AU_DELIMITER=9,E.si.PAT=function(){E.si.PSISection.call(this,E.si.PAT.prototype.TABLE_ID),this.m_listOfProgramAssociation=[],this.m_network_pid=null},E.si.PAT.prototype=Object.create(E.si.PSISection.prototype),E.si.PAT.prototype.constructor=E.si.PAT,E.si.PAT.prototype.parse=function(e){var t=E.si.PSISection.prototype.parse.call(this,e);if(t++,this.m_bValid&&(this.m_bValid=!1,this.m_table_id===this.TABLE_ID)){var n=this.getSectionLength()-this.SECTION_LENGTH;while(n>=4){var r=new E.si.ProgramAssociation(e.subarray(t,t+4));0===r.getProgramNumber()?this.m_network_pid=r.getProgramMapPid():this.m_listOfProgramAssociation.push(r),n-=4,t+=4}this.m_bValid=!0}},E.si.PAT.prototype.getPmtPid=function(){var e=E.ts.TsPacket.prototype.UNDEFINED_PID;if(this.m_listOfProgramAssociation.length>=1){var t=this.m_listOfProgramAssociation[0];e=t.getProgramMapPid()}return e},E.si.PAT.prototype.TABLE_ID=0,E.si.PAT.prototype.PID=0,E.si.ProgramAssociation=function(e){this.m_program_number=0,this.m_program_map_pid=0,this.parse(e)},E.si.ProgramAssociation.prototype.getProgramNumber=function(){return this.m_program_number},E.si.ProgramAssociation.prototype.getProgramMapPid=function(){return this.m_program_map_pid},E.si.ProgramAssociation.prototype.getLength=function(){return 4},E.si.ProgramAssociation.prototype.parse=function(e){this.m_program_number=E.binary.getValueFrom2Bytes(e.subarray(0,2)),this.m_program_map_pid=E.binary.getValueFrom2Bytes(e.subarray(2,4),3,13)},E.pes.PesPacket=function(){this.m_cStreamID=null,this.m_nPESPacketLength=null,this.m_cPESScramblingCtrl=null,this.m_bPESpriority=null,this.m_bDataAlignement=null,this.m_bCopyright=null,this.m_bOriginalOrCopy=null,this.m_cPES_header_data_length=null,this.m_cPTS_DTS_flags=null,this.m_bESCR_flag=null,this.m_bES_rate_flag=null,this.m_bDSM_trick_mode_flag=null,this.m_bAdditional_copy_info_flag=null,this.m_bPES_CRC_flag=null,this.m_bPES_extension_flag=null,this.m_pPTS=null,this.m_pDTS=null,this.m_pESCR=null,this.m_ES_rate=null,this.m_DSM_trick_mode=null,this.m_Additional_copy_info=null,this.m_PES_CRC=null,this.m_cNbStuffingBytes=null,this.m_pPESExtension=null,this.m_pPrivateData=null,this.m_payloadArray=null,this.m_nPayloadLength=null,this.m_bDirty=null,this.m_bValid=!1},E.pes.PesPacket.prototype.parse=function(e){var t=0;this.m_nLength=e.length;var n=E.binary.getValueFrom3Bytes(e.subarray(t,t+3));if(n===this.START_CODE_PREFIX)if(t=3,this.m_cStreamID=e[t],t++,this.m_nPESPacketLength=E.binary.getValueFrom2Bytes(e.subarray(t,t+2)),t+=2,this.m_cStreamID!==E.ts.TsPacket.prototype.STREAM_ID_PADDING_STREAM){if(!this.hasOptionalPESHeader())return this.m_payloadArray=e.subarray(t+E.pes.PesPacket.prototype.FIXED_HEADER_LENGTH),this.m_nPayloadLength=this.m_nLength-E.pes.PesPacket.prototype.FIXED_HEADER_LENGTH,void(this.m_bValid=!0);var r=E.binary.getValueFromByte(e[t],0,2);if(2===r){this.m_cPESScramblingCtrl=E.binary.getValueFromByte(e[t],2,2),this.m_bPESpriority=E.binary.getBitFromByte(e[t],4),this.m_bDataAlignement=E.binary.getBitFromByte(e[t],5),this.m_bCopyright=E.binary.getBitFromByte(e[t],6),this.m_bOriginalOrCopy=E.binary.getBitFromByte(e[t],7),t++,this.m_cPTS_DTS_flags=E.binary.getValueFromByte(e[t],0,2),this.m_bESCR_flag=E.binary.getBitFromByte(e[t],2),this.m_bES_rate_flag=E.binary.getBitFromByte(e[t],3),this.m_bDSM_trick_mode_flag=E.binary.getBitFromByte(e[t],4),this.m_bAdditional_copy_info_flag=E.binary.getBitFromByte(e[t],5),this.m_bPES_CRC_flag=E.binary.getBitFromByte(e[t],6),this.m_bPES_extension_flag=E.binary.getBitFromByte(e[t],7),t++,this.m_cPES_header_data_length=255&e[t],t++,(this.m_cPTS_DTS_flags&E.pes.PesPacket.prototype.FLAG_PTS)==E.pes.PesPacket.prototype.FLAG_PTS&&(this.m_pPTS=new E.Pts(e.subarray(t,t+5)),t+=5),(this.m_cPTS_DTS_flags&E.pes.PesPacket.prototype.FLAG_DTS)==E.pes.PesPacket.prototype.FLAG_DTS&&(this.m_pDTS=new E.Pts(e.subarray(t,t+5)),t+=5),this.m_bESCR_flag&&(t+=6),this.m_bES_rate_flag&&(this.m_ES_rate=E.binary.getValueFrom3Bytes(e.subarray(t,t+3),1,22),t+=3),this.m_bDSM_trick_mode_flag&&(this.m_DSM_trick_mode=e[t],t++),this.m_bAdditional_copy_info_flag&&(this.m_Additional_copy_info=e[t],t++),this.m_bPES_CRC_flag&&(this.m_PES_CRC=E.binary.getValueFrom2Bytes(e.subarray(t,t+2)),t+=2),this.m_bPES_extension_flag;var i=E.pes.PesPacket.prototype.FIXED_HEADER_LENGTH+E.pes.PesPacket.prototype.FIXED_OPTIONAL_HEADER_LENGTH+this.m_cPES_header_data_length;this.m_cNbStuffingBytes=i-t,t+=this.m_cNbStuffingBytes,this.m_nPayloadLength=this.m_nLength-i,this.m_payloadArray=e.subarray(i,i+this.m_nPayloadLength),this.m_bValid=!0}}else this.m_bValid=!0},E.pes.PesPacket.prototype.hasOptionalPESHeader=function(){return this.m_cStreamID!==E.ts.TsPacket.prototype.STREAM_ID_PROGRAM_STREAM_MAP&&this.m_cStreamID!==E.ts.TsPacket.prototype.STREAM_ID_PADDING_STREAM&&this.m_cStreamID!==E.ts.TsPacket.prototype.STREAM_ID_PRIVATE_STREAM_2&&this.m_cStreamID!==E.ts.TsPacket.prototype.STREAM_ID_ECM_STREAM&&this.m_cStreamID!==E.ts.TsPacket.prototype.STREAM_ID_EMM_STREAM&&this.m_cStreamID!==E.ts.TsPacket.prototype.STREAM_ID_PROGRAM_STREAM_DIRECTORY&&this.m_cStreamID!==E.ts.TsPacket.prototype.STREAM_ID_DSMCC_STREAM&&this.m_cStreamID!==E.ts.TsPacket.prototype.STREAM_ID_H2221_TYPE_E_STREAM},E.pes.PesPacket.prototype.getHeaderLength=function(){return E.pes.PesPacket.prototype.FIXED_HEADER_LENGTH+E.pes.PesPacket.prototype.FIXED_OPTIONAL_HEADER_LENGTH+this.m_cPES_header_data_length},E.pes.PesPacket.prototype.getPayload=function(){return this.m_payloadArray},E.pes.PesPacket.prototype.getPts=function(){return this.m_pPTS},E.pes.PesPacket.prototype.getDts=function(){return this.m_pDTS},E.pes.PesPacket.prototype.START_CODE_PREFIX=1,E.pes.PesPacket.prototype.FIXED_HEADER_LENGTH=6,E.pes.PesPacket.prototype.FIXED_OPTIONAL_HEADER_LENGTH=3,E.pes.PesPacket.prototype.FLAG_DTS=1,E.pes.PesPacket.prototype.FLAG_PTS=2,E.si.PMT=function(){E.si.PSISection.call(this,E.si.PMT.prototype.TABLE_ID),this.m_listOfComponents=[],this.m_PCR_PID=null,this.m_program_info_length=null},E.si.PMT.prototype=Object.create(E.si.PSISection.prototype),E.si.PMT.prototype.constructor=E.si.PMT,E.si.PMT.prototype.parse=function(e){var t=E.si.PSISection.prototype.parse.call(this,e);if(t++,this.m_bValid&&(this.m_bValid=!1,this.m_table_id===this.TABLE_ID)){var n=this.getSectionLength()-this.SECTION_LENGTH;if(!(n<4)){this.m_PCR_PID=E.binary.getValueFrom2Bytes(e.subarray(t,t+2),3),t+=2,this.m_program_info_length=E.binary.getValueFrom2Bytes(e.subarray(t,t+2),4),t+=2,t+=this.m_program_info_length,n=this.m_section_length-this.SECTION_LENGTH-4-this.m_program_info_length;var r=null;while(n>0)r=new E.si.ESDescription(e.subarray(t,t+n)),this.m_listOfComponents.push(r),n-=r.getLength(),t+=r.getLength();this.m_bValid=!0}}},E.si.PMT.prototype.TABLE_ID=2,E.si.PMT.prototype.gStreamTypes=[{name:"Reserved",value:0,desc:"ITU-T | ISO/IEC Reserved"},{name:"MPEG1-Video",value:224,desc:"ISO/IEC 11172-2 Video"},{name:"MPEG2-Video",value:224,desc:"ITU-T Rec. H.262 | ISO/IEC 13818-2 Video or ISO/IEC 11172-2 constrained parameter video stream"},{name:"MPEG1-Audio",value:192,desc:"ISO/IEC 11172-3 Audio"},{name:"MPEG2-Audio",value:192,desc:"ISO/IEC 13818-3 Audio"},{name:"PRIVATE_SECTIONS",value:189,desc:"ITU-T Rec. H.222.0 | ISO/IEC 13818-1 private_sections"},{name:"PRIVATE",value:189,desc:"ITU-T Rec. H.222.0 | ISO/IEC 13818-1 PES packets containing private data"},{name:"MHEG",value:243,desc:"ISO/IEC 13522 MHEG"},{name:"MPEG1-DSM-CC",value:242,desc:"ITU-T Rec. H.222.0 | ISO/IEC 13818-1 Annex A DSM-CC"},{name:"H.222.1",value:244,desc:"ITU-T Rec. H.222.1"},{name:"DSM-CC_A",value:244,desc:"ISO/IEC 13818-6 type A"},{name:"DSM-CC_B",value:245,desc:"ISO/IEC 13818-6 type B"},{name:"DSM-CC_C",value:246,desc:"ISO/IEC 13818-6 type C"},{name:"DSM-CC_D",value:247,desc:"ISO/IEC 13818-6 type D"},{name:"Auxiliary",value:0,desc:"ITU-T Rec. H.222.0 | ISO/IEC 13818-1 auxiliary"},{name:"MPEG2-AAC-ADTS",value:192,desc:"ISO/IEC 13818-7 Audio with ADTS transport syntax"},{name:"MPEG4-Video",value:224,desc:"ISO/IEC 14496-2 Visual"},{name:"MPEG4-AAC-LATM",value:192,desc:"ISO/IEC 14496-3 Audio with the LATM transport syntax as defined in ISO/IEC 14496-3/AMD-1"},{name:"MPEG4-SL",value:250,desc:"ISO/IEC 14496-1 SL-packetized stream or FlexMux stream carried in PES packets"},{name:"MPEG4-SL",value:250,desc:"ISO/IEC 14496-1 SL-packetized stream or FlexMux stream carried in ISO/IEC14496_sections"},{name:"DSM-CC_SDP",value:0,desc:"ISO/IEC 13818-6 Synchronized Download Protocol"},{name:"META_PES",value:252,desc:"Metadata carried in PES packets"},{name:"META_SECTIONS",value:252,desc:"Metadata carried in metadata_sections"},{name:"META_DSM-CC",value:252,desc:"Metadata carried in ISO/IEC 13818-6 Data Carousel"},{name:"META_DSM-CC",value:252,desc:"Metadata carried in ISO/IEC 13818-6 Object Carousel"},{name:"META_DSM-CC",value:252,desc:"Metadata carried in ISO/IEC 13818-6 Synchronized Download Protocol"},{name:"MPEG2-IPMP",value:0,desc:"IPMP stream (defined in ISO/IEC 13818-11, MPEG-2 IPMP)"},{name:"H.264",value:224,desc:"AVC video stream as defined in ITU-T Rec. H.264 | ISO/IEC 14496-10 Video"},{name:"MPEG4AAC",value:192,desc:"ISO/IEC 14496-3 Audio, without using any additional transport syntax, such as DST, ALS and SLS"},{name:"MPEG4Text",value:0,desc:"ISO/IEC 14496-17 Text"},{name:"Aux. Video (23002-3)",value:30,desc:"Auxiliary video stream as defined in ISO/IEC 23002-3"},{name:"H.264-SVC",value:224,desc:"SVC video sub-bitstream of a video stream as defined in the Annex G of ITU-T Rec. H.264 | ISO/IEC 14496-10 Video"},{name:"H.264-MVC",value:224,desc:"MVC video sub-bitstream of a video stream as defined in the Annex H of ITU-T Rec. H.264 | ISO/IEC 14496-10 Video"},{name:"Reserved1",value:0,desc:"TBC Reserved"},{name:"Reserved2",value:0,desc:"TBC Reserved"},{name:"Reserved3",value:0,desc:"TBC Reserved"},{name:"HEVC",value:224,desc:"ITU.-T Rec H.26x | ISO/IEC 23008-2 video stream"}],E.si.PMT.prototype.MPEG2_VIDEO_STREAM_TYPE=2,E.si.PMT.prototype.AVC_VIDEO_STREAM_TYPE=27,E.si.PMT.prototype.MPEG1_AUDIO_STREAM_TYPE=3,E.si.PMT.prototype.MPEG2_AUDIO_STREAM_TYPE=4,E.si.PMT.prototype.AAC_AUDIO_STREAM_TYPE=17,E.si.PMT.prototype.AC3_AUDIO_STREAM_TYPE=6,E.si.PMT.prototype.SUB_STREAM_TYPE=6,E.si.PMT.prototype.STREAM_TYPE_MP1V=1,E.si.PMT.prototype.STREAM_TYPE_MP2V=2,E.si.PMT.prototype.STREAM_TYPE_MP1A=3,E.si.PMT.prototype.STREAM_TYPE_MP2A=4,E.si.PMT.prototype.STREAM_TYPE_PRIVATE=6,E.si.PMT.prototype.STREAM_TYPE_TELETEXT=6,E.si.PMT.prototype.STREAM_TYPE_DVBSUBTITLE=6,E.si.PMT.prototype.STREAM_TYPE_AC3=6,E.si.PMT.prototype.STREAM_TYPE_MP2AAC_ADTS=15,E.si.PMT.prototype.STREAM_TYPE_MP4AAC_LATM=17,E.si.PMT.prototype.STREAM_TYPE_H264=27,E.si.PMT.prototype.STREAM_TYPE_MP4AAC=28,E.si.PMT.prototype.STREAM_TYPE_AUX_23002_3=30,E.si.PMT.prototype.STREAM_TYPE_SVC=31,E.si.PMT.prototype.STREAM_TYPE_MVC=32,E.si.PMT.prototype.STREAM_TYPE_HEVC=36,E.si.ESDescription=function(e){this.m_stream_type=null,this.m_elementary_PID=null,this.m_ES_info_length=null,this.parse(e)},E.si.ESDescription.prototype.getStreamType=function(){return this.m_stream_type},E.si.ESDescription.prototype.getPID=function(){return this.m_elementary_PID},E.si.ESDescription.prototype.getLength=function(){return 5+this.m_ES_info_length},E.si.ESDescription.prototype.parse=function(e){this.m_stream_type=e[0],this.m_elementary_PID=E.binary.getValueFrom2Bytes(e.subarray(1,3),3),this.m_ES_info_length=E.binary.getValueFrom2Bytes(e.subarray(3,5),4)},E.Pts=function(e){var t,n,i=e[0]>>1&7;n=i>>2,t=(3&i)<<30>>>0;var o=e[1];t=(t|o<<22)>>>0;var a=e[2]>>1;t=(t|a<<15)>>>0;var s=e[3];t=(t|s<<7)>>>0;var u=e[4]>>1;t=(t|u)>>>0,this.m_lPTS=r.math.Long.fromBits(t,n).toNumber(),this.m_fPTS=this.m_lPTS/E.Pts.prototype.SYSTEM_CLOCK_FREQUENCY},E.Pts.prototype.getValue=function(){return this.m_lPTS},E.Pts.prototype.getValueInSeconds=function(){return this.m_fPTS},E.Pts.prototype.SYSTEM_CLOCK_FREQUENCY=9e4,E.ts.TsPacket=function(){this.m_cSync=null,this.m_bTransportError=null,this.m_bPUSI=null,this.m_bTransportPriority=null,this.m_nPID=null,this.m_cTransportScramblingCtrl=null,this.m_cAdaptationFieldCtrl=null,this.m_cContinuityCounter=null,this.m_pAdaptationField=null,this.m_payloadArray=null,this.m_cPayloadLength=null,this.m_bDirty=null,this.m_time=null,this.m_arrivalTime=null,this.m_bIgnored=null},E.ts.TsPacket.prototype.parse=function(e){var t=0;if(this.m_cSync=e[t],this.m_cSync===this.SYNC_WORD){if(t++,this.m_bTransportError=E.binary.getBitFromByte(e[t],0),this.m_bPUSI=E.binary.getBitFromByte(e[t],1),this.m_bTransportPriority=E.binary.getBitFromByte(e[t],2),this.m_nPID=E.binary.getValueFrom2Bytes(e.subarray(t,t+2),3,13),t+=2,this.m_cTransportScramblingCtrl=E.binary.getValueFromByte(e[t],0,2),this.m_cAdaptationFieldCtrl=E.binary.getValueFromByte(e[t],2,2),this.m_cContinuityCounter=E.binary.getValueFromByte(e[t],4,4),t++,2&this.m_cAdaptationFieldCtrl){var n=e[t];if(n+t>=this.TS_PACKET_SIZE)return;this.m_pAdaptationField=new E.ts.AdaptationField,this.m_pAdaptationField.parse(e.subarray(t)),t+=this.m_pAdaptationField.getLength()}0!==this.m_cAdaptationFieldCtrl&&1&this.m_cAdaptationFieldCtrl&&(this.m_cPayloadLength=this.TS_PACKET_SIZE-t,this.m_payloadArray=e.subarray(t,t+this.m_cPayloadLength))}},E.ts.TsPacket.prototype.checkSyncWord=function(e){var t=0,n=e[t];return n===this.SYNC_WORD},E.ts.TsPacket.prototype.getPid=function(){return this.m_nPID},E.ts.TsPacket.prototype.getPayload=function(){return this.m_payloadArray},E.ts.TsPacket.prototype.getPayloadLength=function(){return this.m_cPayloadLength},E.ts.TsPacket.prototype.getPusi=function(){return this.m_bPUSI},E.ts.TsPacket.prototype.hasAdaptationFieldOnly=function(){return 2===this.m_cAdaptationFieldCtrl},E.ts.TsPacket.prototype.SYNC_WORD=71,E.ts.TsPacket.prototype.TS_PACKET_SIZE=188,E.ts.TsPacket.prototype.UNDEFINED_PID=65535,E.ts.TsPacket.prototype.PAT_PID=0,E.ts.TsPacket.prototype.STREAM_ID_PROGRAM_STREAM_MAP=188,E.ts.TsPacket.prototype.STREAM_ID_PADDING_STREAM=190,E.ts.TsPacket.prototype.STREAM_ID_PADDING_STREAM=190,E.ts.TsPacket.prototype.STREAM_ID_PRIVATE_STREAM_2=191,E.ts.TsPacket.prototype.STREAM_ID_ECM_STREAM=240,E.ts.TsPacket.prototype.STREAM_ID_EMM_STREAM=241,E.ts.TsPacket.prototype.STREAM_ID_DSMCC_STREAM=242,E.ts.TsPacket.prototype.STREAM_ID_H2221_TYPE_E_STREAM=248,E.ts.TsPacket.prototype.STREAM_ID_PROGRAM_STREAM_DIRECTORY=255,o=this.dijon,c})}).call(this,n("4362"))},5080:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("e09e"),s=r(a),u=n("9ad3"),l=r(u),d=n("8760"),c=r(d),f=n("9ee1"),h=r(f),p=n("95b9"),m=r(p),g=n("a679"),y=r(g),v=n("473d"),_=r(v),E=n("f447"),b=r(E),T=n("010f"),S=r(T),I=n("5b8d"),w=r(I),x=n("4e7a"),A=r(x),D=n("467b"),R=r(D),M=n("589e"),C=r(M),N=n("6a2d"),P=r(N),L=n("e172"),O=r(L),F=n("2cc9");function B(e){e=e||{};var t=void 0,n=void 0,r=this.context,i=(0,A["default"])(r).getInstance(),a=e.timelineConverter,u=e.errHandler,d=e.BASE64,f="urn:dvb:dash:profile:dvb-dash:2014",p=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e};function g(){n=(0,C["default"])(r).getInstance().getLogger(t)}function v(e,t){var n=void 0,r=void 0,i=void 0,a=void 0,u=void 0,l=void 0,d=!1,c=!1;if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.hasOwnProperty("ContentComponent_asArray")&&(a=e.ContentComponent_asArray),u=t!==o["default"].TEXT?new RegExp(t):new RegExp("(vtt|ttml)"),e.Representation_asArray&&e.Representation_asArray.length&&e.Representation_asArray.length>0){var f=oe(e.Representation_asArray[0]);if(f&&f.length>0&&F.THUMBNAILS_SCHEME_ID_URIS.indexOf(f[0].schemeIdUri)>=0)return t===o["default"].IMAGE;if(e.Representation_asArray[0].hasOwnProperty(s["default"].CODECS)&&(l=e.Representation_asArray[0].codecs,0===l.search(o["default"].STPP)||0===l.search(o["default"].WVTT)))return t===o["default"].FRAGMENTED_TEXT}if(a){if(a.length>1)return t===o["default"].MUXED;a[0]&&a[0].contentType===t&&(d=!0,c=!0)}if(e.hasOwnProperty(s["default"].MIME_TYPE)&&(d=u.test(e.mimeType),c=!0),!c){n=0,r=e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0;while(!c&&n<r)i=e.Representation_asArray[n],i.hasOwnProperty(s["default"].MIME_TYPE)&&(d=u.test(i.mimeType),c=!0),n++}return d}function E(e){return v(e,o["default"].AUDIO)}function T(e){return v(e,o["default"].VIDEO)}function I(e){return v(e,o["default"].FRAGMENTED_TEXT)}function x(e){return v(e,o["default"].MUXED)}function D(e){return v(e,o["default"].IMAGE)}function R(e){return"text/vtt"===e||"application/ttml+xml"===e}function M(e){var t="";return e&&e.hasOwnProperty(s["default"].LANG)&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t}function N(e){return e&&e.hasOwnProperty(s["default"].VIEWPOINT)?e.Viewpoint:null}function L(e){return e&&e.hasOwnProperty(s["default"].ROLE_ASARRAY)?e.Role_asArray:[]}function B(e){return e&&e.hasOwnProperty(s["default"].ACCESSIBILITY_ASARRAY)?e.Accessibility_asArray:[]}function k(e){return e&&e.hasOwnProperty(s["default"].AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]}function U(){return function(e,t){return e.bandwidth-t.bandwidth}}function H(e){return e&&void 0!==e.Representation_asArray&&null!==e.Representation_asArray&&e.Representation_asArray.sort(U()),e}function j(e,t){return e&&e.Period_asArray&&p(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[]}function K(e,t,n){var r=j(t,n),i=void 0,o=void 0;for(i=0,o=r.length;i<o;i++)if(r[i].hasOwnProperty(s["default"].ID)&&r[i].id===e)return r[i];return null}function V(e,t,n){var r=j(t,n);return r.length>0&&p(e)?r[e]:null}function q(e,t,n){var i=j(t,n),o=i.length;if(e)for(var a=0;a<o;a++){var s=(0,w["default"])(r).getInstance();if(s.areEqual(i[a],e))return a}return-1}function G(e,t,n){var r=j(e,t),i=void 0,o=void 0,a=[];for(i=0,o=r.length;i<o;i++)v(r[i],n)&&a.push(H(r[i]));return a}function Y(e,t,n){var r=null;if(e&&e.Representation_asArray&&e.Representation_asArray.length>0){var i=p(t)&&t>=0&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0];i&&(r=i.mimeType+';codecs="'+i.codecs+'"',n&&void 0!==i.width&&(r+=';width="'+i.width+'";height="'+i.height+'"'))}return r}function z(e){return e&&e.Representation_asArray&&e.Representation_asArray.length>0?e.Representation_asArray[0].mimeType:null}function W(e){return e&&e.hasOwnProperty(s["default"].CENC_DEFAULT_KID)?e[s["default"].CENC_DEFAULT_KID]:null}function X(e){if(!e.Label_asArray||!e.Label_asArray.length)return[];for(var t=[],n=0;n<e.Label_asArray.length;n++)t.push({lang:e.Label_asArray[n].lang,text:e.Label_asArray[n].__text||e.Label_asArray[n]});return t}function $(e){return e&&e.hasOwnProperty(s["default"].CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null}function Q(e){var t=!1;return e&&e.hasOwnProperty("type")&&(t=e.type===s["default"].DYNAMIC),t}function J(e,t){var n=!1;return e&&e.profiles&&e.profiles.length>0&&(n=-1!==e.profiles.indexOf(t)),n}function Z(e){return J(e,f)}function ee(e){var t=void 0;return t=e&&e.hasOwnProperty(s["default"].MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,t}function te(e){return e&&e.bandwidth?e.bandwidth:NaN}function ne(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=NaN;return e&&e.hasOwnProperty(s["default"].MINIMUM_UPDATE_PERIOD)&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)}function re(e){return e&&e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0}function ie(e){if(!e||!e.Representation_asArray||!e.Representation_asArray.length)return null;var t=H(e),n=t.Representation_asArray;return n.map(function(e){return{bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null}})}function oe(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map(function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}}):null}function ae(e,t){return t&&t.Representation_asArray&&t.Representation_asArray.length>0&&p(e)?t.Representation_asArray[e]:null}function se(e){if(e&&e.period&&p(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&p(e.index))return H(t.AdaptationSet_asArray[e.index])}}function ue(e){var t=e.S_asArray[e.S_asArray.length-1];return!t.hasOwnProperty("r")||t.r>=0}function le(e){var t=se(e).Representation_asArray[0],n=void 0;return t.hasOwnProperty(s["default"].SEGMENT_LIST)?(n=t.SegmentList,!n.hasOwnProperty(s["default"].SEGMENT_TIMELINE)||ue(n.SegmentTimeline)):!(!t.hasOwnProperty(s["default"].SEGMENT_TEMPLATE)||(n=t.SegmentTemplate,!n.hasOwnProperty(s["default"].SEGMENT_TIMELINE)))&&ue(n.SegmentTimeline)}function de(e){var t=[],n=se(e),r=void 0,i=void 0;if(e&&e.period&&p(e.period.index)){var o=be(e.period.mpd.manifest);o&&(i=o[0])}if(n&&n.Representation_asArray)for(var u=0,d=n.Representation_asArray.length;u<d;++u){var c=n.Representation_asArray[u],f=new l["default"];if(f.index=u,f.adaptation=e,c.hasOwnProperty(s["default"].ID)&&(f.id=c.id),c.hasOwnProperty(s["default"].CODECS)&&(f.codecs=c.codecs),c.hasOwnProperty(s["default"].CODEC_PRIVATE_DATA)&&(f.codecPrivateData=c.codecPrivateData),c.hasOwnProperty(s["default"].BANDWITH)&&(f.bandwidth=c.bandwidth),c.hasOwnProperty(s["default"].WIDTH)&&(f.width=c.width),c.hasOwnProperty(s["default"].HEIGHT)&&(f.height=c.height),c.hasOwnProperty(s["default"].SCAN_TYPE)&&(f.scanType=c.scanType),c.hasOwnProperty(s["default"].MAX_PLAYOUT_RATE)&&(f.maxPlayoutRate=c.maxPlayoutRate),c.hasOwnProperty(s["default"].SEGMENT_BASE)?(r=c.SegmentBase,f.segmentInfoType=s["default"].SEGMENT_BASE):c.hasOwnProperty(s["default"].SEGMENT_LIST)?(r=c.SegmentList,r.hasOwnProperty(s["default"].SEGMENT_TIMELINE)?(f.segmentInfoType=s["default"].SEGMENT_TIMELINE,f.useCalculatedLiveEdgeTime=ue(r.SegmentTimeline)):(f.segmentInfoType=s["default"].SEGMENT_LIST,f.useCalculatedLiveEdgeTime=!0)):c.hasOwnProperty(s["default"].SEGMENT_TEMPLATE)?(r=c.SegmentTemplate,r.hasOwnProperty(s["default"].SEGMENT_TIMELINE)?(f.segmentInfoType=s["default"].SEGMENT_TIMELINE,f.useCalculatedLiveEdgeTime=ue(r.SegmentTimeline)):f.segmentInfoType=s["default"].SEGMENT_TEMPLATE,r.hasOwnProperty(s["default"].INITIALIZATION_MINUS)&&(f.initialization=r.initialization.split("$Bandwidth$").join(c.bandwidth).split("$RepresentationID$").join(c.id))):f.segmentInfoType=s["default"].BASE_URL,f.essentialProperties=oe(c),r){if(r.hasOwnProperty(s["default"].INITIALIZATION)){var h=r.Initialization;h.hasOwnProperty(s["default"].SOURCE_URL)?f.initialization=h.sourceURL:h.hasOwnProperty(s["default"].RANGE)&&(f.range=h.range)}else c.hasOwnProperty(s["default"].MIME_TYPE)&&R(c.mimeType)&&(f.range=0);r.hasOwnProperty(s["default"].TIMESCALE)&&(f.timescale=r.timescale),r.hasOwnProperty(s["default"].DURATION)&&(f.segmentDuration=r.duration/f.timescale),r.hasOwnProperty(s["default"].MEDIA)&&(f.media=r.media),r.hasOwnProperty(s["default"].START_NUMBER)&&(f.startNumber=r.startNumber),r.hasOwnProperty(s["default"].INDEX_RANGE)&&(f.indexRange=r.indexRange),r.hasOwnProperty(s["default"].PRESENTATION_TIME_OFFSET)&&(f.presentationTimeOffset=r.presentationTimeOffset/f.timescale),r.hasOwnProperty(s["default"].AVAILABILITY_TIME_OFFSET)?f.availabilityTimeOffset=r.availabilityTimeOffset:i&&void 0!==i.availabilityTimeOffset&&(f.availabilityTimeOffset=i.availabilityTimeOffset),r.hasOwnProperty(s["default"].AVAILABILITY_TIME_COMPLETE)?f.availabilityTimeComplete="false"!==r.availabilityTimeComplete:i&&void 0!==i.availabilityTimeComplete&&(f.availabilityTimeComplete=i.availabilityTimeComplete)}f.MSETimeOffset=a.calcMSETimeOffset(f),f.path=[e.period.index,e.index,u],t.push(f)}return t}function ce(e){var t=e&&p(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,n=[],r=void 0,i=void 0,a=void 0;if(t&&t.AdaptationSet_asArray)for(a=0;a<t.AdaptationSet_asArray.length;a++)i=t.AdaptationSet_asArray[a],r=new c["default"],i.hasOwnProperty(s["default"].ID)&&(r.id=i.id),r.index=a,r.period=e,x(i)?r.type=o["default"].MUXED:E(i)?r.type=o["default"].AUDIO:T(i)?r.type=o["default"].VIDEO:I(i)?r.type=o["default"].FRAGMENTED_TEXT:D(i)?r.type=o["default"].IMAGE:r.type=o["default"].TEXT,n.push(r);return n}function fe(e){var t=!!e&&Q(e.manifest),r=[],i=null,o=null,a=null,u=null,l=void 0,d=void 0;for(d=0,l=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;d<l;d++)o=e.manifest.Period_asArray[d],o.hasOwnProperty(s["default"].START)?(u=new h["default"],u.start=o.start):null!==i&&i.hasOwnProperty(s["default"].DURATION)&&null!==a?(u=new h["default"],u.start=parseFloat((a.start+a.duration).toFixed(5))):0!==d||t||(u=new h["default"],u.start=0),null!==a&&isNaN(a.duration)&&(null!==u?a.duration=parseFloat((u.start-a.start).toFixed(5)):n.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==u&&(u.id=he(o,d),u.index=d,u.mpd=e,o.hasOwnProperty(s["default"].DURATION)&&(u.duration=o.duration),r.push(u),i=o,a=u),o=null,u=null;return 0===r.length?r:(null!==a&&isNaN(a.duration)&&(a.duration=parseFloat((me(a)-a.start).toFixed(5))),r)}function he(e,t){if(!e)throw new Error("Period cannot be null or undefined");var n=h["default"].DEFAULT_ID+"_"+t;return e.hasOwnProperty(s["default"].ID)&&e.id.length>0&&"__proto__"!==e.id&&(n=e.id),n}function pe(e){var t=new m["default"];return e&&(t.manifest=e,e.hasOwnProperty(s["default"].AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):t.availabilityStartTime=new Date(e.loadedTime.getTime()),e.hasOwnProperty(s["default"].AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(s["default"].MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(s["default"].MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(o["default"].SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(s["default"].TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(s["default"].MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration)),t}function me(e){var t=Q(e.mpd.manifest),n=void 0;return e.mpd.manifest.mediaPresentationDuration?n=e.mpd.manifest.mediaPresentationDuration:e.duration?n=e.duration:t?n=Number.POSITIVE_INFINITY:u.error(new P["default"](O["default"].MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",e)),n}function ge(e){var t=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,n=t?t.Period_asArray:null,r=n&&e&&p(e.index)?n[e.index].EventStream_asArray:null,i=[],a=void 0,u=void 0;if(r)for(a=0;a<r.length;a++){var l=new S["default"];if(l.period=e,l.timescale=1,!r[a].hasOwnProperty(o["default"].SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(l.schemeIdUri=r[a].schemeIdUri,r[a].hasOwnProperty(s["default"].TIMESCALE)&&(l.timescale=r[a].timescale),r[a].hasOwnProperty(s["default"].VALUE)&&(l.value=r[a].value),u=0;r[a].Event_asArray&&u<r[a].Event_asArray.length;u++){var c=new _["default"];c.presentationTime=0,c.eventStream=l,r[a].Event_asArray[u].hasOwnProperty(s["default"].PRESENTATION_TIME)&&(c.presentationTime=r[a].Event_asArray[u].presentationTime),r[a].Event_asArray[u].hasOwnProperty(s["default"].DURATION)&&(c.duration=r[a].Event_asArray[u].duration),r[a].Event_asArray[u].hasOwnProperty(s["default"].ID)&&(c.id=r[a].Event_asArray[u].id),r[a].Event_asArray[u].Signal&&r[a].Event_asArray[u].Signal.Binary?c.messageData=d.decodeArray(r[a].Event_asArray[u].Signal.Binary):c.messageData=r[a].Event_asArray[u].messageData||r[a].Event_asArray[u].__text,i.push(c)}}return i}function ye(e,t){var n=[],r=void 0;if(!e)return n;for(r=0;r<e.length;r++){var i=new S["default"];if(i.timescale=1,i.representation=t,!e[r].hasOwnProperty(o["default"].SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");i.schemeIdUri=e[r].schemeIdUri,e[r].hasOwnProperty(s["default"].TIMESCALE)&&(i.timescale=e[r].timescale),e[r].hasOwnProperty(s["default"].VALUE)&&(i.value=e[r].value),n.push(i)}return n}function ve(e,t){var n=void 0,r=void 0,i=void 0;return e&&e.Period_asArray&&t&&t.period&&p(t.period.index)&&(r=e.Period_asArray[t.period.index],r&&r.AdaptationSet_asArray&&p(t.index)&&(i=r.AdaptationSet_asArray[t.index],i&&(n=i.InbandEventStream_asArray))),ye(n,null)}function _e(e,t){var n=void 0,r=void 0,i=void 0,o=void 0;return e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&p(t.adaptation.period.index)&&(r=e.Period_asArray[t.adaptation.period.index],r&&r.AdaptationSet_asArray&&p(t.adaptation.index)&&(i=r.AdaptationSet_asArray[t.adaptation.index],i&&i.Representation_asArray&&p(t.index)&&(o=i.Representation_asArray[t.index],o&&(n=o.InbandEventStream_asArray)))),ye(n,t)}function Ee(e){var t=Q(e),n=!!e&&e.hasOwnProperty(s["default"].AVAILABILITY_START_TIME),r=e?e.UTCTiming_asArray:null,i=[];return(t||n)&&r&&r.forEach(function(e){var t=new y["default"];e.hasOwnProperty(o["default"].SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(s["default"].VALUE)&&(t.value=e.value.toString(),i.push(t)))}),i}function be(e){var t=[],n=e.BaseURL_asArray||[e.baseUri],r=!1;return n.some(function(n){if(n){var o=new b["default"],a=n.__text||n;return i.isRelative(a)&&(r=!0,e.baseUri&&(a=i.resolve(a,e.baseUri))),o.url=a,n.hasOwnProperty(s["default"].SERVICE_LOCATION)&&n.serviceLocation.length?o.serviceLocation=n.serviceLocation:o.serviceLocation=a,n.hasOwnProperty(s["default"].DVB_PRIORITY)&&(o.dvb_priority=n[s["default"].DVB_PRIORITY]),n.hasOwnProperty(s["default"].DVB_WEIGHT)&&(o.dvb_weight=n[s["default"].DVB_WEIGHT]),n.hasOwnProperty(s["default"].AVAILABILITY_TIME_OFFSET)&&(o.availabilityTimeOffset=n[s["default"].AVAILABILITY_TIME_OFFSET]),n.hasOwnProperty(s["default"].AVAILABILITY_TIME_COMPLETE)&&(o.availabilityTimeComplete="false"!==n[s["default"].AVAILABILITY_TIME_COMPLETE]),t.push(o),r}}),t}function Te(e){if(e&&e.hasOwnProperty(o["default"].LOCATION))return e.Location=e.Location_asArray[0],e.Location}return t={getIsTypeOf:v,getIsTextTrack:R,getLanguageForAdaptation:M,getViewpointForAdaptation:N,getRolesForAdaptation:L,getAccessibilityForAdaptation:B,getAudioChannelConfigurationForAdaptation:k,getAdaptationForIndex:V,getIndexForAdaptation:q,getAdaptationForId:K,getAdaptationsForType:G,getCodec:Y,getMimeType:z,getKID:W,getLabelsForAdaptation:X,getContentProtectionData:$,getIsDynamic:Q,getIsDVB:Z,getDuration:ee,getBandwidth:te,getManifestUpdatePeriod:ne,getRepresentationCount:re,getBitrateListForAdaptation:ie,getRepresentationFor:ae,getRepresentationsForAdaptation:de,getAdaptationsForPeriod:ce,getRegularPeriods:fe,getMpd:pe,getEventsForPeriod:ge,getEventStreamForAdaptationSet:ve,getEventStreamForRepresentation:_e,getUTCTimingSources:Ee,getBaseURLsFromElement:be,getRepresentationSortFunction:U,getLocation:Te,getUseCalculatedLiveEdgeTimeForAdaptation:le},g(),t}B.__dashjs_factory_name="DashManifestModel",t["default"]=R["default"].getSingletonFactory(B),e.exports=t["default"]},"50ed":function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},5168:function(e,t,n){var r=n("dbdb")("wks"),i=n("62a0"),o=n("e53d").Symbol,a="function"==typeof o,s=e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))};s.store=r},"520a":function(e,t,n){"use strict";var r=n("0bfb"),i=RegExp.prototype.exec,o=String.prototype.replace,a=i,s="lastIndex",u=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e[s]||0!==t[s]}(),l=void 0!==/()??/.exec("")[1],d=u||l;d&&(a=function(e){var t,n,a,d,c=this;return l&&(n=new RegExp("^"+c.source+"$(?!\\s)",r.call(c))),u&&(t=c[s]),a=i.call(c,e),u&&a&&(c[s]=c.global?a.index+a[0].length:t),l&&a&&a.length>1&&o.call(a[0],n,function(){for(d=1;d<arguments.length-2;d++)void 0===arguments[d]&&(a[d]=void 0)}),a}),e.exports=a},"52a7":function(e,t){t.f={}.propertyIsEnumerable},"53e2":function(e,t,n){var r=n("07e3"),i=n("241e"),o=n("5559")("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},5444:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("d0d2"),o=r(i),a=n("7b70"),s=r(a),u="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",l=s["default"].WIDEVINE_KEYSTEM_STRING,d="urn:uuid:"+u;function c(e){e=e||{};var t=void 0,n=null,r=e.BASE64;function i(e){e&&(n=e)}function a(e){return o["default"].parseInitDataFromContentProtection(e,r)}function s(){return null}function c(e){return new Uint8Array(e)}function f(){return null}function h(){return null}function p(e){return n&&n.sessionId?n.sessionId:e&&e.sessionId?e.sessionId:null}return t={uuid:u,schemeIdURI:d,systemString:l,init:i,getInitData:a,getRequestHeadersFromMessage:s,getLicenseRequestFromMessage:c,getLicenseServerURLFromInitData:f,getCDMData:h,getSessionId:p},t}c.__dashjs_factory_name="KeySystemWidevine",t["default"]=dashjs.FactoryMaker.getSingletonFactory(c),e.exports=t["default"]},"54b2":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("1d48"),o=r(i),a=n("8a43"),s=r(a),u=n("804f"),l=r(u),d=n("2f4d"),c=r(d),f=n("467b"),h=r(f),p=n("589e"),m=r(p),g=n("b4f1"),y=r(g),v=n("bb46"),_=r(v),E=n("0757"),b=n("41ee"),T=r(b),S=n("7865"),I=r(S),w=n("6a2d"),x=r(w),A=n("e172"),D=r(A);function R(){var e=this.context,t=(0,s["default"])(e).getInstance(),n=void 0,r=void 0,i=void 0,a=void 0,u=void 0,d=void 0,f=void 0,h=void 0,p=void 0;function g(){r=(0,m["default"])(e).getInstance().getLogger(n),i={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}}}function v(){u=(0,y["default"])(e).getInstance(),h=(0,I["default"])(e).create({errHandler:a,metricsModel:d,mediaPlayerModel:f,requestModifier:u})}function b(e){if(!e.baseURLController||!e.metricsModel||!e.mediaPlayerModel||!e.errHandler)throw new Error(c["default"].MISSING_CONFIG_ERROR);p=e.baseURLController,d=e.metricsModel,f=e.mediaPlayerModel,a=e.errHandler}function S(t){var n=[],r=void 0,o=void 0,a=(0,l["default"])(e).create({data:t});a.consumeTagAndSize(i.Segment.Cues);while(a.moreData()&&a.consumeTagAndSize(i.Segment.Cues.CuePoint,!0)){r={},r.CueTime=a.parseTag(i.Segment.Cues.CuePoint.CueTime),r.CueTracks=[];while(a.moreData()&&a.consumeTag(i.Segment.Cues.CuePoint.CueTrackPositions,!0)){var s=a.getMatroskaCodedNum(),u=a.getPos();if(o={},o.Track=a.parseTag(i.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===o.Track)throw new Error("Cue track cannot be 0");o.ClusterPosition=a.parseTag(i.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),r.CueTracks.push(o),a.setPos(u+s)}if(0===r.CueTracks.length)throw new Error("Mandatory cuetrack not found");n.push(r)}if(0===n.length)throw new Error("mandatory cuepoint not found");return n}function w(e,t,n,i){var o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,d=void 0,c=void 0,f=void 0;for(a=S(e),s=[],l=0,d=a.length;l<d;l+=1)u=new _["default"],o=0,o=l<a.length-1?a[l+1].CueTime-a[l].CueTime:i-a[l].CueTime,u.duration=o,u.startTime=a[l].CueTime,u.timescale=1e3,c=a[l].CueTracks[0].ClusterPosition+t,f=l<a.length-1?a[l+1].CueTracks[0].ClusterPosition+t-1:n-1,u.mediaRange=c+"-"+f,s.push(u);return r.debug("Parsed cues: "+s.length+" cues."),s}function A(t,n,o,a){var s=(0,l["default"])(e).create({data:t}),u=void 0,d=void 0,c=o.split("-"),f=null,p={url:n,range:{start:parseFloat(c[0]),end:parseFloat(c[1])},request:f},m=void 0,g=void 0;r.debug("Parse EBML header: "+p.url),s.skipOverElement(i.EBML),s.consumeTag(i.Segment),m=s.getMatroskaCodedNum(),m+=s.getPos(),g=s.getPos();while(s.moreData()&&!s.consumeTagAndSize(i.Segment.Info,!0))if(!(s.skipOverElement(i.Segment.SeekHead,!0)||s.skipOverElement(i.Segment.Tracks,!0)||s.skipOverElement(i.Segment.Cues,!0)||s.skipOverElement(i.Void,!0)))throw new Error("no valid top level element found");while(void 0===u){var y=s.getMatroskaCodedNum(!0),v=s.getMatroskaCodedNum();switch(y){case i.Segment.Info.Duration.tag:u=s[i.Segment.Info.Duration.parse](v);break;default:s.setPos(s.getPos()+v);break}}f=P(p);var _=function(e){d=w(e,g,m,u),a(d)},E=function(){r.error("Download Error: Cues "+p.url),a(null)};h.load({request:f,success:_,error:E}),r.debug("Perform cues load: "+p.url+" bytes="+p.range.start+"-"+p.range.end)}function R(){if(!p||!p.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function M(e,n){R();var i=null,a=p.resolve(e.path),s=a?a.url:void 0,u=e.range.split("-"),l=n||{range:{start:parseFloat(u[0]),end:parseFloat(u[1])},request:i,url:s,init:!0};r.info("Start loading initialization."),i=P(l);var d=function(){t.trigger(o["default"].INITIALIZATION_LOADED,{representation:e})},c=function(){t.trigger(o["default"].INITIALIZATION_LOADED,{representation:e})};h.load({request:i,success:d,error:c}),r.debug("Perform init load: "+l.url)}function C(e,t,n,i){R();var o=null,a=p.resolve(e.path),s=a?a.url:void 0,u=8192,l={bytesLoaded:0,bytesToLoad:u,range:{start:0,end:u},request:o,url:s,init:!1};i=i||N,o=P(l),r.debug("Parsing ebml header");var d=function(r){A(r,s,n,function(n){i(n,e,t)})},c=function(){i(null,e,t)};h.load({request:o,success:d,error:c})}function N(e,n,r){e?t.trigger(o["default"].SEGMENTS_LOADED,{segments:e,representation:n,mediaType:r}):t.trigger(o["default"].SEGMENTS_LOADED,{segments:null,representation:n,mediaType:r,error:new x["default"](D["default"].SEGMENT_BASE_LOADER_ERROR_CODE,D["default"].SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function P(e){var t=new T["default"];return t.type=e.init?E.HTTPRequest.INIT_SEGMENT_TYPE:E.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}function L(){a=null,u=null}return n={setConfig:b,initialize:v,loadInitialization:M,loadSegments:C,reset:L},g(),n}R.__dashjs_factory_name="WebmSegmentBaseLoader",t["default"]=h["default"].getSingletonFactory(R),e.exports=t["default"]},"551c":function(e,t,n){"use strict";var r,i,o,a,s=n("2d00"),u=n("7726"),l=n("9b43"),d=n("23c6"),c=n("5ca1"),f=n("d3f4"),h=n("d8e8"),p=n("f605"),m=n("4a59"),g=n("ebd6"),y=n("1991").set,v=n("8079")(),_=n("a5b8"),E=n("9c80"),b=n("a25f"),T=n("bcaa"),S="Promise",I=u.TypeError,w=u.process,x=w&&w.versions,A=x&&x.v8||"",D=u[S],R="process"==d(w),M=function(){},C=i=_.f,N=!!function(){try{var e=D.resolve(1),t=(e.constructor={})[n("2b4c")("species")]=function(e){e(M,M)};return(R||"function"==typeof PromiseRejectionEvent)&&e.then(M)instanceof t&&0!==A.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(r){}}(),P=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},L=function(e,t){if(!e._n){e._n=!0;var n=e._c;v(function(){var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a,s=i?t.ok:t.fail,u=t.resolve,l=t.reject,d=t.domain;try{s?(i||(2==e._h&&B(e),e._h=1),!0===s?n=r:(d&&d.enter(),n=s(r),d&&(d.exit(),a=!0)),n===t.promise?l(I("Promise-chain cycle")):(o=P(n))?o.call(n,u,l):u(n)):l(r)}catch(c){d&&!a&&d.exit(),l(c)}};while(n.length>o)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&O(e)})}},O=function(e){y.call(u,function(){var t,n,r,i=e._v,o=F(e);if(o&&(t=E(function(){R?w.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=R||F(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},F=function(e){return 1!==e._h&&0===(e._a||e._c).length},B=function(e){y.call(u,function(){var t;R?w.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},k=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),L(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw I("Promise can't be resolved itself");(t=P(e))?v(function(){var r={_w:n,_d:!1};try{t.call(e,l(U,r,1),l(k,r,1))}catch(i){k.call(r,i)}}):(n._v=e,n._s=1,L(n,!1))}catch(r){k.call({_w:n,_d:!1},r)}}};N||(D=function(e){p(this,D,S,"_h"),h(e),r.call(this);try{e(l(U,this,1),l(k,this,1))}catch(t){k.call(this,t)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n("dcbc")(D.prototype,{then:function(e,t){var n=C(g(this,D));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=R?w.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&L(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=l(U,e,1),this.reject=l(k,e,1)},_.f=C=function(e){return e===D||e===a?new o(e):i(e)}),c(c.G+c.W+c.F*!N,{Promise:D}),n("7f20")(D,S),n("7a56")(S),a=n("8378")[S],c(c.S+c.F*!N,S,{reject:function(e){var t=C(this),n=t.reject;return n(e),t.promise}}),c(c.S+c.F*(s||!N),S,{resolve:function(e){return T(s&&this===a?D:this,e)}}),c(c.S+c.F*!(N&&n("5cc5")(function(e){D.all(e)["catch"](M)})),S,{all:function(e){var t=this,n=C(t),r=n.resolve,i=n.reject,o=E(function(){var n=[],o=0,a=1;m(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=C(t),r=n.reject,i=E(function(){m(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},5537:function(e,t,n){var r=n("8378"),i=n("7726"),o="__core-js_shared__",a=i[o]||(i[o]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n("2d00")?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},5559:function(e,t,n){var r=n("dbdb")("keys"),i=n("62a0");e.exports=function(e){return r[e]||(r[e]=i(e))}},"556a":function(e,t,n){t.generateISD=n("b762").generateISD,t.fromXML=n("9009").fromXML,t.renderHTML=n("874c").render},5571:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("467b"),s=r(a),u=n("69cb"),l=r(u),d=n("eba1"),c=r(d),f=n("1c2c"),h=r(f),p=n("d20c"),m=r(p),g=n("8a43"),y=r(g),v=n("1d48"),_=r(v),E=n("71a8");function b(){var e=this.context,t=void 0,n=void 0,r=void 0,i=void 0,a=void 0,s=void 0,u=void 0,d=void 0,f=void 0,p=void 0,g=void 0,v=void 0,b=void 0,T=void 0,S=void 0,I=void 0,w=void 0;function x(){b="",T=-1,S=!0,w=!1,f=(0,c["default"])(e).getInstance(),p=(0,h["default"])(e).getInstance(),g=(0,m["default"])(e).getInstance(),n=(0,l["default"])(e).getInstance(),v=(0,y["default"])(e).getInstance(),f.initialize(),v.on(_["default"].TEXT_TRACKS_QUEUE_INITIALIZED,P,t),j()}function A(e){e&&(e.errHandler&&(r=e.errHandler),e.dashManifestModel&&(i=e.dashManifestModel),e.manifestModel&&(a=e.manifestModel),e.mediaController&&(s=e.mediaController),e.videoModel&&(u=e.videoModel),e.streamController&&(d=e.streamController),e.textTracks&&(f=e.textTracks),e.vttParser&&(p=e.vttParser),e.ttmlParser&&(g=e.ttmlParser),n.setConfig({errHandler:r,dashManifestModel:i,manifestModel:a,mediaController:s,videoModel:u,streamController:d,textTracks:f,vttParser:p,ttmlParser:g}))}function D(){return n}function R(){return I}function M(e){n.addEmbeddedTrack(e)}function C(e){(0,E.checkParameterType)(e,"string"),b=e}function N(){return b}function P(e){var t=this,n=e.tracks,r=e.index;n.some(function(e,n){if(e.lang===b)return t.setTextTrack(n),r=n,!0}),S||this.setTextTrack(-1),T=r,v.trigger(_["default"].TEXT_TRACKS_ADDED,{enabled:B(),index:r,tracks:n})}function L(e){(0,E.checkParameterType)(e,"boolean"),S=e,S||this.setTextTrack(-1)}function O(){return S}function F(e){(0,E.checkParameterType)(e,"boolean"),B()!==e&&(e&&this.setTextTrack(T),e||(T=this.getCurrentTrackIdx(),this.setTextTrack(-1)))}function B(){var e=!0;return I&&!w&&(e=!1),e}function k(e){(0,E.checkParameterType)(e,"boolean"),w=e}function U(e){var t=n.getConfig(),r=t.fragmentModel,i=t.fragmentedTracks,a=t.videoModel,u=void 0,l=void 0;I=-1===e;var c=f.getCurrentTrackIdx();if(c!==e){f.setModeForTrackIdx(c,o["default"].TEXT_HIDDEN),f.setCurrentTrackIdx(e),f.setModeForTrackIdx(e,o["default"].TEXT_SHOWING);var h=f.getCurrentTrackInfo();if(h&&h.isFragmented&&!h.isEmbedded)for(var p=0;p<i.length;p++){var m=i[p];if(h.lang===m.lang&&h.index===m.index&&(m.id?h.id===m.id:h.id===m.index)){var g=s.getCurrentTrackFor(o["default"].FRAGMENTED_TEXT,d.getActiveStreamInfo());if(m!==g)r.abortRequests(),r.removeExecutedRequestsBeforeTime(),n.remove(),f.deleteCuesFromTrackIdx(c),s.setTrack(m),n.setCurrentFragmentedTrackIdx(p);else if(-1===c){for(var y=d.getActiveStreamProcessors(),v=0;v<y.length;v++)if(y[v].getType()===o["default"].FRAGMENTED_TEXT){l=y[v];break}l.getIndexHandler().setCurrentTime(a.getTime()),l.getScheduleController().start()}}}else if(h&&!h.isFragmented){for(y=d.getActiveStreamProcessors(),p=0;p<y.length;p++)if(y[p].getType()===o["default"].TEXT){l=y[p],u=l.getMediaInfoArr();break}if(l&&u)for(p=0;p<u.length;p++)if(u[p].index===h.index&&u[p].lang===h.lang){l.selectMediaInfo(u[p]);break}}}}function H(){return f.getCurrentTrackIdx()}function j(){I=!1}function K(){j(),n.resetEmbedded(),n.reset()}return t={setConfig:A,getTextSourceBuffer:D,getAllTracksAreDisabled:R,addEmbeddedTrack:M,getTextDefaultLanguage:N,setTextDefaultLanguage:C,setTextDefaultEnabled:L,getTextDefaultEnabled:O,enableText:F,isTextEnabled:B,setTextTrack:U,getCurrentTrackIdx:H,enableForcedTextStreaming:k,reset:K},x(),t}b.__dashjs_factory_name="TextController",t["default"]=s["default"].getSingletonFactory(b),e.exports=t["default"]},"55dd":function(e,t,n){"use strict";var r=n("5ca1"),i=n("d8e8"),o=n("4bf8"),a=n("79e5"),s=[].sort,u=[1,2,3];r(r.P+r.F*(a(function(){u.sort(void 0)})||!a(function(){u.sort(null)})||!n("2f21")(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),i(e))}})},"57b1":function(e,t,n){var r=n("d864"),i=n("335c"),o=n("241e"),a=n("b447"),s=n("bfac");e.exports=function(e,t){var n=1==e,u=2==e,l=3==e,d=4==e,c=6==e,f=5==e||c,h=t||s;return function(t,s,p){for(var m,g,y=o(t),v=i(y),_=r(s,p,3),E=a(v.length),b=0,T=n?h(t,E):u?h(t,0):void 0;E>b;b++)if((f||b in v)&&(m=v[b],g=_(m,b,y),e))if(n)T[b]=g;else if(g)switch(e){case 3:return!0;case 5:return m;case 6:return b;case 2:T.push(m)}else if(d)return!1;return c?-1:l||d?d:T}}},"584a":function(e,t){var n=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},"588f":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("243c"),o=r(i),a=n("5fa3"),s=r(a),u=n("d0d2"),l=r(u),d=n("7b70"),c=r(d),f="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",h=c["default"].CLEARKEY_KEYSTEM_STRING,p="urn:uuid:"+f;function m(e){var t=void 0,n=e.BASE64,r=e.debug.getLogger(t);function i(e,t){var n=null;if(e){for(var i=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),a=[],u=0;u<i.kids.length;u++){var l=i.kids[u],d=e.clearkeys&&e.clearkeys.hasOwnProperty(l)?e.clearkeys[l]:null;if(!d)throw new Error("DRM: ClearKey keyID ("+l+") is not known!");a.push(new o["default"](l,d))}n=new s["default"](a),r.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return n}function a(e){return l["default"].parseInitDataFromContentProtection(e,n)}function u(){return null}function d(e){return new Uint8Array(e)}function c(){return null}function m(){return null}function g(){return null}return t={uuid:f,schemeIdURI:p,systemString:h,getInitData:a,getRequestHeadersFromMessage:u,getLicenseRequestFromMessage:d,getLicenseServerURLFromInitData:c,getCDMData:m,getSessionId:g,getClearKeysFromProtectionData:i},t}m.__dashjs_factory_name="KeySystemW3CClearKey",t["default"]=dashjs.FactoryMaker.getSingletonFactory(m),e.exports=t["default"]},"589e":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("8a43"),o=r(i),a=n("1d48"),s=r(a),u=n("467b"),l=r(u),d=0,c=1,f=2,h=3,p=4,m=5;function g(){var e=this.context,t=(0,o["default"])(e).getInstance(),n=[],r=void 0,i=void 0,a=void 0,u=void 0,l=void 0;function g(){i=!0,a=!0,l=h,u=(new Date).getTime(),"undefined"!==typeof window&&window.console&&(n[c]=y(window.console.error),n[f]=y(window.console.error),n[h]=y(window.console.warn),n[p]=y(window.console.info),n[m]=y(window.console.debug))}function y(e){return e&&e.bind?e.bind(window.console):window.console.log.bind(window.console)}function v(e){return{fatal:w.bind(e),error:x.bind(e),warn:A.bind(e),info:D.bind(e),debug:R.bind(e)}}function _(e){l=e}function E(){return l}function b(e){i=e}function T(e){a=e}function S(e){l=e?m:d}function I(){return l!==d}function w(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];M.apply(void 0,[c,this].concat(t))}function x(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];M.apply(void 0,[f,this].concat(t))}function A(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];M.apply(void 0,[h,this].concat(t))}function D(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];M.apply(void 0,[p,this].concat(t))}function R(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];M.apply(void 0,[m,this].concat(t))}function M(e,r){var o="",d=null;i&&(d=(new Date).getTime(),o+="["+(d-u)+"]"),a&&r&&r.getClassName&&(o+="["+r.getClassName()+"]",r.getType&&(o+="["+r.getType()+"]")),o.length>0&&(o+=" ");for(var c=arguments.length,f=Array(c>2?c-2:0),h=2;h<c;h++)f[h-2]=arguments[h];Array.apply(null,f).forEach(function(e){o+=e+" "}),n[e]&&l>=e&&n[e](o),t.trigger(s["default"].LOG,{message:o,level:e})}return r={getLogger:v,setLogTimestampVisible:b,setCalleeNameVisible:T,setLogToBrowserConsole:S,getLogToBrowserConsole:I,setLogLevel:_,getLogLevel:E},g(),r}g.__dashjs_factory_name="Debug";var y=l["default"].getSingletonFactory(g);y.LOG_LEVEL_NONE=d,y.LOG_LEVEL_FATAL=c,y.LOG_LEVEL_ERROR=f,y.LOG_LEVEL_WARNING=h,y.LOG_LEVEL_INFO=p,y.LOG_LEVEL_DEBUG=m,l["default"].updateSingletonFactory(g.__dashjs_factory_name,y),t["default"]=y,e.exports=t["default"]},5948:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("bd58"),o=r(i);function a(e){e=e||{};var t={"urn:dvb:dash:reporting:2014":o["default"]},n=this.context,r=e.debug,i=e.metricsConstants,a=void 0;function s(e,o){var a=void 0;try{a=t[e.schemeIdUri](n).create({metricsConstants:i}),a.initialize(e,o)}catch(s){a=null,r.error("ReportingFactory: could not create Reporting with schemeIdUri "+e.schemeIdUri+" ("+s.message+")")}return a}function u(e,n){t[e]=n}function l(e){delete t[e]}return a={create:s,register:u,unregister:l},a}a.__dashjs_factory_name="ReportingFactory",t["default"]=dashjs.FactoryMaker.getSingletonFactory(a),e.exports=t["default"]},"597c":function(e,t,n){(function(e){e.ns_tt="http://www.w3.org/ns/ttml",e.ns_tts="http://www.w3.org/ns/ttml#styling",e.ns_ttp="http://www.w3.org/ns/ttml#parameter",e.ns_xml="http://www.w3.org/XML/1998/namespace",e.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",e.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",e.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",e.ns_ebutts="urn:ebu:tt:style"})(t)},"59ad":function(e,t,n){e.exports=n("7be7")},"5aee":function(e,t,n){"use strict";var r=n("d9f6").f,i=n("a159"),o=n("5c95"),a=n("d864"),s=n("1173"),u=n("a22a"),l=n("30f1"),d=n("50ed"),c=n("4c95"),f=n("8e60"),h=n("ebfd").fastKey,p=n("9f79"),m=f?"_s":"size",g=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,l){var d=e(function(e,r){s(e,d,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=r&&u(r,n,e[l],e)});return o(d.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=p(this,t),r=g(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[m]--}return!!r},forEach:function(e){p(this,t);var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);while(n=n?n.n:this._f){r(n.v,n.k,this);while(n&&n.r)n=n.p}},has:function(e){return!!g(p(this,t),e)}}),f&&r(d.prototype,"size",{get:function(){return p(this,t)[m]}}),d},def:function(e,t,n){var r,i,o=g(e,t);return o?o.v=n:(e._l=o={i:i=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[m]++,"F"!==i&&(e._i[i]=o)),e},getEntry:g,setStrong:function(e,t,n){l(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){var e=this,t=e._k,n=e._l;while(n&&n.r)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?d(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,d(1))},n?"entries":"values",!n,!0),c(t)}}},"5b4e":function(e,t,n){var r=n("36c3"),i=n("b447"),o=n("0fc9");e.exports=function(e){return function(t,n,a){var s,u=r(t),l=i(u.length),d=o(a,l);if(e&&n!=n){while(l>d)if(s=u[d++],s!=s)return!0}else for(;l>d;d++)if((e||d in u)&&u[d]===n)return e||d||0;return!e&&-1}}},"5b8d":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("694b"),s=r(a);function u(){var e=void 0;function t(e,t){return(0,s["default"])(e,t)}return e={areEqual:t},e}u.__dashjs_factory_name="ObjectUtils",t["default"]=o["default"].getSingletonFactory(u),e.exports=t["default"]},"5beb":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.unescapeDollarsInTemplate=u,t.replaceIDForTemplate=l,t.replaceTokenForTemplate=d,t.getIndexBasedSegment=c,t.getTimeBasedSegment=f,t.getSegmentByIndex=h,t.decideSegmentListRangeForTemplate=p;var i=n("bb46"),o=r(i);function a(e,t){while(e.length<t)e="0"+e;return e}function s(e,t){return e.representation.startNumber+t}function u(e){return e?e.split("$$").join("$"):e}function l(e,t){if(!t||!e||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)}function d(e,t,n){var r="%0",i=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,c=t.length,f=r.length;if(!e)return e;while(1){if(i=e.indexOf("$"+t),i<0)return e;if(o=e.indexOf("$",i+c),o<0)return e;if(s=e.indexOf(r,i+c),s>i&&s<o)switch(u=e.charAt(o-1),l=parseInt(e.substring(s+f,o-1),10),u){case"d":case"i":case"u":d=a(n.toString(),l);break;case"x":d=a(n.toString(16),l);break;case"X":d=a(n.toString(16),l).toUpperCase();break;case"o":d=a(n.toString(8),l);break;default:return e}else d=n;e=e.substring(0,i)+d+e.substring(o+1)}}function c(e,t,n,r){var i=void 0,a=void 0,u=void 0,l=void 0;return a=n.segmentDuration,isNaN(a)&&(a=n.adaptation.period.duration),u=parseFloat((n.adaptation.period.start+r*a).toFixed(5)),l=parseFloat((u+a).toFixed(5)),i=new o["default"],i.representation=n,i.duration=a,i.presentationStartTime=u,i.mediaStartTime=e.calcMediaTimeFromPresentationTime(i.presentationStartTime,n),i.availabilityStartTime=e.calcAvailabilityStartTimeFromPresentationTime(i.presentationStartTime,n.adaptation.period.mpd,t),i.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(l,n.adaptation.period.mpd,t),i.wallStartTime=e.calcWallTimeForSegment(i,t),i.replacementNumber=s(i,r),i.availabilityIdx=r,i}function f(e,t,n,r,i,a,u,l,c,f){var h=r/a,p=Math.min(i/a,n.adaptation.period.mpd.maxSegmentDuration),m=void 0,g=void 0,y=void 0;return m=e.calcPresentationTimeFromMediaTime(h,n),g=m+p,y=new o["default"],y.representation=n,y.duration=p,y.mediaStartTime=h,y.presentationStartTime=m,y.availabilityStartTime=n.adaptation.period.mpd.manifest.loadedTime,y.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(g,n.adaptation.period.mpd,t),y.wallStartTime=e.calcWallTimeForSegment(y,t),y.replacementTime=f||r,y.replacementNumber=s(y,c),u=d(u,"Number",y.replacementNumber),u=d(u,"Time",y.replacementTime),y.media=u,y.mediaRange=l,y.availabilityIdx=c,y}function h(e,t){if(!t||!t.segments)return null;var n=t.segments.length,r=void 0,i=void 0;if(e<n&&(r=t.segments[e],r&&r.availabilityIdx===e))return r;for(i=0;i<n;i++)if(r=t.segments[i],r&&r.availabilityIdx===e)return r;return null}function p(e,t,n,r,i,o){var a=n.segmentDuration,s=n.adaptation.period.mpd.manifest.minBufferTime,u=n.segmentAvailabilityRange,l={start:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,u?u.start:NaN),end:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,u?u.end:NaN)},d=n.segments,c=2*a,f=o||Math.max(2*s,10*a),p=NaN,m=null,g=void 0,y=void 0,v=void 0;return l.start=Math.max(l.start,0),t&&!e.isTimeSyncCompleted()?(g=Math.floor(l.start/a),y=Math.floor(l.end/a),v={start:g,end:y},v):(d&&d.length>0?(m=h(i,n),p=m?e.calcPeriodRelativeTimeFromMpdRelativeTime(n,m.presentationStartTime):i>0?i*a:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,r)):p=i>0?i*a:t?l.end:l.start,g=Math.floor(Math.max(p-c,l.start)/a),y=Math.floor(Math.min(g+f/a,l.end/a)),v={start:g,end:y},v)}},"5c40":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){i(this,e)}return r(e,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}]),e}();t["default"]=o,e.exports=t["default"]},"5c95":function(e,t,n){var r=n("35e8");e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},"5ca1":function(e,t,n){var r=n("7726"),i=n("8378"),o=n("32e9"),a=n("2aba"),s=n("9b43"),u="prototype",l=function(e,t,n){var d,c,f,h,p=e&l.F,m=e&l.G,g=e&l.S,y=e&l.P,v=e&l.B,_=m?r:g?r[t]||(r[t]={}):(r[t]||{})[u],E=m?i:i[t]||(i[t]={}),b=E[u]||(E[u]={});for(d in m&&(n=t),n)c=!p&&_&&void 0!==_[d],f=(c?_:n)[d],h=v&&c?s(f,r):y&&"function"==typeof f?s(Function.call,f):f,_&&a(_,d,f,e&l.U),E[d]!=f&&o(E,d,h),y&&b[d]!=f&&(b[d]=f)};r.core=i,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},"5cb6":function(e,t,n){var r=n("63b6");r(r.P+r.R,"Map",{toJSON:n("f228")("Map")})},"5cc5":function(e,t,n){var r=n("2b4c")("iterator"),i=!1;try{var o=[7][r]();o["return"]=function(){i=!0},Array.from(o,function(){throw 2})}catch(a){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},e(o)}catch(a){}return n}},"5d1b":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("8a43"),s=r(a);function u(e){e=e||{};var t=[],n=(0,s["default"])(this.context).getInstance(),r=e.updateEventName,i=e.addBlacklistEventName;function o(e){return!!(t.length&&e&&e.length)&&-1!==t.indexOf(e)}function a(e){-1===t.indexOf(e)&&(t.push(e),n.trigger(r,{entry:e}))}function u(e){a(e.entry)}function l(){i&&n.on(i,u,this)}function d(){t=[]}return l(),{add:a,contains:o,reset:d}}u.__dashjs_factory_name="BlackListController",t["default"]=o["default"].getClassFactory(u),e.exports=t["default"]},"5df3":function(e,t,n){"use strict";var r=n("02f4")(!0);n("01f9")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},"5e1a":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n("8707").Buffer,o=n(2);function a(e,t,n){e.copy(t,n)}e.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";var t=this.head,n=""+t.data;while(t=t.next)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;var t=i.allocUnsafe(e>>>0),n=this.head,r=0;while(n)a(n.data,t,r),r+=n.data.length,n=n.next;return t},e}(),o&&o.inspect&&o.inspect.custom&&(e.exports.prototype[o.inspect.custom]=function(){var e=o.inspect({length:this.length});return this.constructor.name+" "+e})},"5ed3":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};i.SSL_CONNECTION_FAILED_PREFIX="SSL",i.DNS_RESOLUTION_FAILED="C00",i.HOST_UNREACHABLE="C01",i.CONNECTION_REFUSED="C02",i.CONNECTION_ERROR="C03",i.CORRUPT_MEDIA_ISOBMFF="M00",i.CORRUPT_MEDIA_OTHER="M01",i.BASE_URL_CHANGED="F00",i.BECAME_REPORTER="S00",t["default"]=i,e.exports=t["default"]},"5f1b":function(e,t,n){"use strict";var r=n("23c6"),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var o=n.call(e,t);if("object"!==typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},"5fa3":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(t,n){if(i(this,e),n&&"persistent"!==n&&"temporary"!==n)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=t,this.type=n}return r(e,[{key:"toJWK",value:function(){var e=void 0,t=this.keyPairs.length,n={keys:[]};for(e=0;e<t;e++){var r={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(r)}this.type&&(n.type=this.type);var i=JSON.stringify(n),o=i.length,a=new ArrayBuffer(o),s=new Uint8Array(a);for(e=0;e<o;e++)s[e]=i.charCodeAt(e);return a}}]),e}();t["default"]=o,e.exports=t["default"]},"5fb0":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n){r(this,e),this.initData=t,this.initDataType=n};t["default"]=i,e.exports=t["default"]},"612d":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(){var e=void 0,t=void 0;function n(){t=!1}function r(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t}function i(){return t}function o(e){t=e}function a(e){return!!("MediaSource"in window&&MediaSource.isTypeSupported(e))||!!("WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(e))}return e={supportsMediaSource:r,supportsEncryptedMedia:i,supportsCodec:a,setEncryptedMediaSupported:o},n(),e}a.__dashjs_factory_name="Capabilities",t["default"]=o["default"].getSingletonFactory(a),e.exports=t["default"]},"613b":function(e,t,n){var r=n("5537")("keys"),i=n("ca5a");e.exports=function(e){return r[e]||(r[e]=i(e))}},"626a":function(e,t,n){var r=n("2d95");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},"62a0":function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},"637b":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("2f4d"),s=r(a);function u(e){e=e||{};var t=void 0,n=e.timelineConverter,r=e.streamProcessor;function i(){if(!n||!n.hasOwnProperty("getExpectedLiveEdge")||!r||!r.hasOwnProperty("getRepresentationInfo"))throw new Error(s["default"].MISSING_CONFIG_ERROR)}function o(){i();var e=r.getRepresentationInfo(),t=e.DVRWindow?e.DVRWindow.end:0,o=t;return e.useCalculatedLiveEdgeTime&&(o=n.getExpectedLiveEdge(),n.setClientTimeOffset(o-t)),o}function a(){n=null,r=null}return t={getLiveEdge:o,reset:a},t}u.__dashjs_factory_name="LiveEdgeFinder",t["default"]=o["default"].getClassFactory(u),e.exports=t["default"]},"63b6":function(e,t,n){var r=n("e53d"),i=n("584a"),o=n("d864"),a=n("35e8"),s=n("07e3"),u="prototype",l=function(e,t,n){var d,c,f,h=e&l.F,p=e&l.G,m=e&l.S,g=e&l.P,y=e&l.B,v=e&l.W,_=p?i:i[t]||(i[t]={}),E=_[u],b=p?r:m?r[t]:(r[t]||{})[u];for(d in p&&(n=t),n)c=!h&&b&&void 0!==b[d],c&&s(_,d)||(f=c?b[d]:n[d],_[d]=p&&"function"!=typeof b[d]?n[d]:y&&c?o(f,r):v&&b[d]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[u]=e[u],t}(f):g&&"function"==typeof f?o(Function.call,f):f,g&&((_.virtual||(_.virtual={}))[d]=f,e&l.R&&E&&!E[d]&&a(E,d,f)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},"646e":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(e){function t(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function n(e,n,r){for(var i=0,o=e.length;i<o;++i){var a=e[i];if(n[a.name])if(r[a.name]){if(a.merge){var s=n[a.name],u=r[a.name];"object"===typeof s&&"object"===typeof u?t(s,u):r[a.name]=s+u}}else r[a.name]=n[a.name]}}function r(e,t){for(var i=0,o=e.children.length;i<o;++i){var a=e.children[i],s=t[a.name+"_asArray"];if(s)for(var u=0,l=s.length;u<l;++u){var d=s[u];n(e.properties,t,d),r(a,d)}}}function i(t){if(null===t||"object"!==typeof t)return t;if("period"in e)for(var n=e.period,i=t.Period_asArray,o=0,a=i.length;o<a;++o){var s=i[o];if(r(n,s),"adaptationset"in e){var u=s.AdaptationSet_asArray;if(u)for(var l=e.adaptationset,d=0,c=u.length;d<c;++d)r(l,u[d])}}return t}return{run:i}}a.__dashjs_factory_name="ObjectIron";var s=o["default"].getClassFactory(a);t["default"]=s,e.exports=t["default"]},"64c7":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("47e4"),o=r(i),a=n("9485"),s=r(a),u=n("467b"),l=r(u),d=n("0757"),c=n("8a43"),f=r(c),h=n("1d48"),p=r(h),m=n("589e"),g=r(m),y=0,v=1,_=2,E=10,b=2,T=.99;function S(e){e=e||{};var t=this.context,n=e.dashMetrics,r=e.metricsModel,i=e.mediaPlayerModel,a=(0,f["default"])(t).getInstance(),u=void 0,l=void 0,c=void 0;function h(){l=(0,g["default"])(t).getInstance().getLogger(u),j(),a.on(p["default"].BUFFER_EMPTY,N,u),a.on(p["default"].PLAYBACK_SEEKING,P,u),a.on(p["default"].PERIOD_SWITCH_STARTED,L,u),a.on(p["default"].MEDIA_FRAGMENT_LOADED,O,u),a.on(p["default"].METRIC_ADDED,F,u),a.on(p["default"].QUALITY_CHANGE_REQUESTED,k,u),a.on(p["default"].FRAGMENT_LOADING_ABANDONED,U,u)}function m(e){return e.map(function(e){return Math.log(e)})}function S(e,t,n){var r=n.reduce(function(e,t,r){return t>n[e]?r:e},0);if(0===r)return null;var i=Math.max(e,E+b*t.length),o=(n[r]-1)/(i/E-1),a=E/o;return{gp:o,Vp:a}}function I(e){var t={},n=e.getMediaInfo(),r=n.bitrateList.map(function(e){return e.bandwidth}),o=m(r);o=o.map(function(e){return e-o[0]+1});var a=i.getStableBufferTime(),s=S(a,r,o);return s?(t.state=v,t.bitrates=r,t.utilities=o,t.stableBufferTime=a,t.Vp=s.Vp,t.gp=s.gp,t.lastQuality=0,w(t)):t.state=y,t}function w(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function x(e,t){var o=i.getStableBufferTime();if(e.stableBufferTime!==o){var a=S(o,e.bitrates,e.utilities);if(a.Vp!==e.Vp||a.gp!==e.gp){var s=n.getCurrentBufferLevel(r.getReadOnlyMetricsFor(t)),u=s+e.placeholderBuffer;u-=E,u*=a.Vp/e.Vp,u+=E,e.stableBufferTime=o,e.Vp=a.Vp,e.gp=a.gp,e.placeholderBuffer=Math.max(0,u-s)}}}function A(e){var t=e.getMediaType(),n=c[t];return n?n.state!==y&&x(n,t):(n=I(e),c[t]=n),n}function D(e,t){for(var n=e.bitrates.length,r=NaN,i=NaN,o=0;o<n;++o){var a=(e.Vp*(e.utilities[o]+e.gp)-t)/e.bitrates[o];(isNaN(i)||a>=i)&&(i=a,r=o)}return r}function R(e,t){return e.Vp*(e.utilities[t]+e.gp)}function M(e,t){for(var n=e.bitrates[t],r=e.utilities[t],i=0,o=t-1;o>=0;--o)if(e.utilities[o]<e.utilities[t]){var a=e.bitrates[o],s=e.utilities[o],u=e.Vp*(e.gp+(n*s-a*r)/(n-a));i=Math.max(i,u)}return i}function C(e,t){var n=Date.now();if(isNaN(e.lastSegmentFinishTimeMs)){if(!isNaN(e.lastCallTimeMs)){r=.001*(n-e.lastCallTimeMs);e.placeholderBuffer+=Math.max(0,r)}}else{var r=.001*(n-e.lastSegmentFinishTimeMs);e.placeholderBuffer+=Math.max(0,r)}e.lastCallTimeMs=n,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,x(e,t)}function N(){for(var e in c)c.hasOwnProperty(e)&&c[e].state===_&&(c[e].placeholderBuffer=0)}function P(){for(var e in c)if(c.hasOwnProperty(e)){var t=c[e];t.state!==y&&(t.state=v,w(t))}}function L(){}function O(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=c[e.chunk.mediaInfo.type];if(t&&t.state!==y){var n=e.chunk.start;isNaN(t.mostAdvancedSegmentStart)||n>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=n,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=n,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,B(t,e.chunk.mediaInfo.type)}}}function F(e){if(e&&e.metric===o["default"].HTTP_REQUEST&&e.value&&e.value.type===d.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length){var t=c[e.mediaType];t&&t.state!==y&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),B(t,e.mediaType))}}function B(e,t){if(!isNaN(e.lastSegmentStart)&&!isNaN(e.lastSegmentRequestTimeMs)&&!isNaN(e.placeholderBuffer)){if(e.placeholderBuffer*=T,!isNaN(e.lastSegmentFinishTimeMs)){var i=n.getCurrentBufferLevel(r.getReadOnlyMetricsFor(t)),o=i+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),a=R(e,e.lastQuality),s=Math.max(0,a-o);e.placeholderBuffer=Math.min(s,e.placeholderBuffer)}e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN}}function k(e){if(e){var t=c[e.mediaType];t&&t.state!==y&&(t.abrQuality=e.newQuality)}}function U(e){if(e){var t=c[e.mediaType];if(t&&t.state!==y){var i=n.getCurrentBufferLevel(r.getReadOnlyMetricsFor(e.mediaType)),o=void 0;o=t.abrQuality>0?M(t,t.abrQuality):E;var a=Math.max(0,o-i);t.placeholderBuffer=Math.min(t.placeholderBuffer,a)}}}function H(e){var i=e.getMediaInfo(),o=e.getMediaType(),a=r.getReadOnlyMetricsFor(o),u=e.getScheduleController(),d=e.getStreamInfo(),c=e.getAbrController(),f=c.getThroughputHistory(),h=d?d.id:null,p=d&&d.manifestInfo&&d.manifestInfo.isDynamic,m=e.useBufferOccupancyABR(),g=(0,s["default"])(t).create();if(g.reason=g.reason||{},!m)return g;u.setTimeToLoadDelay(0);var E=A(e);if(E.state===y)return g;var b=n.getCurrentBufferLevel(a),T=f.getAverageThroughput(o,p),S=f.getSafeAverageThroughput(o,p),I=f.getAverageLatency(o),x=void 0;if(g.reason.state=E.state,g.reason.throughput=T,g.reason.latency=I,isNaN(T))return g;switch(E.state){case v:x=c.getQualityForBitrate(i,S,I),g.quality=x,g.reason.throughput=S,E.placeholderBuffer=Math.max(0,M(E,x)-b),E.lastQuality=x,!isNaN(E.lastSegmentDurationS)&&b>=E.lastSegmentDurationS&&(E.state=_);break;case _:C(E,o),x=D(E,b+E.placeholderBuffer);var N=c.getQualityForBitrate(i,S,I);x>E.lastQuality&&x>N&&(x=Math.max(N,E.lastQuality));var P=Math.max(0,b+E.placeholderBuffer-R(E,x));P<=E.placeholderBuffer?(E.placeholderBuffer-=P,P=0):(P-=E.placeholderBuffer,E.placeholderBuffer=0,x<c.getTopQualityIndexFor(o,h)?u.setTimeToLoadDelay(1e3*P):P=0),g.quality=x,g.reason.throughput=T,g.reason.latency=I,g.reason.bufferLevel=b,g.reason.placeholderBuffer=E.placeholderBuffer,g.reason.delay=P,E.lastQuality=x;break;default:l.debug("BOLA ABR rule invoked in bad state."),g.quality=c.getQualityForBitrate(i,S,I),g.reason.state=E.state,g.reason.throughput=S,g.reason.latency=I,E.state=v,w(E)}return g}function j(){c={}}function K(){j(),a.off(p["default"].BUFFER_EMPTY,N,u),a.off(p["default"].PLAYBACK_SEEKING,P,u),a.off(p["default"].PERIOD_SWITCH_STARTED,L,u),a.off(p["default"].MEDIA_FRAGMENT_LOADED,O,u),a.off(p["default"].METRIC_ADDED,F,u),a.off(p["default"].QUALITY_CHANGE_REQUESTED,k,u),a.off(p["default"].FRAGMENT_LOADING_ABANDONED,U,u)}return u={getMaxIndex:H,reset:K},h(),u}S.__dashjs_factory_name="BolaRule",t["default"]=l["default"].getClassFactory(S),e.exports=t["default"]},6531:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null};t["default"]=i,e.exports=t["default"]},"656e":function(e,t,n){"use strict";var r=n("79aa");function i(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},"65b4":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n("c287"),l=i(u),d=n("e09e"),c=i(d),f=function(e){function t(){a(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e,t){var n,r=(n={},o(n,c["default"].MPD,[c["default"].ID,c["default"].PROFILES]),o(n,c["default"].PERIOD,[c["default"].ID]),o(n,c["default"].BASE_URL,[c["default"].SERVICE_LOCATION,c["default"].BYTE_RANGE]),o(n,c["default"].SEGMENT_BASE,[c["default"].INDEX_RANGE]),o(n,c["default"].INITIALIZATION,[c["default"].RANGE]),o(n,c["default"].REPRESENTATION_INDEX,[c["default"].RANGE]),o(n,c["default"].SEGMENT_LIST,[c["default"].INDEX_RANGE]),o(n,c["default"].BITSTREAM_SWITCHING,[c["default"].RANGE]),o(n,c["default"].SEGMENT_URL,[c["default"].MEDIA_RANGE,c["default"].INDEX_RANGE]),o(n,c["default"].SEGMENT_TEMPLATE,[c["default"].INDEX_RANGE,c["default"].MEDIA,c["default"].INDEX,c["default"].INITIALIZATION_MINUS,c["default"].BITSTREAM_SWITCHING_MINUS]),o(n,c["default"].ASSET_IDENTIFIER,[c["default"].VALUE,c["default"].ID]),o(n,c["default"].EVENT_STREAM,[c["default"].VALUE]),o(n,c["default"].ADAPTATION_SET,[c["default"].PROFILES,c["default"].MIME_TYPE,c["default"].SEGMENT_PROFILES,c["default"].CODECS,c["default"].CONTENT_TYPE]),o(n,c["default"].FRAME_PACKING,[c["default"].VALUE,c["default"].ID]),o(n,c["default"].AUDIO_CHANNEL_CONFIGURATION,[c["default"].VALUE,c["default"].ID]),o(n,c["default"].CONTENT_PROTECTION,[c["default"].VALUE,c["default"].ID]),o(n,c["default"].ESSENTIAL_PROPERTY,[c["default"].VALUE,c["default"].ID]),o(n,c["default"].SUPPLEMENTAL_PROPERTY,[c["default"].VALUE,c["default"].ID]),o(n,c["default"].INBAND_EVENT_STREAM,[c["default"].VALUE,c["default"].ID]),o(n,c["default"].ACCESSIBILITY,[c["default"].VALUE,c["default"].ID]),o(n,c["default"].ROLE,[c["default"].VALUE,c["default"].ID]),o(n,c["default"].RATING,[c["default"].VALUE,c["default"].ID]),o(n,c["default"].VIEWPOINT,[c["default"].VALUE,c["default"].ID]),o(n,c["default"].CONTENT_COMPONENT,[c["default"].CONTENT_TYPE]),o(n,c["default"].REPRESENTATION,[c["default"].ID,c["default"].DEPENDENCY_ID,c["default"].MEDIA_STREAM_STRUCTURE_ID]),o(n,c["default"].SUBSET,[c["default"].ID]),o(n,c["default"].METRICS,[c["default"].METRICS_MINUS]),o(n,c["default"].REPORTING,[c["default"].VALUE,c["default"].ID]),n);if(r.hasOwnProperty(t)){var i=r[t];return void 0!==i&&i.indexOf(e.name)>=0}return!1},function(e){return String(e)})}return s(t,e),t}(l["default"]);t["default"]=f,e.exports=t["default"]},"665e":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(t){if(i(this,e),this.offset=t._offset,this.type=t.type,this.size=t.size,this.boxes=[],t.boxes)for(var n=0;n<t.boxes.length;n++)this.boxes.push(new e(t.boxes[n]));switch(this.isComplete=!0,t.type){case"sidx":if(this.timescale=t.timescale,this.earliest_presentation_time=t.earliest_presentation_time,this.first_offset=t.first_offset,this.references=t.references,t.references){this.references=[];for(n=0;n<t.references.length;n++){var r={reference_type:t.references[n].reference_type,referenced_size:t.references[n].referenced_size,subsegment_duration:t.references[n].subsegment_duration};this.references.push(r)}}break;case"emsg":this.id=t.id,this.value=t.value,this.timescale=t.timescale,this.scheme_id_uri=t.scheme_id_uri,this.presentation_time_delta=1===t.version?t.presentation_time:t.presentation_time_delta,this.event_duration=t.event_duration,this.message_data=t.message_data;break;case"mdhd":this.timescale=t.timescale;break;case"mfhd":this.sequence_number=t.sequence_number;break;case"subs":this.entry_count=t.entry_count,this.entries=t.entries;break;case"tfhd":this.base_data_offset=t.base_data_offset,this.sample_description_index=t.sample_description_index,this.default_sample_duration=t.default_sample_duration,this.default_sample_size=t.default_sample_size,this.default_sample_flags=t.default_sample_flags,this.flags=t.flags;break;case"tfdt":this.version=t.version,this.baseMediaDecodeTime=t.baseMediaDecodeTime,this.flags=t.flags;break;case"trun":if(this.sample_count=t.sample_count,this.first_sample_flags=t.first_sample_flags,this.data_offset=t.data_offset,this.flags=t.flags,this.samples=t.samples,t.samples){this.samples=[];n=0;for(var o=t.samples.length;n<o;n++){var a={sample_size:t.samples[n].sample_size,sample_duration:t.samples[n].sample_duration,sample_composition_time_offset:t.samples[n].sample_composition_time_offset};this.samples.push(a)}}break}}return r(e,[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],n=0;n<this.boxes.length;n++)this.boxes[n].type===e&&t.push(this.boxes[n]);return t}}]),e}();t["default"]=o,e.exports=t["default"]},"66df":function(e,t,n){"use strict";function r(){function e(t){var n=[],r=[],i=void 0,o=void 0;for(i in t)if(t.hasOwnProperty(i)&&0!==i.indexOf("_")){if(o=t[i],void 0!==o&&null!==o||(o=""),Array.isArray(o)){if(!o.length)continue;r=[],o.forEach(function(t){var n="Object"!==Object.prototype.toString.call(t).slice(8,-1);r.push(n?t:e(t))}),o=r.map(encodeURIComponent).join(",")}else"string"===typeof o?o=encodeURIComponent(o):o instanceof Date?o=o.toISOString():"number"===typeof o&&(o=Math.round(o));n.push(i+"="+o)}return n.join("&")}return{serialise:e}}Object.defineProperty(t,"__esModule",{value:!0}),r.__dashjs_factory_name="MetricSerialiser",t["default"]=dashjs.FactoryMaker.getSingletonFactory(r),e.exports=t["default"]},6762:function(e,t,n){"use strict";var r=n("5ca1"),i=n("c366")(!0);r(r.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")("includes")},6821:function(e,t,n){var r=n("626a"),i=n("be13");e.exports=function(e){return r(i(e))}},"68f7":function(e,t,n){"use strict";var r=n("63b6"),i=n("79aa"),o=n("d864"),a=n("a22a");e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,u=arguments[1];return i(this),t=void 0!==u,t&&i(u),void 0==e?new this:(n=[],t?(r=0,s=o(u,arguments[2],2),a(e,!1,function(e){n.push(s(e,r++))})):a(e,!1,n.push,n),new this(n))}})}},"694b":function(e,t,n){"use strict";var r=Array.isArray,i=Object.keys,o=Object.prototype.hasOwnProperty;e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var a,s,u,l=r(t),d=r(n);if(l&&d){if(s=t.length,s!=n.length)return!1;for(a=s;0!==a--;)if(!e(t[a],n[a]))return!1;return!0}if(l!=d)return!1;var c=t instanceof Date,f=n instanceof Date;if(c!=f)return!1;if(c&&f)return t.getTime()==n.getTime();var h=t instanceof RegExp,p=n instanceof RegExp;if(h!=p)return!1;if(h&&p)return t.toString()==n.toString();var m=i(t);if(s=m.length,s!==i(n).length)return!1;for(a=s;0!==a--;)if(!o.call(n,m[a]))return!1;for(a=s;0!==a--;)if(u=m[a],!e(t[u],n[u]))return!1;return!0}return t!==t&&n!==n}},"696e":function(e,t,n){n("c207"),n("1654"),n("6c1c"),n("24c5"),n("3c11"),n("43fc"),e.exports=n("584a").Promise},"69a8":function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},"69cb":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("0757"),s=n("1774"),u=r(s),l=n("d25a"),d=r(l),c=n("2d62"),f=r(c),h=n("467b"),p=r(h),m=n("589e"),g=r(m),y=n("eba1"),v=r(y),_=n("476a"),E=r(_),b=n("3e2c"),T=r(b),S=n("db66"),I=r(S),w=n("8a43"),x=r(w),A=n("1d48"),D=r(A),R=n("6a2d"),M=r(R),C=n("e172"),N=r(C);function P(){var e=this.context,t=(0,x["default"])(e).getInstance(),n=!1,r=void 0,i=void 0,s=void 0,l=void 0,c=void 0,h=void 0,p=void 0,m=void 0,y=void 0,_=void 0,b=void 0,S=void 0,w=void 0,A=void 0,R=void 0,C=void 0,P=void 0,L=void 0,O=void 0,F=void 0,B=void 0,k=void 0,U=void 0,H=void 0,j=void 0,K=void 0,V=void 0;function q(){i=(0,g["default"])(e).getInstance().getLogger(r),Y()}function G(){w=null,R=NaN,C=[],O=null,A=!1}function Y(){G(),b=[],m=null}function z(t,r){n||J(),S.setConfig({videoModel:P}),S.initialize(),s||(s=(0,d["default"])(e).getInstance()),W(t,r)}function W(t,n){var i=!c.getIsTextTrack(t);if(n){if(b=b.concat(n.getMediaInfoArr()),i){w=n.getFragmentModel(),r.buffered=(0,f["default"])(e).create(),C=p.getTracksFor(o["default"].FRAGMENTED_TEXT,L.getActiveStreamInfo());for(var a=p.getCurrentTrackFor(o["default"].FRAGMENTED_TEXT,L.getActiveStreamInfo()),s=0;s<C.length;s++)if(C[s]===a){re(s);break}}for(s=0;s<b.length;s++)ie(null,b[s])}}function X(){S.deleteAllTextTracks(),s=null,b=[],w=null,A=!1,C=[]}function $(){Y(),L=null,P=null,S=null}function Q(e){var t=e.chunk;t.mediaInfo.embeddedCaptions&&oe(t.bytes,t)}function J(){B=[],S=(0,v["default"])(e).getInstance(),S.setConfig({videoModel:P}),S.initialize(),s=(0,d["default"])(e).getInstance(),F=null,!1,k=0,j=[],H=[],U=null,n=!0,K=(0,E["default"])(e).getInstance();var r=L.getActiveStreamProcessors();for(var i in r)if("video"===r[i].getType()){V=r[i].getRepresentationInfo().MSETimeOffset;break}t.on(D["default"].VIDEO_CHUNK_RECEIVED,Q,this)}function Z(){t.off(D["default"].VIDEO_CHUNK_RECEIVED,Q,this),S&&S.deleteAllTextTracks(),n=!1,B=[],j=[null,null],H=[],U=null}function ee(e){if(n||J(),e)if(e.id===o["default"].CC1||e.id===o["default"].CC3){for(var t=0;t<B.length;t++)if(B[t].id===e.id)return;B.push(e)}else i.warn("Embedded track "+e.id+" not supported!")}function te(e){e&&(e.errHandler&&(l=e.errHandler),e.dashManifestModel&&(c=e.dashManifestModel),e.manifestModel&&(h=e.manifestModel),e.mediaController&&(p=e.mediaController),e.videoModel&&(P=e.videoModel),e.streamController&&(L=e.streamController),e.textTracks&&(S=e.textTracks),e.vttParser&&(y=e.vttParser),e.ttmlParser&&(_=e.ttmlParser))}function ne(){var e={fragmentModel:w,fragmentedTracks:C,videoModel:P};return e}function re(e){F=e}function ie(e,t){var n=new u["default"],r={subtitle:"subtitles",caption:"captions"},i=function(){var e=t.roles.length>0?r[t.roles[0]]:r.caption;return e=e===r.caption||e===r.subtitle?e:r.caption,e},a=function(){var e=!1;return t.codec&&t.codec.search(o["default"].STPP)>=0&&(e=!0),t.mimeType&&t.mimeType.search(o["default"].TTML)>=0&&(e=!0),e};n.captionData=e,n.lang=t.lang,n.labels=t.labels,n.id=t.id?t.id:t.index,n.index=t.index,n.isTTML=a(),n.defaultTrack=se(t),n.isFragmented=!c.getIsTextTrack(t.mimeType),n.isEmbedded=!!t.isEmbedded,n.kind=i(),n.roles=t.roles,n.accessibility=t.accessibility;var s=(b?b.length:0)+B.length;S.addTextTrack(n,s)}function oe(e,t){var n=void 0,r=void 0,u=void 0,d=void 0,c=void 0,f=void 0,p=void 0,g=t.mediaInfo,y=g.type,v=g.mimeType,_=g.codec||v;if(_){if(y===o["default"].FRAGMENTED_TEXT)if(A)if(f=s.getSamplesInfo(e),r=f.sampleList,null===O&&r.length>0&&(O=r[0].cts-t.start*R),_.search(o["default"].STPP)>=0)for(m=null!==m?m:ue(_),u=0;u<r.length;u++){var E=r[u],b=E.cts,x=b-O;this.buffered.add(x/R,(x+E.duration)/R);var D=new DataView(e,E.offset,E.subSizes[0]);p=T["default"].Utils.dataViewToString(D,o["default"].UTF8);var C=[],L=E.offset+E.subSizes[0];for(d=1;d<E.subSizes.length;d++){var V=new Uint8Array(e,L,E.subSizes[d]),q=String.fromCharCode.apply(null,V);C.push(q),L+=E.subSizes[d]}try{var G=h.getValue(),Y=G.ttmlTimeIsRelative?b/R:0;n=m.parse(p,Y,b/R,(b+E.duration)/R,C),S.addCaptions(F,O/R,n)}catch(fe){w.removeExecutedRequestsBeforeTime(),this.remove(),i.error("TTML parser error: "+fe.message)}}else{var z=[];for(u=0;u<r.length;u++){E=r[u];E.cts-=O,this.buffered.add(E.cts/R,(E.cts+E.duration)/R);var W=e.slice(E.offset,E.offset+E.size),X=T["default"].parseBuffer(W);for(d=0;d<X.boxes.length;d++){var $=X.boxes[d];if(i.debug("VTT box1: "+$.type),"vtte"!==$.type&&"vttc"===$.type)for(i.debug("VTT vttc boxes.length = "+$.boxes.length),c=0;c<$.boxes.length;c++){var Q=$.boxes[c];if(i.debug("VTT box2: "+Q.type),"payl"===Q.type){var J=Q.cue_text;i.debug("VTT cue_text = "+J);var Z=E.cts/R,ee=(E.cts+E.duration)/R;z.push({start:Z,end:ee,data:J,styles:{}}),i.debug("VTT "+Z+"-"+ee+" : "+J)}}}}z.length>0&&S.addCaptions(F,0,z)}else A=!0,R=s.getMediaTimescaleFromMoov(e);else if(y===o["default"].TEXT){D=new DataView(e,0,e.byteLength);p=T["default"].Utils.dataViewToString(D,o["default"].UTF8);try{n=ue(_).parse(p,0),S.addCaptions(S.getCurrentTrackIdx(),0,n)}catch(fe){l.timedTextError(fe,"parse",p),l.error(new M["default"](N["default"].TIMED_TEXT_ERROR_ID_PARSE_CODE,N["default"].TIMED_TEXT_ERROR_MESSAGE_PARSE+fe.message,p))}}else if(y===o["default"].VIDEO)if(t.segmentType===a.HTTPRequest.INIT_SEGMENT_TYPE){if(0===k)for(k=s.getMediaTimescaleFromMoov(e),u=0;u<B.length;u++)ie(null,B[u])}else{if(0===k)return void i.warn("CEA-608: No timescale for embeddedTextTrack yet");var te=function(e,t){function n(e,n,r){var i=null;if(P.getTTMLRenderingDiv())i=K.createHTMLCaptionsFromScreen(P.getElement(),e,n,r);else{var o=r.getDisplayText();i=[{start:e,end:n,data:o,styles:{}}]}i&&S.addCaptions(t,0,i)}return n};f=s.getSamplesInfo(e);var ne=f.lastSequenceNumber;if(!j[0]&&!j[1]){var re=void 0,oe=void 0;for(u=0;u<B.length;u++){if(B[u].id===o["default"].CC1?(0,oe=S.getTrackIdxForId(o["default"].CC1)):B[u].id===o["default"].CC3&&(1,oe=S.getTrackIdxForId(o["default"].CC3)),-1===oe)return void i.warn("CEA-608: data before track is ready.");re=te(this,oe),j[u]=new I["default"].Cea608Parser(u+1,{newCue:re},null)}}if(k&&-1==H.indexOf(ne)){if(null!==U&&ne!==U+f.numSequences)for(u=0;u<j.length;u++)j[u]&&j[u].reset();for(var se=ae(e,f.sampleList),le=0;le<j.length;le++){var de=se.fields[le],ce=j[le];if(ce)for(u=0;u<de.length;u++)ce.addData(de[u][0]/k,de[u][1])}U=ne,H.push(ne)}}}else i.error("No text type defined")}function ae(e,t){if(0===t.length)return null;for(var n={splits:[],fields:[[],[]]},r=new DataView(e),i=0;i<t.length;i++)for(var o=t[i],a=I["default"].findCea608Nalus(r,o.offset,o.size),s=null,u=0,l=0;l<a.length;l++)for(var d=I["default"].extractCea608DataFromRange(r,a[l]),c=0;c<2;c++)d[c].length>0&&(o.cts!==s?u=0:u+=1,n.fields[c].push([o.cts+V*k,d[c],u]),s=o.cts);return n.fields.forEach(function(e){e.sort(function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]})}),n}function se(e){var t=!1;return B.length>1&&e.isEmbedded?t=e.id&&e.id===o["default"].CC1:1===B.length?e.id&&"string"===typeof e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===B.length&&(t=e.index===b[0].index),t}function ue(e){var t=void 0;return e.search(o["default"].VTT)>=0?t=y:(e.search(o["default"].TTML)>=0||e.search(o["default"].STPP)>=0)&&(t=_),t}function le(e,t){void 0===e&&e===t&&(e=this.buffered.start(0),t=this.buffered.end(this.buffered.length-1)),this.buffered.remove(e,t)}return r={initialize:z,append:oe,abort:X,addEmbeddedTrack:ee,resetEmbedded:Z,setConfig:te,getConfig:ne,setCurrentFragmentedTrackIdx:re,remove:le,reset:$},q(),r}P.__dashjs_factory_name="TextSourceBuffer",t["default"]=p["default"].getSingletonFactory(P),e.exports=t["default"]},"6a2d":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n,i){r(this,e),this.code=t||null,this.message=n||null,this.data=i||null};t["default"]=i,e.exports=t["default"]},"6a67":function(e,t,n){"use strict";var r={encode:function(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|63&r)):r<65536?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t},decode:function(e){var t=[],n=0;while(n<e.length){var r=e[n++];r<128||(r<224?(r=(31&r)<<6,r|=63&e[n++]):r<240?(r=(15&r)<<12,r|=(63&e[n++])<<6,r|=63&e[n++]):(r=(7&r)<<18,r|=(63&e[n++])<<12,r|=(63&e[n++])<<6,r|=63&e[n++])),t.push(String.fromCharCode(r))}return t.join("")}},i={};(function(e){var t=function(t){var n=0,r=[],i=0|t.length/3;while(0<i--){var o=(t[n]<<16)+(t[n+1]<<8)+t[n+2];n+=3,r.push(e.charAt(63&o>>18)),r.push(e.charAt(63&o>>12)),r.push(e.charAt(63&o>>6)),r.push(e.charAt(63&o))}if(2==t.length-n){o=(t[n]<<16)+(t[n+1]<<8);r.push(e.charAt(63&o>>18)),r.push(e.charAt(63&o>>12)),r.push(e.charAt(63&o>>6)),r.push("=")}else if(1==t.length-n){o=t[n]<<16;r.push(e.charAt(63&o>>18)),r.push(e.charAt(63&o>>12)),r.push("==")}return r.join("")},n=function(){for(var t=[],n=0;n<e.length;++n)t[e.charCodeAt(n)]=n;return t["=".charCodeAt(0)]=0,t}(),o=function(e){var t=0,r=[],i=0|e.length/4;while(0<i--){var o=(n[e.charCodeAt(t)]<<18)+(n[e.charCodeAt(t+1)]<<12)+(n[e.charCodeAt(t+2)]<<6)+n[e.charCodeAt(t+3)];r.push(255&o>>16),r.push(255&o>>8),r.push(255&o),t+=4}return r&&("="==e.charAt(t-2)?(r.pop(),r.pop()):"="==e.charAt(t-1)&&r.pop()),r},u={encode:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}};i.decodeArray=function(e){var t=o(e);return new Uint8Array(t)},i.encodeASCII=function(e){var n=u.encode(e);return t(n)},i.decodeASCII=function(e){var t=o(e);return u.decode(t)},i.encode=function(e){var n=r.encode(e);return t(n)},i.decode=function(e){var t=o(e);return r.decode(t)}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),t.decode=i.decode,t.decodeArray=i.decodeArray,t.encode=i.encode,t.encodeASCII=i.encodeASCII},"6a99":function(e,t,n){var r=n("d3f4");e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},"6b4c":function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},"6c1c":function(e,t,n){n("c367");for(var r=n("e53d"),i=n("35e8"),o=n("481b"),a=n("5168")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var l=s[u],d=r[l],c=d&&d.prototype;c&&!c[a]&&i(c,a,l),o[l]=o.Array}},"6c57":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("2f4d"),u=i(s),l=n("41ee"),d=i(l),c=function(e){function t(e,n){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e||null,this.type=n||null,this.mediaType=u["default"].STREAM,this.responseType=""}return a(t,e),t}(d["default"]);t["default"]=c,e.exports=t["default"]},"6c78":function(e,t,n){"use strict";function r(){var e=void 0;function t(e){return e}function n(){return"POST"}function r(){return"arraybuffer"}function i(e){return e}function o(e){return String.fromCharCode.apply(null,new Uint8Array(e))}return e={getServerURLFromMessage:t,getHTTPMethod:n,getResponseType:r,getLicenseMessage:i,getErrorResponse:o},e}Object.defineProperty(t,"__esModule",{value:!0}),r.__dashjs_factory_name="Widevine",t["default"]=dashjs.FactoryMaker.getSingletonFactory(r),e.exports=t["default"]},"6cb2":function(e,t,n){"use strict";function r(){var e=void 0,t=void 0,n=void 0;function r(e,r){t=e,n=r}function i(){n=null,t=void 0}function o(e,r){e===t&&n&&n.report(t,r)}return e={initialize:r,reset:i,handleNewMetric:o},e}Object.defineProperty(t,"__esModule",{value:!0}),r.__dashjs_factory_name="GenericMetricHandler",t["default"]=dashjs.FactoryMaker.getClassFactory(r),e.exports=t["default"]},"6f8b":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("0b20"),o=r(i),a=n("467b"),s=r(a);function u(){var e=void 0,t=void 0;function n(e){if(t=new o["default"],!e)return null;var n=e.indexOf("#");if(-1!==n)for(var r=e.substr(n+1).split("&"),i=0,a=r.length;i<a;++i){var s=r[i],u=s.indexOf("=");if(-1!==u){var l=s.substring(0,u);t.hasOwnProperty(l)&&(t[l]=s.substr(u+1))}}}function r(){return t}return e={initialize:n,getURIFragmentData:r},e}u.__dashjs_factory_name="URIFragmentModel",t["default"]=s["default"].getSingletonFactory(u),e.exports=t["default"]},7075:function(e,t,n){"use strict";var r=n("63b6");e.exports=function(e){r(r.S,e,{of:function(){var e=arguments.length,t=new Array(e);while(e--)t[e]=arguments[e];return new this(t)}})}},7091:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("4e47"),o=r(i),a=n("36b1"),s=r(a),u=n("467b"),l=r(u),d=n("589e"),c=r(d),f=n("9485"),h=r(f),p=n("2f4d"),m=r(p);function g(e){e=e||{};var t=this.context,n=e.metricsModel,r=void 0,i=void 0;function a(){i=(0,c["default"])(t).getInstance().getLogger(r)}function u(){if(!n||!n.hasOwnProperty("getReadOnlyMetricsFor"))throw new Error(m["default"].MISSING_CONFIG_ERROR)}function l(e){var r=(0,h["default"])(t).create();if(!e||!e.hasOwnProperty("getMediaInfo")||!e.hasOwnProperty("getMediaType")||!e.hasOwnProperty("useBufferOccupancyABR")||!e.hasOwnProperty("getAbrController")||!e.hasOwnProperty("getScheduleController"))return r;u();var a=e.getMediaInfo(),l=e.getMediaType(),d=n.getReadOnlyMetricsFor(l),c=e.getScheduleController(),f=e.getAbrController(),p=e.getStreamInfo(),m=p&&p.manifestInfo?p.manifestInfo.isDynamic:null,g=f.getThroughputHistory(),y=g.getSafeAverageThroughput(l,m),v=g.getAverageLatency(l),_=d.BufferState.length>0?d.BufferState[d.BufferState.length-1]:null,E=e.useBufferOccupancyABR();return!d||isNaN(y)||!_||E?r:(f.getAbandonmentStateFor(l)!==s["default"].ABANDON_LOAD&&(_.state===o["default"].BUFFER_LOADED||m)&&(r.quality=f.getQualityForBitrate(a,y,v),c.setTimeToLoadDelay(0),i.debug("requesting switch to index: ",r.quality,"type: ",l,"Average throughput",Math.round(y),"kbps"),r.reason={throughput:y,latency:v}),r)}function d(){}return r={getMaxIndex:l,reset:d},a(),r}g.__dashjs_factory_name="ThroughputRule",t["default"]=l["default"].getClassFactory(g),e.exports=t["default"]},"71a8":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkParameterType=a,t.checkInteger=s,t.checkRange=u,t.checkIsVideoOrAudioType=l;var i=n("2f4d"),o=r(i);function a(e,t){if(typeof e!==t)throw o["default"].BAD_ARGUMENT_ERROR}function s(e){var t=null!==e&&!isNaN(e)&&e%1===0;if(!t)throw o["default"].BAD_ARGUMENT_ERROR+" : argument is not an integer"}function u(e,t,n){if(e<t||e>n)throw o["default"].BAD_ARGUMENT_ERROR+" : argument out of range"}function l(e){if("string"!==typeof e||e!==o["default"].AUDIO&&e!==o["default"].VIDEO)throw o["default"].BAD_ARGUMENT_ERROR}},"71c1":function(e,t,n){var r=n("3a38"),i=n("25eb");e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),l=s.length;return u<0||u>=l?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},"71d3":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null};t["default"]=i,e.exports=t["default"]},7333:function(e,t,n){"use strict";var r=n("0d58"),i=n("2621"),o=n("52a7"),a=n("4bf8"),s=n("626a"),u=Object.assign;e.exports=!u||n("79e5")(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r})?function(e,t){var n=a(e),u=arguments.length,l=1,d=i.f,c=o.f;while(u>l){var f,h=s(arguments[l++]),p=d?r(h).concat(d(h)):r(h),m=p.length,g=0;while(m>g)c.call(h,f=p[g++])&&(n[f]=h[f])}return n}:u},"73ff":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("f974"),o=r(i),a=n("b69e"),s=r(a),u=n("f766"),l=r(u);function d(e){e=e||{};var t={},n=this.context,r=e.eventBus,i=e.events;function a(i){if(!i.error){var a=Object.keys(t),u=(0,s["default"])(n).getInstance({dashManifestModel:e.dashManifestModel,constants:e.constants}).getMetrics(i.manifest);u.forEach(function(r){var s=JSON.stringify(r);if(t.hasOwnProperty(s))a.splice(s,1);else try{var u=(0,o["default"])(n).create(e);u.initialize(r),t[s]=u}catch(i){}}),a.forEach(function(e){t[e].reset(),delete t[e]}),r.trigger(l["default"].METRICS_INITIALISATION_COMPLETE)}}function u(){Object.keys(t).forEach(function(e){t[e].reset()}),t={}}function d(){r.on(i.MANIFEST_UPDATED,a),r.on(i.STREAM_TEARDOWN_COMPLETE,u)}function c(){r.off(i.MANIFEST_UPDATED,a),r.off(i.STREAM_TEARDOWN_COMPLETE,u)}return d(),{reset:c}}d.__dashjs_factory_name="MetricsCollectionController",t["default"]=dashjs.FactoryMaker.getClassFactory(d),e.exports=t["default"]},7514:function(e,t,n){"use strict";var r=n("5ca1"),i=n("0a49")(5),o="find",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(o)},7554:function(e,t,n){n("68f7")("Map")},7726:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},7737:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null};t["default"]=i,e.exports=t["default"]},"77f1":function(e,t,n){var r=n("4588"),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},"780f":function(e,t,n){"use strict";e.exports=o;var r=n("27bf"),i=n("3a7c");function o(e){if(!(this instanceof o))return new o(e);r.call(this,e)}i.inherits=n("3fb5"),i.inherits(o,r),o.prototype._transform=function(e,t,n){n(null,e)}},7865:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=n("120d"),a=r(o),s=n("31d1"),u=r(s),l=n("0757"),d=n("467b"),c=r(d),f=n("e172"),h=r(f),p=n("6a2d"),m=r(p);function g(e){e=e||{};var t=this.context,n=e.errHandler,r=e.metricsModel,o=e.mediaPlayerModel,s=e.requestModifier,d=e.boxParser,c=e.useFetch||!1,f=void 0,p=void 0,g=void 0,y=void 0,v=void 0,_=void 0;function E(){var e,t;p=[],g=[],y=[],e={},i(e,l.HTTPRequest.MPD_TYPE,h["default"].DOWNLOAD_ERROR_ID_MANIFEST),i(e,l.HTTPRequest.XLINK_EXPANSION_TYPE,h["default"].DOWNLOAD_ERROR_ID_XLINK),i(e,l.HTTPRequest.INIT_SEGMENT_TYPE,h["default"].DOWNLOAD_ERROR_ID_INITIALIZATION),i(e,l.HTTPRequest.MEDIA_SEGMENT_TYPE,h["default"].DOWNLOAD_ERROR_ID_CONTENT),i(e,l.HTTPRequest.INDEX_SEGMENT_TYPE,h["default"].DOWNLOAD_ERROR_ID_CONTENT),i(e,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,h["default"].DOWNLOAD_ERROR_ID_CONTENT),i(e,l.HTTPRequest.OTHER_TYPE,h["default"].DOWNLOAD_ERROR_ID_CONTENT),v=e,t={},i(t,l.HTTPRequest.MPD_TYPE,h["default"].DOWNLOAD_ERROR_ID_MANIFEST_CODE),i(t,l.HTTPRequest.XLINK_EXPANSION_TYPE,h["default"].DOWNLOAD_ERROR_ID_XLINK_CODE),i(t,l.HTTPRequest.INIT_SEGMENT_TYPE,h["default"].DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),i(t,l.HTTPRequest.MEDIA_SEGMENT_TYPE,h["default"].DOWNLOAD_ERROR_ID_CONTENT_CODE),i(t,l.HTTPRequest.INDEX_SEGMENT_TYPE,h["default"].DOWNLOAD_ERROR_ID_CONTENT_CODE),i(t,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,h["default"].DOWNLOAD_ERROR_ID_CONTENT_CODE),i(t,l.HTTPRequest.OTHER_TYPE,h["default"].DOWNLOAD_ERROR_ID_CONTENT_CODE),_=t}function b(e,i){var f=e.request,h=[],E=!0,T=!0,S=new Date,I=S,w=0,x=void 0;if(!s||!r||!n)throw new Error("config object is not correct or missing");var A=function(e){T=!1,f.requestStartDate=S,f.requestEndDate=new Date,f.firstByteDate=f.firstByteDate||S,f.checkExistenceOnly||(r.addHttpRequest(f.mediaType,null,f.type,f.url,x.response?x.response.responseURL:null,f.serviceLocation||null,f.range||null,f.requestStartDate,f.firstByteDate,f.requestEndDate,x.response?x.response.status:null,f.duration,x.response&&x.response.getAllResponseHeaders?x.response.getAllResponseHeaders():x.response?x.response.responseHeaders:[],e?h:null),f.type===l.HTTPRequest.MPD_TYPE&&r.addManifestUpdate("stream",f.type,f.requestStartDate,f.requestEndDate))},D=function(){-1!==p.indexOf(x)&&(p.splice(p.indexOf(x),1),T&&(A(!1),i>0?function(){i--;var t={config:e};y.push(t),t.timeout=setTimeout(function(){-1!==y.indexOf(t)&&(y.splice(y.indexOf(t),1),b(e,i))},o.getRetryIntervalForType(f.type))}():(n.downloadError(v[f.type],f.url,f),n.error(new m["default"](_[f.type],f.url+" is not available",{request:f,response:x.response})),e.error&&e.error(f,"error",x.response.statusText),e.complete&&e.complete(f,x.response.statusText))))},R=function(t){var n=new Date;E&&(E=!1,(!t.lengthComputable||t.lengthComputable&&t.total!==t.loaded)&&(f.firstByteDate=n)),t.lengthComputable&&(f.bytesLoaded=t.loaded,f.bytesTotal=t.total),t.noTrace||(h.push({s:I,d:t.time?t.time:n.getTime()-I.getTime(),b:[t.loaded?t.loaded-w:0]}),I=n,w=t.loaded),e.progress&&t&&e.progress(t)},M=function(){x.response.status>=200&&x.response.status<=299&&(A(!0),e.success&&e.success(x.response.response,x.response.statusText,x.response.responseURL),e.complete&&e.complete(f,x.response.statusText))},C=function(){e.abort&&e.abort(f)},N=void 0;N=c&&window.fetch&&"arraybuffer"===f.responseType&&f.type===l.HTTPRequest.MEDIA_SEGMENT_TYPE?(0,u["default"])(t).create({requestModifier:s,boxParser:d}):(0,a["default"])(t).create({requestModifier:s,boxParser:d});var P=s.modifyRequestURL(f.url),L=f.checkExistenceOnly?l.HTTPRequest.HEAD:l.HTTPRequest.GET,O=o.getXHRWithCredentialsForType(f.type);x={url:P,method:L,withCredentials:O,request:f,onload:M,onend:D,onerror:D,progress:R,onabort:C,loader:N};var F=(new Date).getTime();isNaN(f.delayLoadingTime)||F>=f.delayLoadingTime?(p.push(x),N.load(x)):function(){var e={httpRequest:x};g.push(e),e.delayTimeout=setTimeout(function(){if(-1!==g.indexOf(e)){g.splice(g.indexOf(e),1);try{S=new Date,I=S,p.push(e.httpRequest),N.load(e.httpRequest)}catch(t){e.httpRequest.onerror()}}},f.delayLoadingTime-F)}()}function T(e){e.request&&b(e,o.getRetryAttemptsForType(e.request.type))}function S(){y.forEach(function(e){clearTimeout(e.timeout),e.config.request&&e.config.abort&&e.config.abort(e.config.request)}),y=[],g.forEach(function(e){return clearTimeout(e.delayTimeout)}),g=[],p.forEach(function(e){e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e),e.onabort()}),p=[]}return f={load:T,abort:S},E(),f}g.__dashjs_factory_name="HTTPLoader";var y=c["default"].getClassFactory(g);t["default"]=y,e.exports=t["default"]},7914:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("b4f1"),o=r(i),a=n("bb46"),s=r(a),u=n("6a2d"),l=r(u),d=n("1d48"),c=r(d),f=n("8a43"),h=r(f),p=n("d25a"),m=r(p),g=n("467b"),y=r(g),v=n("589e"),_=r(v),E=n("0757"),b=n("41ee"),T=r(b),S=n("7865"),I=r(S),w=n("e172"),x=r(w);function A(){var e=this.context,t=(0,h["default"])(e).getInstance(),n=void 0,r=void 0,i=void 0,a=void 0,u=void 0,d=void 0,f=void 0,p=void 0,g=void 0;function y(){r=(0,_["default"])(e).getInstance().getLogger(n)}function v(){a=(0,m["default"])(e).getInstance(),u=(0,o["default"])(e).getInstance(),p=(0,I["default"])(e).create({errHandler:i,metricsModel:d,mediaPlayerModel:f,requestModifier:u})}function b(e){e.baseURLController&&(g=e.baseURLController),e.metricsModel&&(d=e.metricsModel),e.mediaPlayerModel&&(f=e.mediaPlayerModel),e.errHandler&&(i=e.errHandler)}function S(){if(!g||!g.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function w(e,n){S();var i=null,o=g.resolve(e.path),s=n||{init:!0,url:o?o.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500};r.debug("Start searching for initialization.");var u=M(s),l=function(n){s.bytesLoaded=s.range.end,i=a.findInitRange(n),i?(e.range=i,t.trigger(c["default"].INITIALIZATION_LOADED,{representation:e})):(s.range.end=s.bytesLoaded+s.bytesToLoad,w(e,s))},d=function(){t.trigger(c["default"].INITIALIZATION_LOADED,{representation:e})};p.load({request:u,success:l,error:d}),r.debug("Perform init search: "+s.url)}function A(e,t,n,i,o){if(S(),n&&(void 0===n.start||void 0===n.end)){var s=n?n.toString().split("-"):null;n=s?{start:parseFloat(s[0]),end:parseFloat(s[1])}:null}o=o||C;var u=null,l=null,d=!!n,c=g.resolve(e.path),f={init:!1,url:c?c.url:void 0,range:d?n:{start:0,end:1500},searching:!d,bytesLoaded:i?i.bytesLoaded:0,bytesToLoad:1500},h=M(f),m=function(n){var i=f.bytesToLoad,s=n.byteLength;if(f.bytesLoaded=f.range.end-f.range.start,u=a.parse(n),l=u.getBox("sidx"),l&&l.isComplete){var d=l.references,c=void 0,h=void 0;null!==d&&void 0!==d&&d.length>0&&(c=1===d[0].reference_type),c?function(){r.debug("Initiate multiple SIDX load."),f.range.end=f.range.start+l.size;var n=void 0,i=void 0,a=void 0,s=void 0,u=void 0,c=[],h=0,p=(l.offset||f.range.start)+l.size,m=function(n){n?(c=c.concat(n),h++,h>=i&&o(c,e,t)):o(null,e,t)};for(n=0,i=d.length;n<i;n++)a=p,s=p+d[n].referenced_size-1,p+=d[n].referenced_size,u={start:a,end:s},A(e,null,u,f,m)}():(r.debug("Parsing segments from SIDX."),h=R(l,f),o(h,e,t))}else{if(l)f.range.start=l.offset||f.range.start,f.range.end=f.range.start+(l.size||i);else{if(s<f.bytesLoaded)return void o(null,e,t);var p=u.getLastBox();p&&p.size?(f.range.start=p.offset+p.size,f.range.end=f.range.start+i):f.range.end+=i}A(e,t,f.range,f,o)}},y=function(){o(null,e,t)};p.load({request:h,success:m,error:y}),r.debug("Perform SIDX load: "+f.url)}function D(){p.abort(),p=null,i=null,a=null,u=null}function R(e,t){for(var n=e.references,r=n.length,i=e.timescale,o=e.earliest_presentation_time,a=t.range.start+e.offset+e.first_offset+e.size,u=[],l=void 0,d=void 0,c=void 0,f=void 0,h=0;h<r;h++)c=n[h].subsegment_duration,f=n[h].referenced_size,l=new s["default"],l.duration=c,l.startTime=o,l.timescale=i,d=a+f-1,l.mediaRange=a+"-"+d,u.push(l),o+=c,a+=f;return u}function M(e){if(e.url){var t=new T["default"];return t.type=e.init?E.HTTPRequest.INIT_SEGMENT_TYPE:E.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}}function C(e,n,r){e?t.trigger(c["default"].SEGMENTS_LOADED,{segments:e,representation:n,mediaType:r}):t.trigger(c["default"].SEGMENTS_LOADED,{segments:null,representation:n,mediaType:r,error:new l["default"](x["default"].SEGMENT_BASE_LOADER_ERROR_CODE,x["default"].SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}return n={setConfig:b,initialize:v,loadInitialization:w,loadSegments:A,reset:D},y(),n}A.__dashjs_factory_name="SegmentBaseLoader",t["default"]=y["default"].getSingletonFactory(A),e.exports=t["default"]},"794b":function(e,t,n){e.exports=!n("8e60")&&!n("294c")(function(){return 7!=Object.defineProperty(n("1ec9")("div"),"a",{get:function(){return 7}}).a})},"795b":function(e,t,n){e.exports=n("696e")},"79aa":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"79e5":function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"7a56":function(e,t,n){"use strict";var r=n("7726"),i=n("86cc"),o=n("9e1e"),a=n("2b4c")("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},"7b5a":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("7d9a"),o=r(i),a=n("f766"),s=r(a),u=n("73ff"),l=r(u),d=n("0d27"),c=r(d),f=n("5948"),h=r(f);function p(){var e=this.context,t=void 0;function n(t){return(0,o["default"])(e).getInstance({eventBus:t.eventBus,metricsModel:t.metricsModel,metricsConstants:t.metricsConstants,events:t.events}),(0,l["default"])(e).create(t)}function r(){return(0,h["default"])(e).getInstance()}function i(){return(0,c["default"])(e).getInstance()}return t={createMetricsReporting:n,getReportingFactory:r,getMetricsHandlerFactory:i},t}p.__dashjs_factory_name="MetricsReporting";var m=dashjs.FactoryMaker.getClassFactory(p);m.events=s["default"],dashjs.FactoryMaker.updateClassFactory(p.__dashjs_factory_name,m),t["default"]=m,e.exports=t["default"]},"7b70":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){i(this,e),this.init()}return r(e,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready"}}]),e}(),a=new o;t["default"]=a,e.exports=t["default"]},"7be7":function(e,t,n){n("0a90"),e.exports=n("584a").parseFloat},"7cd6":function(e,t,n){var r=n("40c3"),i=n("5168")("iterator"),o=n("481b");e.exports=n("584a").getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},"7d72":function(e,t,n){"use strict";var r=n("8707").Buffer,i=r.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){if(!e)return"utf8";var t;while(1)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function a(e){var t=o(e);if("string"!==typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}function s(e){var t;switch(this.encoding=a(e),this.encoding){case"utf16le":this.text=p,this.end=m,t=4;break;case"utf8":this.fillLast=c,t=4;break;case"base64":this.text=g,this.end=y,t=3;break;default:return this.write=v,void(this.end=_)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function u(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function l(e,t,n){var r=t.length-1;if(r<n)return 0;var i=u(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=u(t[r]),i>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=u(t[r]),i>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0))}function d(e,t,n){if(128!==(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,""}}function c(e){var t=this.lastTotal-this.lastNeed,n=d(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function f(e,t){var n=l(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t}function p(e,t){if((e.length-t)%2===0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function m(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function g(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function y(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function v(e){return e.toString(this.encoding)}function _(e){return e&&e.length?this.write(e):""}t.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(t=this.fillLast(e),void 0===t)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},s.prototype.end=h,s.prototype.text=f,s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},"7d9a":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("5ed3"),o=r(i),a=n("f766"),s=r(a);function u(e){e=e||{};var t=void 0,n=void 0,r=e.eventBus,i=e.metricsModel,a=e.metricsConstants,u=e.events;function l(e){var t=new o["default"];if(n){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.mpdurl||(t.mpdurl=n.originalUrl||n.url),t.terror||(t.terror=new Date),i.addDVBErrors(t)}}function d(e){e.error||(n=e.manifest)}function c(e){l({errorcode:o["default"].BASE_URL_CHANGED,servicelocation:e.entry})}function f(){l({errorcode:o["default"].BECAME_REPORTER})}function h(e){(0===e.responsecode||e.responsecode>=400||e.responsecode<100||e.responsecode>=600)&&l({errorcode:e.responsecode||o["default"].CONNECTION_ERROR,url:e.url,terror:e.tresponse,servicelocation:e._serviceLocation})}function p(e){switch(e.metric){case a.HTTP_REQUEST:h(e.value);break;default:break}}function m(e){var t=e.error?e.error.code:0,n=void 0;switch(t){case MediaError.MEDIA_ERR_NETWORK:n=o["default"].CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:n=o["default"].CORRUPT_MEDIA_OTHER;break;default:return}l({errorcode:n})}function g(){r.on(u.MANIFEST_UPDATED,d,t),r.on(u.SERVICE_LOCATION_BLACKLIST_CHANGED,c,t),r.on(u.METRIC_ADDED,p,t),r.on(u.METRIC_UPDATED,p,t),r.on(u.PLAYBACK_ERROR,m,t),r.on(s["default"].BECAME_REPORTING_PLAYER,f,t)}function y(){r.off(u.MANIFEST_UPDATED,d,t),r.off(u.SERVICE_LOCATION_BLACKLIST_CHANGED,c,t),r.off(u.METRIC_ADDED,p,t),r.off(u.METRIC_UPDATED,p,t),r.off(u.PLAYBACK_ERROR,m,t),r.off(s["default"].BECAME_REPORTING_PLAYER,f,t)}return t={initialise:g,reset:y},g(),t}u.__dashjs_factory_name="DVBErrorsTranslator",t["default"]=dashjs.FactoryMaker.getSingletonFactory(u),e.exports=t["default"]},"7e90":function(e,t,n){var r=n("d9f6"),i=n("e4ae"),o=n("c3a1");e.exports=n("8e60")?Object.defineProperties:function(e,t){i(e);var n,a=o(t),s=a.length,u=0;while(s>u)r.f(e,n=a[u++],t[n]);return e}},"7f20":function(e,t,n){var r=n("86cc").f,i=n("69a8"),o=n("2b4c")("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},"7f3c":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null};t["default"]=i,e.exports=t["default"]},"7f7f":function(e,t,n){var r=n("86cc").f,i=Function.prototype,o=/^\s*function ([^ (]*)/,a="name";a in i||n("9e1e")&&r(i,a,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},8019:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("e09e"),s=r(a),u=n("41ee"),l=r(u),d=n("6a2d"),c=r(d),f=n("0757"),h=n("1d48"),p=r(h),m=n("8a43"),g=r(m),y=n("e172"),v=r(y),_=n("467b"),E=r(_),b=n("589e"),T=r(b),S=n("4e7a"),I=r(S),w=n("9ad3"),x=r(w),A=n("5beb"),D=n("c429"),R=r(D),M=n("7914"),C=r(M),N=n("54b2"),P=r(N);function L(e){e=e||{};var t=this.context,n=(0,g["default"])(t).getInstance(),r=(0,I["default"])(t).getInstance(),i=void 0,a=e.timelineConverter,u=e.dashMetrics,d=e.metricsModel,h=e.mediaPlayerModel,m=e.errHandler,y=e.baseURLController,_=void 0,E=void 0,b=void 0,S=void 0,w=void 0,D=void 0,M=void 0;function N(){E=(0,T["default"])(t).getInstance().getLogger(_),V(),i=L(e.mimeType)?(0,P["default"])(t).getInstance():(0,C["default"])(t).getInstance(),i.setConfig({baseURLController:y,metricsModel:d,mediaPlayerModel:h,errHandler:m}),n.on(p["default"].INITIALIZATION_LOADED,re,_),n.on(p["default"].SEGMENTS_LOADED,ie,_)}function L(e){var t=e.split("/")[1];return"webm"===t.toLowerCase()}function O(n){D=n,i.initialize(),M=(0,R["default"])(t).create(e,B())}function F(){return D?D.getType():null}function B(){var e=D?D.getStreamInfo():null;return e?e.manifestInfo.isDynamic:null}function k(){return D?D.getMediaInfo():null}function U(){return D}function H(e){w=e}function j(){return w}function K(){b=-1}function V(){K(),w=0,S=null,D=null,M=null}function q(){V(),n.off(p["default"].INITIALIZATION_LOADED,re,_),n.off(p["default"].SEGMENTS_LOADED,ie,_)}function G(e,t,n){var i=y.resolve(n.path),o=void 0,a=void 0;return i&&t!==i.url&&r.isRelative(t)?(o=i.url,a=i.serviceLocation,t&&(o=r.resolve(t,o))):o=t,!r.isRelative(o)&&(e.url=o,e.serviceLocation=a,!0)}function Y(e,t){var n=new l["default"],r=e.adaptation.period,i=r.start,o=B();if(n.mediaType=t,n.type=f.HTTPRequest.INIT_SEGMENT_TYPE,n.range=e.range,n.availabilityStartTime=a.calcAvailabilityStartTimeFromPresentationTime(i,r.mpd,o),n.availabilityEndTime=a.calcAvailabilityEndTimeFromPresentationTime(i+r.duration,r.mpd,o),n.quality=e.index,n.mediaInfo=k(),n.representationId=e.id,G(n,e.initialization,e))return n}function z(e){if(!e)return null;var t=Y(e,F());return t}function W(e){var t=!1,n=B();if(n||b!==e.availableSegmentsNumber){var r=(0,A.getSegmentByIndex)(b,e);if(r){var i=parseFloat((r.presentationStartTime-e.adaptation.period.start).toFixed(5)),o=e.adaptation.period.duration;E.debug(e.segmentInfoType+": "+i+" / "+o),t=(e.segmentInfoType!==s["default"].SEGMENT_TIMELINE||!n)&&i>=o}else E.debug("isMediaFinished - no segment found")}else t=!0;return t}function X(e){M.getSegments(e,S,b,$)}function $(e,t){if(e.segments=t,t&&t.length>0&&B()){var n=t[t.length-1],r=n.presentationStartTime,i=d.getMetricsFor(o["default"].STREAM);a.setExpectedLiveEdge(r),d.updateManifestUpdateInfo(u.getCurrentManifestUpdate(i),{presentationStartTime:r})}}function Q(e){if(!e)throw new Error("no representation");e.segments=null,X(e)}function J(e,t){var r=x["default"].hasInitialization(e),o=x["default"].hasSegments(e),s=void 0;if(e.segmentDuration||e.segments||Q(e),e.segmentAvailabilityRange=a.calcSegmentAvailabilityRange(e,B()),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start&&!e.useCalculatedLiveEdgeTime)return s=new c["default"](v["default"].SEGMENTS_UNAVAILABLE_ERROR_CODE,v["default"].SEGMENTS_UNAVAILABLE_ERROR_MESSAGE,{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end}),void n.trigger(p["default"].REPRESENTATION_UPDATED,{sender:this,representation:e,error:s});t||K(),e.segmentDuration&&Q(e),r||i.loadInitialization(e),o||i.loadSegments(e,F(),e.indexRange),r&&o&&n.trigger(p["default"].REPRESENTATION_UPDATED,{sender:this,representation:e})}function Z(e,t,n){var r=t.segments,i=r?r.length:null,o=-1,a=void 0,s=void 0,u=void 0,l=void 0,d=void 0;if(r&&i>0)for(n=void 0===n||null===n?h.getSegmentOverlapToleranceTime():n,d=0;d<i;d++)if(s=r[d],u=s.presentationStartTime,l=s.duration,a=void 0===n||null===n?l/2:n,e+a>=u&&e-a<u+l){o=s.availabilityIdx;break}return o}function ee(e){if(null===e||void 0===e)return null;var t=new l["default"],n=e.representation,r=n.adaptation.period.mpd.manifest.Period_asArray[n.adaptation.period.index].AdaptationSet_asArray[n.adaptation.index].Representation_asArray[n.index].bandwidth,i=e.media;return i=(0,A.replaceTokenForTemplate)(i,"Number",e.replacementNumber),i=(0,A.replaceTokenForTemplate)(i,"Time",e.replacementTime),i=(0,A.replaceTokenForTemplate)(i,"Bandwidth",r),i=(0,A.replaceIDForTemplate)(i,n.id),i=(0,A.unescapeDollarsInTemplate)(i),t.mediaType=F(),t.type=f.HTTPRequest.MEDIA_SEGMENT_TYPE,t.range=e.mediaRange,t.startTime=e.presentationStartTime,t.duration=e.duration,t.timescale=n.timescale,t.availabilityStartTime=e.availabilityStartTime,t.availabilityEndTime=e.availabilityEndTime,t.wallStartTime=e.wallStartTime,t.quality=n.index,t.index=e.availabilityIdx,t.mediaInfo=k(),t.adaptationIndex=n.adaptation.index,t.representationId=n.id,G(t,i,n)?t:void 0}function te(e,t,n){var r=void 0,i=void 0,o=void 0;if(!e)return null;var a=F(),u=b,d=!!n&&n.keepIdx,c=n?n.timeThreshold:null,f=!(!n||!n.ignoreIsFinished);return S!==t&&(S=t,E.debug("Getting the request for "+a+" time : "+t)),X(e),b=Z(t,e,c),b<0&&(X(e),b=Z(t,e,c)),b>=0&&E.debug("Index for "+a+" time "+t+" is "+b),o=!f&&W(e),o?(r=new l["default"],r.action=l["default"].ACTION_COMPLETE,r.index=b,r.mediaType=a,r.mediaInfo=k(),E.debug("Signal complete in getSegmentRequestForTime -",a)):(i=(0,A.getSegmentByIndex)(b,e),r=ee(i)),d&&u>=0&&(b=e.segmentInfoType===s["default"].SEGMENT_TIMELINE&&B()?b:u),r}function ne(e){var t=void 0,n=void 0,r=void 0;if(!e||-1===b)return null;var i=F(),o=B();S=null,b++,E.debug("Getting the next request at index: "+b+", type: "+i);var a=(0,A.getSegmentByIndex)(b,e);return!a&&o?(E.debug("No segment found at index: "+b+". Wait for next loop"),X(e),b--,null):(r=W(e),r?(t=new l["default"],t.action=l["default"].ACTION_COMPLETE,t.index=b,t.mediaType=i,t.mediaInfo=k(),E.debug("Signal complete -",i)):(X(e),n=(0,A.getSegmentByIndex)(b,e),t=ee(n),!n&&o&&b--),t)}function re(e){var t=e.representation;t.segments&&n.trigger(p["default"].REPRESENTATION_UPDATED,{sender:this,representation:t})}function ie(e){if(!e.error&&F()===e.mediaType){var t=e.segments,r=e.representation,i=[],o=0,s=void 0,u=void 0,l=void 0,d=void 0;for(s=0,u=t.length;s<u;s++)l=t[s],d=(0,A.getTimeBasedSegment)(a,B(),r,l.startTime,l.duration,l.timescale,l.media,l.mediaRange,o),i.push(d),d=null,o++;r.segmentAvailabilityRange={start:i[0].presentationStartTime,end:i[u-1].presentationStartTime},r.availableSegmentsNumber=u,$(r,i),x["default"].hasInitialization(r)&&n.trigger(p["default"].REPRESENTATION_UPDATED,{sender:this,representation:r})}}return _={initialize:O,getStreamProcessor:U,getInitRequest:z,getSegmentRequestForTime:te,getNextSegmentRequest:ne,updateRepresentation:J,updateSegmentList:Q,setCurrentTime:H,getCurrentTime:j,reset:q,resetIndex:K},N(),_}L.__dashjs_factory_name="DashHandler",t["default"]=E["default"].getClassFactory(L),e.exports=t["default"]},"804f":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(e){e=e||{};var t=void 0,n=new DataView(e.data),r=0;function i(){return r}function o(e){r=e}function a(e,t){var i=!0,o=0,a=void 0,s=void 0;if(void 0===t&&(t=!1),e.tag>16777215?(n.getUint32(r)!==e.tag&&(i=!1),o=4):e.tag>65535?(a=n.getUint16(r),s=n.getUint8(r+2),256*a+s!==e.tag&&(i=!1),o=3):e.tag>255?(n.getUint16(r)!==e.tag&&(i=!1),o=2):(n.getUint8(r)!==e.tag&&(i=!1),o=1),!i&&e.required&&!t)throw new Error("required tag not found");return i&&(r+=o),i}function s(e,t){var n=a(e,t);return n&&d(),n}function u(e){var n=void 0;return a(e),n=d(),t[e.parse](n)}function l(e,t){var n=a(e,t),i=void 0;return n&&(i=d(),r+=i),n}function d(e){var t=1,i=128,o=8,a=-1,s=0,u=n.getUint8(r),l=0;for(l=0;l<o;l+=1){if((u&i)===i){s=void 0===e?u&~i:u,a=l;break}i>>=1}for(l=0;l<a;l+=1,t+=1)s=s<<8|255&n.getUint8(r+t);return r+=t,s}function c(e){var t=void 0;switch(e){case 4:t=n.getFloat32(r),r+=4;break;case 8:t=n.getFloat64(r),r+=8;break}return t}function f(e){for(var t=0,i=0;i<e;i+=1)t<<=8,t|=255&n.getUint8(r+i);return r+=e,t}function h(){return r<n.byteLength}return t={getPos:i,setPos:o,consumeTag:a,consumeTagAndSize:s,parseTag:u,skipOverElement:l,getMatroskaCodedNum:d,getMatroskaFloat:c,getMatroskaUint:f,moreData:h},t}a.__dashjs_factory_name="EBMLParser",t["default"]=o["default"].getClassFactory(a),e.exports=t["default"]},8079:function(e,t,n){var r=n("7726"),i=n("1991").set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n("2d95")(a);e.exports=function(){var e,t,n,l=function(){var r,i;u&&(r=a.domain)&&r.exit();while(e){i=e.fn,e=e.next;try{i()}catch(o){throw e?n():t=void 0,o}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(l)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var d=s.resolve(void 0);n=function(){d.then(l)}}else n=function(){i.call(r,l)};else{var c=!0,f=document.createTextNode("");new o(l).observe(f,{characterData:!0}),n=function(){f.data=c=!c}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},"81a0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("09b9"),u=i(s),l=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_REQUESTED="initRequested",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATED="representationUpdated",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIMED_TEXT_REQUESTED="timedTextRequested",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}return a(t,e),t}(u["default"]);t["default"]=l,e.exports=t["default"]},8293:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("b048"),u=i(s),l=n("e09e"),d=i(l),c=function(e){function t(){o(this,t);var e=[d["default"].PROFILES,d["default"].WIDTH,d["default"].HEIGHT,d["default"].SAR,d["default"].FRAMERATE,d["default"].AUDIO_SAMPLING_RATE,d["default"].MIME_TYPE,d["default"].SEGMENT_PROFILES,d["default"].CODECS,d["default"].MAXIMUM_SAP_PERIOD,d["default"].START_WITH_SAP,d["default"].MAX_PLAYOUT_RATE,d["default"].CODING_DEPENDENCY,d["default"].SCAN_TYPE,d["default"].FRAME_PACKING,d["default"].AUDIO_CHANNEL_CONFIGURATION,d["default"].CONTENT_PROTECTION,d["default"].ESSENTIAL_PROPERTY,d["default"].SUPPLEMENTAL_PROPERTY,d["default"].INBAND_EVENT_STREAM];r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,d["default"].ADAPTATION_SET,e,[new u["default"](d["default"].REPRESENTATION,e,[new u["default"](d["default"].SUB_REPRESENTATION,e)])])}return a(t,e),t}(u["default"]);t["default"]=c,e.exports=t["default"]},"82aa":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("665e"),o=r(i),a=n("467b"),s=r(a);function u(){var e=void 0,t=void 0;function n(e){return e&&t&&t.boxes&&0!==t.boxes.length&&"function"===typeof t.fetch?s(t.fetch(e)):null}function r(e){var n=[];if(!e||!t||"function"!==typeof t.fetchAll)return n;for(var r=t.fetchAll(e),i=void 0,o=0,a=r.length;o<a;o++)i=s(r[o]),i&&n.push(i);return n}function i(e){t=e}function a(){if(!t||!t.boxes||!t.boxes.length)return null;var e=t.boxes[t.boxes.length-1].type,n=r(e);return n.length>0?n[n.length-1]:null}function s(e){if(!e)return null;var t=new o["default"](e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}return e={getBox:n,getBoxes:r,setData:i,getLastBox:a},e}u.__dashjs_factory_name="IsoFile",t["default"]=s["default"].getClassFactory(u),e.exports=t["default"]},8307:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("589e"),s=r(a),u=n("646e"),l=r(u),d=n("8821"),c=r(d),f=n("65b4"),h=r(f),p=n("fe3f"),m=r(p),g=n("37b6"),y=r(g),v=n("aef8"),_=r(v),E=n("8293"),b=r(E),T=n("0c93"),S=r(T);function I(){var e=this.context,t=void 0,n=void 0,r=void 0,i=void 0,o=void 0;function a(){n=(0,s["default"])(e).getInstance().getLogger(t),r=[new m["default"],new y["default"],new _["default"],new h["default"]],i=new c["default"]({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:r}),o=(0,l["default"])(e).create({adaptationset:new b["default"],period:new S["default"]})}function u(){return r}function d(){return o}function f(e){var t=void 0,r=window.performance.now();if(t=i.xml_str2json(e),!t)throw new Error("parsing the manifest failed");var a=window.performance.now();o.run(t);var s=window.performance.now();return n.info("Parsing complete: ( xml2json: "+(a-r).toPrecision(3)+"ms, objectiron: "+(s-a).toPrecision(3)+"ms, total: "+((s-r)/1e3).toPrecision(3)+"s)"),t}return t={parse:f,getMatchers:u,getIron:d},a(),t}I.__dashjs_factory_name="DashParser",t["default"]=o["default"].getClassFactory(I),e.exports=t["default"]},8378:function(e,t){var n=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},"837d":function(e,t,n){"use strict";var r=n("5aee"),i=n("9f79"),o="Map";e.exports=n("ada4")(o,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(i(this,o),e);return t&&t.v},set:function(e,t){return r.def(i(this,o),0===e?0:e,t)}},r,!0)},8436:function(e,t){e.exports=function(){}},"84f2":function(e,t){e.exports={}},"85a1":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("589e"),s=r(a);function u(){var e=void 0,t=void 0,n=this.context;function r(){t=(0,s["default"])(n).getInstance().getLogger(e)}function i(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return t?new MediaSource:e?new WebKitMediaSource:null}function o(e,t){var n=window.URL.createObjectURL(e);return t.setSource(n),n}function a(e){e.setSource(null)}function u(e,t){return e.duration!=t&&(e.duration=t),e.duration}function l(e,t,n){e&&"function"===typeof e.setLiveSeekableRange&&"function"===typeof e.clearLiveSeekableRange&&"open"===e.readyState&&t>=0&&t<n&&(e.clearLiveSeekableRange(),e.setLiveSeekableRange(t,n))}function d(e){var n=e.sourceBuffers,r=n.length;if("open"===e.readyState){for(var i=0;i<r;i++){if(n[i].updating)return;if(0===n[i].buffered.length)return}t.info("call to mediaSource endOfStream"),e.endOfStream()}}return e={createMediaSource:i,attachMediaSource:o,detachMediaSource:a,setDuration:u,setSeekable:l,signalEndOfStream:d},r(),e}u.__dashjs_factory_name="MediaSourceController",t["default"]=o["default"].getSingletonFactory(u),e.exports=t["default"]},"86cc":function(e,t,n){var r=n("cb7c"),i=n("c69a"),o=n("6a99"),a=Object.defineProperty;t.f=n("9e1e")?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},8707:function(e,t,n){var r=n("b639"),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=a),o(i,a),a.from=function(e,t,n){if("number"===typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!==typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"===typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},"874c":function(e,t,n){(function(e,t,n){function r(e,t,d){var c;if("region"===d.kind?(c=document.createElement("div"),c.style.position="absolute"):"body"===d.kind?c=document.createElement("div"):"div"===d.kind?c=document.createElement("div"):"p"===d.kind?c=document.createElement("p"):"span"===d.kind?c=document.createElement("span"):"br"===d.kind&&(c=document.createElement("br")),c){for(var h in c.style.margin="0",f){var p=f[h],g=d.styleAttrs[p.qname];void 0!==g&&null!==p.map&&p.map(e,c,d,g)}var y=c;if("region"===d.kind){var v=d.styleAttrs[n.byName.writingMode.qname];"lrtb"===v||"lr"===v?(e.ipd="lr",e.bpd="tb"):"rltb"===v||"rl"===v?(e.ipd="rl",e.bpd="tb"):"tblr"===v?(e.ipd="tb",e.bpd="lr"):"tbrl"!==v&&"tb"!==v||(e.ipd="tb",e.bpd="rl")}var _=d.styleAttrs[n.byName.linePadding.qname];if(_&&_>0){var E=Math.ceil(_*e.h)+"px";"tb"===e.bpd?(y.style.paddingLeft=E,y.style.paddingRight=E):(y.style.paddingTop=E,y.style.paddingBottom=E),e.lp=_}var b=d.styleAttrs[n.byName.multiRowAlign.qname];if(b&&"auto"!==b){var T=document.createElement("span");T.style.display="inline-block",T.style.textAlign=b,c.appendChild(T),y=T,e.mra=b}if(d.styleAttrs[n.byName.fillLineGap.qname]&&(e.flg=!0),"span"===d.kind&&d.text)if(e.lp||e.mra||e.flg)for(var S="",I=0;I<d.text.length;I++){S+=d.text.charAt(I);var w=d.text.charCodeAt(I);if(w<55296||w>56319||I===d.text.length){var x=document.createElement("span");x.textContent=S,c.appendChild(x),S=""}}else c.textContent=d.text;for(var A in t.appendChild(c),d.contents)r(e,y,d.contents[A]);var D=[];if((e.lp||e.mra||e.flg)&&"p"===d.kind&&(l(e,y,D,null),e.mra&&(o(D),e.mra=null),e.lp&&(i(D,e.lp*e.h,e),e.lp=null),e.flg)){var R=u(y.getBoundingClientRect(),e);a(D,R.before,R.after,e),e.flg=null}if("region"===d.kind&&(l(e,y,D),"tb"===e.bpd&&e.enableRollUp&&d.contents.length>0&&"after"===d.styleAttrs[n.byName.displayAlign.qname])){var M=""===d.id?"_":d.id,C=new s(M,D);if(e.currentISDState[C.id]=C,e.previousISDState&&C.id in e.previousISDState&&e.previousISDState[C.id].plist.length>0&&C.plist.length>1&&C.plist[C.plist.length-2].text===e.previousISDState[C.id].plist[e.previousISDState[C.id].plist.length-1].text){var N=c.firstElementChild,P=C.plist[C.plist.length-1].after-C.plist[C.plist.length-1].before;N.style.bottom="-"+P+"px",N.style.transition="transform 0.4s",N.style.position="relative",N.style.transform="translateY(-"+P+"px)"}}}else m(e.errorHandler,"Error processing ISD element kind: "+d.kind)}function i(e,t,n){for(var r in e){var i=e[r].elements.length,o=e[r].elements[e[r].start_elem],a=e[r].elements[e[r].end_elem],s=Math.ceil(t)+"px",u="-"+Math.ceil(t)+"px";0!==i&&("lr"===n.ipd?(o.node.style.borderLeftColor=o.bgcolor||"#00000000",o.node.style.borderLeftStyle="solid",o.node.style.borderLeftWidth=s,o.node.style.marginLeft=u):"rl"===n.ipd?(o.node.style.borderRightColor=o.bgcolor||"#00000000",o.node.style.borderRightStyle="solid",o.node.style.borderRightWidth=s,o.node.style.marginRight=u):"tb"===n.ipd&&(o.node.style.borderTopColor=o.bgcolor||"#00000000",o.node.style.borderTopStyle="solid",o.node.style.borderTopWidth=s,o.node.style.marginTop=u),"lr"===n.ipd?(a.node.style.borderRightColor=a.bgcolor||"#00000000",a.node.style.borderRightStyle="solid",a.node.style.borderRightWidth=s,a.node.style.marginRight=u):"rl"===n.ipd?(a.node.style.borderLeftColor=a.bgcolor||"#00000000",a.node.style.borderLeftStyle="solid",a.node.style.borderLeftWidth=s,a.node.style.marginLeft=u):"tb"===n.ipd&&(a.node.style.borderBottomColor=a.bgcolor||"#00000000",a.node.style.borderBottomStyle="solid",a.node.style.borderBottomWidth=s,a.node.style.marginBottom=u))}}function o(e){for(var t=0;t<e.length-1;t++){var n=e[t].elements.length;if(0!==n&&!1===e[t].br){var r=document.createElement("br"),i=e[t].elements[n-1].node;i.parentElement.insertBefore(r,i.nextSibling)}}}function a(e,t,n,r){for(var i=Math.sign(n-t),o=0;o<=e.length;o++){var a,s,u;if(a=0===o?t:o===e.length?n:(e[o].before+e[o-1].after)/2,o>0)for(var l=0;l<e[o-1].elements.length;l++)null!==e[o-1].elements[l].bgcolor&&(u=e[o-1].elements[l],i*(u.after-a)<0&&(s=Math.ceil(Math.abs(a-u.after))+"px",u.node.style.backgroundColor=u.bgcolor,"lr"===r.bpd?u.node.style.paddingRight=s:"rl"===r.bpd?u.node.style.paddingLeft=s:"tb"===r.bpd&&(u.node.style.paddingBottom=s)));if(o<e.length)for(var d=0;d<e[o].elements.length;d++)u=e[o].elements[d],null!==u.bgcolor&&i*(u.before-a)>0&&(s=Math.ceil(Math.abs(u.before-a))+"px",u.node.style.backgroundColor=u.bgcolor,"lr"===r.bpd?u.node.style.paddingLeft=s:"rl"===r.bpd?u.node.style.paddingRight=s:"tb"===r.bpd&&(u.node.style.paddingTop=s))}}function s(e,t){this.id=e,this.plist=t}function u(e,t){var n={before:null,after:null,start:null,end:null};return"tb"===t.bpd?(n.before=e.top,n.after=e.bottom,"lr"===t.ipd?(n.start=e.left,n.end=e.right):(n.start=e.right,n.end=e.left)):"lr"===t.bpd?(n.before=e.left,n.after=e.right,n.start=e.top,n.end=e.bottom):"rl"===t.bpd&&(n.before=e.right,n.after=e.left,n.start=e.top,n.end=e.bottom),n}function l(e,t,n,r){var i=t.style.backgroundColor||r;if(0===t.childElementCount)if("span"===t.localName){var o=t.getBoundingClientRect();if(0===o.height||0===o.width)return;var a=u(o,e);if(0!==n.length&&d(a.before,a.after,n[n.length-1].before,n[n.length-1].after)){var s=Math.sign(a.after-a.before),c=Math.sign(a.end-a.start);s*(a.before-n[n.length-1].before)<0&&(n[n.length-1].before=a.before),s*(a.after-n[n.length-1].after)>0&&(n[n.length-1].after=a.after),c*(a.start-n[n.length-1].start)<0&&(n[n.length-1].start=a.start,n[n.length-1].start_elem=n[n.length-1].elements.length),c*(a.end-n[n.length-1].end)>0&&(n[n.length-1].end=a.end,n[n.length-1].end_elem=n[n.length-1].elements.length)}else n.push({before:a.before,after:a.after,start:a.start,end:a.end,start_elem:0,end_elem:0,elements:[],text:"",br:!1});n[n.length-1].text+=t.textContent,n[n.length-1].elements.push({node:t,bgcolor:i,before:a.before,after:a.after})}else"br"===t.localName&&0!==n.length&&(n[n.length-1].br=!0);else{var f=t.firstChild;while(f)f.nodeType===Node.ELEMENT_NODE&&l(e,f,n,i),f=f.nextSibling}}function d(e,t,n,r){return t<r&&e>n||r<=t&&n>=e}function c(e,t){this.qname=e,this.map=t}e.render=function(e,t,n,i,o,a,s,u,l){var d=i||t.clientHeight,c=o||t.clientWidth;if(null!==e.aspectRatio){var f=d*e.aspectRatio;f>c?d=Math.round(c/e.aspectRatio):c=f}var h=document.createElement("div");h.style.position="relative",h.style.width=c+"px",h.style.height=d+"px",h.style.margin="auto",h.style.top=0,h.style.bottom=0,h.style.left=0,h.style.right=0,h.style.zIndex=0;var p={h:d,w:c,regionH:null,regionW:null,imgResolver:n,displayForcedOnlyMode:a||!1,isd:e,errorHandler:s,previousISDState:u,enableRollUp:l||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null};for(var m in t.appendChild(h),e.contents)r(p,h,e.contents[m]);return p.currentISDState};var f=[new c("http://www.w3.org/ns/ttml#styling backgroundColor",function(e,t,n,r){0!==r[3]&&(t.style.backgroundColor="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")")}),new c("http://www.w3.org/ns/ttml#styling color",function(e,t,n,r){t.style.color="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")"}),new c("http://www.w3.org/ns/ttml#styling direction",function(e,t,n,r){t.style.direction=r}),new c("http://www.w3.org/ns/ttml#styling display",function(e,t,n,r){}),new c("http://www.w3.org/ns/ttml#styling displayAlign",function(e,t,n,r){t.style.display="flex",t.style.flexDirection="column","before"===r?t.style.justifyContent="flex-start":"center"===r?t.style.justifyContent="center":"after"===r&&(t.style.justifyContent="flex-end")}),new c("http://www.w3.org/ns/ttml#styling extent",function(e,t,n,r){e.regionH=r.h*e.h,e.regionW=r.w*e.w;var i=0,o=0,a=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];a&&(i=(a[0]+a[2])*e.h,o=(a[1]+a[3])*e.w),t.style.height=e.regionH-i+"px",t.style.width=e.regionW-o+"px"}),new c("http://www.w3.org/ns/ttml#styling fontFamily",function(e,t,n,r){var i=[];for(var o in r)"monospaceSerif"===r[o]?(i.push("Courier New"),i.push('"Liberation Mono"'),i.push("Courier"),i.push("monospace")):"proportionalSansSerif"===r[o]?(i.push("Arial"),i.push("Helvetica"),i.push('"Liberation Sans"'),i.push("sans-serif")):"monospace"===r[o]?i.push("monospace"):"sansSerif"===r[o]?i.push("sans-serif"):"serif"===r[o]?i.push("serif"):"monospaceSansSerif"===r[o]?(i.push("Consolas"),i.push("monospace")):"proportionalSerif"===r[o]?i.push("serif"):i.push(r[o]);t.style.fontFamily=i.join(",")}),new c("http://www.w3.org/ns/ttml#styling fontSize",function(e,t,n,r){t.style.fontSize=r*e.h+"px"}),new c("http://www.w3.org/ns/ttml#styling fontStyle",function(e,t,n,r){t.style.fontStyle=r}),new c("http://www.w3.org/ns/ttml#styling fontWeight",function(e,t,n,r){t.style.fontWeight=r}),new c("http://www.w3.org/ns/ttml#styling lineHeight",function(e,t,n,r){t.style.lineHeight="normal"===r?"normal":r*e.h+"px"}),new c("http://www.w3.org/ns/ttml#styling opacity",function(e,t,n,r){t.style.opacity=r}),new c("http://www.w3.org/ns/ttml#styling origin",function(e,t,n,r){t.style.top=r.h*e.h+"px",t.style.left=r.w*e.w+"px"}),new c("http://www.w3.org/ns/ttml#styling overflow",function(e,t,n,r){t.style.overflow=r}),new c("http://www.w3.org/ns/ttml#styling padding",function(e,t,n,r){var i=[];i[0]=r[0]*e.h+"px",i[1]=r[3]*e.w+"px",i[2]=r[2]*e.h+"px",i[3]=r[1]*e.w+"px",t.style.padding=i.join(" ")}),new c("http://www.w3.org/ns/ttml#styling showBackground",null),new c("http://www.w3.org/ns/ttml#styling textAlign",function(e,t,r,i){var o,a=r.styleAttrs[n.byName.direction.qname];o="start"===i?"rtl"===a?"right":"left":"end"===i?"rtl"===a?"left":"right":i,t.style.textAlign=o}),new c("http://www.w3.org/ns/ttml#styling textDecoration",function(e,t,n,r){t.style.textDecoration=r.join(" ").replace("lineThrough","line-through")}),new c("http://www.w3.org/ns/ttml#styling textOutline",function(e,t,n,r){t.style.textShadow="none"===r?"":"rgba("+r.color[0].toString()+","+r.color[1].toString()+","+r.color[2].toString()+","+(r.color[3]/255).toString()+") 0px 0px "+r.thickness*e.h+"px"}),new c("http://www.w3.org/ns/ttml#styling unicodeBidi",function(e,t,n,r){var i;i="bidiOverride"===r?"bidi-override":r,t.style.unicodeBidi=i}),new c("http://www.w3.org/ns/ttml#styling visibility",function(e,t,n,r){t.style.visibility=r}),new c("http://www.w3.org/ns/ttml#styling wrapOption",function(e,t,n,r){"wrap"===r?"preserve"===n.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===n.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap"}),new c("http://www.w3.org/ns/ttml#styling writingMode",function(e,t,n,r){"lrtb"===r||"lr"===r?t.style.writingMode="horizontal-tb":"rltb"===r||"rl"===r?t.style.writingMode="horizontal-tb":"tblr"===r?t.style.writingMode="vertical-lr":"tbrl"!==r&&"tb"!==r||(t.style.writingMode="vertical-rl")}),new c("http://www.w3.org/ns/ttml#styling zIndex",function(e,t,n,r){t.style.zIndex=r}),new c("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt backgroundImage",function(e,t,n,r){if(null!==e.imgResolver&&null!==r){var i=document.createElement("img"),o=e.imgResolver(r,i);o&&(i.src=o),i.height=e.regionH,i.width=e.regionW,t.appendChild(i)}}),new c("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(e,t,n,r){e.displayForcedOnlyMode&&!1===r&&(t.style.visibility="hidden")})],h={};for(var p in f)h[f[p].qname]=f[p];function m(e,t){if(e&&e.error&&e.error(t))throw t}})(t,"undefined"===typeof imscNames?n("597c"):imscNames,"undefined"===typeof imscStyles?n("faf0"):imscStyles)},8760:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.period=null,this.index=-1,this.type=null};t["default"]=i,e.exports=t["default"]},8821:function(e,t,n){"use strict";function r(e){var t="1.2.0";function n(){void 0===e.escapeMode&&(e.escapeMode=!0),void 0===e.attributePrefix&&(e.attributePrefix="_"),e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1),void 0===e.ignoreRoot&&(e.ignoreRoot=!1)}e=e||{},n(),i();var r={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function i(){}function o(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function a(e){return e.prefix}function s(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function u(e,t,n,r){for(var i=0;i<e.length;i++){var o=e[i];if("string"===typeof o){if(o==r)break}else if(o instanceof RegExp){if(o.test(r))break}else if("function"===typeof o&&o(t,n,r))break}return i!=e.length}function l(t,n,r){switch(e.arrayAccessForm){case"property":t[n]instanceof Array?t[n+"_asArray"]=t[n]:t[n+"_asArray"]=[t[n]];break}!(t[n]instanceof Array)&&e.arrayAccessFormPaths.length>0&&u(e.arrayAccessFormPaths,t,n,r)&&(t[n]=[t[n]])}function d(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),r=t[5].split(".");if(n.setHours(t[3],t[4],r[0]),r.length>1&&n.setMilliseconds(r[1]),t[6]&&t[7]){var i=60*t[6]+Number(t[7]),o=/\d\d-\d\d:\d\d$/.test(e)?"-":"+";i=0+("-"==o?-1*i:i),n.setMinutes(n.getMinutes()-i-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function c(t,n,r){if(e.datetimeAccessFormPaths.length>0){var i=r.split(".#")[0];return u(e.datetimeAccessFormPaths,t,n,i)?d(t):t}return t}function f(t,n,i,o){return!(n==r.ELEMENT_NODE&&e.xmlElementsFilter.length>0)||u(e.xmlElementsFilter,t,i,o)}function h(t,n){if(t.nodeType==r.DOCUMENT_NODE){for(var i=new Object,s=t.childNodes,u=0;u<s.length;u++){var d=s[u];if(d.nodeType==r.ELEMENT_NODE)if(e.ignoreRoot)i=h(d);else{i={};var p=o(d);i[p]=h(d)}}return i}if(t.nodeType==r.ELEMENT_NODE){i=new Object;i.__cnt=0;var m=[];for(s=t.childNodes,u=0;u<s.length;u++){d=s[u],p=o(d);if(d.nodeType!=r.COMMENT_NODE){var g=n+"."+p;if(f(i,d.nodeType,p,g))if(i.__cnt++,null==i[p]){var y=h(d,g);if("#text"!=p||/[^\s]/.test(y)){var v={};v[p]=y,m.push(v)}i[p]=y,l(i,p,g)}else{null!=i[p]&&(i[p]instanceof Array||(i[p]=[i[p]],l(i,p,g)));y=h(d,g);if("#text"!=p||/[^\s]/.test(y)){v={};v[p]=y,m.push(v)}i[p][i[p].length]=y}}}i.__children=m;for(var _=o(t),E=0;E<t.attributes.length;E++){var b=t.attributes[E];i.__cnt++;for(var T=b.value,S=0,I=e.matchers.length;S<I;S++){var w=e.matchers[S];w.test(b,_)&&(T=w.converter(b.value))}i[e.attributePrefix+b.name]=T}var x=a(t);return null!=x&&""!=x&&(i.__cnt++,i.__prefix=x),null!=i["#text"]&&(i.__text=i["#text"],i.__text instanceof Array&&(i.__text=i.__text.join("\n")),e.stripWhitespaces&&(i.__text=i.__text.trim()),delete i["#text"],"property"==e.arrayAccessForm&&delete i["#text_asArray"],i.__text=c(i.__text,p,n+"."+p)),null!=i["#cdata-section"]&&(i.__cdata=i["#cdata-section"],delete i["#cdata-section"],"property"==e.arrayAccessForm&&delete i["#cdata-section_asArray"]),0==i.__cnt&&"text"==e.emptyNodeForm?i="":1==i.__cnt&&null!=i.__text?i=i.__text:1!=i.__cnt||null==i.__cdata||e.keepCData?i.__cnt>1&&null!=i.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==i.__text||""==i.__text.trim())&&delete i.__text:i=i.__cdata,delete i.__cnt,!e.enableToStringFunc||null==i.__text&&null==i.__cdata||(i.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),i}if(t.nodeType==r.TEXT_NODE||t.nodeType==r.CDATA_SECTION_NODE)return t.nodeValue}function p(t,n,r,i){var o="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=r)for(var a=0;a<r.length;a++){var u=r[a],l=t[u];e.escapeMode&&(l=s(l)),o+=" "+u.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?o+='"'+l+'"':o+="'"+l+"'"}return o+=i?"/>":">",o}function m(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function g(e,t){return-1!==e.indexOf(t,e.length-t.length)}function y(t,n){return!!("property"==e.arrayAccessForm&&g(n.toString(),"_asArray")||0==n.toString().indexOf(e.attributePrefix)||0==n.toString().indexOf("__")||t[n]instanceof Function)}function v(e){var t=0;if(e instanceof Object)for(var n in e)y(e,n)||t++;return t}function _(t,n,r){return 0==e.jsonPropertiesFilter.length||""==r||u(e.jsonPropertiesFilter,t,n,r)}function E(t){var n=[];if(t instanceof Object)for(var r in t)-1==r.toString().indexOf("__")&&0==r.toString().indexOf(e.attributePrefix)&&n.push(r);return n}function b(t){var n="";return null!=t.__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(e.escapeMode?n+=s(t.__text):n+=t.__text),n}function T(t){var n="";return t instanceof Object?n+=b(t):null!=t&&(e.escapeMode?n+=s(t):n+=t),n}function S(e,t){return""===e?t:e+"."+t}function I(e,t,n,r){var i="";if(0==e.length)i+=p(e,t,n,!0);else for(var o=0;o<e.length;o++)i+=p(e[o],t,E(e[o]),!1),i+=w(e[o],S(r,t)),i+=m(e[o],t);return i}function w(e,t){var n="",r=v(e);if(r>0)for(var i in e)if(!y(e,i)&&(""==t||_(e,i,S(t,i)))){var o=e[i],a=E(o);if(null==o||void 0==o)n+=p(o,i,a,!0);else if(o instanceof Object)if(o instanceof Array)n+=I(o,i,a,t);else if(o instanceof Date)n+=p(o,i,a,!1),n+=o.toISOString(),n+=m(o,i);else{var s=v(o);s>0||null!=o.__text||null!=o.__cdata?(n+=p(o,i,a,!1),n+=w(o,S(t,i)),n+=m(o,i)):n+=p(o,i,a,!0)}else n+=p(o,i,a,!1),n+=T(o),n+=m(o,i)}return n+=T(e),n}this.parseXmlString=function(e){var t;window.ActiveXObject||window;if(void 0===e)return null;if(window.DOMParser){var n=new window.DOMParser;try{t=n.parseFromString(e,"text/xml"),t.getElementsByTagNameNS("*","parsererror").length>0&&(t=null)}catch(r){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"===typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?d(e):e},this.xml2json=function(e){return h(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return w(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return t}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r,e.exports=t["default"]},8842:function(e,t,n){"use strict";function r(){var e=window.crypto||window.msCrypto,t=Uint32Array,n=Math.pow(2,8*t.BYTES_PER_ELEMENT)-1,r=10,i=void 0,o=void 0,a=void 0;function s(){e&&(i||(i=new t(r)),e.getRandomValues(i),o=0)}function u(t,r){var a=void 0;return t||(t=0),r||(r=1),e?(o===i.length&&s(),a=i[o]/n,o+=1):a=Math.random(),a*(r-t)+t}return a={random:u},s(),a}Object.defineProperty(t,"__esModule",{value:!0}),r.__dashjs_factory_name="RNG",t["default"]=dashjs.FactoryMaker.getSingletonFactory(r),e.exports=t["default"]},"8a43":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=0,s=5e3;function u(){var e={};function t(t,n,r){var o=arguments.length<=3||void 0===arguments[3]?a:arguments[3];if(!t)throw new Error("event type cannot be null or undefined");if(!n||"function"!==typeof n)throw new Error("listener must be a function: "+n);if(!(i(t,n,r)>=0)){e[t]=e[t]||[];var s={callback:n,scope:r,priority:o},u=e[t].some(function(n,r){if(n&&o>n.priority)return e[t].splice(r,0,s),!0});u||e[t].push(s)}}function n(t,n,r){if(t&&n&&e[t]){var o=i(t,n,r);o<0||(e[t][o]=null)}}function r(t,n){if(t&&e[t]){if(n=n||{},n.hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");n.type=t,e[t]=e[t].filter(function(e){return e}),e[t].forEach(function(e){return e&&e.callback.call(e.scope,n)})}}function i(t,n,r){var i=-1;return e[t]?(e[t].some(function(e,t){if(e&&e.callback===n&&(!r||r===e.scope))return i=t,!0}),i):i}function o(){e={}}var s={on:t,off:n,trigger:r,reset:o};return s}u.__dashjs_factory_name="EventBus";var l=o["default"].getSingletonFactory(u);l.EVENT_PRIORITY_LOW=a,l.EVENT_PRIORITY_HIGH=s,o["default"].updateSingletonFactory(u.__dashjs_factory_name,l),t["default"]=l,e.exports=t["default"]},"8b38":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){i(this,e)}return r(e,null,[{key:"round10",value:function(e,t){return a("round",e,t)}}]),e}();function a(e,t,n){return"undefined"===typeof n||0===+n?Math[e](t):(t=+t,n=+n,null===t||isNaN(t)||"number"!==typeof n||n%1!==0?NaN:(t=t.toString().split("e"),t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n))),t=t.toString().split("e"),+(t[0]+"e"+(t[1]?+t[1]+n:n))))}t["default"]=o,e.exports=t["default"]},"8c4f":function(e,t,n){"use strict";
/*!
  * vue-router v3.0.2
  * (c) 2018 Evan You
  * @license MIT
  */function r(e,t){0}function i(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}function o(e,t){for(var n in t)e[n]=t[n];return e}var a={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,t){var n=t.props,r=t.children,i=t.parent,a=t.data;a.routerView=!0;var u=i.$createElement,l=n.name,d=i.$route,c=i._routerViewCache||(i._routerViewCache={}),f=0,h=!1;while(i&&i._routerRoot!==i)i.$vnode&&i.$vnode.data.routerView&&f++,i._inactive&&(h=!0),i=i.$parent;if(a.routerViewDepth=f,h)return u(c[l],a,r);var p=d.matched[f];if(!p)return c[l]=null,u();var m=c[l]=p.components[l];a.registerRouteInstance=function(e,t){var n=p.instances[l];(t&&n!==e||!t&&n===e)&&(p.instances[l]=t)},(a.hook||(a.hook={})).prepatch=function(e,t){p.instances[l]=t.componentInstance};var g=a.props=s(d,p.props&&p.props[l]);if(g){g=a.props=o({},g);var y=a.attrs=a.attrs||{};for(var v in g)m.props&&v in m.props||(y[v]=g[v],delete g[v])}return u(m,a,r)}};function s(e,t){switch(typeof t){case"undefined":return;case"object":return t;case"function":return t(e);case"boolean":return t?e.params:void 0;default:0}}var u=/[!'()*]/g,l=function(e){return"%"+e.charCodeAt(0).toString(16)},d=/%2C/g,c=function(e){return encodeURIComponent(e).replace(u,l).replace(d,",")},f=decodeURIComponent;function h(e,t,n){void 0===t&&(t={});var r,i=n||p;try{r=i(e||"")}catch(a){r={}}for(var o in t)r[o]=t[o];return r}function p(e){var t={};return e=e.trim().replace(/^(\?|#|&)/,""),e?(e.split("&").forEach(function(e){var n=e.replace(/\+/g," ").split("="),r=f(n.shift()),i=n.length>0?f(n.join("=")):null;void 0===t[r]?t[r]=i:Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]}),t):t}function m(e){var t=e?Object.keys(e).map(function(t){var n=e[t];if(void 0===n)return"";if(null===n)return c(t);if(Array.isArray(n)){var r=[];return n.forEach(function(e){void 0!==e&&(null===e?r.push(c(t)):r.push(c(t)+"="+c(e)))}),r.join("&")}return c(t)+"="+c(n)}).filter(function(e){return e.length>0}).join("&"):null;return t?"?"+t:""}var g=/\/?$/;function y(e,t,n,r){var i=r&&r.options.stringifyQuery,o=t.query||{};try{o=v(o)}catch(s){}var a={name:t.name||e&&e.name,meta:e&&e.meta||{},path:t.path||"/",hash:t.hash||"",query:o,params:t.params||{},fullPath:b(t,i),matched:e?E(e):[]};return n&&(a.redirectedFrom=b(n,i)),Object.freeze(a)}function v(e){if(Array.isArray(e))return e.map(v);if(e&&"object"===typeof e){var t={};for(var n in e)t[n]=v(e[n]);return t}return e}var _=y(null,{path:"/"});function E(e){var t=[];while(e)t.unshift(e),e=e.parent;return t}function b(e,t){var n=e.path,r=e.query;void 0===r&&(r={});var i=e.hash;void 0===i&&(i="");var o=t||m;return(n||"/")+o(r)+i}function T(e,t){return t===_?e===t:!!t&&(e.path&&t.path?e.path.replace(g,"")===t.path.replace(g,"")&&e.hash===t.hash&&S(e.query,t.query):!(!e.name||!t.name)&&(e.name===t.name&&e.hash===t.hash&&S(e.query,t.query)&&S(e.params,t.params)))}function S(e,t){if(void 0===e&&(e={}),void 0===t&&(t={}),!e||!t)return e===t;var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(function(n){var r=e[n],i=t[n];return"object"===typeof r&&"object"===typeof i?S(r,i):String(r)===String(i)})}function I(e,t){return 0===e.path.replace(g,"/").indexOf(t.path.replace(g,"/"))&&(!t.hash||e.hash===t.hash)&&w(e.query,t.query)}function w(e,t){for(var n in t)if(!(n in e))return!1;return!0}var x,A=[String,Object],D=[String,Array],R={name:"RouterLink",props:{to:{type:A,required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,event:{type:D,default:"click"}},render:function(e){var t=this,n=this.$router,r=this.$route,i=n.resolve(this.to,r,this.append),a=i.location,s=i.route,u=i.href,l={},d=n.options.linkActiveClass,c=n.options.linkExactActiveClass,f=null==d?"router-link-active":d,h=null==c?"router-link-exact-active":c,p=null==this.activeClass?f:this.activeClass,m=null==this.exactActiveClass?h:this.exactActiveClass,g=a.path?y(null,a,null,n):s;l[m]=T(r,g),l[p]=this.exact?l[m]:I(r,g);var v=function(e){M(e)&&(t.replace?n.replace(a):n.push(a))},_={click:M};Array.isArray(this.event)?this.event.forEach(function(e){_[e]=v}):_[this.event]=v;var E={class:l};if("a"===this.tag)E.on=_,E.attrs={href:u};else{var b=C(this.$slots.default);if(b){b.isStatic=!1;var S=b.data=o({},b.data);S.on=_;var w=b.data.attrs=o({},b.data.attrs);w.href=u}else E.on=_}return e(this.tag,E,this.$slots.default)}};function M(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function C(e){if(e)for(var t,n=0;n<e.length;n++){if(t=e[n],"a"===t.tag)return t;if(t.children&&(t=C(t.children)))return t}}function N(e){if(!N.installed||x!==e){N.installed=!0,x=e;var t=function(e){return void 0!==e},n=function(e,n){var r=e.$options._parentVnode;t(r)&&t(r=r.data)&&t(r=r.registerRouteInstance)&&r(e,n)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,n(this,this)},destroyed:function(){n(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",a),e.component("RouterLink",R);var r=e.config.optionMergeStrategies;r.beforeRouteEnter=r.beforeRouteLeave=r.beforeRouteUpdate=r.created}}var P="undefined"!==typeof window;function L(e,t,n){var r=e.charAt(0);if("/"===r)return e;if("?"===r||"#"===r)return t+e;var i=t.split("/");n&&i[i.length-1]||i.pop();for(var o=e.replace(/^\//,"").split("/"),a=0;a<o.length;a++){var s=o[a];".."===s?i.pop():"."!==s&&i.push(s)}return""!==i[0]&&i.unshift(""),i.join("/")}function O(e){var t="",n="",r=e.indexOf("#");r>=0&&(t=e.slice(r),e=e.slice(0,r));var i=e.indexOf("?");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{path:e,query:n,hash:t}}function F(e){return e.replace(/\/\//g,"/")}var B=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},k=re,U=q,H=G,j=W,K=ne,V=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function q(e,t){var n,r=[],i=0,o=0,a="",s=t&&t.delimiter||"/";while(null!=(n=V.exec(e))){var u=n[0],l=n[1],d=n.index;if(a+=e.slice(o,d),o=d+u.length,l)a+=l[1];else{var c=e[o],f=n[2],h=n[3],p=n[4],m=n[5],g=n[6],y=n[7];a&&(r.push(a),a="");var v=null!=f&&null!=c&&c!==f,_="+"===g||"*"===g,E="?"===g||"*"===g,b=n[2]||s,T=p||m;r.push({name:h||i++,prefix:f||"",delimiter:b,optional:E,repeat:_,partial:v,asterisk:!!y,pattern:T?$(T):y?".*":"[^"+X(b)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function G(e,t){return W(q(e,t))}function Y(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function z(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function W(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"===typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,r){for(var i="",o=n||{},a=r||{},s=a.pretty?Y:encodeURIComponent,u=0;u<e.length;u++){var l=e[u];if("string"!==typeof l){var d,c=o[l.name];if(null==c){if(l.optional){l.partial&&(i+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(B(c)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(c)+"`");if(0===c.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var f=0;f<c.length;f++){if(d=s(c[f]),!t[u].test(d))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(d)+"`");i+=(0===f?l.prefix:l.delimiter)+d}}else{if(d=l.asterisk?z(c):s(c),!t[u].test(d))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+d+'"');i+=l.prefix+d}}else i+=l}return i}}function X(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function $(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function Q(e,t){return e.keys=t,e}function J(e){return e.sensitive?"":"i"}function Z(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return Q(e,t)}function ee(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(re(e[i],t,n).source);var o=new RegExp("(?:"+r.join("|")+")",J(n));return Q(o,t)}function te(e,t,n){return ne(q(e,n),t,n)}function ne(e,t,n){B(t)||(n=t||n,t=[]),n=n||{};for(var r=n.strict,i=!1!==n.end,o="",a=0;a<e.length;a++){var s=e[a];if("string"===typeof s)o+=X(s);else{var u=X(s.prefix),l="(?:"+s.pattern+")";t.push(s),s.repeat&&(l+="(?:"+u+l+")*"),l=s.optional?s.partial?u+"("+l+")?":"(?:"+u+"("+l+"))?":u+"("+l+")",o+=l}}var d=X(n.delimiter||"/"),c=o.slice(-d.length)===d;return r||(o=(c?o.slice(0,-d.length):o)+"(?:"+d+"(?=$))?"),o+=i?"$":r&&c?"":"(?="+d+"|$)",Q(new RegExp("^"+o,J(n)),t)}function re(e,t,n){return B(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?Z(e,t):B(e)?ee(e,t,n):te(e,t,n)}k.parse=U,k.compile=H,k.tokensToFunction=j,k.tokensToRegExp=K;var ie=Object.create(null);function oe(e,t,n){try{var r=ie[e]||(ie[e]=k.compile(e));return r(t||{},{pretty:!0})}catch(i){return""}}function ae(e,t,n,r){var i=t||[],o=n||Object.create(null),a=r||Object.create(null);e.forEach(function(e){se(i,o,a,e)});for(var s=0,u=i.length;s<u;s++)"*"===i[s]&&(i.push(i.splice(s,1)[0]),u--,s--);return{pathList:i,pathMap:o,nameMap:a}}function se(e,t,n,r,i,o){var a=r.path,s=r.name;var u=r.pathToRegexpOptions||{},l=le(a,i,u.strict);"boolean"===typeof r.caseSensitive&&(u.sensitive=r.caseSensitive);var d={path:l,regex:ue(l,u),components:r.components||{default:r.component},instances:{},name:s,parent:i,matchAs:o,redirect:r.redirect,beforeEnter:r.beforeEnter,meta:r.meta||{},props:null==r.props?{}:r.components?r.props:{default:r.props}};if(r.children&&r.children.forEach(function(r){var i=o?F(o+"/"+r.path):void 0;se(e,t,n,r,d,i)}),void 0!==r.alias){var c=Array.isArray(r.alias)?r.alias:[r.alias];c.forEach(function(o){var a={path:o,children:r.children};se(e,t,n,a,i,d.path||"/")})}t[d.path]||(e.push(d.path),t[d.path]=d),s&&(n[s]||(n[s]=d))}function ue(e,t){var n=k(e,[],t);return n}function le(e,t,n){return n||(e=e.replace(/\/$/,"")),"/"===e[0]?e:null==t?e:F(t.path+"/"+e)}function de(e,t,n,r){var i="string"===typeof e?{path:e}:e;if(i.name||i._normalized)return i;if(!i.path&&i.params&&t){i=o({},i),i._normalized=!0;var a=o(o({},t.params),i.params);if(t.name)i.name=t.name,i.params=a;else if(t.matched.length){var s=t.matched[t.matched.length-1].path;i.path=oe(s,a,"path "+t.path)}else 0;return i}var u=O(i.path||""),l=t&&t.path||"/",d=u.path?L(u.path,l,n||i.append):l,c=h(u.query,i.query,r&&r.options.parseQuery),f=i.hash||u.hash;return f&&"#"!==f.charAt(0)&&(f="#"+f),{_normalized:!0,path:d,query:c,hash:f}}function ce(e,t){var n=ae(e),r=n.pathList,i=n.pathMap,o=n.nameMap;function a(e){ae(e,r,i,o)}function s(e,n,a){var s=de(e,n,!1,t),u=s.name;if(u){var l=o[u];if(!l)return d(null,s);var c=l.regex.keys.filter(function(e){return!e.optional}).map(function(e){return e.name});if("object"!==typeof s.params&&(s.params={}),n&&"object"===typeof n.params)for(var f in n.params)!(f in s.params)&&c.indexOf(f)>-1&&(s.params[f]=n.params[f]);if(l)return s.path=oe(l.path,s.params,'named route "'+u+'"'),d(l,s,a)}else if(s.path){s.params={};for(var h=0;h<r.length;h++){var p=r[h],m=i[p];if(fe(m.regex,s.path,s.params))return d(m,s,a)}}return d(null,s)}function u(e,n){var r=e.redirect,i="function"===typeof r?r(y(e,n,null,t)):r;if("string"===typeof i&&(i={path:i}),!i||"object"!==typeof i)return d(null,n);var a=i,u=a.name,l=a.path,c=n.query,f=n.hash,h=n.params;if(c=a.hasOwnProperty("query")?a.query:c,f=a.hasOwnProperty("hash")?a.hash:f,h=a.hasOwnProperty("params")?a.params:h,u){o[u];return s({_normalized:!0,name:u,query:c,hash:f,params:h},void 0,n)}if(l){var p=he(l,e),m=oe(p,h,'redirect route with path "'+p+'"');return s({_normalized:!0,path:m,query:c,hash:f},void 0,n)}return d(null,n)}function l(e,t,n){var r=oe(n,t.params,'aliased route with path "'+n+'"'),i=s({_normalized:!0,path:r});if(i){var o=i.matched,a=o[o.length-1];return t.params=i.params,d(a,t)}return d(null,t)}function d(e,n,r){return e&&e.redirect?u(e,r||n):e&&e.matchAs?l(e,n,e.matchAs):y(e,n,r,t)}return{match:s,addRoutes:a}}function fe(e,t,n){var r=t.match(e);if(!r)return!1;if(!n)return!0;for(var i=1,o=r.length;i<o;++i){var a=e.keys[i-1],s="string"===typeof r[i]?decodeURIComponent(r[i]):r[i];a&&(n[a.name||"pathMatch"]=s)}return!0}function he(e,t){return L(e,t.parent?t.parent.path:"/",!0)}var pe=Object.create(null);function me(){window.history.replaceState({key:Re()},"",window.location.href.replace(window.location.origin,"")),window.addEventListener("popstate",function(e){ye(),e.state&&e.state.key&&Me(e.state.key)})}function ge(e,t,n,r){if(e.app){var i=e.options.scrollBehavior;i&&e.app.$nextTick(function(){var o=ve(),a=i.call(e,t,n,r?o:null);a&&("function"===typeof a.then?a.then(function(e){Ie(e,o)}).catch(function(e){0}):Ie(a,o))})}}function ye(){var e=Re();e&&(pe[e]={x:window.pageXOffset,y:window.pageYOffset})}function ve(){var e=Re();if(e)return pe[e]}function _e(e,t){var n=document.documentElement,r=n.getBoundingClientRect(),i=e.getBoundingClientRect();return{x:i.left-r.left-t.x,y:i.top-r.top-t.y}}function Ee(e){return Se(e.x)||Se(e.y)}function be(e){return{x:Se(e.x)?e.x:window.pageXOffset,y:Se(e.y)?e.y:window.pageYOffset}}function Te(e){return{x:Se(e.x)?e.x:0,y:Se(e.y)?e.y:0}}function Se(e){return"number"===typeof e}function Ie(e,t){var n="object"===typeof e;if(n&&"string"===typeof e.selector){var r=document.querySelector(e.selector);if(r){var i=e.offset&&"object"===typeof e.offset?e.offset:{};i=Te(i),t=_e(r,i)}else Ee(e)&&(t=be(e))}else n&&Ee(e)&&(t=be(e));t&&window.scrollTo(t.x,t.y)}var we=P&&function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}(),xe=P&&window.performance&&window.performance.now?window.performance:Date,Ae=De();function De(){return xe.now().toFixed(3)}function Re(){return Ae}function Me(e){Ae=e}function Ce(e,t){ye();var n=window.history;try{t?n.replaceState({key:Ae},"",e):(Ae=De(),n.pushState({key:Ae},"",e))}catch(r){window.location[t?"replace":"assign"](e)}}function Ne(e){Ce(e,!0)}function Pe(e,t,n){var r=function(i){i>=e.length?n():e[i]?t(e[i],function(){r(i+1)}):r(i+1)};r(0)}function Le(e){return function(t,n,r){var o=!1,a=0,s=null;Oe(e,function(e,t,n,u){if("function"===typeof e&&void 0===e.cid){o=!0,a++;var l,d=Ue(function(t){ke(t)&&(t=t.default),e.resolved="function"===typeof t?t:x.extend(t),n.components[u]=t,a--,a<=0&&r()}),c=Ue(function(e){var t="Failed to resolve async component "+u+": "+e;s||(s=i(e)?e:new Error(t),r(s))});try{l=e(d,c)}catch(h){c(h)}if(l)if("function"===typeof l.then)l.then(d,c);else{var f=l.component;f&&"function"===typeof f.then&&f.then(d,c)}}}),o||r()}}function Oe(e,t){return Fe(e.map(function(e){return Object.keys(e.components).map(function(n){return t(e.components[n],e.instances[n],e,n)})}))}function Fe(e){return Array.prototype.concat.apply([],e)}var Be="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;function ke(e){return e.__esModule||Be&&"Module"===e[Symbol.toStringTag]}function Ue(e){var t=!1;return function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];if(!t)return t=!0,e.apply(this,n)}}var He=function(e,t){this.router=e,this.base=je(t),this.current=_,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[]};function je(e){if(!e)if(P){var t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^https?:\/\/[^\/]+/,"")}else e="/";return"/"!==e.charAt(0)&&(e="/"+e),e.replace(/\/$/,"")}function Ke(e,t){var n,r=Math.max(e.length,t.length);for(n=0;n<r;n++)if(e[n]!==t[n])break;return{updated:t.slice(0,n),activated:t.slice(n),deactivated:e.slice(n)}}function Ve(e,t,n,r){var i=Oe(e,function(e,r,i,o){var a=qe(e,t);if(a)return Array.isArray(a)?a.map(function(e){return n(e,r,i,o)}):n(a,r,i,o)});return Fe(r?i.reverse():i)}function qe(e,t){return"function"!==typeof e&&(e=x.extend(e)),e.options[t]}function Ge(e){return Ve(e,"beforeRouteLeave",ze,!0)}function Ye(e){return Ve(e,"beforeRouteUpdate",ze)}function ze(e,t){if(t)return function(){return e.apply(t,arguments)}}function We(e,t,n){return Ve(e,"beforeRouteEnter",function(e,r,i,o){return Xe(e,i,o,t,n)})}function Xe(e,t,n,r,i){return function(o,a,s){return e(o,a,function(e){s(e),"function"===typeof e&&r.push(function(){$e(e,t.instances,n,i)})})}}function $e(e,t,n,r){t[n]&&!t[n]._isBeingDestroyed?e(t[n]):r()&&setTimeout(function(){$e(e,t,n,r)},16)}He.prototype.listen=function(e){this.cb=e},He.prototype.onReady=function(e,t){this.ready?e():(this.readyCbs.push(e),t&&this.readyErrorCbs.push(t))},He.prototype.onError=function(e){this.errorCbs.push(e)},He.prototype.transitionTo=function(e,t,n){var r=this,i=this.router.match(e,this.current);this.confirmTransition(i,function(){r.updateRoute(i),t&&t(i),r.ensureURL(),r.ready||(r.ready=!0,r.readyCbs.forEach(function(e){e(i)}))},function(e){n&&n(e),e&&!r.ready&&(r.ready=!0,r.readyErrorCbs.forEach(function(t){t(e)}))})},He.prototype.confirmTransition=function(e,t,n){var o=this,a=this.current,s=function(e){i(e)&&(o.errorCbs.length?o.errorCbs.forEach(function(t){t(e)}):(r(!1,"uncaught error during route navigation:"),console.error(e))),n&&n(e)};if(T(e,a)&&e.matched.length===a.matched.length)return this.ensureURL(),s();var u=Ke(this.current.matched,e.matched),l=u.updated,d=u.deactivated,c=u.activated,f=[].concat(Ge(d),this.router.beforeHooks,Ye(l),c.map(function(e){return e.beforeEnter}),Le(c));this.pending=e;var h=function(t,n){if(o.pending!==e)return s();try{t(e,a,function(e){!1===e||i(e)?(o.ensureURL(!0),s(e)):"string"===typeof e||"object"===typeof e&&("string"===typeof e.path||"string"===typeof e.name)?(s(),"object"===typeof e&&e.replace?o.replace(e):o.push(e)):n(e)})}catch(r){s(r)}};Pe(f,h,function(){var n=[],r=function(){return o.current===e},i=We(c,n,r),a=i.concat(o.router.resolveHooks);Pe(a,h,function(){if(o.pending!==e)return s();o.pending=null,t(e),o.router.app&&o.router.app.$nextTick(function(){n.forEach(function(e){e()})})})})},He.prototype.updateRoute=function(e){var t=this.current;this.current=e,this.cb&&this.cb(e),this.router.afterHooks.forEach(function(n){n&&n(e,t)})};var Qe=function(e){function t(t,n){var r=this;e.call(this,t,n);var i=t.options.scrollBehavior,o=we&&i;o&&me();var a=Je(this.base);window.addEventListener("popstate",function(e){var n=r.current,i=Je(r.base);r.current===_&&i===a||r.transitionTo(i,function(e){o&&ge(t,e,n,!0)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.go=function(e){window.history.go(e)},t.prototype.push=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,function(e){Ce(F(r.base+e.fullPath)),ge(r.router,e,o,!1),t&&t(e)},n)},t.prototype.replace=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,function(e){Ne(F(r.base+e.fullPath)),ge(r.router,e,o,!1),t&&t(e)},n)},t.prototype.ensureURL=function(e){if(Je(this.base)!==this.current.fullPath){var t=F(this.base+this.current.fullPath);e?Ce(t):Ne(t)}},t.prototype.getCurrentLocation=function(){return Je(this.base)},t}(He);function Je(e){var t=decodeURI(window.location.pathname);return e&&0===t.indexOf(e)&&(t=t.slice(e.length)),(t||"/")+window.location.search+window.location.hash}var Ze=function(e){function t(t,n,r){e.call(this,t,n),r&&et(this.base)||tt()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this,t=this.router,n=t.options.scrollBehavior,r=we&&n;r&&me(),window.addEventListener(we?"popstate":"hashchange",function(){var t=e.current;tt()&&e.transitionTo(nt(),function(n){r&&ge(e.router,n,t,!0),we||ot(n.fullPath)})})},t.prototype.push=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,function(e){it(e.fullPath),ge(r.router,e,o,!1),t&&t(e)},n)},t.prototype.replace=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,function(e){ot(e.fullPath),ge(r.router,e,o,!1),t&&t(e)},n)},t.prototype.go=function(e){window.history.go(e)},t.prototype.ensureURL=function(e){var t=this.current.fullPath;nt()!==t&&(e?it(t):ot(t))},t.prototype.getCurrentLocation=function(){return nt()},t}(He);function et(e){var t=Je(e);if(!/^\/#/.test(t))return window.location.replace(F(e+"/#"+t)),!0}function tt(){var e=nt();return"/"===e.charAt(0)||(ot("/"+e),!1)}function nt(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":decodeURI(e.slice(t+1))}function rt(e){var t=window.location.href,n=t.indexOf("#"),r=n>=0?t.slice(0,n):t;return r+"#"+e}function it(e){we?Ce(rt(e)):window.location.hash=e}function ot(e){we?Ne(rt(e)):window.location.replace(rt(e))}var at=function(e){function t(t,n){e.call(this,t,n),this.stack=[],this.index=-1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.push=function(e,t,n){var r=this;this.transitionTo(e,function(e){r.stack=r.stack.slice(0,r.index+1).concat(e),r.index++,t&&t(e)},n)},t.prototype.replace=function(e,t,n){var r=this;this.transitionTo(e,function(e){r.stack=r.stack.slice(0,r.index).concat(e),t&&t(e)},n)},t.prototype.go=function(e){var t=this,n=this.index+e;if(!(n<0||n>=this.stack.length)){var r=this.stack[n];this.confirmTransition(r,function(){t.index=n,t.updateRoute(r)})}},t.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},t.prototype.ensureURL=function(){},t}(He),st=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=ce(e.routes||[],this);var t=e.mode||"hash";switch(this.fallback="history"===t&&!we&&!1!==e.fallback,this.fallback&&(t="hash"),P||(t="abstract"),this.mode=t,t){case"history":this.history=new Qe(this,e.base);break;case"hash":this.history=new Ze(this,e.base,this.fallback);break;case"abstract":this.history=new at(this,e.base);break;default:0}},ut={currentRoute:{configurable:!0}};function lt(e,t){return e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function dt(e,t,n){var r="hash"===n?"#"+t:t;return e?F(e+"/"+r):r}st.prototype.match=function(e,t,n){return this.matcher.match(e,t,n)},ut.currentRoute.get=function(){return this.history&&this.history.current},st.prototype.init=function(e){var t=this;if(this.apps.push(e),!this.app){this.app=e;var n=this.history;if(n instanceof Qe)n.transitionTo(n.getCurrentLocation());else if(n instanceof Ze){var r=function(){n.setupListeners()};n.transitionTo(n.getCurrentLocation(),r,r)}n.listen(function(e){t.apps.forEach(function(t){t._route=e})})}},st.prototype.beforeEach=function(e){return lt(this.beforeHooks,e)},st.prototype.beforeResolve=function(e){return lt(this.resolveHooks,e)},st.prototype.afterEach=function(e){return lt(this.afterHooks,e)},st.prototype.onReady=function(e,t){this.history.onReady(e,t)},st.prototype.onError=function(e){this.history.onError(e)},st.prototype.push=function(e,t,n){this.history.push(e,t,n)},st.prototype.replace=function(e,t,n){this.history.replace(e,t,n)},st.prototype.go=function(e){this.history.go(e)},st.prototype.back=function(){this.go(-1)},st.prototype.forward=function(){this.go(1)},st.prototype.getMatchedComponents=function(e){var t=e?e.matched?e:this.resolve(e).route:this.currentRoute;return t?[].concat.apply([],t.matched.map(function(e){return Object.keys(e.components).map(function(t){return e.components[t]})})):[]},st.prototype.resolve=function(e,t,n){var r=de(e,t||this.history.current,n,this),i=this.match(r,t),o=i.redirectedFrom||i.fullPath,a=this.history.base,s=dt(a,o,this.mode);return{location:r,route:i,href:s,normalizedTo:r,resolved:i}},st.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==_&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(st.prototype,ut),st.install=N,st.version="3.0.2",P&&window.Vue&&window.Vue.use(st),t["a"]=st},"8c53":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("e172"),s=r(a),u=n("e09e"),l=r(u),d=n("6a2d"),c=r(d),f=n("8a43"),h=r(f),p=n("1d48"),m=r(p),g=n("467b"),y=r(g),v=n("9ad3"),_=r(v);function E(){var e=this.context,t=(0,h["default"])(e).getInstance(),n=void 0,r=void 0,i=void 0,a=void 0,u=void 0,d=void 0,f=void 0,p=void 0,g=void 0,y=void 0,v=void 0,E=void 0,b=void 0,T=void 0,S=void 0,I=void 0;function w(){P(),t.on(m["default"].QUALITY_CHANGE_REQUESTED,W,n),t.on(m["default"].REPRESENTATION_UPDATED,G,n),t.on(m["default"].WALLCLOCK_TIME_UPDATED,Y,n),t.on(m["default"].BUFFER_LEVEL_UPDATED,z,n),t.on(m["default"].MANIFEST_VALIDITY_CHANGED,X,n)}function x(e){e.abrController&&(f=e.abrController),e.domStorage&&(v=e.domStorage),e.metricsModel&&(y=e.metricsModel),e.dashMetrics&&(T=e.dashMetrics),e.dashManifestModel&&(b=e.dashManifestModel),e.playbackController&&(g=e.playbackController),e.timelineConverter&&(E=e.timelineConverter),e.manifestModel&&(I=e.manifestModel),e.streamProcessor&&(S=e.streamProcessor)}function A(){p=S.getIndexHandler()}function D(){return S}function R(){return r}function M(){return i}function C(){return a}function N(){return d}function P(){r=null,i=-1,a=!0,u=[],f=null,g=null,y=null,v=null,E=null,b=null,T=null}function L(){t.off(m["default"].QUALITY_CHANGE_REQUESTED,W,n),t.off(m["default"].REPRESENTATION_UPDATED,G,n),t.off(m["default"].WALLCLOCK_TIME_UPDATED,Y,n),t.off(m["default"].BUFFER_LEVEL_UPDATED,z,n),t.off(m["default"].MANIFEST_VALIDITY_CHANGED,X,n),P()}function O(e,n,i){var s=S.getStreamInfo(),l=f.getTopQualityIndexFor(i,s.id),c=f.getMinAllowedIndexFor(i),h=void 0,g=void 0,y=null;if(a=!0,t.trigger(m["default"].DATA_UPDATE_STARTED,{sender:this}),u=j(n),null!==r&&r.id==e.id||i===o["default"].FRAGMENTED_TEXT?h=f.getQualityFor(i,s):(g=f.getThroughputHistory().getAverageThroughput(i),y=g||f.getInitialBitrateFor(i,s),h=f.getQualityForBitrate(S.getMediaInfo(),y)),void 0!==c&&h<c&&(h=c),h>l&&(h=l),d=k(h),r=e,i!==o["default"].VIDEO&&i!==o["default"].AUDIO&&i!==o["default"].FRAGMENTED_TEXT)return a=!1,void t.trigger(m["default"].DATA_UPDATE_COMPLETED,{sender:this,data:r,currentRepresentation:d});for(var v=0;v<u.length;v++)p.updateRepresentation(u[v],!0)}function F(){var e=new Date,t=N(),n=1e3*g.getTime();y.addRepresentationSwitch(t.adaptation.type,e,n,t.id)}function B(){var e=S.getStreamInfo(),t=e?e.manifestInfo:null,n=t?t.isDynamic:null,r=E.calcSegmentAvailabilityRange(d,n);y.addDVRInfo(S.getType(),g.getTime(),t,r)}function k(e){return null===e||void 0===e||e>=u.length?null:u[e]}function U(e){return u.indexOf(e)}function H(){for(var e=0,t=u.length;e<t;e++){var n=u[e].segmentInfoType;if(null===u[e].segmentAvailabilityRange||!_["default"].hasInitialization(u[e])||(n===l["default"].SEGMENT_BASE||n===l["default"].BASE_URL)&&!u[e].segments)return!1}return!0}function j(e){var t=void 0;return i=b.getIndexForAdaptation(r,e.period.mpd.manifest,e.period.index),t=b.getRepresentationsForAdaptation(e),t}function K(e){for(var t=void 0,n=0,r=u.length;n<r;n++)t=u[n],t.segmentAvailabilityRange=E.calcSegmentAvailabilityRange(t,e)}function V(){u.forEach(function(e){e.segmentAvailabilityRange=null})}function q(e){var r=e,i=function(){if(!C()){a=!0,t.trigger(m["default"].DATA_UPDATE_STARTED,{sender:n}),V();for(var e=0;e<u.length;e++)p.updateRepresentation(u[e],!0)}};a=!1,t.trigger(m["default"].AST_IN_FUTURE,{delay:r}),setTimeout(i,r)}function G(e){if(e.sender.getStreamProcessor()===S&&C()){var n=e.representation,i=y.getMetricsFor(o["default"].STREAM),u=y.getMetricsFor(N().adaptation.type),h=T.getCurrentManifestUpdate(i),p=!1,v=0,_=void 0,E=void 0,b=void 0;if(n.adaptation.period.mpd.manifest.type===l["default"].DYNAMIC&&!n.adaptation.period.mpd.manifest.ignorePostponeTimePeriod){var I=n.segmentAvailabilityRange.end-n.segmentAvailabilityRange.start,w=g.computeLiveDelay(d.segmentDuration,S.getStreamInfo().manifestInfo.DVRWindowSize);v=1e3*(w-I)}if(v>0)return B(),q(v),E=new c["default"](s["default"].SEGMENTS_UPDATE_FAILED_ERROR_CODE,s["default"].SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE),void t.trigger(m["default"].DATA_UPDATE_COMPLETED,{sender:this,data:r,currentRepresentation:d,error:E});if(h){for(var x=0;x<h.representationInfo.length;x++)if(_=h.representationInfo[x],_.index===n.index&&_.mediaType===S.getType()){p=!0;break}p||y.addManifestUpdateRepresentationInfo(h,n.id,n.index,n.adaptation.period.index,S.getType(),n.presentationTimeOffset,n.startNumber,n.segmentInfoType)}H()&&(a=!1,f.setPlaybackQuality(S.getType(),S.getStreamInfo(),U(d)),y.updateManifestUpdateInfo(h,{latency:d.segmentAvailabilityRange.end-g.getTime()}),b=T.getCurrentRepresentationSwitch(u),b||F(),t.trigger(m["default"].DATA_UPDATE_COMPLETED,{sender:this,data:r,currentRepresentation:d}))}}function Y(e){e.isDynamic&&K(e.isDynamic)}function z(e){if(e.sender.getStreamProcessor()===S){var t=I.getValue();t.doNotUpdateDVRWindowOnBufferUpdated||B()}}function W(e){if(e.mediaType===S.getType()&&S.getStreamInfo().id===e.streamInfo.id&&e.oldQuality!==e.newQuality){d=k(e.newQuality);var t=f.getThroughputHistory().getAverageThroughput(e.mediaType);isNaN(t)||v.setSavedBitrateSettings(e.mediaType,t),F()}}function X(e){if(e.newDuration){var t=N();if(t&&t.adaptation.period){var n=t.adaptation.period;n.duration=e.newDuration}}}return n={initialize:A,setConfig:x,getData:R,getDataIndex:M,isUpdating:C,updateData:O,getStreamProcessor:D,getCurrentRepresentation:N,getRepresentationForQuality:k,reset:L},w(),n}E.__dashjs_factory_name="RepresentationController",t["default"]=y["default"].getClassFactory(E),e.exports=t["default"]},"8d11":function(e,t,n){"use strict";function r(){return{reconstructFullMetricName:function(e,t,n){var r=e;return t&&(r+="("+t,n&&n.length&&(r+=","+n),r+=")"),r},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}Object.defineProperty(t,"__esModule",{value:!0}),r.__dashjs_factory_name="HandlerHelpers",t["default"]=dashjs.FactoryMaker.getSingletonFactory(r),e.exports=t["default"]},"8d23":function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("4398"),o=r(i),a=n("467b"),s=r(a),u=n("589e"),l=r(u),d=n("3337"),c="undefined"!==typeof window&&window||e,f=c.dashjs;f||(f=c.dashjs={}),f.MediaPlayer=o["default"],f.FactoryMaker=s["default"],f.Debug=l["default"],f.Version=(0,d.getVersionString)(),t["default"]=f,t.MediaPlayer=o["default"],t.FactoryMaker=s["default"],t.Debug=l["default"]}).call(this,n("c8ba"))},"8e01":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("47e4"),s=r(a),u=n("d14c"),l=r(u),d=n("1c67"),c=r(d),f=n("8a43"),h=r(f),p=n("1d48"),m=r(p),g=n("467b"),y=r(g),v=n("df86"),_=n("589e"),E=r(_),b=n("0eda"),T=r(b),S=n("4e7a"),I=r(S),w=n("1962"),x=r(w),A=n("248c"),D=r(A),R=n("4be9"),M=r(R),C=n("85a1"),N=r(C),P=n("6a2d"),L=r(P),O=n("e172"),F=r(O);function B(){var e=40,t=this.context,n=(0,h["default"])(t).getInstance(),r=void 0,i=void 0,a=void 0,u=void 0,d=void 0,f=void 0,p=void 0,g=void 0,y=void 0,_=void 0,b=void 0,S=void 0,w=void 0,A=void 0,R=void 0,C=void 0,P=void 0,O=void 0,B=void 0,k=void 0,U=void 0,H=void 0,j=void 0,K=void 0,V=void 0,q=void 0,G=void 0,Y=void 0,z=void 0,W=void 0,X=void 0,$=void 0,Q=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,oe=void 0,ae=void 0,se=void 0,ue=void 0,le=void 0,de=void 0,ce=void 0;function fe(){i=(0,E["default"])(t).getInstance().getLogger(r),S=(0,D["default"])(t).getInstance(),w=(0,M["default"])(t).getInstance(),b=(0,N["default"])(t).getInstance(),O=(0,T["default"])(t).getInstance(),B=(0,I["default"])(t).getInstance(),rt()}function he(e,n){$e(),q=e,V=n,U.initialize(),u=(0,c["default"])(t).create(),u.setConfig({manifestModel:f,dashManifestModel:p,mediaPlayerModel:Q,manifestLoader:d,errHandler:k}),u.initialize(),w.setConfig({dashManifestModel:p}),pe()}function pe(){n.on(m["default"].PLAYBACK_TIME_UPDATED,ge,this),n.on(m["default"].PLAYBACK_SEEKING,_e,this),n.on(m["default"].PLAYBACK_ERROR,ze,this),n.on(m["default"].PLAYBACK_STARTED,Ee,this),n.on(m["default"].PLAYBACK_PAUSED,be,this),n.on(m["default"].PLAYBACK_ENDED,Ce,this),n.on(m["default"].MANIFEST_UPDATED,Ke,this),n.on(m["default"].BUFFERING_COMPLETED,we,this),n.on(m["default"].STREAM_BUFFERING_COMPLETED,xe,this),n.on(m["default"].MANIFEST_VALIDITY_CHANGED,et,this),n.on(m["default"].TIME_SYNCHRONIZATION_COMPLETED,je,this),n.on(m["default"].WALLCLOCK_TIME_UPDATED,ye,this),n.on(x["default"].METRIC_ADDED,ot,this)}function me(){n.off(m["default"].PLAYBACK_TIME_UPDATED,ge,this),n.off(m["default"].PLAYBACK_SEEKING,_e,this),n.off(m["default"].PLAYBACK_ERROR,ze,this),n.off(m["default"].PLAYBACK_STARTED,Ee,this),n.off(m["default"].PLAYBACK_PAUSED,be,this),n.off(m["default"].PLAYBACK_ENDED,Ce,this),n.off(m["default"].MANIFEST_UPDATED,Ke,this),n.off(m["default"].BUFFERING_COMPLETED,we,this),n.off(m["default"].STREAM_BUFFERING_COMPLETED,xe,this),n.off(m["default"].MANIFEST_VALIDITY_CHANGED,et,this),n.off(m["default"].TIME_SYNCHRONIZATION_COMPLETED,je,this),n.off(m["default"].WALLCLOCK_TIME_UPDATED,ye,this),n.off(x["default"].METRIC_ADDED,ot,this)}function ge(){if(Ve(o["default"].VIDEO)){var e=X.getPlaybackQuality();e&&y.addDroppedFrames(o["default"].VIDEO,e)}}function ye(){if(!(!Q.getJumpGaps()||0===Me()||$.isSeeking()||J||G||Y||z)&&(ae++,ae>=e)){var t=$.getTime();de===t?ve(t):de=t,ae=0}}function ve(e){for(var t=Me(),r=Q.getSmallGapLimit(),o=void 0,a=0;a<t.length;a++){var s=t[a].getBuffer(),u=s.getAllBufferRanges(),l=void 0;if(u&&!(u.length<=1)){for(var d=0;d<u.length;d++)if(e<u.start(d)){l=u.start(d);break}if(l>0){var c=l-e;c>0&&c<=r&&(void 0===o||l>o)&&(o=l)}}}var f=$.getTimeToStreamEnd();void 0===o&&!isNaN(f)&&f<r&&(o=e+f),o>0&&(!isNaN(f)&&o>=e+f?(i.info("Jumping media gap (discontinuity) at time ",e,". Jumping to end of the stream"),n.trigger(m["default"].PLAYBACK_ENDED,{isLast:We().isLast})):(i.info("Jumping media gap (discontinuity) at time ",e,". Jumping to time position",o),$.seek(o,!0,!0)))}function _e(e){var t=De(e.seekTime);ie&&(Te(),re=!1),oe&&Se(),t===j&&le&&le.deactivate(!0),t&&(t!==j||le&&!j.isActive())?(Ge(v.PlayListTrace.END_OF_PERIOD_STOP_REASON),Pe(j,t,e.seekTime)):Ge(v.PlayListTrace.USER_REQUEST_STOP_REASON),Ye(v.PlayList.SEEK_START_REASON)}function Ee(){i.debug("[onPlaybackStarted]"),Z?(Z=!1,Ye(v.PlayList.INITIAL_PLAYOUT_START_REASON)):J&&(J=!1,Ye(v.PlayList.RESUME_FROM_PAUSE_START_REASON),Ie())}function be(e){i.debug("[onPlaybackPaused]"),e.ended||(J=!0,Ge(v.PlayListTrace.USER_REQUEST_STOP_REASON),Ie())}function Te(){i.debug("[toggleEndPeriodTimer] stop end period timer."),clearTimeout(ie),ie=void 0}function Se(){i.debug("[PreloadTimer] stop period preload timer."),clearTimeout(oe),oe=void 0}function Ie(){if(re)if(ie)Te();else{var e=$.getTimeToStreamEnd(),t=e>0?1e3*e:0,r=t<2e3?t/4:t-2e3;i.debug("[toggleEndPeriodTimer] Going to fire preload in",r,"milliseconds"),oe=setTimeout(Ae,r),i.debug("[toggleEndPeriodTimer] start-up of timer to notify PLAYBACK_ENDED event. It will be triggered in",t,"milliseconds"),ie=setTimeout(function(){n.trigger(m["default"].PLAYBACK_ENDED,{isLast:We().isLast})},t)}}function we(e){if(e.sender&&(e.sender.getType()===o["default"].AUDIO||e.sender.getType()===o["default"].VIDEO)){var t=We().isLast;W&&!t&&void 0===ie&&(i.info("[onTrackBufferingCompleted] end of period detected. Track",e.sender.getType(),"has finished"),re=!0,!1===J&&Ie())}}function xe(){var e=We().isLast;W&&e&&(i.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),b.signalEndOfStream(W))}function Ae(){var e=We().isLast;W&&!e&&function(){var e=Ne();ue=j.isProtectionCompatible(e)&&(ce||j.isMediaCodecCompatible(e)),ue&&(i.info("[onStreamCanLoadNext] Preloading next stream"),j.stopEventController(),j.deactivate(!0),e.preload(W,se),le=e,e.getProcessors().forEach(function(t){g.setIndexHandlerTime(t,e.getStartTime())}))}()}function De(e){var t=0,n=null,r=H.length;r>0&&(t+=H[0].getStartTime());for(var i=0;i<r;i++)if(n=H[i],t=parseFloat((t+n.getDuration()).toFixed(5)),e<t)return n;return null}function Re(e,t){for(var n=null,r=0,i=0,o=null,a=H.length,s=0;s<a;s++){if(n=H[s],i=n.getStartTime(),o=n.getDuration(),Number.isFinite(i)&&(r=i),n.getId()===t)return e-r;Number.isFinite(o)&&(r+=o)}return null}function Me(){return j?j.getProcessors():[]}function Ce(){var e=Ne();e?(ne=void 0,te=void 0,Pe(j,e,NaN)):i.debug("StreamController no next stream found"),Ge(e?v.PlayListTrace.END_OF_PERIOD_STOP_REASON:v.PlayListTrace.END_OF_CONTENT_STOP_REASON),ie=void 0,re=!1}function Ne(){if(j){var e=function(){var e=We().start,t=We().duration;return{v:H.filter(function(n){return n.getStreamInfo().start===parseFloat((e+t).toFixed(5))})[0]}}();if("object"===typeof e)return e.v}}function Pe(e,t,r){G||!t||e===t&&t.isActive()||(G=!0,n.trigger(m["default"].PERIOD_SWITCH_STARTED,{fromStreamInfo:e?e.getStreamInfo():null,toStreamInfo:t.getStreamInfo()}),ue=!1,e&&(e.stopEventController(),ue=j.isProtectionCompatible(t)&&(ce||j.isMediaCodecCompatible(t))&&!r||t.getPreloaded(),e.deactivate(ue)),j=t,le=!1,$.initialize(We(),ue),X.getElement()?Fe(r,e,!1,ue):Le(r))}function Le(e){Be(e,ue)}function Oe(e){j&&($.initialize(We()),Fe(e,null,!0,!1))}function Fe(e,t,r,o){var a=void 0;function s(){W&&(i.debug("MediaSource is open!"),window.URL.revokeObjectURL(a),W.removeEventListener("sourceopen",s),W.removeEventListener("webkitsourceopen",s),ke(),t||n.trigger(m["default"].SOURCE_INITIALIZED),r?j.setMediaSource(W):Be(e,o))}W?o?(Be(e,o),t||n.trigger(m["default"].SOURCE_INITIALIZED)):(b.detachMediaSource(X),W.addEventListener("sourceopen",s,!1),W.addEventListener("webkitsourceopen",s,!1),a=b.attachMediaSource(W,X),i.debug("MediaSource attached to element.  Waiting on open...")):(W=b.createMediaSource(),W.addEventListener("sourceopen",s,!1),W.addEventListener("webkitsourceopen",s,!1),a=b.attachMediaSource(W,X),i.debug("MediaSource attached to element.  Waiting on open..."))}function Be(e,t){if(se=j.activate(W,t?se:void 0),ne=qe(o["default"].AUDIO),te=qe(o["default"].VIDEO),se){var r=Object.keys(se);r.length>0&&se[r[0]].changeType&&(i.debug("SourceBuffer changeType method supported. Use it to switch codecs in periods transitions"),ce=!0)}Z||(isNaN(e)?function(){var e=$.getStreamStartTime(!0);t||Me().forEach(function(t){g.setIndexHandlerTime(t,e)})}():$.seek(e)),j.startEventController(),!q&&Z||$.play(),G=!1,n.trigger(m["default"].PERIOD_SWITCH_COMPLETED,{toStreamInfo:We()})}function ke(e){var t=e||We().manifestInfo.duration,n=b.setDuration(W,t);i.debug("Duration successfully set to: "+n)}function Ue(e){for(var t=0,n=H.length;t<n;t++)if(H[t].getId()===e.id)return H[t];return null}function He(){try{var e=g.getStreamsInfo();if(0===e.length)throw new Error("There are no streams");var i=_.getCurrentManifestUpdate(y.getMetricsFor(o["default"].STREAM));y.updateManifestUpdateInfo(i,{currentTime:$.getTime(),buffered:X.getBufferRange(),presentationStartTime:e[0].start,clientTimeOffset:U.getClientTimeOffset()});for(var s=0,d=e.length;s<d;s++){var c=e[s],h=Ue(c);h?h.updateData(c):(h=(0,l["default"])(t).create({manifestModel:f,dashManifestModel:p,mediaPlayerModel:Q,metricsModel:y,dashMetrics:_,manifestUpdater:u,adapter:g,timelineConverter:U,capabilities:a,errHandler:k,baseURLController:w,domStorage:A,abrController:R,playbackController:$,mediaController:C,textController:P,videoModel:X,streamController:r}),H.push(h),h.initialize(c,K)),y.addManifestUpdateStreamInfo(i,c.id,c.index,c.start,c.duration)}if(!j){var v=$.getStartTimeFromUriParameters(),E=null;if(v){var b=isNaN(v.fragS)?v.fragT:v.fragS;E=De(b)}Pe(null,null!==E?E:H[0],NaN)}n.trigger(m["default"].STREAMS_COMPOSED)}catch(T){k.manifestError(T.message,"nostreamscomposed",f.getValue()),k.error(new L["default"](F["default"].MANIFEST_ERROR_ID_NOSTREAMS_CODE,T.message+"nostreamscomposed",f.getValue())),z=!0,it()}}function je(){var e=f.getValue();K&&(n.trigger(m["default"].PROTECTION_CREATED,{controller:K,manifest:e}),K.setMediaElement(X.getElement()),V&&K.setProtectionData(V)),He()}function Ke(e){e.error?(z=!0,it()):function(){var t=e.manifest;g.updatePeriods(t);var n=g.getStreamsInfo(void 0,1)[0],r=g.getMediaInfoForType(n,o["default"].VIDEO)||g.getMediaInfoForType(n,o["default"].AUDIO),a=void 0;r&&(a=p.getUseCalculatedLiveEdgeTimeForAdaptation(g.getDataForMedia(r)),a&&(i.debug("SegmentTimeline detected using calculated Live Edge Time"),Q.setUseManifestDateHeaderTimeSource(!1)));var s=p.getUTCTimingSources(e.manifest),u=!p.getIsDynamic(t)||a?s:s.concat(Q.getUTCTimingSources()),l=B.isHTTPS(e.manifest.url);u.forEach(function(e){e.value.replace(/.*?:\/\//g,"")===Q.getDefaultUtcTimingSource().value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(l?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),l?"https://":"http://"),i.debug("Matching default timing source protocol to manifest protocol: ",e.value))}),w.initialize(t),S.setConfig({metricsModel:y,dashMetrics:_,baseURLController:w}),S.initialize(u,Q.getUseManifestDateHeaderTimeSource())}()}function Ve(e){var t=void 0;if(!e)return t;switch(e){case o["default"].VIDEO:t=te;break;case o["default"].AUDIO:t=ne;break}return t}function qe(e){var t=!1;return Me().forEach(function(n){n.getMediaInfo().type===e&&(t=!0)}),t}function Ge(e,t){t=t||new Date,ee&&(Me().forEach(function(n){var r=n.getScheduleController();r&&r.finalisePlayList(t,e)}),y.addPlayList(ee),ee=null)}function Ye(e){ee=new v.PlayList,ee.start=new Date,ee.mstart=1e3*$.getTime(),ee.starttype=e,Me().forEach(function(e){var t=e.getScheduleController();t&&t.setPlayList(ee)})}function ze(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN";break}Y=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),i.fatal("Video Element Error: "+t),e.error&&i.fatal(e.error),k.mediaSourceError(t),k.error(new L["default"](e.error.code,t)),it()}}function We(){return j?j.getStreamInfo():null}function Xe(e){return H.filter(function(t){return t.getId()===e})[0]}function $e(){if(!d||!d.hasOwnProperty("load")||!U||!U.hasOwnProperty("initialize")||!U.hasOwnProperty("reset")||!U.hasOwnProperty("getClientTimeOffset")||!f||!k||!y||!$)throw new Error("setConfig function has to be called previously")}function Qe(){if(!u||!u.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function Je(e){$e(),d.load(e)}function Ze(e){Qe(),u.setManifest(e)}function et(e){isNaN(e.newDuration)||ke(e.newDuration)}function tt(e){e&&(e.capabilities&&(a=e.capabilities),e.manifestLoader&&(d=e.manifestLoader),e.manifestModel&&(f=e.manifestModel),e.dashManifestModel&&(p=e.dashManifestModel),e.mediaPlayerModel&&(Q=e.mediaPlayerModel),e.protectionController&&(K=e.protectionController),e.adapter&&(g=e.adapter),e.metricsModel&&(y=e.metricsModel),e.dashMetrics&&(_=e.dashMetrics),e.errHandler&&(k=e.errHandler),e.timelineConverter&&(U=e.timelineConverter),e.videoModel&&(X=e.videoModel),e.playbackController&&($=e.playbackController),e.domStorage&&(A=e.domStorage),e.abrController&&(R=e.abrController),e.mediaController&&(C=e.mediaController),e.textController&&(P=e.textController))}function nt(e){V=e}function rt(){H=[],K=null,G=!1,j=null,Y=!1,z=!1,te=void 0,ne=void 0,Z=!0,J=!1,q=!0,ee=null,ie=void 0,re=!1,ae=0}function it(){$e(),S.reset(),Ge(Y||z?v.PlayListTrace.FAILURE_STOP_REASON:v.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,t=H?H.length:0;e<t;e++){var r=H[e];r.reset(Y)}me(),w.reset(),u.reset(),y.clearAllCurrentMetrics(),f.setValue(null),d.reset(),U.reset(),O.reset(),W&&(b.detachMediaSource(X),W=null),X=null,K&&(K.setMediaElement(null),K=null,V=null,f.getValue()&&n.trigger(m["default"].PROTECTION_DESTROYED,{data:f.getValue().url})),n.trigger(m["default"].STREAM_TEARDOWN_COMPLETE),rt()}function ot(e){e.metric===s["default"].DVR_INFO&&e.mediaType===o["default"].AUDIO&&b.setSeekable(W,e.value.range.start,e.value.range.end)}return r={initialize:he,getActiveStreamInfo:We,isTrackTypePresent:Ve,switchToVideoElement:Oe,getStreamById:Xe,getStreamForTime:De,getTimeRelativeToStreamId:Re,load:Je,loadWithManifest:Ze,getActiveStreamProcessors:Me,setConfig:tt,setProtectionData:nt,reset:it},fe(),r}B.__dashjs_factory_name="StreamController",t["default"]=y["default"].getSingletonFactory(B),e.exports=t["default"]},"8e4c":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("8a43"),o=r(i),a=n("1d48"),s=r(a),u=n("467b"),l=r(u),d=n("41ee"),c=r(d),f=n("589e"),h=r(f),p="loading",m="executed",g="canceled",y="failed";function v(e){e=e||{};var t=this.context,n=(0,o["default"])(t).getInstance(),r=e.metricsModel,i=e.fragmentLoader,a=void 0,u=void 0,l=void 0,d=void 0,f=void 0;function g(){u=(0,h["default"])(t).getInstance().getLogger(a),k(),n.on(s["default"].LOADING_COMPLETED,O,a),n.on(s["default"].LOADING_DATA_PROGRESS,F,a),n.on(s["default"].LOADING_ABANDONED,B,a)}function v(e){l=e}function _(){return l}function E(e){var t=function(e,t){return e.action===c["default"].ACTION_COMPLETE&&e.action===t.action},n=function(e,t){return!isNaN(e.index)&&e.startTime===t.startTime&&e.adaptationIndex===t.adaptationIndex&&e.type===t.type},r=function(e,t){return isNaN(e.index)&&isNaN(t.index)&&e.quality===t.quality},i=function(i){var o=!1;return i.some(function(i){if(n(e,i)||r(e,i)||t(e,i))return o=!0,o}),o};return!!e&&i(d)}function b(e){var t=!1,n=0,r=void 0;if(t=E(e),!t)for(n=0;n<f.length;n++)r=f[n],e.url===r.url&&e.startTime===r.startTime&&(t=!0);return t}function T(e){var t=e?e.state instanceof Array?e.state:[e.state]:[],n=[];return t.forEach(function(t){var r=P(t);n=n.concat(N(r,e))}),n}function S(e){return isNaN(e.duration)?.25:Math.min(e.duration/8,.5)}function I(e){d=d.filter(function(t){var n=S(t);return isNaN(t.startTime)||void 0!==e&&t.startTime>=e-n})}function w(e){d=d.filter(function(t){return isNaN(t.startTime)||void 0!==e&&t.startTime+t.duration<e})}function x(e,t){t<=e+.5||(d=d.filter(function(n){var r=S(n);return isNaN(n.startTime)||n.startTime>=t-r||isNaN(n.duration)||n.startTime+n.duration<=e+r}))}function A(e,t){if(e&&0!==e.length){for(var n=0,r=0,i=e.length;r<i;r++)x(n,e.start(r)),n=e.end(r);t>0&&x(n,t)}else I()}function D(){i.abort(),f=[]}function R(e){switch(e.action){case c["default"].ACTION_COMPLETE:d.push(e),L(e,m),u.debug("executeRequest trigger STREAM_COMPLETED"),n.trigger(s["default"].STREAM_COMPLETED,{request:e,fragmentModel:this});break;case c["default"].ACTION_DOWNLOAD:L(e,p),f.push(e),M(e);break;default:u.warn("Unknown request action.")}}function M(e){n.trigger(s["default"].FRAGMENT_LOADING_STARTED,{sender:a,request:e}),i.load(e)}function C(e,t,n){for(var r=e.length-1,i=r;i>=0;i--){var o=e[i],a=o.startTime,s=a+o.duration;if(n=isNaN(n)?S(o):n,!isNaN(a)&&!isNaN(s)&&t+n>=a&&t-n<s||isNaN(a)&&isNaN(t))return o}return null}function N(e,t){return t.hasOwnProperty("time")?[C(e,t.time,t.threshold)]:e.filter(function(e){for(var n in t)if("state"!==n&&t.hasOwnProperty(n)&&e[n]!=t[n])return!1;return!0})}function P(e){var t=void 0;switch(e){case p:t=f;break;case m:t=d;break;default:t=[]}return t}function L(e,t){r.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t),r.addRequestsQueue(e.mediaType,f,d)}function O(e){e.sender===i&&(f.splice(f.indexOf(e.request),1),e.response&&!e.error&&d.push(e.request),L(e.request,e.error?y:m),n.trigger(s["default"].FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this}))}function F(e){e.sender===i&&n.trigger(s["default"].FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this})}function B(e){e.sender===i&&n.trigger(s["default"].FRAGMENT_LOADING_ABANDONED,{streamProcessor:this.getStreamProcessor(),request:e.request,mediaType:e.mediaType})}function k(){d=[],f=[]}function U(){n.off(s["default"].LOADING_COMPLETED,O,this),n.off(s["default"].LOADING_DATA_PROGRESS,F,this),n.off(s["default"].LOADING_ABANDONED,B,this),i&&i.reset(),k()}function H(e){d.push(e)}return a={setStreamProcessor:v,getStreamProcessor:_,getRequests:T,isFragmentLoaded:E,isFragmentLoadedOrPending:b,removeExecutedRequestsBeforeTime:I,removeExecutedRequestsAfterTime:w,syncExecutedRequestsWithBufferedRange:A,abortRequests:D,executeRequest:R,reset:U,addExecutedRequest:H},g(),a}v.__dashjs_factory_name="FragmentModel";var _=l["default"].getClassFactory(v);_.FRAGMENT_MODEL_LOADING=p,_.FRAGMENT_MODEL_EXECUTED=m,_.FRAGMENT_MODEL_CANCELED=g,_.FRAGMENT_MODEL_FAILED=y,l["default"].updateClassFactory(v.__dashjs_factory_name,_),t["default"]=_,e.exports=t["default"]},"8e60":function(e,t,n){e.exports=!n("294c")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"8edf":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0};t["default"]=i,e.exports=t["default"]},"8f60":function(e,t,n){"use strict";var r=n("a159"),i=n("aebd"),o=n("45f2"),a={};n("35e8")(a,n("5168")("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},9003:function(e,t,n){var r=n("6b4c");e.exports=Array.isArray||function(e){return"Array"==r(e)}},9009:function(e,t,n){(function(e,t,n,r,i){function o(e,t,n,r){var i=r&&"seq"===r.timeContainer,a=0;r&&(a=i&&n?n.end:r.begin),t.begin=t.explicit_begin?t.explicit_begin+a:a;var s=t.begin,u=null;for(var l in t.sets)o(e,t.sets[l],u,t),s="seq"===t.timeContainer?t.sets[l].end:Math.max(s,t.sets[l].end),u=t.sets[l];if("contents"in t)for(var d in t.contents)o(e,t.contents[d],u,t),s="seq"===t.timeContainer?t.contents[d].end:Math.max(s,t.contents[d].end),u=t.contents[d];else s=i?t.begin:Number.POSITIVE_INFINITY;null!==t.explicit_end&&null!==t.explicit_dur?t.end=Math.min(t.begin+t.explicit_dur,a+t.explicit_end):null===t.explicit_end&&null!==t.explicit_dur?t.end=t.begin+t.explicit_dur:null!==t.explicit_end&&null===t.explicit_dur?t.end=a+t.explicit_end:t.end=s,delete t.explicit_begin,delete t.explicit_dur,delete t.explicit_end,e._registerEvent(t)}function a(e){this.node=e}function s(){this.events=[],this.head=null,this.body=null}function u(){this.styling=null,this.layout=null}function l(){this.styles={}}function d(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function c(){this.regions={}}function f(e){this.kind=e}function h(e){this.id=e}function p(e){this.regionID=e}function m(e){this.styleAttrs=e}function g(e){this.sets=e}function y(e){this.contents=e}function v(e,t,n){this.explicit_begin=e,this.explicit_end=t,this.explicit_dur=n}function _(){f.call(this,"body")}function E(){f.call(this,"div")}function b(){f.call(this,"p")}function T(){f.call(this,"span")}function S(){f.call(this,"span")}function I(){f.call(this,"br")}function w(){}function x(){}function A(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function D(e){return e&&"region"in e.attributes?e.attributes.region.value:""}function R(e,t){var n=e&&"timeContainer"in e.attributes?e.attributes.timeContainer.value:null;return n&&"par"!==n?"seq"===n?"seq":(V(t,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}function M(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function C(e,t){var n={};if(null!==e)for(var i in e.attributes){var o=e.attributes[i].uri+" "+e.attributes[i].local,a=r.byQName[o];if(void 0!==a){var s=a.parse(e.attributes[i].value);null!==s?(n[o]=s,a===r.byName.zIndex&&K(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):V(t,"Cannot parse styling attribute "+o+" --\x3e "+e.attributes[i].value)}}return n}function N(e,t,n){for(var r in e.attributes)if(e.attributes[r].uri===t&&e.attributes[r].local===n)return e.attributes[r].value;return null}function P(e,t){var r=N(e,n.ns_ittp,"aspectRatio"),i=null;if(null!==r){var o=/(\d+) (\d+)/,a=o.exec(r);if(null!==a){var s=parseInt(a[1]),u=parseInt(a[2]);0!==s&&0!==u?i=s/u:V(t,"Illegal aspectRatio values (ignoring)")}else V(t,"Malformed aspectRatio attribute (ignoring)")}return i}function L(e,t){var r=N(e,n.ns_ttp,"cellResolution"),i=15,o=32;if(null!==r){var a=/(\d+) (\d+)/,s=a.exec(r);null!==s?(o=parseInt(s[1]),i=parseInt(s[2])):K(t,"Malformed cellResolution value (using initial value instead)")}return{w:o,h:i}}function O(e,t){var r,i=N(e,n.ns_ttp,"frameRate"),o=30;if(null!==i){var a=/(\d+)/;r=a.exec(i),null!==r?o=parseInt(r[1]):K(t,"Malformed frame rate attribute (using initial value instead)")}var s=N(e,n.ns_ttp,"frameRateMultiplier"),u=1;if(null!==s){var l=/(\d+) (\d+)/;r=l.exec(s),null!==r?u=parseInt(r[1])/parseInt(r[2]):K(t,"Malformed frame rate multiplier attribute (using initial value instead)")}var d=u*o,c=1,f=N(e,n.ns_ttp,"tickRate");if(null===f)null!==i&&(c=d);else{var h=/(\d+)/;r=h.exec(f),null!==r?c=parseInt(r[1]):K(t,"Malformed tick rate attribute (using initial value instead)")}return{effectiveFrameRate:d,tickRate:c}}function F(e,t){var r=N(e,n.ns_tts,"extent");if(null===r)return null;var o=r.split(" ");if(2!==o.length)return K(t,"Malformed extent (ignoring)"),null;var a=i.parseLength(o[0]),s=i.parseLength(o[1]);return s&&a?{h:s,w:a}:(K(t,"Malformed extent values (ignoring)"),null)}function B(e,t,n){var r,i=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,o=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/,a=/^(\d+(?:\.\d+)?)f$/,s=/^(\d+(?:\.\d+)?)t$/,u=/^(\d+(?:\.\d+)?)ms$/,l=/^(\d+(?:\.\d+)?)s$/,d=/^(\d+(?:\.\d+)?)h$/,c=/^(\d+(?:\.\d+)?)m$/,f=null;return null!==(r=a.exec(n))?null!==t&&(f=parseFloat(r[1])/t):null!==(r=s.exec(n))?null!==e&&(f=parseFloat(r[1])/e):null!==(r=u.exec(n))?f=parseFloat(r[1])/1e3:null!==(r=l.exec(n))?f=parseFloat(r[1]):null!==(r=d.exec(n))?f=3600*parseFloat(r[1]):null!==(r=c.exec(n))?f=60*parseFloat(r[1]):null!==(r=i.exec(n))?f=3600*parseInt(r[1])+60*parseInt(r[2])+parseFloat(r[3]):null!==(r=o.exec(n))&&null!==t&&(f=3600*parseInt(r[1])+60*parseInt(r[2])+parseInt(r[3])+(null===r[4]?0:parseInt(r[4])/t)),f}function k(e,t,n,r){var i=null;n&&"begin"in n.attributes&&(i=B(e.tickRate,e.effectiveFrameRate,n.attributes.begin.value),null===i&&K(r,"Malformed begin value "+n.attributes.begin.value+" (using 0)"));var o=null;n&&"dur"in n.attributes&&(o=B(e.tickRate,e.effectiveFrameRate,n.attributes.dur.value),null===o&&K(r,"Malformed dur value "+n.attributes.dur.value+" (ignoring)"));var a=null;return n&&"end"in n.attributes&&(a=B(e.tickRate,e.effectiveFrameRate,n.attributes.end.value),null===a&&K(r,"Malformed end value (ignoring)")),{explicit_begin:i,explicit_end:a,explicit_dur:o}}function U(e,t,n){while(t.styleRefs.length>0){var r=t.styleRefs.pop();r in e.styles?(U(e,e.styles[r],n),j(e.styles[r].styleAttrs,t.styleAttrs)):V(n,"Non-existant style id referenced")}}function H(e,t,n,r){for(var i=t.length-1;i>=0;i--){var o=t[i];o in e.styles?j(e.styles[o].styleAttrs,n):V(r,"Non-existant style id referenced")}}function j(e,t){for(var n in e)n in t||(t[n]=e[n])}function K(e,t){if(e&&e.warn&&e.warn(t))throw t}function V(e,t){if(e&&e.error&&e.error(t))throw t}function q(e,t){throw e&&e.fatal&&e.fatal(t),t}function G(e,t){var n,r=0,i=e.length-1;while(r<=i){n=Math.floor((r+i)/2);var o=e[n];if(o<t)r=n+1;else{if(!(o>t))return{found:!0,index:n};i=n-1}}return{found:!1,index:r}}e.fromXML=function(e,r,i){var f=t.parser(!0,{xmlns:!0}),h=[],p=[],m=[],g=0,y=null;f.onclosetag=function(e){if(h[0]instanceof l)for(var t in h[0].styles)U(h[0],h[0].styles[t],r);else if(h[0]instanceof b||h[0]instanceof T){if(h[0].contents.length>1){var o,s=[h[0].contents[0]];for(o=1;o<h[0].contents.length;o++)h[0].contents[o]instanceof S&&s[s.length-1]instanceof S?s[s.length-1].text+=h[0].contents[o].text:s.push(h[0].contents[o]);h[0].contents=s}h[0]instanceof T&&1===h[0].contents.length&&h[0].contents[0]instanceof S&&(h[0].text=h[0].contents[0].text,delete h[0].contents)}else h[0]instanceof a&&(h[0].node.uri===n.ns_tt&&"metadata"===h[0].node.local?g--:g>0&&i&&"onCloseTag"in i&&i.onCloseTag());m.shift(),p.shift(),h.shift()},f.ontext=function(e){if(void 0===h[0]);else if(h[0]instanceof T||h[0]instanceof b){var t=new S;t.initFromText(y,h[0],e,m[0],r),h[0].contents.push(t)}else h[0]instanceof a&&g>0&&i&&"onText"in i&&i.onText(e)},f.onopentag=function(e){var t=e.attributes["xml:space"];t?m.unshift(t.value):0===m.length?m.unshift("default"):m.unshift(m[0]);var o=e.attributes["xml:lang"];if(o?p.unshift(o.value):0===p.length?p.unshift(""):p.unshift(p[0]),e.uri===n.ns_tt)if("tt"===e.local)null!==y&&q(r,"Two <tt> elements at ("+this.line+","+this.column+")"),y=new s,y.initFromNode(e,r),h.unshift(y);else if("head"===e.local)h[0]instanceof s||q(r,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),null!==y.head&&q("Second <head> element at ("+this.line+","+this.column+")"),y.head=new u,h.unshift(y.head);else if("styling"===e.local)h[0]instanceof u||q(r,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),null!==y.head.styling&&q("Second <styling> element at ("+this.line+","+this.column+")"),y.head.styling=new l,h.unshift(y.head.styling);else if("style"===e.local){var f;h[0]instanceof l?(f=new d,f.initFromNode(e,r),f.id?y.head.styling.styles[f.id]=f:V(r,"<style> element missing @id attribute"),h.unshift(f)):h[0]instanceof w?(f=new d,f.initFromNode(e,r),j(f.styleAttrs,h[0].styleAttrs),h.unshift(f)):q(r,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("layout"===e.local)h[0]instanceof u||q(r,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),null!==y.head.layout&&q(r,"Second <layout> element at "+this.line+","+this.column+")"),y.head.layout=new c,h.unshift(y.head.layout);else if("region"===e.local){h[0]instanceof c||q(r,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var v=new w;v.initFromNode(y,e,r),!v.id||v.id in y.head.layout.regions?V(r,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):y.head.layout.regions[v.id]=v,h.unshift(v)}else if("body"===e.local){h[0]instanceof s||q(r,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==y.body&&q(r,"Second <body> element at "+this.line+","+this.column+")");var S=new _;S.initFromNode(y,e,r),y.body=S,h.unshift(S)}else if("div"===e.local){h[0]instanceof E||h[0]instanceof _||q(r,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var A=new E;A.initFromNode(y,h[0],e,r),h[0].contents.push(A),h.unshift(A)}else if("p"===e.local){h[0]instanceof E||q(r,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var D=new b;D.initFromNode(y,h[0],e,r),h[0].contents.push(D),h.unshift(D)}else if("span"===e.local){h[0]instanceof T||h[0]instanceof b||q(r,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var R=new T;R.initFromNode(y,h[0],e,m[0],r),h[0].contents.push(R),h.unshift(R)}else if("br"===e.local){h[0]instanceof T||h[0]instanceof b||q(r,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var M=new I;M.initFromNode(y,h[0],e,r),h[0].contents.push(M),h.unshift(M)}else if("set"===e.local){h[0]instanceof T||h[0]instanceof b||h[0]instanceof E||h[0]instanceof _||h[0]instanceof w||h[0]instanceof I||q(r,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var C=new x;C.initFromNode(y,h[0],e,r),h[0].sets.push(C),h.unshift(C)}else h.unshift(new a(e));else h.unshift(new a(e));if(h[0]instanceof a)if(e.uri===n.ns_tt&&"metadata"===e.local)g++;else if(g>0&&i&&"onOpenTag"in i){var N=[];for(var P in e.attributes)N[e.attributes[P].uri+" "+e.attributes[P].local]={uri:e.attributes[P].uri,local:e.attributes[P].local,value:e.attributes[P].value};i.onOpenTag(e.uri,e.local,N)}},f.write(e).close(),null!==y.head?delete y.head.styling:y.head=new u,null===y.head.layout&&(y.head.layout=new c);var v=!1;for(var A in y.head.layout.regions){v=!0;break}if(!v){var D=w.prototype.createDefaultRegion();y.head.layout.regions[D.id]=D}for(var R in y.head.layout.regions)o(y,y.head.layout.regions[R],null,null);return y.body&&o(y,y.body,null,null),y},s.prototype.initFromNode=function(e,t){this.cellResolution=L(e,t);var r=O(e,t);this.effectiveFrameRate=r.effectiveFrameRate,this.tickRate=r.tickRate,this.aspectRatio=P(e,t);var i=N(e,n.ns_ttp,"timeBase");null!==i&&"media"!==i&&q(t,"Unsupported time base");var o=F(e,t);null===o?this.pxDimensions={h:480,w:640}:("px"===o.h.unit&&"px"===o.w.unit||q(t,"Extent on TT must be in px or absent"),this.pxDimensions={h:o.h.value,w:o.w.value})},s.prototype._registerEvent=function(e){if(!(e.end<=e.begin)){var t=G(this.events,e.begin);if(t.found||this.events.splice(t.index,0,e.begin),e.end!==Number.POSITIVE_INFINITY){var n=G(this.events,e.end);n.found||this.events.splice(n.index,0,e.end)}}},s.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},s.prototype.getMediaTimeEvents=function(){return this.events},d.prototype.initFromNode=function(e,t){this.id=A(e),this.styleAttrs=C(e,t),this.styleRefs=M(e)},h.prototype.initFromNode=function(e,t,n,r){this.id=A(n)},p.prototype.initFromNode=function(e,t,n,r){this.regionID=D(n)},m.prototype.initFromNode=function(e,t,n,r){this.styleAttrs=C(n,r),null!==e.head&&null!==e.head.styling&&H(e.head.styling,M(n),this.styleAttrs,r)},g.prototype.initFromNode=function(e,t,n,r){this.sets=[]},y.prototype.initFromNode=function(e,t,n,r){this.contents=[]},v.prototype.initFromNode=function(e,t,n,r){var i=k(e,t,n,r);this.explicit_begin=i.explicit_begin,this.explicit_end=i.explicit_end,this.explicit_dur=i.explicit_dur,this.timeContainer=R(n,r)},_.prototype.initFromNode=function(e,t,n){m.prototype.initFromNode.call(this,e,null,t,n),v.prototype.initFromNode.call(this,e,null,t,n),g.prototype.initFromNode.call(this,e,null,t,n),p.prototype.initFromNode.call(this,e,null,t,n),y.prototype.initFromNode.call(this,e,null,t,n)},E.prototype.initFromNode=function(e,t,n,r){m.prototype.initFromNode.call(this,e,t,n,r),v.prototype.initFromNode.call(this,e,t,n,r),g.prototype.initFromNode.call(this,e,t,n,r),p.prototype.initFromNode.call(this,e,t,n,r),y.prototype.initFromNode.call(this,e,t,n,r)},b.prototype.initFromNode=function(e,t,n,r){m.prototype.initFromNode.call(this,e,t,n,r),v.prototype.initFromNode.call(this,e,t,n,r),g.prototype.initFromNode.call(this,e,t,n,r),p.prototype.initFromNode.call(this,e,t,n,r),y.prototype.initFromNode.call(this,e,t,n,r)},T.prototype.initFromNode=function(e,t,n,r,i){m.prototype.initFromNode.call(this,e,t,n,i),v.prototype.initFromNode.call(this,e,t,n,i),g.prototype.initFromNode.call(this,e,t,n,i),p.prototype.initFromNode.call(this,e,t,n,i),y.prototype.initFromNode.call(this,e,t,n,i),this.space=r},S.prototype.initFromText=function(e,t,n,r,i){v.prototype.initFromNode.call(this,e,t,null,i),this.text=n,this.space=r},I.prototype.initFromNode=function(e,t,n,r){p.prototype.initFromNode.call(this,e,t,n,r),v.prototype.initFromNode.call(this,e,t,n,r)},w.prototype.createDefaultRegion=function(){var e=new w;return h.call(e,""),m.call(e,{}),g.call(e,[]),v.call(e,0,Number.POSITIVE_INFINITY,null),e},w.prototype.initFromNode=function(e,t,n){h.prototype.initFromNode.call(this,e,null,t,n),m.prototype.initFromNode.call(this,e,null,t,n),v.prototype.initFromNode.call(this,e,null,t,n),g.prototype.initFromNode.call(this,e,null,t,n),null!==e.head&&null!==e.head.styling&&H(e.head.styling,M(t),this.styleAttrs,n)},x.prototype.initFromNode=function(e,t,n,r){v.prototype.initFromNode.call(this,e,t,n,r);var i=C(n,r);for(var o in this.qname=null,this.value=null,i){if(this.qname){V(r,"More than one style specified on set");break}this.qname=o,this.value=i[o]}}})(t,"undefined"===typeof sax?n("faef"):sax,"undefined"===typeof imscNames?n("597c"):imscNames,"undefined"===typeof imscStyles?n("faf0"):imscStyles,"undefined"===typeof imscUtils?n("ff7d"):imscUtils)},"90c5":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("467b"),s=r(a);function u(e){e=e||{};var t=e.dashMetrics,n=e.metricsModel,r=e.mediaPlayerModel,i=e.textController,a=e.abrController;function s(){}function u(e,r){if(!e)return!0;var i=t.getCurrentBufferLevel(n.getReadOnlyMetricsFor(e.getType()));return i<l(e,r)}function l(e,s){var u=NaN;if(!e)return u;var l=e.getType(),d=e.getRepresentationInfo();if(l===o["default"].FRAGMENTED_TEXT)u=i.isTextEnabled()?d.fragmentDuration:0;else if(l===o["default"].AUDIO&&s){var c=t.getCurrentBufferLevel(n.getReadOnlyMetricsFor(o["default"].VIDEO));u=isNaN(d.fragmentDuration)?c:Math.max(c,d.fragmentDuration)}else{var f=d.mediaInfo.streamInfo;if(a.isPlayingAtTopQuality(f)){var h=f.manifestInfo.duration>=r.getLongFormContentDurationThreshold();u=h?r.getBufferTimeAtTopQualityLongForm():r.getBufferTimeAtTopQuality()}else u=r.getStableBufferTime()}return u}var d={execute:u,getBufferTarget:l};return s(),d}u.__dashjs_factory_name="BufferLevelRule",t["default"]=s["default"].getClassFactory(u),e.exports=t["default"]},9138:function(e,t,n){e.exports=n("35e8")},9152:function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,d=-7,c=n?i-1:0,f=n?-1:1,h=e[t+c];for(c+=f,o=h&(1<<-d)-1,h>>=-d,d+=s;d>0;o=256*o+e[t+c],c+=f,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=r;d>0;a=256*a+e[t+c],c+=f,d-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=l}return(h?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,d=(1<<l)-1,c=d>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+c>=1?f/u:f*Math.pow(2,1-c),t*u>=2&&(a++,u/=2),a+c>=d?(s=0,a=d):a+c>=1?(s=(t*u-1)*Math.pow(2,i),a+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+h]=255&a,h+=p,a/=256,l-=8);e[n+h-p]|=128*m}},"931f":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("9485"),s=r(a),u=8;function l(){var e=[],t=[];function n(n){n.newValue===s["default"].NO_CHANGE&&(n.newValue=n.oldValue),e[n.oldValue]||(e[n.oldValue]={noDrops:0,drops:0,dropSize:0});var r=n.newValue-n.oldValue,i=r<0?1:0,o=i?-r:0,a=i?0:1;if(e[n.oldValue].drops+=i,e[n.oldValue].dropSize+=o,e[n.oldValue].noDrops+=a,t.push({idx:n.oldValue,noDrop:a,drop:i,dropSize:o}),t.length>u){var l=t.shift();e[l.idx].drops-=l.drop,e[l.idx].dropSize-=l.dropSize,e[l.idx].noDrops-=l.noDrop}}function r(){return e}function i(){e=[],t=[]}return{push:n,getSwitchRequests:r,reset:i}}l.__dashjs_factory_name="SwitchRequestHistory";var d=o["default"].getClassFactory(l);t["default"]=d,e.exports=t["default"]},9485:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=-1,s={DEFAULT:.5,STRONG:1,WEAK:0};function u(e,t,n){var r=void 0,i=void 0,o=void 0,u=void 0;function l(e){var t=s.DEFAULT;return e!==s.DEFAULT&&e!==s.STRONG&&e!==s.WEAK||(t=e),t}return i=void 0===e?a:e,o=l(n),u=void 0===t?null:t,r={quality:i,reason:u,priority:o},r}u.__dashjs_factory_name="SwitchRequest";var l=o["default"].getClassFactory(u);l.NO_CHANGE=a,l.PRIORITY=s,o["default"].updateClassFactory(u.__dashjs_factory_name,l),t["default"]=l,e.exports=t["default"]},"95b9":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN};t["default"]=i,e.exports=t["default"]},"966d":function(e,t,n){"use strict";(function(t){function n(e,n,r,i){if("function"!==typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:o=new Array(s-1),a=0;while(a<o.length)o[a++]=arguments[a];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:n}:e.exports=t}).call(this,n("4362"))},"96cf":function(e,t){!function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",l="object"===typeof e,d=t.regeneratorRuntime;if(d)l&&(e.exports=d);else{d=t.regeneratorRuntime=l?e.exports:{},d.wrap=E;var c="suspendedStart",f="suspendedYield",h="executing",p="completed",m={},g={};g[a]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(N([])));v&&v!==r&&i.call(v,a)&&(g=v);var _=I.prototype=T.prototype=Object.create(g);S.prototype=_.constructor=I,I.constructor=S,I[u]=S.displayName="GeneratorFunction",d.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},d.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,I):(e.__proto__=I,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(_),e},d.awrap=function(e){return{__await:e}},w(x.prototype),x.prototype[s]=function(){return this},d.AsyncIterator=x,d.async=function(e,t,n,r){var i=new x(E(e,t,n,r));return d.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},w(_),_[u]="Generator",_[a]=function(){return this},_.toString=function(){return"[object Generator]"},d.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},d.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return s.type="throw",s.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:N(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),m}}}function E(e,t,n,r){var i=t&&t.prototype instanceof T?t:T,o=Object.create(i.prototype),a=new C(r||[]);return o._invoke=A(e,n,a),o}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function T(){}function S(){}function I(){}function w(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function x(e){function t(n,r,o,a){var s=b(e[n],e,r);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"===typeof l&&i.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(l).then(function(e){u.value=e,o(u)},function(e){return t("throw",e,o,a)})}a(s.arg)}var n;function r(e,r){function i(){return new Promise(function(n,i){t(e,r,n,i)})}return n=n?n.then(i,i):i()}this._invoke=r}function A(e,t,n){var r=c;return function(i,o){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return P()}n.method=i,n.arg=o;while(1){var a=n.delegate;if(a){var s=D(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===c)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=b(e,t,n);if("normal"===u.type){if(r=n.done?p:f,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}function D(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,D(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=b(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function N(e){if(e){var t=e[a];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){while(++r<e.length)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:n,done:!0}}}(function(){return this||"object"===typeof self&&self}()||Function("return this")())},9859:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("e172"),o=r(i),a=n("8a43"),s=r(a),u=n("1d48"),l=r(u),d=n("5d1b"),c=r(d),f=n("15a2"),h=r(f),p=n("3cd4"),m=r(p),g=n("467b"),y=r(g),v=n("6a2d"),_=r(v),E=n("2f4d"),b=r(E);function T(){var e=this.context,t=(0,s["default"])(e).getInstance(),n=void 0,r=void 0,i=void 0,a=void 0,u=void 0,d=void 0;function f(){i=(0,c["default"])(e).create({updateEventName:l["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:l["default"].SERVICE_LOCATION_BLACKLIST_ADD}),a=(0,m["default"])(e).create({blacklistController:i}),u=(0,h["default"])(e).create({blacklistController:i}),d=a}function p(e){e.selector&&(d=e.selector),e.dashManifestModel&&(n=e.dashManifestModel)}function g(){if(!n||!n.hasOwnProperty("getIsDVB"))throw new Error(b["default"].MISSING_CONFIG_ERROR)}function y(e){g(),d=n.getIsDVB(e)?u:a}function v(e){if(e){var n=e.baseUrls,r=e.selectedIdx;if(!isNaN(r))return n[r];var i=d.select(n);return i?(e.selectedIdx=n.indexOf(i),i):(t.trigger(l["default"].URL_RESOLUTION_FAILED,{error:new _["default"](o["default"].URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,o["default"].URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(d===a&&E()))}}function E(){i.reset()}return r={chooseSelectorFromManifest:y,select:v,reset:E,setConfig:p},f(),r}T.__dashjs_factory_name="BaseURLSelector",t["default"]=y["default"].getClassFactory(T),e.exports=t["default"]},9893:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.loadingRequests=[],this.executedRequests=[]};t["default"]=i,e.exports=t["default"]},"9ad3":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n("e09e"),s=i(a),u=function(){function e(){o(this,e),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}return r(e,null,[{key:"hasInitialization",value:function(e){return null!==e.initialization||null!==e.range}},{key:"hasSegments",value:function(e){return e.segmentInfoType!==s["default"].BASE_URL&&e.segmentInfoType!==s["default"].SEGMENT_BASE&&!e.indexRange}}]),e}();t["default"]=u,e.exports=t["default"]},"9b43":function(e,t,n){var r=n("d8e8");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},"9c6c":function(e,t,n){var r=n("2b4c")("unscopables"),i=Array.prototype;void 0==i[r]&&n("32e9")(i,r,{}),e.exports=function(e){i[r][e]=!0}},"9c80":function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},"9c97":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("0d27"),o=r(i);function a(e){e=e||{};var t=[],n=void 0,r=this.context,i=e.eventBus,a=e.events,s=(0,o["default"])(r).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});function u(e){t.forEach(function(t){t.handleNewMetric(e.metric,e.value,e.mediaType)})}function l(e,r){e.split(",").forEach(function(e,n,i){var o=void 0;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){var a=i[n+1];a&&-1===a.indexOf("(")&&-1!==a.indexOf(")")&&(e+=","+a,delete i[n+1])}o=s.create(e,r),o&&t.push(o)}),i.on(a.METRIC_ADDED,u,n),i.on(a.METRIC_UPDATED,u,n)}function d(){i.off(a.METRIC_ADDED,u,n),i.off(a.METRIC_UPDATED,u,n),t.forEach(function(e){return e.reset()}),t=[]}return n={initialize:l,reset:d},n}a.__dashjs_factory_name="MetricsHandlersController",t["default"]=dashjs.FactoryMaker.getClassFactory(a),e.exports=t["default"]},"9def":function(e,t,n){var r=n("4588"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},"9e1e":function(e,t,n){e.exports=!n("79e5")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"9ee1":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null};i.DEFAULT_ID="defaultId",t["default"]=i,e.exports=t["default"]},"9f79":function(e,t,n){var r=n("f772");e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},a083:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("2f4d"),s=r(a),u=n("5beb");function l(e,t){e=e||{};var n=e.timelineConverter,r=void 0;function i(){if(!n||!n.hasOwnProperty("calcMediaTimeFromPresentationTime")||!n.hasOwnProperty("calcSegmentAvailabilityRange"))throw new Error(s["default"].MISSING_CONFIG_ERROR)}function o(e,r,o,a){if(i(),!e)throw new Error("no representation");void 0===r&&(r=null);var s=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,l=s.SegmentTimeline,d=s.SegmentURL_asArray,c=e.availableSegmentsNumber>0,f=void 0;f=a||(o>-1||null!==r?10:1/0);var h=0,p=0,m=-1,g=[],y=null,v=void 0,_=void 0,E=void 0,b=void 0,T=void 0,S=void 0,I=void 0,w=void 0,x=void 0,A=void 0,D=void 0,R=function(r,i){var o=s.media,a=r.mediaRange;return d&&(o=d[i].media||"",a=d[i].mediaRange),(0,u.getTimeBasedSegment)(n,t,e,h,r.d,D,o,a,m,r.tManifest)};for(D=e.timescale,v=l.S_asArray,A=o,null!==r&&(y=n.calcMediaTimeFromPresentationTime(r,e)),E=0,b=v.length;E<b;E++){if(_=v[E],S=0,_.hasOwnProperty("r")&&(S=_.r),_.hasOwnProperty("t")&&(h=_.t,p=h/D),S<0){if(w=v[E+1],w&&w.hasOwnProperty("t"))I=w.t/D;else{var M=e.segmentAvailabilityRange?e.segmentAvailabilityRange.end:n.calcSegmentAvailabilityRange(e,t).end;I=n.calcMediaTimeFromPresentationTime(M,e),e.segmentDuration=_.d/D}S=Math.ceil((I-p)/(_.d/D))-1}if(x){if(c)break;m+=S+1}else for(T=0;T<=S;T++)if(m++,g.length>f){if(x=!0,c)break}else null!==y?p>=y-_.d/D*1.5&&g.push(R(_,m)):m>=A&&g.push(R(_,m)),h+=_.d,p=h/D}return c||(e.availableSegmentsNumber=m+1),g}return r={getSegments:o},r}l.__dashjs_factory_name="TimelineSegmentsGetter";var d=o["default"].getClassFactory(l);t["default"]=d,e.exports=t["default"]},a159:function(e,t,n){var r=n("e4ae"),i=n("7e90"),o=n("1691"),a=n("5559")("IE_PROTO"),s=function(){},u="prototype",l=function(){var e,t=n("1ec9")("iframe"),r=o.length,i="<",a=">";t.style.display="none",n("32fc").appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+a+"document.F=Object"+i+"/script"+a),e.close(),l=e.F;while(r--)delete l[u][o[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[u]=r(e),n=new s,s[u]=null,n[a]=e):n=l(),void 0===t?n:i(n,t)}},a1ce:function(e,t,n){var r=n("63b6"),i=n("25eb"),o=n("294c"),a=n("e692"),s="["+a+"]",u="",l=RegExp("^"+s+s+"*"),d=RegExp(s+s+"*$"),c=function(e,t,n){var i={},s=o(function(){return!!a[e]()||u[e]()!=u}),l=i[e]=s?t(f):a[e];n&&(i[n]=l),r(r.P+r.F*s,"String",i)},f=c.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(d,"")),e};e.exports=c},a21f:function(e,t,n){var r=n("584a"),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},a22a:function(e,t,n){var r=n("d864"),i=n("b0dc"),o=n("3702"),a=n("e4ae"),s=n("b447"),u=n("7cd6"),l={},d={};t=e.exports=function(e,t,n,c,f){var h,p,m,g,y=f?function(){return e}:u(e),v=r(n,c,t?2:1),_=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(h=s(e.length);h>_;_++)if(g=t?v(a(p=e[_])[0],p[1]):v(e[_]),g===l||g===d)return g}else for(m=y.call(e);!(p=m.next()).done;)if(g=i(m,v,p.value,t),g===l||g===d)return g};t.BREAK=l,t.RETURN=d},a25f:function(e,t,n){var r=n("7726"),i=r.navigator;e.exports=i&&i.userAgent||""},a512:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("8d11"),o=r(i);function a(e){e=e||{};var t=void 0,n=void 0,r=void 0,i=void 0,a=void 0,s=void 0,u=[],l=(0,o["default"])(this.context).getInstance(),d=e.metricsConstants;function c(){var e=u;e.length&&n&&n.report(a,e),u=[]}function f(e,t,o,u){t&&(r=l.validateN(o),n=t,u&&u.length&&(i=u),a=l.reconstructFullMetricName(e,o,u),s=setInterval(c,r))}function h(){clearInterval(s),s=null,r=null,i=null,u=[],n=null}function p(e,t){e===d.HTTP_REQUEST&&(i&&i!==t.type||u.push(t))}return t={initialize:f,reset:h,handleNewMetric:p},t}a.__dashjs_factory_name="HttpListHandler",t["default"]=dashjs.FactoryMaker.getClassFactory(a),e.exports=t["default"]},a5b8:function(e,t,n){"use strict";var r=n("d8e8");function i(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},a679:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.schemeIdUri="",this.value=""};t["default"]=i,e.exports=t["default"]},aae3:function(e,t,n){var r=n("d3f4"),i=n("2d95"),o=n("2b4c")("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},aba2:function(e,t,n){var r=n("e53d"),i=n("4178").set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n("6b4c")(a);e.exports=function(){var e,t,n,l=function(){var r,i;u&&(r=a.domain)&&r.exit();while(e){i=e.fn,e=e.next;try{i()}catch(o){throw e?n():t=void 0,o}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(l)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var d=s.resolve(void 0);n=function(){d.then(l)}}else n=function(){i.call(r,l)};else{var c=!0,f=document.createTextNode("");new o(l).observe(f,{characterData:!0}),n=function(){f.data=c=!c}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},ac6a:function(e,t,n){for(var r=n("cadf"),i=n("0d58"),o=n("2aba"),a=n("7726"),s=n("32e9"),u=n("84f2"),l=n("2b4c"),d=l("iterator"),c=l("toStringTag"),f=u.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(h),m=0;m<p.length;m++){var g,y=p[m],v=h[y],_=a[y],E=_&&_.prototype;if(E&&(E[d]||s(E,d,f),E[c]||s(E,c,y),u[y]=f,v))for(g in r)E[g]||o(E,g,r[g],!0)}},ace9:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("9485"),s=r(a),u=n("589e"),l=r(u);function d(){var e=this.context,t=void 0,n=void 0,r=.15,i=375;function o(){n=(0,l["default"])(e).getInstance().getLogger(t)}function a(t){var o=t.getDroppedFramesHistory();if(o){for(var a=o.getFrameHistory(),u=0,l=0,d=s["default"].NO_CHANGE,c=1;c<a.length;c++)if(a[c]&&(u=a[c].droppedVideoFrames,l=a[c].totalVideoFrames,l>i&&u/l>r)){d=c-1,n.debug("index: "+d+" Dropped Frames: "+u+" Total Frames: "+l);break}return(0,s["default"])(e).create(d,{droppedFrames:u})}return(0,s["default"])(e).create()}return t={getMaxIndex:a},o(),t}d.__dashjs_factory_name="DroppedFramesRule",t["default"]=o["default"].getClassFactory(d),e.exports=t["default"]},ad14:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("8a43"),o=r(i),a=n("1d48"),s=r(a),u=n("467b"),l=r(u);function d(){var e=this.context,t=(0,o["default"])(e).getInstance(),n=void 0,r=void 0,i=void 0,a=void 0;function u(){x(),t.on(s["default"].TIME_SYNCHRONIZATION_COMPLETED,I,this)}function l(){return i}function d(e){i=e}function c(){return r}function f(e){r=e}function h(){return a}function p(e){a=e}function m(e,t,n,i){var o=NaN;return o=i?n&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*(e-r)):t.availabilityStartTime,o}function g(e,t,n){return m.call(this,e,t,n)}function y(e,t,n){return m.call(this,e,t,n,!0)}function v(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*r)/1e3}function _(e,t){var n=t.adaptation.period.start,r=t.presentationTimeOffset;return e+(n-r)}function E(e,t){var n=t.adaptation.period.start,r=t.presentationTimeOffset;return e-n+r}function b(e,t){var n=void 0,r=void 0,i=void 0;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,r=e.presentationStartTime+n,i=new Date(e.availabilityStartTime.getTime()+1e3*r)),i}function T(e,t){var n=e.adaptation.period,r={start:n.start,end:n.start+n.duration};if(!t)return r;if(!i&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var o=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),a=v(new Date,n),s=n.start+n.duration;r.start=Math.max(a-n.mpd.timeShiftBufferDepth,n.start);var u=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<o?o-e.availabilityTimeOffset:o;return r.end=a>=s&&a-u<s?s:a-u,r}function S(e,t){var n=e.adaptation.period.start;return t-n}function I(e){i||void 0!==e.offset&&(f(e.offset/1e3),i=!0)}function w(e){var t=e.presentationTimeOffset,n=e.adaptation.period.start;return n-t}function x(){r=0,i=!1,a=NaN}function A(){t.off(s["default"].TIME_SYNCHRONIZATION_COMPLETED,I,this),x()}return n={initialize:u,isTimeSyncCompleted:l,setTimeSyncCompleted:d,getClientTimeOffset:c,setClientTimeOffset:f,getExpectedLiveEdge:h,setExpectedLiveEdge:p,calcAvailabilityStartTimeFromPresentationTime:g,calcAvailabilityEndTimeFromPresentationTime:y,calcPresentationTimeFromWallTime:v,calcPresentationTimeFromMediaTime:_,calcPeriodRelativeTimeFromMpdRelativeTime:S,calcMediaTimeFromPresentationTime:E,calcSegmentAvailabilityRange:T,calcWallTimeForSegment:b,calcMSETimeOffset:w,reset:A},n}d.__dashjs_factory_name="TimelineConverter",t["default"]=l["default"].getSingletonFactory(d),e.exports=t["default"]},ad71:function(e,t,n){"use strict";(function(t,r){var i=n("966d");e.exports=T;var o,a=n("e3db");T.ReadableState=b;n("faa1").EventEmitter;var s=function(e,t){return e.listeners(t).length},u=n("429b"),l=n("8707").Buffer,d=t.Uint8Array||function(){};function c(e){return l.from(e)}function f(e){return l.isBuffer(e)||e instanceof d}var h=n("3a7c");h.inherits=n("3fb5");var p=n(1),m=void 0;m=p&&p.debuglog?p.debuglog("stream"):function(){};var g,y=n("5e1a"),v=n("4681");h.inherits(T,u);var _=["error","close","destroy","pause","resume"];function E(e,t,n){if("function"===typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function b(e,t){o=o||n("b19a"),e=e||{};var r=t instanceof o;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,a=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(g||(g=n("7d72").StringDecoder),this.decoder=new g(e.encoding),this.encoding=e.encoding)}function T(e){if(o=o||n("b19a"),!(this instanceof T))return new T(e);this._readableState=new b(e,this),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function S(e,t,n,r,i){var o,a=e._readableState;null===t?(a.reading=!1,M(e,a)):(i||(o=w(a,t)),o?e.emit("error",o):a.objectMode||t&&t.length>0?("string"===typeof t||a.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=c(t)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):I(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?I(e,a,t,!1):P(e,a)):I(e,a,t,!1))):r||(a.reading=!1));return x(a)}function I(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&C(e)),P(e,t)}function w(e,t){var n;return f(t)||"string"===typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function x(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}Object.defineProperty(T.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),T.prototype.destroy=v.destroy,T.prototype._undestroy=v.undestroy,T.prototype._destroy=function(e,t){this.push(null),t(e)},T.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"===typeof e&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=l.from(e,t),t=""),n=!0),S(this,e,t,!1,n)},T.prototype.unshift=function(e){return S(this,e,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},T.prototype.setEncoding=function(e){return g||(g=n("7d72").StringDecoder),this._readableState.decoder=new g(e),this._readableState.encoding=e,this};var A=8388608;function D(e){return e>=A?e=A:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function R(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=D(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function M(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,C(e)}}function C(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(m("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(N,e):N(e))}function N(e){m("emit readable"),e.emit("readable"),U(e)}function P(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(L,e,t))}function L(e,t){var n=t.length;while(!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark){if(m("maybeReadMore read 0"),e.read(0),n===t.length)break;n=t.length}t.readingMore=!1}function O(e){return function(){var t=e._readableState;m("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,U(e))}}function F(e){m("readable nexttick read 0"),e.read(0)}function B(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(k,e,t))}function k(e,t){t.reading||(m("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),U(e),t.flowing&&!t.reading&&e.read(0)}function U(e){var t=e._readableState;m("flow",t.flowing);while(t.flowing&&null!==e.read());}function H(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=j(e,t.buffer,t.decoder),n);var n}function j(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?K(e,t):V(e,t),r}function K(e,t){var n=t.head,r=1,i=n.data;e-=i.length;while(n=n.next){var o=n.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),e-=a,0===e){a===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++r}return t.length-=r,i}function V(e,t){var n=l.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;while(r=r.next){var o=r.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),e-=a,0===e){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}function q(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(G,t,e))}function G(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function Y(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}T.prototype.read=function(e){m("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return m("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?q(this):C(this),null;if(e=R(e,t),0===e&&t.ended)return 0===t.length&&q(this),null;var r,i=t.needReadable;return m("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,m("length less than watermark",i)),t.ended||t.reading?(i=!1,m("reading or ended",i)):i&&(m("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=R(n,t))),r=e>0?H(e,t):null,null===r?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&q(this)),null!==r&&this.emit("data",r),r},T.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},T.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e);break}o.pipesCount+=1,m("pipe count=%d opts=%j",o.pipesCount,t);var a=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr,u=a?d:b;function l(e,t){m("onunpipe"),e===n&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,h())}function d(){m("onend"),e.end()}o.endEmitted?i.nextTick(u):n.once("end",u),e.on("unpipe",l);var c=O(n);e.on("drain",c);var f=!1;function h(){m("cleanup"),e.removeListener("close",v),e.removeListener("finish",_),e.removeListener("drain",c),e.removeListener("error",y),e.removeListener("unpipe",l),n.removeListener("end",d),n.removeListener("end",b),n.removeListener("data",g),f=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||c()}var p=!1;function g(t){m("ondata"),p=!1;var r=e.write(t);!1!==r||p||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==Y(o.pipes,e))&&!f&&(m("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function y(t){m("onerror",t),b(),e.removeListener("error",y),0===s(e,"error")&&e.emit("error",t)}function v(){e.removeListener("finish",_),b()}function _(){m("onfinish"),e.removeListener("close",v),b()}function b(){m("unpipe"),n.unpipe(e)}return n.on("data",g),E(e,"error",y),e.once("close",v),e.once("finish",_),e.emit("pipe",n),o.flowing||(m("pipe resume"),n.resume()),e},T.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=Y(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},T.prototype.on=function(e,t){var n=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&C(this):i.nextTick(F,this))}return n},T.prototype.addListener=T.prototype.on,T.prototype.resume=function(){var e=this._readableState;return e.flowing||(m("resume"),e.flowing=!0,B(this,e)),this},T.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this},T.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(m("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){if(m("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)){var o=t.push(i);o||(r=!0,e.pause())}}),e)void 0===this[i]&&"function"===typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<_.length;o++)e.on(_[o],this.emit.bind(this,_[o]));return this._read=function(t){m("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),T._fromList=H}).call(this,n("c8ba"),n("4362"))},ada4:function(e,t,n){"use strict";var r=n("e53d"),i=n("63b6"),o=n("ebfd"),a=n("294c"),s=n("35e8"),u=n("5c95"),l=n("a22a"),d=n("1173"),c=n("f772"),f=n("45f2"),h=n("d9f6").f,p=n("57b1")(0),m=n("8e60");e.exports=function(e,t,n,g,y,v){var _=r[e],E=_,b=y?"set":"add",T=E&&E.prototype,S={};return m&&"function"==typeof E&&(v||T.forEach&&!a(function(){(new E).entries().next()}))?(E=t(function(t,n){d(t,E,e,"_c"),t._c=new _,void 0!=n&&l(n,y,t[b],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in T&&(!v||"clear"!=e)&&s(E.prototype,e,function(n,r){if(d(this,E,e),!t&&v&&!c(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i})}),v||h(E.prototype,"size",{get:function(){return this._c.size}})):(E=g.getConstructor(t,e,y,b),u(E.prototype,n),o.NEED=!0),f(E,e),S[e]=E,i(i.G+i.W+i.F,S),v||g.setStrong(E,e,y),E}},ae98:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n("5b8d"),a=r(o),s=n("467b"),u=r(s),l=NaN,d=function e(t,n){i(this,e),this.data={baseUrls:t||null,selectedIdx:n||l},this.children=[]};function c(){var e=void 0,t=void 0,n=void 0,r=this.context,i=(0,a["default"])(r).getInstance();function o(){g()}function s(e){e.dashManifestModel&&(n=e.dashManifestModel)}function u(){if(!n||!n.hasOwnProperty("getBaseURLsFromElement")||!n.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}function c(e,t,r){var o=n.getBaseURLsFromElement(r);e[t]?i.areEqual(o,e[t].data.baseUrls)||(e[t].data.baseUrls=o,e[t].data.selectedIdx=l):e[t]=new d(o)}function f(e){u();var r=n.getBaseURLsFromElement(e);i.areEqual(r,t.data.baseUrls)||(t.data.baseUrls=r,t.data.selectedIdx=l),e&&e.Period_asArray&&e.Period_asArray.forEach(function(e,r){c(t.children,r,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach(function(e,i){c(t.children[r].children,i,e),e.Representation_asArray&&e.Representation_asArray.sort(n.getRepresentationSortFunction()).forEach(function(e,n){c(t.children[r].children[i].children,n,e)})})})}function h(e,n){var r=n||t;e(r.data),r.children&&r.children.forEach(function(t){return h(e,t)})}function p(e){h(function(t){isNaN(t.selectedIdx)||e===t.baseUrls[t.selectedIdx].serviceLocation&&(t.selectedIdx=l)})}function m(e){f(e)}function g(){t=new d}function y(e){var n=t,r=[n.data];return e&&e.forEach(function(e){n=n.children[e],n&&r.push(n.data)}),r.filter(function(e){return e.baseUrls.length})}return e={reset:g,update:m,getForPath:y,invalidateSelectedIndexes:p,setConfig:s},o(),e}c.__dashjs_factory_name="BaseURLTreeModel",t["default"]=u["default"].getClassFactory(c),e.exports=t["default"]},aebd:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},aef8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("c287"),u=i(s),l=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,d=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){return l.test(e.value)},function(e){return parseFloat(e)})}return a(t,e),t}(u["default"]);t["default"]=d,e.exports=t["default"]},b048:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n("4f3c"),s=i(a),u=function(){function e(t,n,r){var i=this;o(this,e),this._name=t||"",this._properties=[],this._children=r||[],Array.isArray(n)&&n.forEach(function(e){i._properties.push(new s["default"](e))})}return r(e,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),e}();t["default"]=u,e.exports=t["default"]},b0c5:function(e,t,n){"use strict";var r=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},b0dc:function(e,t,n){var r=n("e4ae");e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(a){var o=e["return"];throw void 0!==o&&r(o.call(e)),a}}},b19a:function(e,t,n){"use strict";var r=n("966d"),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var o=n("3a7c");o.inherits=n("3fb5");var a=n("ad71"),s=n("dc14");o.inherits(c,a);for(var u=i(s.prototype),l=0;l<u.length;l++){var d=u[l];c.prototype[d]||(c.prototype[d]=s.prototype[d])}function c(e){if(!(this instanceof c))return new c(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),c.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},b2c3:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("e09e"),s=r(a),u=n("7f3c"),l=r(u),d=n("d82e"),c=r(d),f=n("8edf"),h=r(f),p=n("7737"),m=r(p),g=n("473d"),y=r(g),v=n("467b"),_=r(v),E=n("db66"),b=r(E),T=n("71a8");function S(){var e=void 0,t=void 0,n=void 0,r=void 0,i=void 0;function a(){q()}function u(e){e&&e.dashManifestModel&&(t=e.dashManifestModel)}function d(e,t){return t&&e?t.getRepresentationForQuality(e.quality):null}function f(e){return e&&e.streamInfo&&void 0!==e.streamInfo.id&&r[e.streamInfo.id]?r[e.streamInfo.id][e.index]:null}function p(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r];if(e.id===i.id)return i}return null}function g(e){var n=new l["default"],r=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],i=t.getRepresentationFor(e.index,r);return n.id=e.id,n.quality=e.index,n.bandwidth=t.getBandwidth(i),n.DVRWindow=e.segmentAvailabilityRange,n.fragmentDuration=e.segmentDuration||(e.segments&&e.segments.length>0?e.segments[0].duration:NaN),n.MSETimeOffset=e.MSETimeOffset,n.useCalculatedLiveEdgeTime=e.useCalculatedLiveEdgeTime,n.mediaInfo=v(e.adaptation),n}function v(e){var n=new c["default"],r=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index],i=void 0;return n.id=e.id,n.index=e.index,n.type=e.type,n.streamInfo=S(e.period),n.representationCount=t.getRepresentationCount(r),n.labels=t.getLabelsForAdaptation(r),n.lang=t.getLanguageForAdaptation(r),i=t.getViewpointForAdaptation(r),n.viewpoint=i?i.value:void 0,n.accessibility=t.getAccessibilityForAdaptation(r).map(function(e){var t=e.value,r=t;return e.schemeIdUri&&e.schemeIdUri.search("cea-608")>=0&&"undefined"!==typeof b["default"]&&(r=t?"cea-608:"+t:"cea-608",n.embeddedCaptions=!0),r}),n.audioChannelConfiguration=t.getAudioChannelConfigurationForAdaptation(r).map(function(e){return e.value}),n.roles=t.getRolesForAdaptation(r).map(function(e){return e.value}),n.codec=t.getCodec(r),n.mimeType=t.getMimeType(r),n.contentProtection=t.getContentProtectionData(r),n.bitrateList=t.getBitrateListForAdaptation(r),n.contentProtection&&n.contentProtection.forEach(function(e){e.KID=t.getKID(e)}),n.isText=t.getIsTextTrack(n.mimeType),n}function _(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=o["default"].EMBEDDED_TEXT,e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=n,e.roles=["caption"]}function E(e){e.type=o["default"].IMAGE}function S(e){var t=new h["default"],n=1;return t.id=e.id,t.index=e.index,t.start=e.start,t.duration=e.duration,t.manifestInfo=I(e.mpd),t.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(t.start+t.duration-t.manifestInfo.duration)<n,t}function I(e){var n=new m["default"];return n.DVRWindowSize=e.timeShiftBufferDepth,n.loadedTime=e.manifest.loadedTime,n.availableFrom=e.availabilityStartTime,n.minBufferTime=e.manifest.minBufferTime,n.maxFragmentDuration=e.maxSegmentDuration,n.duration=t.getDuration(e.manifest),n.isDynamic=t.getIsDynamic(e.manifest),n}function w(e,i){if(0===n.length)return null;var o=n[0].mpd.manifest,a=A(o,e.index,i,e);if(!a)return null;var s=p(e,n),u=s.id,l=t.getIndexForAdaptation(a,o,e.index);return r[u]=r[u]||t.getAdaptationsForPeriod(s),v(r[u][l])}function x(e){return t.getRolesForAdaptation(e).filter(function(e){return e.value===s["default"].MAIN})[0]}function A(e,n,r,o){var a=t.getAdaptationsForType(e,n,r);if(!a||0===a.length)return null;if(a.length>1&&o){var s=D(o,r);if(i[o.id]&&i[o.id][r])for(var u=0,l=a.length;u<l;u++)if(i[o.id][r].isMediaInfoEqual(s[u]))return a[u];for(u=0,l=a.length;u<l;u++)if(x(a[u]))return a[u]}return a[0]}function D(e,i,a){var s=n,u=a,l=[],d=void 0,c=void 0,f=void 0,h=void 0,m=void 0,g=void 0;if(u){R();var y=t.getMpd(u);s=t.getRegularPeriods(y)}else{if(!(n.length>0))return l;u=n[0].mpd.manifest}var b=p(e,s),T=b.id,S=t.getAdaptationsForType(u,e.index,i!==o["default"].EMBEDDED_TEXT?i:o["default"].VIDEO);if(!S)return l;for(r[T]=r[T]||t.getAdaptationsForPeriod(b),h=0,g=S.length;h<g;h++)if(d=S[h],f=t.getIndexForAdaptation(d,u,e.index),c=v(r[T][f]),i===o["default"].EMBEDDED_TEXT){var I=c.accessibility.length;for(m=0;m<I;m++)if(c){var w=c.accessibility[m];if(0===w.indexOf("cea-608:")){var x=w.substring(8),A=x.split(";");if("CC"===A[0].substring(0,2))for(m=0;m<A.length;m++)c||(c=v.call(this,r[T][f])),_(c,A[m].substring(0,3),A[m].substring(4)),l.push(c),c=null;else for(m=0;m<A.length;m++)c||(c=v.call(this,r[T][f])),_(c,"CC"+(m+1),A[m]),l.push(c),c=null}else 0===w.indexOf("cea-608")&&(_(c,o["default"].CC1,"eng"),l.push(c),c=null)}}else i===o["default"].IMAGE?(E(c),l.push(c),c=null):c&&l.push(c);return l}function R(){if(!t||!t.hasOwnProperty("getMpd")||!t.hasOwnProperty("getRegularPeriods"))throw new Error("setConfig function has to be called previously")}function M(e){if(!e)return null;R();var i=t.getMpd(e);n=t.getRegularPeriods(i),r={}}function C(e,r){var i=[],o=n;if(e){R();var a=t.getMpd(e);o=t.getRegularPeriods(a)}r||(r=o.length);for(var s=0;s<r;s++)i.push(S(o[s]));return i}function N(e){if(!e||!e.hasOwnProperty("getRepresentationController")||!e.hasOwnProperty("getIndexHandler")||!e.hasOwnProperty("getMediaInfo")||!e.hasOwnProperty("getType")||!e.hasOwnProperty("getStreamInfo"))throw new Error("streamProcessor parameter is missing or malformed!")}function P(e){if(!e||!e.hasOwnProperty("getRepresentationForQuality")||!e.hasOwnProperty("getCurrentRepresentation"))throw new Error("representationController parameter is missing or malformed!")}function L(e,t){var n=void 0,r=void 0,i=void 0;return N(e),(0,T.checkInteger)(t),n=e.getRepresentationController(),i=e.getIndexHandler(),r=n?n.getRepresentationForQuality(t):null,i?i.getInitRequest(r):null}function O(e,t,n,r){var i=void 0,o=void 0,a=void 0,s=null;return N(e),i=e.getRepresentationController(),o=d(t,i),a=e.getIndexHandler(),a&&(s=void 0!==n&&void 0!==r?a.getSegmentRequestForTime(o,n,r):a.getNextSegmentRequest(o)),s}function F(e){N(e);var t=e.getIndexHandler();return t?t.getCurrentTime():NaN}function B(e,t){N(e);var n=e.getIndexHandler();n&&n.setCurrentTime(t)}function k(e){N(e);var t=e.getIndexHandler();t&&t.resetIndex()}function U(e){N(e);var r=p(e.getStreamInfo(),n),i=e.getMediaInfo(),o=f(i),a=e.getType(),s=void 0,u=void 0;s=i?i.id:null,n.length>0&&(u=s?t.getAdaptationForId(s,n[0].mpd.manifest,r.index):t.getAdaptationForIndex(i.index,n[0].mpd.manifest,r.index),e.getRepresentationController().updateData(u,o,a))}function H(e,t){P(e);var n=void 0;return void 0!==t?((0,T.checkInteger)(t),n=e.getRepresentationForQuality(t)):n=e.getCurrentRepresentation(),n?g(n):null}function j(e,t,n){if(!e||!t)return null;var r=new y["default"],i=e.scheme_id_uri,o=e.value,a=e.timescale,s=e.presentation_time_delta,u=e.event_duration,l=e.id,d=e.message_data,c=n*a+s;return t[i+"/"+o]?(r.eventStream=t[i+"/"+o],r.eventStream.value=o,r.eventStream.timescale=a,r.duration=u,r.id=l,r.presentationTime=c,r.messageData=d,r.presentationTimeDelta=s,r):null}function K(e,r){var i=[];if(0===n.length)return i;var o=n[0].mpd.manifest;return e instanceof h["default"]?i=t.getEventsForPeriod(p(e,n)):e instanceof c["default"]?i=t.getEventStreamForAdaptationSet(o,f(e)):e instanceof l["default"]&&(i=t.getEventStreamForRepresentation(o,d(e,r.getRepresentationController()))),i}function V(e,t,n){i[e]=i[e]||{},i[e][t]=i[e][t]||{},i[e][t]=n}function q(){n=[],r={},i={}}return e={convertDataToRepresentationInfo:g,getDataForMedia:f,getStreamsInfo:C,getMediaInfoForType:w,getAllMediaInfoForType:D,getRepresentationInfo:H,getAdaptationForType:A,updateData:U,getInitRequest:L,getFragmentRequest:O,getIndexHandlerTime:F,setIndexHandlerTime:B,getEventsFor:K,getEvent:j,setConfig:u,updatePeriods:M,reset:q,resetIndexHandler:k,setCurrentMediaInfo:V},a(),e}S.__dashjs_factory_name="DashAdapter",t["default"]=_["default"].getSingletonFactory(S),e.exports=t["default"]},b447:function(e,t,n){var r=n("3a38"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},b4be:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n,i,o){r(this,e),this.sessionToken=t,this.message=n,this.defaultURL=i,this.messageType=o||"license-request"};t["default"]=i,e.exports=t["default"]},b4f1:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(){var e=void 0;function t(e){return e}function n(e){return e}return e={modifyRequestURL:t,modifyRequestHeader:n},e}a.__dashjs_factory_name="RequestModifier",t["default"]=o["default"].getSingletonFactory(a),e.exports=t["default"]},b542:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("637b"),s=r(a),u=n("4e47"),l=r(u),d=n("cdb1"),c=r(d),f=n("b869"),h=r(f),p=n("8c53"),m=r(p),g=n("467b"),y=r(g),v=n("8019"),_=r(v);function E(e){e=e||{};var t=this.context,n=e.type,r=e.errHandler,i=e.mimeType,a=e.timelineConverter,u=e.adapter,d=e.manifestModel,f=e.mediaPlayerModel,p=e.stream,g=e.abrController,y=e.playbackController,v=e.streamController,E=e.mediaController,b=e.textController,T=e.domStorage,S=e.metricsModel,I=e.dashMetrics,w=e.dashManifestModel,x=void 0,A=void 0,D=void 0,R=void 0,M=void 0,C=void 0,N=void 0,P=void 0,L=void 0,O=void 0;function F(){y&&y.getIsDynamic()&&(C=(0,s["default"])(t).create({timelineConverter:a,streamProcessor:x})),K()}function B(o){O=(0,_["default"])(t).create({mimeType:i,timelineConverter:a,dashMetrics:I,metricsModel:S,mediaPlayerModel:f,baseURLController:e.baseURLController,errHandler:r}),O.initialize(x),g.registerStreamType(n,x),P=p.getFragmentController().getModel(n),P.setStreamProcessor(x),R=ye(n),M=(0,h["default"])(t).create({type:n,mimeType:i,metricsModel:S,adapter:u,dashMetrics:I,dashManifestModel:w,timelineConverter:a,mediaPlayerModel:f,abrController:g,playbackController:y,streamController:v,textController:b,streamProcessor:x,mediaController:E}),N=(0,m["default"])(t).create(),N.setConfig({abrController:g,domStorage:T,metricsModel:S,dashMetrics:I,dashManifestModel:w,manifestModel:d,playbackController:y,timelineConverter:a,streamProcessor:x}),R.initialize(o),M.initialize(),N.initialize()}function k(e){L.push(e)}function U(e){var t=L.indexOf(e);-1!==t&&L.splice(t,1)}function H(){return L}function j(){L=[]}function K(){D=[],A=null,j()}function V(e,t){O.reset(),R&&(R.reset(e,t),R=null),M&&(M.reset(),M=null),N&&(N.reset(),N=null),g&&g.unRegisterStreamType(n),L.forEach(function(e){e.reset()}),K(),n=null,p=null,C&&(C.reset(),C=null)}function q(){return!!N&&N.isUpdating()}function G(){return n}function Y(){return N}function z(){return O}function W(){return p?p.getFragmentController():null}function X(){return R.getBuffer()}function $(e){R.setBuffer(e)}function Q(){return R}function J(){return P}function Z(){return C}function ee(){return p?p.getStreamInfo():null}function te(e){p&&p.addInbandEvents(e)}function ne(e){e===A||e&&A&&e.type!==A.type||(A=e),u.updateData(this)}function re(e,t){-1===D.indexOf(e)&&D.push(e),t&&this.selectMediaInfo(e)}function ie(){return D}function oe(){return A}function ae(){return R.getMediaSource()}function se(e){R.setMediaSource(e,oe())}function ue(){R.dischargePreBuffer()}function le(){return M}function de(e){return u.getRepresentationInfo(N,e)}function ce(){return!!R&&R.getIsBufferingCompleted()}function fe(e){return!!R&&null!==R.getRangeAt(e,0)}function he(){return R.getBufferLevel()}function pe(e,t){R&&R.switchInitData(ee().id,e,t)}function me(e){return R.getBuffer()||R.createBuffer(A,e)}function ge(){M.switchTrackAsked()}function ye(e){var n=null;return n=e===o["default"].VIDEO||e===o["default"].AUDIO?(0,l["default"])(t).create({type:e,metricsModel:S,mediaPlayerModel:f,manifestModel:d,errHandler:r,streamController:v,mediaController:E,adapter:u,textController:b,abrController:g,playbackController:y,streamProcessor:x}):(0,c["default"])(t).create({type:e,mimeType:i,metricsModel:S,mediaPlayerModel:f,manifestModel:d,errHandler:r,streamController:v,mediaController:E,adapter:u,textController:b,abrController:g,playbackController:y,streamProcessor:x}),n}return x={initialize:B,isUpdating:q,getType:G,getBufferController:Q,getFragmentModel:J,getScheduleController:le,getLiveEdgeFinder:Z,getFragmentController:W,getRepresentationController:Y,getIndexHandler:z,getRepresentationInfo:de,getBufferLevel:he,switchInitData:pe,isBufferingCompleted:ce,timeIsBuffered:fe,createBuffer:me,getStreamInfo:ee,selectMediaInfo:ne,addMediaInfo:re,switchTrackAsked:ge,getMediaInfoArr:ie,getMediaInfo:oe,getMediaSource:ae,setMediaSource:se,dischargePreBuffer:ue,getBuffer:X,setBuffer:$,registerExternalController:k,unregisterExternalController:U,getExternalControllers:H,unregisterAllExternalController:j,addInbandEvents:te,reset:V},F(),x}E.__dashjs_factory_name="StreamProcessor",t["default"]=y["default"].getClassFactory(E),e.exports=t["default"]},b639:function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n("1fb5"),i=n("9152"),o=n("e3db");function a(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=l.prototype):(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return d(this,e,t,n)}function d(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?g(e,t,n,r):"string"===typeof t?p(e,t,n):y(e,t)}function c(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t,n,r){return c(t),t<=0?u(e,t):void 0!==n?"string"===typeof r?u(e,t).fill(n,r):u(e,t).fill(n):u(e,t)}function h(e,t){if(c(t),e=u(e,t<0?0:0|v(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t,n){if("string"===typeof n&&""!==n||(n="utf8"),!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|E(t,n);e=u(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function m(e,t){var n=t.length<0?0:0|v(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function g(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),l.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=l.prototype):e=m(e,t),e}function y(e,t){if(l.isBuffer(t)){var n=0|v(t.length);return e=u(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||te(t.length)?u(e,0):m(e,t);if("Buffer"===t.type&&o(t.data))return m(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function _(e){return+e!=e&&(e=0),l.alloc(+e)}function E(e,t){if(l.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(e).length;default:if(r)return $(e).length;t=(""+t).toLowerCase(),r=!0}}function b(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return B(this,t,n);case"utf8":case"utf-8":return N(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return F(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function T(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function S(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:I(e,t,n,r,i);if("number"===typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):I(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function I(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var d=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===d?0:o-d)){if(-1===d&&(d=o),o-d+1===u)return d*a}else-1!==d&&(o-=o-d),d=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var c=!0,f=0;f<u;f++)if(l(e,o+f)!==l(t,f)){c=!1;break}if(c)return o}return-1}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function x(e,t,n,r){return ee($(t,e.length-n),e,n,r)}function A(e,t,n,r){return ee(Q(t),e,n,r)}function D(e,t,n,r){return A(e,t,n,r)}function R(e,t,n,r){return ee(Z(t),e,n,r)}function M(e,t,n,r){return ee(J(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function N(e,t,n){n=Math.min(e.length,n);var r=[],i=t;while(i<n){var o,a,s,u,l=e[i],d=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c<=n)switch(c){case 1:l<128&&(d=l);break;case 2:o=e[i+1],128===(192&o)&&(u=(31&l)<<6|63&o,u>127&&(d=u));break;case 3:o=e[i+1],a=e[i+2],128===(192&o)&&128===(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a,u>2047&&(u<55296||u>57343)&&(d=u));break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s,u>65535&&u<1114112&&(d=u))}null===d?(d=65533,c=1):d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),i+=c}return L(r)}t.Buffer=l,t.SlowBuffer=_,t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:a(),t.kMaxLength=s(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return d(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return f(null,e,t,n)},l.allocUnsafe=function(e){return h(null,e)},l.allocUnsafeSlow=function(e){return h(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},l.byteLength=E,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)T(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)T(this,t,t+3),T(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)T(this,t,t+7),T(this,t+1,t+6),T(this,t+2,t+5),T(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?N(this,0,e):b.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,a=n-t,s=Math.min(o,a),u=this.slice(r,i),d=e.slice(t,n),c=0;c<s;++c)if(u[c]!==d[c]){o=u[c],a=d[c];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return S(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return S(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":return A(this,e,t,n);case"latin1":case"binary":return D(this,e,t,n);case"base64":return R(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function L(e){var t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);var n="",r=0;while(r<t)n+=String.fromCharCode.apply(String,e.slice(r,r+=P));return n}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function F(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function B(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=X(e[o]);return i}function k(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function U(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function H(e,t,n,r,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function j(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function K(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function V(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function q(e,t,n,r,o){return o||V(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),i.write(e,t,n,r,23,4),n+4}function G(e,t,n,r,o){return o||V(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n,r=this.length;if(e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=l.prototype;else{var i=t-e;n=new l(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);var r=this[e],i=1,o=0;while(++o<t&&(i*=256))r+=this[e+o]*i;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);var r=this[e+--t],i=1;while(t>0&&(i*=256))r+=this[e+--t]*i;return r},l.prototype.readUInt8=function(e,t){return t||U(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||U(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||U(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||U(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||U(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);var r=this[e],i=1,o=0;while(++o<t&&(i*=256))r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);var r=t,i=1,o=this[e+--r];while(r>0&&(i*=256))o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||U(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||U(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||U(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||U(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||U(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||U(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||U(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||U(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||U(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;H(this,e,t,n,i,0)}var o=1,a=0;this[t]=255&e;while(++a<n&&(o*=256))this[t+a]=e/o&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;H(this,e,t,n,i,0)}var o=n-1,a=1;this[t+o]=255&e;while(--o>=0&&(a*=256))this[t+o]=e/a&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):K(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):K(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);H(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;this[t]=255&e;while(++o<n&&(a*=256))e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);H(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;this[t+o]=255&e;while(--o>=0&&(a*=256))e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):K(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):K(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return q(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return q(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return G(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return G(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},l.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=l.isBuffer(e)?e:$(new l(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var Y=/[^+\/0-9A-Za-z-_]/g;function z(e){if(e=W(e).replace(Y,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function W(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function X(e){return e<16?"0"+e.toString(16):e.toString(16)}function $(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Q(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function J(e,t){for(var n,r,i,o=[],a=0;a<e.length;++a){if((t-=2)<0)break;n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r)}return o}function Z(e){return r.toByteArray(z(e))}function ee(e,t,n,r){for(var i=0;i<r;++i){if(i+n>=t.length||i>=e.length)break;t[i+n]=e[i]}return i}function te(e){return e!==e}}).call(this,n("c8ba"))},b69e:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("10fb"),o=r(i),a=n("c7a0"),s=r(a),u=n("e3b9"),l=r(u);function d(e){e=e||{};var t=void 0,n=e.dashManifestModel,r=e.constants;function i(e,t,i){var o,a,s=n.getMpd(e),u=0;return t?u=s.availabilityStartTime.getTime()/1e3:(o=this.getRegularPeriods(s),o.length&&(u=o[0].start)),a=u,i&&i.hasOwnProperty(r.START_TIME)&&(a+=i.starttime),a}function a(e){var t=[];return e.Metrics_asArray&&e.Metrics_asArray.forEach(function(a){var u=new o["default"],d=n.getIsDynamic(e);a.hasOwnProperty("metrics")&&(u.metrics=a.metrics,a.Range_asArray&&a.Range_asArray.forEach(function(t){var r=new s["default"];r.starttime=i(e,d,t),t.hasOwnProperty("duration")?r.duration=t.duration:r.duration=n.getDuration(e),r._useWallClockTime=d,u.Range.push(r)}),a.Reporting_asArray&&(a.Reporting_asArray.forEach(function(e){var t=new l["default"];if(e.hasOwnProperty(r.SCHEME_ID_URI)){for(var n in t.schemeIdUri=e.schemeIdUri,e)e.hasOwnProperty(n)&&(t[n]=e[n]);u.Reporting.push(t)}}),t.push(u)))}),t}return t={getMetrics:a},t}d.__dashjs_factory_name="ManifestParsing",t["default"]=dashjs.FactoryMaker.getSingletonFactory(d),e.exports=t["default"]},b762:function(e,t,n){(function(e,t,n){function r(e,t,a,l,d,c,f,h,p){if(t<f.begin||t>=f.end)return null;var m="regionID"in f&&""!==f.regionID?f.regionID:c;if(null!==d&&m!==a.id&&(!("contents"in f)||"contents"in f&&0===f.contents.length||""!==m))return null;var g=new s(f);for(var y in f.sets)t<f.sets[y].begin||t>=f.sets[y].end||(g.styleAttrs[f.sets[y].qname]=f.sets[y].value);var v,_={};for(var E in g.styleAttrs)if(_[E]=!0,E===n.byName.writingMode.qname&&!(n.byName.direction.qname in g.styleAttrs)){var b=g.styleAttrs[E];"lrtb"===b||"lr"===b?g.styleAttrs[n.byName.direction.qname]="ltr":"rltb"!==b&&"rl"!==b||(g.styleAttrs[n.byName.direction.qname]="rtl")}if(null!==d)for(var T in n.all){var S=n.all[T];if(S.qname===n.byName.textDecoration.qname){var I=d.styleAttrs[S.qname],w=g.styleAttrs[S.qname],x=[];void 0===w?x=I:-1===w.indexOf("none")?((-1===w.indexOf("noUnderline")&&-1!==I.indexOf("underline")||-1!==w.indexOf("underline"))&&x.push("underline"),(-1===w.indexOf("noLineThrough")&&-1!==I.indexOf("lineThrough")||-1!==w.indexOf("lineThrough"))&&x.push("lineThrough"),(-1===w.indexOf("noOverline")&&-1!==I.indexOf("overline")||-1!==w.indexOf("overline"))&&x.push("overline")):x.push("none"),g.styleAttrs[S.qname]=x}else S.inherit&&S.qname in d.styleAttrs&&!(S.qname in g.styleAttrs)&&(g.styleAttrs[S.qname]=d.styleAttrs[S.qname])}for(var A in n.all){var D=n.all[A];D.qname in g.styleAttrs||("region"===g.kind||!1===D.inherit&&null!==D.initial)&&(g.styleAttrs[D.qname]=D.parse(D.initial),_[D.qname]=!0)}for(var R in n.all){var M=n.all[R];if(M.qname in _&&null!==M.compute){var C=M.compute(e,d,g,g.styleAttrs[M.qname],p);null!==C?g.styleAttrs[M.qname]=C:u(h,"Style '"+M.qname+"' on element '"+g.kind+"' cannot be computed")}}if("none"===g.styleAttrs[n.byName.display.qname])return null;for(var N in null===d?v=null===l?[]:[l]:"contents"in f&&(v=f.contents),v){var P=r(e,t,a,l,g,m,v[N],h,p);null!==P&&g.contents.push(P.element)}for(var L in g.styleAttrs){var O=n.byQName[L];-1===O.applies.indexOf(g.kind)&&delete g.styleAttrs[L]}if("span"===g.kind&&g.text&&"default"===g.space){var F=g.text.replace(/\s+/g," ");g.text=F}if("p"===g.kind){var B=[];i(g,B);var k=0,U="after_br",H=0;while(1)if("after_br"===U)k>=B.length||"br"===B[k].kind?(U="before_br",H=k,k--):("preserve"!==B[k].space&&(B[k].text=B[k].text.replace(/^\s+/g,"")),B[k].text.length>0?(U="looking_br",k++):B.splice(k,1));else if("before_br"===U)if(k<0||"br"===B[k].kind){if(U="after_br",k=H+1,k>=B.length)break}else if("preserve"!==B[k].space&&(B[k].text=B[k].text.replace(/\s+$/g,"")),B[k].text.length>0){if(U="after_br",k=H+1,k>=B.length)break}else B.splice(k,1),k--;else k>=B.length||"br"===B[k].kind?(U="before_br",H=k,k--):k++;o(g)}return"div"===g.kind&&n.byName.backgroundImage.qname in g.styleAttrs||"br"===g.kind||"contents"in g&&g.contents.length>0||"span"===g.kind&&null!==g.text||"region"===g.kind&&"always"===g.styleAttrs[n.byName.showBackground.qname]?{region_id:m,element:g}:null}function i(e,t){if("contents"in e)for(var n in e.contents)i(e.contents[n],t);else t.push(e)}function o(e){if("br"===e.kind)return!1;if("text"in e)return 0===e.text.length;if("contents"in e){var t=e.contents.length;while(t--)o(e.contents[t])&&e.contents.splice(t,1);return 0===e.contents.length}}function a(e){this.contents=[],this.aspectRatio=e.aspectRatio}function s(e){for(var t in this.kind=e.kind||"region",e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)this.styleAttrs[t]=e.styleAttrs[t];"text"in e?this.text=e.text:"br"!==e.kind&&(this.contents=[]),"space"in e&&(this.space=e.space)}function u(e,t){if(e&&e.error&&e.error(t))throw t}e.generateISD=function(e,t,n){var i=new a(e),o={};for(var s in e.head.layout.regions){var u=r(e,t,e.head.layout.regions[s],e.body,null,"",e.head.layout.regions[s],n,o);null!==u&&i.contents.push(u.element)}return i}})(t,"undefined"===typeof imscNames?n("597c"):imscNames,"undefined"===typeof imscStyles?n("faf0"):imscStyles)},b7d1:function(e,t,n){(function(t){function n(e,t){if(r("noDeprecation"))return e;var n=!1;function i(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}return i}function r(e){try{if(!t.localStorage)return!1}catch(r){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=n}).call(this,n("c8ba"))},b869:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("df86"),s=n("36b1"),u=r(s),l=n("4e47"),d=r(l),c=n("90c5"),f=r(c),h=n("f5f5"),p=r(h),m=n("8e4c"),g=r(m),y=n("8a43"),v=r(y),_=n("1d48"),E=r(_),b=n("467b"),T=r(b),S=n("589e"),I=r(S),w=n("d665"),x=r(w),A=n("5beb");function D(e){e=e||{};var t=this.context,n=(0,v["default"])(t).getInstance(),r=e.metricsModel,i=e.adapter,s=e.dashMetrics,l=e.dashManifestModel,c=e.timelineConverter,h=e.mediaPlayerModel,m=e.abrController,y=e.playbackController,_=e.streamController,b=e.textController,T=e.type,S=e.streamProcessor,w=e.mediaController,D=void 0,R=void 0,M=void 0,C=void 0,N=void 0,P=void 0,L=void 0,O=void 0,F=void 0,B=void 0,k=void 0,U=void 0,H=void 0,j=void 0,K=void 0,V=void 0,q=void 0,G=void 0,Y=void 0,z=void 0,W=void 0,X=void 0,$=void 0;function Q(){R=(0,I["default"])(t).getInstance().getLogger(D),ke()}function J(){M=S.getFragmentModel(),j=(0,f["default"])(t).create({abrController:m,dashMetrics:s,metricsModel:r,mediaPlayerModel:h,textController:b}),K=(0,p["default"])(t).create({adapter:i,textController:b,playbackController:y}),l.getIsTextTrack(e.mimeType)&&n.on(E["default"].TIMED_TEXT_REQUESTED,xe,this),n.on(E["default"].QUALITY_CHANGE_REQUESTED,ce,this),n.on(E["default"].DATA_UPDATE_STARTED,be,this),n.on(E["default"].DATA_UPDATE_COMPLETED,he,this),n.on(E["default"].FRAGMENT_LOADING_COMPLETED,ye,this),n.on(E["default"].STREAM_COMPLETED,ge,this),n.on(E["default"].STREAM_INITIALIZED,pe,this),n.on(E["default"].BUFFER_LEVEL_STATE_CHANGED,Se,this),n.on(E["default"].BUFFER_CLEARED,Te,this),n.on(E["default"].BYTES_APPENDED_END_FRAGMENT,_e,this),n.on(E["default"].INIT_REQUESTED,ae,this),n.on(E["default"].QUOTA_EXCEEDED,Ie,this),n.on(E["default"].PLAYBACK_SEEKING,De,this),n.on(E["default"].PLAYBACK_STARTED,Ae,this),n.on(E["default"].PLAYBACK_RATE_CHANGED,Re,this),n.on(E["default"].PLAYBACK_TIME_UPDATED,ve,this),n.on(E["default"].URL_RESOLUTION_FAILED,we,this),n.on(E["default"].FRAGMENT_LOADING_ABANDONED,Ee,this)}function Z(){return!1===P}function ee(){C&&!S.isBufferingCompleted()?(R.debug("Schedule Controller starts"),Be(),P=!1,N&&(N=!1),oe(0)):R.warn("Start denied to Schedule Controller")}function te(){P||(R.debug("Schedule Controller stops"),P=!0,clearTimeout(U))}function ne(e,t){q[t]=q[t]||{};var n=m.getTopQualityIndexFor(e,t);return q[t][e]!=n&&(R.info("Top quality "+e+" index has changed from "+q[t][e]+" to "+n),q[t][e]=n,!0)}function re(){var e=S.getBufferController();if(P||B||!e||y.isPaused()&&!h.getScheduleWhilePaused()||!(T!==o["default"].FRAGMENTED_TEXT&&T!==o["default"].TEXT||b.isTextEnabled()))R.debug("Schedule stop!");else if(e.getIsBufferingCompleted())R.debug("Schedule stop because buffering is completed!");else{ie();var t=Y.length>0,n=S.getStreamInfo();if(W||isNaN(G)||z||t||ne(C.mediaInfo.type,n.id)||j.execute(S,_.isTrackTypePresent(o["default"].VIDEO))){var r=function(){var e=S.getFragmentController();if(C.quality===G&&!z||W){var t=Y.shift();if(e.isInitializationRequest(t))S.switchInitData(t.representationId);else{var r=void 0;S.getBufferController().getIsPruningInProgress()||(r=K.execute(S,H,t),Me(NaN),r&&!t&&(isNaN(r.startTime+r.duration)||i.setIndexHandlerTime(S,r.startTime+r.duration),r.delayLoadingTime=(new Date).getTime()+k,Ce(0)),!r&&n.manifestInfo&&n.manifestInfo.isDynamic&&R.debug("Next fragment seems to be at the bleeding live edge and is not available yet. Rescheduling.")),r?(R.debug("Next fragment request url is "+r.url),M.executeRequest(r)):(se(!1),oe(h.getLowLatencyEnabled()?100:500))}}else R.debug("Quality has changed, get init request for representationid = "+C.id),z?(W=w.getSwitchMode(T)===x["default"].TRACK_SWITCH_MODE_ALWAYS_REPLACE,R.debug("Switch track has been asked, get init request for "+T+" with representationid = "+C.id+"bufferResetInProgress = "+W),S.switchInitData(C.id,W),z=!1):S.switchInitData(C.id),G=C.quality};se(!0),t||z||m.checkPlaybackQuality(T),r()}else oe(500)}}function ie(){var e=y.getTime(),t=1.5*C.fragmentDuration,n=M.getRequests({state:g["default"].FRAGMENT_MODEL_EXECUTED,time:e+t,threshold:0})[0];if(n&&-1===Y.indexOf(n)&&!l.getIsTextTrack(T)){var r=h.getFastSwitchEnabled(),i=S.getBufferLevel(),o=m.getAbandonmentStateFor(T),a=!w.isCurrentTrack(n.mediaInfo)&&w.getSwitchMode(n.mediaInfo.type)===x["default"].TRACK_SWITCH_MODE_NEVER_REPLACE,s=n.quality<C.quality;r&&(a||s)&&i>=t&&o!==u["default"].ABANDON_LOAD?(de(n),$=!0,R.debug("Reloading outdated fragment at index: ",n.index)):n.quality>C.quality&&!W&&Me(y.getTime()+S.getBufferLevel())}}function oe(e){clearTimeout(U),U=setTimeout(re,e)}function ae(e){e.sender&&e.sender.getStreamProcessor()===S&&ue(C.quality)}function se(e){B!==e?B=e:R.debug("isFragmentProcessingInProgress is already equal to",e)}function ue(e){var t=i.getInitRequest(S,e);t&&(se(!0),t.url=(0,A.replaceTokenForTemplate)(t.url,"Bandwidth",C?C.bandwidth:null),M.executeRequest(t))}function le(){z=!0}function de(e){Y.push(e)}function ce(e){if(T===e.mediaType&&S.getStreamInfo().id===e.streamInfo.id){if(C=S.getRepresentationInfo(e.newQuality),null===C||void 0===C)throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");Fe(new Date,a.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),Be()}}function fe(e){if(y&&M){var t=M.getRequests({state:g["default"].FRAGMENT_MODEL_EXECUTED,time:y.getTime(),threshold:0})[0];t&&y.getTime()>=t.startTime&&((!V.mediaInfo||t.mediaInfo.type===V.mediaInfo.type&&t.mediaInfo.id!==V.mediaInfo.id)&&e&&n.trigger(E["default"].TRACK_CHANGE_RENDERED,{mediaType:T,oldMediaInfo:V.mediaInfo,newMediaInfo:t.mediaInfo}),t.quality===V.quality&&t.adaptationIndex===V.adaptationIndex||!e||n.trigger(E["default"].QUALITY_CHANGE_RENDERED,{mediaType:T,oldQuality:V.quality,newQuality:t.quality}),V={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex})}}function he(e){e.error||e.sender.getStreamProcessor()!==S||(C=i.convertDataToRepresentationInfo(e.currentRepresentation))}function pe(e){e.error||S.getStreamInfo().id!==e.streamInfo.id||(C=S.getRepresentationInfo(),N&&(y.getIsDynamic()?(c.setTimeSyncCompleted(!0),me()):(H=y.getStreamStartTime(!1),S.getBufferController().setSeekStartTime(H))),P&&ee())}function me(){var e=S.getLiveEdgeFinder();if(e){var t=e.getLiveEdge(),n=C.mediaInfo.streamInfo.manifestInfo.DVRWindowSize/2,a=t-y.computeLiveDelay(C.fragmentDuration,n),u=i.getFragmentRequest(S,C,a,{ignoreIsFinished:!0});if(u)if(h.getLowLatencyEnabled()){var l=u.duration<h.getLiveDelay()?u.startTime:u.startTime+u.duration-h.getLiveDelay();y.setLiveStartTime(l)}else y.setLiveStartTime(u.startTime);else R.debug("setLiveEdgeSeekTarget : getFragmentRequest returned undefined request object");H=y.getStreamStartTime(!1,t),S.getBufferController().setSeekStartTime(H),H>C.mediaInfo.streamInfo.start+C.mediaInfo.streamInfo.duration&&y.seek(H);var d=s.getCurrentManifestUpdate(r.getMetricsFor(o["default"].STREAM));r.updateManifestUpdateInfo(d,{currentTime:H,presentationStartTime:t,latency:t-H,clientTimeOffset:c.getClientTimeOffset()})}}function ge(e){e.fragmentModel===M&&(te(),se(!1),R.info("Stream is complete"))}function ye(e){e.sender===M&&(R.info("OnFragmentLoadingCompleted - Url:",e.request?e.request.url:"undefined",", Range:",e.request.range?e.request.range:"undefined"),l.getIsTextTrack(T)&&se(!1),e.error&&e.request.serviceLocation&&!P&&(de(e.request),se(!1),oe(0)),W&&(X=e.request))}function ve(){fe(!0)}function _e(e){if(e.sender.getStreamProcessor()===S)if(W&&!isNaN(e.startTime)&&(W=!1,M.addExecutedRequest(X)),se(!1),$&&!isNaN(e.startTime)){var t=y.getTime(),n=e.startTime+C.fragmentDuration,r=1.5*C.fragmentDuration;oe(t+r>=n?0:1e3*(n-(t+r))),$=!1}else oe(0)}function Ee(e){e.streamProcessor===S&&(R.info("onFragmentLoadingAbandoned for "+T+", request: "+e.request.url+" has been aborted"),y.isSeeking()||z||(R.info("onFragmentLoadingAbandoned for "+T+", request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),de(e.request)),se(!1),oe(0))}function be(e){e.sender.getStreamProcessor()===S&&te()}function Te(e){if(e.sender.getStreamProcessor()===S){var t=S.getStreamInfo();t&&(e.unintended?M.removeExecutedRequestsAfterTime(e.from,t.duration):M.syncExecutedRequestsWithBufferedRange(S.getBufferController().getBuffer().getAllBufferRanges(),t.duration)),e.hasEnoughSpaceToAppend&&P&&ee()}}function Se(e){e.sender.getStreamProcessor()!==S||e.state!==d["default"].BUFFER_EMPTY||y.isSeeking()||(R.info("Buffer is empty! Stalling!"),Fe(new Date,a.PlayListTrace.REBUFFERING_REASON))}function Ie(e){e.sender.getStreamProcessor()===S&&(te(),se(!1))}function we(){M.abortRequests(),te()}function xe(e){e.sender.getStreamProcessor()===S&&b.isTextEnabled()&&ue(e.index)}function Ae(){!P&&h.getScheduleWhilePaused()||ee()}function De(e){H=e.seekTime,Ce(0),P&&ee();var t=s.getCurrentManifestUpdate(r.getMetricsFor(o["default"].STREAM)),n=C.DVRWindow&&y?C.DVRWindow.end-y.getTime():NaN;r.updateManifestUpdateInfo(t,{latency:n}),B?(R.debug("onPlaybackSeeking for "+T+", call fragmentModel.abortRequests in order to seek quicker"),M.abortRequests()):oe(0)}function Re(e){O&&(O.playbackspeed=e.playbackRate.toString())}function Me(e){H=e}function Ce(e){k=e}function Ne(){return j.getBufferTarget(S,_.isTrackTypePresent(o["default"].VIDEO))}function Pe(){return T}function Le(e){L=e}function Oe(e,t){Fe(e,t),L=null}function Fe(e,t){if(L&&!1===F){var n=O.start,r=e.getTime()-n.getTime();O.duration=r,O.stopreason=t,L.trace.push(O),F=!0}}function Be(){L&&!0===F&&C&&(F=!1,O=new a.PlayListTrace,O.representationid=C.id,O.start=new Date,O.mstart=1e3*y.getTime(),O.playbackspeed=y.getPlaybackRate().toString())}function ke(){B=!1,k=0,H=NaN,L=null,O=null,F=!0,N=!0,G=NaN,V={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},q={},Y=[],P=!0,z=!1,W=!1,X=null,$=!1}function Ue(){n.off(E["default"].DATA_UPDATE_STARTED,be,this),n.off(E["default"].DATA_UPDATE_COMPLETED,he,this),n.off(E["default"].BUFFER_LEVEL_STATE_CHANGED,Se,this),n.off(E["default"].QUALITY_CHANGE_REQUESTED,ce,this),n.off(E["default"].FRAGMENT_LOADING_COMPLETED,ye,this),n.off(E["default"].STREAM_COMPLETED,ge,this),n.off(E["default"].STREAM_INITIALIZED,pe,this),n.off(E["default"].QUOTA_EXCEEDED,Ie,this),n.off(E["default"].BYTES_APPENDED_END_FRAGMENT,_e,this),n.off(E["default"].BUFFER_CLEARED,Te,this),n.off(E["default"].INIT_REQUESTED,ae,this),n.off(E["default"].PLAYBACK_RATE_CHANGED,Re,this),n.off(E["default"].PLAYBACK_SEEKING,De,this),n.off(E["default"].PLAYBACK_STARTED,Ae,this),n.off(E["default"].PLAYBACK_TIME_UPDATED,ve,this),n.off(E["default"].URL_RESOLUTION_FAILED,we,this),n.off(E["default"].FRAGMENT_LOADING_ABANDONED,Ee,this),l.getIsTextTrack(T)&&n.off(E["default"].TIMED_TEXT_REQUESTED,xe,this),te(),fe(!1),ke()}return D={initialize:J,getType:Pe,setSeekTarget:Me,setTimeToLoadDelay:Ce,replaceRequest:de,switchTrackAsked:le,isStarted:Z,start:ee,stop:te,reset:Ue,setPlayList:Le,getBufferTarget:Ne,finalisePlayList:Oe},Q(),D}D.__dashjs_factory_name="ScheduleController",t["default"]=T["default"].getClassFactory(D),e.exports=t["default"]},b8e3:function(e,t){e.exports=!0},ba50:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("f766"),o=r(i);function a(e){e=e||{};var t=void 0,n=void 0,r=e.eventBus,i=e.metricsConstants;function a(){r.off(o["default"].METRICS_INITIALISATION_COMPLETE,a,this),r.trigger(o["default"].BECAME_REPORTING_PLAYER)}function s(e,t){t&&(n=t,r.on(o["default"].METRICS_INITIALISATION_COMPLETE,a,this))}function u(){n=null}function l(e,t){e===i.DVB_ERRORS&&n&&n.report(e,t)}return t={initialize:s,reset:u,handleNewMetric:l},t}t["default"]=dashjs.FactoryMaker.getClassFactory(a),e.exports=t["default"]},bb46:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null};t["default"]=i,e.exports=t["default"]},bb66:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("41ee"),u=i(s),l=function(e){function t(e){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e||null,this.checkForExistenceOnly=!0}return a(t,e),t}(u["default"]);t["default"]=l,e.exports=t["default"]},bc13:function(e,t,n){var r=n("e53d"),i=r.navigator;e.exports=i&&i.userAgent||""},bcaa:function(e,t,n){var r=n("cb7c"),i=n("d3f4"),o=n("a5b8");e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e),a=n.resolve;return a(t),n.promise}},bd58:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("66df"),o=r(i),a=n("8842"),s=r(a);function u(e){e=e||{};var t=void 0,n=this.context,r=void 0,i=void 0,a=void 0,u=void 0,l=void 0,d=void 0,c=!0,f=!0,h=[],p=e.metricsConstants;function m(){r=(0,o["default"])(n).getInstance(),i=(0,s["default"])(n).getInstance(),_()}function g(e,t,n){var r=new XMLHttpRequest,i=function(){var e=h.indexOf(r);-1!==e&&(h.splice(e,1),r.status>=200&&r.status<300?t&&t():n&&n())};h.push(r);try{r.open("GET",e),r.onloadend=i,r.onerror=i,r.send()}catch(o){r.onerror()}}function y(e,t){Array.isArray(t)||(t=[t]),u&&d.isEnabled()&&t.forEach(function(t){var n=r.serialise(t);c&&e!==p.DVB_ERRORS&&(n="metricname="+e+"&"+n),n=l+"?"+n,g(n,null,function(){u=!1})})}function v(e,t){var n=void 0;if(d=t,l=e["dvb:reportingUrl"],!l)throw new Error("required parameter missing (dvb:reportingUrl)");a||(n=e["dvb:probability"]||e["dvb:priority"]||0,n&&(1e3===n||n/1e3>=i.random())&&(u=!0),a=!0)}function _(){a=!1,u=!1,l=null,d=null}function E(){f||(h.forEach(function(e){return e.abort()}),h=[]),_()}return t={report:y,initialize:v,reset:E},m(),t}u.__dashjs_factory_name="DVBReporting",t["default"]=dashjs.FactoryMaker.getClassFactory(u),e.exports=t["default"]},bd9a:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=n("a679"),a=r(o),s=n("467b"),u=r(s),l=n("0757"),d=n("2f4d"),c=r(d),f=n("086a"),h=r(f),p=n("71a8"),m=4,g=36e4,y=36e4,v=.9,_=1e4,E=20,b=80,T=10,S=12,I=20,w=30,x=60,A=600,D=.2,R=.8,M=100,C=50,N=5,P=3,L=1e3,O=3,F=500,B=1,k=500,U=3,H=10,j=5,K=.02,V=0,q=.5,G=50,Y=!1;function z(){var e=void 0,t=void 0,n=void 0,r=void 0,o=void 0,s=void 0,u=void 0,d=void 0,f=void 0,z=void 0,W=void 0,X=void 0,$=void 0,Q=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,oe=void 0,ae=void 0,se=void 0,ue=void 0,le=void 0,de=void 0,ce=void 0,fe=void 0,he=void 0,pe=void 0,me=void 0,ge=void 0,ye=void 0,ve=void 0,_e=void 0,Ee=void 0,be={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso&ms"};function Te(){var e,a;r=[],n=!1,t=!0,u=!0,ae=c["default"].ABR_STRATEGY_DYNAMIC,se=!0,le=!1,W={enabled:!0,ttl:g},X={enabled:!0,ttl:y},o=m,s=void 0,d=E,f=b,z=T,$=NaN,Q=w,J=x,Z=A,ee=D,te=v,ne=_,oe=G,he=!1,pe=R,ge=M,ue={default:Y},de=[],ce=c["default"].MOVING_AVERAGE_SLIDING_WINDOW,me=!1,ve=K,_e=V,Ee=q,e={},i(e,l.HTTPRequest.MPD_TYPE,O),i(e,l.HTTPRequest.XLINK_EXPANSION_TYPE,B),i(e,l.HTTPRequest.MEDIA_SEGMENT_TYPE,P),i(e,l.HTTPRequest.INIT_SEGMENT_TYPE,P),i(e,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,P),i(e,l.HTTPRequest.INDEX_SEGMENT_TYPE,P),i(e,l.HTTPRequest.OTHER_TYPE,P),re=e,a={},i(a,l.HTTPRequest.MPD_TYPE,F),i(a,l.HTTPRequest.XLINK_EXPANSION_TYPE,k),i(a,l.HTTPRequest.MEDIA_SEGMENT_TYPE,L),i(a,l.HTTPRequest.INIT_SEGMENT_TYPE,L),i(a,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,L),i(a,l.HTTPRequest.INDEX_SEGMENT_TYPE,L),i(a,l.HTTPRequest.OTHER_TYPE,L),ie=a,fe={},fe[c["default"].VIDEO]=C,fe[c["default"].AUDIO]=N,ye=!1}function Se(e){if(e!==c["default"].ABR_STRATEGY_DYNAMIC&&e!==c["default"].ABR_STRATEGY_BOLA&&e!==c["default"].ABR_STRATEGY_THROUGHPUT)throw c["default"].BAD_ARGUMENT_ERROR;ae=e}function Ie(){return ae}function we(e){(0,p.checkParameterType)(e,"boolean"),se=e}function xe(){return se}function Ae(e){var t=void 0;for(t=0;t<de.length;t++)if(de[t].rulename===e)return t;return-1}function De(){return de}function Re(e,t,n){if("string"!==typeof e||e!==h["default"].ABANDON_FRAGMENT_RULES&&e!==h["default"].QUALITY_SWITCH_RULES||"string"!==typeof t)throw c["default"].BAD_ARGUMENT_ERROR;var r=Ae(t);-1===r?de.push({type:e,rulename:t,rule:n}):(de[r].type=e,de[r].rule=n)}function Me(e){if(e){var t=Ae(e);-1!==t&&de.splice(t,1)}else de=[]}function Ce(e){(0,p.checkParameterType)(e,"number"),te=e}function Ne(){return te}function Pe(e){(0,p.checkParameterType)(e,"number"),ne=e}function Le(){return ne}function Oe(e){(0,p.checkParameterType)(e,"number"),$=e}function Fe(){return Lt()?.6*pt():isNaN($)?le?I:S:$}function Be(e){(0,p.checkParameterType)(e,"number"),Q=e}function ke(){return Q}function Ue(e){(0,p.checkParameterType)(e,"number"),J=e}function He(){return J}function je(e){(0,p.checkParameterType)(e,"number"),Z=e}function Ke(){return Z}function Ve(e){(0,p.checkParameterType)(e,"number"),ee=e}function qe(){return ee}function Ge(e,t){(0,p.checkParameterType)(t,"number"),(0,p.checkIsVideoOrAudioType)(e),fe[e]=t}function Ye(e){return fe[e]}function ze(e){(0,p.checkParameterType)(e,"number"),d=e}function We(){return d}function Xe(e){(0,p.checkParameterType)(e,"number"),f=e}function $e(){return f}function Qe(e,t){if("boolean"!==typeof e||void 0!==t&&("number"!==typeof t||isNaN(t)))throw c["default"].BAD_ARGUMENT_ERROR;W.enabled=e,void 0!==t&&(W.ttl=t)}function Je(){return W}function Ze(e,t){if("boolean"!==typeof e||void 0!==t&&("number"!==typeof t||isNaN(t)))throw c["default"].BAD_ARGUMENT_ERROR;X.enabled=e,void 0!==t&&(X.ttl=t)}function et(){return X}function tt(e){(0,p.checkParameterType)(e,"number"),z=e}function nt(){return z}function rt(e,t){if("number"!==typeof t||"string"!==typeof e||e!==l.HTTPRequest.MPD_TYPE&&e!==l.HTTPRequest.MEDIA_SEGMENT_TYPE)throw c["default"].BAD_ARGUMENT_ERROR;re[e]=t}function it(e){return Lt()?re[e]*j:re[e]}function ot(e,t){(0,p.checkParameterType)(t,"number"),ie[e]=t}function at(e){return Lt()?ie[e]/H:ie[e]}function st(e){(0,p.checkParameterType)(e,"number"),oe=e}function ut(){return oe}function lt(e){(0,p.checkParameterType)(e,"boolean"),u=e}function dt(){return u}function ct(e){(0,p.checkParameterType)(e,"number"),o=e}function ft(){return o}function ht(e){void 0!==e&&(0,p.checkParameterType)(e,"number"),s=e}function pt(){return me?s||U:s}function mt(e){(0,p.checkParameterType)(e,"boolean"),t=e}function gt(){return t}function yt(e){(0,p.checkParameterType)(e,"boolean"),n=e}function vt(){return n}function _t(e,t){bt(e,t);var n=new a["default"];n.schemeIdUri=e,n.value=t,r.push(n)}function Et(){return r}function bt(e,t){(0,p.checkParameterType)(e,"string"),(0,p.checkParameterType)(t,"string"),r.forEach(function(n,i){n.schemeIdUri===e&&n.value===t&&r.splice(i,1)})}function Tt(){r=[]}function St(){_t(be.scheme,be.value)}function It(e,t){e?ue[e]=!!t:Object.keys(ue).forEach(function(e){It(e,t)})}function wt(e){var t=ue[e];return void 0===t?ue["default"]:t}function xt(){return le}function At(e){(0,p.checkParameterType)(e,"boolean"),le=e}function Dt(e){if(e!==c["default"].MOVING_AVERAGE_SLIDING_WINDOW&&e!==c["default"].MOVING_AVERAGE_EWMA)throw c["default"].BAD_ARGUMENT_ERROR;ce=e}function Rt(){return ce}function Mt(e){(0,p.checkParameterType)(e,"boolean"),he=e}function Ct(){return he}function Nt(e){(0,p.checkParameterType)(e,"number"),pe=e}function Pt(){return pe}function Lt(){return me}function Ot(e){(0,p.checkParameterType)(e,"boolean"),me=e}function Ft(e){(0,p.checkParameterType)(e,"number"),(0,p.checkRange)(e,0,.5),Ee=e}function Bt(){return Ee}function kt(e){(0,p.checkParameterType)(e,"number"),ve=e}function Ut(){return ve}function Ht(e){(0,p.checkParameterType)(e,"number"),_e=e}function jt(){return _e}function Kt(e){(0,p.checkParameterType)(e,"number"),ge=e}function Vt(){return ge}function qt(e){(0,p.checkParameterType)(e,"boolean"),ye=e}function Gt(){return ye}function Yt(){return be}function zt(){}return e={setABRStrategy:Se,getABRStrategy:Ie,setUseDefaultABRRules:we,getUseDefaultABRRules:xe,getABRCustomRules:De,addABRCustomRule:Re,removeABRCustomRule:Me,setBandwidthSafetyFactor:Ce,getBandwidthSafetyFactor:Ne,setAbandonLoadTimeout:Pe,getAbandonLoadTimeout:Le,setLastBitrateCachingInfo:Qe,getLastBitrateCachingInfo:Je,setLastMediaSettingsCachingInfo:Ze,getLastMediaSettingsCachingInfo:et,setStableBufferTime:Oe,getStableBufferTime:Fe,setBufferTimeAtTopQuality:Be,getBufferTimeAtTopQuality:ke,setBufferTimeAtTopQualityLongForm:Ue,getBufferTimeAtTopQualityLongForm:He,setLongFormContentDurationThreshold:je,getLongFormContentDurationThreshold:Ke,setSegmentOverlapToleranceTime:Ve,getSegmentOverlapToleranceTime:qe,getCacheLoadThresholdForType:Ye,setCacheLoadThresholdForType:Ge,setBufferToKeep:ze,getBufferToKeep:We,setBufferAheadToKeep:Xe,getBufferAheadToKeep:$e,setBufferPruningInterval:tt,getBufferPruningInterval:nt,setRetryAttemptsForType:rt,getRetryAttemptsForType:it,setRetryIntervalForType:ot,getRetryIntervalForType:at,setWallclockTimeUpdateInterval:st,getWallclockTimeUpdateInterval:ut,setScheduleWhilePaused:lt,getScheduleWhilePaused:dt,getUseSuggestedPresentationDelay:vt,setUseSuggestedPresentationDelay:yt,setLiveDelayFragmentCount:ct,getLiveDelayFragmentCount:ft,getLiveDelay:pt,setLiveDelay:ht,setUseManifestDateHeaderTimeSource:mt,getUseManifestDateHeaderTimeSource:gt,addUTCTimingSource:_t,removeUTCTimingSource:bt,getUTCTimingSources:Et,clearDefaultUTCTimingSources:Tt,restoreDefaultUTCTimingSources:St,setXHRWithCredentialsForType:It,getXHRWithCredentialsForType:wt,setFastSwitchEnabled:At,getFastSwitchEnabled:xt,setMovingAverageMethod:Dt,getMovingAverageMethod:Rt,setJumpGaps:Mt,getJumpGaps:Ct,setSmallGapLimit:Nt,getSmallGapLimit:Pt,getLowLatencyEnabled:Lt,setLowLatencyEnabled:Ot,setCatchUpPlaybackRate:Ft,getCatchUpPlaybackRate:Bt,setLowLatencyMinDrift:kt,getLowLatencyMinDrift:Ut,setLowLatencyMaxDriftBeforeSeeking:Ht,getLowLatencyMaxDriftBeforeSeeking:jt,setManifestUpdateRetryInterval:Kt,getManifestUpdateRetryInterval:Vt,setKeepProtectionMediaKeys:qt,getKeepProtectionMediaKeys:Gt,getDefaultUtcTimingSource:Yt,reset:zt},Te(),e}z.__dashjs_factory_name="MediaPlayerModel",t["default"]=u["default"].getSingletonFactory(z),e.exports=t["default"]},be13:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},bfac:function(e,t,n){var r=n("0b64");e.exports=function(e,t){return new(r(e))(t)}},c207:function(e,t){},c287:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(t,n){i(this,e),this._test=t,this._converter=n}return r(e,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),e}();t["default"]=o,e.exports=t["default"]},c2ae:function(e,t,n){e.exports=n("e372").PassThrough},c366:function(e,t,n){var r=n("6821"),i=n("9def"),o=n("77f1");e.exports=function(e){return function(t,n,a){var s,u=r(t),l=i(u.length),d=o(a,l);if(e&&n!=n){while(l>d)if(s=u[d++],s!=s)return!0}else for(;l>d;d++)if((e||d in u)&&u[d]===n)return e||d||0;return!e&&-1}}},c367:function(e,t,n){"use strict";var r=n("8436"),i=n("50ed"),o=n("481b"),a=n("36c3");e.exports=n("30f1")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},c3a1:function(e,t,n){var r=n("e6f3"),i=n("1691");e.exports=Object.keys||function(e){return r(e,i)}},c429:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("e09e"),o=r(i),a=n("467b"),s=r(a),u=n("a083"),l=r(u),d=n("4526"),c=r(d),f=n("0502"),h=r(f);function p(e,t){var n=this.context,r=void 0,i=void 0,a=void 0,s=void 0;function u(){i=(0,l["default"])(n).create(e,t),a=(0,c["default"])(n).create(e,t),s=(0,h["default"])(n).create(e,t)}function d(e,t,n,r,u){var l=void 0,d=e.segmentInfoType;d!==o["default"].SEGMENT_BASE&&d!==o["default"].BASE_URL&&f(e,n)?(d===o["default"].SEGMENT_TIMELINE?l=i.getSegments(e,t,n,u):d===o["default"].SEGMENT_TEMPLATE?l=a.getSegments(e,t,n,u):d===o["default"].SEGMENT_LIST&&(l=s.getSegments(e,t,n,u)),r&&r(e,l)):l=e.segments}function f(e,t){var n=e.segments,r=!1,i=void 0,o=void 0;return n&&0!==n.length?(o=n[0].availabilityIdx,i=n[n.length-1].availabilityIdx,r=t<o||t>i):r=!0,r}return r={getSegments:d},u(),r}p.__dashjs_factory_name="SegmentsGetter";var m=s["default"].getClassFactory(p);t["default"]=m,e.exports=t["default"]},c645:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("47e4"),s=r(a),u=n("46ee"),l=r(u),d=n("0757"),c=n("e31d"),f=r(c),h=n("d395"),p=r(h),m=n("d0c1"),g=r(m),y=n("d6ce"),v=r(y),_=n("04f2"),E=r(_),b=n("d547"),T=n("71d3"),S=r(T),I=n("8a43"),w=r(I),x=n("9893"),A=r(x),D=n("1d48"),R=r(D),M=n("467b"),C=r(M);function N(){var e=1e3,t=this.context,n=(0,w["default"])(t).getInstance(),r=void 0,i=void 0;function a(){i={}}function u(){n.trigger(R["default"].METRICS_CHANGED)}function c(e){n.trigger(R["default"].METRIC_CHANGED,{mediaType:e}),u()}function h(e,t,r){n.trigger(R["default"].METRIC_UPDATED,{mediaType:e,metric:t,value:r}),c(e)}function m(e,t,r){n.trigger(R["default"].METRIC_ADDED,{mediaType:e,metric:t,value:r}),c(e)}function y(e){delete i[e],c(e)}function _(){i={},u()}function T(e){return i.hasOwnProperty(e)?i[e]:null}function I(e){var t=void 0;return i.hasOwnProperty(e)?t=i[e]:(t=new l["default"],i[e]=t),t}function x(t,n,r){var i=I(t);i[n].push(r),i[n].length>e&&i[n].shift()}function D(e,t,n,r){var i=new d.HTTPRequestTrace;return i.s=t,i.d=n,i.b=r,e.trace.push(i),e.interval||(e.interval=0),e.interval+=n,i}function M(e,t,n,r,i,o,a,u,l,c,f,h,p,m){var g=new d.HTTPRequest;i&&i!==r&&(M(e,null,n,r,null,null,a,u,null,null,null,h,null,null),g.actualurl=i),g.tcpid=t,g.type=n,g.url=r,g.range=a,g.trequest=u,g.tresponse=l,g.responsecode=f,g._tfinish=c,g._stream=e,g._mediaduration=h,g._responseHeaders=p,g._serviceLocation=o,m?m.forEach(function(e){D(g,e.s,e.d,e.b)}):(delete g.interval,delete g.trace),N(e,s["default"].HTTP_REQUEST,g)}function C(e,t,n,r,i){var o=new f["default"];o.t=t,o.mt=n,o.to=r,i?o.lto=i:delete o.lto,N(e,s["default"].TRACK_SWITCH,o)}function N(e,t,n){x(e,t,n),m(e,t,n)}function P(e,t,n){var r=new p["default"];r.t=t,r.level=n,N(e,s["default"].BUFFER_LEVEL,r)}function L(e,t,n){var r=new g["default"];r.target=n,r.state=t,N(e,s["default"].BUFFER_STATE,r)}function O(e,t,n,r){var i=new v["default"];i.time=t,i.range=r,i.manifestInfo=n,N(e,s["default"].DVR_INFO,i)}function F(e,t){var n=new E["default"],r=I(e).DroppedFrames;n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,r.length>0&&r[r.length-1]==n||N(e,s["default"].DROPPED_FRAMES,n)}function B(e,t,n,r,i,o,a,u,l){var d=new S["default"];d.mediaType=e,d.t=t,d.type=n,d.startTime=r,d.availabilityStartTime=i,d.duration=o,d.quality=a,d.range=u,d.state=l,N(e,s["default"].SCHEDULING_INFO,d)}function k(e,t,n){var r=new A["default"];r.loadingRequests=t,r.executedRequests=n,I(e).RequestsQueue=r,m(e,s["default"].REQUESTS_QUEUE,r)}function U(e,t,n,r,i,a,u,l,d,c){var f=new b.ManifestUpdate;f.mediaType=e,f.type=t,f.requestTime=n,f.fetchTime=r,f.availabilityStartTime=i,f.presentationStartTime=a,f.clientTimeOffset=u,f.currentTime=l,f.buffered=d,f.latency=c,x(o["default"].STREAM,s["default"].MANIFEST_UPDATE,f),m(e,s["default"].MANIFEST_UPDATE,f)}function H(e,t){if(e){for(var n in t)e[n]=t[n];h(e.mediaType,s["default"].MANIFEST_UPDATE,e)}}function j(e,t,n,r,i){if(e){var o=new b.ManifestUpdateStreamInfo;o.id=t,o.index=n,o.start=r,o.duration=i,e.streamInfo.push(o),h(e.mediaType,s["default"].MANIFEST_UPDATE_STREAM_INFO,e)}}function K(e,t,n,r,i,o,a,u){if(e){var l=new b.ManifestUpdateRepresentationInfo;l.id=t,l.index=n,l.streamIndex=r,l.mediaType=i,l.startNumber=a,l.fragmentInfoType=u,l.presentationTimeOffset=o,e.representationInfo.push(l),h(e.mediaType,s["default"].MANIFEST_UPDATE_TRACK_INFO,e)}}function V(e){var t=o["default"].STREAM;e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,N(t,s["default"].PLAY_LIST,e)}function q(e){var t=o["default"].STREAM;N(t,s["default"].DVB_ERRORS,e)}return r={clearCurrentMetricsForType:y,clearAllCurrentMetrics:_,getReadOnlyMetricsFor:T,getMetricsFor:I,addHttpRequest:M,addRepresentationSwitch:C,addBufferLevel:P,addBufferState:L,addDVRInfo:O,addDroppedFrames:F,addSchedulingInfo:B,addRequestsQueue:k,addManifestUpdate:U,updateManifestUpdateInfo:H,addManifestUpdateStreamInfo:j,addManifestUpdateRepresentationInfo:K,addPlayList:V,addDVBErrors:q},a(),r}N.__dashjs_factory_name="MetricsModel",t["default"]=C["default"].getSingletonFactory(N),e.exports=t["default"]},c69a:function(e,t,n){e.exports=!n("9e1e")&&!n("79e5")(function(){return 7!=Object.defineProperty(n("230e")("div"),"a",{get:function(){return 7}}).a})},c7a0:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1};t["default"]=i,e.exports=t["default"]},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},ca5a:function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},cadf:function(e,t,n){"use strict";var r=n("9c6c"),i=n("d53b"),o=n("84f2"),a=n("6821");e.exports=n("01f9")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},cb7c:function(e,t,n){var r=n("d3f4");e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},cbff:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};t["default"]=i,e.exports=t["default"]},cd1c:function(e,t,n){var r=n("e853");e.exports=function(e,t){return new(r(e))(t)}},cd78:function(e,t,n){var r=n("e4ae"),i=n("f772"),o=n("656e");e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e),a=n.resolve;return a(t),n.promise}},cdb1:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("467b"),s=r(a),u=n("4e47"),l=r(u),d=n("12fe"),c=r(d);function f(e){e=e||{};var t=this.context,n=void 0,r=void 0;function i(){n=e.type===o["default"].FRAGMENTED_TEXT?(0,l["default"])(t).create({type:e.type,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,manifestModel:e.manifestModel,errHandler:e.errHandler,streamController:e.streamController,mediaController:e.mediaController,adapter:e.adapter,textController:e.textController,abrController:e.abrController,playbackController:e.playbackController,streamProcessor:e.streamProcessor}):(0,c["default"])(t).create({type:e.type,mimeType:e.mimeType,errHandler:e.errHandler,streamProcessor:e.streamProcessor})}function a(){return n.getBufferControllerType()}function s(e,t){return n.initialize(e,t)}function u(e){return n.createBuffer(e)}function d(){return n.getType()}function f(){return n.getBuffer()}function h(e){n.setBuffer(e)}function p(){return n.getMediaSource()}function m(e){n.setMediaSource(e)}function g(){n.getStreamProcessor()}function y(e){n.setSeekStartTime(e)}function v(){return n.getBufferLevel()}function _(e){n.reset(e)}function E(){return n.getIsBufferingCompleted()}function b(e,t){n.switchInitData(e,t)}function T(){return n.getIsPruningInProgress()}function S(){return n.dischargePreBuffer()}function I(e){return n.getRangeAt(e)}function w(e){var t=f();t.timestampOffset===e||isNaN(e)||(t.timestampOffset=e)}return r={getBufferControllerType:a,initialize:s,createBuffer:u,getType:d,getStreamProcessor:g,setSeekStartTime:y,getBuffer:f,setBuffer:h,getBufferLevel:v,setMediaSource:m,getMediaSource:p,getIsBufferingCompleted:E,getIsPruningInProgress:T,dischargePreBuffer:S,switchInitData:b,getRangeAt:I,reset:_,updateTimestampOffset:w},i(),r}f.__dashjs_factory_name="TextBufferController",t["default"]=s["default"].getClassFactory(f),e.exports=t["default"]},ce10:function(e,t,n){var r=n("69a8"),i=n("6821"),o=n("c366")(!1),a=n("613b")("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);while(t.length>u)r(s,n=t[u++])&&(~o(l,n)||l.push(n));return l}},ceb1:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("2f4d"),s=r(a),u=n("3a0f"),l=r(u),d=n("2cc9"),c=r(d),f=n("cbff"),h=r(f),p=n("5beb");function m(e){var t=this.context,n=void 0,r=void 0;function i(){m(),r=(0,c["default"])(t).create({dashManifestModel:e.dashManifestModel,adapter:e.adapter,baseURLController:e.baseURLController,stream:e.stream,timelineConverter:e.timelineConverter})}function o(e,t){var n=r.getCurrentTrack();if(!n||n.segmentDuration<=0||void 0===e||null===e)return null;var i=Math.floor(e/n.segmentDuration),o=e%n.segmentDuration,s=Math.floor(o*n.tilesHor*n.tilesVert/n.segmentDuration),u=new l["default"];return u.width=Math.floor(n.widthPerTile),u.height=Math.floor(n.heightPerTile),u.x=Math.floor(s%n.tilesHor)*n.widthPerTile,u.y=Math.floor(s/n.tilesHor)*n.heightPerTile,"readThumbnail"in n?n.readThumbnail(e,function(e){u.url=e,t&&t(u)}):(u.url=a(n,i),t&&t(u),u)}function a(e,t){var n=t+e.startNumber,r=(0,p.replaceTokenForTemplate)(e.templateUrl,"Number",n);return r=(0,p.replaceTokenForTemplate)(r,"Time",(n-1)*e.segmentDuration),r=(0,p.replaceTokenForTemplate)(r,"Bandwidth",e.bandwidth),(0,p.unescapeDollarsInTemplate)(r)}function u(e){r.setTrackByIndex(e)}function d(){return r.getCurrentTrackIndex()}function f(){var e=r.getTracks(),t=0;return e.map(function(e){var n=new h["default"];return n.mediaType=s["default"].IMAGE,n.qualityIndex=t++,n.bitrate=e.bitrate,n.width=e.width,n.height=e.height,n})}function m(){r&&r.reset()}return n={get:o,setTrackByIndex:u,getCurrentTrackIndex:d,getBitrateList:f,reset:m},i(),n}m.__dashjs_factory_name="ThumbnailController",t["default"]=o["default"].getClassFactory(m),e.exports=t["default"]},d0a4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("5c40"),u=i(s),l=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --"}return a(t,e),t}(u["default"]),d=new l;t["default"]=d,e.exports=t["default"]},d0c1:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n("4e47"),a=r(o),s=function e(){i(this,e),this.target=null,this.state=a["default"].BUFFER_EMPTY};t["default"]=s,e.exports=t["default"]},d0c6:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("7865"),o=r(i),a=n("bb66"),s=r(a),u=n("6a2d"),l=r(u),d=n("8a43"),c=r(d),f=n("d25a"),h=r(f),p=n("1d48"),m=r(p),g=n("e172"),y=r(g),v=n("467b"),_=r(v);function E(e){e=e||{};var t=this.context,n=(0,c["default"])(t).getInstance(),r=void 0,i=void 0;function a(){var n=(0,h["default"])(t).getInstance();i=(0,o["default"])(t).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,boxParser:n,useFetch:e.mediaPlayerModel.getLowLatencyEnabled()})}function u(e){var t=function(t){n.trigger(m["default"].CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:t})};if(e){var r=new s["default"](e.url);i.load({request:r,success:function(){t(!0)},error:function(){t(!1)}})}else t(!1)}function d(e){var t=function(t,i){n.trigger(m["default"].LOADING_COMPLETED,{request:e,response:t||null,error:i||null,sender:r})};e?i.load({request:e,progress:function(t){n.trigger(m["default"].LOADING_PROGRESS,{request:e,stream:t.stream}),t.data&&n.trigger(m["default"].LOADING_DATA_PROGRESS,{request:e,response:t.data||null,error:null,sender:r})},success:function(e){t(e)},error:function(e,n,r){t(void 0,new l["default"](y["default"].FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,r,n))},abort:function(e){e&&n.trigger(m["default"].LOADING_ABANDONED,{request:e,mediaType:e.mediaType,sender:r})}}):t(void 0,new l["default"](y["default"].FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,y["default"].FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))}function f(){i&&i.abort()}function p(){i&&(i.abort(),i=null)}return r={checkForExistence:u,load:d,abort:f,reset:p},a(),r}E.__dashjs_factory_name="FragmentLoader",t["default"]=_["default"].getClassFactory(E),e.exports=t["default"]},d0d2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){i(this,e)}return r(e,null,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var r=e[n];"urn:mpeg:dash:mp4protection:2011"===r.schemeIdUri.toLowerCase()&&"cenc"===r.value.toLowerCase()&&(t=r)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),r=n.getUint8(t);return t+=20,r>0&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(t,n){var r=e.parsePSSHList(n);return r.hasOwnProperty(t.uuid.toLowerCase())?r[t.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?t.decodeArray(e.pssh.__text).buffer:null}},{key:"parsePSSHList",value:function(e){if(null===e)return[];var t=new DataView(e.buffer||e),n=!1,r={},i=0;while(!n){var o=void 0,a=void 0,s=void 0,u=void 0,l=i;if(i>=t.buffer.byteLength)break;if(o=t.getUint32(i),a=i+o,i+=4,1886614376===t.getUint32(i))if(i+=4,s=t.getUint8(i),0===s||1===s){i++,i+=3,u="";var d=void 0,c=void 0;for(d=0;d<4;d++)c=t.getUint8(i+d).toString(16),u+=1===c.length?"0"+c:c;for(i+=4,u+="-",d=0;d<2;d++)c=t.getUint8(i+d).toString(16),u+=1===c.length?"0"+c:c;for(i+=2,u+="-",d=0;d<2;d++)c=t.getUint8(i+d).toString(16),u+=1===c.length?"0"+c:c;for(i+=2,u+="-",d=0;d<2;d++)c=t.getUint8(i+d).toString(16),u+=1===c.length?"0"+c:c;for(i+=2,u+="-",d=0;d<6;d++)c=t.getUint8(i+d).toString(16),u+=1===c.length?"0"+c:c;i+=6,u=u.toLowerCase(),t.getUint32(i),i+=4,r[u]=t.buffer.slice(l,a),i=a}else i=a;else i=a}return r}}]),e}();t["default"]=o,e.exports=t["default"]},d14c:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("b542"),s=r(a),u=n("e346"),l=r(u),d=n("35f3"),c=r(d),f=n("ceb1"),h=r(f),p=n("8a43"),m=r(p),g=n("1d48"),y=r(g),v=n("589e"),_=r(v),E=n("e172"),b=r(E),T=n("467b"),S=r(T),I=n("6a2d"),w=r(I);function x(e){e=e||{};var t=this.context,n=(0,m["default"])(t).getInstance(),r=e.manifestModel,i=e.dashManifestModel,a=e.mediaPlayerModel,u=e.manifestUpdater,d=e.adapter,f=e.capabilities,p=e.errHandler,g=e.timelineConverter,v=e.metricsModel,E=e.abrController,T=e.playbackController,S=e.mediaController,I=e.textController,x=e.videoModel,A=void 0,D=void 0,R=void 0,M=void 0,C=void 0,N=void 0,P=void 0,L=void 0,O=void 0,F=void 0,B=void 0,k=void 0,U=void 0,H=void 0,j=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function K(){D=(0,_["default"])(t).getInstance().getLogger(A),J(),F=(0,c["default"])(t).create({mediaPlayerModel:a,metricsModel:v,errHandler:p}),V()}function V(){n.on(y["default"].BUFFERING_COMPLETED,Ie,A),n.on(y["default"].DATA_UPDATE_COMPLETED,we,A)}function q(){n.off(y["default"].DATA_UPDATE_COMPLETED,we,A),n.off(y["default"].BUFFERING_COMPLETED,Ie,A)}function G(){O&&(n.on(y["default"].KEY_ERROR,de,A),n.on(y["default"].SERVER_CERTIFICATE_UPDATED,de,A),n.on(y["default"].LICENSE_REQUEST_COMPLETE,de,A),n.on(y["default"].KEY_SYSTEM_SELECTED,de,A),n.on(y["default"].KEY_SESSION_CREATED,de,A),n.on(y["default"].KEY_STATUSES_CHANGED,de,A))}function Y(){O&&(n.off(y["default"].KEY_ERROR,de,A),n.off(y["default"].SERVER_CERTIFICATE_UPDATED,de,A),n.off(y["default"].LICENSE_REQUEST_COMPLETE,de,A),n.off(y["default"].KEY_SYSTEM_SELECTED,de,A),n.off(y["default"].KEY_SESSION_CREATED,de,A),n.off(y["default"].KEY_STATUSES_CHANGED,de,A))}function z(e,t){N=e,O=t,G()}function W(e,t){if(!M){var r=void 0;return n.on(y["default"].CURRENT_TRACK_CHANGED,fe,A),Oe()?(_e(),r=t):r=ve(e,t),M=!0,r}return t}function X(e){for(var t=R?R.length:0,r=!1,i=0;i<t;i++){var o=R[i].getFragmentModel();o.removeExecutedRequestsBeforeTime(te()+ee()),R[i].reset(r,e)}R=[],M=!1,C=!1,Le(!1),n.off(y["default"].CURRENT_TRACK_CHANGED,fe,A)}function $(){return M}function Q(e){for(var t=0;t<R.length;)ce(R[t].getMediaInfo())?(R[t].setMediaSource(e),t++):(R[t].reset(),R.splice(t,1));for(t=0;t<R.length;t++)R[t].dischargePreBuffer();if(0===R.length){var n="No streams to play.";p.manifestError(n,"nostreams",r.getValue()),p.error(new w["default"](b["default"].MANIFEST_ERROR_ID_NOSTREAMS_CODE,n+"nostreams",r.getValue())),D.fatal(n)}}function J(){X(),N=null,P={},L=!1}function Z(){T&&T.pause(),F&&(F.reset(),F=null),J(),q(),Y(),Le(!1)}function ee(){return N?N.duration:NaN}function te(){return N?N.start:NaN}function ne(){return N?N.id:null}function re(){return N}function ie(){return F}function oe(){return B}function ae(){if(!E||!E.hasOwnProperty("getBitrateList")||!d||!d.hasOwnProperty("getAllMediaInfoForType")||!d.hasOwnProperty("getEventsFor"))throw new Error(o["default"].MISSING_CONFIG_ERROR)}function se(e){if(ae(),e===o["default"].IMAGE)return B?B.getBitrateList():[];var t=Te(e);return E.getBitrateList(t)}function ue(){k&&k.start()}function le(){k&&k.stop()}function de(e){e.error&&(p.mediaKeySessionError(e.error.message),p.error(e.error),D.fatal(e.error.message),Z())}function ce(e){var t=e.type,n=void 0,i=void 0;if(t===o["default"].MUXED&&e)return i="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",D.fatal(i),p.manifestError(i,"multiplexedrep",r.getValue()),p.error(new w["default"](b["default"].MANIFEST_ERROR_ID_MULTIPLEXED_CODE,i,r.getValue())),!1;if(t===o["default"].TEXT||t===o["default"].FRAGMENTED_TEXT||t===o["default"].EMBEDDED_TEXT||t===o["default"].IMAGE)return!0;if(n=e.codec,D.debug(t+" codec: "+n),e.contentProtection&&!f.supportsEncryptedMedia())p.capabilityError("encryptedmedia"),p.error(new w["default"](b["default"].CAPABILITY_MEDIAKEYS_ERROR_CODE,b["default"].CAPABILITY_MEDIAKEYS_ERROR_MESSAGE));else if(!f.supportsCodec(n))return i=t+"Codec ("+n+") is not supported.",D.error(i),!1;return!0}function fe(e){if(e.newMediaInfo.streamInfo.id===N.id){var t=xe(e.newMediaInfo);if(t){var n=T.getTime();D.info("Stream -  Process track changed at current time "+n);var i=e.newMediaInfo,a=r.getValue();d.setCurrentMediaInfo(N.id,i.type,i),D.debug("Stream -  Update stream controller"),a.refreshManifestOnSwitchTrack?(D.debug("Stream -  Refreshing manifest for switch track"),H=e,u.refreshManifest()):(t.selectMediaInfo(i),i.type!==o["default"].FRAGMENTED_TEXT?(E.updateTopQualityIndex(i),t.switchTrackAsked(),t.getFragmentModel().abortRequests()):(t.getScheduleController().setSeekTarget(NaN),d.setIndexHandlerTime(t,n),d.resetIndexHandler(t)))}}}function he(n,u,l,c){var f=(0,s["default"])(t).create({type:n.type,mimeType:n.mimeType,timelineConverter:g,adapter:d,manifestModel:r,dashManifestModel:i,mediaPlayerModel:a,metricsModel:v,dashMetrics:e.dashMetrics,baseURLController:e.baseURLController,stream:A,abrController:E,domStorage:e.domStorage,playbackController:T,mediaController:S,streamController:e.streamController,textController:I,errHandler:p});if(f.initialize(l),E.updateTopQualityIndex(n),c?(f.setBuffer(c.buffer),f.getIndexHandler().setCurrentTime(c.currentTime),R[c.replaceIdx]=f):R.push(f),!c||!c.ignoreMediaInfo)if(n.type===o["default"].TEXT||n.type===o["default"].FRAGMENTED_TEXT){for(var h=void 0,m=0;m<u.length;m++)u[m].index===n.index&&(h=m),f.addMediaInfo(u[m]);f.selectMediaInfo(u[h])}else f.addMediaInfo(n,!0)}function pe(n,r){var a=d.getAllMediaInfoForType(N,n),s=null,u=void 0;if(a&&0!==a.length){for(var l=0,c=a.length;l<c;l++)if(s=a[l],n===o["default"].EMBEDDED_TEXT)I.addEmbeddedTrack(s);else{if(!ce(s))continue;S.addTrack(s)}n!==o["default"].EMBEDDED_TEXT&&0!==S.getTracksFor(n,N).length&&(n!==o["default"].IMAGE?((n!==o["default"].FRAGMENTED_TEXT||n===o["default"].FRAGMENTED_TEXT&&I.getTextDefaultEnabled())&&(S.checkInitialMediaSettingsForType(n,N),u=S.getCurrentTrackFor(n,N)),n!==o["default"].FRAGMENTED_TEXT||I.getTextDefaultEnabled()||(u=S.getTracksFor(n,N)[0]),he(u,a,r)):B=(0,h["default"])(t).create({dashManifestModel:i,adapter:d,baseURLController:e.baseURLController,stream:A,timelineConverter:e.timelineConverter}))}else D.info("No "+n+" data.")}function me(){k||(k=(0,l["default"])(t).create(),k.setConfig({manifestUpdater:u,playbackController:T}),ge())}function ge(){var e=d.getEventsFor(N);k.addInlineEvents(e)}function ye(e){k&&k.addInbandEvents(e)}function ve(e,t){ae();var n=x.getElement();me(),L=!0,Ee(o["default"].VIDEO),Ee(o["default"].AUDIO),(null===n||n&&/^VIDEO$/i.test(n.nodeName))&&pe(o["default"].VIDEO,e),pe(o["default"].AUDIO,e),pe(o["default"].TEXT,e),pe(o["default"].FRAGMENTED_TEXT,e),pe(o["default"].EMBEDDED_TEXT,e),pe(o["default"].MUXED,e),pe(o["default"].IMAGE,e);var i=Se(t);if(C=!0,L=!1,0===R.length){var a="No streams to play.";p.manifestError(a,"nostreams",r.getValue()),p.error(new w["default"](b["default"].MANIFEST_ERROR_ID_NOSTREAMS_CODE,a,r.getValue())),D.fatal(a)}else be();return i}function _e(){if(L=!0,ae(),Ee(o["default"].VIDEO),Ee(o["default"].AUDIO),C=!0,L=!1,0===R.length){var e="No streams to play.";p.manifestError(e,"nostreams",r.getValue()),D.debug(e)}else be()}function Ee(e){var t=d.getAdaptationForType(r.getValue(),N.index,e,N);t&&Array.isArray(t.Representation_asArray)&&(t.Representation_asArray=t.Representation_asArray.filter(function(e,n){if(0===n)return!0;var r=i.getCodec(t,n,!0);return!!f.supportsCodec(r)||(D.error("[Stream] codec not supported: "+r),!1)}))}function be(){for(var e=R.length,t=!!P.audio||!!P.video,r=t?new w["default"](b["default"].DATA_UPDATE_FAILED_ERROR_CODE,b["default"].DATA_UPDATE_FAILED_ERROR_MESSAGE):null,i=0;i<e;i++)if(R[i].isUpdating()||L)return;if(C){if(O)for(i=0;i<e&&R[i];i++)R[i].getType()!==o["default"].AUDIO&&R[i].getType()!==o["default"].VIDEO&&R[i].getType()!==o["default"].FRAGMENTED_TEXT||O.initializeForMedia(R[i].getMediaInfo());n.trigger(y["default"].STREAM_INITIALIZED,{streamInfo:N,error:r})}}function Te(e){for(var t=R.length,n=null,r=0;r<t;r++)if(n=R[r],n.getType()===e)return n.getMediaInfo();return null}function Se(e){for(var t={},n=0,r=R.length;n<r;n++)t[R[n].getType()]=R[n].createBuffer(e).getBuffer();return t}function Ie(e){if(e.streamInfo===N){var t=Ae(),r=t.length;if(0!==r){for(var i=0;i<r;i++)if(!t[i].isBufferingCompleted()&&(t[i].getType()===o["default"].AUDIO||t[i].getType()===o["default"].VIDEO))return void D.warn("onBufferingCompleted - One streamProcessor has finished but",t[i].getType(),"one is not buffering completed");D.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),n.trigger(y["default"].STREAM_BUFFERING_COMPLETED,{streamInfo:N})}else D.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}}function we(e){var t=e.sender.getStreamProcessor();t.getStreamInfo()===N&&(P[t.getType()]=e.error,be())}function xe(e){if(!e)return null;var t=Ae();return t.filter(function(t){return t.getType()===e.type})[0]}function Ae(){for(var e=R.length,t=[],n=void 0,r=void 0,i=0;i<e;i++)r=R[i],n=r.getType(),n!==o["default"].AUDIO&&n!==o["default"].VIDEO&&n!==o["default"].FRAGMENTED_TEXT&&n!==o["default"].TEXT||t.push(r);return t}function De(e){D.info("Manifest updated... updating data system wide."),M=!1,L=!0,N=e,k&&ge(),Ee(o["default"].VIDEO),Ee(o["default"].AUDIO);for(var t=0,n=R.length;t<n;t++){var r=R[t],i=d.getMediaInfoForType(N,r.getType());E.updateTopQualityIndex(i),r.addMediaInfo(i,!0)}if(H){i=H.newMediaInfo;if("fragmentedText"!==i.type){var a=xe(H.oldMediaInfo);if(!a)return;a.switchTrackAsked(),H=void 0}}L=!1,be()}function Re(e){return Ne(e,o["default"].VIDEO)&&Ne(e,o["default"].AUDIO)}function Me(e){return Ce(e,o["default"].VIDEO)&&Ce(e,o["default"].AUDIO)}function Ce(e,t){if(!e)return!1;var n=e.getStreamInfo(),i=re();if(!n||!i)return!1;var o=d.getAdaptationForType(r.getValue(),n.index,t,n),a=d.getAdaptationForType(r.getValue(),i.index,t,i);return o&&a?!o.ContentProtection&&!a.ContentProtection:!o&&!a}function Ne(e,t){if(!e)return!1;var n=e.getStreamInfo(),i=re();if(!n||!i)return!1;var o=d.getAdaptationForType(r.getValue(),n.index,t,n),a=d.getAdaptationForType(r.getValue(),i.index,t,i);if(!o||!a)return!o&&!a;var s=o&&a&&o.mimeType===a.mimeType,u=a.Representation_asArray.map(function(e){return e.codecs}),l=o.Representation_asArray.map(function(e){return e.codecs}),c=l.some(function(e){return u.indexOf(e)>-1}),f=l.some(function(e){return u.some(function(t){return Pe(t,e)})});return c||f&&s}function Pe(e,t){for(var n=e.split(".")[0],r=0===t.indexOf(n),i=void 0,o=0;o<j.length;o++)if(j[o].codec===n){i=j[o];break}return i?r||i.compatibleCodecs.some(function(e){return 0===t.indexOf(e)}):r}function Le(e){U=e}function Oe(){return U}function Fe(e,t){me(),pe(o["default"].VIDEO,e),pe(o["default"].AUDIO,e),pe(o["default"].TEXT,e),pe(o["default"].FRAGMENTED_TEXT,e),pe(o["default"].EMBEDDED_TEXT,e),pe(o["default"].MUXED,e),pe(o["default"].IMAGE,e),Se(t),n.on(y["default"].CURRENT_TRACK_CHANGED,fe,A);for(var r=0;r<R.length&&R[r];r++)R[r].getScheduleController().start();Le(!0)}return A={initialize:z,activate:W,deactivate:X,isActive:$,getDuration:ee,getStartTime:te,getId:ne,getStreamInfo:re,preload:Fe,getFragmentController:ie,getThumbnailController:oe,getBitrateListFor:se,startEventController:ue,stopEventController:le,updateData:De,reset:Z,getProcessors:Ae,setMediaSource:Q,isMediaCodecCompatible:Re,isProtectionCompatible:Me,getPreloaded:Oe,addInbandEvents:ye},K(),A}x.__dashjs_factory_name="Stream",t["default"]=S["default"].getClassFactory(x),e.exports=t["default"]},d17b:function(e,t,n){e.exports=n("e372").Transform},d20c:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("589e"),s=r(a),u=n("8a43"),l=r(u),d=n("1d48"),c=r(d),f=n("556a");function h(){var e=this.context,t=(0,l["default"])(e).getInstance(),n=void 0,r=void 0,i=0;function o(){r=(0,s["default"])(e).getInstance().getLogger(n)}function a(){var e="cue_TTML_"+i;return i++,e}function u(e,n,i,o,s){var u="",l=[],d=void 0,h=void 0,p=void 0,m={},g={},y="",v="",_={onOpenTag:function(e,t,n){if("image"===t&&"http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===e){if(!n[" imagetype"]||"PNG"!==n[" imagetype"].value)return void r.warn("smpte-tt imagetype != PNG. Discarded");y=n["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){y&&(g[y]=v.trim()),v="",y=""},onText:function(e){y&&(v+=e)}};if(!e)throw u="no ttml data to parse",new Error(u);m.data=e,t.trigger(c["default"].TTML_TO_PARSE,m);var E=(0,f.fromXML)(m.data,function(e){u=e},_);t.trigger(c["default"].TTML_PARSED,{ttmlString:m.data,ttmlDoc:E});var b=E.getMediaTimeEvents();for(p=0;p<b.length;p++){var T=(0,f.generateISD)(E,b[p],function(e){u=e});T.contents.some(function(e){return e.contents.length})&&(d=b[p]+n<i?i:b[p]+n,h=b[p+1]+n>o?o:b[p+1]+n,d<h&&l.push({start:d,end:h,type:"html",cueID:a(),isd:T,images:s,embeddedImages:g}))}if(""!==u)throw r.error(u),new Error(u);return l}return n={parse:u},o(),n}h.__dashjs_factory_name="TTMLParser",t["default"]=o["default"].getSingletonFactory(h),e.exports=t["default"]},d25a:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("589e"),o=r(i),a=n("82aa"),s=r(a),u=n("467b"),l=r(u),d=n("3e2c"),c=r(d),f=n("502a"),h=r(f);function p(){var e=void 0,t=void 0,n=this.context;function r(){e=(0,o["default"])(n).getInstance().getLogger(t)}function i(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=c["default"].parseBuffer(e),r=(0,s["default"])(n).create();return r.setData(t),r}function a(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new h["default"](0,!1);var r=t instanceof ArrayBuffer?new Uint8Array(t):t,i=void 0,o=0;while(n<r.byteLength){var a=d(r,n),s=f(r,n+4);if(0===a)break;n+a<=r.byteLength&&(e.indexOf(s)>=0?i=new h["default"](n,!0,a):o=n+a),n+=a}return i||new h["default"](o,!1)}function u(e){if(!e||0===e.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var t=i(e),n=t.getBoxes("moof"),r=t.getBoxes("mfhd"),o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,d=void 0,c=void 0,f=void 0,h=void 0,p=void 0,m=void 0,g=void 0,y=void 0,v=void 0,_=void 0,E=void 0,b=void 0;E=t.getBoxes("moof").length,_=r[r.length-1].sequence_number,s=0,d=[];var T=-1,S=-1;for(m=0;m<n.length;m++){var I=n[m],w=I.getChildBoxes("traf");for(h=0;h<w.length;h++){var x=w[h],A=x.getChildBox("tfhd"),D=x.getChildBox("tfdt");l=D.baseMediaDecodeTime;var R=x.getChildBoxes("trun"),M=x.getChildBoxes("subs");for(p=0;p<R.length;p++){var C=R[p];for(s=C.sample_count,v=(A.base_data_offset||0)+(C.data_offset||0),f=0;f<s;f++){c=C.samples[f],o=void 0!==c.sample_duration?c.sample_duration:A.default_sample_duration,u=void 0!==c.sample_size?c.sample_size:A.default_sample_size,a=void 0!==c.sample_composition_time_offset?c.sample_composition_time_offset:0;var N={dts:l,cts:l+a,duration:o,offset:I.offset+v,size:u,subSizes:[u]};if(M)for(g=0;g<M.length;g++){var P=M[g];if(T<P.entry_count-1&&f>S&&(T++,S+=P.entries[T].sample_delta),f==S){N.subSizes=[];var L=P.entries[T];for(y=0;y<L.subsample_count;y++)N.subSizes.push(L.subsamples[y].subsample_size)}}d.push(N),v+=u,l+=o}}b=l-D.baseMediaDecodeTime}}return{sampleList:d,lastSequenceNumber:_,totalDuration:b,numSequences:E}}function l(e){var t=i(e),n=t?t.getBox("mdhd"):void 0;return n?n.timescale:NaN}function d(e,t){return e[t+3]>>>0|e[t+2]<<8>>>0|e[t+1]<<16>>>0|e[t]<<24>>>0}function f(e,t){return String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t])}function p(t){var n=null,r=void 0,o=void 0,a=i(t);if(!a)return n;var s=a.getBox("ftyp"),u=a.getBox("moov");return e.debug("Searching for initialization."),u&&u.isComplete&&(r=s?s.offset:u.offset,o=u.offset+u.size-1,n=r+"-"+o,e.debug("Found the initialization.  Range: "+n)),n}return t={parse:i,findLastTopIsoBoxCompleted:a,getMediaTimescaleFromMoov:l,getSamplesInfo:u,findInitRange:p},r(),t}p.__dashjs_factory_name="BoxParser",t["default"]=l["default"].getSingletonFactory(p),e.exports=t["default"]},d395:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.t=null,this.level=null};t["default"]=i,e.exports=t["default"]},d3f4:function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},d485:function(e,t,n){e.exports=o;var r=n("faa1").EventEmitter,i=n("3fb5");function o(){r.call(this)}i(o,r),o.Readable=n("e372"),o.Writable=n("2c63"),o.Duplex=n("0960"),o.Transform=n("d17b"),o.PassThrough=n("c2ae"),o.Stream=o,o.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",u));var a=!1;function s(){a||(a=!0,e.end())}function u(){a||(a=!0,"function"===typeof e.destroy&&e.destroy())}function l(e){if(d(),0===r.listenerCount(this,"error"))throw e}function d(){n.removeListener("data",i),e.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",d),n.removeListener("close",d),e.removeListener("close",d)}return n.on("error",l),e.on("error",l),n.on("end",d),n.on("close",d),e.on("close",d),e.emit("pipe",n),e}},d53b:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},d547:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},o=function e(){r(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},a=function e(){r(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null};t.ManifestUpdate=i,t.ManifestUpdateStreamInfo=o,t.ManifestUpdateRepresentationInfo=a},d5e2:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("0757"),o=n("467b"),a=r(o),s=n("47e4"),u=r(s),l=n("8b38"),d=r(l);function c(e){e=e||{};var t=void 0,n=e.dashManifestModel,r=e.manifestModel;function o(e){var t=r.getValue();return t?t.Period_asArray[e]:-1}function a(e,t){var n=void 0,r=o(t);return n=x(r,e),null===n?null:n.bandwidth}function s(e,t){var n=o(t);return w(n,e)}function l(e,t){var n=o(t);return D(n,e)}function c(e){return y(e,u["default"].TRACK_SWITCH)}function f(e){return y(e,u["default"].BUFFER_LEVEL)}function h(e){var t=f(e);return t?d["default"].round10(t.level/1e3,-3):0}function p(e){return e?e.RequestsQueue:null}function m(e){if(!e)return null;var t=e.HttpList,n=null,r=void 0,i=void 0;if(!t||t.length<=0)return null;r=t.length,i=r-1;while(i>=0){if(t[i].responsecode){n=t[i];break}i--}return n}function g(e){return e&&e.HttpList?e.HttpList:[]}function y(e,t){if(!e)return null;var n=e[t];return!n||n.length<=0?null:n[n.length-1]}function v(e){return y(e,u["default"].DROPPED_FRAMES)}function _(e){return y(e,u["default"].SCHEDULING_INFO)}function E(e){return y(e,u["default"].MANIFEST_UPDATE)}function b(e){return y(e,u["default"].DVR_INFO)}function T(e,t){var n={},r=void 0,o=void 0,a=void 0;for(r=g(e),a=r.length-1;a>=0;a--)if(o=r[a],o.type===i.HTTPRequest.MPD_TYPE){n=I(o._responseHeaders);break}return void 0===n[t]?null:n[t]}function S(e,t){var n={},r=m(e);return r&&(n=I(r._responseHeaders)),void 0===n[t]?null:n[t]}function I(e){var t={};if(!e)return t;for(var n=e.trim().split("\r\n"),r=0,i=n.length;r<i;r++){var o=n[r],a=o.indexOf(": ");a>0&&(t[o.substring(0,a)]=o.substring(a+2))}return t}function w(e,t){var n=x(e,t,!0);return null!==n?n:-1}function x(e,t,n){var r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=void 0;if(e)for(i=e.AdaptationSet_asArray,s=0;s<i.length;s+=1)for(r=i[s],a=r.Representation_asArray,u=0;u<a.length;u+=1)if(o=a[u],t===o.id)return n?u:o;return null}function A(e,t){return n.getIsTypeOf(e,t)}function D(e,t){var n=void 0,r=void 0,i=void 0,o=void 0;if(!e||!t)return-1;for(r=e.AdaptationSet_asArray,o=0;o<r.length;o+=1)if(n=r[o],i=n.Representation_asArray,A(n,t))return i.length;return-1}return t={getBandwidthForRepresentation:a,getIndexForRepresentation:s,getMaxIndexForBufferType:l,getCurrentRepresentationSwitch:c,getLatestBufferLevelVO:f,getCurrentBufferLevel:h,getCurrentHttpRequest:m,getHttpRequests:g,getCurrentDroppedFrames:v,getCurrentSchedulingInfo:_,getCurrentDVRInfo:b,getCurrentManifestUpdate:E,getLatestFragmentRequestHeaderValueByID:S,getLatestMPDRequestHeaderValueByID:T,getRequestsQueue:p},t}c.__dashjs_factory_name="DashMetrics",t["default"]=a["default"].getSingletonFactory(c),e.exports=t["default"]},d665:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("1d48"),s=r(a),u=n("8a43"),l=r(u),d=n("467b"),c=r(d),f=n("589e"),h=r(f),p="neverReplace",m="alwaysReplace",g="highestBitrate",y="widestRange",v=g;function _(){var e=this.context,t=(0,l["default"])(e).getInstance(),n=void 0,r=void 0,i=void 0,a=void 0,u=void 0,d=void 0,c=void 0,f=[m,p],_=[g,y];function E(){r=(0,h["default"])(e).getInstance().getLogger(n),F()}function b(e,t){var n=D(e),r=S(e,t),i=[];e!==o["default"].FRAGMENTED_TEXT?(n||(n=c.getSavedMediaSettings(e),A(e,n)),r&&0!==r.length&&(n&&r.forEach(function(e){k(n,e)&&i.push(e)}),0===i.length?x(j(r)):i.length>1?x(j(i)):x(i[0]))):x(r[0])}function T(e){if(e){var t=e.type;if(P(t)){var n=e.streamInfo.id;i[n]||(i[n]=K());for(var r=i[n][t].list,o=0,a=r.length;o<a;++o)if(L(r[o],e))return;r.push(e);var s=D(t);s&&k(s,e)&&!I(t,e.streamInfo)&&x(e)}}}function S(e,t){if(!e||!t)return[];var n=t.id;return i[n]&&i[n][e]?i[n][e].list:[]}function I(e,t){return!e||!t||t&&!i[t.id]?null:i[t.id][e].current}function w(e){if(!e)return!1;var t=e.type,n=e.streamInfo.id;return i[n]&&i[n][t]&&L(i[n][t].current,e)}function x(e){if(e&&e.streamInfo){var n=e.type,r=e.streamInfo,o=r.id,a=I(n,r);if(i[o]&&i[o][n]&&!L(e,a)){i[o][n].current=e,i[o][n].current&&t.trigger(s["default"].CURRENT_TRACK_CHANGED,{oldMediaInfo:a,newMediaInfo:e,switchMode:d[n]});var u=B(e);u&&i[o][n].storeLastSettings&&(u.roles&&(u.role=u.roles[0],delete u.roles),u.accessibility&&(u.accessibility=u.accessibility[0]),u.audioChannelConfiguration&&(u.audioChannelConfiguration=u.audioChannelConfiguration[0]),c.setSavedMediaSettings(n,u))}}}function A(e,t){e&&t&&(a[e]=t)}function D(e){return e?a[e]:null}function R(e,t){var n=-1!==f.indexOf(t);n?d[e]=t:r.warn("Track switch mode is not supported: "+t)}function M(e){return d[e]}function C(e){var t=-1!==_.indexOf(e);t?u=e:r.warn("Track selection mode is not supported: "+e)}function N(){return u||v}function P(e){return e===o["default"].AUDIO||e===o["default"].VIDEO||e===o["default"].TEXT||e===o["default"].FRAGMENTED_TEXT||e===o["default"].IMAGE}function L(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;var n=e.id===t.id,r=e.viewpoint===t.viewpoint,i=e.lang===t.lang,o=e.roles.toString()===t.roles.toString(),a=e.accessibility.toString()===t.accessibility.toString(),s=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&r&&i&&o&&a&&s}function O(e){e&&e.domStorage&&(c=e.domStorage)}function F(){i={},H(),U()}function B(e){var t={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration},n=t.lang||t.viewpoint||t.role&&t.role.length>0||t.accessibility&&t.accessibility.length>0||t.audioChannelConfiguration&&t.audioChannelConfiguration.length>0;return n?t:null}function k(e,t){var n=!e.lang||e.lang===t.lang,r=!e.viewpoint||e.viewpoint===t.viewpoint,i=!e.role||!!t.roles.filter(function(t){return t===e.role})[0],o=!e.accessibility||!!t.accessibility.filter(function(t){return t===e.accessibility})[0],a=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter(function(t){return t===e.audioChannelConfiguration})[0];return n&&r&&i&&o&&a}function U(){d={audio:m,video:p}}function H(){a={audio:null,video:null}}function j(e){var t=N(),n=[],i=function(e){var t=0,n=[],r=void 0;return e.forEach(function(e){r=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})),r>t?(t=r,n=[e]):r===t&&n.push(e)}),n},o=function(e){var t=0,n=[],r=void 0;return e.forEach(function(e){r=e.representationCount,r>t?(t=r,n=[e]):r===t&&n.push(e)}),n};switch(t){case g:n=i(e),n.length>1&&(n=o(n));break;case y:n=o(e),n.length>1&&(n=i(e));break;default:r.warn("Track selection mode is not supported: "+t);break}return n[0]}function K(){return{audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}}}return n={checkInitialMediaSettingsForType:b,addTrack:T,getTracksFor:S,getCurrentTrackFor:I,isCurrentTrack:w,setTrack:x,setInitialSettings:A,getInitialSettings:D,setSwitchMode:R,getSwitchMode:M,setSelectionModeForInitialTrack:C,getSelectionModeForInitialTrack:N,isMultiTrackSupportedByType:P,isTracksEqual:L,setConfig:O,reset:F},E(),n}_.__dashjs_factory_name="MediaController";var E=c["default"].getSingletonFactory(_);E.TRACK_SWITCH_MODE_NEVER_REPLACE=p,E.TRACK_SWITCH_MODE_ALWAYS_REPLACE=m,E.TRACK_SELECTION_MODE_HIGHEST_BITRATE=g,E.TRACK_SELECTION_MODE_WIDEST_RANGE=y,E.DEFAULT_INIT_TRACK_SELECTION_MODE=v,c["default"].updateSingletonFactory(_.__dashjs_factory_name,E),t["default"]=E,e.exports=t["default"]},d6ce:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.time=null,this.range=null,this.manifestInfo=null};t["default"]=i,e.exports=t["default"]},d82e:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){i(this,e),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null}return r(e,[{key:"isMediaInfoEqual",value:function(e){if(!e)return!1;var t=this.id===e.id,n=this.viewpoint===e.viewpoint,r=this.lang===e.lang,i=this.roles.toString()===e.roles.toString(),o=this.accessibility.toString()===e.accessibility.toString(),a=this.audioChannelConfiguration.toString()===e.audioChannelConfiguration.toString();return t&&n&&r&&i&&o&&a}}]),e}();t["default"]=o,e.exports=t["default"]},d864:function(e,t,n){var r=n("79aa");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},d8e8:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},d9f6:function(e,t,n){var r=n("e4ae"),i=n("794b"),o=n("1bc3"),a=Object.defineProperty;t.f=n("8e60")?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},daa7:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("e217"),o=r(i),a=n("5fb0"),s=r(a),u=n("d0a4"),l=r(u),d=n("6a2d"),c=r(d),f=n("b4be"),h=r(f),p=n("f288"),m=r(p),g=n("7b70"),y=r(g);function v(e){e=e||{};var t=this.context,n=e.eventBus,r=e.events,i=e.debug,a=void 0,u=void 0,d=void 0,f=void 0,p=void 0,g=void 0,v=void 0,_=void 0;function E(){u=i.getLogger(a),d=null,f=null,p=null,g=[],_=(0,o["default"])(t).getInstance(),v=F()}function b(){var e=g.length,t=void 0;0!==e?function(){for(var i=function(e){B(e),0===g.length&&(f?(f.removeEventListener("encrypted",v),f.setMediaKeys(null).then(function(){n.trigger(r.TEARDOWN_COMPLETE)})):n.trigger(r.TEARDOWN_COMPLETE))},o=0;o<e;o++)t=g[o],function(e){t.session.closed.then(function(){i(e)}),O(t)["catch"](function(){i(e)})}(t)}():n.trigger(r.TEARDOWN_COMPLETE)}function T(){for(var e=void 0,t=0;t<g.length;t++)e=g[t],e.getUsable()||O(e)["catch"](function(){B(e)})}function S(){return d}function I(){for(var e=[],t=0;t<g.length;t++)g[t].initData&&e.push(g[t].initData);return e}function w(e){L(e,0)}function x(e){e.mksa.createMediaKeys().then(function(t){d=e.keySystem,p=t,f?f.setMediaKeys(p).then(function(){n.trigger(r.INTERNAL_KEY_SYSTEM_SELECTED)}):n.trigger(r.INTERNAL_KEY_SYSTEM_SELECTED)})["catch"](function(){n.trigger(r.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+e.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})}function A(e){f!==e&&(f&&(f.removeEventListener("encrypted",v),f.setMediaKeys&&f.setMediaKeys(null)),f=e,f&&(f.addEventListener("encrypted",v),f.setMediaKeys&&p&&f.setMediaKeys(p)))}function D(e){if(!d||!p)throw new Error("Can not set server certificate until you have selected a key system");p.setServerCertificate(e).then(function(){u.info("DRM: License server certificate successfully updated."),n.trigger(r.SERVER_CERTIFICATE_UPDATED)})["catch"](function(e){n.trigger(r.SERVER_CERTIFICATE_UPDATED,{error:new c["default"](l["default"].SERVER_CERTIFICATE_UPDATED_ERROR_CODE,l["default"].SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)})})}function R(e,t,i){if(!d||!p)throw new Error("Can not create sessions until you have selected a key system");var o=p.createSession(i),a=U(o,e,i),s=this.getKeySystem(),f=s.systemString===y["default"].CLEARKEY_KEYSTEM_STRING&&t&&t.clearkeys?"keyids":"cenc";o.generateRequest(f,e).then(function(){u.debug("DRM: Session created.  SessionID = "+a.getSessionID()),n.trigger(r.KEY_SESSION_CREATED,{data:a})})["catch"](function(e){B(a),n.trigger(r.KEY_SESSION_CREATED,{data:null,error:new c["default"](l["default"].KEY_SESSION_CREATED_ERROR_CODE,l["default"].KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)})})}function M(e,t){var i=e.session;_.isClearKey(d)&&(t=t.toJWK()),i.update(t)["catch"](function(t){n.trigger(r.KEY_ERROR,{data:new c["default"](l["default"].MEDIA_KEYERR_CODE,"Error sending update() message! "+t.name,e)})})}function C(e,t,i){if(!d||!p)throw new Error("Can not load sessions until you have selected a key system");for(var o=0;o<g.length;o++)if(e===g[o].sessionId)return void u.warn("DRM: Ignoring session ID because we have already seen it!");var a=p.createSession(i),s=U(a,t,i,e);a.load(e).then(function(t){t?(u.debug("DRM: Session loaded.  SessionID = "+s.getSessionID()),n.trigger(r.KEY_SESSION_CREATED,{data:s})):(B(s),n.trigger(r.KEY_SESSION_CREATED,{data:null,error:new c["default"](l["default"].KEY_SESSION_CREATED_ERROR_CODE,l["default"].KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+e+")")}))})["catch"](function(t){B(s),n.trigger(r.KEY_SESSION_CREATED,{data:null,error:new c["default"](l["default"].KEY_SESSION_CREATED_ERROR_CODE,l["default"].KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+e+")! "+t.name)})})}function N(e){var t=e.session;t.remove().then(function(){u.debug("DRM: Session removed.  SessionID = "+e.getSessionID()),n.trigger(r.KEY_SESSION_REMOVED,{data:e.getSessionID()})},function(t){n.trigger(r.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+e.getSessionID()+"). "+t.name})})}function P(e){O(e)["catch"](function(t){B(e),n.trigger(r.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.getSessionID()+") "+t.name})})}function L(e,t){void 0!==navigator.requestMediaKeySystemAccess&&"function"===typeof navigator.requestMediaKeySystemAccess?function(t){var i=e[t].ks,o=e[t].configs,a=i.systemString;a===y["default"].PLAYREADY_KEYSTEM_STRING&&"required"===o[0].persistentState&&(a+=".recommendation"),navigator.requestMediaKeySystemAccess(a,o).then(function(e){var t="function"===typeof e.getConfiguration?e.getConfiguration():null,o=new m["default"](i,t);o.mksa=e,n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{data:o})})["catch"](function(i){++t<e.length?L(e,t):n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! "+i.message})})}(t):n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Insecure origins are not allowed"})}function O(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function F(){return{handleEvent:function(e){switch(e.type){case"encrypted":if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;n.trigger(r.NEED_KEY,{key:new s["default"](t,e.initDataType)})}break}}}}function B(e){for(var t=0;t<g.length;t++)if(g[t]===e){g.splice(t,1);break}}function k(e){var t=void 0,n=void 0;return e&&e.length>0&&(e[0]&&("string"===typeof e[0]?t=e[0]:n=e[0]),e[1]&&("string"===typeof e[1]?t=e[1]:n=e[1])),{status:t,keyId:n}}function U(e,t,i,o){var a={session:e,initData:t,sessionId:o,handleEvent:function(e){switch(e.type){case"keystatuseschange":n.trigger(r.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach(function(){var e=k(arguments);switch(e.status){case"expired":n.trigger(r.INTERNAL_KEY_STATUS_CHANGED,{error:new c["default"](l["default"].KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,l["default"].KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)});break;default:n.trigger(r.INTERNAL_KEY_STATUS_CHANGED,e);break}});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;n.trigger(r.INTERNAL_KEY_MESSAGE,{data:new h["default"](this,t,void 0,e.messageType)});break}},getSessionID:function(){return e.sessionId},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getUsable:function(){var t=!1;return e.keyStatuses.forEach(function(){var e=k(arguments);"usable"===e.status&&(t=!0)}),t},getSessionType:function(){return i}};return e.addEventListener("keystatuseschange",a),e.addEventListener("message",a),e.closed.then(function(){B(a),u.debug("DRM: Session closed.  SessionID = "+a.getSessionID()),n.trigger(r.KEY_SESSION_CLOSED,{data:a.getSessionID()})}),g.push(a),a}return a={getAllInitData:I,requestKeySystemAccess:w,getKeySystem:S,selectKeySystem:x,setMediaElement:A,setServerCertificate:D,createKeySession:R,updateKeySession:M,loadKeySession:C,removeKeySession:N,closeKeySession:P,stop:T,reset:b},E(),a}v.__dashjs_factory_name="ProtectionModel_21Jan2015",t["default"]=dashjs.FactoryMaker.getClassFactory(v),e.exports=t["default"]},db66:function(e,t,n){"use strict";(function(e){var t={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},n=function(e){var n=e;return t.hasOwnProperty(e)&&(n=t[e]),String.fromCharCode(n)},r=15,i=32,o={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},a={17:2,18:4,21:6,22:8,23:10,19:13,20:15},s={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},u={25:2,26:4,29:6,30:8,31:10,27:13,28:15},l=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],d={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},c=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},f=function(e,t,n,r,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1};f.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var h=function(e,t,n,r,i,o){this.uchar=e||" ",this.penState=new f(t,n,r,i,o)};h.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var p=function(){this.chars=[];for(var e=0;e<i;e++)this.chars.push(new h);this.pos=0,this.currPenState=new f};p.prototype={equals:function(e){for(var t=!0,n=0;n<i;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<i;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<i;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(d.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>i&&(d.log("ERROR","Too large cursor position "+this.pos),this.pos=i)},moveCursor:function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){e>=144&&this.backSpace();var t=n(e);this.pos>=i?d.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},clearFromPos:function(e){var t;for(t=e;t<i;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;n<i;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e);var t=this.chars[this.pos];t.setPenState(this.currPenState)}};var m=function(){this.rows=[];for(var e=0;e<r;e++)this.rows.push(new p);this.currRow=r-1,this.nrRollUpRows=null,this.reset()};m.prototype={reset:function(){for(var e=0;e<r;e++)this.rows[e].clear();this.currRow=r-1},equals:function(e){for(var t=!0,n=0;n<r;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<r;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<r;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){var e=this.rows[this.currRow];e.backSpace()},clearToEndOfRow:function(){var e=this.rows[this.currRow];e.clearToEndOfRow()},insertChar:function(e){var t=this.rows[this.currRow];t.insertChar(e)},setPen:function(e){var t=this.rows[this.currRow];t.setPenStyles(e)},moveCursor:function(e){var t=this.rows[this.currRow];t.moveCursor(e)},setCursor:function(e){d.log("INFO","setCursor: "+e);var t=this.rows[this.currRow];t.setCursor(e)},setPAC:function(e){d.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n=this.rows[this.currRow];if(null!==e.indent){var r=e.indent,i=Math.max(r-1,0);n.setCursor(e.indent),e.color=n.chars[i].penState.foreground}var o={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(o)},setBkgData:function(e){d.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null!==this.nrRollUpRows){d.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),d.log("INFO","Rolling up")}else d.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",i=-1,o=0;o<r;o++){var a=this.rows[o].getTextString();a&&(i=o+1,e?t.push("Row "+i+': "'+a+'"'):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},getTextAndFormat:function(){return this.rows}};var g=function(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new m,this.nonDisplayedMemory=new m,this.lastOutputScreen=new m,this.currRollUpRow=this.displayedMemory.rows[r-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};g.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[r-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,d.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";d.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(d.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){d.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){d.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){d.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){d.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){d.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){d.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){d.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){d.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){d.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){d.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){d.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(d.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,d.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){d.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}d.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=d.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};var y=function(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new g(1,t),new g(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};y.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,r,i,o=!1;this.lastTime=e,d.setTime(e);for(var a=0;a<t.length;a+=2)if(r=127&t[a],i=127&t[a+1],r>=16&&r<=31&&r===this.lastCmdA&&i===this.lastCmdB)this.lastCmdA=null,this.lastCmdB=null,d.log("DEBUG","Repeated command ("+c([r,i])+") is dropped");else if(0!==r||0!==i){if(d.log("DATA","["+c([t[a],t[a+1]])+"] -> ("+c([r,i])+")"),n=this.parseCmd(r,i),n||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n&&(o=this.parseChars(r,i),o))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(o)}else d.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,d.log("WARNING","Couldn't parse cleaned data "+c([r,i])+" orig: "+c([t[a],t[a+1]])))}else this.dataCounters.padding+=2},parseCmd:function(e,t){var n=null,r=(20===e||21===e||28===e||29===e)&&32<=t&&t<=47,i=(23===e||31===e)&&33<=t&&t<=35;if(!r&&!i)return!1;n=20===e||21===e||23===e?1:2;var o=this.channels[n-1];return 20===e||21===e||28===e||29===e?32===t?o.cc_RCL():33===t?o.cc_BS():34===t?o.cc_AOF():35===t?o.cc_AON():36===t?o.cc_DER():37===t?o.cc_RU(2):38===t?o.cc_RU(3):39===t?o.cc_RU(4):40===t?o.cc_FON():41===t?o.cc_RDC():42===t?o.cc_TR():43===t?o.cc_RTD():44===t?o.cc_EDM():45===t?o.cc_CR():46===t?o.cc_ENM():47===t&&o.cc_EOC():o.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if(n=17===e?1:2,n!==this.currChNr)return d.log("ERROR","Mismatch channel in midrow parsing"),!1;var r=this.channels[n-1];return r.insertChars([32]),r.cc_MIDROW(t),d.log("DEBUG","MIDROW ("+c([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0}return!1},parsePAC:function(e,t){var n=null,r=null,i=(17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127,l=(16===e||24===e)&&64<=t&&t<=95;if(!i&&!l)return!1;n=e<=23?1:2,r=64<=t&&t<=95?1===n?o[e]:s[e]:1===n?a[e]:u[e];var d=this.interpretPAC(r,t),c=this.channels[n-1];return c.setPAC(d),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1===(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},parseChars:function(e,t){var r=null,i=null,o=null;if(e>=25?(r=2,o=e-8):(r=1,o=e),17<=o&&o<=19){var a=t;a=17===o?t+80:18===o?t+112:t+144,d.log("INFO","Special char '"+n(a)+"' in channel "+r),i=[a],this.lastCmdA=e,this.lastCmdB=t}else 32<=e&&e<=127&&(i=0===t?[e]:[e,t],this.lastCmdA=null,this.lastCmdB=null);if(i){var s=c(i);d.log("DEBUG","Char codes =  "+s.join(","))}return i},parseBackgroundAttributes:function(e,t){var n,r,i,o,a=(16===e||24===e)&&32<=t&&t<=47,s=(23===e||31===e)&&45<=t&&t<=47;return!(!a&&!s)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=l[r],t%2===1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,o=this.channels[i-1],o.setBkgData(n),this.lastCmdA=e,this.lastCmdB=t,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}};var v=function(e,t,n){var r=0,i=t,o=0,a=[],s=function(e,t,n,r){if(4!==e||t<8)return null;var i=n.getUint8(r),o=n.getUint16(r+1),a=n.getUint32(r+3),s=n.getUint8(r+7);return 181==i&&49==o&&1195456820==a&&3==s};while(i<t+n){if(r=e.getUint32(i),o=31&e.getUint8(i+4),6===o){var u=i+5,l=-1;while(u<i+4+r-1){l=0;var d=255;while(255===d)d=e.getUint8(u),l+=d,u++;var c=0;d=255;while(255===d)d=e.getUint8(u),c+=d,u++;s(l,c,e,u)&&a.push([u,c]),u+=c}}i+=r+4}return a},_=function(e,t){var n=t[0],r=[[],[]];n+=8;var i=31&e.getUint8(n);n+=2;for(var o=0;o<i;o++){var a=e.getUint8(n),s=4&a,u=3&a;n++;var l=e.getUint8(n);n++;var d=e.getUint8(n);n++,s&&(127&l)+(127&d)!==0&&(0===u?(r[0].push(l),r[0].push(d)):1===u&&(r[1].push(l),r[1].push(d)))}return r};e.logger=d,e.PenState=f,e.CaptionScreen=m,e.Cea608Parser=y,e.findCea608Nalus=v,e.extractCea608DataFromRange=_})(t)},dbdb:function(e,t,n){var r=n("584a"),i=n("e53d"),o="__core-js_shared__",a=i[o]||(i[o]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n("b8e3")?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},dc14:function(e,t,n){"use strict";(function(t,r){var i=n("966d");function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){F(t,e)}}e.exports=_;var a,s=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?setImmediate:i.nextTick;_.WritableState=v;var u=n("3a7c");u.inherits=n("3fb5");var l={deprecate:n("b7d1")},d=n("429b"),c=n("8707").Buffer,f=r.Uint8Array||function(){};function h(e){return c.from(e)}function p(e){return c.isBuffer(e)||e instanceof f}var m,g=n("4681");function y(){}function v(e,t){a=a||n("b19a"),e=e||{};var r=t instanceof a;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,s=e.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===e.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){A(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function _(e){if(a=a||n("b19a"),!m.call(_,this)&&!(this instanceof a))return new _(e);this._writableState=new v(e,this),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),d.call(this)}function E(e,t){var n=new Error("write after end");e.emit("error",n),i.nextTick(t,n)}function b(e,t,n,r){var o=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"===typeof n||void 0===n||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),i.nextTick(r,a),o=!1),o}function T(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=c.from(t,n)),t}function S(e,t,n,r,i,o){if(!n){var a=T(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else I(e,t,!1,s,r,i,o);return u}function I(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function w(e,t,n,r,o){--t.pendingcb,n?(i.nextTick(o,r),i.nextTick(L,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(o(r),e._writableState.errorEmitted=!0,e.emit("error",r),L(e,t))}function x(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function A(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(x(n),t)w(e,n,r,t,i);else{var o=C(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||M(e,n),r?s(D,e,n,o,i):D(e,n,o,i)}}function D(e,t,n,r){n||R(e,t),t.pendingcb--,r(),L(e,t)}function R(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function M(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;var s=0,u=!0;while(n)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,I(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{while(n){var l=n.chunk,d=n.encoding,c=n.callback,f=t.objectMode?1:l.length;if(I(e,t,!1,f,l,d,c),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function N(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),L(e,t)})}function P(e,t){t.prefinished||t.finalCalled||("function"===typeof e._final?(t.pendingcb++,t.finalCalled=!0,i.nextTick(N,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function L(e,t){var n=C(t);return n&&(P(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function O(e,t,n){t.ending=!0,L(e,t),n&&(t.finished?i.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function F(e,t,n){var r=e.entry;e.entry=null;while(r){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}u.inherits(_,d),v.prototype.getBuffer=function(){var e=this.bufferedRequest,t=[];while(e)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(v.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(m=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(e){return!!m.call(this,e)||this===_&&(e&&e._writableState instanceof v)}})):m=function(e){return e instanceof this},_.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},_.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=!r.objectMode&&p(e);return o&&!c.isBuffer(e)&&(e=h(e)),"function"===typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!==typeof n&&(n=y),r.ended?E(this,n):(o||b(this,r,e,n))&&(r.pendingcb++,i=S(this,r,o,e,t,n)),i},_.prototype.cork=function(){var e=this._writableState;e.corked++},_.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||M(this,e))},_.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},_.prototype._writev=null,_.prototype.end=function(e,t,n){var r=this._writableState;"function"===typeof e?(n=e,e=null,t=null):"function"===typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||O(this,r,n)},Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),_.prototype.destroy=g.destroy,_.prototype._undestroy=g.undestroy,_.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n("4362"),n("c8ba"))},dcbc:function(e,t,n){var r=n("2aba");e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},de72:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("4e47"),o=r(i),a=n("8a43"),s=r(a),u=n("1d48"),l=r(u),d=n("467b"),c=r(d),f=n("589e"),h=r(f),p=n("9485"),m=r(p),g=n("2f4d"),y=r(g);function v(e){e=e||{};var t=.5,n=this.context,r=(0,s["default"])(n).getInstance(),i=e.metricsModel,a=e.dashMetrics,u=void 0,d=void 0,c=void 0;function f(){d=(0,h["default"])(n).getInstance().getLogger(u),_(),r.on(l["default"].PLAYBACK_SEEKING,E,u)}function p(){if(!i||!i.hasOwnProperty("getReadOnlyMetricsFor")||!a||!a.hasOwnProperty("getCurrentBufferLevel"))throw new Error(y["default"].MISSING_CONFIG_ERROR)}function g(e){var r=(0,m["default"])(n).create();if(!e||!e.hasOwnProperty("getMediaType"))return r;p();var s=e.getMediaType(),u=i.getReadOnlyMetricsFor(s),l=u.BufferState.length>0?u.BufferState[u.BufferState.length-1]:null,c=e.getRepresentationInfo(),f=c.fragmentDuration;if(!l||!v(s,l)||!f)return r;if(l.state===o["default"].BUFFER_EMPTY)d.debug("Switch to index 0; buffer is empty."),r.quality=0,r.reason="InsufficientBufferRule: Buffer is empty";else{var h=e.getMediaInfo(),g=e.getAbrController(),y=g.getThroughputHistory(),_=a.getCurrentBufferLevel(u),E=y.getAverageThroughput(s),b=y.getAverageLatency(s),T=E*(_/f)*t;r.quality=g.getQualityForBitrate(h,T,b),r.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return r}function v(e,t){c[e]=c[e]||{};var n=!1;return c[e].firstBufferLoadedEvent?n=!0:t&&t.state===o["default"].BUFFER_LOADED&&(c[e].firstBufferLoadedEvent=!0,n=!0),n}function _(){c={}}function E(){_()}function b(){_(),r.off(l["default"].PLAYBACK_SEEKING,E,u)}return u={getMaxIndex:g,reset:b},f(),u}v.__dashjs_factory_name="InsufficientBufferRule",t["default"]=c["default"].getClassFactory(v),e.exports=t["default"]},df7c:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return r.exec(e).slice(1)};function o(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var a=i>=0?arguments[i]:e.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,r="/"===a.charAt(0))}return t=n(o(t.split("/"),function(e){return!!e}),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),i="/"===a(e,-1);return e=n(o(e.split("/"),function(e){return!!e}),!r).join("/"),e||r||(e="."),e&&i&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(o(e,function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var l=[];for(u=s;u<i.length;u++)l.push("..");return l=l.concat(o.slice(s)),l.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=i(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=i(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return i(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("4362"))},df86:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};i.INITIAL_PLAYOUT_START_REASON="initial_playout",i.SEEK_START_REASON="seek",i.RESUME_FROM_PAUSE_START_REASON="resume",i.METRICS_COLLECTION_START_REASON="metrics_collection_start";var o=function e(){r(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};o.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",o.REBUFFERING_REASON="rebuffering",o.USER_REQUEST_STOP_REASON="user_request",o.END_OF_PERIOD_STOP_REASON="end_of_period",o.END_OF_CONTENT_STOP_REASON="end_of_content",o.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",o.FAILURE_STOP_REASON="failure",t.PlayList=i,t.PlayListTrace=o},e09e:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){i(this,e),this.init()}return r(e,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight"}}]),e}(),a=new o;t["default"]=a,e.exports=t["default"]},e11e:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},e172:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("5c40"),u=i(s),l=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENTS_UPDATE_FAILED_ERROR_CODE=13,this.SEGMENTS_UNAVAILABLE_ERROR_CODE=14,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_MANIFEST="manifest",this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_CONTENT="content",this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_INITIALIZATION="initialization",this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.DOWNLOAD_ERROR_ID_XLINK="xlink",this.MANIFEST_ERROR_ID_CODEC_CODE=30,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segments",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="buffer is not defined",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : "}return a(t,e),t}(u["default"]),d=new l;t["default"]=d,e.exports=t["default"]},e217:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("d0d2"),o=r(i),a=n("3a92"),s=r(a),u=n("588f"),l=r(u),d=n("5444"),c=r(d),f=n("0d2b"),h=r(f),p=n("3844"),m=r(p),g=n("45f6"),y=r(g),v=n("6c78"),_=r(v),E=n("2abb"),b=r(E),T=n("7b70"),S=r(T);function I(){var e=this.context,t=void 0,n=void 0,r=void 0,i=void 0,a=void 0,u=void 0,d=void 0;function f(e){e&&(e.debug&&(n=e.debug,r=n.getLogger(t)),e.BASE64&&(a=e.BASE64))}function p(){i=[];var t=void 0;t=(0,h["default"])(e).getInstance({BASE64:a}),i.push(t),t=(0,c["default"])(e).getInstance({BASE64:a}),i.push(t),t=(0,s["default"])(e).getInstance({BASE64:a}),i.push(t),u=t,t=(0,l["default"])(e).getInstance({BASE64:a,debug:n}),i.push(t),d=t}function g(){return i}function v(e){for(var t=0;t<i.length;t++)if(i[t].systemString===e)return i[t];return null}function E(e){return e===u||e===d}function T(e,t){if(e.byteLength===t.byteLength){for(var n=new Uint8Array(e),r=new Uint8Array(t),i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}return!1}function I(e){var t=void 0,n=void 0,r=void 0,o=void 0,a=[];if(e)for(r=0;r<i.length;++r)for(n=i[r],o=0;o<e.length;++o)if(t=e[o],t.schemeIdUri.toLowerCase()===n.schemeIdURI){var s=n.getInitData(t);s?a.push({ks:i[r],initData:s,cdmData:n.getCDMData(),sessionId:n.getSessionId(t)}):this.isClearKey(n)&&a.push({ks:n,initData:null})}return a}function w(e,t){for(var n=[],r=o["default"].parsePSSHList(e),a=void 0,s=void 0,u=void 0,l=0;l<i.length;++l)a=i[l],s=a.systemString,u=!t||s in t,a.uuid in r&&u&&n.push({ks:a,initData:r[a.uuid],cdmData:a.getCDMData(),sessionId:a.getSessionId()});return n}function x(t,n,r){if("license-release"===r||"individualization-request"===r)return null;var i=null;return n&&n.hasOwnProperty("drmtoday")?i=(0,m["default"])(e).getInstance({BASE64:a}):t.systemString===S["default"].WIDEVINE_KEYSTEM_STRING?i=(0,_["default"])(e).getInstance():t.systemString===S["default"].PLAYREADY_KEYSTEM_STRING?i=(0,y["default"])(e).getInstance():t.systemString===S["default"].CLEARKEY_KEYSTEM_STRING&&(i=(0,b["default"])(e).getInstance()),i}function A(e,t,n){try{return e.getClearKeysFromProtectionData(t,n)}catch(i){return r.error("Failed to retrieve clearkeys from ProtectionData"),null}}function D(e){for(var t=function(t){var n=null;return e&&(n=t in e?e[t]:null),n},n=0;n<i.length;n++){var r=i[n];r.hasOwnProperty("init")&&r.init(t(r.systemString))}}return t={initialize:p,setProtectionData:D,isClearKey:E,initDataEquals:T,getKeySystems:g,getKeySystemBySystemString:v,getSupportedKeySystemsFromContentProtection:I,getSupportedKeySystems:w,getLicenseServer:x,processClearKeyLicenseRequest:A,setConfig:f},t}I.__dashjs_factory_name="ProtectionKeyController",t["default"]=dashjs.FactoryMaker.getSingletonFactory(I),e.exports=t["default"]},e251:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("8a43"),s=r(a),u=n("1d48"),l=r(u),d=n("589e"),c=r(d);function f(){var e=void 0,t=void 0,n=void 0,r=void 0,i=void 0,o="element is not video or audio DOM type!",a=this.context,u=(0,s["default"])(a).getInstance(),d=[];function f(){t=(0,c["default"])(a).getInstance().getLogger(e)}function h(){u.on(l["default"].PLAYBACK_PLAYING,M,this)}function p(){u.off(l["default"].PLAYBACK_PLAYING,M,this)}function m(){n&&(n.playbackRate=i||1,n.removeEventListener("canplay",m))}function g(e){n&&(n.readyState<=2&&e>0?n.addEventListener("canplay",m):n.playbackRate=e)}function y(e,t){if(n){if(n.currentTime==e)return;try{e=t?v(e):e,n.currentTime=e}catch(r){0===n.readyState&&r.code===r.INVALID_STATE_ERR&&setTimeout(function(){n.currentTime=e},400)}}}function v(e){var t=V(),n=e,r=9999999999;if(t)for(var i=0;i<t.length;i++){var o=t.start(i),a=t.end(i),s=Math.abs(o-e),u=Math.abs(a-e);if(e>=o&&e<=a)return e;s<r&&(r=s,n=o),u<r&&(r=u,n=a)}return n}function _(){return n}function E(e){if(!(null===e||void 0===e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw o;n=e,n&&(n.preload="auto")}function b(e){n&&(e?n.src=e:(n.removeAttribute("src"),n.load()))}function T(){return n?n.src:null}function S(){return r}function I(e){r=e,r.style.position="absolute",r.style.display="flex",r.style.overflow="hidden",r.style.pointerEvents="none",r.style.top=0,r.style.left=0}function w(e,t){R(e,t)}function x(){return d.length>0}function A(e){var t=void 0;null===e||n.seeking||-1!==d.indexOf(e)||(d.push(e),n&&1===d.length&&(t=document.createEvent("Event"),t.initEvent("waiting",!0,!1),i=n.playbackRate,g(0),n.dispatchEvent(t)))}function D(e){var t=d.indexOf(e),r=void 0;null!==e&&(-1!==t&&d.splice(t,1),n&&!1===x()&&0===n.playbackRate&&(g(i||1),n.paused||(r=document.createEvent("Event"),r.initEvent("playing",!0,!1),n.dispatchEvent(r))))}function R(e,t){t?A(e):D(e)}function M(){if(n&&x()&&0===n.playbackRate){var e=document.createEvent("Event");e.initEvent("waiting",!0,!1),n.dispatchEvent(e)}}function C(){if(!n)return null;var e="webkitDroppedFrameCount"in n&&"webkitDecodedFrameCount"in n,t="getVideoPlaybackQuality"in n,r=null;return t?r=n.getVideoPlaybackQuality():e&&(r={droppedVideoFrames:n.webkitDroppedFrameCount,totalVideoFrames:n.webkitDroppedFrameCount+n.webkitDecodedFrameCount,creationTime:new Date}),r}function N(){if(n){n.autoplay=!0;var e=n.play();e&&e["catch"]&&"undefined"!==typeof Promise&&e["catch"](function(e){"NotAllowedError"===e.name&&u.trigger(l["default"].PLAYBACK_NOT_ALLOWED),t.warn("Caught pending play exception - continuing ("+e+")")})}}function P(){return n?n.paused:null}function L(){n&&(n.pause(),n.autoplay=!1)}function O(){return n?n.seeking:null}function F(){return n?n.currentTime:null}function B(){return n?n.playbackRate:null}function k(){return n?n.played:null}function U(){return n?n.ended:null}function H(e,t){n&&n.addEventListener(e,t)}function j(e,t){n&&n.removeEventListener(e,t)}function K(){return n?n.readyState:NaN}function V(){return n?n.buffered:null}function q(){return n?n.clientWidth:NaN}function G(){return n?n.clientHeight:NaN}function Y(){return n?n.videoWidth:NaN}function z(){return n?n.videoHeight:NaN}function W(){return n&&n.parentNode?n.getBoundingClientRect().top-n.parentNode.getBoundingClientRect().top:NaN}function X(){return n&&n.parentNode?n.getBoundingClientRect().left-n.parentNode.getBoundingClientRect().left:NaN}function $(){return n?n.textTracks:[]}function Q(e,t,r,i,o){if(n)for(var a=0;a<n.textTracks.length;a++)if(n.textTracks[a].kind===e&&(!t||n.textTracks[a].label==t)&&n.textTracks[a].language===r&&n.textTracks[a].isTTML===i&&n.textTracks[a].isEmbedded===o)return n.textTracks[a];return null}function J(e,t,r){return n?n.addTextTrack(e,t,r):null}function Z(e){n&&(n.appendChild(e),void 0!==e.isTTML&&(n.textTracks[n.textTracks.length-1].isTTML=e.isTTML,n.textTracks[n.textTracks.length-1].isEmbedded=e.isEmbedded))}function ee(e){n&&n.removeChild(e)}return e={initialize:h,setCurrentTime:y,play:N,isPaused:P,pause:L,isSeeking:O,getTime:F,getPlaybackRate:B,setPlaybackRate:g,getPlayedRanges:k,getEnded:U,setStallState:w,getElement:_,setElement:E,setSource:b,getSource:T,getTTMLRenderingDiv:S,setTTMLRenderingDiv:I,getPlaybackQuality:C,addEventListener:H,removeEventListener:j,getReadyState:K,getBufferRange:V,getClientWidth:q,getClientHeight:G,getTextTracks:$,getTextTrack:Q,addTextTrack:J,appendChild:Z,removeChild:ee,getVideoWidth:Y,getVideoHeight:z,getVideoRelativeOffsetTop:W,getVideoRelativeOffsetLeft:X,reset:p},f(),e}f.__dashjs_factory_name="VideoModel",t["default"]=o["default"].getSingletonFactory(f),e.exports=t["default"]},e31d:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null};t["default"]=i,e.exports=t["default"]},e346:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("589e"),s=r(a),u=n("8a43"),l=r(u),d=n("1d48"),c=r(d),f=n("120d"),h=r(f);function p(){var e="urn:mpeg:dash:event:2012",t=1,n="urn:mpeg:dash:event:callback:2015",r=1,i=this.context,o=(0,l["default"])(i).getInstance(),a=void 0,u=void 0,d=void 0,f=void 0,p=void 0,m=void 0,g=void 0,y=void 0,v=void 0,_=void 0,E=void 0;function b(){u=(0,s["default"])(i).getInstance().getLogger(a),T()}function T(){E=!1,d={},f={},p={},m=null,g=100,y=Date.now()/1e3}function S(){if(!v||!_)throw new Error("setConfig function has to be called previously")}function I(){null!==m&&E&&(clearInterval(m),m=null,E=!1)}function w(){S(),u.debug("Start Event Controller"),E||isNaN(g)||(E=!0,m=setInterval(M,g))}function x(e){if(S(),d={},e)for(var t=0;t<e.length;t++){var n=e[t];d[n.id]=n,u.debug("Add inline event with id "+n.id)}u.debug("Added "+e.length+" inline events")}function A(t){S();for(var n=0;n<t.length;n++){var r=t[n];r.id in f?u.debug("Repeated event with id "+r.id):(r.eventStream.schemeIdUri===e&&void 0===f[r.id]&&D(r),f[r.id]=r,u.debug("Add inband event with id "+r.id))}}function D(e){if(e.eventStream.value==t){var n=e.eventStream.timescale||1,r=e.presentationTime/n,i=void 0;i=4294967295==e.presentationTime?NaN:(e.presentationTime+e.duration)/n,u.info("Manifest validity changed: Valid until: "+r+"; remaining duration: "+i),o.trigger(c["default"].MANIFEST_VALIDITY_CHANGED,{id:e.id,validUntil:r,newDuration:i,newManifestValidAfter:NaN})}}function R(){if(p)for(var e=_.getTime(),t=Object.keys(p),n=0;n<t.length;n++){var r=t[n],i=p[r];null!==i&&(i.duration+i.presentationTime)/i.eventStream.timescale<e&&(u.debug("Remove Event "+r+" at time "+e),i=null,delete p[r])}}function M(){var e=_.getTime(),t=e-y;y=e,P(f,t,e),P(d,t,e),R()}function C(){S(),v.refreshManifest()}function N(e){var t=(0,h["default"])(i).create({});t.load({method:"get",url:e,request:{responseType:"arraybuffer"}})}function P(i,a,s){var l;if(i)for(var d=Object.keys(i),c=0;c<d.length;c++){var f=d[c],h=i[f];void 0!==h&&(l=h.presentationTime/h.eventStream.timescale,(0===l||l<=s&&l+a>s)&&(u.debug("Start Event "+f+" at "+s),h.duration>0&&(p[f]=h),h.eventStream.schemeIdUri==e&&h.eventStream.value==t?0===h.duration&&0===h.presentationTimeDelta||C():h.eventStream.schemeIdUri==n&&h.eventStream.value==r?N(h.messageData):o.trigger(h.eventStream.schemeIdUri,{event:h}),delete i[f]))}}function L(e){e&&(e.manifestUpdater&&(v=e.manifestUpdater),e.playbackController&&(_=e.playbackController))}function O(){I(),T()}return a={addInlineEvents:x,addInbandEvents:A,stop:I,start:w,setConfig:L,reset:O},b(),a}p.__dashjs_factory_name="EventController",t["default"]=o["default"].getClassFactory(p),e.exports=t["default"]},e372:function(e,t,n){t=e.exports=n("ad71"),t.Stream=t,t.Readable=t,t.Writable=n("dc14"),t.Duplex=n("b19a"),t.Transform=n("27bf"),t.PassThrough=n("780f")},e3b9:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.schemeIdUri="",this.value=""};t["default"]=i,e.exports=t["default"]},e3db:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},e4ae:function(e,t,n){var r=n("f772");e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},e53d:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},e692:function(e,t){e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},e6f3:function(e,t,n){var r=n("07e3"),i=n("36c3"),o=n("5b4e")(!1),a=n("5559")("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);while(t.length>u)r(s,n=t[u++])&&(~o(l,n)||l.push(n));return l}},e853:function(e,t,n){var r=n("d3f4"),i=n("1169"),o=n("2b4c")("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&(t=t[o],null===t&&(t=void 0))),void 0===t?Array:t}},e8c0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("09b9"),u=i(s),l=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected"}return a(t,e),t}(u["default"]),d=new l;t["default"]=d,e.exports=t["default"]},eba1:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("8a43"),s=r(a),u=n("1d48"),l=r(u),d=n("467b"),c=r(d),f=n("589e"),h=r(f),p=n("556a");function m(){var e=this.context,t=(0,s["default"])(e).getInstance(),n=void 0,r=void 0,i=void 0,a=void 0,u=void 0,d=void 0,c=void 0,f=void 0,m=void 0,g=void 0,y=void 0,v=void 0,_=void 0,E=void 0,b=void 0,T=void 0,S=void 0;function I(){r=(0,h["default"])(e).getInstance().getLogger(n)}function w(){"undefined"!==typeof window&&"undefined"!==typeof navigator&&(i=window.VTTCue||window.TextTrackCue,u=[],d=[],c=-1,f=0,m=0,g=0,y=0,v=null,_=null,b=!1,S=2147483647,T=null,void 0!==document.fullscreenElement?E="fullscreenElement":void 0!==document.webkitIsFullScreen?E="webkitIsFullScreen":document.msFullscreenElement?E="msFullscreenElement":document.mozFullScreen&&(E="mozFullScreen"))}function x(e){var t=u[e].kind,n=void 0!==u[e].id?u[e].id:u[e].lang,r=u[e].lang,i=u[e].isTTML,o=u[e].isEmbedded,s=a.addTextTrack(t,n,r);return s.isEmbedded=o,s.isTTML=i,s}function A(e){b=e,v&&!document[E]&&(v.style.zIndex=e?S:null)}function D(e,n){if(u.length!==n){if(u.push(e),u.length===n){u.sort(function(e,t){return e.index-t.index}),v=a.getTTMLRenderingDiv();for(var i=-1,s=0;s<u.length;s++){var f=x.call(this,s);d.push(f),u[s].defaultTrack&&(f["default"]=!0,i=s);var h=L(s);h&&(h.mode=o["default"].TEXT_SHOWING,v&&(u[s].isTTML||u[s].isEmbedded)?h.renderingType="html":h.renderingType="default"),this.addCaptions(s,0,u[s].captionData),t.trigger(l["default"].TEXT_TRACK_ADDED)}if(B.call(this,i),i>=0)for(var p=0;p<u.length;p++){var m=L(p);m&&(m.mode=p===i?o["default"].TEXT_SHOWING:o["default"].TEXT_HIDDEN)}t.trigger(l["default"].TEXT_TRACKS_QUEUE_INITIALIZED,{index:c,tracks:u})}}else r.error("Trying to add too many tracks.")}function R(e,t,n,r,i,o){var a=e/t,s=n/r,u=0,l=0;a>s?(l=t,u=l/r*n):(u=e,l=u/n*r);var d=0,c=0,f=0,h=0,p=u/l;return p>i?(h=l,f=l*i):(f=u,h=u/i),d=(e-f)/2,c=(t-h)/2,o?{x:d+.1*f,y:c+.1*h,w:.8*f,h:.8*h}:{x:d,y:c,w:f,h:h}}function M(e,n){var r=a.getClientWidth(),i=a.getClientHeight(),o=a.getVideoWidth(),s=a.getVideoHeight(),u=a.getVideoRelativeOffsetTop(),d=a.getVideoRelativeOffsetLeft(),c=o/s,h=!1;e.isFromCEA608&&(c=3.5/3,h=!0);var p=R.call(this,r,i,o,s,c,h),_=p.w,T=p.h,I=p.x,w=p.y;if(_!=g||T!=y||I!=f||w!=m||n){if(f=I+d,m=w+u,g=_,y=T,v){var x=v.style;x.left=f+"px",x.top=m+"px",x.width=g+"px",x.height=y+"px",x.zIndex=E&&document[E]||b?S:null,t.trigger(l["default"].CAPTION_CONTAINER_RESIZE,{})}var A=e.activeCues;if(A)for(var D=A.length,M=0;M<D;++M){var C=A[M];C.scaleCue(C)}}}function C(e){var t=g,n=y,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0;if(e.cellResolution){var u=[t/e.cellResolution[0],n/e.cellResolution[1]];if(e.linePadding)for(r in e.linePadding)if(e.linePadding.hasOwnProperty(r)){var l=e.linePadding[r];i=(l*u[0]).toString();for(var d=document.getElementsByClassName("spanPadding"),c=0;c<d.length;c++)d[c].style.cssText=d[c].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i),d[c].style.cssText=d[c].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}if(e.fontSize){for(r in e.fontSize)if(e.fontSize.hasOwnProperty(r)){"%"===e.fontSize[r][0]?o=e.fontSize[r][1]/100:"c"===e.fontSize[r][0]&&(o=e.fontSize[r][1]),i=(o*u[1]).toString(),s="defaultFontSize"!==r?document.getElementsByClassName(r):document.getElementsByClassName("paragraph");for(var f=0;f<s.length;f++)s[f].style.cssText=s[f].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}if(e.lineHeight)for(r in e.lineHeight)if(e.lineHeight.hasOwnProperty(r)){"%"===e.lineHeight[r][0]?a=e.lineHeight[r][1]/100:"c"===e.fontSize[r][0]&&(a=e.lineHeight[r][1]),i=(a*u[1]).toString(),s=document.getElementsByClassName(r);for(var h=0;h<s.length;h++)s[h].style.cssText=s[h].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}}}if(e.isd){var p=document.getElementById(e.cueID);p&&v.removeChild(p),N(e)}}function N(e){if(v){var n=document.createElement("div");v.appendChild(n),T=(0,p.renderHTML)(e.isd,n,function(t){var n=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,r=/^#(.*)$/;if(n.test(t)){var i=n.exec(t),o=parseInt(i[4],10)-1,a=btoa(e.images[o]),s="data:image/png;base64,"+a;return s}if(r.test(t)){i=r.exec(t),o=i[1],s="data:image/png;base64,"+e.embeddedImages[o];return s}return null},v.clientHeight,v.clientWidth,!1,function(e){r.info("renderCaption :",e)},T,!0),n.id=e.cueID,t.trigger(l["default"].CAPTION_RENDERED,{captionDiv:n,currentTrackIdx:c})}}function P(e,n,a){var s=L(e),u=this;if(s&&a&&0!==a.length)for(var d=0;d<a.length;d++){var h=void 0,p=a[d];s.cellResolution=p.cellResolution,s.isFromCEA608=p.isFromCEA608,"html"===p.type&&v?(h=new i(p.start-n,p.end-n,""),h.cueHTMLElement=p.cueHTMLElement,h.isd=p.isd,h.images=p.images,h.embeddedImages=p.embeddedImages,h.cueID=p.cueID,h.scaleCue=C.bind(u),h.cellResolution=p.cellResolution,h.lineHeight=p.lineHeight,h.linePadding=p.linePadding,h.fontSize=p.fontSize,v.style.left=f+"px",v.style.top=m+"px",v.style.width=g+"px",v.style.height=y+"px",h.onenter=function(){s.mode===o["default"].TEXT_SHOWING&&(this.isd?(N(this),r.debug("Cue enter id:"+this.cueID)):(v.appendChild(this.cueHTMLElement),C.call(u,this),t.trigger(l["default"].CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:c})))},h.onexit=function(){if(v)for(var e=v.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(r.debug("Cue exit id:"+e[t].id),v.removeChild(e[t]))}):p.data&&(h=new i(p.start-n,p.end-n,p.data),p.styles&&(void 0!==p.styles.align&&"align"in h&&(h.align=p.styles.align),void 0!==p.styles.line&&"line"in h&&(h.line=p.styles.line),void 0!==p.styles.position&&"position"in h&&(h.position=p.styles.position),void 0!==p.styles.size&&"size"in h&&(h.size=p.styles.size)),h.onenter=function(){s.mode===o["default"].TEXT_SHOWING&&t.trigger(l["default"].CAPTION_RENDERED,{currentTrackIdx:c})});try{h?s.addCue(h):r.error("impossible to display subtitles.")}catch(_){throw U(s),s.addCue(h),_}}}function L(e){return e>=0&&u[e]?a.getTextTrack(u[e].kind,u[e].id,u[e].lang,u[e].isTTML,u[e].isEmbedded):null}function O(){return c}function F(e){for(var t=-1,n=0;n<u.length;n++)if(u[n].id===e){t=n;break}return t}function B(e){if(e!==c){c=e;var t=L(c);k.call(this,t),_&&(clearInterval(_),_=null),t&&"html"===t.renderingType&&(M.call(this,t,!0),_=setInterval(M.bind(this,t),500))}}function k(e){G.call(this),e&&"html"===e.renderingType?V.call(this):q.call(this)}function U(e){if(e.cues)for(var t=e.cues,n=t.length-1,r=n;r>=0;r--)e.removeCue(t[r])}function H(e){var t=L(e);t&&U(t)}function j(){for(var e=d?d.length:0,t=0;t<e;t++){var n=L(t);n&&(U.call(this,n),n.mode="disabled")}d=[],u=[],_&&(clearInterval(_),_=null),c=-1,G.call(this)}function K(e){a.removeChild(d[e]),d.splice(e,1)}function V(){var e=document.getElementById("native-cue-style");if(!e){e=document.createElement("style"),e.id="native-cue-style",document.head.appendChild(e);var t=e.sheet,n=a.getElement();try{n&&(n.id?t.insertRule("#"+n.id+"::cue {background: transparent}",0):0!==n.classList.length?t.insertRule("."+n.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0))}catch(i){r.info(""+i.message)}}}function q(){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}function G(){if(v)while(v.firstChild)v.removeChild(v.firstChild)}function Y(e){e&&e.videoModel&&(a=e.videoModel)}function z(e,t){var n=L(e);n&&n.mode!==t&&(n.mode=t)}function W(){return u[c]}return n={initialize:w,displayCConTop:A,addTextTrack:D,addCaptions:P,getCurrentTrackIdx:O,setCurrentTrackIdx:B,getTrackIdxForId:F,getCurrentTrackInfo:W,setModeForTrackIdx:z,deleteCuesFromTrackIdx:H,deleteAllTextTracks:j,deleteTextTrack:K,setConfig:Y},I(),n}m.__dashjs_factory_name="TextTracks",t["default"]=c["default"].getSingletonFactory(m),e.exports=t["default"]},ebd6:function(e,t,n){var r=n("cb7c"),i=n("d8e8"),o=n("2b4c")("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},ebfd:function(e,t,n){var r=n("62a0")("meta"),i=n("f772"),o=n("07e3"),a=n("d9f6").f,s=0,u=Object.isExtensible||function(){return!0},l=!n("294c")(function(){return u(Object.preventExtensions({}))}),d=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},c=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";d(e)}return e[r].i},f=function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;d(e)}return e[r].w},h=function(e){return l&&p.NEED&&u(e)&&!o(e,r)&&d(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:c,getWeak:f,onFreeze:h}},efb7:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("589e"),o=r(i),a=n("467b"),s=r(a);function u(e){var t=this.context,n=void 0,r=void 0,i=void 0,a=[],s=e;function u(){r=(0,o["default"])(t).getInstance().getLogger(n)}function l(){a=[],i=null,s=null}function d(e){"InitializationSegment"!==e.segmentType?(a.push(e),a.sort(function(e,t){return e.start-t.start}),i=null):i=e,r.debug("PreBufferSink appended chunk s: "+e.start+"; e: "+e.end),s&&s({chunk:e})}function c(e,t){a=a.filter(function(n){return!((isNaN(t)||n.start<t)&&(isNaN(e)||n.end>e))})}function f(){}function h(){for(var e=[],t=0;t<a.length;t++){var n=a[t];0===e.length||n.start>e[e.length-1].end?e.push({start:n.start,end:n.end}):e[e.length-1].end=n.end}var r={start:function(t){return e[t].start},end:function(t){return e[t].end}};return Object.defineProperty(r,"length",{get:function(){return e.length}}),r}function p(){return!1}function m(){}function g(e,t){var n=y(e,t);return i&&(n.push(i),i=null),c(e,t),n}function y(e,t){return a.filter(function(n){return(isNaN(t)||n.start<t)&&(isNaN(e)||n.end>e)})}return n={getAllBufferRanges:h,append:d,remove:c,abort:f,discharge:g,reset:l,updateTimestampOffset:m,hasDiscontinuitiesAfter:p},u(),n}u.__dashjs_factory_name="PreBufferSink";var l=s["default"].getClassFactory(u);t["default"]=l,e.exports=t["default"]},f01c:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""};t["default"]=i,e.exports=t["default"]},f201:function(e,t,n){var r=n("e4ae"),i=n("79aa"),o=n("5168")("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},f228:function(e,t,n){var r=n("40c3"),i=n("4517");e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},f288:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n){r(this,e),this.keySystem=t,this.ksConfiguration=n};t["default"]=i,e.exports=t["default"]},f318:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("e217"),o=r(i),a=n("5fb0"),s=r(a),u=n("6a2d"),l=r(u),d=n("d0a4"),c=r(d),f=n("b4be"),h=r(f),p=n("46c1"),m=r(p),g=n("f288"),y=r(g);function v(e){e=e||{};var t=this.context,n=e.eventBus,r=e.events,i=e.debug,a=e.api,u=void 0,d=void 0,f=void 0,p=void 0,g=void 0,v=void 0,_=void 0,E=void 0,b=void 0;function T(){d=i.getLogger(u),f=null,p=null,g=null,v=null,_=[],b=(0,o["default"])(t).getInstance(),E=O()}function S(){try{for(var e=0;e<_.length;e++)C(_[e]);f&&f.removeEventListener(a.needkey,E),n.trigger(r.TEARDOWN_COMPLETE)}catch(t){n.trigger(r.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+t.message})}}function I(){return p}function w(){for(var e=[],t=0;t<_.length;t++)e.push(_[t].initData);return e}function x(e){for(var t=!1,i=0;i<e.length;i++)for(var o=e[i].ks.systemString,s=e[i].configs,u=null,l=null,d=0;d<s.length;d++){var c=s[d].audioCapabilities,f=s[d].videoCapabilities;if(c&&0!==c.length){u=[];for(var h=0;h<c.length;h++)window[a.MediaKeys].isTypeSupported(o,c[h].contentType)&&u.push(c[h])}if(f&&0!==f.length){l=[];for(var p=0;p<f.length;p++)window[a.MediaKeys].isTypeSupported(o,f[p].contentType)&&l.push(f[p])}if(!(!u&&!l||u&&0===u.length||l&&0===l.length)){t=!0;var g=new m["default"](u,l),v=b.getKeySystemBySystemString(o);n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{data:new y["default"](v,g)});break}}t||n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})}function A(e){try{g=e.mediaKeys=new window[a.MediaKeys](e.keySystem.systemString),p=e.keySystem,v=e,f&&F(),n.trigger(r.INTERNAL_KEY_SYSTEM_SELECTED)}catch(t){n.trigger(r.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+p.systemString+")! Could not create MediaKeys -- TODO"})}}function D(e){f!==e&&(f&&f.removeEventListener(a.needkey,E),f=e,f&&(f.addEventListener(a.needkey,E),g&&F()))}function R(e,t,i,o){if(!p||!g||!v)throw new Error("Can not create sessions until you have selected a key system");var s=null;if(v.ksConfiguration.videoCapabilities&&v.ksConfiguration.videoCapabilities.length>0&&(s=v.ksConfiguration.videoCapabilities[0]),null===s&&v.ksConfiguration.audioCapabilities&&v.ksConfiguration.audioCapabilities.length>0&&(s=v.ksConfiguration.audioCapabilities[0]),null===s)throw new Error("Can not create sessions for unknown content types.");var u=s.contentType,l=g.createSession(u,new Uint8Array(e),o?new Uint8Array(o):null),c=B(l,e);l.addEventListener(a.error,c),l.addEventListener(a.message,c),l.addEventListener(a.ready,c),l.addEventListener(a.close,c),_.push(c),d.debug("DRM: Session created.  SessionID = "+c.getSessionID()),n.trigger(r.KEY_SESSION_CREATED,{data:c})}function M(e,t){var n=e.session;b.isClearKey(p)?n.update(new Uint8Array(t.toJWK())):n.update(new Uint8Array(t))}function C(e){var t=e.session;t.removeEventListener(a.error,e),t.removeEventListener(a.message,e),t.removeEventListener(a.ready,e),t.removeEventListener(a.close,e);for(var n=0;n<_.length;n++)if(_[n]===e){_.splice(n,1);break}t[a.release]()}function N(){}function P(){}function L(){}function O(){return{handleEvent:function(e){switch(e.type){case a.needkey:if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;n.trigger(r.NEED_KEY,{key:new s["default"](t,"cenc")})}break}}}}function F(){var e=null,t=function(){f.removeEventListener("loadedmetadata",e),f[a.setMediaKeys](g),n.trigger(r.VIDEO_ELEMENT_SELECTED)};f.readyState>=1?t():(e=t.bind(this),f.addEventListener("loadedmetadata",e))}function B(e,t){return{session:e,initData:t,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case a.error:var t="KeyError";n.trigger(r.KEY_ERROR,{data:new l["default"](c["default"].MEDIA_KEYERR_CODE,t,this)});break;case a.message:var i=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;n.trigger(r.INTERNAL_KEY_MESSAGE,{data:new h["default"](this,i,e.destinationURL)});break;case a.ready:d.debug("DRM: Key added."),n.trigger(r.KEY_ADDED);break;case a.close:d.debug("DRM: Session closed.  SessionID = "+this.getSessionID()),n.trigger(r.KEY_SESSION_CLOSED,{data:this.getSessionID()});break}}}}return u={getAllInitData:w,requestKeySystemAccess:x,getKeySystem:I,selectKeySystem:A,setMediaElement:D,createKeySession:R,updateKeySession:M,closeKeySession:C,setServerCertificate:N,loadKeySession:P,removeKeySession:L,stop:S,reset:S},T(),u}v.__dashjs_factory_name="ProtectionModel_3Feb2014",t["default"]=dashjs.FactoryMaker.getClassFactory(v),e.exports=t["default"]},f436:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("5948"),o=r(i);function a(e){var t=[],n=void 0,r=(0,o["default"])(this.context).getInstance(e);function i(e,n){e.some(function(e){var i=r.create(e,n);if(i)return t.push(i),!0})}function a(){t.forEach(function(e){return e.reset()}),t=[]}function s(e,n){t.forEach(function(t){return t.report(e,n)})}return n={initialize:i,reset:a,report:s},n}a.__dashjs_factory_name="ReportingController",t["default"]=dashjs.FactoryMaker.getClassFactory(a),e.exports=t["default"]},f447:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=1,o=1,a=function e(t,n,a,s){r(this,e),this.url=t||"",this.serviceLocation=n||t||"",this.dvb_priority=a||i,this.dvb_weight=s||o,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0};a.DEFAULT_DVB_PRIORITY=i,a.DEFAULT_DVB_WEIGHT=o,t["default"]=a,e.exports=t["default"]},f499:function(e,t,n){e.exports=n("a21f")},f5f5:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("589e"),s=r(a),u=n("467b"),l=r(u),d=n("41ee"),c=r(d);function f(e){e=e||{};var t=this.context,n=e.adapter,r=e.textController,i=e.playbackController,a=void 0,u=void 0;function l(){u=(0,s["default"])(t).getInstance().getLogger(a)}function d(e,t,a){if(!e)return null;var s=e.getRepresentationInfo(),l=e.getType(),d=!isNaN(t),f=e.getBufferController(),h=i.getNormalizedTime(),p=d?t:n.getIndexHandlerTime(e),m=!1,g=void 0;if(isNaN(p)||l===o["default"].FRAGMENTED_TEXT&&!r.isTextEnabled())return null;if(f){var y=f.getRangeAt(p),v=f.getRangeAt(h),_=f.getBuffer().hasDiscontinuitiesAfter(h);null===y&&null===v||d||((!y||v&&v.start!=y.start&&v.end!=y.end)&&(_&&l!==o["default"].FRAGMENTED_TEXT&&(e.getFragmentModel().removeExecutedRequestsAfterTime(v.end),m=!0),y=v),p!==y.end&&(u.debug("Prior to making a request for time, NextFragmentRequestRule is aligning index handler's currentTime with bufferedRange.end for",l,".",p,"was changed to",y.end),p=y.end))}if(a)p=a.startTime+a.duration/2,g=n.getFragmentRequest(e,s,p,{timeThreshold:0,ignoreIsFinished:!0});else{g=n.getFragmentRequest(e,s,p,{keepIdx:!d&&!m});while(g&&g.action!==c["default"].ACTION_COMPLETE&&e.getFragmentModel().isFragmentLoaded(g))g=n.getFragmentRequest(e,s)}return g}return a={execute:d},l(),a}f.__dashjs_factory_name="NextFragmentRequestRule",t["default"]=l["default"].getClassFactory(f),e.exports=t["default"]},f605:function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},f751:function(e,t,n){var r=n("5ca1");r(r.S+r.F,"Object",{assign:n("7333")})},f766:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("09b9"),u=i(s),l=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer"}return a(t,e),t}(u["default"]),d=new l;t["default"]=d,e.exports=t["default"]},f772:function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},f785:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("9485"),o=r(i),a=n("467b"),s=r(a),u=n("589e"),l=r(u);function d(e){e=e||{};var t=1.8,n=500,r=5,i=this.context,a=e.mediaPlayerModel,s=e.metricsModel,u=e.dashMetrics,c=void 0,f=void 0,h=void 0,p=void 0,m=void 0;function g(){f=(0,l["default"])(i).getInstance().getLogger(c),E()}function y(e,t){h[e]=h[e]||{},h[e][t]=h[e][t]||{}}function v(e,t){m[e]=m[e]||[],m[e].push(t)}function _(e){var l=(0,o["default"])(i).create(o["default"].NO_CHANGE,{name:d.__dashjs_factory_name});if(!e||!e.hasOwnProperty("getMediaInfo")||!e.hasOwnProperty("getMediaType")||!e.hasOwnProperty("getCurrentRequest")||!e.hasOwnProperty("getRepresentationInfo")||!e.hasOwnProperty("getAbrController"))return l;var c=e.getMediaInfo(),g=e.getMediaType(),_=e.getCurrentRequest();if(!isNaN(_.index)){y(g,_.index);var E=a.getStableBufferTime(),b=u.getCurrentBufferLevel(s.getReadOnlyMetricsFor(g));if(b>E)return l;var T=h[g][_.index];if(null===T||null===_.firstByteDate||p.hasOwnProperty(T.id))return l;if(void 0===T.firstByteTime&&(m[g]=[],T.firstByteTime=_.firstByteDate.getTime(),T.segmentDuration=_.duration,T.bytesTotal=_.bytesTotal,T.id=_.index),T.bytesLoaded=_.bytesLoaded,T.elapsedTime=(new Date).getTime()-T.firstByteTime,T.bytesLoaded>0&&T.elapsedTime>0&&v(g,Math.round(8*T.bytesLoaded/T.elapsedTime)),m[g].length>=r&&T.elapsedTime>n&&T.bytesLoaded<T.bytesTotal){var S=m[g].reduce(function(e,t){return e+t},0);if(T.measuredBandwidthInKbps=Math.round(S/m[g].length),T.estimatedTimeOfDownload=+(8*T.bytesTotal/T.measuredBandwidthInKbps/1e3).toFixed(2),T.estimatedTimeOfDownload<T.segmentDuration*t||0===e.getRepresentationInfo().quality)return l;if(!p.hasOwnProperty(T.id)){var I=e.getAbrController(),w=T.bytesTotal-T.bytesLoaded,x=I.getBitrateList(c),A=I.getQualityForBitrate(c,T.measuredBandwidthInKbps*a.getBandwidthSafetyFactor()),D=T.bytesTotal*x[A].bitrate/x[I.getQualityFor(g,c.streamInfo)].bitrate;w>D&&(l.quality=A,l.reason.throughput=T.measuredBandwidthInKbps,l.reason.fragmentID=T.id,p[T.id]=T,f.debug("( ",g,"frag id",T.id,") is asking to abandon and switch to quality to ",A," measured bandwidth was",T.measuredBandwidthInKbps),delete h[g][T.id])}}else T.bytesLoaded===T.bytesTotal&&delete h[g][T.id]}return l}function E(){h={},p={},m=[]}return c={shouldAbandon:_,reset:E},g(),c}d.__dashjs_factory_name="AbandonRequestsRule",t["default"]=s["default"].getClassFactory(d),e.exports=t["default"]},f974:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("477f"),o=r(i),a=n("f436"),s=r(a),u=n("9c97"),l=r(u);function d(e){e=e||{};var t=void 0,n=void 0,r=void 0,i=void 0,a=this.context;function u(i){try{r=(0,o["default"])(a).create({mediaElement:e.mediaElement}),r.initialize(i.Range),n=(0,s["default"])(a).create({debug:e.debug,metricsConstants:e.metricsConstants}),n.initialize(i.Reporting,r),t=(0,l["default"])(a).create({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants,events:e.events}),t.initialize(i.metrics,n)}catch(u){throw d(),u}}function d(){t&&t.reset(),n&&n.reset(),r&&r.reset()}return i={initialize:u,reset:d},i}d.__dashjs_factory_name="MetricsController",t["default"]=dashjs.FactoryMaker.getClassFactory(d),e.exports=t["default"]},fa14:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("4398"),o=r(i);function a(){var e="application/dash+xml",t=void 0;function n(n,r,i){if(!n||!/^VIDEO$/i.test(n.nodeName))return null;if(n._dashjs_player)return n._dashjs_player;var a=void 0,s=n.id||n.name||"video element";if(r=r||[].slice.call(n.querySelectorAll("source")).filter(function(t){return t.type==e})[0],!r&&n.src)r=document.createElement("source"),r.src=n.src;else if(!r&&!n.src)return null;return i=i||{},a=(0,o["default"])(i).create(),a.initialize(n,r.src,n.autoplay),t||(t=a.getDebug().getLogger()),t.debug("Converted "+s+" to dash.js player and added content: "+r.src),n._dashjs_player=a,a}function r(t,r){var o=[];t=t||"[data-dashjs-player]",r=r||document;for(var a=r.querySelectorAll(t),s=0;s<a.length;s++){var u=n(a[s],null);o.push(u)}var l=r.querySelectorAll('source[type="'+e+'"]');for(s=0;s<l.length;s++){var d=i(l[s]);u=n(d,null);o.push(u)}return o}function i(e){var t=!0;while(t){var n=e;if(t=!1,/^VIDEO$/i.test(n.nodeName))return n;e=n.parentNode,t=!0}}return{create:n,createAll:r}}var s=a(),u=void 0;function l(){window.removeEventListener("load",l),s.createAll()}function d(){window.dashjs&&(window.clearInterval(u),s.createAll())}var c="undefined"!==typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate;!c&&"undefined"!==typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?s.createAll():u=window.setInterval(d,500):window.addEventListener("load",l)),t["default"]=s,e.exports=t["default"]},fa5b:function(e,t,n){e.exports=n("5537")("native-function-to-string",Function.toString)},faa1:function(e,t,n){"use strict";var r,i="object"===typeof Reflect?Reflect:null,o=i&&"function"===typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function a(e){console&&console.warn&&console.warn(e)}r=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!==e};function u(){u.init.call(this)}e.exports=u,u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var l=10;function d(e){return void 0===e._maxListeners?u.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var i,o,s;if("function"!==typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(o=e._events,void 0===o?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"===typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=d(e),i>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a(u)}return e}function f(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,e))}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?v(i):g(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function v(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!==typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),u.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},u.prototype.getMaxListeners=function(){return d(this)},u.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[e];if(void 0===u)return!1;if("function"===typeof u)o(u,this,t);else{var l=u.length,d=g(u,l);for(n=0;n<l;++n)o(d[n],this,t)}return!0},u.prototype.addListener=function(e,t){return c(this,e,t,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(e,t){return c(this,e,t,!0)},u.prototype.once=function(e,t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,h(this,e,t)),this},u.prototype.prependOnceListener=function(e,t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,h(this,e,t)),this},u.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(r=this._events,void 0===r)return this;if(n=r[e],void 0===n)return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():y(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)i=o[r],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],"function"===typeof t)this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},u.prototype.listeners=function(e){return p(this,e,!0)},u.prototype.rawListeners=function(e){return p(this,e,!1)},u.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},u.prototype.listenerCount=m,u.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},fab2:function(e,t,n){var r=n("7726").document;e.exports=r&&r.documentElement},faef:function(e,t,n){(function(e){(function(t){t.parser=function(e,t){return new o(e,t)},t.SAXParser=o,t.SAXStream=c,t.createStream=d,t.MAX_BUFFER_LENGTH=65536;var r,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function o(e,n){if(!(this instanceof o))return new o(e,n);var r=this;s(r),r.q=r.c="",r.bufferCheckPosition=t.MAX_BUFFER_LENGTH,r.opt=n||{},r.opt.lowercase=r.opt.lowercase||r.opt.lowercasetags,r.looseCase=r.opt.lowercase?"toLowerCase":"toUpperCase",r.tags=[],r.closed=r.closedRoot=r.sawRoot=!1,r.tag=r.error=null,r.strict=!!e,r.noscript=!(!e&&!r.opt.noscript),r.state=M.BEGIN,r.strictEntities=r.opt.strictEntities,r.ENTITIES=r.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),r.attribList=[],r.opt.xmlns&&(r.ns=Object.create(b)),r.trackPosition=!1!==r.opt.position,r.trackPosition&&(r.position=r.line=r.column=0),N(r,"onready")}function a(e){for(var n=Math.max(t.MAX_BUFFER_LENGTH,10),r=0,o=0,a=i.length;o<a;o++){var s=e[i[o]].length;if(s>n)switch(i[o]){case"textNode":L(e);break;case"cdata":P(e,"oncdata",e.cdata),e.cdata="";break;case"script":P(e,"onscript",e.script),e.script="";break;default:F(e,"Max buffer length exceeded: "+i[o])}r=Math.max(r,s)}var u=t.MAX_BUFFER_LENGTH-r;e.bufferCheckPosition=u+e.position}function s(e){for(var t=0,n=i.length;t<n;t++)e[i[t]]=""}function u(e){L(e),""!==e.cdata&&(P(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(P(e,"onscript",e.script),e.script="")}t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}t.prototype=e;var n=new t;return n}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),o.prototype={end:function(){B(this)},write:z,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){u(this)}};try{r=n("d485").Stream}catch(W){r=function(){}}var l=t.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});function d(e,t){return new c(e,t)}function c(e,t){if(!(this instanceof c))return new c(e,t);r.apply(this),this._parser=new o(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,l.forEach(function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t,t;n.on(e,t)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(r.prototype,{constructor:{value:c}}),c.prototype.write=function(t){if("function"===typeof e&&"function"===typeof e.isBuffer&&e.isBuffer(t)){if(!this._decoder){var r=n("7d72").StringDecoder;this._decoder=new r("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},c.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},c.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===l.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),r.prototype.on.call(n,e,t)};var f="\r\n\t ",h="0124356789",p="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",m="'\"",g=f+">",y="[CDATA[",v="DOCTYPE",_="http://www.w3.org/XML/1998/namespace",E="http://www.w3.org/2000/xmlns/",b={xml:_,xmlns:E};f=x(f),h=x(h),p=x(p);var T=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,S=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,I=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,w=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function x(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function A(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function D(e,t){return A(e)?!!t.match(e):e[t]}function R(e,t){return!D(e,t)}m=x(m),g=x(g);var M=0;for(var C in t.STATE={BEGIN:M++,BEGIN_WHITESPACE:M++,TEXT:M++,TEXT_ENTITY:M++,OPEN_WAKA:M++,SGML_DECL:M++,SGML_DECL_QUOTED:M++,DOCTYPE:M++,DOCTYPE_QUOTED:M++,DOCTYPE_DTD:M++,DOCTYPE_DTD_QUOTED:M++,COMMENT_STARTING:M++,COMMENT:M++,COMMENT_ENDING:M++,COMMENT_ENDED:M++,CDATA:M++,CDATA_ENDING:M++,CDATA_ENDING_2:M++,PROC_INST:M++,PROC_INST_BODY:M++,PROC_INST_ENDING:M++,OPEN_TAG:M++,OPEN_TAG_SLASH:M++,ATTRIB:M++,ATTRIB_NAME:M++,ATTRIB_NAME_SAW_WHITE:M++,ATTRIB_VALUE:M++,ATTRIB_VALUE_QUOTED:M++,ATTRIB_VALUE_CLOSED:M++,ATTRIB_VALUE_UNQUOTED:M++,ATTRIB_VALUE_ENTITY_Q:M++,ATTRIB_VALUE_ENTITY_U:M++,CLOSE_TAG:M++,CLOSE_TAG_SAW_WHITE:M++,SCRIPT:M++,SCRIPT_ENDING:M++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(e){var n=t.ENTITIES[e],r="number"===typeof n?String.fromCharCode(n):n;t.ENTITIES[e]=r}),t.STATE)t.STATE[t.STATE[C]]=C;function N(e,t,n){e[t]&&e[t](n)}function P(e,t,n){e.textNode&&L(e),N(e,t,n)}function L(e){e.textNode=O(e.opt,e.textNode),e.textNode&&N(e,"ontext",e.textNode),e.textNode=""}function O(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function F(e,t){return L(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,N(e,"onerror",t),e}function B(e){return e.sawRoot&&!e.closedRoot&&k(e,"Unclosed root tag"),e.state!==M.BEGIN&&e.state!==M.BEGIN_WHITESPACE&&e.state!==M.TEXT&&F(e,"Unexpected end"),L(e),e.c="",e.closed=!0,N(e,"onend"),o.call(e,e.strict,e.opt),e}function k(e,t){if("object"!==typeof e||!(e instanceof o))throw new Error("bad call to strictFail");e.strict&&F(e,t)}function U(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,P(e,"onopentagstart",n)}function H(e,t){var n=e.indexOf(":"),r=n<0?["",e]:e.split(":"),i=r[0],o=r[1];return t&&"xmlns"===e&&(i="xmlns",o=""),{prefix:i,local:o}}function j(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=H(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==_)k(e,"xml: prefix must be bound to "+_+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==E)k(e,"xmlns: prefix must be bound to "+E+"\nActual: "+e.attribValue);else{var i=e.tag,o=e.tags[e.tags.length-1]||e;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,P(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function K(e,t){if(e.opt.xmlns){var n=e.tag,r=H(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(k(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(t){P(e,"onopennamespace",{prefix:t,uri:n.ns[t]})});for(var o=0,a=e.attribList.length;o<a;o++){var s=e.attribList[o],u=s[0],l=s[1],d=H(u,!0),c=d.prefix,f=d.local,h=""===c?"":n.ns[c]||"",p={name:u,value:l,prefix:c,local:f,uri:h};c&&"xmlns"!==c&&!h&&(k(e,"Unbound namespace prefix: "+JSON.stringify(c)),p.uri=c),e.tag.attributes[u]=p,P(e,"onattribute",p)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),P(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=M.TEXT:e.state=M.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function V(e){if(!e.tagName)return k(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=M.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=M.SCRIPT);P(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());var r=n;while(t--){var i=e.tags[t];if(i.name===r)break;k(e,"Unexpected close tag")}if(t<0)return k(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=M.TEXT);e.tagName=n;var o=e.tags.length;while(o-- >t){var a=e.tag=e.tags.pop();e.tagName=e.tag.name,P(e,"onclosetag",e.tagName);var s={};for(var u in a.ns)s[u]=a.ns[u];var l=e.tags[e.tags.length-1]||e;e.opt.xmlns&&a.ns!==l.ns&&Object.keys(a.ns).forEach(function(t){var n=a.ns[t];P(e,"onclosenamespace",{prefix:t,uri:n})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=M.TEXT}function q(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:(n=r,"#"===n.charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),t=parseInt(n,16),i=t.toString(16)):(n=n.slice(1),t=parseInt(n,10),i=t.toString(10))),n=n.replace(/^0+/,""),i.toLowerCase()!==n?(k(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function G(e,t){"<"===t?(e.state=M.OPEN_WAKA,e.startTagPosition=e.position):R(f,t)&&(k(e,"Non-whitespace before first tag."),e.textNode=t,e.state=M.TEXT)}function Y(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}function z(e){var t=this;if(this.error)throw this.error;if(t.closed)return F(t,"Cannot write after close. Assign an onready handler.");if(null===e)return B(t);"object"===typeof e&&(e=e.toString());var n=0,r="";while(1){if(r=Y(e,n++),t.c=r,!r)break;switch(t.trackPosition&&(t.position++,"\n"===r?(t.line++,t.column=0):t.column++),t.state){case M.BEGIN:if(t.state=M.BEGIN_WHITESPACE,"\ufeff"===r)continue;G(t,r);continue;case M.BEGIN_WHITESPACE:G(t,r);continue;case M.TEXT:if(t.sawRoot&&!t.closedRoot){var i=n-1;while(r&&"<"!==r&&"&"!==r)r=Y(e,n++),r&&t.trackPosition&&(t.position++,"\n"===r?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(i,n-1)}"<"!==r||t.sawRoot&&t.closedRoot&&!t.strict?(!R(f,r)||t.sawRoot&&!t.closedRoot||k(t,"Text data outside of root node."),"&"===r?t.state=M.TEXT_ENTITY:t.textNode+=r):(t.state=M.OPEN_WAKA,t.startTagPosition=t.position);continue;case M.SCRIPT:"<"===r?t.state=M.SCRIPT_ENDING:t.script+=r;continue;case M.SCRIPT_ENDING:"/"===r?t.state=M.CLOSE_TAG:(t.script+="<"+r,t.state=M.SCRIPT);continue;case M.OPEN_WAKA:if("!"===r)t.state=M.SGML_DECL,t.sgmlDecl="";else if(D(f,r));else if(D(T,r))t.state=M.OPEN_TAG,t.tagName=r;else if("/"===r)t.state=M.CLOSE_TAG,t.tagName="";else if("?"===r)t.state=M.PROC_INST,t.procInstName=t.procInstBody="";else{if(k(t,"Unencoded <"),t.startTagPosition+1<t.position){var o=t.position-t.startTagPosition;r=new Array(o).join(" ")+r}t.textNode+="<"+r,t.state=M.TEXT}continue;case M.SGML_DECL:(t.sgmlDecl+r).toUpperCase()===y?(P(t,"onopencdata"),t.state=M.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+r==="--"?(t.state=M.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+r).toUpperCase()===v?(t.state=M.DOCTYPE,(t.doctype||t.sawRoot)&&k(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===r?(P(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=M.TEXT):D(m,r)?(t.state=M.SGML_DECL_QUOTED,t.sgmlDecl+=r):t.sgmlDecl+=r;continue;case M.SGML_DECL_QUOTED:r===t.q&&(t.state=M.SGML_DECL,t.q=""),t.sgmlDecl+=r;continue;case M.DOCTYPE:">"===r?(t.state=M.TEXT,P(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=r,"["===r?t.state=M.DOCTYPE_DTD:D(m,r)&&(t.state=M.DOCTYPE_QUOTED,t.q=r));continue;case M.DOCTYPE_QUOTED:t.doctype+=r,r===t.q&&(t.q="",t.state=M.DOCTYPE);continue;case M.DOCTYPE_DTD:t.doctype+=r,"]"===r?t.state=M.DOCTYPE:D(m,r)&&(t.state=M.DOCTYPE_DTD_QUOTED,t.q=r);continue;case M.DOCTYPE_DTD_QUOTED:t.doctype+=r,r===t.q&&(t.state=M.DOCTYPE_DTD,t.q="");continue;case M.COMMENT:"-"===r?t.state=M.COMMENT_ENDING:t.comment+=r;continue;case M.COMMENT_ENDING:"-"===r?(t.state=M.COMMENT_ENDED,t.comment=O(t.opt,t.comment),t.comment&&P(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+r,t.state=M.COMMENT);continue;case M.COMMENT_ENDED:">"!==r?(k(t,"Malformed comment"),t.comment+="--"+r,t.state=M.COMMENT):t.state=M.TEXT;continue;case M.CDATA:"]"===r?t.state=M.CDATA_ENDING:t.cdata+=r;continue;case M.CDATA_ENDING:"]"===r?t.state=M.CDATA_ENDING_2:(t.cdata+="]"+r,t.state=M.CDATA);continue;case M.CDATA_ENDING_2:">"===r?(t.cdata&&P(t,"oncdata",t.cdata),P(t,"onclosecdata"),t.cdata="",t.state=M.TEXT):"]"===r?t.cdata+="]":(t.cdata+="]]"+r,t.state=M.CDATA);continue;case M.PROC_INST:"?"===r?t.state=M.PROC_INST_ENDING:D(f,r)?t.state=M.PROC_INST_BODY:t.procInstName+=r;continue;case M.PROC_INST_BODY:if(!t.procInstBody&&D(f,r))continue;"?"===r?t.state=M.PROC_INST_ENDING:t.procInstBody+=r;continue;case M.PROC_INST_ENDING:">"===r?(P(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=M.TEXT):(t.procInstBody+="?"+r,t.state=M.PROC_INST_BODY);continue;case M.OPEN_TAG:D(S,r)?t.tagName+=r:(U(t),">"===r?K(t):"/"===r?t.state=M.OPEN_TAG_SLASH:(R(f,r)&&k(t,"Invalid character in tag name"),t.state=M.ATTRIB));continue;case M.OPEN_TAG_SLASH:">"===r?(K(t,!0),V(t)):(k(t,"Forward-slash in opening tag not followed by >"),t.state=M.ATTRIB);continue;case M.ATTRIB:if(D(f,r))continue;">"===r?K(t):"/"===r?t.state=M.OPEN_TAG_SLASH:D(T,r)?(t.attribName=r,t.attribValue="",t.state=M.ATTRIB_NAME):k(t,"Invalid attribute name");continue;case M.ATTRIB_NAME:"="===r?t.state=M.ATTRIB_VALUE:">"===r?(k(t,"Attribute without value"),t.attribValue=t.attribName,j(t),K(t)):D(f,r)?t.state=M.ATTRIB_NAME_SAW_WHITE:D(S,r)?t.attribName+=r:k(t,"Invalid attribute name");continue;case M.ATTRIB_NAME_SAW_WHITE:if("="===r)t.state=M.ATTRIB_VALUE;else{if(D(f,r))continue;k(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",P(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===r?K(t):D(T,r)?(t.attribName=r,t.state=M.ATTRIB_NAME):(k(t,"Invalid attribute name"),t.state=M.ATTRIB)}continue;case M.ATTRIB_VALUE:if(D(f,r))continue;D(m,r)?(t.q=r,t.state=M.ATTRIB_VALUE_QUOTED):(k(t,"Unquoted attribute value"),t.state=M.ATTRIB_VALUE_UNQUOTED,t.attribValue=r);continue;case M.ATTRIB_VALUE_QUOTED:if(r!==t.q){"&"===r?t.state=M.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=r;continue}j(t),t.q="",t.state=M.ATTRIB_VALUE_CLOSED;continue;case M.ATTRIB_VALUE_CLOSED:D(f,r)?t.state=M.ATTRIB:">"===r?K(t):"/"===r?t.state=M.OPEN_TAG_SLASH:D(T,r)?(k(t,"No whitespace between attributes"),t.attribName=r,t.attribValue="",t.state=M.ATTRIB_NAME):k(t,"Invalid attribute name");continue;case M.ATTRIB_VALUE_UNQUOTED:if(R(g,r)){"&"===r?t.state=M.ATTRIB_VALUE_ENTITY_U:t.attribValue+=r;continue}j(t),">"===r?K(t):t.state=M.ATTRIB;continue;case M.CLOSE_TAG:if(t.tagName)">"===r?V(t):D(S,r)?t.tagName+=r:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=M.SCRIPT):(R(f,r)&&k(t,"Invalid tagname in closing tag"),t.state=M.CLOSE_TAG_SAW_WHITE);else{if(D(f,r))continue;R(T,r)?t.script?(t.script+="</"+r,t.state=M.SCRIPT):k(t,"Invalid tagname in closing tag."):t.tagName=r}continue;case M.CLOSE_TAG_SAW_WHITE:if(D(f,r))continue;">"===r?V(t):k(t,"Invalid characters in closing tag");continue;case M.TEXT_ENTITY:case M.ATTRIB_VALUE_ENTITY_Q:case M.ATTRIB_VALUE_ENTITY_U:var s,u;switch(t.state){case M.TEXT_ENTITY:s=M.TEXT,u="textNode";break;case M.ATTRIB_VALUE_ENTITY_Q:s=M.ATTRIB_VALUE_QUOTED,u="attribValue";break;case M.ATTRIB_VALUE_ENTITY_U:s=M.ATTRIB_VALUE_UNQUOTED,u="attribValue";break}";"===r?(t[u]+=q(t),t.entity="",t.state=s):D(t.entity.length?w:I,r)?t.entity+=r:(k(t,"Invalid character in entity name"),t[u]+="&"+t.entity+r,t.entity="",t.state=s);continue;default:throw new Error(t,"Unknown state: "+t.state)}}return t.position>=t.bufferCheckPosition&&a(t),t}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */M=t.STATE,String.fromCodePoint||function(){var e=String.fromCharCode,t=Math.floor,n=function(){var n,r,i=16384,o=[],a=-1,s=arguments.length;if(!s)return"";var u="";while(++a<s){var l=Number(arguments[a]);if(!isFinite(l)||l<0||l>1114111||t(l)!==l)throw RangeError("Invalid code point: "+l);l<=65535?o.push(l):(l-=65536,n=55296+(l>>10),r=l%1024+56320,o.push(n,r)),(a+1===s||o.length>i)&&(u+=e.apply(null,o),o.length=0)}return u};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n}()})(t)}).call(this,n("b639").Buffer)},faf0:function(e,t,n){(function(e,t,n){function r(e,t,n,r,i,o,a,s){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=i,this.animatable=o,this.initial=n,this.applies=r,this.parse=a,this.compute=s}for(var i in e.all=[new r(t.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,n.parseColor,null),new r(t.ns_tts,"color","white",["span"],!0,!0,n.parseColor,null),new r(t.ns_tts,"direction","ltr",["p","span"],!0,!0,function(e){return e},null),new r(t.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(e){return e},null),new r(t.ns_tts,"displayAlign","before",["region"],!1,!0,function(e){return e},null),new r(t.ns_tts,"extent","auto",["tt","region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var r=n.parseLength(t[0]),i=n.parseLength(t[1]);return i&&r?{h:i,w:r}:null},function(e,t,n,r,i){var o,a;if("auto"===r)o=1;else if("%"===r.h.unit)o=r.h.value/100;else{if("px"!==r.h.unit)return null;o=r.h.value/e.pxDimensions.h}if("auto"===r)a=1;else if("%"===r.w.unit)a=r.w.value/100;else{if("px"!==r.w.unit)return null;a=r.w.value/e.pxDimensions.w}return{h:o,w:a}}),new r(t.ns_tts,"fontFamily","default",["span"],!0,!0,function(e){var t=e.split(","),n=[];for(var r in t)"'"!==t[r].charAt(0)&&'"'!==t[r].charAt(0)&&"default"===t[r]?n.push("monospaceSerif"):n.push(t[r]);return n},null),new r(t.ns_tts,"fontSize","1c",["span"],!0,!0,n.parseLength,function(t,n,r,i,o){var a;if("%"===i.unit)a=null!==n?n.styleAttrs[e.byName.fontSize.qname]*i.value/100:i.value/100/t.cellResolution.h;else if("em"===i.unit)a=null!==n?n.styleAttrs[e.byName.fontSize.qname]*i.value:i.value/t.cellResolution.h;else if("c"===i.unit)a=i.value/t.cellResolution.h;else{if("px"!==i.unit)return null;a=i.value/t.pxDimensions.h}return a}),new r(t.ns_tts,"fontStyle","normal",["span"],!0,!0,function(e){return e},null),new r(t.ns_tts,"fontWeight","normal",["span"],!0,!0,function(e){return e},null),new r(t.ns_tts,"lineHeight","normal",["p"],!0,!0,function(e){return"normal"===e?e:n.parseLength(e)},function(t,n,r,i,o){var a;if("normal"===i)a=i;else if("%"===i.unit)a=r.styleAttrs[e.byName.fontSize.qname]*i.value/100;else if("em"===i.unit)a=r.styleAttrs[e.byName.fontSize.qname]*i.value;else if("c"===i.unit)a=i.value/t.cellResolution.h;else{if("px"!==i.unit)return null;a=i.value/t.pxDimensions.h}return a}),new r(t.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new r(t.ns_tts,"origin","auto",["region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var r=n.parseLength(t[0]),i=n.parseLength(t[1]);return i&&r?{h:i,w:r}:null},function(e,t,n,r,i){var o,a;if("auto"===r)o=0;else if("%"===r.h.unit)o=r.h.value/100;else{if("px"!==r.h.unit)return null;o=r.h.value/e.pxDimensions.h}if("auto"===r)a=0;else if("%"===r.w.unit)a=r.w.value/100;else{if("px"!==r.w.unit)return null;a=r.w.value/e.pxDimensions.w}return{h:o,w:a}}),new r(t.ns_tts,"overflow","hidden",["region"],!1,!0,function(e){return e},null),new r(t.ns_tts,"padding","0px",["region"],!1,!0,function(e){var t=e.split(" ");if(t.length>4)return null;var r=[];for(var i in t){var o=n.parseLength(t[i]);if(!o)return null;r.push(o)}return r},function(t,n,r,i,o){var a;if(1===i.length)a=[i[0],i[0],i[0],i[0]];else if(2===i.length)a=[i[0],i[1],i[0],i[1]];else if(3===i.length)a=[i[0],i[1],i[2],i[1]];else{if(4!==i.length)return null;a=[i[0],i[1],i[2],i[3]]}var s=r.styleAttrs[e.byName.writingMode.qname];if("lrtb"===s||"lr"===s)a=[a[0],a[3],a[2],a[1]];else if("rltb"===s||"rl"===s)a=[a[0],a[1],a[2],a[3]];else if("tblr"===s)a=[a[3],a[0],a[1],a[2]];else{if("tbrl"!==s&&"tb"!==s)return null;a=[a[3],a[2],a[1],a[0]]}var u=[];for(var l in a)if(0===a[l].value)u[l]=0;else if("%"===a[l].unit)u[l]="0"===l||"2"===l?r.styleAttrs[e.byName.extent.qname].h*a[l].value/100:r.styleAttrs[e.byName.extent.qname].w*a[l].value/100;else if("em"===a[l].unit)u[l]=r.styleAttrs[e.byName.fontSize.qname]*a[l].value;else if("c"===a[l].unit)u[l]=a[l].value/t.cellResolution.h;else{if("px"!==a[l].unit)return null;u[l]="0"===l||"2"===l?a[l].value/t.pxDimensions.h:a[l].value/t.pxDimensions.w}return u}),new r(t.ns_tts,"showBackground","always",["region"],!1,!0,function(e){return e},null),new r(t.ns_tts,"textAlign","start",["p"],!0,!0,function(e){return e},function(e,t,n,r,i){return"left"===r?"start":"right"===r?"end":r}),new r(t.ns_tts,"textDecoration","none",["span"],!0,!0,function(e){return e.split(" ")},null),new r(t.ns_tts,"textOutline","none",["span"],!0,!0,function(e){if("none"===e)return e;var t={},r=e.split(" ");if(0===r.length||r.length>2)return null;var i=n.parseColor(r[0]);if(t.color=i,null!==i&&r.shift(),1!==r.length)return null;var o=n.parseLength(r[0]);return o?(t.thickness=o,t):null},function(t,n,r,i,o){if("none"===i)return i;var a={};if(null===i.color?a.color=r.styleAttrs[e.byName.color.qname]:a.color=i.color,"%"===i.thickness.unit)a.thickness=r.styleAttrs[e.byName.fontSize.qname]*i.thickness.value/100;else if("em"===i.thickness.unit)a.thickness=r.styleAttrs[e.byName.fontSize.qname]*i.thickness.value;else if("c"===i.thickness.unit)a.thickness=i.thickness.value/t.cellResolution.h;else{if("px"!==i.thickness.unit)return null;a.thickness=i.thickness.value/t.pxDimensions.h}return a}),new r(t.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(e){return e},null),new r(t.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(e){return e},null),new r(t.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(e){return e},null),new r(t.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(e){return e},null),new r(t.ns_tts,"zIndex","auto",["region"],!1,!0,function(e){var t;return"auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t},null),new r(t.ns_ebutts,"linePadding","0c",["p"],!0,!1,n.parseLength,function(e,t,n,r,i){return"c"===r.unit?r.value/e.cellResolution.h:null}),new r(t.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(e){return e},null),new r(t.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(e){return e},null),new r(t.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(e){return"true"===e},null),new r(t.ns_itts,"fillLineGap","false",["p"],!0,!0,function(e){return"true"===e},null)],e.byQName={},e.all)e.byQName[e.all[i].qname]=e.all[i];for(var o in e.byName={},e.all)e.byName[e.all[o].name]=e.all[o]})(t,"undefined"===typeof imscNames?n("597c"):imscNames,"undefined"===typeof imscUtils?n("ff7d"):imscUtils)},fe1e:function(e,t,n){n("7075")("Map")},fe3f:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("c287"),u=i(s),l=n("2f4d"),d=i(l),c=n("e09e"),f=i(c),h=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,p=31536e3,m=2592e3,g=86400,y=3600,v=60,_=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){for(var t=[f["default"].MIN_BUFFER_TIME,f["default"].MEDIA_PRESENTATION_DURATION,f["default"].MINIMUM_UPDATE_PERIOD,f["default"].TIMESHIFT_BUFFER_DEPTH,f["default"].MAX_SEGMENT_DURATION,f["default"].MAX_SUBSEGMENT_DURATION,d["default"].SUGGESTED_PRESENTATION_DELAY,f["default"].START,d["default"].START_TIME,f["default"].DURATION],n=t.length,r=0;r<n;r++)if(e.nodeName===t[r])return h.test(e.value);return!1},function(e){var t=h.exec(e),n=parseFloat(t[2]||0)*p+parseFloat(t[4]||0)*m+parseFloat(t[6]||0)*g+parseFloat(t[8]||0)*y+parseFloat(t[10]||0)*v+parseFloat(t[12]||0);return void 0!==t[1]&&(n=-n),n})}return a(t,e),t}(u["default"]);t["default"]=_,e.exports=t["default"]},ff7d:function(e,t,n){(function(e){var t=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,n=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,r=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,i={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(e){var o,a=null,s=i[e.toLowerCase()];return void 0!==s?a=s:null!==(o=t.exec(e))?a=[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16),void 0!==o[4]?parseInt(o[4],16):255]:null!==(o=n.exec(e))?a=[parseInt(o[1]),parseInt(o[2]),parseInt(o[3]),255]:null!==(o=r.exec(e))&&(a=[parseInt(o[1]),parseInt(o[2]),parseInt(o[3]),parseInt(o[4])]),a};var o=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%)$/;e.parseLength=function(e){var t,n=null;return null!==(t=o.exec(e))&&(n={value:parseFloat(t[1]),unit:t[2]}),n}})(t)}}]);
//# sourceMappingURL=chunk-vendors.04d1649f.js.map
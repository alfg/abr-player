(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"010f":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""};t["default"]=i,e.exports=t["default"]},"01f9":function(e,t,n){"use strict";var r=n("2d00"),i=n("5ca1"),o=n("2aba"),a=n("32e9"),s=n("84f2"),u=n("41a0"),l=n("7f20"),c=n("38fd"),d=n("2b4c")("iterator"),f=!([].keys&&"next"in[].keys()),h="@@iterator",p="keys",m="values",g=function(){return this};e.exports=function(e,t,n,y,v,_,E){u(n,t,y);var b,T,S,w=function(e){if(!f&&e in D)return D[e];switch(e){case p:return function(){return new n(this,e)};case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",I=v==m,A=!1,D=e.prototype,R=D[d]||D[h]||v&&D[v],M=R||w(v),C=v?I?w("entries"):M:void 0,N="Array"==t&&D.entries||R;if(N&&(S=c(N.call(new e)),S!==Object.prototype&&S.next&&(l(S,x,!0),r||"function"==typeof S[d]||a(S,d,g))),I&&R&&R.name!==m&&(A=!0,M=function(){return R.call(this)}),r&&!E||!f&&!A&&D[d]||a(D,d,M),s[t]=M,s[x]=g,v)if(b={values:I?M:w(m),keys:_?M:w(p),entries:C},E)for(T in b)T in D||o(D,T,b[T]);else i(i.P+i.F*(f||A),t,b);return b}},"028f":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("d0d2"),o=r(i),a=n("0ef4"),s=r(a),u=n("46c1"),l=r(u),c=n("d0a4"),d=r(c),f=n("6a2d"),h=r(f),p=5,m=500,g=3,y=1e3,v=8e3;function _(e){e=e||{};var t=e.protectionKeyController,n=e.protectionModel,r=e.eventBus,i=e.events,a=e.debug,u=e.BASE64,c=e.constants,f=[],_=void 0,E=void 0,b=void 0,T=void 0,S=void 0,w=void 0,x=void 0,I=void 0;function A(){E=a.getLogger(_),b=[],T=[],w="temporary",x=""}function D(){if(!r||!r.hasOwnProperty("on")||!t||!t.hasOwnProperty("getSupportedKeySystemsFromContentProtection"))throw new Error("Missing config parameter(s)")}function R(e){if(!e)throw new Error("mediaInfo can not be null or undefined");D(),r.on(i.INTERNAL_KEY_MESSAGE,W,this),r.on(i.INTERNAL_KEY_STATUS_CHANGED,z,this),T.push(e);var n=t.getSupportedKeySystemsFromContentProtection(e.contentProtection);n&&n.length>0&&G(n,!0)}function M(e){return t.getSupportedKeySystemsFromContentProtection(e)}function C(e,a){var s=o["default"].getPSSHForKeySystem(I,e),u=K(I);if(s){for(var l=n.getAllInitData(),c=0;c<l.length;c++)if(t.initDataEquals(s,l[c]))return void E.warn("DRM: Ignoring initData because we have already seen it!");try{n.createKeySession(s,u,q(I),a)}catch(f){r.trigger(i.KEY_SESSION_CREATED,{data:null,error:new h["default"](d["default"].KEY_SESSION_CREATED_ERROR_CODE,d["default"].KEY_SESSION_CREATED_ERROR_MESSAGE+f.message)})}}else e?n.createKeySession(e,u,q(I),a):r.trigger(i.KEY_SESSION_CREATED,{data:null,error:new h["default"](d["default"].KEY_SESSION_CREATED_ERROR_CODE,d["default"].KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+I.systemString+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function N(e,t){n.loadKeySession(e,t,q(I))}function L(e){n.removeKeySession(e)}function P(e){n.closeKeySession(e)}function O(e){n.setServerCertificate(e)}function F(e){e?(n.setMediaElement(e),r.on(i.NEED_KEY,$,this)):null===e&&(n.setMediaElement(e),r.off(i.NEED_KEY,$,this))}function k(e){w=e}function B(e){x=e}function U(e){S=e,t.setProtectionData(e)}function H(){n&&n.stop()}function j(){r.off(i.INTERNAL_KEY_MESSAGE,W,this),r.off(i.INTERNAL_KEY_STATUS_CHANGED,z,this),F(null),I=void 0,n&&(n.reset(),n=null),f.forEach((function(e){return clearTimeout(e)})),f=[],T=[]}function K(e){var t=null;if(e){var n=e.systemString;S&&(t=n in S?S[n]:null)}return t}function V(e){var t=K(e),n=[],r=[],i=t&&t.audioRobustness&&t.audioRobustness.length>0?t.audioRobustness:x,o=t&&t.videoRobustness&&t.videoRobustness.length>0?t.videoRobustness:x,a=q(e),u=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",d=t&&t.persistentState?t.persistentState:"temporary"===a?"optional":"required";return T.forEach((function(e){e.type===c.AUDIO?n.push(new s["default"](e.codec,i)):e.type===c.VIDEO&&r.push(new s["default"](e.codec,o))})),new l["default"](n,r,u,d,[a])}function q(e){var t=K(e),n=t&&t.sessionType?t.sessionType:w;return n}function G(e,o){var a=this,s=[],l=void 0;if(I){for(l=0;l<e.length;l++)if(I===e[l].ks){var c=function(){s.push({ks:e[l].ks,configs:[V(I)]});var t=function t(n){r.off(i.KEY_SYSTEM_ACCESS_COMPLETE,t,a),n.error?o||r.trigger(i.KEY_SYSTEM_SELECTED,{error:new h["default"](d["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,d["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+n.error)}):(E.info("DRM: KeySystem Access Granted"),r.trigger(i.KEY_SYSTEM_SELECTED,{data:n.data}),e[l].sessionId?N(e[l].sessionId,e[l].initData):e[l].initData&&C(e[l].initData,e[l].cdmData))};return r.on(i.KEY_SYSTEM_ACCESS_COMPLETE,t,a),n.requestKeySystemAccess(s),"break"}();if("break"===c)break}}else if(void 0===I){var f;(function(){I=null,b.push(e);for(var c=0;c<e.length;c++)s.push({ks:e[c].ks,configs:[V(e[c].ks)]});var p=void 0,m=function e(t){r.off(i.KEY_SYSTEM_ACCESS_COMPLETE,e,a),t.error?(I=void 0,r.off(i.INTERNAL_KEY_SYSTEM_SELECTED,f,a),o||r.trigger(i.KEY_SYSTEM_SELECTED,{data:null,error:new h["default"](d["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,d["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+t.error)})):(p=t.data,E.info("DRM: KeySystem Access Granted ("+p.keySystem.systemString+")!  Selecting key system..."),n.selectKeySystem(p))};f=function e(s){if(r.off(i.INTERNAL_KEY_SYSTEM_SELECTED,e,a),r.off(i.KEY_SYSTEM_ACCESS_COMPLETE,m,a),s.error)I=void 0,o||r.trigger(i.KEY_SYSTEM_SELECTED,{data:null,error:new h["default"](d["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,d["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+s.error)});else{if(!n)return;I=n.getKeySystem(),r.trigger(i.KEY_SYSTEM_SELECTED,{data:p});var c=K(I);c&&c.serverCertificate&&c.serverCertificate.length>0&&n.setServerCertificate(u.decodeArray(c.serverCertificate).buffer);for(var f=0;f<b.length;f++)for(l=0;l<b[f].length;l++)if(I===b[f][l].ks){if(t.isClearKey(I)&&c&&c.hasOwnProperty("clearkeys")){var g={kids:Object.keys(c.clearkeys)};b[f][l].initData=(new TextEncoder).encode(JSON.stringify(g))}b[f][l].sessionId?N(b[f][l].sessionId,b[f][l].initData):null!==b[f][l].initData&&C(b[f][l].initData,b[f][l].cdmData);break}}},r.on(i.INTERNAL_KEY_SYSTEM_SELECTED,f,a),r.on(i.KEY_SYSTEM_ACCESS_COMPLETE,m,a),n.requestKeySystemAccess(s)})()}else b.push(e)}function Y(e,t){r.trigger(i.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function z(e){e.error?r.trigger(i.KEY_STATUSES_CHANGED,{data:null,error:e.error}):E.debug("DRM: key status = "+e.status)}function W(e){E.debug("DRM: onKeyMessage");var a=e.data;r.trigger(i.KEY_MESSAGE,{data:a});var s=a.messageType?a.messageType:"license-request",u=a.message,l=a.sessionToken,c=K(I),f=I?I.systemString:null,p=t.getLicenseServer(I,c,s),m={sessionToken:l,messageType:s};if(u&&0!==u.byteLength){if(!p)return E.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+l.getSessionID()),void Y(m);if(t.isClearKey(I)){var y=t.processClearKeyLicenseRequest(I,c,u);if(y)return E.debug("DRM: ClearKey license request handled by application!"),Y(m),void n.updateKeySession(l,y)}var _=null;if(c&&c.serverURL){var b=c.serverURL;"string"===typeof b&&""!==b?_=b:"object"===typeof b&&b.hasOwnProperty(s)&&(_=b[s])}else c&&c.laURL&&""!==c.laURL?_=c.laURL:(_=I.getLicenseServerURLFromInitData(o["default"].getPSSHData(l.initData)),_||(_=e.data.laURL));if(_=p.getServerURLFromMessage(_,u,s),_){var T={},S=!1,w=function(e){if(e)for(var t in e)"authorization"===t.toLowerCase()&&(S=!0),T[t]=e[t]};c&&w(c.httpRequestHeaders),w(I.getRequestHeadersFromMessage(u)),c&&"boolean"==typeof c.withCredentials&&(S=c.withCredentials);var x=function(e,t,n,r){var i=e.response?p.getErrorResponse(e.response,n,r):"NONE";Y(t,new h["default"](d["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,d["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+n+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+i))},A=function(e){if(n)if(200===e.status){var t=p.getLicenseMessage(e.response,f,s);null!==t?(Y(m),n.updateKeySession(l,t)):x(e,m,f,s)}else x(e,m,f,s)},D=function(e){Y(m,new h["default"](d["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,d["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+f+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},R=function(e){Y(m,new h["default"](d["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,d["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+f+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},M=I.getLicenseRequestFromMessage(u),C=p.getHTTPMethod(s),N=p.getResponseType(f,s),L=c&&!isNaN(c.httpTimeout)?c.httpTimeout:v;X(_,T,C,N,S,M,g,L,A,D,R)}else Y(m,new h["default"](d["default"].MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,d["default"].MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}else Y(m,new h["default"](d["default"].MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,d["default"].MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function X(e,t,n,r,i,o,a,s,u,l,c){var d=new XMLHttpRequest;for(var f in d.open(n,e,!0),d.responseType=r,d.withCredentials=i,s>0&&(d.timeout=s),t)d.setRequestHeader(f,t[f]);var h=function(){a--,setTimeout((function(){X(e,t,n,r,i,o,a,s,u,l,c)}),y)};d.onload=function(){200===this.status||a<=0?u(this):(E.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+a),h())},d.ontimeout=d.onerror=function(){a<=0?c(this):(E.warn("License request network request failed . Retrying it... Pending retries: "+a),h())},d.onabort=function(){l(this)},d.send(o)}function $(e,r){if(E.debug("DRM: onNeedKey"),"cenc"===e.key.initDataType)if(0===T.length&&(E.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),r="undefined"===typeof r?1:r+1,r<p))f.push(setTimeout((function(){$(e,r)}),m));else{var i=e.key.initData;if(ArrayBuffer.isView(i)&&(i=i.buffer),I){var a=o["default"].getPSSHForKeySystem(I,i);if(a)for(var s=n.getAllInitData(),u=0;u<s.length;u++)if(t.initDataEquals(a,s[u]))return void E.warn("DRM: Ignoring initData because we have already seen it!")}E.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(i)));var l=t.getSupportedKeySystems(i,S);0!==l.length?G(l,!1):E.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")}else E.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType)}function Q(){return t?t.getKeySystems():[]}return _={initializeForMedia:R,createKeySession:C,loadKeySession:N,removeKeySession:L,closeKeySession:P,setServerCertificate:O,setMediaElement:F,setSessionType:k,setRobustnessLevel:B,setProtectionData:U,getSupportedKeySystemsFromContentProtection:M,getKeySystems:Q,stop:H,reset:j},A(),_}_.__dashjs_factory_name="ProtectionController",t["default"]=dashjs.FactoryMaker.getClassFactory(_),e.exports=t["default"]},"02f4":function(e,t,n){var r=n("4588"),i=n("be13");e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),l=s.length;return u<0||u>=l?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},"0390":function(e,t,n){"use strict";var r=n("02f4")(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},"04f2":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.time=null,this.droppedFrames=null};t["default"]=i,e.exports=t["default"]},"0502":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("5beb");function s(e,t){e=e||{};var n=e.timelineConverter,r=void 0;function i(e,r,i,o){var s=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,u=s.SegmentURL_asArray.length,l=[],c=void 0,d=void 0,f=void 0,h=void 0,p=void 0,m=void 0,g=void 0;for(g=e.startNumber,h=(0,a.decideSegmentListRangeForTemplate)(n,t,e,r,i,o),p=Math.max(h.start,0),m=Math.min(h.end,s.SegmentURL_asArray.length-1),c=p;c<=m;c++)f=s.SegmentURL_asArray[c],d=(0,a.getIndexBasedSegment)(n,t,e,c),d.replacementTime=(g+c-1)*e.segmentDuration,d.media=f.media?f.media:"",d.mediaRange=f.mediaRange,d.index=f.index,d.indexRange=f.indexRange,l.push(d),d=null;return e.availableSegmentsNumber=u,l}return r={getSegments:i},r}s.__dashjs_factory_name="ListSegmentsGetter";var u=o["default"].getClassFactory(s);t["default"]=u,e.exports=t["default"]},"0637":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("6a2d"),o=r(i),a=n("7865"),s=r(a),u=n("0757"),l=n("6c57"),c=r(l),d=n("8a43"),f=r(d),h=n("1d48"),p=r(h),m=n("467b"),g=r(m),y=n("e172"),v=r(y);function _(e){e=e||{};var t="urn:mpeg:dash:resolve-to-zero:2013",n=this.context,r=(0,f["default"])(n).getInstance(),i=(0,s["default"])(n).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),a=void 0;function l(e,n,a){var s=function(t,i){n.resolved=!0,n.resolvedContent=t||null,r.trigger(p["default"].XLINK_ELEMENT_LOADED,{element:n,resolveObject:a,error:t||i?null:new o["default"](v["default"].XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,v["default"].XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+e)})};if(e===t)s(null,!0);else{var l=new c["default"](e,u.HTTPRequest.XLINK_EXPANSION_TYPE);i.load({request:l,success:function(e){s(e)},error:function(){s(null)}})}}function d(){i&&(i.abort(),i=null)}return a={load:l,reset:d},a}_.__dashjs_factory_name="XlinkLoader",t["default"]=g["default"].getClassFactory(_),e.exports=t["default"]},"0712":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("0637"),o=r(i),a=n("8a43"),s=r(a),u=n("1d48"),l=r(u),c=n("467b"),d=r(c),f=n("8821"),h=r(f),p=n("4e7a"),m=r(p),g=n("e09e"),y=r(g),v="onLoad",_="onActuate",E="urn:mpeg:dash:resolve-to-zero:2013";function b(e){e=e||{};var t=this.context,n=(0,s["default"])(t).getInstance(),r=(0,m["default"])(t).getInstance(),i=void 0,a=void 0,u=void 0,c=void 0,d=void 0,f=void 0;function p(){n.on(l["default"].XLINK_ELEMENT_LOADED,x,i),f=(0,o["default"])(t).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier})}function g(e){e&&(a=e)}function b(e){e&&(u=e)}function T(e){var t=void 0;d=new h["default"]({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:a}),c=e,t=A(c.Period_asArray,c,y["default"].PERIOD,v),w(t,y["default"].PERIOD,v)}function S(){n.off(l["default"].XLINK_ELEMENT_LOADED,x,i),f&&(f.reset(),f=null)}function w(e,t,n){var i={},o=void 0,a=void 0;i.elements=e,i.type=t,i.resolveType=n,0===i.elements.length&&I(i);for(var s=0;s<i.elements.length;s++)o=i.elements[s],a=r.isHTTPURL(o.url)?o.url:o.originalContent.BaseURL+o.url,f.load(a,o,i)}function x(e){var t=void 0,n=void 0,r="<response>",i="</response>",o="";if(t=e.element,n=e.resolveObject,t.resolvedContent){var a=0;0===t.resolvedContent.indexOf("<?xml")&&(a=t.resolvedContent.indexOf("?>")+2),o=t.resolvedContent.substr(0,a)+r+t.resolvedContent.substr(a)+i,t.resolvedContent=d.xml_str2json(o)}M(n)&&I(n)}function I(e){var t=[],r=void 0,i=void 0;if(D(e),e.resolveType===_&&n.trigger(l["default"].XLINK_READY,{manifest:c}),e.resolveType===v)switch(e.type){case y["default"].PERIOD:for(r=0;r<c[y["default"].PERIOD+"_asArray"].length;r++)i=c[y["default"].PERIOD+"_asArray"][r],i.hasOwnProperty(y["default"].ADAPTATION_SET+"_asArray")&&(t=t.concat(A(i[y["default"].ADAPTATION_SET+"_asArray"],i,y["default"].ADAPTATION_SET,v))),i.hasOwnProperty(y["default"].EVENT_STREAM+"_asArray")&&(t=t.concat(A(i[y["default"].EVENT_STREAM+"_asArray"],i,y["default"].EVENT_STREAM,v)));w(t,y["default"].ADAPTATION_SET,v);break;case y["default"].ADAPTATION_SET:n.trigger(l["default"].XLINK_READY,{manifest:c});break}}function A(e,t,n,r){var i=[],o=void 0,a=void 0,s=void 0;for(a=e.length-1;a>=0;a--)o=e[a],o.hasOwnProperty("xlink:href")&&o["xlink:href"]===E&&e.splice(a,1);for(a=0;a<e.length;a++)o=e[a],o.hasOwnProperty("xlink:href")&&o.hasOwnProperty("xlink:actuate")&&o["xlink:actuate"]===r&&(s=R(o["xlink:href"],t,n,a,r,o),i.push(s));return i}function D(e){var t=[],n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0;for(o=e.elements.length-1;o>=0;o--){if(n=e.elements[o],r=n.type+"_asArray",!n.resolvedContent||C())delete n.originalContent["xlink:actuate"],delete n.originalContent["xlink:href"],t.push(n.originalContent);else if(n.resolvedContent)for(a=0;a<n.resolvedContent[r].length;a++)i=n.resolvedContent[r][a],t.push(i);for(n.parentElement[r].splice(n.index,1),s=0;s<t.length;s++)n.parentElement[r].splice(n.index+s,0,t[s]);t=[]}e.elements.length>0&&u.run(c)}function R(e,t,n,r,i,o){return{url:e,parentElement:t,type:n,index:r,resolveType:i,originalContent:o,resolvedContent:null,resolved:!1}}function M(e){var t=void 0,n=void 0;for(t=0;t<e.elements.length;t++)if(n=e.elements[t],!1===n.resolved)return!1;return!0}function C(){return!1}return i={resolveManifestOnLoad:T,setMatchers:g,setIron:b,reset:S},p(),i}b.__dashjs_factory_name="XlinkController",t["default"]=d["default"].getClassFactory(b),e.exports=t["default"]},"0757":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null},o=function e(){r(this,e),this.s=null,this.d=null,this.b=[]};i.GET="GET",i.HEAD="HEAD",i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.OTHER_TYPE="other",t.HTTPRequest=i,t.HTTPRequestTrace=o},"07e3":function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},"086a":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("7091"),o=r(i),a=n("de72"),s=r(a),u=n("f785"),l=r(u),c=n("ace9"),d=r(c),f=n("3aad"),h=r(f),p=n("64c7"),m=r(p),g=n("467b"),y=r(g),v=n("9485"),_=r(v),E="qualitySwitchRules",b="abandonFragmentRules";function T(e){e=e||{};var t=this.context,n=e.mediaPlayerModel,r=e.metricsModel,i=e.dashMetrics,a=void 0,u=void 0,c=void 0;function f(){u=[],c=[],n.getUseDefaultABRRules()&&(u.push((0,m["default"])(t).create({metricsModel:r,dashMetrics:i,mediaPlayerModel:n})),u.push((0,o["default"])(t).create({metricsModel:r,dashMetrics:i})),u.push((0,s["default"])(t).create({metricsModel:r,dashMetrics:i})),u.push((0,h["default"])(t).create()),u.push((0,d["default"])(t).create()),c.push((0,l["default"])(t).create({metricsModel:r,dashMetrics:i,mediaPlayerModel:n})));var e=n.getABRCustomRules();e.forEach((function(e){e.type===E&&u.push(e.rule(t).create()),e.type===b&&c.push(e.rule(t).create())}))}function p(e){return e.filter((function(e){return e.quality>_["default"].NO_CHANGE}))}function g(e){var n={},r=void 0,i=void 0,o=void 0,a=void 0,s=void 0;if(0!==e.length){for(n[_["default"].PRIORITY.STRONG]=_["default"].NO_CHANGE,n[_["default"].PRIORITY.WEAK]=_["default"].NO_CHANGE,n[_["default"].PRIORITY.DEFAULT]=_["default"].NO_CHANGE,r=0,i=e.length;r<i;r+=1)o=e[r],o.quality!==_["default"].NO_CHANGE&&(n[o.priority]=n[o.priority]>_["default"].NO_CHANGE?Math.min(n[o.priority],o.quality):o.quality);return n[_["default"].PRIORITY.WEAK]!==_["default"].NO_CHANGE&&(a=n[_["default"].PRIORITY.WEAK]),n[_["default"].PRIORITY.DEFAULT]!==_["default"].NO_CHANGE&&(a=n[_["default"].PRIORITY.DEFAULT]),n[_["default"].PRIORITY.STRONG]!==_["default"].NO_CHANGE&&(a=n[_["default"].PRIORITY.STRONG]),a!==_["default"].NO_CHANGE&&(s=a),(0,_["default"])(t).create(s)}}function y(e){var n=u.map((function(t){return t.getMaxIndex(e)})),r=p(n),i=g(r);return i||(0,_["default"])(t).create()}function v(e){var n=c.map((function(t){return t.shouldAbandon(e)})),r=p(n),i=g(r);return i||(0,_["default"])(t).create()}function T(){[u,c].forEach((function(e){e&&e.length&&e.forEach((function(e){return e.reset&&e.reset()}))})),u=[],c=[]}return a={initialize:f,reset:T,getMaxQuality:y,shouldAbandonFragment:v},a}T.__dashjs_factory_name="ABRRulesCollection";var S=y["default"].getClassFactory(T);S.QUALITY_SWITCH_RULES=E,S.ABANDON_FRAGMENT_RULES=b,y["default"].updateSingletonFactory(T.__dashjs_factory_name,S),t["default"]=S,e.exports=t["default"]},"090c":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("8d23"),o=n("7b5a"),a=r(o),s=n("3258"),u=r(s),l=n("fa14"),c=r(l),d=n("589e"),f=r(d);dashjs.Protection=u["default"],dashjs.MetricsReporting=a["default"],dashjs.MediaPlayerFactory=c["default"],dashjs.Debug=f["default"],t["default"]=dashjs,t.MediaPlayer=i.MediaPlayer,t.Protection=u["default"],t.MetricsReporting=a["default"],t.MediaPlayerFactory=c["default"],t.Debug=f["default"]},"0960":function(e,t,n){e.exports=n("b19a")},"097d":function(e,t,n){"use strict";var r=n("5ca1"),i=n("8378"),o=n("7726"),a=n("ebd6"),s=n("bcaa");r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then((function(){return n}))}:e,n?function(n){return s(t,e()).then((function(){throw n}))}:e)}})},"09b9":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){i(this,e)}return r(e,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}]),e}();t["default"]=o,e.exports=t["default"]},"0a49":function(e,t,n){var r=n("9b43"),i=n("626a"),o=n("4bf8"),a=n("9def"),s=n("cd1c");e.exports=function(e,t){var n=1==e,u=2==e,l=3==e,c=4==e,d=6==e,f=5==e||d,h=t||s;return function(t,s,p){for(var m,g,y=o(t),v=i(y),_=r(s,p,3),E=a(v.length),b=0,T=n?h(t,E):u?h(t,0):void 0;E>b;b++)if((f||b in v)&&(m=v[b],g=_(m,b,y),e))if(n)T[b]=g;else if(g)switch(e){case 3:return!0;case 5:return m;case 6:return b;case 2:T.push(m)}else if(c)return!1;return d?-1:l||c?c:T}}},"0b20":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};t["default"]=i,e.exports=t["default"]},"0bfb":function(e,t,n){"use strict";var r=n("cb7c");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"0c93":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("b048"),u=i(s),l=n("e09e"),c=i(l),d=function(e){function t(){o(this,t);var e=[c["default"].SEGMENT_BASE,c["default"].SEGMENT_TEMPLATE,c["default"].SEGMENT_LIST];r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,c["default"].PERIOD,e,[new u["default"](c["default"].ADAPTATION_SET,e,[new u["default"](c["default"].REPRESENTATION,e)])])}return a(t,e),t}(u["default"]);t["default"]=d,e.exports=t["default"]},"0d27":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("32da"),o=r(i),a=n("ba50"),s=r(a),u=n("a512"),l=r(u),c=n("6cb2"),d=r(c);function f(e){e=e||{};var t=void 0,n=e.debug,r=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,i=this.context,a={BufferLevel:o["default"],DVBErrors:s["default"],HttpList:l["default"],PlayList:d["default"],RepSwitchList:d["default"],TcpList:d["default"]};function u(t,o){var s,u=t.match(r);if(u){try{s=a[u[1]](i).create({eventBus:e.eventBus,metricsConstants:e.metricsConstants}),s.initialize(u[1],o,u[3],u[5])}catch(l){s=null,n.error("MetricsHandlerFactory: Could not create handler for type "+u[1]+" with args "+u[3]+", "+u[5]+" ("+l.message+")")}return s}}function c(e,t){a[e]=t}function f(e){delete a[e]}return t={create:u,register:c,unregister:f},t}f.__dashjs_factory_name="MetricsHandlerFactory",t["default"]=dashjs.FactoryMaker.getSingletonFactory(f),e.exports=t["default"]},"0d2b":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("d0d2"),o=r(i),a=n("7b70"),s=r(a),u="9a04f079-9840-4286-ab92-e65be0885f95",l=s["default"].PLAYREADY_KEYSTEM_STRING,c="urn:uuid:"+u,d='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>',f=void 0;function h(e){e=e||{};var t=void 0,n="utf16",r=e.BASE64;function i(){if(!r||!r.hasOwnProperty("decodeArray")||!r.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}function a(e){var t=void 0,r=void 0,i={},o=new DOMParser,a="utf16"===n?new Uint16Array(e):new Uint8Array(e);t=String.fromCharCode.apply(null,a),r=o.parseFromString(t,"application/xml");for(var s=r.getElementsByTagName("name"),u=r.getElementsByTagName("value"),l=0;l<s.length;l++)i[s[l].childNodes[0].nodeValue]=u[l].childNodes[0].nodeValue;return i.hasOwnProperty("Content")&&(i["Content-Type"]=i.Content,delete i.Content),i.hasOwnProperty("Content-Type")||(i["Content-Type"]="text/xml; charset="+n),i}function s(e){var t=null,o=new DOMParser,a="utf16"===n?new Uint16Array(e):new Uint8Array(e);i();var s=String.fromCharCode.apply(null,a),u=o.parseFromString(s,"application/xml");if(u.getElementsByTagName("Challenge")[0]){var l=u.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;l&&(t=r.decode(l))}else if(u.getElementsByTagName("parsererror").length)return e;return t}function h(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),r=6,i=new DOMParser,o=0;o<n;o++){var a=t.getUint16(r,!0);r+=2;var s=t.getUint16(r,!0);if(r+=2,1===a){var u=e.slice(r,r+s),l=String.fromCharCode.apply(null,new Uint16Array(u)),c=i.parseFromString(l,"application/xml");if(c.getElementsByTagName("LA_URL")[0]){var d=c.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(d)return d}if(c.getElementsByTagName("LUI_URL")[0]){var f=c.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(f)return f}}else r+=s}return null}function p(e){var t=new Uint8Array([112,115,115,104,0,0,0,0]),n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),a=0,s=null,u=void 0,l=void 0,c=void 0,d=void 0,f=void 0;if(i(),"pssh"in e)return o["default"].parseInitDataFromContentProtection(e,r);if("pro"in e)s=r.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;s=r.decodeArray(e.prheader.__text)}return u=s.length,l=4+t.length+n.length+4+u,c=new ArrayBuffer(l),d=new Uint8Array(c),f=new DataView(c),f.setUint32(a,l),a+=4,d.set(t,a),a+=t.length,d.set(n,a),a+=n.length,f.setUint32(a,u),a+=4,d.set(s,a),a+=u,d.buffer}function m(e){if("utf8"!==e&&"utf16"!==e)throw new Error("Illegal PlayReady message format! -- "+e);n=e}function g(e){e&&(f=e)}function y(){var e=void 0,t=void 0,n=void 0,o=void 0;if(i(),f&&f.cdmData){for(e=[],o=0;o<f.cdmData.length;++o)e.push(f.cdmData.charCodeAt(o)),e.push(0);for(e=String.fromCharCode.apply(null,e),e=r.encode(e),t=d.replace("%CUSTOMDATA%",e),n=[],o=0;o<t.length;++o)n.push(t.charCodeAt(o)),n.push(0);return new Uint8Array(n).buffer}return null}function v(e){return f&&f.sessionId?f.sessionId:e&&e.sessionId?e.sessionId:null}return t={uuid:u,schemeIdURI:c,systemString:l,getInitData:p,getRequestHeadersFromMessage:a,getLicenseRequestFromMessage:s,getLicenseServerURLFromInitData:h,getCDMData:y,getSessionId:v,setPlayReadyMessageFormat:m,init:g},t}h.__dashjs_factory_name="KeySystemPlayReady",t["default"]=dashjs.FactoryMaker.getSingletonFactory(h),e.exports=t["default"]},"0d58":function(e,t,n){var r=n("ce10"),i=n("e11e");e.exports=Object.keys||function(e){return r(e,i)}},"0eda":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(){var e={};function t(t){var n=t.streamId,r=t.representationId;e[n]=e[n]||{},e[n][r]=t}function n(t,n){return e&&e[t]&&e[t][n]?e[t][n]:null}function r(){e={}}var i={save:t,extract:n,reset:r};return i}a.__dashjs_factory_name="InitCache",t["default"]=o["default"].getSingletonFactory(a),e.exports=t["default"]},"0ef4":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n){r(this,e),this.contentType=t,this.robustness=n};t["default"]=i,e.exports=t["default"]},"0f0c":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("467b"),s=r(a);function u(e){e=e||{};var t=20,n=3,r=4,i=4,a=1.3,s=1.3,u=8,l=3,c=2,d=1,f=e.mediaPlayerModel,h=void 0,p=void 0,m=void 0,g=void 0,y=void 0;function v(){y={throughputHalfLife:{fast:l,slow:u},latencyHalfLife:{fast:d,slow:c}},C()}function _(e,t,n){return e===o["default"].VIDEO?n<f.getCacheLoadThresholdForType(o["default"].VIDEO):e===o["default"].AUDIO?n<f.getCacheLoadThresholdForType(o["default"].AUDIO):void 0}function E(e,n,r){if(n.trace&&n.trace.length){var i=n.tresponse.getTime()-n.trequest.getTime()||1,o=n._tfinish.getTime()-n.tresponse.getTime()||1,a=n.trace.reduce((function(e,t){return e+t.b[0]}),0),s=void 0;s=f.getLowLatencyEnabled()?n.trace.reduce((function(e,t){return e+t.d}),0):r?o:i+o;var u=Math.round(8*a/s);if(R(e),_(e,i,o)){if(h[e].length>0&&!h[e].hasCachedEntries)return;h[e].hasCachedEntries=!0}else h[e]&&h[e].hasCachedEntries&&M(e);h[e].push(u),h[e].length>t&&h[e].shift(),p[e].push(i),p[e].length>t&&p[e].shift(),b(m[e],u,.001*o,y.throughputHalfLife),b(g[e],i,1,y.latencyHalfLife)}}function b(e,t,n,r){var i=Math.pow(.5,n/r.fast);e.fastEstimate=(1-i)*t+i*e.fastEstimate;var o=Math.pow(.5,n/r.slow);e.slowEstimate=(1-o)*t+o*e.slowEstimate,e.totalWeight+=n}function T(e,t,o){var u=void 0,l=void 0;if(e?(u=h[t],l=o?n:r):(u=p[t],l=i),u){if(l>=u.length)l=u.length;else if(e)for(var c=1;c<l;++c){var d=u[c]/u[c-1];if((d>=s||d<=1/a)&&(l+=1,l===u.length))break}}else l=0;return l}function S(e,t,n){return f.getMovingAverageMethod()!==o["default"].MOVING_AVERAGE_SLIDING_WINDOW?x(e,t):w(e,t,n)}function w(e,t,n){var r=T(e,t,n),i=e?h:p,o=i[t];return 0!==r&&o&&0!==o.length?(o=o.slice(-r),o.reduce((function(e,t){return e+t}))/o.length):NaN}function x(e,t){var n=e?y.throughputHalfLife:y.latencyHalfLife,r=e?m[t]:g[t];if(!r||r.totalWeight<=0)return NaN;var i=r.fastEstimate/(1-Math.pow(.5,r.totalWeight/n.fast)),o=r.slowEstimate/(1-Math.pow(.5,r.totalWeight/n.slow));return e?Math.min(i,o):Math.max(i,o)}function I(e,t){return S(!0,e,t)}function A(e,t){var n=I(e,t);return isNaN(n)||(n*=f.getBandwidthSafetyFactor()),n}function D(e){return S(!1,e)}function R(e){h[e]=h[e]||[],p[e]=p[e]||[],m[e]=m[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},g[e]=g[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function M(e){delete h[e],delete p[e],delete m[e],delete g[e],R(e)}function C(){h={},p={},m={},g={}}var N={push:E,getAverageThroughput:I,getSafeAverageThroughput:A,getAverageLatency:D,reset:C};return v(),N}u.__dashjs_factory_name="ThroughputHistory",t["default"]=s["default"].getClassFactory(u),e.exports=t["default"]},"0fc9":function(e,t,n){var r=n("3a38"),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},1021:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(e){e=e||{};var t=void 0,n=e.abrController,r=e.switchHistory,i=e.droppedFramesHistory,o=e.currentRequest,a=e.useBufferOccupancyABR,s=e.streamProcessor?e.streamProcessor.getScheduleController():null,u=e.streamProcessor?e.streamProcessor.getRepresentationInfo():null;function l(){var e=d();return e?e.type:null}function c(){var e=d();return e?e.streamInfo:null}function d(){return u?u.mediaInfo:null}function f(){return u}function h(){return s}function p(){return n}function m(){return r}function g(){return i}function y(){return o}function v(){return a}return t={getMediaType:l,getMediaInfo:d,getDroppedFramesHistory:g,getCurrentRequest:y,getSwitchHistory:m,getStreamInfo:c,getScheduleController:h,getAbrController:p,getRepresentationInfo:f,useBufferOccupancyABR:v},t}a.__dashjs_factory_name="RulesContext",t["default"]=o["default"].getClassFactory(a),e.exports=t["default"]},"10fb":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.metrics="",this.Range=[],this.Reporting=[]};t["default"]=i,e.exports=t["default"]},1169:function(e,t,n){var r=n("2d95");e.exports=Array.isArray||function(e){return"Array"==r(e)}},1173:function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},"11e9":function(e,t,n){var r=n("52a7"),i=n("4630"),o=n("6821"),a=n("6a99"),s=n("69a8"),u=n("c69a"),l=Object.getOwnPropertyDescriptor;t.f=n("9e1e")?l:function(e,t){if(e=o(e),t=a(t,!0),u)try{return l(e,t)}catch(n){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},"120d":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(e){e=e||{};var t=e.requestModifier,n=void 0;function r(e){var n=new Date,r=e.request,i=new XMLHttpRequest;i.open(e.method,e.url,!0),r.responseType&&(i.responseType=r.responseType),r.range&&i.setRequestHeader("Range","bytes="+r.range),r.requestStartDate||(r.requestStartDate=n),t&&(i=t.modifyRequestHeader(i)),i.withCredentials=e.withCredentials,i.onload=e.onload,i.onloadend=e.onend,i.onerror=e.onerror,i.onprogress=e.progress,i.onabort=e.onabort,i.send(),e.response=i}function i(e){var t=e.response;t.onloadend=t.onerror=t.onprogress=void 0,t.abort()}return n={load:r,abort:i},n}a.__dashjs_factory_name="XHRLoader";var s=o["default"].getClassFactory(a);t["default"]=s,e.exports=t["default"]},"12fe":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("8a43"),s=r(a),u=n("1d48"),l=r(u),c=n("467b"),d=r(c),f=n("0eda"),h=r(f),p=n("2b8a"),m=r(p),g=n("5571"),y=r(g),v=n("6a2d"),_=r(v),E=n("e172"),b=r(E),T="NotFragmentedTextBufferController";function S(e){e=e||{};var t=this.context,n=(0,s["default"])(t).getInstance(),r=(0,y["default"])(t).getInstance(),i=e.errHandler,a=e.type,u=e.mimeType,c=e.streamProcessor,d=void 0,f=void 0,p=void 0,g=void 0,v=void 0,E=void 0;function S(){p=!1,g=null,f=!1,n.on(l["default"].DATA_UPDATE_COMPLETED,B,d),n.on(l["default"].INIT_FRAGMENT_LOADED,U,d)}function w(){return T}function x(e){R(e),E=(0,h["default"])(t).getInstance()}function I(e){try{if(v=(0,m["default"])(t).create(g,e),!p){var n=v.getBuffer();n.hasOwnProperty(o["default"].INITIALIZE)&&n.initialize(u,c),p=!0}return v}catch(s){if(e.isText||-1!==e.codec.indexOf('codecs="stpp')||-1!==e.codec.indexOf('codecs="wvtt'))try{v=r.getTextSourceBuffer()}catch(s){i.mediaSourceError("Error creating "+a+" source buffer."),i.error(new _["default"](b["default"].MEDIASOURCE_TYPE_UNSUPPORTED_CODE,b["default"].MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+a+" : "+s.message))}else i.mediaSourceError("Error creating "+a+" source buffer."),i.error(new _["default"](b["default"].MEDIASOURCE_TYPE_UNSUPPORTED_CODE,b["default"].MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+a))}}function A(){return a}function D(){return v}function R(e){g=e}function M(){return g}function C(){return c}function N(){return!1}function L(){}function P(){}function O(){return 0}function F(){return f}function k(e){n.off(l["default"].DATA_UPDATE_COMPLETED,B,d),n.off(l["default"].INIT_FRAGMENT_LOADED,U,d),!e&&v&&(v.abort(),v.reset(),v=null)}function B(e){if(e.sender.getStreamProcessor()===c){var t=E.extract(c.getStreamInfo().id,e.sender.getCurrentRepresentation().id);t||n.trigger(l["default"].TIMED_TEXT_REQUESTED,{index:0,sender:e.sender})}}function U(e){e.fragmentModel===c.getFragmentModel()&&e.chunk.bytes&&(E.save(e.chunk),v.append(e.chunk),n.trigger(l["default"].STREAM_COMPLETED,{request:e.request,fragmentModel:e.fragmentModel}))}function H(e,t){var r=E.extract(e,t);r||n.trigger(l["default"].TIMED_TEXT_REQUESTED,{index:0,sender:d})}function j(){return null}function K(e){v.timestampOffset===e||isNaN(e)||(v.timestampOffset=e)}return d={getBufferControllerType:w,initialize:x,createBuffer:I,getType:A,getStreamProcessor:C,setSeekStartTime:P,getBuffer:D,getBufferLevel:O,setMediaSource:R,getMediaSource:M,getIsBufferingCompleted:F,getIsPruningInProgress:N,dischargePreBuffer:L,switchInitData:H,getRangeAt:j,reset:k,updateTimestampOffset:K},S(),d}S.__dashjs_factory_name=T,t["default"]=d["default"].getClassFactory(S),e.exports=t["default"]},1495:function(e,t,n){var r=n("86cc"),i=n("cb7c"),o=n("0d58");e.exports=n("9e1e")?Object.defineProperties:function(e,t){i(e);var n,a=o(t),s=a.length,u=0;while(s>u)r.f(e,n=a[u++],t[n]);return e}},"15a2":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(e){e=e||{};var t=void 0,n=e.blacklistController;function r(e){var t=[],r=function(e){return!t.length||!e.dvb_priority||-1===t.indexOf(e.dvb_priority)},i=function(e){return!n.contains(e.serviceLocation)||(e.dvb_priority&&t.push(e.dvb_priority),!1)};return e.filter(i).filter(r)}function i(e){var t=function(e,t){var n=e.dvb_priority-t.dvb_priority;return isNaN(n)?0:n},n=function(e,t,n){return!t||n[0].dvb_priority&&e.dvb_priority&&n[0].dvb_priority===e.dvb_priority},r=0,i=[],o=0,a=void 0,s=void 0;if(s=e.sort(t).filter(n),s.length)return s.length>1&&(s.forEach((function(e){r+=e.dvb_weight,i.push(r)})),a=Math.floor(Math.random()*(r-1)),i.every((function(e,t){return o=t,!(a<e)}))),s[o]}function o(e){return e&&i(r(e))}return t={select:o},t}a.__dashjs_factory_name="DVBSelector",t["default"]=o["default"].getClassFactory(a),e.exports=t["default"]},1654:function(e,t,n){"use strict";var r=n("71c1")(!0);n("30f1")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},1691:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},1774:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1};t["default"]=i,e.exports=t["default"]},1962:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("09b9"),u=i(s),l=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.SOURCE_INITIALIZED="sourceInitialized",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_SEEK_ASKED="playbackSeekAsked",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged"}return a(t,e),t}(u["default"]),c=new l;t["default"]=c,e.exports=t["default"]},1991:function(e,t,n){var r,i,o,a=n("9b43"),s=n("31f4"),u=n("fab2"),l=n("230e"),c=n("7726"),d=c.process,f=c.setImmediate,h=c.clearImmediate,p=c.MessageChannel,m=c.Dispatch,g=0,y={},v="onreadystatechange",_=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},E=function(e){_.call(e.data)};f&&h||(f=function(e){var t=[],n=1;while(arguments.length>n)t.push(arguments[n++]);return y[++g]=function(){s("function"==typeof e?e:Function(e),t)},r(g),g},h=function(e){delete y[e]},"process"==n("2d95")(d)?r=function(e){d.nextTick(a(_,e,1))}:m&&m.now?r=function(e){m.now(a(_,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=E,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+"","*")},c.addEventListener("message",E,!1)):r=v in l("script")?function(e){u.appendChild(l("script"))[v]=function(){u.removeChild(this),_.call(e)}}:function(e){setTimeout(a(_,e,1),0)}),e.exports={set:f,clear:h}},"1a38":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("4e47"),s=r(a),u=n("8a43"),l=r(u),c=n("1d48"),d=r(c),f=n("467b"),h=r(f),p=n("589e"),m=r(p),g=500;function y(){var e=this.context,t=(0,l["default"])(e).getInstance(),n=void 0,r=void 0,i=void 0,a=void 0,u=void 0,c=void 0,f=void 0,h=void 0,p=void 0,y=void 0,v=void 0,_=void 0,E=void 0,b=void 0,T=void 0,S=void 0,w=void 0,x=void 0,I=void 0,A=void 0,D=void 0,R=void 0,M=void 0,C=void 0,N=void 0,L=void 0;function P(){r=(0,m["default"])(e).getInstance().getLogger(n),re()}function O(e,n){S=e,Be(),w=S.manifestInfo.isDynamic,M=!1,C=!1,v=S.start,R=n;var r="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"",i=/safari/.test(r)&&!/chrome/.test(r);N=i?.25:.02,t.on(d["default"].DATA_UPDATE_COMPLETED,de,this),t.on(d["default"].BYTES_APPENDED_END_FRAGMENT,Pe,this),t.on(d["default"].LOADING_PROGRESS,Oe,this),t.on(d["default"].BUFFER_LEVEL_STATE_CHANGED,Fe,this),t.on(d["default"].PERIOD_SWITCH_STARTED,F,this),t.on(d["default"].PLAYBACK_PROGRESS,Re,this),t.on(d["default"].PLAYBACK_TIME_UPDATED,Re,this),t.on(d["default"].PLAYBACK_ENDED,xe,this),I&&(I=!1,U())}function F(e){!w&&e.fromStreamInfo&&void 0!==E[e.fromStreamInfo.id]&&(delete T[e.fromStreamInfo.id],delete E[e.fromStreamInfo.id])}function k(){return parseFloat((B()-G()).toFixed(5))}function B(){var e=ae(!0),t=w&&S?e-S.start:0;return e+(S?S.duration-t:t)}function U(){S&&p&&p.getElement()?p.play():I=!0}function H(){return S&&p?p.isPaused():null}function j(){S&&p&&p.pause()}function K(){return S&&p?p.isSeeking():null}function V(e,n,i){S&&p&&(!0===i?e!==p.getTime()&&(p.removeEventListener("seeking",ye),r.info("Requesting seek to time: "+e),p.setCurrentTime(e,n)):(t.trigger(d["default"].PLAYBACK_SEEK_ASKED),r.info("Requesting seek to time: "+e),p.setCurrentTime(e,n)))}function q(){var e=a.getReadOnlyMetricsFor(o["default"].VIDEO)||a.getReadOnlyMetricsFor(o["default"].AUDIO),t=u.getCurrentDVRInfo(e),n=t?t.range:null;V(n.end-x.getLiveDelay(),!0,!1)}function G(){return S&&p?p.getTime():null}function Y(){var e=G();if(w&&!isNaN(D)){var t=D/1e3;e>t&&(e-=t)}return e}function z(){return S&&p?p.getPlaybackRate():null}function W(){return S&&p?p.getPlayedRanges():null}function X(){return S&&p?p.getEnded():null}function $(){return w}function Q(){return i}function J(e){v=e}function Z(){return v}function ee(e,t){var n=f.getMpd(c.getValue()),r=void 0,i=void 0,a=10;if(r=x.getUseSuggestedPresentationDelay()&&n.hasOwnProperty(o["default"].SUGGESTED_PRESENTATION_DELAY)?n.suggestedPresentationDelay:x.getLowLatencyEnabled()?0:x.getLiveDelay()?x.getLiveDelay():isNaN(e)?2*S.manifestInfo.minBufferTime:e*x.getLiveDelayFragmentCount(),n.availabilityStartTime&&(D=n.availabilityStartTime.getTime()),t>0){var s=Math.max(t-a,t/2);i=Math.min(r,s)}else i=r;return b=i,i}function te(){return b}function ne(){if(!w||isNaN(D))return NaN;var e=Y();if(isNaN(e)||0===e)return 0;var t=(new Date).getTime()+1e3*y.getClientTimeOffset();return Math.max(((t-D-1e3*e)/1e3).toFixed(3),0)}function re(){v=NaN,I=!1,E={},b=0,D=0,T={},p&&(t.off(d["default"].DATA_UPDATE_COMPLETED,de,this),t.off(d["default"].BUFFER_LEVEL_STATE_CHANGED,Fe,this),t.off(d["default"].BYTES_APPENDED_END_FRAGMENT,Pe,this),t.off(d["default"].LOADING_PROGRESS,Oe,this),t.off(d["default"].PERIOD_SWITCH_STARTED,F,this),t.off(d["default"].PLAYBACK_PROGRESS,Re,this),t.off(d["default"].PLAYBACK_TIME_UPDATED,Re,this),t.off(d["default"].PLAYBACK_ENDED,xe,this),le(),Ue()),_=null,p=null,S=null,w=null}function ie(e){e&&(e.streamController&&(i=e.streamController),e.metricsModel&&(a=e.metricsModel),e.dashMetrics&&(u=e.dashMetrics),e.manifestModel&&(c=e.manifestModel),e.dashManifestModel&&(f=e.dashManifestModel),e.mediaPlayerModel&&(x=e.mediaPlayerModel),e.adapter&&(h=e.adapter),e.videoModel&&(p=e.videoModel),e.timelineConverter&&(y=e.timelineConverter),e.uriFragmentModel&&(L=e.uriFragmentModel))}function oe(){var e=L.getURIFragmentData(),t=void 0;if(e){t={};var n=parseInt(e.r,10);n>=0&&S&&n<S.manifestInfo.DVRWindowSize&&null===e.t&&(e.t=Math.max(Math.floor(Date.now()/1e3)-S.manifestInfo.DVRWindowSize,S.manifestInfo.availableFrom.getTime()/1e3+S.start)+n),t.fragS=parseFloat(e.s),t.fragT=parseFloat(e.t)}return t}function ae(e,t){var n=void 0,r=NaN;if(e)r=S?S.start:r;else{var i=oe();r=i?isNaN(i.fragS)?i.fragT:i.fragS:0}if(w)!isNaN(r)&&S&&(n=r-S.manifestInfo.availableFrom.getTime()/1e3,(n>v||n<(isNaN(t)?NaN:t-S.manifestInfo.DVRWindowSize))&&(n=null)),n=n||v;else if(S)if(!isNaN(r)&&r<Math.max(S.manifestInfo.duration,S.duration)&&r>=0)n=r;else{var o=E[S.id];n=void 0!==o?Math.max(void 0!==o.audio?o.audio:0,void 0!==o.video?o.video:0,S.start):S.start}return n}function se(e){var t=a.getReadOnlyMetricsFor(o["default"].VIDEO)||a.getReadOnlyMetricsFor(o["default"].AUDIO),n=u.getCurrentDVRInfo(t),r=n?n.range:null,i=void 0;if(!r)return NaN;if(e>r.end)i=Math.max(r.end-2*S.manifestInfo.minBufferTime,r.start);else{if(!(e+.25<r.start))return e;i=r.start}return i}function ue(){if(null===_){var e=function(){Ae()};_=setInterval(e,x.getWallclockTimeUpdateInterval())}}function le(){clearInterval(_),_=null}function ce(){if(!H()&&w&&0!==p.getReadyState()){var e=Y(),t=se(e),n=!isNaN(t)&&t!==e;n&&V(t)}}function de(e){if(!e.error){var t=h.convertDataToRepresentationInfo(e.currentRepresentation),n=t.mediaInfo.streamInfo;S.id===n.id&&(S=n,ce())}}function fe(){t.trigger(d["default"].CAN_PLAY)}function he(){r.info("Native video element event: play"),ce(),ue(),t.trigger(d["default"].PLAYBACK_STARTED,{startTime:G()})}function pe(){r.info("Native video element event: waiting"),t.trigger(d["default"].PLAYBACK_WAITING,{playingTime:G()})}function me(){r.info("Native video element event: playing"),t.trigger(d["default"].PLAYBACK_PLAYING,{playingTime:G()})}function ge(){r.info("Native video element event: pause"),t.trigger(d["default"].PLAYBACK_PAUSED,{ended:X()})}function ye(){var e=G();r.info("Seeking to: "+e),ue(),t.trigger(d["default"].PLAYBACK_SEEKING,{seekTime:e})}function ve(){r.info("Native video element event: seeked"),t.trigger(d["default"].PLAYBACK_SEEKED),p.addEventListener("seeking",ye)}function _e(){S&&t.trigger(d["default"].PLAYBACK_TIME_UPDATED,{timeToEnd:k(),time:G()})}function Ee(){var e=Date.now();(!A||e>A+g)&&(A=e,_e())}function be(){t.trigger(d["default"].PLAYBACK_PROGRESS)}function Te(){var e=z();r.info("Native video element event: ratechange: ",e),t.trigger(d["default"].PLAYBACK_RATE_CHANGED,{playbackRate:e})}function Se(){r.info("Native video element event: loadedmetadata"),t.trigger(d["default"].PLAYBACK_METADATA_LOADED),ue()}function we(){r.info("Native video element event: ended"),j(),le(),t.trigger(d["default"].PLAYBACK_ENDED,{isLast:i.getActiveStreamInfo().isLast})}function xe(e){_&&e.isLast&&(r.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended"),p.setCurrentTime(B()),j(),le())}function Ie(e){var n=e.target||e.srcElement;t.trigger(d["default"].PLAYBACK_ERROR,{error:n.error})}function Ae(){t.trigger(d["default"].WALLCLOCK_TIME_UPDATED,{isDynamic:w,time:new Date}),$()&&H()&&Ee()}function De(e,t){if(t&&t.length>0)for(var n=0,r=t.length;n<r;n++)if(e>=t.start(n)&&e<t.end(n))return!0;return!1}function Re(){w&&x.getLowLatencyEnabled()&&x.getCatchUpPlaybackRate()>0&&!H()&&!K()&&(Ce()?Ne():Le())}function Me(){var e=null;return i.getActiveStreamProcessors().forEach((function(t){var n=t.getBufferLevel();e=null===e?n:Math.min(e,n)})),e}function Ce(){return x.getCatchUpPlaybackRate()>0&&G()>0&&Math.abs(ne()-x.getLiveDelay())>x.getLowLatencyMinDrift()}function Ne(){if(p){var e=x.getCatchUpPlaybackRate(),t=x.getLiveDelay(),n=ne()-t,i=5*n,o=2*e/(1+Math.pow(Math.E,-i)),a=1-e+o;if(C){var s=Me();s>t/2?C=!1:n>0&&(a=1)}Math.abs(p.getPlaybackRate()-a)>N&&p.setPlaybackRate(a),x.getLowLatencyMaxDriftBeforeSeeking()>0&&!M&&n>x.getLowLatencyMaxDriftBeforeSeeking()?(r.info("Low Latency catchup mechanism. Latency too high, doing a seek to live point"),M=!0,q()):M=!1}}function Le(){p&&p.setPlaybackRate(1)}function Pe(e){var t=void 0,n=void 0,r=e.bufferedRanges;if(r&&r.length&&(!E[S.id]||!0!==E[S.id].started)){var a=e.sender.getType();void 0===T[S.id]&&(T[S.id]=[]),T[S.id][a]=r,void 0===E[S.id]&&(E[S.id]=[],E[S.id].started=!1),void 0===E[S.id][a]&&(E[S.id][a]=Math.max(r.start(0),S.start));var s=i.isTrackTypePresent(o["default"].VIDEO),u=i.isTrackTypePresent(o["default"].AUDIO);n=ae(!1),u&&s?isNaN(E[S.id].audio)||isNaN(E[S.id].video)||(E[S.id].audio<E[S.id].video?(t=E[S.id].video>n?E[S.id].video:n,r=T[S.id].audio):(t=E[S.id].audio>n?E[S.id].audio:n,r=T[S.id].video),De(t,r)&&(K()||R||0===t||V(t,!0,!0),E[S.id].started=!0)):E[S.id][a]&&(t=E[S.id][a]>n?E[S.id][a]:n,K()||R||V(t,!1,!0),E[S.id].started=!0)}}function Oe(e){if(!1===e.stream&&x.getLowLatencyEnabled()&&!isNaN(e.request.duration)){var t=1.2*e.request.duration;t>x.getLiveDelay()&&(r.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",t.toFixed(2)),x.setLiveDelay(t))}}function Fe(e){e.streamInfo.id===S.id&&(x.getLowLatencyEnabled()?e.state!==s["default"].BUFFER_EMPTY||K()||C||(C=!0,Le()):p.setStallState(e.mediaType,e.state===s["default"].BUFFER_EMPTY))}function ke(e){t.trigger(d["default"].PLAYBACK_STALLED,{e:e})}function Be(){p.addEventListener("canplay",fe),p.addEventListener("play",he),p.addEventListener("waiting",pe),p.addEventListener("playing",me),p.addEventListener("pause",ge),p.addEventListener("error",Ie),p.addEventListener("seeking",ye),p.addEventListener("seeked",ve),p.addEventListener("timeupdate",_e),p.addEventListener("progress",be),p.addEventListener("ratechange",Te),p.addEventListener("loadedmetadata",Se),p.addEventListener("stalled",ke),p.addEventListener("ended",we)}function Ue(){p.removeEventListener("canplay",fe),p.removeEventListener("play",he),p.removeEventListener("waiting",pe),p.removeEventListener("playing",me),p.removeEventListener("pause",ge),p.removeEventListener("error",Ie),p.removeEventListener("seeking",ye),p.removeEventListener("seeked",ve),p.removeEventListener("timeupdate",_e),p.removeEventListener("progress",be),p.removeEventListener("ratechange",Te),p.removeEventListener("loadedmetadata",Se),p.removeEventListener("stalled",ke),p.removeEventListener("ended",we)}return n={initialize:O,setConfig:ie,getStartTimeFromUriParameters:oe,getStreamStartTime:ae,getTimeToStreamEnd:k,getTime:G,getNormalizedTime:Y,getPlaybackRate:z,getPlayedRanges:W,getEnded:X,getIsDynamic:$,getStreamController:Q,setLiveStartTime:J,getLiveStartTime:Z,computeLiveDelay:ee,getLiveDelay:te,getCurrentLiveLatency:ne,play:U,isPaused:H,pause:j,isSeeking:K,seek:V,reset:re},P(),n}y.__dashjs_factory_name="PlaybackController",t["default"]=h["default"].getSingletonFactory(y),e.exports=t["default"]},"1bc3":function(e,t,n){var r=n("f772");e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},"1c2c":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("589e"),s=r(a),u="WEBVTT";function l(){var e=this.context,t=void 0,n=void 0,r=void 0,i=void 0,o=void 0,a=void 0;function l(){n=(0,s["default"])(e).getInstance().getLogger(t),r=/(?:\r\n|\r|\n)/gm,i=/-->/,o=/(^[\s]+|[\s]+$)/g,a=/\s\b/g}function c(e){var t=[],a=void 0,s=void 0;if(!e)return t;e=e.split(r),a=e.length,s=-1;for(var l=0;l<a;l++){var c=e[l];if(c.length>0&&c!==u&&c.match(i)){var h=f(c),m=h.cuePoints,g=h.styles,y=p(e,l+1),v=d(m[0].replace(o,"")),_=d(m[1].replace(o,""));!isNaN(v)&&!isNaN(_)&&v>=s&&_>v?""!==y?(s=v,t.push({start:v,end:_,data:y,styles:g})):n.error("Skipping cue due to empty/malformed cue text"):n.error("Skipping cue due to incorrect cue timing")}}return t}function d(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2===n&&(e+=3600*parseInt(t[0],10)),e}function f(e){var t=e.split(i),n=t[1].split(a);return n.shift(),t[1]=n[0],n.shift(),{cuePoints:t,styles:h(n)}}function h(e){var t={};return e.forEach((function(e){if(e.split(/:/).length>1){var n=e.split(/:/)[1];n&&-1!=n.search(/%/)&&(n=parseInt(n.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(t.align=n),(e.match(/line/)||e.match(/L/))&&(t.line=n),(e.match(/position/)||e.match(/P/))&&(t.position=n),(e.match(/size/)||e.match(/S/))&&(t.size=n)}})),t}function p(e,t){var n=t,r="",o="",a=void 0;while(""!==e[n]&&n<e.length)n++;if(a=n-t,a>1)for(var s=0;s<a;s++){if(o=e[t+s],o.match(i)){r="";break}r+=o,s!==a-1&&(r+="\n")}else o=e[t],o.match(i)||(r=o);return r}return t={parse:c},l(),t}l.__dashjs_factory_name="VTTParser",t["default"]=o["default"].getSingletonFactory(l),e.exports=t["default"]},"1c67":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("8a43"),o=r(i),a=n("1d48"),s=r(a),u=n("467b"),l=r(u),c=n("589e"),d=r(c),f=n("e172"),h=r(f);function p(){var e=this.context,t=(0,o["default"])(e).getInstance(),n=void 0,r=void 0,i=void 0,a=void 0,u=void 0,l=void 0,c=void 0,f=void 0,p=void 0,m=void 0,g=void 0;function y(){r=(0,d["default"])(e).getInstance().getLogger(n)}function v(e){e&&(e.manifestModel&&(f=e.manifestModel),e.dashManifestModel&&(p=e.dashManifestModel),e.mediaPlayerModel&&(g=e.mediaPlayerModel),e.manifestLoader&&(c=e.manifestLoader),e.errHandler&&(m=e.errHandler))}function _(){b(),t.on(s["default"].STREAMS_COMPOSED,C,this),t.on(s["default"].PLAYBACK_STARTED,R,this),t.on(s["default"].PLAYBACK_PAUSED,M,this),t.on(s["default"].INTERNAL_MANIFEST_LOADED,D,this)}function E(e){I(e)}function b(){i=NaN,l=!1,u=!0,S()}function T(){t.off(s["default"].PLAYBACK_STARTED,R,this),t.off(s["default"].PLAYBACK_PAUSED,M,this),t.off(s["default"].STREAMS_COMPOSED,C,this),t.off(s["default"].INTERNAL_MANIFEST_LOADED,D,this),b()}function S(){null!==a&&(clearInterval(a),a=null)}function w(e){S(),isNaN(e)&&!isNaN(i)&&(e=1e3*i),isNaN(e)||(r.debug("Refresh manifest in "+e+" milliseconds."),a=setTimeout(A,e))}function x(){l=!0;var e=f.getValue(),t=e.url,n=p.getLocation(e);n&&(t=n),c.load(t)}function I(e){f.setValue(e);var n=new Date,o=(n.getTime()-e.loadedTime.getTime())/1e3;i=p.getManifestUpdatePeriod(e,o),1e3*i>2147483647&&(i=2147483.647),t.trigger(s["default"].MANIFEST_UPDATED,{manifest:e}),r.info("Manifest has been refreshed at "+n+"["+n.getTime()/1e3+"] "),u||w()}function A(){u&&!g.getScheduleWhilePaused()||(l?w(g.getManifestUpdateRetryInterval()):x())}function D(e){e.error?e.error.code===h["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&m.error(e.error):I(e.manifest)}function R(){u=!1,w()}function M(){u=!0,S()}function C(){l=!1}return n={initialize:_,setManifest:E,refreshManifest:x,setConfig:v,reset:T},y(),n}p.__dashjs_factory_name="ManifestUpdater",t["default"]=l["default"].getClassFactory(p),e.exports=t["default"]},"1d48":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("81a0"),u=i(s),l=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),t}(u["default"]),c=new l;t["default"]=c,e.exports=t["default"]},"1ec9":function(e,t,n){var r=n("f772"),i=n("e53d").document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},"1fa8":function(e,t,n){var r=n("cb7c");e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(a){var o=e["return"];throw void 0!==o&&r(o.call(e)),a}}},"1fb5":function(e,t,n){"use strict";t.byteLength=c,t.toByteArray=f,t.fromByteArray=m;for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function c(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r}function d(e,t,n){return 3*(t+n)/4-n}function f(e){var t,n,r=l(e),a=r[0],s=r[1],u=new o(d(e,a,s)),c=0,f=s>0?a-4:a;for(n=0;n<f;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[c++]=255&t),1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u}function h(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function p(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(h(r));return i.join("")}function m(e){for(var t,n=e.length,i=n%3,o=[],a=16383,s=0,u=n-i;s<u;s+=a)o.push(p(e,s,s+a>u?u:s+a));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},"214f":function(e,t,n){"use strict";n("b0c5");var r=n("2aba"),i=n("32e9"),o=n("79e5"),a=n("be13"),s=n("2b4c"),u=n("520a"),l=s("species"),c=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var f=s(e),h=!o((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),p=h?!o((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[l]=function(){return n}),n[f](""),!t})):void 0;if(!h||!p||"replace"===e&&!c||"split"===e&&!d){var m=/./[f],g=n(a,f,""[e],(function(e,t,n,r,i){return t.exec===u?h&&!i?{done:!0,value:m.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),y=g[0],v=g[1];r(String.prototype,e,y),i(RegExp.prototype,f,2==t?function(e,t){return v.call(e,this,t)}:function(e){return v.call(e,this)})}}},"230e":function(e,t,n){var r=n("d3f4"),i=n("7726").document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},"23c6":function(e,t,n){var r=n("2d95"),i=n("2b4c")("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},"241e":function(e,t,n){var r=n("25eb");e.exports=function(e){return Object(r(e))}},"243c":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n){r(this,e),this.keyID=t,this.key=n};t["default"]=i,e.exports=t["default"]},"248c":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("6a2d"),s=r(a),u=n("0757"),l=n("8a43"),c=r(l),d=n("1d48"),f=r(d),h=n("e172"),p=r(h),m=n("467b"),g=r(m),y=n("589e"),v=r(y),_=n("4e7a"),E=r(_),b=5e3;function T(){var e=this.context,t=(0,c["default"])(e).getInstance(),n=(0,E["default"])(e).getInstance(),r=void 0,i=void 0,a=void 0,l=void 0,d=void 0,h=void 0,m=void 0,g=void 0,y=void 0;function _(){i=(0,v["default"])(e).getInstance().getLogger(r)}function T(e,t){d=t,a=0,l=!1,h={"urn:mpeg:dash:utc:http-head:2014":F,"urn:mpeg:dash:utc:http-xsdate:2014":O.bind(null,M),"urn:mpeg:dash:utc:http-iso:2014":O.bind(null,C),"urn:mpeg:dash:utc:direct:2014":P,"urn:mpeg:dash:utc:http-head:2012":F,"urn:mpeg:dash:utc:http-xsdate:2012":O.bind(null,M),"urn:mpeg:dash:utc:http-iso:2012":O.bind(null,C),"urn:mpeg:dash:utc:direct:2012":P,"urn:mpeg:dash:utc:http-ntp:2014":L,"urn:mpeg:dash:utc:ntp:2014":L,"urn:mpeg:dash:utc:sntp:2014":L},I()||H(e)}function S(e){e&&(e.metricsModel&&(m=e.metricsModel),e.dashMetrics&&(g=e.dashMetrics),e.baseURLController&&(y=e.baseURLController))}function w(){return D()}function x(e){l=e}function I(){return l}function A(e){a=e}function D(){return a}function R(e){var t=60,n=60,r=1e3,i=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/,o=void 0,a=void 0,s=i.exec(e);return o=Date.UTC(parseInt(s[1],10),parseInt(s[2],10)-1,parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5],10),s[6]&&(parseInt(s[6],10)||0),s[7]&&parseFloat(s[7])*r||0),s[9]&&s[10]&&(a=parseInt(s[9],10)*n+parseInt(s[10],10),o+=("+"===s[8]?-1:1)*a*t*r),new Date(o).getTime()}function M(e){var t=Date.parse(e);return isNaN(t)&&(t=R(e)),t}function C(e){return Date.parse(e)}function N(e){return Date.parse(e)}function L(e,t,n){n()}function P(e,t,n){var r=M(e);isNaN(r)?n():t(r)}function O(e,t,r,i,o){var a=void 0,s=void 0,l=!1,c=new XMLHttpRequest,d=o?u.HTTPRequest.HEAD:u.HTTPRequest.GET,f=t.match(/\S+/g);if(t=f.shift(),a=function(){l||(l=!0,f.length?O(e,f.join(" "),r,i,o):i())},s=function(){var t=void 0,n=void 0;200===c.status&&(t=o?c.getResponseHeader("Date"):c.response,n=e(t),isNaN(n)||(r(n),l=!0))},n.isRelative(t)){var h=y.resolve();h&&(t=n.resolve(t,h.url))}c.open(d,t),c.timeout=b||0,c.onload=s,c.onloadend=a,c.send()}function F(e,t,n){O(N,e,t,n,!0)}function k(){var e=m.getReadOnlyMetricsFor(o["default"].STREAM),t=g.getLatestMPDRequestHeaderValueByID(e,"Date"),n=null!==t?new Date(t).getTime():Number.NaN;isNaN(n)?B(!0):(A(n-(new Date).getTime()),B(!1,n/1e3,a))}function B(e,n,r){x(!1),t.trigger(f["default"].TIME_SYNCHRONIZATION_COMPLETED,{time:n,offset:r,error:e?new s["default"](p["default"].TIME_SYNC_FAILED_ERROR_CODE,p["default"].TIME_SYNC_FAILED_ERROR_MESSAGE):null})}function U(e,t){return e-t}function H(e,t){var n=t||0,r=e[n],o=function(e,t){var n=!e||!t;n&&d?k():B(n,e,t)};x(!0),r?h.hasOwnProperty(r.schemeIdUri)?h[r.schemeIdUri](r.value,(function(e){var t=(new Date).getTime(),n=U(e,t);A(n),i.info("Local time: "+new Date(t)),i.info("Server time: "+new Date(e)),i.info("Server Time - Local Time (ms): "+n),o(e,n)}),(function(){H(e,n+1)})):H(e,n+1):(A(0),o())}function j(){x(!1)}return r={initialize:T,getOffsetToDeviceTimeMs:w,setConfig:S,reset:j},_(),r}T.__dashjs_factory_name="TimeSyncController";var S=g["default"].getSingletonFactory(T);S.HTTP_TIMEOUT_MS=b,g["default"].updateSingletonFactory(T.__dashjs_factory_name,S),t["default"]=S,e.exports=t["default"]},"24c5":function(e,t,n){"use strict";var r,i,o,a,s=n("b8e3"),u=n("e53d"),l=n("d864"),c=n("40c3"),d=n("63b6"),f=n("f772"),h=n("79aa"),p=n("1173"),m=n("a22a"),g=n("f201"),y=n("4178").set,v=n("aba2")(),_=n("656e"),E=n("4439"),b=n("bc13"),T=n("cd78"),S="Promise",w=u.TypeError,x=u.process,I=x&&x.versions,A=I&&I.v8||"",D=u[S],R="process"==c(x),M=function(){},C=i=_.f,N=!!function(){try{var e=D.resolve(1),t=(e.constructor={})[n("5168")("species")]=function(e){e(M,M)};return(R||"function"==typeof PromiseRejectionEvent)&&e.then(M)instanceof t&&0!==A.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(r){}}(),L=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},P=function(e,t){if(!e._n){e._n=!0;var n=e._c;v((function(){var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a,s=i?t.ok:t.fail,u=t.resolve,l=t.reject,c=t.domain;try{s?(i||(2==e._h&&k(e),e._h=1),!0===s?n=r:(c&&c.enter(),n=s(r),c&&(c.exit(),a=!0)),n===t.promise?l(w("Promise-chain cycle")):(o=L(n))?o.call(n,u,l):u(n)):l(r)}catch(d){c&&!a&&c.exit(),l(d)}};while(n.length>o)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&O(e)}))}},O=function(e){y.call(u,(function(){var t,n,r,i=e._v,o=F(e);if(o&&(t=E((function(){R?x.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=R||F(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},F=function(e){return 1!==e._h&&0===(e._a||e._c).length},k=function(e){y.call(u,(function(){var t;R?x.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})}))},B=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),P(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw w("Promise can't be resolved itself");(t=L(e))?v((function(){var r={_w:n,_d:!1};try{t.call(e,l(U,r,1),l(B,r,1))}catch(i){B.call(r,i)}})):(n._v=e,n._s=1,P(n,!1))}catch(r){B.call({_w:n,_d:!1},r)}}};N||(D=function(e){p(this,D,S,"_h"),h(e),r.call(this);try{e(l(U,this,1),l(B,this,1))}catch(t){B.call(this,t)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n("5c95")(D.prototype,{then:function(e,t){var n=C(g(this,D));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=R?x.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=l(U,e,1),this.reject=l(B,e,1)},_.f=C=function(e){return e===D||e===a?new o(e):i(e)}),d(d.G+d.W+d.F*!N,{Promise:D}),n("45f2")(D,S),n("4c95")(S),a=n("584a")[S],d(d.S+d.F*!N,S,{reject:function(e){var t=C(this),n=t.reject;return n(e),t.promise}}),d(d.S+d.F*(s||!N),S,{resolve:function(e){return T(s&&this===a?D:this,e)}}),d(d.S+d.F*!(N&&n("4ee1")((function(e){D.all(e)["catch"](M)}))),S,{all:function(e){var t=this,n=C(t),r=n.resolve,i=n.reject,o=E((function(){var n=[],o=0,a=1;m(e,!1,(function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then((function(e){u||(u=!0,n[s]=e,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=C(t),r=n.reject,i=E((function(){m(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},"25eb":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},2621:function(e,t){t.f=Object.getOwnPropertySymbols},"27bf":function(e,t,n){"use strict";e.exports=a;var r=n("b19a"),i=n("3a7c");function o(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);r.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"===typeof this._flush?this._flush((function(t,n){u(e,t,n)})):u(this,null,null)}function u(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=n("3fb5"),i.inherits(a,r),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},"27ee":function(e,t,n){var r=n("23c6"),i=n("2b4c")("iterator"),o=n("84f2");e.exports=n("8378").getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},2877:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){var u,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),a?(u=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=u):i&&(u=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(l.functional){l._injectStyles=u;var c=l.render;l.render=function(e,t){return u.call(t),c(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,u):[u]}return{exports:e,options:l}}n.d(t,"a",(function(){return r}))},"28a5":function(e,t,n){"use strict";var r=n("aae3"),i=n("cb7c"),o=n("ebd6"),a=n("0390"),s=n("9def"),u=n("5f1b"),l=n("520a"),c=n("79e5"),d=Math.min,f=[].push,h="split",p="length",m="lastIndex",g=4294967295,y=!c((function(){RegExp(g,"y")}));n("214f")("split",2,(function(e,t,n,c){var v;return v="c"=="abbc"[h](/(b)*/)[1]||4!="test"[h](/(?:)/,-1)[p]||2!="ab"[h](/(?:ab)*/)[p]||4!="."[h](/(.?)(.?)/)[p]||"."[h](/()()/)[p]>1||""[h](/.?/)[p]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(i,e,t);var o,a,s,u=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,h=void 0===t?g:t>>>0,y=new RegExp(e.source,c+"g");while(o=l.call(y,i)){if(a=y[m],a>d&&(u.push(i.slice(d,o.index)),o[p]>1&&o.index<i[p]&&f.apply(u,o.slice(1)),s=o[0][p],d=a,u[p]>=h))break;y[m]===o.index&&y[m]++}return d===i[p]?!s&&y.test("")||u.push(""):u.push(i.slice(d)),u[p]>h?u.slice(0,h):u}:"0"[h](void 0,0)[p]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var i=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,i,r):v.call(String(i),n,r)},function(e,t){var r=c(v,e,this,t,v!==n);if(r.done)return r.value;var l=i(e),f=String(this),h=o(l,RegExp),p=l.unicode,m=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(y?"y":"g"),_=new h(y?l:"^(?:"+l.source+")",m),E=void 0===t?g:t>>>0;if(0===E)return[];if(0===f.length)return null===u(_,f)?[f]:[];var b=0,T=0,S=[];while(T<f.length){_.lastIndex=y?T:0;var w,x=u(_,y?f:f.slice(T));if(null===x||(w=d(s(_.lastIndex+(y?0:T)),f.length))===b)T=a(f,T,p);else{if(S.push(f.slice(b,T)),S.length===E)return S;for(var I=1;I<=x.length-1;I++)if(S.push(x[I]),S.length===E)return S;T=b=w}}return S.push(f.slice(b)),S}]}))},"294c":function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"2aba":function(e,t,n){var r=n("7726"),i=n("32e9"),o=n("69a8"),a=n("ca5a")("src"),s=n("fa5b"),u="toString",l=(""+s).split(u);n("8378").inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(u&&(o(n,a)||i(n,a,e[t]?""+e[t]:l.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,u,(function(){return"function"==typeof this&&this[a]||s.call(this)}))},"2abb":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("243c"),o=r(i),a=n("5fa3"),s=r(a);function u(){var e=void 0;function t(e,t){var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t)));e+="/?";for(var r=0;r<n.kids.length;r++)e+=n.kids[r]+"&";return e=e.substring(0,e.length-1),e}function n(){return"GET"}function r(){return"json"}function i(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var r=e.keys[n],i=r.kid.replace(/=/g,""),a=r.k.replace(/=/g,"");t.push(new o["default"](i,a))}return new s["default"](t)}function a(e){return String.fromCharCode.apply(null,new Uint8Array(e))}return e={getServerURLFromMessage:t,getHTTPMethod:n,getResponseType:r,getLicenseMessage:i,getErrorResponse:a},e}u.__dashjs_factory_name="ClearKey",t["default"]=dashjs.FactoryMaker.getSingletonFactory(u),e.exports=t["default"]},"2aeb":function(e,t,n){var r=n("cb7c"),i=n("1495"),o=n("e11e"),a=n("613b")("IE_PROTO"),s=function(){},u="prototype",l=function(){var e,t=n("230e")("iframe"),r=o.length,i="<",a=">";t.style.display="none",n("fab2").appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+a+"document.F=Object"+i+"/script"+a),e.close(),l=e.F;while(r--)delete l[u][o[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[u]=r(e),n=new s,s[u]=null,n[a]=e):n=l(),void 0===t?n:i(n,t)}},"2b0e":function(e,t,n){"use strict";(function(e){
/*!
 * Vue.js v2.6.10
 * (c) 2014-2019 Evan You
 * Released under the MIT License.
 */
var n=Object.freeze({});function r(e){return void 0===e||null===e}function i(e){return void 0!==e&&null!==e}function o(e){return!0===e}function a(e){return!1===e}function s(e){return"string"===typeof e||"number"===typeof e||"symbol"===typeof e||"boolean"===typeof e}function u(e){return null!==e&&"object"===typeof e}var l=Object.prototype.toString;function c(e){return"[object Object]"===l.call(e)}function d(e){return"[object RegExp]"===l.call(e)}function f(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function h(e){return i(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function p(e){return null==e?"":Array.isArray(e)||c(e)&&e.toString===l?JSON.stringify(e,null,2):String(e)}function m(e){var t=parseFloat(e);return isNaN(t)?e:t}function g(e,t){for(var n=Object.create(null),r=e.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}g("slot,component",!0);var y=g("key,ref,slot,slot-scope,is");function v(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var _=Object.prototype.hasOwnProperty;function E(e,t){return _.call(e,t)}function b(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}var T=/-(\w)/g,S=b((function(e){return e.replace(T,(function(e,t){return t?t.toUpperCase():""}))})),w=b((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),x=/\B([A-Z])/g,I=b((function(e){return e.replace(x,"-$1").toLowerCase()}));function A(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function D(e,t){return e.bind(t)}var R=Function.prototype.bind?D:A;function M(e,t){t=t||0;var n=e.length-t,r=new Array(n);while(n--)r[n]=e[n+t];return r}function C(e,t){for(var n in t)e[n]=t[n];return e}function N(e){for(var t={},n=0;n<e.length;n++)e[n]&&C(t,e[n]);return t}function L(e,t,n){}var P=function(e,t,n){return!1},O=function(e){return e};function F(e,t){if(e===t)return!0;var n=u(e),r=u(t);if(!n||!r)return!n&&!r&&String(e)===String(t);try{var i=Array.isArray(e),o=Array.isArray(t);if(i&&o)return e.length===t.length&&e.every((function(e,n){return F(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(i||o)return!1;var a=Object.keys(e),s=Object.keys(t);return a.length===s.length&&a.every((function(n){return F(e[n],t[n])}))}catch(l){return!1}}function k(e,t){for(var n=0;n<e.length;n++)if(F(e[n],t))return n;return-1}function B(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var U="data-server-rendered",H=["component","directive","filter"],j=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],K={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:P,isReservedAttr:P,isUnknownElement:P,getTagNamespace:L,parsePlatformTagName:O,mustUseProp:P,async:!0,_lifecycleHooks:j},V=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function q(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function G(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var Y=new RegExp("[^"+V.source+".$_\\d]");function z(e){if(!Y.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}var W,X="__proto__"in{},$="undefined"!==typeof window,Q="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,J=Q&&WXEnvironment.platform.toLowerCase(),Z=$&&window.navigator.userAgent.toLowerCase(),ee=Z&&/msie|trident/.test(Z),te=Z&&Z.indexOf("msie 9.0")>0,ne=Z&&Z.indexOf("edge/")>0,re=(Z&&Z.indexOf("android"),Z&&/iphone|ipad|ipod|ios/.test(Z)||"ios"===J),ie=(Z&&/chrome\/\d+/.test(Z),Z&&/phantomjs/.test(Z),Z&&Z.match(/firefox\/(\d+)/)),oe={}.watch,ae=!1;if($)try{var se={};Object.defineProperty(se,"passive",{get:function(){ae=!0}}),window.addEventListener("test-passive",null,se)}catch(Sa){}var ue=function(){return void 0===W&&(W=!$&&!Q&&"undefined"!==typeof e&&(e["process"]&&"server"===e["process"].env.VUE_ENV)),W},le=$&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ce(e){return"function"===typeof e&&/native code/.test(e.toString())}var de,fe="undefined"!==typeof Symbol&&ce(Symbol)&&"undefined"!==typeof Reflect&&ce(Reflect.ownKeys);de="undefined"!==typeof Set&&ce(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var he=L,pe=0,me=function(){this.id=pe++,this.subs=[]};me.prototype.addSub=function(e){this.subs.push(e)},me.prototype.removeSub=function(e){v(this.subs,e)},me.prototype.depend=function(){me.target&&me.target.addDep(this)},me.prototype.notify=function(){var e=this.subs.slice();for(var t=0,n=e.length;t<n;t++)e[t].update()},me.target=null;var ge=[];function ye(e){ge.push(e),me.target=e}function ve(){ge.pop(),me.target=ge[ge.length-1]}var _e=function(e,t,n,r,i,o,a,s){this.tag=e,this.data=t,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},Ee={child:{configurable:!0}};Ee.child.get=function(){return this.componentInstance},Object.defineProperties(_e.prototype,Ee);var be=function(e){void 0===e&&(e="");var t=new _e;return t.text=e,t.isComment=!0,t};function Te(e){return new _e(void 0,void 0,void 0,String(e))}function Se(e){var t=new _e(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var we=Array.prototype,xe=Object.create(we),Ie=["push","pop","shift","unshift","splice","sort","reverse"];Ie.forEach((function(e){var t=we[e];G(xe,e,(function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];var i,o=t.apply(this,n),a=this.__ob__;switch(e){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2);break}return i&&a.observeArray(i),a.dep.notify(),o}))}));var Ae=Object.getOwnPropertyNames(xe),De=!0;function Re(e){De=e}var Me=function(e){this.value=e,this.dep=new me,this.vmCount=0,G(e,"__ob__",this),Array.isArray(e)?(X?Ce(e,xe):Ne(e,xe,Ae),this.observeArray(e)):this.walk(e)};function Ce(e,t){e.__proto__=t}function Ne(e,t,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];G(e,o,t[o])}}function Le(e,t){var n;if(u(e)&&!(e instanceof _e))return E(e,"__ob__")&&e.__ob__ instanceof Me?n=e.__ob__:De&&!ue()&&(Array.isArray(e)||c(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Me(e)),t&&n&&n.vmCount++,n}function Pe(e,t,n,r,i){var o=new me,a=Object.getOwnPropertyDescriptor(e,t);if(!a||!1!==a.configurable){var s=a&&a.get,u=a&&a.set;s&&!u||2!==arguments.length||(n=e[t]);var l=!i&&Le(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=s?s.call(e):n;return me.target&&(o.depend(),l&&(l.dep.depend(),Array.isArray(t)&&ke(t))),t},set:function(t){var r=s?s.call(e):n;t===r||t!==t&&r!==r||s&&!u||(u?u.call(e,t):n=t,l=!i&&Le(t),o.notify())}})}}function Oe(e,t,n){if(Array.isArray(e)&&f(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var r=e.__ob__;return e._isVue||r&&r.vmCount?n:r?(Pe(r.value,t,n),r.dep.notify(),n):(e[t]=n,n)}function Fe(e,t){if(Array.isArray(e)&&f(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||E(e,t)&&(delete e[t],n&&n.dep.notify())}}function ke(e){for(var t=void 0,n=0,r=e.length;n<r;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&ke(t)}Me.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)Pe(e,t[n])},Me.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Le(e[t])};var Be=K.optionMergeStrategies;function Ue(e,t){if(!t)return e;for(var n,r,i,o=fe?Reflect.ownKeys(t):Object.keys(t),a=0;a<o.length;a++)n=o[a],"__ob__"!==n&&(r=e[n],i=t[n],E(e,n)?r!==i&&c(r)&&c(i)&&Ue(r,i):Oe(e,n,i));return e}function He(e,t,n){return n?function(){var r="function"===typeof t?t.call(n,n):t,i="function"===typeof e?e.call(n,n):e;return r?Ue(r,i):i}:t?e?function(){return Ue("function"===typeof t?t.call(this,this):t,"function"===typeof e?e.call(this,this):e)}:t:e}function je(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?Ke(n):n}function Ke(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function Ve(e,t,n,r){var i=Object.create(e||null);return t?C(i,t):i}Be.data=function(e,t,n){return n?He(e,t,n):t&&"function"!==typeof t?e:He(e,t)},j.forEach((function(e){Be[e]=je})),H.forEach((function(e){Be[e+"s"]=Ve})),Be.watch=function(e,t,n,r){if(e===oe&&(e=void 0),t===oe&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var i={};for(var o in C(i,e),t){var a=i[o],s=t[o];a&&!Array.isArray(a)&&(a=[a]),i[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return i},Be.props=Be.methods=Be.inject=Be.computed=function(e,t,n,r){if(!e)return t;var i=Object.create(null);return C(i,e),t&&C(i,t),i},Be.provide=He;var qe=function(e,t){return void 0===t?e:t};function Ge(e,t){var n=e.props;if(n){var r,i,o,a={};if(Array.isArray(n)){r=n.length;while(r--)i=n[r],"string"===typeof i&&(o=S(i),a[o]={type:null})}else if(c(n))for(var s in n)i=n[s],o=S(s),a[o]=c(i)?i:{type:i};else 0;e.props=a}}function Ye(e,t){var n=e.inject;if(n){var r=e.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(c(n))for(var o in n){var a=n[o];r[o]=c(a)?C({from:o},a):{from:a}}else 0}}function ze(e){var t=e.directives;if(t)for(var n in t){var r=t[n];"function"===typeof r&&(t[n]={bind:r,update:r})}}function We(e,t,n){if("function"===typeof t&&(t=t.options),Ge(t,n),Ye(t,n),ze(t),!t._base&&(t.extends&&(e=We(e,t.extends,n)),t.mixins))for(var r=0,i=t.mixins.length;r<i;r++)e=We(e,t.mixins[r],n);var o,a={};for(o in e)s(o);for(o in t)E(e,o)||s(o);function s(r){var i=Be[r]||qe;a[r]=i(e[r],t[r],n,r)}return a}function Xe(e,t,n,r){if("string"===typeof n){var i=e[t];if(E(i,n))return i[n];var o=S(n);if(E(i,o))return i[o];var a=w(o);if(E(i,a))return i[a];var s=i[n]||i[o]||i[a];return s}}function $e(e,t,n,r){var i=t[e],o=!E(n,e),a=n[e],s=et(Boolean,i.type);if(s>-1)if(o&&!E(i,"default"))a=!1;else if(""===a||a===I(e)){var u=et(String,i.type);(u<0||s<u)&&(a=!0)}if(void 0===a){a=Qe(r,i,e);var l=De;Re(!0),Le(a),Re(l)}return a}function Qe(e,t,n){if(E(t,"default")){var r=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:"function"===typeof r&&"Function"!==Je(t.type)?r.call(e):r}}function Je(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function Ze(e,t){return Je(e)===Je(t)}function et(e,t){if(!Array.isArray(t))return Ze(t,e)?0:-1;for(var n=0,r=t.length;n<r;n++)if(Ze(t[n],e))return n;return-1}function tt(e,t,n){ye();try{if(t){var r=t;while(r=r.$parent){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{var a=!1===i[o].call(r,e,t,n);if(a)return}catch(Sa){rt(Sa,r,"errorCaptured hook")}}}rt(e,t,n)}finally{ve()}}function nt(e,t,n,r,i){var o;try{o=n?e.apply(t,n):e.call(t),o&&!o._isVue&&h(o)&&!o._handled&&(o.catch((function(e){return tt(e,r,i+" (Promise/async)")})),o._handled=!0)}catch(Sa){tt(Sa,r,i)}return o}function rt(e,t,n){if(K.errorHandler)try{return K.errorHandler.call(null,e,t,n)}catch(Sa){Sa!==e&&it(Sa,null,"config.errorHandler")}it(e,t,n)}function it(e,t,n){if(!$&&!Q||"undefined"===typeof console)throw e;console.error(e)}var ot,at=!1,st=[],ut=!1;function lt(){ut=!1;var e=st.slice(0);st.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!==typeof Promise&&ce(Promise)){var ct=Promise.resolve();ot=function(){ct.then(lt),re&&setTimeout(L)},at=!0}else if(ee||"undefined"===typeof MutationObserver||!ce(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())ot="undefined"!==typeof setImmediate&&ce(setImmediate)?function(){setImmediate(lt)}:function(){setTimeout(lt,0)};else{var dt=1,ft=new MutationObserver(lt),ht=document.createTextNode(String(dt));ft.observe(ht,{characterData:!0}),ot=function(){dt=(dt+1)%2,ht.data=String(dt)},at=!0}function pt(e,t){var n;if(st.push((function(){if(e)try{e.call(t)}catch(Sa){tt(Sa,t,"nextTick")}else n&&n(t)})),ut||(ut=!0,ot()),!e&&"undefined"!==typeof Promise)return new Promise((function(e){n=e}))}var mt=new de;function gt(e){yt(e,mt),mt.clear()}function yt(e,t){var n,r,i=Array.isArray(e);if(!(!i&&!u(e)||Object.isFrozen(e)||e instanceof _e)){if(e.__ob__){var o=e.__ob__.dep.id;if(t.has(o))return;t.add(o)}if(i){n=e.length;while(n--)yt(e[n],t)}else{r=Object.keys(e),n=r.length;while(n--)yt(e[r[n]],t)}}}var vt=b((function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var n="~"===e.charAt(0);e=n?e.slice(1):e;var r="!"===e.charAt(0);return e=r?e.slice(1):e,{name:e,once:n,capture:r,passive:t}}));function _t(e,t){function n(){var e=arguments,r=n.fns;if(!Array.isArray(r))return nt(r,null,arguments,t,"v-on handler");for(var i=r.slice(),o=0;o<i.length;o++)nt(i[o],null,e,t,"v-on handler")}return n.fns=e,n}function Et(e,t,n,i,a,s){var u,l,c,d;for(u in e)l=e[u],c=t[u],d=vt(u),r(l)||(r(c)?(r(l.fns)&&(l=e[u]=_t(l,s)),o(d.once)&&(l=e[u]=a(d.name,l,d.capture)),n(d.name,l,d.capture,d.passive,d.params)):l!==c&&(c.fns=l,e[u]=c));for(u in t)r(e[u])&&(d=vt(u),i(d.name,t[u],d.capture))}function bt(e,t,n){var a;e instanceof _e&&(e=e.data.hook||(e.data.hook={}));var s=e[t];function u(){n.apply(this,arguments),v(a.fns,u)}r(s)?a=_t([u]):i(s.fns)&&o(s.merged)?(a=s,a.fns.push(u)):a=_t([s,u]),a.merged=!0,e[t]=a}function Tt(e,t,n){var o=t.options.props;if(!r(o)){var a={},s=e.attrs,u=e.props;if(i(s)||i(u))for(var l in o){var c=I(l);St(a,u,l,c,!0)||St(a,s,l,c,!1)}return a}}function St(e,t,n,r,o){if(i(t)){if(E(t,n))return e[n]=t[n],o||delete t[n],!0;if(E(t,r))return e[n]=t[r],o||delete t[r],!0}return!1}function wt(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}function xt(e){return s(e)?[Te(e)]:Array.isArray(e)?At(e):void 0}function It(e){return i(e)&&i(e.text)&&a(e.isComment)}function At(e,t){var n,a,u,l,c=[];for(n=0;n<e.length;n++)a=e[n],r(a)||"boolean"===typeof a||(u=c.length-1,l=c[u],Array.isArray(a)?a.length>0&&(a=At(a,(t||"")+"_"+n),It(a[0])&&It(l)&&(c[u]=Te(l.text+a[0].text),a.shift()),c.push.apply(c,a)):s(a)?It(l)?c[u]=Te(l.text+a):""!==a&&c.push(Te(a)):It(a)&&It(l)?c[u]=Te(l.text+a.text):(o(e._isVList)&&i(a.tag)&&r(a.key)&&i(t)&&(a.key="__vlist"+t+"_"+n+"__"),c.push(a)));return c}function Dt(e){var t=e.$options.provide;t&&(e._provided="function"===typeof t?t.call(e):t)}function Rt(e){var t=Mt(e.$options.inject,e);t&&(Re(!1),Object.keys(t).forEach((function(n){Pe(e,n,t[n])})),Re(!0))}function Mt(e,t){if(e){for(var n=Object.create(null),r=fe?Reflect.ownKeys(e):Object.keys(e),i=0;i<r.length;i++){var o=r[i];if("__ob__"!==o){var a=e[o].from,s=t;while(s){if(s._provided&&E(s._provided,a)){n[o]=s._provided[a];break}s=s.$parent}if(!s)if("default"in e[o]){var u=e[o].default;n[o]="function"===typeof u?u.call(t):u}else 0}}return n}}function Ct(e,t){if(!e||!e.length)return{};for(var n={},r=0,i=e.length;r<i;r++){var o=e[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==t&&o.fnContext!==t||!a||null==a.slot)(n.default||(n.default=[])).push(o);else{var s=a.slot,u=n[s]||(n[s]=[]);"template"===o.tag?u.push.apply(u,o.children||[]):u.push(o)}}for(var l in n)n[l].every(Nt)&&delete n[l];return n}function Nt(e){return e.isComment&&!e.asyncFactory||" "===e.text}function Lt(e,t,r){var i,o=Object.keys(t).length>0,a=e?!!e.$stable:!o,s=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(a&&r&&r!==n&&s===r.$key&&!o&&!r.$hasNormal)return r;for(var u in i={},e)e[u]&&"$"!==u[0]&&(i[u]=Pt(t,u,e[u]))}else i={};for(var l in t)l in i||(i[l]=Ot(t,l));return e&&Object.isExtensible(e)&&(e._normalized=i),G(i,"$stable",a),G(i,"$key",s),G(i,"$hasNormal",o),i}function Pt(e,t,n){var r=function(){var e=arguments.length?n.apply(null,arguments):n({});return e=e&&"object"===typeof e&&!Array.isArray(e)?[e]:xt(e),e&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e};return n.proxy&&Object.defineProperty(e,t,{get:r,enumerable:!0,configurable:!0}),r}function Ot(e,t){return function(){return e[t]}}function Ft(e,t){var n,r,o,a,s;if(Array.isArray(e)||"string"===typeof e)for(n=new Array(e.length),r=0,o=e.length;r<o;r++)n[r]=t(e[r],r);else if("number"===typeof e)for(n=new Array(e),r=0;r<e;r++)n[r]=t(r+1,r);else if(u(e))if(fe&&e[Symbol.iterator]){n=[];var l=e[Symbol.iterator](),c=l.next();while(!c.done)n.push(t(c.value,n.length)),c=l.next()}else for(a=Object.keys(e),n=new Array(a.length),r=0,o=a.length;r<o;r++)s=a[r],n[r]=t(e[s],s,r);return i(n)||(n=[]),n._isVList=!0,n}function kt(e,t,n,r){var i,o=this.$scopedSlots[e];o?(n=n||{},r&&(n=C(C({},r),n)),i=o(n)||t):i=this.$slots[e]||t;var a=n&&n.slot;return a?this.$createElement("template",{slot:a},i):i}function Bt(e){return Xe(this.$options,"filters",e,!0)||O}function Ut(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function Ht(e,t,n,r,i){var o=K.keyCodes[t]||n;return i&&r&&!K.keyCodes[t]?Ut(i,r):o?Ut(o,e):r?I(r)!==t:void 0}function jt(e,t,n,r,i){if(n)if(u(n)){var o;Array.isArray(n)&&(n=N(n));var a=function(a){if("class"===a||"style"===a||y(a))o=e;else{var s=e.attrs&&e.attrs.type;o=r||K.mustUseProp(t,s,a)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var u=S(a),l=I(a);if(!(u in o)&&!(l in o)&&(o[a]=n[a],i)){var c=e.on||(e.on={});c["update:"+a]=function(e){n[a]=e}}};for(var s in n)a(s)}else;return e}function Kt(e,t){var n=this._staticTrees||(this._staticTrees=[]),r=n[e];return r&&!t||(r=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),qt(r,"__static__"+e,!1)),r}function Vt(e,t,n){return qt(e,"__once__"+t+(n?"_"+n:""),!0),e}function qt(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!==typeof e[r]&&Gt(e[r],t+"_"+r,n);else Gt(e,t,n)}function Gt(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function Yt(e,t){if(t)if(c(t)){var n=e.on=e.on?C({},e.on):{};for(var r in t){var i=n[r],o=t[r];n[r]=i?[].concat(i,o):o}}else;return e}function zt(e,t,n,r){t=t||{$stable:!n};for(var i=0;i<e.length;i++){var o=e[i];Array.isArray(o)?zt(o,t,n):o&&(o.proxy&&(o.fn.proxy=!0),t[o.key]=o.fn)}return r&&(t.$key=r),t}function Wt(e,t){for(var n=0;n<t.length;n+=2){var r=t[n];"string"===typeof r&&r&&(e[t[n]]=t[n+1])}return e}function Xt(e,t){return"string"===typeof e?t+e:e}function $t(e){e._o=Vt,e._n=m,e._s=p,e._l=Ft,e._t=kt,e._q=F,e._i=k,e._m=Kt,e._f=Bt,e._k=Ht,e._b=jt,e._v=Te,e._e=be,e._u=zt,e._g=Yt,e._d=Wt,e._p=Xt}function Qt(e,t,r,i,a){var s,u=this,l=a.options;E(i,"_uid")?(s=Object.create(i),s._original=i):(s=i,i=i._original);var c=o(l._compiled),d=!c;this.data=e,this.props=t,this.children=r,this.parent=i,this.listeners=e.on||n,this.injections=Mt(l.inject,i),this.slots=function(){return u.$slots||Lt(e.scopedSlots,u.$slots=Ct(r,i)),u.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Lt(e.scopedSlots,this.slots())}}),c&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=Lt(e.scopedSlots,this.$slots)),l._scopeId?this._c=function(e,t,n,r){var o=dn(s,e,t,n,r,d);return o&&!Array.isArray(o)&&(o.fnScopeId=l._scopeId,o.fnContext=i),o}:this._c=function(e,t,n,r){return dn(s,e,t,n,r,d)}}function Jt(e,t,r,o,a){var s=e.options,u={},l=s.props;if(i(l))for(var c in l)u[c]=$e(c,l,t||n);else i(r.attrs)&&en(u,r.attrs),i(r.props)&&en(u,r.props);var d=new Qt(r,u,a,o,e),f=s.render.call(null,d._c,d);if(f instanceof _e)return Zt(f,r,d.parent,s,d);if(Array.isArray(f)){for(var h=xt(f)||[],p=new Array(h.length),m=0;m<h.length;m++)p[m]=Zt(h[m],r,d.parent,s,d);return p}}function Zt(e,t,n,r,i){var o=Se(e);return o.fnContext=n,o.fnOptions=r,t.slot&&((o.data||(o.data={})).slot=t.slot),o}function en(e,t){for(var n in t)e[S(n)]=t[n]}$t(Qt.prototype);var tn={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;tn.prepatch(n,n)}else{var r=e.componentInstance=on(e,Mn);r.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions,r=t.componentInstance=e.componentInstance;On(r,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,Un(n,"mounted")),e.data.keepAlive&&(t._isMounted?Jn(n):kn(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Bn(t,!0):t.$destroy())}},nn=Object.keys(tn);function rn(e,t,n,a,s){if(!r(e)){var l=n.$options._base;if(u(e)&&(e=l.extend(e)),"function"===typeof e){var c;if(r(e.cid)&&(c=e,e=bn(c,l),void 0===e))return En(c,t,n,a,s);t=t||{},br(e),i(t.model)&&un(e.options,t);var d=Tt(t,e,s);if(o(e.options.functional))return Jt(e,d,t,n,a);var f=t.on;if(t.on=t.nativeOn,o(e.options.abstract)){var h=t.slot;t={},h&&(t.slot=h)}an(t);var p=e.options.name||s,m=new _e("vue-component-"+e.cid+(p?"-"+p:""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:d,listeners:f,tag:s,children:a},c);return m}}}function on(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},r=e.data.inlineTemplate;return i(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new e.componentOptions.Ctor(n)}function an(e){for(var t=e.hook||(e.hook={}),n=0;n<nn.length;n++){var r=nn[n],i=t[r],o=tn[r];i===o||i&&i._merged||(t[r]=i?sn(o,i):o)}}function sn(e,t){var n=function(n,r){e(n,r),t(n,r)};return n._merged=!0,n}function un(e,t){var n=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var o=t.on||(t.on={}),a=o[r],s=t.model.callback;i(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(o[r]=[s].concat(a)):o[r]=s}var ln=1,cn=2;function dn(e,t,n,r,i,a){return(Array.isArray(n)||s(n))&&(i=r,r=n,n=void 0),o(a)&&(i=cn),fn(e,t,n,r,i)}function fn(e,t,n,r,o){if(i(n)&&i(n.__ob__))return be();if(i(n)&&i(n.is)&&(t=n.is),!t)return be();var a,s,u;(Array.isArray(r)&&"function"===typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),o===cn?r=xt(r):o===ln&&(r=wt(r)),"string"===typeof t)?(s=e.$vnode&&e.$vnode.ns||K.getTagNamespace(t),a=K.isReservedTag(t)?new _e(K.parsePlatformTagName(t),n,r,void 0,void 0,e):n&&n.pre||!i(u=Xe(e.$options,"components",t))?new _e(t,n,r,void 0,void 0,e):rn(u,n,e,r,t)):a=rn(t,n,e,r);return Array.isArray(a)?a:i(a)?(i(s)&&hn(a,s),i(n)&&pn(n),a):be()}function hn(e,t,n){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,n=!0),i(e.children))for(var a=0,s=e.children.length;a<s;a++){var u=e.children[a];i(u.tag)&&(r(u.ns)||o(n)&&"svg"!==u.tag)&&hn(u,t,n)}}function pn(e){u(e.style)&&gt(e.style),u(e.class)&&gt(e.class)}function mn(e){e._vnode=null,e._staticTrees=null;var t=e.$options,r=e.$vnode=t._parentVnode,i=r&&r.context;e.$slots=Ct(t._renderChildren,i),e.$scopedSlots=n,e._c=function(t,n,r,i){return dn(e,t,n,r,i,!1)},e.$createElement=function(t,n,r,i){return dn(e,t,n,r,i,!0)};var o=r&&r.data;Pe(e,"$attrs",o&&o.attrs||n,null,!0),Pe(e,"$listeners",t._parentListeners||n,null,!0)}var gn,yn=null;function vn(e){$t(e.prototype),e.prototype.$nextTick=function(e){return pt(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,r=n.render,i=n._parentVnode;i&&(t.$scopedSlots=Lt(i.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=i;try{yn=t,e=r.call(t._renderProxy,t.$createElement)}catch(Sa){tt(Sa,t,"render"),e=t._vnode}finally{yn=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof _e||(e=be()),e.parent=i,e}}function _n(e,t){return(e.__esModule||fe&&"Module"===e[Symbol.toStringTag])&&(e=e.default),u(e)?t.extend(e):e}function En(e,t,n,r,i){var o=be();return o.asyncFactory=e,o.asyncMeta={data:t,context:n,children:r,tag:i},o}function bn(e,t){if(o(e.error)&&i(e.errorComp))return e.errorComp;if(i(e.resolved))return e.resolved;var n=yn;if(n&&i(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n),o(e.loading)&&i(e.loadingComp))return e.loadingComp;if(n&&!i(e.owners)){var a=e.owners=[n],s=!0,l=null,c=null;n.$on("hook:destroyed",(function(){return v(a,n)}));var d=function(e){for(var t=0,n=a.length;t<n;t++)a[t].$forceUpdate();e&&(a.length=0,null!==l&&(clearTimeout(l),l=null),null!==c&&(clearTimeout(c),c=null))},f=B((function(n){e.resolved=_n(n,t),s?a.length=0:d(!0)})),p=B((function(t){i(e.errorComp)&&(e.error=!0,d(!0))})),m=e(f,p);return u(m)&&(h(m)?r(e.resolved)&&m.then(f,p):h(m.component)&&(m.component.then(f,p),i(m.error)&&(e.errorComp=_n(m.error,t)),i(m.loading)&&(e.loadingComp=_n(m.loading,t),0===m.delay?e.loading=!0:l=setTimeout((function(){l=null,r(e.resolved)&&r(e.error)&&(e.loading=!0,d(!1))}),m.delay||200)),i(m.timeout)&&(c=setTimeout((function(){c=null,r(e.resolved)&&p(null)}),m.timeout)))),s=!1,e.loading?e.loadingComp:e.resolved}}function Tn(e){return e.isComment&&e.asyncFactory}function Sn(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(i(n)&&(i(n.componentOptions)||Tn(n)))return n}}function wn(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&Dn(e,t)}function xn(e,t){gn.$on(e,t)}function In(e,t){gn.$off(e,t)}function An(e,t){var n=gn;return function r(){var i=t.apply(null,arguments);null!==i&&n.$off(e,r)}}function Dn(e,t,n){gn=e,Et(t,n||{},xn,In,An,e),gn=void 0}function Rn(e){var t=/^hook:/;e.prototype.$on=function(e,n){var r=this;if(Array.isArray(e))for(var i=0,o=e.length;i<o;i++)r.$on(e[i],n);else(r._events[e]||(r._events[e]=[])).push(n),t.test(e)&&(r._hasHookEvent=!0);return r},e.prototype.$once=function(e,t){var n=this;function r(){n.$off(e,r),t.apply(n,arguments)}return r.fn=t,n.$on(e,r),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var r=0,i=e.length;r<i;r++)n.$off(e[r],t);return n}var o,a=n._events[e];if(!a)return n;if(!t)return n._events[e]=null,n;var s=a.length;while(s--)if(o=a[s],o===t||o.fn===t){a.splice(s,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?M(n):n;for(var r=M(arguments,1),i='event handler for "'+e+'"',o=0,a=n.length;o<a;o++)nt(n[o],t,r,t,i)}return t}}var Mn=null;function Cn(e){var t=Mn;return Mn=e,function(){Mn=t}}function Nn(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function Ln(e){e.prototype._update=function(e,t){var n=this,r=n.$el,i=n._vnode,o=Cn(n);n._vnode=e,n.$el=i?n.__patch__(i,e):n.__patch__(n.$el,e,t,!1),o(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Un(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||v(t.$children,e),e._watcher&&e._watcher.teardown();var n=e._watchers.length;while(n--)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Un(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function Pn(e,t,n){var r;return e.$el=t,e.$options.render||(e.$options.render=be),Un(e,"beforeMount"),r=function(){e._update(e._render(),n)},new nr(e,r,L,{before:function(){e._isMounted&&!e._isDestroyed&&Un(e,"beforeUpdate")}},!0),n=!1,null==e.$vnode&&(e._isMounted=!0,Un(e,"mounted")),e}function On(e,t,r,i,o){var a=i.data.scopedSlots,s=e.$scopedSlots,u=!!(a&&!a.$stable||s!==n&&!s.$stable||a&&e.$scopedSlots.$key!==a.$key),l=!!(o||e.$options._renderChildren||u);if(e.$options._parentVnode=i,e.$vnode=i,e._vnode&&(e._vnode.parent=i),e.$options._renderChildren=o,e.$attrs=i.data.attrs||n,e.$listeners=r||n,t&&e.$options.props){Re(!1);for(var c=e._props,d=e.$options._propKeys||[],f=0;f<d.length;f++){var h=d[f],p=e.$options.props;c[h]=$e(h,p,t,e)}Re(!0),e.$options.propsData=t}r=r||n;var m=e.$options._parentListeners;e.$options._parentListeners=r,Dn(e,r,m),l&&(e.$slots=Ct(o,i.context),e.$forceUpdate())}function Fn(e){while(e&&(e=e.$parent))if(e._inactive)return!0;return!1}function kn(e,t){if(t){if(e._directInactive=!1,Fn(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)kn(e.$children[n]);Un(e,"activated")}}function Bn(e,t){if((!t||(e._directInactive=!0,!Fn(e)))&&!e._inactive){e._inactive=!0;for(var n=0;n<e.$children.length;n++)Bn(e.$children[n]);Un(e,"deactivated")}}function Un(e,t){ye();var n=e.$options[t],r=t+" hook";if(n)for(var i=0,o=n.length;i<o;i++)nt(n[i],e,null,e,r);e._hasHookEvent&&e.$emit("hook:"+t),ve()}var Hn=[],jn=[],Kn={},Vn=!1,qn=!1,Gn=0;function Yn(){Gn=Hn.length=jn.length=0,Kn={},Vn=qn=!1}var zn=0,Wn=Date.now;if($&&!ee){var Xn=window.performance;Xn&&"function"===typeof Xn.now&&Wn()>document.createEvent("Event").timeStamp&&(Wn=function(){return Xn.now()})}function $n(){var e,t;for(zn=Wn(),qn=!0,Hn.sort((function(e,t){return e.id-t.id})),Gn=0;Gn<Hn.length;Gn++)e=Hn[Gn],e.before&&e.before(),t=e.id,Kn[t]=null,e.run();var n=jn.slice(),r=Hn.slice();Yn(),Zn(n),Qn(r),le&&K.devtools&&le.emit("flush")}function Qn(e){var t=e.length;while(t--){var n=e[t],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&Un(r,"updated")}}function Jn(e){e._inactive=!1,jn.push(e)}function Zn(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,kn(e[t],!0)}function er(e){var t=e.id;if(null==Kn[t]){if(Kn[t]=!0,qn){var n=Hn.length-1;while(n>Gn&&Hn[n].id>e.id)n--;Hn.splice(n+1,0,e)}else Hn.push(e);Vn||(Vn=!0,pt($n))}}var tr=0,nr=function(e,t,n,r,i){this.vm=e,i&&(e._watcher=this),e._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++tr,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new de,this.newDepIds=new de,this.expression="","function"===typeof t?this.getter=t:(this.getter=z(t),this.getter||(this.getter=L)),this.value=this.lazy?void 0:this.get()};nr.prototype.get=function(){var e;ye(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(Sa){if(!this.user)throw Sa;tt(Sa,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&gt(e),ve(),this.cleanupDeps()}return e},nr.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},nr.prototype.cleanupDeps=function(){var e=this.deps.length;while(e--){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},nr.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():er(this)},nr.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||u(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(Sa){tt(Sa,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},nr.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},nr.prototype.depend=function(){var e=this.deps.length;while(e--)this.deps[e].depend()},nr.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||v(this.vm._watchers,this);var e=this.deps.length;while(e--)this.deps[e].removeSub(this);this.active=!1}};var rr={enumerable:!0,configurable:!0,get:L,set:L};function ir(e,t,n){rr.get=function(){return this[t][n]},rr.set=function(e){this[t][n]=e},Object.defineProperty(e,n,rr)}function or(e){e._watchers=[];var t=e.$options;t.props&&ar(e,t.props),t.methods&&pr(e,t.methods),t.data?sr(e):Le(e._data={},!0),t.computed&&cr(e,t.computed),t.watch&&t.watch!==oe&&mr(e,t.watch)}function ar(e,t){var n=e.$options.propsData||{},r=e._props={},i=e.$options._propKeys=[],o=!e.$parent;o||Re(!1);var a=function(o){i.push(o);var a=$e(o,t,n,e);Pe(r,o,a),o in e||ir(e,"_props",o)};for(var s in t)a(s);Re(!0)}function sr(e){var t=e.$options.data;t=e._data="function"===typeof t?ur(t,e):t||{},c(t)||(t={});var n=Object.keys(t),r=e.$options.props,i=(e.$options.methods,n.length);while(i--){var o=n[i];0,r&&E(r,o)||q(o)||ir(e,"_data",o)}Le(t,!0)}function ur(e,t){ye();try{return e.call(t,t)}catch(Sa){return tt(Sa,t,"data()"),{}}finally{ve()}}var lr={lazy:!0};function cr(e,t){var n=e._computedWatchers=Object.create(null),r=ue();for(var i in t){var o=t[i],a="function"===typeof o?o:o.get;0,r||(n[i]=new nr(e,a||L,L,lr)),i in e||dr(e,i,o)}}function dr(e,t,n){var r=!ue();"function"===typeof n?(rr.get=r?fr(t):hr(n),rr.set=L):(rr.get=n.get?r&&!1!==n.cache?fr(t):hr(n.get):L,rr.set=n.set||L),Object.defineProperty(e,t,rr)}function fr(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),me.target&&t.depend(),t.value}}function hr(e){return function(){return e.call(this,this)}}function pr(e,t){e.$options.props;for(var n in t)e[n]="function"!==typeof t[n]?L:R(t[n],e)}function mr(e,t){for(var n in t){var r=t[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)gr(e,n,r[i]);else gr(e,n,r)}}function gr(e,t,n,r){return c(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=e[n]),e.$watch(t,n,r)}function yr(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Oe,e.prototype.$delete=Fe,e.prototype.$watch=function(e,t,n){var r=this;if(c(t))return gr(r,e,t,n);n=n||{},n.user=!0;var i=new nr(r,e,t,n);if(n.immediate)try{t.call(r,i.value)}catch(o){tt(o,r,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}}}var vr=0;function _r(e){e.prototype._init=function(e){var t=this;t._uid=vr++,t._isVue=!0,e&&e._isComponent?Er(t,e):t.$options=We(br(t.constructor),e||{},t),t._renderProxy=t,t._self=t,Nn(t),wn(t),mn(t),Un(t,"beforeCreate"),Rt(t),or(t),Dt(t),Un(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function Er(e,t){var n=e.$options=Object.create(e.constructor.options),r=t._parentVnode;n.parent=t.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function br(e){var t=e.options;if(e.super){var n=br(e.super),r=e.superOptions;if(n!==r){e.superOptions=n;var i=Tr(e);i&&C(e.extendOptions,i),t=e.options=We(n,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function Tr(e){var t,n=e.options,r=e.sealedOptions;for(var i in n)n[i]!==r[i]&&(t||(t={}),t[i]=n[i]);return t}function Sr(e){this._init(e)}function wr(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=M(arguments,1);return n.unshift(this),"function"===typeof e.install?e.install.apply(e,n):"function"===typeof e&&e.apply(null,n),t.push(e),this}}function xr(e){e.mixin=function(e){return this.options=We(this.options,e),this}}function Ir(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=n.cid,i=e._Ctor||(e._Ctor={});if(i[r])return i[r];var o=e.name||n.options.name;var a=function(e){this._init(e)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=t++,a.options=We(n.options,e),a["super"]=n,a.options.props&&Ar(a),a.options.computed&&Dr(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,H.forEach((function(e){a[e]=n[e]})),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=e,a.sealedOptions=C({},a.options),i[r]=a,a}}function Ar(e){var t=e.options.props;for(var n in t)ir(e.prototype,"_props",n)}function Dr(e){var t=e.options.computed;for(var n in t)dr(e.prototype,n,t[n])}function Rr(e){H.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&c(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"===typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}function Mr(e){return e&&(e.Ctor.options.name||e.tag)}function Cr(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"===typeof e?e.split(",").indexOf(t)>-1:!!d(e)&&e.test(t)}function Nr(e,t){var n=e.cache,r=e.keys,i=e._vnode;for(var o in n){var a=n[o];if(a){var s=Mr(a.componentOptions);s&&!t(s)&&Lr(n,o,r,i)}}}function Lr(e,t,n,r){var i=e[t];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),e[t]=null,v(n,t)}_r(Sr),yr(Sr),Rn(Sr),Ln(Sr),vn(Sr);var Pr=[String,RegExp,Array],Or={name:"keep-alive",abstract:!0,props:{include:Pr,exclude:Pr,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)Lr(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",(function(t){Nr(e,(function(e){return Cr(t,e)}))})),this.$watch("exclude",(function(t){Nr(e,(function(e){return!Cr(t,e)}))}))},render:function(){var e=this.$slots.default,t=Sn(e),n=t&&t.componentOptions;if(n){var r=Mr(n),i=this,o=i.include,a=i.exclude;if(o&&(!r||!Cr(o,r))||a&&r&&Cr(a,r))return t;var s=this,u=s.cache,l=s.keys,c=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;u[c]?(t.componentInstance=u[c].componentInstance,v(l,c),l.push(c)):(u[c]=t,l.push(c),this.max&&l.length>parseInt(this.max)&&Lr(u,l[0],l,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}},Fr={KeepAlive:Or};function kr(e){var t={get:function(){return K}};Object.defineProperty(e,"config",t),e.util={warn:he,extend:C,mergeOptions:We,defineReactive:Pe},e.set=Oe,e.delete=Fe,e.nextTick=pt,e.observable=function(e){return Le(e),e},e.options=Object.create(null),H.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,C(e.options.components,Fr),wr(e),xr(e),Ir(e),Rr(e)}kr(Sr),Object.defineProperty(Sr.prototype,"$isServer",{get:ue}),Object.defineProperty(Sr.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Sr,"FunctionalRenderContext",{value:Qt}),Sr.version="2.6.10";var Br=g("style,class"),Ur=g("input,textarea,option,select,progress"),Hr=function(e,t,n){return"value"===n&&Ur(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},jr=g("contenteditable,draggable,spellcheck"),Kr=g("events,caret,typing,plaintext-only"),Vr=function(e,t){return Wr(t)||"false"===t?"false":"contenteditable"===e&&Kr(t)?t:"true"},qr=g("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Gr="http://www.w3.org/1999/xlink",Yr=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},zr=function(e){return Yr(e)?e.slice(6,e.length):""},Wr=function(e){return null==e||!1===e};function Xr(e){var t=e.data,n=e,r=e;while(i(r.componentInstance))r=r.componentInstance._vnode,r&&r.data&&(t=$r(r.data,t));while(i(n=n.parent))n&&n.data&&(t=$r(t,n.data));return Qr(t.staticClass,t.class)}function $r(e,t){return{staticClass:Jr(e.staticClass,t.staticClass),class:i(e.class)?[e.class,t.class]:t.class}}function Qr(e,t){return i(e)||i(t)?Jr(e,Zr(t)):""}function Jr(e,t){return e?t?e+" "+t:e:t||""}function Zr(e){return Array.isArray(e)?ei(e):u(e)?ti(e):"string"===typeof e?e:""}function ei(e){for(var t,n="",r=0,o=e.length;r<o;r++)i(t=Zr(e[r]))&&""!==t&&(n&&(n+=" "),n+=t);return n}function ti(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}var ni={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},ri=g("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),ii=g("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),oi=function(e){return ri(e)||ii(e)};function ai(e){return ii(e)?"svg":"math"===e?"math":void 0}var si=Object.create(null);function ui(e){if(!$)return!0;if(oi(e))return!1;if(e=e.toLowerCase(),null!=si[e])return si[e];var t=document.createElement(e);return e.indexOf("-")>-1?si[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:si[e]=/HTMLUnknownElement/.test(t.toString())}var li=g("text,number,password,search,email,tel,url");function ci(e){if("string"===typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}function di(e,t){var n=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n}function fi(e,t){return document.createElementNS(ni[e],t)}function hi(e){return document.createTextNode(e)}function pi(e){return document.createComment(e)}function mi(e,t,n){e.insertBefore(t,n)}function gi(e,t){e.removeChild(t)}function yi(e,t){e.appendChild(t)}function vi(e){return e.parentNode}function _i(e){return e.nextSibling}function Ei(e){return e.tagName}function bi(e,t){e.textContent=t}function Ti(e,t){e.setAttribute(t,"")}var Si=Object.freeze({createElement:di,createElementNS:fi,createTextNode:hi,createComment:pi,insertBefore:mi,removeChild:gi,appendChild:yi,parentNode:vi,nextSibling:_i,tagName:Ei,setTextContent:bi,setStyleScope:Ti}),wi={create:function(e,t){xi(t)},update:function(e,t){e.data.ref!==t.data.ref&&(xi(e,!0),xi(t))},destroy:function(e){xi(e,!0)}};function xi(e,t){var n=e.data.ref;if(i(n)){var r=e.context,o=e.componentInstance||e.elm,a=r.$refs;t?Array.isArray(a[n])?v(a[n],o):a[n]===o&&(a[n]=void 0):e.data.refInFor?Array.isArray(a[n])?a[n].indexOf(o)<0&&a[n].push(o):a[n]=[o]:a[n]=o}}var Ii=new _e("",{},[]),Ai=["create","activate","update","remove","destroy"];function Di(e,t){return e.key===t.key&&(e.tag===t.tag&&e.isComment===t.isComment&&i(e.data)===i(t.data)&&Ri(e,t)||o(e.isAsyncPlaceholder)&&e.asyncFactory===t.asyncFactory&&r(t.asyncFactory.error))}function Ri(e,t){if("input"!==e.tag)return!0;var n,r=i(n=e.data)&&i(n=n.attrs)&&n.type,o=i(n=t.data)&&i(n=n.attrs)&&n.type;return r===o||li(r)&&li(o)}function Mi(e,t,n){var r,o,a={};for(r=t;r<=n;++r)o=e[r].key,i(o)&&(a[o]=r);return a}function Ci(e){var t,n,a={},u=e.modules,l=e.nodeOps;for(t=0;t<Ai.length;++t)for(a[Ai[t]]=[],n=0;n<u.length;++n)i(u[n][Ai[t]])&&a[Ai[t]].push(u[n][Ai[t]]);function c(e){return new _e(l.tagName(e).toLowerCase(),{},[],void 0,e)}function d(e,t){function n(){0===--n.listeners&&f(e)}return n.listeners=t,n}function f(e){var t=l.parentNode(e);i(t)&&l.removeChild(t,e)}function h(e,t,n,r,a,s,u){if(i(e.elm)&&i(s)&&(e=s[u]=Se(e)),e.isRootInsert=!a,!p(e,t,n,r)){var c=e.data,d=e.children,f=e.tag;i(f)?(e.elm=e.ns?l.createElementNS(e.ns,f):l.createElement(f,e),T(e),_(e,d,t),i(c)&&b(e,t),v(n,e.elm,r)):o(e.isComment)?(e.elm=l.createComment(e.text),v(n,e.elm,r)):(e.elm=l.createTextNode(e.text),v(n,e.elm,r))}}function p(e,t,n,r){var a=e.data;if(i(a)){var s=i(e.componentInstance)&&a.keepAlive;if(i(a=a.hook)&&i(a=a.init)&&a(e,!1),i(e.componentInstance))return m(e,t),v(n,e.elm,r),o(s)&&y(e,t,n,r),!0}}function m(e,t){i(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,E(e)?(b(e,t),T(e)):(xi(e),t.push(e))}function y(e,t,n,r){var o,s=e;while(s.componentInstance)if(s=s.componentInstance._vnode,i(o=s.data)&&i(o=o.transition)){for(o=0;o<a.activate.length;++o)a.activate[o](Ii,s);t.push(s);break}v(n,e.elm,r)}function v(e,t,n){i(e)&&(i(n)?l.parentNode(n)===e&&l.insertBefore(e,t,n):l.appendChild(e,t))}function _(e,t,n){if(Array.isArray(t)){0;for(var r=0;r<t.length;++r)h(t[r],n,e.elm,null,!0,t,r)}else s(e.text)&&l.appendChild(e.elm,l.createTextNode(String(e.text)))}function E(e){while(e.componentInstance)e=e.componentInstance._vnode;return i(e.tag)}function b(e,n){for(var r=0;r<a.create.length;++r)a.create[r](Ii,e);t=e.data.hook,i(t)&&(i(t.create)&&t.create(Ii,e),i(t.insert)&&n.push(e))}function T(e){var t;if(i(t=e.fnScopeId))l.setStyleScope(e.elm,t);else{var n=e;while(n)i(t=n.context)&&i(t=t.$options._scopeId)&&l.setStyleScope(e.elm,t),n=n.parent}i(t=Mn)&&t!==e.context&&t!==e.fnContext&&i(t=t.$options._scopeId)&&l.setStyleScope(e.elm,t)}function S(e,t,n,r,i,o){for(;r<=i;++r)h(n[r],o,e,t,!1,n,r)}function w(e){var t,n,r=e.data;if(i(r))for(i(t=r.hook)&&i(t=t.destroy)&&t(e),t=0;t<a.destroy.length;++t)a.destroy[t](e);if(i(t=e.children))for(n=0;n<e.children.length;++n)w(e.children[n])}function x(e,t,n,r){for(;n<=r;++n){var o=t[n];i(o)&&(i(o.tag)?(I(o),w(o)):f(o.elm))}}function I(e,t){if(i(t)||i(e.data)){var n,r=a.remove.length+1;for(i(t)?t.listeners+=r:t=d(e.elm,r),i(n=e.componentInstance)&&i(n=n._vnode)&&i(n.data)&&I(n,t),n=0;n<a.remove.length;++n)a.remove[n](e,t);i(n=e.data.hook)&&i(n=n.remove)?n(e,t):t()}else f(e.elm)}function A(e,t,n,o,a){var s,u,c,d,f=0,p=0,m=t.length-1,g=t[0],y=t[m],v=n.length-1,_=n[0],E=n[v],b=!a;while(f<=m&&p<=v)r(g)?g=t[++f]:r(y)?y=t[--m]:Di(g,_)?(R(g,_,o,n,p),g=t[++f],_=n[++p]):Di(y,E)?(R(y,E,o,n,v),y=t[--m],E=n[--v]):Di(g,E)?(R(g,E,o,n,v),b&&l.insertBefore(e,g.elm,l.nextSibling(y.elm)),g=t[++f],E=n[--v]):Di(y,_)?(R(y,_,o,n,p),b&&l.insertBefore(e,y.elm,g.elm),y=t[--m],_=n[++p]):(r(s)&&(s=Mi(t,f,m)),u=i(_.key)?s[_.key]:D(_,t,f,m),r(u)?h(_,o,e,g.elm,!1,n,p):(c=t[u],Di(c,_)?(R(c,_,o,n,p),t[u]=void 0,b&&l.insertBefore(e,c.elm,g.elm)):h(_,o,e,g.elm,!1,n,p)),_=n[++p]);f>m?(d=r(n[v+1])?null:n[v+1].elm,S(e,d,n,p,v,o)):p>v&&x(e,t,f,m)}function D(e,t,n,r){for(var o=n;o<r;o++){var a=t[o];if(i(a)&&Di(e,a))return o}}function R(e,t,n,s,u,c){if(e!==t){i(t.elm)&&i(s)&&(t=s[u]=Se(t));var d=t.elm=e.elm;if(o(e.isAsyncPlaceholder))i(t.asyncFactory.resolved)?N(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(o(t.isStatic)&&o(e.isStatic)&&t.key===e.key&&(o(t.isCloned)||o(t.isOnce)))t.componentInstance=e.componentInstance;else{var f,h=t.data;i(h)&&i(f=h.hook)&&i(f=f.prepatch)&&f(e,t);var p=e.children,m=t.children;if(i(h)&&E(t)){for(f=0;f<a.update.length;++f)a.update[f](e,t);i(f=h.hook)&&i(f=f.update)&&f(e,t)}r(t.text)?i(p)&&i(m)?p!==m&&A(d,p,m,n,c):i(m)?(i(e.text)&&l.setTextContent(d,""),S(d,null,m,0,m.length-1,n)):i(p)?x(d,p,0,p.length-1):i(e.text)&&l.setTextContent(d,""):e.text!==t.text&&l.setTextContent(d,t.text),i(h)&&i(f=h.hook)&&i(f=f.postpatch)&&f(e,t)}}}function M(e,t,n){if(o(n)&&i(e.parent))e.parent.data.pendingInsert=t;else for(var r=0;r<t.length;++r)t[r].data.hook.insert(t[r])}var C=g("attrs,class,staticClass,staticStyle,key");function N(e,t,n,r){var a,s=t.tag,u=t.data,l=t.children;if(r=r||u&&u.pre,t.elm=e,o(t.isComment)&&i(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(i(u)&&(i(a=u.hook)&&i(a=a.init)&&a(t,!0),i(a=t.componentInstance)))return m(t,n),!0;if(i(s)){if(i(l))if(e.hasChildNodes())if(i(a=u)&&i(a=a.domProps)&&i(a=a.innerHTML)){if(a!==e.innerHTML)return!1}else{for(var c=!0,d=e.firstChild,f=0;f<l.length;f++){if(!d||!N(d,l[f],n,r)){c=!1;break}d=d.nextSibling}if(!c||d)return!1}else _(t,l,n);if(i(u)){var h=!1;for(var p in u)if(!C(p)){h=!0,b(t,n);break}!h&&u["class"]&&gt(u["class"])}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,n,s){if(!r(t)){var u=!1,d=[];if(r(e))u=!0,h(t,d);else{var f=i(e.nodeType);if(!f&&Di(e,t))R(e,t,d,null,null,s);else{if(f){if(1===e.nodeType&&e.hasAttribute(U)&&(e.removeAttribute(U),n=!0),o(n)&&N(e,t,d))return M(t,d,!0),e;e=c(e)}var p=e.elm,m=l.parentNode(p);if(h(t,d,p._leaveCb?null:m,l.nextSibling(p)),i(t.parent)){var g=t.parent,y=E(t);while(g){for(var v=0;v<a.destroy.length;++v)a.destroy[v](g);if(g.elm=t.elm,y){for(var _=0;_<a.create.length;++_)a.create[_](Ii,g);var b=g.data.hook.insert;if(b.merged)for(var T=1;T<b.fns.length;T++)b.fns[T]()}else xi(g);g=g.parent}}i(m)?x(m,[e],0,0):i(e.tag)&&w(e)}}return M(t,d,u),t.elm}i(e)&&w(e)}}var Ni={create:Li,update:Li,destroy:function(e){Li(e,Ii)}};function Li(e,t){(e.data.directives||t.data.directives)&&Pi(e,t)}function Pi(e,t){var n,r,i,o=e===Ii,a=t===Ii,s=Fi(e.data.directives,e.context),u=Fi(t.data.directives,t.context),l=[],c=[];for(n in u)r=s[n],i=u[n],r?(i.oldValue=r.value,i.oldArg=r.arg,Bi(i,"update",t,e),i.def&&i.def.componentUpdated&&c.push(i)):(Bi(i,"bind",t,e),i.def&&i.def.inserted&&l.push(i));if(l.length){var d=function(){for(var n=0;n<l.length;n++)Bi(l[n],"inserted",t,e)};o?bt(t,"insert",d):d()}if(c.length&&bt(t,"postpatch",(function(){for(var n=0;n<c.length;n++)Bi(c[n],"componentUpdated",t,e)})),!o)for(n in s)u[n]||Bi(s[n],"unbind",e,e,a)}var Oi=Object.create(null);function Fi(e,t){var n,r,i=Object.create(null);if(!e)return i;for(n=0;n<e.length;n++)r=e[n],r.modifiers||(r.modifiers=Oi),i[ki(r)]=r,r.def=Xe(t.$options,"directives",r.name,!0);return i}function ki(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function Bi(e,t,n,r,i){var o=e.def&&e.def[t];if(o)try{o(n.elm,e,n,r,i)}catch(Sa){tt(Sa,n.context,"directive "+e.name+" "+t+" hook")}}var Ui=[wi,Ni];function Hi(e,t){var n=t.componentOptions;if((!i(n)||!1!==n.Ctor.options.inheritAttrs)&&(!r(e.data.attrs)||!r(t.data.attrs))){var o,a,s,u=t.elm,l=e.data.attrs||{},c=t.data.attrs||{};for(o in i(c.__ob__)&&(c=t.data.attrs=C({},c)),c)a=c[o],s=l[o],s!==a&&ji(u,o,a);for(o in(ee||ne)&&c.value!==l.value&&ji(u,"value",c.value),l)r(c[o])&&(Yr(o)?u.removeAttributeNS(Gr,zr(o)):jr(o)||u.removeAttribute(o))}}function ji(e,t,n){e.tagName.indexOf("-")>-1?Ki(e,t,n):qr(t)?Wr(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):jr(t)?e.setAttribute(t,Vr(t,n)):Yr(t)?Wr(n)?e.removeAttributeNS(Gr,zr(t)):e.setAttributeNS(Gr,t,n):Ki(e,t,n)}function Ki(e,t,n){if(Wr(n))e.removeAttribute(t);else{if(ee&&!te&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var r=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",r)};e.addEventListener("input",r),e.__ieph=!0}e.setAttribute(t,n)}}var Vi={create:Hi,update:Hi};function qi(e,t){var n=t.elm,o=t.data,a=e.data;if(!(r(o.staticClass)&&r(o.class)&&(r(a)||r(a.staticClass)&&r(a.class)))){var s=Xr(t),u=n._transitionClasses;i(u)&&(s=Jr(s,Zr(u))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var Gi,Yi={create:qi,update:qi},zi="__r",Wi="__c";function Xi(e){if(i(e[zi])){var t=ee?"change":"input";e[t]=[].concat(e[zi],e[t]||[]),delete e[zi]}i(e[Wi])&&(e.change=[].concat(e[Wi],e.change||[]),delete e[Wi])}function $i(e,t,n){var r=Gi;return function i(){var o=t.apply(null,arguments);null!==o&&Zi(e,i,n,r)}}var Qi=at&&!(ie&&Number(ie[1])<=53);function Ji(e,t,n,r){if(Qi){var i=zn,o=t;t=o._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=i||e.timeStamp<=0||e.target.ownerDocument!==document)return o.apply(this,arguments)}}Gi.addEventListener(e,t,ae?{capture:n,passive:r}:n)}function Zi(e,t,n,r){(r||Gi).removeEventListener(e,t._wrapper||t,n)}function eo(e,t){if(!r(e.data.on)||!r(t.data.on)){var n=t.data.on||{},i=e.data.on||{};Gi=t.elm,Xi(n),Et(n,i,Ji,Zi,$i,t.context),Gi=void 0}}var to,no={create:eo,update:eo};function ro(e,t){if(!r(e.data.domProps)||!r(t.data.domProps)){var n,o,a=t.elm,s=e.data.domProps||{},u=t.data.domProps||{};for(n in i(u.__ob__)&&(u=t.data.domProps=C({},u)),s)n in u||(a[n]="");for(n in u){if(o=u[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),o===s[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n&&"PROGRESS"!==a.tagName){a._value=o;var l=r(o)?"":String(o);io(a,l)&&(a.value=l)}else if("innerHTML"===n&&ii(a.tagName)&&r(a.innerHTML)){to=to||document.createElement("div"),to.innerHTML="<svg>"+o+"</svg>";var c=to.firstChild;while(a.firstChild)a.removeChild(a.firstChild);while(c.firstChild)a.appendChild(c.firstChild)}else if(o!==s[n])try{a[n]=o}catch(Sa){}}}}function io(e,t){return!e.composing&&("OPTION"===e.tagName||oo(e,t)||ao(e,t))}function oo(e,t){var n=!0;try{n=document.activeElement!==e}catch(Sa){}return n&&e.value!==t}function ao(e,t){var n=e.value,r=e._vModifiers;if(i(r)){if(r.number)return m(n)!==m(t);if(r.trim)return n.trim()!==t.trim()}return n!==t}var so={create:ro,update:ro},uo=b((function(e){var t={},n=/;(?![^(]*\))/g,r=/:(.+)/;return e.split(n).forEach((function(e){if(e){var n=e.split(r);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}));function lo(e){var t=co(e.style);return e.staticStyle?C(e.staticStyle,t):t}function co(e){return Array.isArray(e)?N(e):"string"===typeof e?uo(e):e}function fo(e,t){var n,r={};if(t){var i=e;while(i.componentInstance)i=i.componentInstance._vnode,i&&i.data&&(n=lo(i.data))&&C(r,n)}(n=lo(e.data))&&C(r,n);var o=e;while(o=o.parent)o.data&&(n=lo(o.data))&&C(r,n);return r}var ho,po=/^--/,mo=/\s*!important$/,go=function(e,t,n){if(po.test(t))e.style.setProperty(t,n);else if(mo.test(n))e.style.setProperty(I(t),n.replace(mo,""),"important");else{var r=vo(t);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)e.style[r]=n[i];else e.style[r]=n}},yo=["Webkit","Moz","ms"],vo=b((function(e){if(ho=ho||document.createElement("div").style,e=S(e),"filter"!==e&&e in ho)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<yo.length;n++){var r=yo[n]+t;if(r in ho)return r}}));function _o(e,t){var n=t.data,o=e.data;if(!(r(n.staticStyle)&&r(n.style)&&r(o.staticStyle)&&r(o.style))){var a,s,u=t.elm,l=o.staticStyle,c=o.normalizedStyle||o.style||{},d=l||c,f=co(t.data.style)||{};t.data.normalizedStyle=i(f.__ob__)?C({},f):f;var h=fo(t,!0);for(s in d)r(h[s])&&go(u,s,"");for(s in h)a=h[s],a!==d[s]&&go(u,s,null==a?"":a)}}var Eo={create:_o,update:_o},bo=/\s+/;function To(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(bo).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function So(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(bo).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{var n=" "+(e.getAttribute("class")||"")+" ",r=" "+t+" ";while(n.indexOf(r)>=0)n=n.replace(r," ");n=n.trim(),n?e.setAttribute("class",n):e.removeAttribute("class")}}function wo(e){if(e){if("object"===typeof e){var t={};return!1!==e.css&&C(t,xo(e.name||"v")),C(t,e),t}return"string"===typeof e?xo(e):void 0}}var xo=b((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),Io=$&&!te,Ao="transition",Do="animation",Ro="transition",Mo="transitionend",Co="animation",No="animationend";Io&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Ro="WebkitTransition",Mo="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Co="WebkitAnimation",No="webkitAnimationEnd"));var Lo=$?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Po(e){Lo((function(){Lo(e)}))}function Oo(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),To(e,t))}function Fo(e,t){e._transitionClasses&&v(e._transitionClasses,t),So(e,t)}function ko(e,t,n){var r=Uo(e,t),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var s=i===Ao?Mo:No,u=0,l=function(){e.removeEventListener(s,c),n()},c=function(t){t.target===e&&++u>=a&&l()};setTimeout((function(){u<a&&l()}),o+1),e.addEventListener(s,c)}var Bo=/\b(transform|all)(,|$)/;function Uo(e,t){var n,r=window.getComputedStyle(e),i=(r[Ro+"Delay"]||"").split(", "),o=(r[Ro+"Duration"]||"").split(", "),a=Ho(i,o),s=(r[Co+"Delay"]||"").split(", "),u=(r[Co+"Duration"]||"").split(", "),l=Ho(s,u),c=0,d=0;t===Ao?a>0&&(n=Ao,c=a,d=o.length):t===Do?l>0&&(n=Do,c=l,d=u.length):(c=Math.max(a,l),n=c>0?a>l?Ao:Do:null,d=n?n===Ao?o.length:u.length:0);var f=n===Ao&&Bo.test(r[Ro+"Property"]);return{type:n,timeout:c,propCount:d,hasTransform:f}}function Ho(e,t){while(e.length<t.length)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return jo(t)+jo(e[n])})))}function jo(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Ko(e,t){var n=e.elm;i(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=wo(e.data.transition);if(!r(o)&&!i(n._enterCb)&&1===n.nodeType){var a=o.css,s=o.type,l=o.enterClass,c=o.enterToClass,d=o.enterActiveClass,f=o.appearClass,h=o.appearToClass,p=o.appearActiveClass,g=o.beforeEnter,y=o.enter,v=o.afterEnter,_=o.enterCancelled,E=o.beforeAppear,b=o.appear,T=o.afterAppear,S=o.appearCancelled,w=o.duration,x=Mn,I=Mn.$vnode;while(I&&I.parent)x=I.context,I=I.parent;var A=!x._isMounted||!e.isRootInsert;if(!A||b||""===b){var D=A&&f?f:l,R=A&&p?p:d,M=A&&h?h:c,C=A&&E||g,N=A&&"function"===typeof b?b:y,L=A&&T||v,P=A&&S||_,O=m(u(w)?w.enter:w);0;var F=!1!==a&&!te,k=Go(N),U=n._enterCb=B((function(){F&&(Fo(n,M),Fo(n,R)),U.cancelled?(F&&Fo(n,D),P&&P(n)):L&&L(n),n._enterCb=null}));e.data.show||bt(e,"insert",(function(){var t=n.parentNode,r=t&&t._pending&&t._pending[e.key];r&&r.tag===e.tag&&r.elm._leaveCb&&r.elm._leaveCb(),N&&N(n,U)})),C&&C(n),F&&(Oo(n,D),Oo(n,R),Po((function(){Fo(n,D),U.cancelled||(Oo(n,M),k||(qo(O)?setTimeout(U,O):ko(n,s,U)))}))),e.data.show&&(t&&t(),N&&N(n,U)),F||k||U()}}}function Vo(e,t){var n=e.elm;i(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var o=wo(e.data.transition);if(r(o)||1!==n.nodeType)return t();if(!i(n._leaveCb)){var a=o.css,s=o.type,l=o.leaveClass,c=o.leaveToClass,d=o.leaveActiveClass,f=o.beforeLeave,h=o.leave,p=o.afterLeave,g=o.leaveCancelled,y=o.delayLeave,v=o.duration,_=!1!==a&&!te,E=Go(h),b=m(u(v)?v.leave:v);0;var T=n._leaveCb=B((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),_&&(Fo(n,c),Fo(n,d)),T.cancelled?(_&&Fo(n,l),g&&g(n)):(t(),p&&p(n)),n._leaveCb=null}));y?y(S):S()}function S(){T.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),f&&f(n),_&&(Oo(n,l),Oo(n,d),Po((function(){Fo(n,l),T.cancelled||(Oo(n,c),E||(qo(b)?setTimeout(T,b):ko(n,s,T)))}))),h&&h(n,T),_||E||T())}}function qo(e){return"number"===typeof e&&!isNaN(e)}function Go(e){if(r(e))return!1;var t=e.fns;return i(t)?Go(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function Yo(e,t){!0!==t.data.show&&Ko(t)}var zo=$?{create:Yo,activate:Yo,remove:function(e,t){!0!==e.data.show?Vo(e,t):t()}}:{},Wo=[Vi,Yi,no,so,Eo,zo],Xo=Wo.concat(Ui),$o=Ci({nodeOps:Si,modules:Xo});te&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&ia(e,"input")}));var Qo={inserted:function(e,t,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?bt(n,"postpatch",(function(){Qo.componentUpdated(e,t,n)})):Jo(e,t,n.context),e._vOptions=[].map.call(e.options,ta)):("textarea"===n.tag||li(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",na),e.addEventListener("compositionend",ra),e.addEventListener("change",ra),te&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Jo(e,t,n.context);var r=e._vOptions,i=e._vOptions=[].map.call(e.options,ta);if(i.some((function(e,t){return!F(e,r[t])}))){var o=e.multiple?t.value.some((function(e){return ea(e,i)})):t.value!==t.oldValue&&ea(t.value,i);o&&ia(e,"change")}}}};function Jo(e,t,n){Zo(e,t,n),(ee||ne)&&setTimeout((function(){Zo(e,t,n)}),0)}function Zo(e,t,n){var r=t.value,i=e.multiple;if(!i||Array.isArray(r)){for(var o,a,s=0,u=e.options.length;s<u;s++)if(a=e.options[s],i)o=k(r,ta(a))>-1,a.selected!==o&&(a.selected=o);else if(F(ta(a),r))return void(e.selectedIndex!==s&&(e.selectedIndex=s));i||(e.selectedIndex=-1)}}function ea(e,t){return t.every((function(t){return!F(t,e)}))}function ta(e){return"_value"in e?e._value:e.value}function na(e){e.target.composing=!0}function ra(e){e.target.composing&&(e.target.composing=!1,ia(e.target,"input"))}function ia(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function oa(e){return!e.componentInstance||e.data&&e.data.transition?e:oa(e.componentInstance._vnode)}var aa={bind:function(e,t,n){var r=t.value;n=oa(n);var i=n.data&&n.data.transition,o=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;r&&i?(n.data.show=!0,Ko(n,(function(){e.style.display=o}))):e.style.display=r?o:"none"},update:function(e,t,n){var r=t.value,i=t.oldValue;if(!r!==!i){n=oa(n);var o=n.data&&n.data.transition;o?(n.data.show=!0,r?Ko(n,(function(){e.style.display=e.__vOriginalDisplay})):Vo(n,(function(){e.style.display="none"}))):e.style.display=r?e.__vOriginalDisplay:"none"}},unbind:function(e,t,n,r,i){i||(e.style.display=e.__vOriginalDisplay)}},sa={model:Qo,show:aa},ua={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function la(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?la(Sn(t.children)):e}function ca(e){var t={},n=e.$options;for(var r in n.propsData)t[r]=e[r];var i=n._parentListeners;for(var o in i)t[S(o)]=i[o];return t}function da(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function fa(e){while(e=e.parent)if(e.data.transition)return!0}function ha(e,t){return t.key===e.key&&t.tag===e.tag}var pa=function(e){return e.tag||Tn(e)},ma=function(e){return"show"===e.name},ga={name:"transition",props:ua,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(pa),n.length)){0;var r=this.mode;0;var i=n[0];if(fa(this.$vnode))return i;var o=la(i);if(!o)return i;if(this._leaving)return da(e,i);var a="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?a+"comment":a+o.tag:s(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var u=(o.data||(o.data={})).transition=ca(this),l=this._vnode,c=la(l);if(o.data.directives&&o.data.directives.some(ma)&&(o.data.show=!0),c&&c.data&&!ha(o,c)&&!Tn(c)&&(!c.componentInstance||!c.componentInstance._vnode.isComment)){var d=c.data.transition=C({},u);if("out-in"===r)return this._leaving=!0,bt(d,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),da(e,i);if("in-out"===r){if(Tn(o))return l;var f,h=function(){f()};bt(u,"afterEnter",h),bt(u,"enterCancelled",h),bt(d,"delayLeave",(function(e){f=e}))}}return i}}},ya=C({tag:String,moveClass:String},ua);delete ya.mode;var va={props:ya,beforeMount:function(){var e=this,t=this._update;this._update=function(n,r){var i=Cn(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,i(),t.call(e,n,r)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=ca(this),s=0;s<i.length;s++){var u=i[s];if(u.tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))o.push(u),n[u.key]=u,(u.data||(u.data={})).transition=a;else;}if(r){for(var l=[],c=[],d=0;d<r.length;d++){var f=r[d];f.data.transition=a,f.data.pos=f.elm.getBoundingClientRect(),n[f.key]?l.push(f):c.push(f)}this.kept=e(t,null,l),this.removed=c}return e(t,null,o)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(_a),e.forEach(Ea),e.forEach(ba),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var n=e.elm,r=n.style;Oo(n,t),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(Mo,n._moveCb=function e(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(Mo,e),n._moveCb=null,Fo(n,t))})}})))},methods:{hasMove:function(e,t){if(!Io)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){So(n,e)})),To(n,t),n.style.display="none",this.$el.appendChild(n);var r=Uo(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function _a(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function Ea(e){e.data.newPos=e.elm.getBoundingClientRect()}function ba(e){var t=e.data.pos,n=e.data.newPos,r=t.left-n.left,i=t.top-n.top;if(r||i){e.data.moved=!0;var o=e.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}var Ta={Transition:ga,TransitionGroup:va};Sr.config.mustUseProp=Hr,Sr.config.isReservedTag=oi,Sr.config.isReservedAttr=Br,Sr.config.getTagNamespace=ai,Sr.config.isUnknownElement=ui,C(Sr.options.directives,sa),C(Sr.options.components,Ta),Sr.prototype.__patch__=$?$o:L,Sr.prototype.$mount=function(e,t){return e=e&&$?ci(e):void 0,Pn(this,e,t)},$&&setTimeout((function(){K.devtools&&le&&le.emit("init",Sr)}),0),t["a"]=Sr}).call(this,n("c8ba"))},"2b4c":function(e,t,n){var r=n("5537")("wks"),i=n("ca5a"),o=n("7726").Symbol,a="function"==typeof o,s=e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))};s.store=r},"2b8a":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("589e"),o=r(i),a=n("6a2d"),s=r(a),u=n("8a43"),l=r(u),c=n("1d48"),d=r(c),f=n("467b"),h=r(f),p=n("5571"),m=r(p),g=n("e172"),y=r(g),v=.1;function _(e,t,n,r){var i=this.context,a=(0,l["default"])(i).getInstance(),u=void 0,c=void 0,f=void 0,h=void 0,p=void 0,g=[],_=[],E=n;function b(){c=(0,o["default"])(i).getInstance().getLogger(u),h=!1;var n=t.codec;try{if(n.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new Error("not really supported");f=r||e.addSourceBuffer(n),f.changeType&&r&&(c.debug("Doing period transition with changeType"),f.changeType(n));var a=50;if("function"===typeof f.addEventListener)try{f.addEventListener("updateend",O,!1),f.addEventListener("error",F,!1),f.addEventListener("abort",F,!1)}catch(l){p=setInterval(P,a)}else p=setInterval(P,a)}catch(d){if(!t.isText&&-1===n.indexOf('codecs="stpp')&&-1===n.indexOf('codecs="wvtt'))throw d;var s=(0,m["default"])(i).getInstance();f=s.getTextSourceBuffer()}}function T(t){if(f){if("function"===typeof f.removeEventListener&&(f.removeEventListener("updateend",O,!1),f.removeEventListener("error",F,!1),f.removeEventListener("abort",F,!1)),clearInterval(p),!t){try{f.getClassName&&"TextSourceBuffer"===f.getClassName()||e.removeSourceBuffer(f)}catch(n){c.error("Failed to remove source buffer from media source.")}f=null}h=!1}_=[],E=null}function S(){return f}function w(){try{return f.buffered}catch(e){return c.error("getAllBufferRanges exception: "+e.message),null}}function x(e){try{var t=w();if(t&&t.length>1)for(var n=0,r=t.length;n<r;n++)if(n>0&&e<t.start(n)&&t.start(n)>t.end(n-1)+v)return!0}catch(i){c.error("hasDiscontinuities exception: "+i.message)}return!1}function I(e){e?(_.push(e),h||k(f,R.bind(this))):E({chunk:e,error:new s["default"](y["default"].APPEND_ERROR_CODE,y["default"].APPEND_ERROR_MESSAGE)})}function A(e){f.timestampOffset===e||isNaN(e)||k(f,(function(){f.timestampOffset=e}))}function D(t,n,r){var i=this;k(f,(function(){try{t>=0&&n>t&&(r||"ended"!==e.readyState)&&f.remove(t,n),k(f,(function(){a.trigger(d["default"].SOURCEBUFFER_REMOVE_COMPLETED,{buffer:i,from:t,to:n,unintended:!1})}))}catch(o){a.trigger(d["default"].SOURCEBUFFER_REMOVE_COMPLETED,{buffer:i,from:t,to:n,unintended:!1,error:new s["default"](o.code,o.message)})}}))}function R(){var e=this,t=this;_.length>0&&function(){h=!0;var n=_[0];_.splice(0,1);var r=[],i=function(){var e=w();M(t,r,e,n),_.length>0?R.call(this):(h=!1,E&&E({chunk:n}))};try{0===n.bytes.length?i.call(e):(r=w(),f.appendBuffer?f.appendBuffer(n.bytes):f.append(n.bytes,n),k(f,i.bind(e)))}catch(o){c.fatal('SourceBuffer append failed "'+o+'"'),_.length>0?R():h=!1,E&&E({chunk:n,error:new s["default"](o.code,o.message)})}}()}function M(e,t,n,r){t&&t.length>0&&t.length<n.length&&C(t,r)&&a.trigger(d["default"].SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:n.end(n.length-2),to:n.start(n.length-1),unintended:!0})}function C(e,t){for(var n=0;n<e.length;n++){var r=Math.round(e.start(n)),i=Math.round(e.end(n));if(i===t.start||r===t.end||t.start>=r&&t.end<=i)return!0}return!1}function N(){try{("open"===e.readyState||f.setTextTrack&&"ended"===e.readyState)&&f.abort()}catch(t){c.error('SourceBuffer append abort failed: "'+t+'"')}_=[]}function L(){if(g.length>0){var e=g.shift();f.updating?k(f,e):(e(),L())}}function P(){f.updating||L()}function O(){f.updating||L()}function F(){c.error("SourceBufferSink error",t.type)}function k(e,t){g.push(t),e.updating||L()}return u={getAllBufferRanges:w,getBuffer:S,append:I,remove:D,abort:N,reset:T,updateTimestampOffset:A,hasDiscontinuitiesAfter:x},b(),u}_.__dashjs_factory_name="SourceBufferSink";var E=h["default"].getClassFactory(_);t["default"]=E,e.exports=t["default"]},"2c63":function(e,t,n){e.exports=n("dc14")},"2cc9":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("e09e"),s=r(a),u=n("467b"),l=r(u),c=n("f01c"),d=r(c),f=n("4e7a"),h=r(f),p=n("5beb"),m=n("7914"),g=r(m),y=n("d25a"),v=r(y),_=n("120d"),E=r(_),b=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function T(e){var t=this.context,n=e.dashManifestModel,r=e.adapter,i=e.baseURLController,a=e.stream,u=e.timelineConverter,l=e.metricsModel,c=e.mediaPlayerModel,f=e.errHandler,m=(0,h["default"])(t).getInstance(),y=void 0,_=void 0,T=void 0,S=void 0,w=void 0,x=void 0;function I(){O(),S=(0,E["default"])(t).create({}),x=(0,v["default"])(t).getInstance(),w=(0,g["default"])(t).getInstance(),w.setConfig({baseURLController:i,metricsModel:l,mediaPlayerModel:c,errHandler:f}),D()}function A(e,t){var r=[],i=0,o=void 0,a=void 0,s=void 0,l=void 0;for(o=0,a=e.length;o<a;o++)s=e[o],l=(0,p.getTimeBasedSegment)(u,n.getIsDynamic(),t,s.startTime,s.duration,s.timescale,s.media,s.mediaRange,i),r.push(l),l=null,i++;return r}function D(){if(a&&n&&r){var e=a.getStreamInfo();if(e){var t=r.getMediaInfoForType(e,o["default"].IMAGE);if(t){var i=r.getDataForMedia(t);if(i){var u=n.getRepresentationsForAdaptation(i);u&&u.length>0&&u.forEach((function(e){e.segmentInfoType===s["default"].SEGMENT_TEMPLATE&&e.segmentDuration>0&&e.media&&R(e),e.segmentInfoType===s["default"].SEGMENT_BASE&&R(e,!0)})),_.length>0&&(_.sort((function(e,t){return e.bitrate-t.bitrate})),T=_.length-1)}}}}}function R(e,t){var n=new d["default"];n.id=e.id,n.bitrate=e.bandwidth,n.width=e.width,n.height=e.height,n.tilesHor=1,n.tilesVert=1,e.essentialProperties&&e.essentialProperties.forEach((function(e){if(b.indexOf(e.schemeIdUri)>=0&&e.value){var t=e.value.split("x");2!==t.length||isNaN(t[0])||isNaN(t[1])||(n.tilesHor=parseInt(t[0],10),n.tilesVert=parseInt(t[1],10))}})),t?w.loadSegments(e,o["default"].IMAGE,e.indexRange,{},(function(e,t){var r=[];e=A(e,t),n.segmentDuration=e[0].duration,n.readThumbnail=function(n,o){var a=null;r.some((function(e){if(e.start<=n&&e.end>n)return a=e.url,!0})),a?o(a):e.some((function(e){if(e.mediaStartTime<=n&&e.mediaStartTime+e.duration>n){var a=i.resolve(t.path);return S.load({method:"get",url:a.url,request:{range:e.mediaRange,responseType:"arraybuffer"},onload:function(t){var n=x.getSamplesInfo(t.target.response),i=new Blob([t.target.response.slice(n.sampleList[0].offset,n.sampleList[0].offset+n.sampleList[0].size)],{type:"image/jpeg"}),a=window.URL.createObjectURL(i);r.push({start:e.mediaStartTime,end:e.mediaStartTime+e.duration,url:a}),o&&o(a)}}),!0}}))}})):(n.startNumber=e.startNumber,n.segmentDuration=e.segmentDuration,n.timescale=e.timescale,n.templateUrl=M(e)),n.tilesHor>0&&n.tilesVert>0&&(n.widthPerTile=n.width/n.tilesHor,n.heightPerTile=n.height/n.tilesVert,_.push(n))}function M(e){var t=m.isRelative(e.media)?m.resolve(e.media,i.resolve(e.path).url):e.media;return t?(0,p.replaceIDForTemplate)(t,e.id):""}function C(){return _}function N(){return T}function L(){return T<0?null:_[T]}function P(e){_&&0!==_.length&&(e>=_.length&&(e=_.length-1),T=e)}function O(){_=[],T=-1}return y={initialize:I,getTracks:C,reset:O,setTrackByIndex:P,getCurrentTrack:L,getCurrentTrackIndex:N},I(),y}t.THUMBNAILS_SCHEME_ID_URIS=b,T.__dashjs_factory_name="ThumbnailTracks",t["default"]=l["default"].getClassFactory(T)},"2d00":function(e,t){e.exports=!1},"2d62":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("71a8");function s(){var e=[],t=0;function n(e,t){var n=0;for(n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length}function r(){this.customTimeRangeArray=[],this.length=0}function i(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length}function o(e,t){var n=this.customTimeRangeArray[e],r=this.customTimeRangeArray[t];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)}function s(e){return(0,a.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start}function u(e){return(0,a.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}return{customTimeRangeArray:e,length:t,add:n,clear:r,remove:i,mergeRanges:o,start:s,end:u}}s.__dashjs_factory_name="CustomTimeRanges",t["default"]=o["default"].getClassFactory(s),e.exports=t["default"]},"2d95":function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},"2e81":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("589e"),s=r(a),u=n("2f4d"),l=r(u),c=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],d="dashjs_?_bitrate",f="dashjs_?_settings",h="localStorage",p="sessionStorage",m="LastBitrate",g="LastMediaSettings";function y(e){e=e||{};var t=this.context,n=e.mediaPlayerModel,r=void 0,i=void 0,o=void 0;function a(){i=(0,s["default"])(t).getInstance().getLogger(r),y()}function u(e){if(void 0!==o)return o;o=!1;var t="1",n="1",r=void 0;try{"undefined"!==typeof window&&(r=window[e])}catch(a){return i.warn("DOMStorage access denied: "+a.message),o}if(!r||e!==h&&e!==p)return o;try{r.setItem(t,n),r.removeItem(t),o=!0}catch(a){i.warn("DOMStorage is supported, but cannot be used: "+a.message)}return o}function y(){u(h)&&c.forEach((function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(n){i.error(n.message)}}}))}function v(){var e=6e5;return Math.round((new Date).getTime()/e)*e}function _(e,t){return u(e)&&n["get"+t+"CachingInfo"]().enabled}function E(){if(!n||!n.hasOwnProperty("getLastMediaSettingsCachingInfo"))throw new Error(l["default"].MISSING_CONFIG_ERROR)}function b(e){if(E(),!_(h,g))return null;var t=null,r=f.replace(/\?/,e);try{var i=JSON.parse(localStorage.getItem(r))||{},o=(new Date).getTime()-parseInt(i.timestamp,10)>=n.getLastMediaSettingsCachingInfo().ttl||!1;t=i.settings,o&&(localStorage.removeItem(r),t=null)}catch(a){return null}return t}function T(e){var t=NaN;if(E(),_(h,m)){var r=d.replace(/\?/,e);try{var o=JSON.parse(localStorage.getItem(r))||{},a=(new Date).getTime()-parseInt(o.timestamp,10)>=n.getLastMediaSettingsCachingInfo().ttl||!1,s=parseFloat(o.bitrate);isNaN(s)||a?a&&localStorage.removeItem(r):(t=s,i.debug("Last saved bitrate for "+e+" was "+s))}catch(u){return null}}return t}function S(e,t){if(_(h,g)){var n=f.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({settings:t,timestamp:v()}))}catch(r){i.error(r.message)}}}function w(e,t){if(_(h,m)&&t){var n=d.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({bitrate:t.toFixed(3),timestamp:v()}))}catch(r){i.error(r.message)}}}return r={getSavedBitrateSettings:T,setSavedBitrateSettings:w,getSavedMediaSettings:b,setSavedMediaSettings:S},a(),r}y.__dashjs_factory_name="DOMStorage";var v=o["default"].getSingletonFactory(y);t["default"]=v,e.exports=t["default"]},"2f21":function(e,t,n){"use strict";var r=n("79e5");e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},"2f4d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){i(this,e),this.init()}return r(e,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.FRAGMENTED_TEXT="fragmentedText",this.EMBEDDED_TEXT="embeddedText",this.MUXED="muxed",this.IMAGE="image",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.UTF8="utf-8",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)"}}]),e}(),a=new o;t["default"]=a,e.exports=t["default"]},3024:function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},"30f1":function(e,t,n){"use strict";var r=n("b8e3"),i=n("63b6"),o=n("9138"),a=n("35e8"),s=n("481b"),u=n("8f60"),l=n("45f2"),c=n("53e2"),d=n("5168")("iterator"),f=!([].keys&&"next"in[].keys()),h="@@iterator",p="keys",m="values",g=function(){return this};e.exports=function(e,t,n,y,v,_,E){u(n,t,y);var b,T,S,w=function(e){if(!f&&e in D)return D[e];switch(e){case p:return function(){return new n(this,e)};case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",I=v==m,A=!1,D=e.prototype,R=D[d]||D[h]||v&&D[v],M=R||w(v),C=v?I?w("entries"):M:void 0,N="Array"==t&&D.entries||R;if(N&&(S=c(N.call(new e)),S!==Object.prototype&&S.next&&(l(S,x,!0),r||"function"==typeof S[d]||a(S,d,g))),I&&R&&R.name!==m&&(A=!0,M=function(){return R.call(this)}),r&&!E||!f&&!A&&D[d]||a(D,d,M),s[t]=M,s[x]=g,v)if(b={values:I?M:w(m),keys:_?M:w(p),entries:C},E)for(T in b)T in D||o(D,T,b[T]);else i(i.P+i.F*(f||A),t,b);return b}},3171:function(e,t,n){(function(e){(function(t){t.parser=function(e,t){return new o(e,t)},t.SAXParser=o,t.SAXStream=d,t.createStream=c,t.MAX_BUFFER_LENGTH=65536;var r,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function o(e,n){if(!(this instanceof o))return new o(e,n);var r=this;s(r),r.q=r.c="",r.bufferCheckPosition=t.MAX_BUFFER_LENGTH,r.opt=n||{},r.opt.lowercase=r.opt.lowercase||r.opt.lowercasetags,r.looseCase=r.opt.lowercase?"toLowerCase":"toUpperCase",r.tags=[],r.closed=r.closedRoot=r.sawRoot=!1,r.tag=r.error=null,r.strict=!!e,r.noscript=!(!e&&!r.opt.noscript),r.state=M.BEGIN,r.strictEntities=r.opt.strictEntities,r.ENTITIES=r.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),r.attribList=[],r.opt.xmlns&&(r.ns=Object.create(b)),r.trackPosition=!1!==r.opt.position,r.trackPosition&&(r.position=r.line=r.column=0),N(r,"onready")}function a(e){for(var n=Math.max(t.MAX_BUFFER_LENGTH,10),r=0,o=0,a=i.length;o<a;o++){var s=e[i[o]].length;if(s>n)switch(i[o]){case"textNode":P(e);break;case"cdata":L(e,"oncdata",e.cdata),e.cdata="";break;case"script":L(e,"onscript",e.script),e.script="";break;default:F(e,"Max buffer length exceeded: "+i[o])}r=Math.max(r,s)}var u=t.MAX_BUFFER_LENGTH-r;e.bufferCheckPosition=u+e.position}function s(e){for(var t=0,n=i.length;t<n;t++)e[i[t]]=""}function u(e){P(e),""!==e.cdata&&(L(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(L(e,"onscript",e.script),e.script="")}t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}t.prototype=e;var n=new t;return n}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),o.prototype={end:function(){k(this)},write:z,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){u(this)}};try{r=n("d485").Stream}catch(W){r=function(){}}var l=t.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function c(e,t){return new d(e,t)}function d(e,t){if(!(this instanceof d))return new d(e,t);r.apply(this),this._parser=new o(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,l.forEach((function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t,t;n.on(e,t)},enumerable:!0,configurable:!1})}))}d.prototype=Object.create(r.prototype,{constructor:{value:d}}),d.prototype.write=function(t){if("function"===typeof e&&"function"===typeof e.isBuffer&&e.isBuffer(t)){if(!this._decoder){var r=n("7d72").StringDecoder;this._decoder=new r("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},d.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},d.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===l.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),r.prototype.on.call(n,e,t)};var f="\r\n\t ",h="0124356789",p="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",m="'\"",g=f+">",y="[CDATA[",v="DOCTYPE",_="http://www.w3.org/XML/1998/namespace",E="http://www.w3.org/2000/xmlns/",b={xml:_,xmlns:E};f=I(f),h=I(h),p=I(p);var T=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,S=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,w=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function I(e){return e.split("").reduce((function(e,t){return e[t]=!0,e}),{})}function A(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function D(e,t){return A(e)?!!t.match(e):e[t]}function R(e,t){return!D(e,t)}m=I(m),g=I(g);var M=0;for(var C in t.STATE={BEGIN:M++,BEGIN_WHITESPACE:M++,TEXT:M++,TEXT_ENTITY:M++,OPEN_WAKA:M++,SGML_DECL:M++,SGML_DECL_QUOTED:M++,DOCTYPE:M++,DOCTYPE_QUOTED:M++,DOCTYPE_DTD:M++,DOCTYPE_DTD_QUOTED:M++,COMMENT_STARTING:M++,COMMENT:M++,COMMENT_ENDING:M++,COMMENT_ENDED:M++,CDATA:M++,CDATA_ENDING:M++,CDATA_ENDING_2:M++,PROC_INST:M++,PROC_INST_BODY:M++,PROC_INST_ENDING:M++,OPEN_TAG:M++,OPEN_TAG_SLASH:M++,ATTRIB:M++,ATTRIB_NAME:M++,ATTRIB_NAME_SAW_WHITE:M++,ATTRIB_VALUE:M++,ATTRIB_VALUE_QUOTED:M++,ATTRIB_VALUE_CLOSED:M++,ATTRIB_VALUE_UNQUOTED:M++,ATTRIB_VALUE_ENTITY_Q:M++,ATTRIB_VALUE_ENTITY_U:M++,CLOSE_TAG:M++,CLOSE_TAG_SAW_WHITE:M++,SCRIPT:M++,SCRIPT_ENDING:M++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach((function(e){var n=t.ENTITIES[e],r="number"===typeof n?String.fromCharCode(n):n;t.ENTITIES[e]=r})),t.STATE)t.STATE[t.STATE[C]]=C;function N(e,t,n){e[t]&&e[t](n)}function L(e,t,n){e.textNode&&P(e),N(e,t,n)}function P(e){e.textNode=O(e.opt,e.textNode),e.textNode&&N(e,"ontext",e.textNode),e.textNode=""}function O(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function F(e,t){return P(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,N(e,"onerror",t),e}function k(e){return e.sawRoot&&!e.closedRoot&&B(e,"Unclosed root tag"),e.state!==M.BEGIN&&e.state!==M.BEGIN_WHITESPACE&&e.state!==M.TEXT&&F(e,"Unexpected end"),P(e),e.c="",e.closed=!0,N(e,"onend"),o.call(e,e.strict,e.opt),e}function B(e,t){if("object"!==typeof e||!(e instanceof o))throw new Error("bad call to strictFail");e.strict&&F(e,t)}function U(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,L(e,"onopentagstart",n)}function H(e,t){var n=e.indexOf(":"),r=n<0?["",e]:e.split(":"),i=r[0],o=r[1];return t&&"xmlns"===e&&(i="xmlns",o=""),{prefix:i,local:o}}function j(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=H(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==_)B(e,"xml: prefix must be bound to "+_+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==E)B(e,"xmlns: prefix must be bound to "+E+"\nActual: "+e.attribValue);else{var i=e.tag,o=e.tags[e.tags.length-1]||e;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,L(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function K(e,t){if(e.opt.xmlns){var n=e.tag,r=H(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(B(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach((function(t){L(e,"onopennamespace",{prefix:t,uri:n.ns[t]})}));for(var o=0,a=e.attribList.length;o<a;o++){var s=e.attribList[o],u=s[0],l=s[1],c=H(u,!0),d=c.prefix,f=c.local,h=""===d?"":n.ns[d]||"",p={name:u,value:l,prefix:d,local:f,uri:h};d&&"xmlns"!==d&&!h&&(B(e,"Unbound namespace prefix: "+JSON.stringify(d)),p.uri=d),e.tag.attributes[u]=p,L(e,"onattribute",p)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),L(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=M.TEXT:e.state=M.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function V(e){if(!e.tagName)return B(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=M.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=M.SCRIPT);L(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());var r=n;while(t--){var i=e.tags[t];if(i.name===r)break;B(e,"Unexpected close tag")}if(t<0)return B(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=M.TEXT);e.tagName=n;var o=e.tags.length;while(o-- >t){var a=e.tag=e.tags.pop();e.tagName=e.tag.name,L(e,"onclosetag",e.tagName);var s={};for(var u in a.ns)s[u]=a.ns[u];var l=e.tags[e.tags.length-1]||e;e.opt.xmlns&&a.ns!==l.ns&&Object.keys(a.ns).forEach((function(t){var n=a.ns[t];L(e,"onclosenamespace",{prefix:t,uri:n})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=M.TEXT}function q(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:(n=r,"#"===n.charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),t=parseInt(n,16),i=t.toString(16)):(n=n.slice(1),t=parseInt(n,10),i=t.toString(10))),n=n.replace(/^0+/,""),i.toLowerCase()!==n?(B(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function G(e,t){"<"===t?(e.state=M.OPEN_WAKA,e.startTagPosition=e.position):R(f,t)&&(B(e,"Non-whitespace before first tag."),e.textNode=t,e.state=M.TEXT)}function Y(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}function z(e){var t=this;if(this.error)throw this.error;if(t.closed)return F(t,"Cannot write after close. Assign an onready handler.");if(null===e)return k(t);"object"===typeof e&&(e=e.toString());var n=0,r="";while(1){if(r=Y(e,n++),t.c=r,!r)break;switch(t.trackPosition&&(t.position++,"\n"===r?(t.line++,t.column=0):t.column++),t.state){case M.BEGIN:if(t.state=M.BEGIN_WHITESPACE,"\ufeff"===r)continue;G(t,r);continue;case M.BEGIN_WHITESPACE:G(t,r);continue;case M.TEXT:if(t.sawRoot&&!t.closedRoot){var i=n-1;while(r&&"<"!==r&&"&"!==r)r=Y(e,n++),r&&t.trackPosition&&(t.position++,"\n"===r?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(i,n-1)}"<"!==r||t.sawRoot&&t.closedRoot&&!t.strict?(!R(f,r)||t.sawRoot&&!t.closedRoot||B(t,"Text data outside of root node."),"&"===r?t.state=M.TEXT_ENTITY:t.textNode+=r):(t.state=M.OPEN_WAKA,t.startTagPosition=t.position);continue;case M.SCRIPT:"<"===r?t.state=M.SCRIPT_ENDING:t.script+=r;continue;case M.SCRIPT_ENDING:"/"===r?t.state=M.CLOSE_TAG:(t.script+="<"+r,t.state=M.SCRIPT);continue;case M.OPEN_WAKA:if("!"===r)t.state=M.SGML_DECL,t.sgmlDecl="";else if(D(f,r));else if(D(T,r))t.state=M.OPEN_TAG,t.tagName=r;else if("/"===r)t.state=M.CLOSE_TAG,t.tagName="";else if("?"===r)t.state=M.PROC_INST,t.procInstName=t.procInstBody="";else{if(B(t,"Unencoded <"),t.startTagPosition+1<t.position){var o=t.position-t.startTagPosition;r=new Array(o).join(" ")+r}t.textNode+="<"+r,t.state=M.TEXT}continue;case M.SGML_DECL:(t.sgmlDecl+r).toUpperCase()===y?(L(t,"onopencdata"),t.state=M.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+r==="--"?(t.state=M.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+r).toUpperCase()===v?(t.state=M.DOCTYPE,(t.doctype||t.sawRoot)&&B(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===r?(L(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=M.TEXT):D(m,r)?(t.state=M.SGML_DECL_QUOTED,t.sgmlDecl+=r):t.sgmlDecl+=r;continue;case M.SGML_DECL_QUOTED:r===t.q&&(t.state=M.SGML_DECL,t.q=""),t.sgmlDecl+=r;continue;case M.DOCTYPE:">"===r?(t.state=M.TEXT,L(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=r,"["===r?t.state=M.DOCTYPE_DTD:D(m,r)&&(t.state=M.DOCTYPE_QUOTED,t.q=r));continue;case M.DOCTYPE_QUOTED:t.doctype+=r,r===t.q&&(t.q="",t.state=M.DOCTYPE);continue;case M.DOCTYPE_DTD:t.doctype+=r,"]"===r?t.state=M.DOCTYPE:D(m,r)&&(t.state=M.DOCTYPE_DTD_QUOTED,t.q=r);continue;case M.DOCTYPE_DTD_QUOTED:t.doctype+=r,r===t.q&&(t.state=M.DOCTYPE_DTD,t.q="");continue;case M.COMMENT:"-"===r?t.state=M.COMMENT_ENDING:t.comment+=r;continue;case M.COMMENT_ENDING:"-"===r?(t.state=M.COMMENT_ENDED,t.comment=O(t.opt,t.comment),t.comment&&L(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+r,t.state=M.COMMENT);continue;case M.COMMENT_ENDED:">"!==r?(B(t,"Malformed comment"),t.comment+="--"+r,t.state=M.COMMENT):t.state=M.TEXT;continue;case M.CDATA:"]"===r?t.state=M.CDATA_ENDING:t.cdata+=r;continue;case M.CDATA_ENDING:"]"===r?t.state=M.CDATA_ENDING_2:(t.cdata+="]"+r,t.state=M.CDATA);continue;case M.CDATA_ENDING_2:">"===r?(t.cdata&&L(t,"oncdata",t.cdata),L(t,"onclosecdata"),t.cdata="",t.state=M.TEXT):"]"===r?t.cdata+="]":(t.cdata+="]]"+r,t.state=M.CDATA);continue;case M.PROC_INST:"?"===r?t.state=M.PROC_INST_ENDING:D(f,r)?t.state=M.PROC_INST_BODY:t.procInstName+=r;continue;case M.PROC_INST_BODY:if(!t.procInstBody&&D(f,r))continue;"?"===r?t.state=M.PROC_INST_ENDING:t.procInstBody+=r;continue;case M.PROC_INST_ENDING:">"===r?(L(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=M.TEXT):(t.procInstBody+="?"+r,t.state=M.PROC_INST_BODY);continue;case M.OPEN_TAG:D(S,r)?t.tagName+=r:(U(t),">"===r?K(t):"/"===r?t.state=M.OPEN_TAG_SLASH:(R(f,r)&&B(t,"Invalid character in tag name"),t.state=M.ATTRIB));continue;case M.OPEN_TAG_SLASH:">"===r?(K(t,!0),V(t)):(B(t,"Forward-slash in opening tag not followed by >"),t.state=M.ATTRIB);continue;case M.ATTRIB:if(D(f,r))continue;">"===r?K(t):"/"===r?t.state=M.OPEN_TAG_SLASH:D(T,r)?(t.attribName=r,t.attribValue="",t.state=M.ATTRIB_NAME):B(t,"Invalid attribute name");continue;case M.ATTRIB_NAME:"="===r?t.state=M.ATTRIB_VALUE:">"===r?(B(t,"Attribute without value"),t.attribValue=t.attribName,j(t),K(t)):D(f,r)?t.state=M.ATTRIB_NAME_SAW_WHITE:D(S,r)?t.attribName+=r:B(t,"Invalid attribute name");continue;case M.ATTRIB_NAME_SAW_WHITE:if("="===r)t.state=M.ATTRIB_VALUE;else{if(D(f,r))continue;B(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",L(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===r?K(t):D(T,r)?(t.attribName=r,t.state=M.ATTRIB_NAME):(B(t,"Invalid attribute name"),t.state=M.ATTRIB)}continue;case M.ATTRIB_VALUE:if(D(f,r))continue;D(m,r)?(t.q=r,t.state=M.ATTRIB_VALUE_QUOTED):(B(t,"Unquoted attribute value"),t.state=M.ATTRIB_VALUE_UNQUOTED,t.attribValue=r);continue;case M.ATTRIB_VALUE_QUOTED:if(r!==t.q){"&"===r?t.state=M.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=r;continue}j(t),t.q="",t.state=M.ATTRIB_VALUE_CLOSED;continue;case M.ATTRIB_VALUE_CLOSED:D(f,r)?t.state=M.ATTRIB:">"===r?K(t):"/"===r?t.state=M.OPEN_TAG_SLASH:D(T,r)?(B(t,"No whitespace between attributes"),t.attribName=r,t.attribValue="",t.state=M.ATTRIB_NAME):B(t,"Invalid attribute name");continue;case M.ATTRIB_VALUE_UNQUOTED:if(R(g,r)){"&"===r?t.state=M.ATTRIB_VALUE_ENTITY_U:t.attribValue+=r;continue}j(t),">"===r?K(t):t.state=M.ATTRIB;continue;case M.CLOSE_TAG:if(t.tagName)">"===r?V(t):D(S,r)?t.tagName+=r:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=M.SCRIPT):(R(f,r)&&B(t,"Invalid tagname in closing tag"),t.state=M.CLOSE_TAG_SAW_WHITE);else{if(D(f,r))continue;R(T,r)?t.script?(t.script+="</"+r,t.state=M.SCRIPT):B(t,"Invalid tagname in closing tag."):t.tagName=r}continue;case M.CLOSE_TAG_SAW_WHITE:if(D(f,r))continue;">"===r?V(t):B(t,"Invalid characters in closing tag");continue;case M.TEXT_ENTITY:case M.ATTRIB_VALUE_ENTITY_Q:case M.ATTRIB_VALUE_ENTITY_U:var s,u;switch(t.state){case M.TEXT_ENTITY:s=M.TEXT,u="textNode";break;case M.ATTRIB_VALUE_ENTITY_Q:s=M.ATTRIB_VALUE_QUOTED,u="attribValue";break;case M.ATTRIB_VALUE_ENTITY_U:s=M.ATTRIB_VALUE_UNQUOTED,u="attribValue";break}";"===r?(t[u]+=q(t),t.entity="",t.state=s):D(t.entity.length?x:w,r)?t.entity+=r:(B(t,"Invalid character in entity name"),t[u]+="&"+t.entity+r,t.entity="",t.state=s);continue;default:throw new Error(t,"Unknown state: "+t.state)}}return t.position>=t.bufferCheckPosition&&a(t),t}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */M=t.STATE,String.fromCodePoint||function(){var e=String.fromCharCode,t=Math.floor,n=function(){var n,r,i=16384,o=[],a=-1,s=arguments.length;if(!s)return"";var u="";while(++a<s){var l=Number(arguments[a]);if(!isFinite(l)||l<0||l>1114111||t(l)!==l)throw RangeError("Invalid code point: "+l);l<=65535?o.push(l):(l-=65536,n=55296+(l>>10),r=l%1024+56320,o.push(n,r)),(a+1===s||o.length>i)&&(u+=e.apply(null,o),o.length=0)}return u};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n}()})(t)}).call(this,n("b639").Buffer)},"31d1":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(e){e=e||{};var t=e.requestModifier,n=e.boxParser,r=void 0;function i(e){var r=new Date,i=e.request,s=new Headers;i.range&&s.append("Range","bytes="+i.range),i.requestStartDate||(i.requestStartDate=r),t&&t.modifyRequestHeader({setRequestHeader:function(e,t){s.append(e,t)}});var l=void 0;"function"===typeof window.AbortController&&(l=new AbortController,e.abortController=l);var c={method:e.method,headers:s,credentials:e.withCredentials?"include":void 0,signal:l?l.signal:void 0};fetch(e.url,c).then((function(t){e.response||(e.response={}),e.response.status=t.status,e.response.statusText=t.statusText,e.response.responseURL=t.url,t.ok||e.onerror();var r="",i=!0,s=!1,l=void 0;try{for(var c,d=t.headers.keys()[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var f=c.value;r+=f+": "+t.headers.get(f)+"\n"}}catch(E){s=!0,l=E}finally{try{!i&&d["return"]&&d["return"]()}finally{if(s)throw l}}if(e.response.responseHeaders=r,!t.body)return t.arrayBuffer().then((function(t){e.response.response=t;var n={loaded:t.byteLength,total:t.byteLength,stream:!1};e.progress(n),e.onload(),e.onend()}));var h=parseInt(t.headers.get("Content-Length"),10),p=0,m=!1,g=new Uint8Array,y=0;e.reader=t.body.getReader();var v=[],_=function t(r){var i=r.value,s=r.done;if(s)return g&&(e.progress({loaded:p,total:isNaN(h)?p:h,lengthComputable:!0,time:u(v,p),stream:!0}),e.response.response=g.buffer),e.onload(),void e.onend();if(i&&i.length>0){g=a(g,i),p+=i.length,v.push({ts:Date.now(),bytes:i.length});var l=n.findLastTopIsoBoxCompleted(["moov","mdat"],g,y);if(l.found){var c=l.lastCompletedOffset+l.size,d=void 0;c===g.length?(d=g,g=new Uint8Array):(d=new Uint8Array(g.subarray(0,c)),g=g.subarray(c)),e.progress({data:d.buffer,lengthComputable:!1,noTrace:!0}),y=0}else y=l.lastCompletedOffset,m||(e.progress({lengthComputable:!1,noTrace:!0}),m=!0)}o(e,t)};o(e,_)}))["catch"]((function(t){e.onerror&&e.onerror(t)}))}function o(e,t){e.reader.read().then(t)["catch"]((function(t){e.onerror&&200===e.response.status&&e.onerror(t)}))}function a(e,t){if(0===e.length)return t;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function s(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel()}catch(t){}}function u(e,t){if(e=e.filter((function(n){return n.bytes>t/4/e.length})),e.length>1){var n=function(){var t=0,n=(e[e.length-1].ts-e[0].ts)/e.length;return e.forEach((function(r,i){var o=e[i+1];if(o){var a=o.ts-r.ts;t+=a<n?a:0}})),{v:t}}();if("object"===typeof n)return n.v}return null}return r={load:i,abort:s,calculateDownloadedTime:u},r}a.__dashjs_factory_name="FetchLoader";var s=o["default"].getClassFactory(a);t["default"]=s,e.exports=t["default"]},"31f4":function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},3258:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("028f"),o=r(i),a=n("e217"),s=r(a),u=n("e8c0"),l=r(u),c=n("d0a4"),d=r(c),f=n("daa7"),h=r(f),p=n("f318"),m=r(p),g=n("4ac7"),y=r(g),v=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],_=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function E(){var e=void 0,t=this.context;function n(e){var n=null,i=(0,s["default"])(t).getInstance();i.setConfig({debug:e.debug,BASE64:e.BASE64}),i.initialize();var a=r(e);return!n&&a&&(n=(0,o["default"])(t).create({protectionModel:a,protectionKeyController:i,eventBus:e.eventBus,debug:e.debug,events:e.events,BASE64:e.BASE64,constants:e.constants}),e.capabilities.setEncryptedMediaSupported(!0)),n}function r(n){var r=n.debug,o=r.getLogger(e),a=n.eventBus,s=n.errHandler,u=n.videoModel?n.videoModel.getElement():null;return u&&void 0===u.onencrypted||u&&void 0===u.mediaKeys?i(u,_)?(o.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,m["default"])(t).create({debug:r,eventBus:a,events:n.events,api:i(u,_)})):i(u,v)?(o.info("EME detected on this user agent! (ProtectionModel_01b)"),(0,y["default"])(t).create({debug:r,eventBus:a,errHandler:s,events:n.events,api:i(u,v)})):(o.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(o.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,h["default"])(t).create({debug:r,eventBus:a,events:n.events}))}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("function"===typeof e[r[Object.keys(r)[0]]])return r}return null}return e={createProtectionSystem:n},e}E.__dashjs_factory_name="Protection";var b=dashjs.FactoryMaker.getClassFactory(E);b.events=l["default"],b.errors=d["default"],dashjs.FactoryMaker.updateClassFactory(E.__dashjs_factory_name,b),t["default"]=b,e.exports=t["default"]},"32da":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("8d11"),o=r(i);function a(e){e=e||{};var t=void 0,n=void 0,r=void 0,i=void 0,a=void 0,s=void 0,u=this.context,l=(0,o["default"])(u).getInstance(),c=[],d=e.metricsConstants;function f(){try{return Object.keys(c).map((function(e){return c[e]})).reduce((function(e,t){return e.level<t.level?e:t}))}catch(e){return}}function h(){var e=f();e&&s!==e.t&&(s=e.t,n.report(i,e))}function p(e,t,o){t&&(r=l.validateN(o),n=t,i=l.reconstructFullMetricName(e,o),a=setInterval(h,r))}function m(){clearInterval(a),a=null,r=0,n=null,s=null}function g(e,t,n){e===d.BUFFER_LEVEL&&(c[n]=t)}return t={initialize:p,reset:m,handleNewMetric:g},t}a.__dashjs_factory_name="BufferLevelHandler",t["default"]=dashjs.FactoryMaker.getClassFactory(a),e.exports=t["default"]},"32e9":function(e,t,n){var r=n("86cc"),i=n("4630");e.exports=n("9e1e")?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},"32fc":function(e,t,n){var r=n("e53d").document;e.exports=r&&r.documentElement},3337:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVersionString=i;var r="2.9.3";function i(){return r}},"335c":function(e,t,n){var r=n("6b4c");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},"33a4":function(e,t,n){var r=n("84f2"),i=n("2b4c")("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},"35b0":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(){var e=[],t=0,n=0;function r(r,i){var o=i&&i.droppedVideoFrames?i.droppedVideoFrames:0,a=i&&i.totalVideoFrames?i.totalVideoFrames:0,s=o-t;t=o;var u=a-n;n=a,isNaN(r)||(e[r]?(e[r].droppedVideoFrames+=s,e[r].totalVideoFrames+=u):e[r]={droppedVideoFrames:s,totalVideoFrames:u})}function i(){return e}function o(r){e=[],t=r.droppedVideoFrames,n=r.totalVideoFrames}return{push:r,getFrameHistory:i,reset:o}}a.__dashjs_factory_name="DroppedFramesHistory";var s=o["default"].getClassFactory(a);t["default"]=s,e.exports=t["default"]},"35e8":function(e,t,n){var r=n("d9f6"),i=n("aebd");e.exports=n("8e60")?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},"35f3":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("0757"),s=n("6531"),u=r(s),l=n("8e4c"),c=r(l),d=n("d0c6"),f=r(d),h=n("b4f1"),p=r(h),m=n("8a43"),g=r(m),y=n("1d48"),v=r(y),_=n("467b"),E=r(_),b=n("589e"),T=r(b);function S(e){e=e||{};var t=this.context,n=(0,g["default"])(t).getInstance(),r=e.errHandler,i=e.mediaPlayerModel,s=e.metricsModel,l=void 0,d=void 0,h=void 0;function m(){d=(0,T["default"])(t).getInstance().getLogger(l),E(),n.on(v["default"].FRAGMENT_LOADING_COMPLETED,w,l),n.on(v["default"].FRAGMENT_LOADING_PROGRESS,w,l)}function y(e){var n=h[e];return n||(n=(0,c["default"])(t).create({metricsModel:s,fragmentLoader:(0,f["default"])(t).create({metricsModel:s,mediaPlayerModel:i,errHandler:r,requestModifier:(0,p["default"])(t).getInstance()})}),h[e]=n),n}function _(e){return e&&e.type&&e.type===a.HTTPRequest.INIT_SEGMENT_TYPE}function E(){for(var e in h)h[e].reset();h={}}function b(){n.off(v["default"].FRAGMENT_LOADING_COMPLETED,w,this),n.off(v["default"].FRAGMENT_LOADING_PROGRESS,w,this),E()}function S(e,t,n,r){var i=new u["default"];return i.streamId=n,i.mediaInfo=t.mediaInfo,i.segmentType=t.type,i.start=t.startTime,i.duration=t.duration,i.end=i.start+i.duration,i.bytes=e,i.index=t.index,i.quality=t.quality,i.representationId=t.representationId,i.endFragment=r,i}function w(e){if(h[e.request.mediaType]===e.sender){var t=e.request,r=e.response,i=_(t),a=t.mediaInfo.streamInfo;if(e.error&&(e.request.mediaType!==o["default"].AUDIO&&e.request.mediaType!==o["default"].VIDEO&&e.request.mediaType!==o["default"].FRAGMENTED_TEXT||n.trigger(v["default"].SERVICE_LOCATION_BLACKLIST_ADD,{entry:e.request.serviceLocation})),r&&a){var s=S(r,t,a.id,e.type!==v["default"].FRAGMENT_LOADING_PROGRESS);n.trigger(i?v["default"].INIT_FRAGMENT_LOADED:v["default"].MEDIA_FRAGMENT_LOADED,{chunk:s,fragmentModel:e.sender})}else d.warn("No "+t.mediaType+" bytes to push or stream is inactive.")}}return l={getModel:y,isInitializationRequest:_,reset:b},m(),l}S.__dashjs_factory_name="FragmentController",t["default"]=E["default"].getClassFactory(S),e.exports=t["default"]},"36b1":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("086a"),o=r(i),a=n("2f4d"),s=r(a),u=n("47e4"),l=r(u),c=n("cbff"),d=r(c),f=n("8e4c"),h=r(f),p=n("8a43"),m=r(p),g=n("1d48"),y=r(g),v=n("467b"),_=r(v),E=n("1021"),b=r(E),T=n("9485"),S=r(T),w=n("931f"),x=r(w),I=n("35b0"),A=r(I),D=n("0f0c"),R=r(D),M=n("0757"),C=n("589e"),N=r(C),L=n("71a8"),P="abandonload",O="allowload",F=1e3,k=100,B=0;function U(){var e=this.context,t=(0,N["default"])(e).getInstance(),n=(0,m["default"])(e).getInstance(),r=void 0,i=void 0,a=void 0,u=void 0,c=void 0,f=void 0,p=void 0,g=void 0,v=void 0,_=void 0,E=void 0,T=void 0,w=void 0,I=void 0,D=void 0,C=void 0,U=void 0,H=void 0,j=void 0,K=void 0,V=void 0,q=void 0,G=void 0,Y=void 0,z=void 0,W=void 0,X=void 0,$=void 0,Q=void 0,J=void 0;function Z(){i=t.getLogger(r),re()}function ee(t,r){Y[t]=(0,x["default"])(e).create(),_[t]=r,E[t]=E[t]||{},E[t].state=O,X[t]=!1,n.on(y["default"].LOADING_PROGRESS,Qe,this),t==s["default"].VIDEO&&(n.on(y["default"].QUALITY_CHANGE_RENDERED,se,this),z=(0,A["default"])(e).create(),Xe()),n.on(y["default"].METRIC_ADDED,ue,this),n.on(y["default"].PERIOD_SWITCH_COMPLETED,ne,this),W=(0,R["default"])(e).create({mediaPlayerModel:V})}function te(e){delete _[e]}function ne(){a=(0,o["default"])(e).create({metricsModel:$,dashMetrics:Q,mediaPlayerModel:V,adapter:j}),a.initialize()}function re(){c={video:!0,audio:!0},f={},p={},g={},v={},E={},_={},Y={},X={},w=!1,J=!0,I=!1,void 0===D&&(D=!1),G=void 0,z=void 0,W=void 0,clearTimeout(T),T=null}function ie(){re(),n.off(y["default"].LOADING_PROGRESS,Qe,this),n.off(y["default"].QUALITY_CHANGE_RENDERED,se,this),n.off(y["default"].METRIC_ADDED,ue,this),n.off(y["default"].PERIOD_SWITCH_COMPLETED,ne,this),a&&a.reset()}function oe(e){e&&(e.streamController&&(u=e.streamController),e.domStorage&&(q=e.domStorage),e.mediaPlayerModel&&(V=e.mediaPlayerModel),e.metricsModel&&($=e.metricsModel),e.dashMetrics&&(Q=e.dashMetrics),e.adapter&&(j=e.adapter),e.manifestModel&&(H=e.manifestModel),e.videoModel&&(K=e.videoModel))}function ae(){if(!q||!q.hasOwnProperty("getSavedBitrateSettings"))throw new Error(s["default"].MISSING_CONFIG_ERROR)}function se(e){e.mediaType===s["default"].VIDEO&&(G=e.oldQuality,z.push(G,K.getPlaybackQuality()))}function ue(e){e.metric!==l["default"].HTTP_REQUEST||!e.value||e.value.type!==M.HTTPRequest.MEDIA_SEGMENT_TYPE||e.mediaType!==s["default"].AUDIO&&e.mediaType!==s["default"].VIDEO||W.push(e.mediaType,e.value,J),e.metric!==l["default"].BUFFER_LEVEL||e.mediaType!==s["default"].AUDIO&&e.mediaType!==s["default"].VIDEO||Be(e.mediaType,.001*e.value.level)}function le(e,t){var n=void 0;return f[t]=f[t]||{},f[t].hasOwnProperty(e)||(f[t][e]=0),n=Ye(f[t][e],e),n=ze(n,e,f[t][e]),n=$e(n,e),n}function ce(e){if(e&&_&&_[e]){var t=_[e].getStreamInfo();if(t&&t.id){var n=le(e,t.id),r=ke(_[e].getMediaInfo());return r[n]?r[n]:null}}return null}function de(e){ae();var t=q.getSavedBitrateSettings(e);if(!g.hasOwnProperty(e))if(v.hasOwnProperty(e)){var n=H.getValue(),r=j.getAdaptationForType(n,0,e).Representation;if(Array.isArray(r)){var i=Math.max(Math.round(r.length*v[e])-1,0);g[e]=r[i].bandwidth}else g[e]=0}else isNaN(t)?g[e]=e===s["default"].VIDEO?F:k:g[e]=t;return g[e]}function fe(e,t){(0,L.checkIsVideoOrAudioType)(e),(0,L.checkParameterType)(t,"number"),g[e]=t}function he(e){return v.hasOwnProperty(e)?v[e]:null}function pe(e,t){v[e]=t}function me(e){return g.hasOwnProperty("max")&&g.max.hasOwnProperty(e)?g.max[e]:NaN}function ge(e){return g.hasOwnProperty("min")&&g.min.hasOwnProperty(e)?g.min[e]:NaN}function ye(e,t){(0,L.checkParameterType)(t,"number"),(0,L.checkIsVideoOrAudioType)(e),g.max=g.max||{},g.max[e]=t}function ve(e,t){(0,L.checkParameterType)(t,"number"),(0,L.checkIsVideoOrAudioType)(e),g.min=g.min||{},g.min[e]=t}function _e(e){var t=me(e);return t?Fe(_[e].getMediaInfo(),t):void 0}function Ee(e){var t=ge(e);if(t){var n=_[e].getMediaInfo(),r=ke(n),i=Fe(n,t);return r[i]&&i<r.length-1&&r[i].bitrate<1e3*t&&i++,i}}function be(e){return v.hasOwnProperty("max")&&v.max.hasOwnProperty(e)?v.max[e]:1}function Te(e,t){v.max=v.max||{},v.max[e]=t}function Se(e){return c[e]}function we(e,t){(0,L.checkParameterType)(t,"boolean"),(0,L.checkIsVideoOrAudioType)(e),c[e]=t}function xe(){return w}function Ie(e){(0,L.checkParameterType)(e,"boolean"),w=e}function Ae(){return I}function De(e){(0,L.checkParameterType)(e,"boolean"),I=e}function Re(){return J}function Me(e){(0,L.checkParameterType)(e,"boolean"),J=e}function Ce(n){if(n&&_&&_[n]){var o=_[n].getStreamInfo(),s=o?o.id:null,u=Ve(n),l=(0,b["default"])(e).create({abrController:r,streamProcessor:_[n],currentValue:u,switchHistory:Y[n],droppedFramesHistory:z,useBufferOccupancyABR:Ue(n)});if(z){var c=K.getPlaybackQuality();c&&z.push(G,c)}if(Se(n)){var d=Ee(n),f=le(n,s),h=a.getMaxQuality(l),p=h.quality;if(void 0!==d&&p<d&&(p=d),p>f&&(p=f),Y[n].push({oldValue:u,newValue:p}),p>S["default"].NO_CHANGE&&p!=u)(E[n].state===O||p>u)&&Le(n,u,p,f,h.reason);else if(t.getLogToBrowserConsole()){var m=Q.getCurrentBufferLevel($.getReadOnlyMetricsFor(n));i.debug("AbrController ("+n+") stay on "+u+"/"+f+" (buffer: "+m+")")}}}}function Ne(e,t,n,r){var i=t.id,o=Ve(e);(0,L.checkInteger)(n);var a=le(e,i);n!==o&&n>=0&&n<=a&&Le(e,o,n,a,r)}function Le(e,r,o,a,s){if(e&&_[e]){var u=_[e].getStreamInfo(),l=u?u.id:null;if(t.getLogToBrowserConsole()){var c=Q.getCurrentBufferLevel($.getReadOnlyMetricsFor(e));i.info("AbrController ("+e+") switch from "+r+" to "+o+"/"+a+" (buffer: "+c+") "+(s?JSON.stringify(s):"."))}qe(e,l,o),n.trigger(y["default"].QUALITY_CHANGE_REQUESTED,{mediaType:e,streamInfo:u,oldQuality:r,newQuality:o,reason:s})}}function Pe(e,t){E[e].state=t}function Oe(e){return E[e]?E[e].state:null}function Fe(e,t,n){var r=e&&e.type?_[e.type].getRepresentationInfo():null;if(J&&n&&r&&r.fragmentDuration){n/=1e3;var i=r.fragmentDuration;if(n>i)return 0;var o=n/i;t*=1-o}for(var a=ke(e),s=a.length-1;s>=0;s--){var u=a[s];if(1e3*t>=u.bitrate)return s}return B}function ke(e){var t=[];if(!e||!e.bitrateList)return t;for(var n=e.bitrateList,r=e.type,i=void 0,o=0,a=n.length;o<a;o++)i=new d["default"],i.mediaType=r,i.qualityIndex=o,i.bitrate=n[o].bandwidth,i.width=n[o].width,i.height=n[o].height,i.scanType=n[o].scanType,t.push(i);return t}function Be(e,t){var n=V.getABRStrategy();if(n!==s["default"].ABR_STRATEGY_BOLA)if(n!==s["default"].ABR_STRATEGY_THROUGHPUT){var r=V.getStableBufferTime(),o=r,a=.5*r,u=X[e],l=t>(u?a:o);X[e]=l,l!==u&&(l?i.info("AbrController ("+e+") switching from throughput to buffer occupancy ABR rule (buffer: "+t.toFixed(3)+")."):i.info("AbrController ("+e+") switching from buffer occupancy to throughput ABR rule (buffer: "+t.toFixed(3)+")."))}else X[e]=!1;else X[e]=!0}function Ue(e){return X[e]}function He(){return W}function je(e){var t=e.type,n=e.streamInfo.id,r=e.representationCount-1;return Ge(t,n,r),r}function Ke(e){var t=e?e.id:null,n=Ve(s["default"].AUDIO),r=Ve(s["default"].VIDEO),i=n===le(s["default"].AUDIO,t)&&r===le(s["default"].VIDEO,t);return i}function Ve(e){if(e&&_[e]){var t=_[e].getStreamInfo(),n=t?t.id:null,r=void 0;if(n)return p[n]=p[n]||{},p[n].hasOwnProperty(e)||(p[n][e]=B),r=p[n][e],r}return B}function qe(e,t,n){p[t]=p[t]||{},p[t][e]=n}function Ge(e,t,n){f[t]=f[t]||{},f[t][e]=n}function Ye(e,t){var n=e;if(!_[t])return n;var r=Ee(t);void 0!==r&&(n=Math.max(e,r));var i=_e(t);return void 0!==i&&(n=Math.min(n,i)),n}function ze(e,t,n){var r=be(t);return isNaN(r)||r>=1||r<0?e:Math.min(e,Math.round(n*r))}function We(e){D=e}function Xe(){if(K){var e=I&&window.hasOwnProperty("devicePixelRatio"),t=e?window.devicePixelRatio:1;C=K.getClientWidth()*t,U=K.getClientHeight()*t}}function $e(e,t){if(t!==s["default"].VIDEO||!w||!_[t])return e;D||Xe();var n=H.getValue(),r=j.getAdaptationForType(n,0,t).Representation,i=e;if(C>0&&U>0){while(i>0&&r[i]&&C<r[i].width&&C-r[i-1].width<r[i].width-C)i-=1;r.length-2>=i&&r[i].width===r[i+1].width&&(i=Math.min(e,i+1))}return i}function Qe(t){var n=t.request.mediaType;if(Se(n)){var i=_[n];if(!i)return;var o=(0,b["default"])(e).create({abrController:r,streamProcessor:i,currentRequest:t.request,useBufferOccupancyABR:Ue(n)}),s=a.shouldAbandonFragment(o);if(s.quality>S["default"].NO_CHANGE){var l=i.getFragmentModel(),c=l.getRequests({state:h["default"].FRAGMENT_MODEL_LOADING,index:t.request.index})[0];c&&(l.abortRequests(),Pe(n,P),Y[n].reset(),Y[n].push({oldValue:Ve(n,u.getActiveStreamInfo()),newValue:s.quality,confidence:1,reason:s.reason}),Ne(n,u.getActiveStreamInfo(),s.quality,s.reason),clearTimeout(T),T=setTimeout((function(){Pe(n,O),T=null}),V.getAbandonLoadTimeout()))}}}return r={isPlayingAtTopQuality:Ke,updateTopQualityIndex:je,getThroughputHistory:He,getBitrateList:ke,getQualityForBitrate:Fe,getMaxAllowedBitrateFor:me,getTopBitrateInfoFor:ce,getMinAllowedBitrateFor:ge,setMaxAllowedBitrateFor:ye,setMinAllowedBitrateFor:ve,getMaxAllowedIndexFor:_e,getMinAllowedIndexFor:Ee,getMaxAllowedRepresentationRatioFor:be,setMaxAllowedRepresentationRatioFor:Te,getInitialBitrateFor:de,setInitialBitrateFor:fe,getInitialRepresentationRatioFor:he,setInitialRepresentationRatioFor:pe,setAutoSwitchBitrateFor:we,getAutoSwitchBitrateFor:Se,getUseDeadTimeLatency:Re,setUseDeadTimeLatency:Me,setLimitBitrateByPortal:Ie,getLimitBitrateByPortal:xe,getUsePixelRatioInLimitBitrateByPortal:Ae,setUsePixelRatioInLimitBitrateByPortal:De,getQualityFor:Ve,getAbandonmentStateFor:Oe,setPlaybackQuality:Ne,checkPlaybackQuality:Ce,getTopQualityIndexFor:le,setElementSize:Xe,setWindowResizeEventCalled:We,createAbrRulesCollection:ne,registerStreamType:ee,unRegisterStreamType:te,setConfig:oe,reset:ie},Z(),r}U.__dashjs_factory_name="AbrController";var H=_["default"].getSingletonFactory(U);H.ABANDON_LOAD=P,H.QUALITY_DEFAULT=B,_["default"].updateSingletonFactory(U.__dashjs_factory_name,H),t["default"]=H,e.exports=t["default"]},"36c3":function(e,t,n){var r=n("335c"),i=n("25eb");e.exports=function(e){return r(i(e))}},3702:function(e,t,n){var r=n("481b"),i=n("5168")("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},"37b6":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("c287"),u=i(s),l=60,c=60,d=1e3,f=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,h=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,(function(e){return f.test(e.value)}),(function(e){var t=f.exec(e),n=void 0;if(n=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&parseFloat(t[7])*d||0),t[9]&&t[10]){var r=parseInt(t[9],10)*c+parseInt(t[10],10);n+=("+"===t[8]?-1:1)*r*l*d}return new Date(n)}))}return a(t,e),t}(u["default"]);t["default"]=h,e.exports=t["default"]},3844:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("7b70"),o=r(i);function a(e){e=e||{};var t=e.BASE64,n={};n[o["default"].WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return t.decodeArray(e.license)},getErrorResponse:function(e){return e}},n[o["default"].PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}};var r=void 0;function i(){if(!t||!t.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}function a(e){return e}function s(){return"POST"}function u(e){return n[e].responseType}function l(e,t){return i(),n[t].getLicenseMessage(e)}function c(e,t){return n[t].getErrorResponse(e)}return r={getServerURLFromMessage:a,getHTTPMethod:s,getResponseType:u,getLicenseMessage:l,getErrorResponse:c},r}a.__dashjs_factory_name="DRMToday",t["default"]=dashjs.FactoryMaker.getSingletonFactory(a),e.exports=t["default"]},"38fd":function(e,t,n){var r=n("69a8"),i=n("4bf8"),o=n("613b")("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},"3a0f":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null};t["default"]=i,e.exports=t["default"]},"3a38":function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},"3a7c":function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===g(e)}function r(e){return"boolean"===typeof e}function i(e){return null===e}function o(e){return null==e}function a(e){return"number"===typeof e}function s(e){return"string"===typeof e}function u(e){return"symbol"===typeof e}function l(e){return void 0===e}function c(e){return"[object RegExp]"===g(e)}function d(e){return"object"===typeof e&&null!==e}function f(e){return"[object Date]"===g(e)}function h(e){return"[object Error]"===g(e)||e instanceof Error}function p(e){return"function"===typeof e}function m(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function g(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=r,t.isNull=i,t.isNullOrUndefined=o,t.isNumber=a,t.isString=s,t.isSymbol=u,t.isUndefined=l,t.isRegExp=c,t.isObject=d,t.isDate=f,t.isError=h,t.isFunction=p,t.isPrimitive=m,t.isBuffer=e.isBuffer}).call(this,n("b639").Buffer)},"3a92":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("243c"),o=r(i),a=n("5fa3"),s=r(a),u=n("d0d2"),l=r(u),c=n("7b70"),d=r(c),f="e2719d58-a985-b3c9-781a-b030af78d30e",h=d["default"].CLEARKEY_KEYSTEM_STRING,p="urn:uuid:"+f;function m(e){e=e||{};var t=void 0,n=e.BASE64;function r(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],a=0;a<r.kids.length;a++){var u=r.kids[a],l=e.clearkeys&&e.clearkeys.hasOwnProperty(u)?e.clearkeys[u]:null;if(!l)throw new Error("DRM: ClearKey keyID ("+u+") is not known!");i.push(new o["default"](u,l))}n=new s["default"](i)}return n}function i(e){return l["default"].parseInitDataFromContentProtection(e,n)}function a(){return null}function u(e){return new Uint8Array(e)}function c(){return null}function d(){return null}function m(){return null}return t={uuid:f,schemeIdURI:p,systemString:h,getInitData:i,getRequestHeadersFromMessage:a,getLicenseRequestFromMessage:u,getLicenseServerURLFromInitData:c,getCDMData:d,getSessionId:m,getClearKeysFromProtectionData:r},t}m.__dashjs_factory_name="KeySystemClearKey",t["default"]=dashjs.FactoryMaker.getSingletonFactory(m),e.exports=t["default"]},"3aad":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("589e"),s=r(a),u=n("9485"),l=r(u);function c(){var e=this.context,t=void 0,n=void 0,r=.075,i=6;function o(){n=(0,s["default"])(e).getInstance().getLogger(t)}function a(t){for(var o=t?t.getSwitchHistory():null,a=o?o.getSwitchRequests():[],s=0,u=0,c=0,d=(0,l["default"])(e).create(),f=0;f<a.length;f++)if(void 0!==a[f]&&(s+=a[f].drops,u+=a[f].noDrops,c+=a[f].dropSize,s+u>=i&&s/u>r)){d.quality=f>0&&a[f].drops>0?f-1:f,d.reason={index:d.quality,drops:s,noDrops:u,dropSize:c},n.debug("Switch history rule index: "+d.quality+" samples: "+(s+u)+" drops: "+s);break}return d}return t={getMaxIndex:a},o(),t}c.__dashjs_factory_name="SwitchHistoryRule",t["default"]=o["default"].getClassFactory(c),e.exports=t["default"]},"3b8d":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("795b"),i=n.n(r);function o(e,t,n,r,o,a,s){try{var u=e[a](s),l=u.value}catch(c){return void n(c)}u.done?t(l):i.a.resolve(l).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new i.a((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,u,"next",e)}function u(e){o(a,r,i,s,u,"throw",e)}s(void 0)}))}}},"3c11":function(e,t,n){"use strict";var r=n("63b6"),i=n("584a"),o=n("e53d"),a=n("f201"),s=n("cd78");r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then((function(){return n}))}:e,n?function(n){return s(t,e()).then((function(){throw n}))}:e)}})},"3cd4":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(e){e=e||{};var t=void 0,n=e.blacklistController;function r(e){var t=0,r=void 0;return e&&e.some((function(e,r){return t=r,!n.contains(e.serviceLocation)}))&&(r=e[t]),r}return t={select:r},t}a.__dashjs_factory_name="BasicSelector",t["default"]=o["default"].getClassFactory(a),e.exports=t["default"]},"3e2c":function(e,t,n){
/*! codem-isoboxer v0.3.6 https://github.com/madebyhiro/codem-isoboxer/blob/master/LICENSE.txt */
var r={parseBuffer:function(e){return new i(e).parse()},addBoxProcessor:function(e,t){"string"===typeof e&&"function"===typeof t&&(o.prototype._boxProcessors[e]=t)},createFile:function(){return new i},createBox:function(e,t,n){var r=o.create(e);return t&&t.append(r,n),r},createFullBox:function(e,t,n){var i=r.createBox(e,t,n);return i.version=0,i.flags=0,i},Utils:{}};r.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!==typeof TextDecoder)return new TextDecoder(n).decode(e);var r=[],i=0;if("utf-8"===n)while(i<e.byteLength){var o=e.getUint8(i++);o<128||(o<224?(o=(31&o)<<6,o|=63&e.getUint8(i++)):o<240?(o=(15&o)<<12,o|=(63&e.getUint8(i++))<<6,o|=63&e.getUint8(i++)):(o=(7&o)<<18,o|=(63&e.getUint8(i++))<<12,o|=(63&e.getUint8(i++))<<6,o|=63&e.getUint8(i++))),r.push(String.fromCharCode(o))}else while(i<e.byteLength)r.push(String.fromCharCode(e.getUint8(i++)));return r.join("")},r.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!==typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|63&r)):r<65536?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t},r.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==n)if(void 0!==n&&null!==n){var r,i=-1;if("number"===typeof n)i=n;else{if("string"===typeof n)r=n;else{if("object"!==typeof n||!n.type)return void e.boxes.push(t);r=n.type}for(var o=0;o<e.boxes.length;o++)if(r===e.boxes[o].type){i=o+1;break}}e.boxes.splice(i,0,t)}else e.boxes.push(t)},t.parseBuffer=r.parseBuffer,t.addBoxProcessor=r.addBoxProcessor,t.createFile=r.createFile,t.createBox=r.createBox,t.createFullBox=r.createFullBox,t.Utils=r.Utils,r.Cursor=function(e){this.offset="undefined"==typeof e?0:e};var i=function(e){this._cursor=new r.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};i.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},i.prototype.fetchAll=function(e,t){var n=[];return i._sweep.call(this,e,n,t),n},i.prototype.parse=function(){this._cursor.offset=0,this.boxes=[];while(this._cursor.offset<this._raw.byteLength){var e=o.parse(this);if("undefined"===typeof e.type)break;this.boxes.push(e)}return this},i._sweep=function(e,t,n){for(var r in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;i._sweep.call(this.boxes[r],e,t,n)}},i.prototype.write=function(){var e,t=0;for(e=0;e<this.boxes.length;e++)t+=this.boxes[e].getLength(!1);var n=new Uint8Array(t);for(this._rawo=new DataView(n.buffer),this.bytes=n,this._cursor.offset=0,e=0;e<this.boxes.length;e++)this.boxes[e].write();return n.buffer},i.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)};var o=function(){this._cursor=new r.Cursor};o.parse=function(e){var t=new o;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},o.create=function(e){var t=new o;return t.type=e,t.boxes=[],t},o.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],o.prototype._boxProcessors={},o.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e])},o.prototype._procFieldArray=function(e,t,n,r){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e][i]=this._readField(n,r);else for(i=0;i<this[e].length;i++)this._writeField(n,r,this[e][i])},o.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},o.prototype._procEntries=function(e,t,n){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e].push({}),n.call(this,this[e][r]);else for(r=0;r<t;r++)n.call(this,this[e][r])},o.prototype._procSubEntries=function(e,t,n,r){var i;if(this._parsing)for(e[t]=[],i=0;i<n;i++)e[t].push({}),r.call(this,e[t][i]);else for(i=0;i<n;i++)r.call(this,e[t][i])},o.prototype._procEntryField=function(e,t,n,r){this._parsing?e[t]=this._readField(n,r):this._writeField(n,r,e[t])},o.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(o.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength()},o.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},o.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var r=this._raw.getInt32(n),i=this._raw.getInt32(n+4);t=r*Math.pow(2,32)+i;break}return this._cursor.offset+=e>>3,t},o.prototype._readUint=function(e){var t,n,r=null,i=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:r=this._raw.getUint8(i);break;case 16:r=this._raw.getUint16(i);break;case 24:t=this._raw.getUint16(i),n=this._raw.getUint8(i+2),r=(t<<8)+n;break;case 32:r=this._raw.getUint32(i);break;case 64:t=this._raw.getUint32(i),n=this._raw.getUint32(i+4),r=t*Math.pow(2,32)+n;break}return this._cursor.offset+=e>>3,r},o.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var r=this._readUint(8);t+=String.fromCharCode(r)}return t},o.prototype._readTemplate=function(e){var t=this._readUint(e/2),n=this._readUint(e/2);return t+n/Math.pow(2,e/2)},o.prototype._readTerminatedString=function(){var e="";while(this._cursor.offset-this._offset<this._raw.byteLength){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},o.prototype._readData=function(e){var t=e>0?e:this._raw.byteLength-(this._cursor.offset-this._offset);if(t>0){var n=new Uint8Array(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,n}return null},o.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return e>0&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t?r.Utils.dataViewToString(t):t},o.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},o.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},o.prototype._parseContainerBox=function(){this.boxes=[];while(this._cursor.offset-this._raw.byteOffset<this._raw.byteLength)this.boxes.push(o.parse(this))},o.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)},o.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},o.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},o.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var r=Math.floor(t/Math.pow(2,32)),i=t-r*Math.pow(2,32);this._rawo.setUint32(n,r),this._rawo.setUint32(n+4,i);break}this._cursor.offset+=e>>3}else this.size+=e>>3},o.prototype._writeUint=function(e,t){if(this._rawo){var n,r,i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(i,t);break;case 16:this._rawo.setUint16(i,t);break;case 24:n=(16776960&t)>>8,r=255&t,this._rawo.setUint16(i,n),this._rawo.setUint8(i+2,r);break;case 32:this._rawo.setUint32(i,t);break;case 64:n=Math.floor(t/Math.pow(2,32)),r=t-n*Math.pow(2,32),this._rawo.setUint32(i,n),this._rawo.setUint32(i+4,r);break}this._cursor.offset+=e>>3}else this.size+=e>>3},o.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n))},o.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},o.prototype._writeTemplate=function(e,t){var n=Math.floor(t),r=(t-n)*Math.pow(2,e/2);this._writeUint(e/2,n),this._writeUint(e/2,r)},o.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,n=0;n<e.length;n++)this._rawo.setInt8(t+n,e[n]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},o.prototype._writeUTF8String=function(e){var t=r.Utils.utf8ToByteArray(e);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,t.length),i=0;i<t.length;i++)n.setUint8(i,t[i]);else this.size+=t.length},o.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n);break;default:break}},o.prototype._boxProcessors["avc1"]=o.prototype._boxProcessors["encv"]=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},o.prototype._boxProcessors["dref"]=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},o.prototype._boxProcessors["elst"]=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)}))},o.prototype._boxProcessors["emsg"]=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},o.prototype._boxProcessors["free"]=o.prototype._boxProcessors["skip"]=function(){this._procField("data","data",-1)},o.prototype._boxProcessors["frma"]=function(){this._procField("data_format","uint",32)},o.prototype._boxProcessors["ftyp"]=o.prototype._boxProcessors["styp"]=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},o.prototype._boxProcessors["hdlr"]=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},o.prototype._boxProcessors["mdat"]=function(){this._procField("data","data",-1)},o.prototype._boxProcessors["mdhd"]=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!==typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},o.prototype._boxProcessors["mehd"]=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},o.prototype._boxProcessors["mfhd"]=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},o.prototype._boxProcessors["mfro"]=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},o.prototype._boxProcessors["mp4a"]=o.prototype._boxProcessors["enca"]=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},o.prototype._boxProcessors["mvhd"]=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},o.prototype._boxProcessors["payl"]=function(){this._procField("cue_text","utf8")},o.prototype._boxProcessors["pssh"]=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},o.prototype._boxProcessors["schm"]=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},o.prototype._boxProcessors["sdtp"]=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},o.prototype._boxProcessors["sidx"]=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,(function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)}))},o.prototype._boxProcessors["smhd"]=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},o.prototype._boxProcessors["ssix"]=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,(function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,(function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)}))}))},o.prototype._boxProcessors["stsd"]=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},o.prototype._boxProcessors["subs"]=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,(function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)}))}))},o.prototype._boxProcessors["tenc"]=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},o.prototype._boxProcessors["tfdt"]=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},o.prototype._boxProcessors["tfhd"]=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},o.prototype._boxProcessors["tfra"]=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,(function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))}))},o.prototype._boxProcessors["tkhd"]=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},o.prototype._boxProcessors["trex"]=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},o.prototype._boxProcessors["trun"]=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,(function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)}))},o.prototype._boxProcessors["url "]=o.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},o.prototype._boxProcessors["vlab"]=function(){this._procField("source_label","utf8")},o.prototype._boxProcessors["vmhd"]=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},o.prototype._boxProcessors["vttC"]=function(){this._procField("config","utf8")},o.prototype._boxProcessors["vtte"]=function(){}},"3f38":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("8a43"),o=r(i),a=n("1d48"),s=r(a),u=n("467b"),l=r(u);function c(){var e=this.context,t=(0,o["default"])(e).getInstance(),n=void 0,r=void 0;function i(){return r}function a(e){r=e,e&&t.trigger(s["default"].MANIFEST_LOADED,{data:e})}return n={getValue:i,setValue:a},n}c.__dashjs_factory_name="ManifestModel",t["default"]=l["default"].getSingletonFactory(c),e.exports=t["default"]},"3fb5":function(e,t){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},4081:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("0712"),s=r(a),u=n("7865"),l=r(u),c=n("4e7a"),d=r(c),f=n("6c57"),h=r(f),p=n("6a2d"),m=r(p),g=n("0757"),y=n("8a43"),v=r(y),_=n("1d48"),E=r(_),b=n("e172"),T=r(b),S=n("467b"),w=r(S),x=n("8307"),I=r(x),A=n("589e"),D=r(A);function R(e){e=e||{};var t=this.context,n=(0,v["default"])(t).getInstance(),r=(0,d["default"])(t).getInstance(),i=void 0,a=void 0,u=void 0,c=void 0,f=void 0,p=e.mssHandler,y=e.errHandler;function _(){a=(0,D["default"])(t).getInstance().getLogger(i),n.on(E["default"].XLINK_READY,b,i),u=(0,l["default"])(t).create({errHandler:y,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),c=(0,s["default"])(t).create({errHandler:y,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),f=null}function b(e){n.trigger(E["default"].INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}function S(e){var n=null;return e.indexOf("SmoothStreamingMedia")>-1?(p&&(n=p.createMssParser(),p.registerEvents()),n):e.indexOf("MPD")>-1?(0,I["default"])(t).create():n}function w(e){var t=new h["default"](e,g.HTTPRequest.MPD_TYPE);u.load({request:t,success:function(t,i,s){if(c){var u=void 0,l=void 0,d=void 0;if(s&&s!==e?(l=r.parseBaseUrl(s),u=s):(r.isRelative(e)&&(e=r.resolve(e,window.location.href)),l=r.parseBaseUrl(e)),null===f&&(f=S(t)),null!==f){c.setMatchers(f.getMatchers()),c.setIron(f.getIron());try{d=f.parse(t)}catch(h){return void n.trigger(E["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new m["default"](T["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,T["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+e)})}d?(d.url=u||e,d.originalUrl||(d.originalUrl=d.url),d.hasOwnProperty(o["default"].LOCATION)&&(l=r.parseBaseUrl(d.Location_asArray[0]),a.debug("BaseURI set by Location to: "+l)),d.baseUri=l,d.loadedTime=new Date,c.resolveManifestOnLoad(d)):n.trigger(E["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new m["default"](T["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,T["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+e)})}else n.trigger(E["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new m["default"](T["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,T["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+e)})}},error:function(t,r,i){n.trigger(E["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new m["default"](T["default"].MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,T["default"].MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+(e+", ")+i)})}})}function x(){n.off(E["default"].XLINK_READY,b,i),c&&(c.reset(),c=null),u&&(u.abort(),u=null),p&&p.reset()}return i={load:w,reset:x},_(),i}R.__dashjs_factory_name="ManifestLoader";var M=w["default"].getClassFactory(R);t["default"]=M,e.exports=t["default"]},"40c3":function(e,t,n){var r=n("6b4c"),i=n("5168")("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},4178:function(e,t,n){var r,i,o,a=n("d864"),s=n("3024"),u=n("32fc"),l=n("1ec9"),c=n("e53d"),d=c.process,f=c.setImmediate,h=c.clearImmediate,p=c.MessageChannel,m=c.Dispatch,g=0,y={},v="onreadystatechange",_=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},E=function(e){_.call(e.data)};f&&h||(f=function(e){var t=[],n=1;while(arguments.length>n)t.push(arguments[n++]);return y[++g]=function(){s("function"==typeof e?e:Function(e),t)},r(g),g},h=function(e){delete y[e]},"process"==n("6b4c")(d)?r=function(e){d.nextTick(a(_,e,1))}:m&&m.now?r=function(e){m.now(a(_,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=E,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+"","*")},c.addEventListener("message",E,!1)):r=v in l("script")?function(e){u.appendChild(l("script"))[v]=function(){u.removeChild(this),_.call(e)}}:function(e){setTimeout(a(_,e,1),0)}),e.exports={set:f,clear:h}},4187:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("8a43"),o=r(i),a=n("1d48"),s=r(a),u=n("467b"),l=r(u);function c(){var e=void 0,t=this.context,n=(0,o["default"])(t).getInstance();function r(e){n.trigger(s["default"].ERROR,{error:"capability",event:e})}function i(e,t,r){n.trigger(s["default"].ERROR,{error:"download",event:{id:e,url:t,request:r}})}function a(e,t,r,i){n.trigger(s["default"].ERROR,{error:"manifestError",event:{message:e,id:t,manifest:r,event:i}})}function u(e,t,r){n.trigger(s["default"].ERROR,{error:"cc",event:{message:e,id:t,cc:r}})}function l(e){n.trigger(s["default"].ERROR,{error:"mediasource",event:e})}function c(e){n.trigger(s["default"].ERROR,{error:"key_session",event:e})}function d(e){n.trigger(s["default"].ERROR,{error:"key_message",event:e})}function f(e){n.trigger(s["default"].ERROR,{error:e})}return e={capabilityError:r,downloadError:i,manifestError:a,timedTextError:u,mediaSourceError:l,mediaKeySessionError:c,mediaKeyMessageError:d,error:f},e}c.__dashjs_factory_name="ErrorHandler",t["default"]=l["default"].getSingletonFactory(c),e.exports=t["default"]},"41a0":function(e,t,n){"use strict";var r=n("2aeb"),i=n("4630"),o=n("7f20"),a={};n("32e9")(a,n("2b4c")("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},"41ee":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null};i.ACTION_DOWNLOAD="download",i.ACTION_COMPLETE="complete",t["default"]=i,e.exports=t["default"]},"429b":function(e,t,n){e.exports=n("faa1").EventEmitter},4398:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("47e4"),s=r(a),u=n("1a38"),l=r(u),c=n("8e01"),d=r(c),f=n("d665"),h=r(f),p=n("4be9"),m=r(p),g=n("4081"),y=r(g),v=n("4187"),_=r(v),E=n("612d"),b=r(E),T=n("eba1"),S=r(T),w=n("b4f1"),x=r(w),I=n("5571"),A=r(I),D=n("6f8b"),R=r(D),M=n("3f38"),C=r(M),N=n("bd9a"),L=r(N),P=n("c645"),O=r(P),F=n("36b1"),k=r(F),B=n("e251"),U=r(B),H=n("2e81"),j=r(H),K=n("589e"),V=r(K),q=n("e172"),G=r(q),Y=n("8a43"),z=r(Y),W=n("1d48"),X=r(W),$=n("1962"),Q=r($),J=n("467b"),Z=r(J),ee=n("3337"),te=n("b2c3"),ne=r(te),re=n("5080"),ie=r(re),oe=n("d5e2"),ae=r(oe),se=n("ad14"),ue=r(se),le=n("0757"),ce=n("6a67"),de=r(ce),fe=n("3e2c"),he=r(fe),pe=n("6a2d"),me=r(pe),ge=n("71a8");function ye(){var e="You must first call initialize() and set a source before calling this method",t="You must first call initialize() and set a valid source and view before calling this method",n="You must first call attachView() to set the video element before calling this method",r="You must first call attachSource() with a valid source before calling this method",i="MediaPlayer not initialized!",a="Playback minimum drift has an invalid value! Use a number from 0 to 0.5",u="Playback maximum drift has an invalid value! Use a number greater or equal to 0",c=this.context,f=(0,z["default"])(c).getInstance(),p=(0,V["default"])(c).getInstance(),g=void 0,v=void 0,E=void 0,T=void 0,w=void 0,I=void 0,D=void 0,M=void 0,N=void 0,P=void 0,F=void 0,B=void 0,H=void 0,K=void 0,q=void 0,Y=void 0,W=void 0,$=void 0,J=void 0,te=void 0,re=void 0,oe=void 0,se=void 0,ce=void 0,fe=void 0,pe=void 0,ye=void 0,ve=void 0;function _e(){v=p.getLogger(g),w=!1,D=!1,I=!1,M=!0,B=null,T=null,q=null,X["default"].extend(Q["default"]),W=(0,L["default"])(c).getInstance(),fe=(0,U["default"])(c).getInstance(),ye=(0,R["default"])(c).getInstance()}function Ee(e){e&&(e.capabilities&&(J=e.capabilities),e.streamController&&(te=e.streamController),e.playbackController&&(re=e.playbackController),e.mediaPlayerModel&&(W=e.mediaPlayerModel),e.abrController&&(N=e.abrController),e.mediaController&&(F=e.mediaController))}function be(e,t,n){if(J||(J=(0,b["default"])(c).getInstance()),$=(0,_["default"])(c).getInstance(),!J.supportsMediaSource())return $.capabilityError("mediasource"),void $.error(new me["default"](G["default"].CAPABILITY_MEDIASOURCE_ERROR_CODE,G["default"].CAPABILITY_MEDIASOURCE_ERROR_MESSAGE));w||(w=!0,P=(0,ue["default"])(c).getInstance(),N||(N=(0,k["default"])(c).getInstance()),re||(re=(0,l["default"])(c).getInstance()),F||(F=(0,h["default"])(c).getInstance()),q=(0,ne["default"])(c).getInstance(),se=(0,ie["default"])(c).getInstance({timelineConverter:P,errHandler:$,BASE64:de["default"]}),ce=(0,C["default"])(c).getInstance(),oe=(0,ae["default"])(c).getInstance({manifestModel:ce,dashManifestModel:se}),Y=(0,O["default"])(c).getInstance(),pe=(0,A["default"])(c).getInstance(),ve=(0,j["default"])(c).getInstance({mediaPlayerModel:W}),q.setConfig({dashManifestModel:se}),Wt(),Tt(void 0===n||n),e&&Un(e),t&&sr(t),v.info("[dash.js "+Ie()+"] MediaPlayer has been initialized"))}function Te(){sr(null),Un(null),T=null,B&&(B.reset(),B=null),H&&(H.reset(),H=null)}function Se(){return!!E&&!!fe.getElement()}function we(e,t,n){f.on(e,t,n)}function xe(e,t,n){f.off(e,t,n)}function Ie(){return(0,ee.getVersionString)()}function Ae(){return p}function De(){if(fe.getElement()||I)return!1;if(!E)throw r;Er()}function Re(){if(!D)throw t;(!M||Ce()&&D)&&re.play()}function Me(){if(!D)throw t;re.pause()}function Ce(){if(!D)throw t;return re.isPaused()}function Ne(e){if(!D)throw t;if((0,ge.checkParameterType)(e,"number"),isNaN(e))throw o["default"].BAD_ARGUMENT_ERROR;var n=re.getIsDynamic()?Xe(e):e;re.seek(n)}function Le(){if(!D)throw t;return re.isSeeking()}function Pe(){if(!D)throw t;return re.getIsDynamic()}function Oe(e){kn().playbackRate=e}function Fe(){return kn().playbackRate}function ke(e){W.setCatchUpPlaybackRate(e)}function Be(){return W.getCatchUpPlaybackRate()}function Ue(e){if("number"!==typeof e||isNaN(e)||e<0||e>.5)throw a;W.setLowLatencyMinDrift(e)}function He(){return W.getLowLatencyMinDrift()}function je(e){if("number"!==typeof e||isNaN(e)||e<0)throw u;W.setLowLatencyMaxDriftBeforeSeeking(e)}function Ke(){return W.getLowLatencyMaxDriftBeforeSeeking()}function Ve(e){(0,ge.checkParameterType)(e,"boolean"),kn().muted=e}function qe(){return kn().muted}function Ge(e){if("number"!==typeof e||isNaN(e)||e<0||e>1)throw o["default"].BAD_ARGUMENT_ERROR;kn().volume=e}function Ye(){return kn().volume}function ze(e){var t=[o["default"].VIDEO,o["default"].AUDIO,o["default"].FRAGMENTED_TEXT];if(e){if(-1!==t.indexOf(e)){n=xn().getCurrentBufferLevel(In(e));return n||NaN}return v.warn("getBufferLength requested for invalid type"),NaN}var n=t.map((function(e){return qn(e).length>0?xn().getCurrentBufferLevel(In(e)):Number.MAX_VALUE})).reduce((function(e,t){return Math.min(e,t)}));return n===Number.MAX_VALUE?NaN:n}function We(){var e=vr();return e?e.manifestInfo.DVRWindowSize:0}function Xe(e){var t=vr();if(!t)return 0;var n=re.getLiveDelay(),r=t.range.start+e;return r>t.range.end-n&&(r=t.range.end-n),r}function $e(e){if(!D)throw t;var n=kn().currentTime;if(void 0!==e)n=te.getTimeRelativeToStreamId(n,e);else if(re.getIsDynamic()){var r=vr();n=null===r?0:Qe()-(r.range.end-r.time)}return n}function Qe(){if(!D)throw t;var e=kn().duration;if(re.getIsDynamic()){var n=vr(),r=void 0;if(!n)return 0;r=n.range.end-n.range.start,e=r<n.manifestInfo.DVRWindowSize?r:n.manifestInfo.DVRWindowSize}return e}function Je(){if(!D)throw t;return $e()<0?NaN:_r($e())}function Ze(){if(!D)throw t;return _r(Qe())}function et(e,t){N.setMaxAllowedBitrateFor(e,t)}function tt(e,t){N.setMinAllowedBitrateFor(e,t)}function nt(e){return N.getMaxAllowedBitrateFor(e)}function rt(t){if(!I)throw e;return N.getTopBitrateInfoFor(t)}function it(e){return N.getMinAllowedBitrateFor(e)}function ot(e,t){N.setMaxAllowedRepresentationRatioFor(e,t)}function at(e){return N.getMaxAllowedRepresentationRatioFor(e)}function st(t){if(!I)throw e;if(t===o["default"].IMAGE){var n=dr();if(!n)return-1;var r=n.getThumbnailController();return r?r.getCurrentTrackIndex():-1}return N.getQualityFor(t,te.getActiveStreamInfo())}function ut(t,n){if(!I)throw e;if(t===o["default"].IMAGE){var r=dr();if(!r)return;var i=r.getThumbnailController();i&&i.setTrackByIndex(n)}N.setPlaybackQuality(t,te.getActiveStreamInfo(),n)}function lt(){N.setElementSize(),N.setWindowResizeEventCalled(!0)}function ct(){return N.getLimitBitrateByPortal()}function dt(e){N.setLimitBitrateByPortal(e)}function ft(){return N.getUsePixelRatioInLimitBitrateByPortal()}function ht(e){N.setUsePixelRatioInLimitBitrateByPortal(e)}function pt(e,t){N.setInitialBitrateFor(e,t)}function mt(t){if(!I)throw e;return N.getInitialBitrateFor(t)}function gt(e,t){N.setInitialRepresentationRatioFor(e,t)}function yt(e){return N.getInitialRepresentationRatioFor(e)}function vt(e){return N.getAutoSwitchBitrateFor(e)}function _t(e,t){N.setAutoSwitchBitrateFor(e,t)}function Et(){return N.getUseDeadTimeLatency()}function bt(e){N.setUseDeadTimeLatency(e)}function Tt(e){(0,ge.checkParameterType)(e,"boolean"),M=e}function St(){return M}function wt(e){W.setLiveDelayFragmentCount(e)}function xt(e){W.setLiveDelay(e)}function It(){return W.getLiveDelay()}function At(){if(!w)throw i;return D?re.getCurrentLiveLatency():NaN}function Dt(e){W.setUseSuggestedPresentationDelay(e)}function Rt(e,t){W.setLastBitrateCachingInfo(e,t)}function Mt(e,t){W.setLastMediaSettingsCachingInfo(e,t)}function Ct(e){W.setScheduleWhilePaused(e)}function Nt(){return W.getScheduleWhilePaused()}function Lt(e){W.setFastSwitchEnabled(e)}function Pt(){return W.getFastSwitchEnabled()}function Ot(e){W.setABRStrategy(e)}function Ft(){return W.getABRStrategy()}function kt(e){W.setUseDefaultABRRules(e)}function Bt(e,t,n){W.addABRCustomRule(e,t,n)}function Ut(e){W.removeABRCustomRule(e)}function Ht(){W.removeABRCustomRule()}function jt(e){W.setMovingAverageMethod(e)}function Kt(){return W.getMovingAverageMethod()}function Vt(){return W.getLowLatencyEnabled()}function qt(e){W.setLowLatencyEnabled(e)}function Gt(e,t){W.addUTCTimingSource(e,t)}function Yt(e,t){W.removeUTCTimingSource(e,t)}function zt(){W.clearDefaultUTCTimingSources()}function Wt(){W.restoreDefaultUTCTimingSources()}function Xt(e){W.setUseManifestDateHeaderTimeSource(e)}function $t(e){W.setBufferToKeep(e)}function Qt(e){W.setBufferAheadToKeep(e)}function Jt(e){W.setBufferPruningInterval(e)}function Zt(e){W.setStableBufferTime(e)}function en(){return W.getStableBufferTime()}function tn(e){W.setBufferTimeAtTopQuality(e)}function nn(){return W.getBufferTimeAtTopQuality()}function rn(e){W.setBufferTimeAtTopQualityLongForm(e)}function on(){return W.getBufferTimeAtTopQualityLongForm()}function an(e){W.setLongFormContentDurationThreshold(e)}function sn(e){W.setSegmentOverlapToleranceTime(e)}function un(e,t){W.setCacheLoadThresholdForType(e,t)}function ln(e){W.setBandwidthSafetyFactor(e)}function cn(){return W.getBandwidthSafetyFactor()}function dn(e){var t=N.getThroughputHistory();return t?t.getAverageThroughput(e):0}function fn(e){W.setAbandonLoadTimeout(e)}function hn(e){W.setRetryAttemptsForType(le.HTTPRequest.MEDIA_SEGMENT_TYPE,e)}function pn(e){W.setRetryIntervalForType(le.HTTPRequest.MEDIA_SEGMENT_TYPE,e)}function mn(e){W.setRetryAttemptsForType(le.HTTPRequest.MPD_TYPE,e)}function gn(e){W.setRetryIntervalForType(le.HTTPRequest.MPD_TYPE,e)}function yn(e,t){W.setXHRWithCredentialsForType(e,t)}function vn(e){return W.getXHRWithCredentialsForType(e)}function _n(e){W.setJumpGaps(e)}function En(){return W.getJumpGaps()}function bn(e){W.setSmallGapLimit(e)}function Tn(){return W.getSmallGapLimit()}function Sn(e){W.setManifestUpdateRetryInterval(e)}function wn(){return W.getManifestUpdateRetryInterval()}function xn(){return oe}function In(e){return Y.getReadOnlyMetricsFor(e)}function An(e){void 0===pe&&(pe=(0,A["default"])(c).getInstance()),pe.setTextDefaultLanguage(e)}function Dn(){return void 0===pe&&(pe=(0,A["default"])(c).getInstance()),pe.getTextDefaultLanguage()}function Rn(e){void 0===pe&&(pe=(0,A["default"])(c).getInstance()),pe.setTextDefaultEnabled(e)}function Mn(){return void 0===pe&&(pe=(0,A["default"])(c).getInstance()),pe.getTextDefaultEnabled()}function Cn(e){void 0===pe&&(pe=(0,A["default"])(c).getInstance()),pe.enableText(e)}function Nn(e){void 0===pe&&(pe=(0,A["default"])(c).getInstance()),pe.enableForcedTextStreaming(e)}function Ln(){return void 0===pe&&(pe=(0,A["default"])(c).getInstance()),pe.isTextEnabled()}function Pn(e){if(!D)throw t;void 0===pe&&(pe=(0,A["default"])(c).getInstance()),pe.setTextTrack(e)}function On(){var e=NaN;return pe&&(e=pe.getCurrentTrackIdx()),e}function Fn(e){var t=(0,S["default"])(c).getInstance();t.setConfig({videoModel:fe}),t.initialize(),t.displayCConTop(e)}function kn(){if(!fe.getElement())throw n;return fe.getElement()}function Bn(e){v.warn("attachVideoContainer method has been deprecated and will be removed in dash.js v3.0.0")}function Un(e){if(!w)throw i;fe.setElement(e),e&&(mr(),gr(),yr(),te&&te.switchToVideoElement()),D&&fr(),Er()}function Hn(){return fe?fe.getTTMLRenderingDiv():null}function jn(e){if(!fe.getElement())throw n;fe.setTTMLRenderingDiv(e)}function Kn(t){if(!I)throw e;var n=dr();return n?n.getBitrateListFor(t):[]}function Vn(t){if(!I)throw e;return q.getStreamsInfo(t)}function qn(t){if(!I)throw e;var n=te.getActiveStreamInfo();return F.getTracksFor(t,n)}function Gn(t,n,r){if(!I)throw e;return r=r||q.getStreamsInfo(n,1)[0],r?q.getAllMediaInfoForType(r,t,n):[]}function Yn(t){if(!I)throw e;var n=te.getActiveStreamInfo();return F.getCurrentTrackFor(t,n)}function zn(e,t){if(!w)throw i;F.setInitialSettings(e,t)}function Wn(e){if(!w)throw i;return F.getInitialSettings(e)}function Xn(t){if(!I)throw e;F.setTrack(t)}function $n(e){if(!w)throw i;return F.getSwitchMode(e)}function Qn(e,t){if(!w)throw i;F.setSwitchMode(e,t)}function Jn(e){if(!w)throw i;F.setSelectionModeForInitialTrack(e)}function Zn(){if(!w)throw i;return F.getSelectionModeForInitialTrack()}function er(){return mr()}function tr(e){B=e}function nr(e){T=e,te&&te.setProtectionData(T)}function rr(e,t){if(e<0)return null;var n=re.getIsDynamic()?Xe(e):e,r=te.getStreamForTime(n);if(null===r)return null;var i=r.getThumbnailController();if(!i)return null;var o=te.getTimeRelativeToStreamId(n,r.getId());return i.get(o,t)}function ir(e){W.setKeepProtectionMediaKeys(e)}function or(e,t){var n=pr(),r=this,i=function e(i){i.error?t(null,i.error):t(i.manifest),f.off(X["default"].INTERNAL_MANIFEST_LOADED,e,r),n.reset()};f.on(X["default"].INTERNAL_MANIFEST_LOADED,i,r),ye.initialize(e),n.load(e)}function ar(){if(!E)throw r;return E}function sr(e){if(!w)throw i;"string"===typeof e&&ye.initialize(e),E=e,(I||D)&&fr(),Se()&&Er()}function ur(e,t,n){var r=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],i=new Date(1e3*e),o=i.toLocaleDateString(t),a=i.toLocaleTimeString(t,{hour12:n});return r?a+" "+o:a}function lr(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(r<10?"0"+r.toString():r.toString())}function cr(e,t,n){Z["default"].extend(e,t,n,c)}function dr(){if(!I)throw e;var t=te.getActiveStreamInfo();return t?te.getStreamById(t.id):null}function fr(){D=!1,I=!1,q.reset(),te.reset(),re.reset(),N.reset(),F.reset(),pe.reset(),B&&(W.getKeepProtectionMediaKeys()?B.stop():(B.reset(),B=null,mr()))}function hr(){var e=pr();te||(te=(0,d["default"])(c).getInstance()),F.setConfig({domStorage:ve}),te.setConfig({capabilities:J,manifestLoader:e,manifestModel:ce,dashManifestModel:se,mediaPlayerModel:W,protectionController:B,adapter:q,metricsModel:Y,dashMetrics:oe,errHandler:$,timelineConverter:P,videoModel:fe,playbackController:re,domStorage:ve,abrController:N,mediaController:F,textController:pe}),re.setConfig({streamController:te,metricsModel:Y,dashMetrics:oe,manifestModel:ce,mediaPlayerModel:W,dashManifestModel:se,adapter:q,videoModel:fe,timelineConverter:P,uriFragmentModel:ye}),N.setConfig({streamController:te,domStorage:ve,mediaPlayerModel:W,metricsModel:Y,dashMetrics:oe,manifestModel:ce,videoModel:fe,adapter:q}),N.createAbrRulesCollection(),pe.setConfig({errHandler:$,manifestModel:ce,dashManifestModel:se,mediaController:F,streamController:te,videoModel:fe}),te.initialize(M,T)}function pr(){return(0,y["default"])(c).create({errHandler:$,metricsModel:Y,mediaPlayerModel:W,requestModifier:(0,x["default"])(c).getInstance(),mssHandler:K})}function mr(){if(B)return B;var e=dashjs.Protection;if("function"===typeof e){var t=e(c).create();return X["default"].extend(e.events),Q["default"].extend(e.events,{publicOnly:!0}),G["default"].extend(e.errors),J||(J=(0,b["default"])(c).getInstance()),B=t.createProtectionSystem({debug:p,errHandler:$,videoModel:fe,capabilities:J,eventBus:f,events:X["default"],BASE64:de["default"],constants:o["default"]}),B}return null}function gr(){if(!H){var e=dashjs.MetricsReporting;if("function"===typeof e){var t=e(c).create();H=t.createMetricsReporting({debug:p,eventBus:f,mediaElement:kn(),dashManifestModel:se,metricsModel:Y,events:X["default"],constants:o["default"],metricsConstants:s["default"]})}}}function yr(){if(!K){var e=dashjs.MssHandler;"function"===typeof e&&(G["default"].extend(e.errors),K=e(c).create({eventBus:f,mediaPlayerModel:W,metricsModel:Y,manifestModel:ce,playbackController:re,protectionController:B,baseURLController:(0,m["default"])(c).getInstance(),errHandler:$,events:X["default"],constants:o["default"],debug:p,initSegmentType:le.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:de["default"],ISOBoxer:he["default"]}))}}function vr(){var e=Y.getReadOnlyMetricsFor(o["default"].VIDEO)||Y.getReadOnlyMetricsFor(o["default"].AUDIO);return oe.getCurrentDVRInfo(e)}function _r(e){var t=vr(),n=void 0,r=void 0;return t?(n=t.manifestInfo.availableFrom.getTime()/1e3,r=e+(n+t.range.start),r):0}function Er(){!I&&E&&(I=!0,v.info("Streaming Initialized"),hr(),"string"===typeof E?te.load(E):te.loadWithManifest(E)),!D&&Se()&&(D=!0,v.info("Playback Initialized"))}return g={initialize:be,setConfig:Ee,on:we,off:xe,extend:cr,attachView:Un,attachSource:sr,isReady:Se,preload:De,play:Re,isPaused:Ce,pause:Me,isSeeking:Le,isDynamic:Pe,seek:Ne,setPlaybackRate:Oe,getPlaybackRate:Fe,setMute:Ve,isMuted:qe,setVolume:Ge,getVolume:Ye,time:$e,duration:Qe,timeAsUTC:Je,durationAsUTC:Ze,getActiveStream:dr,getDVRWindowSize:We,getDVRSeekOffset:Xe,convertToTimeCode:lr,formatUTC:ur,getVersion:Ie,getDebug:Ae,getBufferLength:ze,getTTMLRenderingDiv:Hn,getVideoElement:kn,getSource:ar,setLiveDelayFragmentCount:wt,setLiveDelay:xt,getLiveDelay:It,getCurrentLiveLatency:At,useSuggestedPresentationDelay:Dt,enableLastBitrateCaching:Rt,enableLastMediaSettingsCaching:Mt,setMaxAllowedBitrateFor:et,getMaxAllowedBitrateFor:nt,getTopBitrateInfoFor:rt,setMinAllowedBitrateFor:tt,getMinAllowedBitrateFor:it,setMaxAllowedRepresentationRatioFor:ot,getMaxAllowedRepresentationRatioFor:at,setAutoPlay:Tt,getAutoPlay:St,setScheduleWhilePaused:Ct,getScheduleWhilePaused:Nt,getDashMetrics:xn,getMetricsFor:In,getQualityFor:st,setQualityFor:ut,updatePortalSize:lt,getLimitBitrateByPortal:ct,setLimitBitrateByPortal:dt,getUsePixelRatioInLimitBitrateByPortal:ft,setUsePixelRatioInLimitBitrateByPortal:ht,setTextDefaultLanguage:An,getTextDefaultLanguage:Dn,setTextDefaultEnabled:Rn,getTextDefaultEnabled:Mn,enableText:Cn,enableForcedTextStreaming:Nn,isTextEnabled:Ln,setTextTrack:Pn,getBitrateInfoListFor:Kn,setInitialBitrateFor:pt,getInitialBitrateFor:mt,setInitialRepresentationRatioFor:gt,getInitialRepresentationRatioFor:yt,getStreamsFromManifest:Vn,getTracksFor:qn,getTracksForTypeFromManifest:Gn,getCurrentTrackFor:Yn,setInitialMediaSettingsFor:zn,getInitialMediaSettingsFor:Wn,setCurrentTrack:Xn,getTrackSwitchModeFor:$n,setTrackSwitchModeFor:Qn,setSelectionModeForInitialTrack:Jn,getSelectionModeForInitialTrack:Zn,setFastSwitchEnabled:Lt,getFastSwitchEnabled:Pt,setMovingAverageMethod:jt,getMovingAverageMethod:Kt,getAutoSwitchQualityFor:vt,setAutoSwitchQualityFor:_t,setABRStrategy:Ot,getABRStrategy:Ft,useDefaultABRRules:kt,addABRCustomRule:Bt,removeABRCustomRule:Ut,removeAllABRCustomRule:Ht,setBandwidthSafetyFactor:ln,getBandwidthSafetyFactor:cn,getAverageThroughput:dn,setAbandonLoadTimeout:fn,retrieveManifest:or,addUTCTimingSource:Gt,removeUTCTimingSource:Yt,clearDefaultUTCTimingSources:zt,restoreDefaultUTCTimingSources:Wt,setBufferToKeep:$t,setBufferAheadToKeep:Qt,setBufferPruningInterval:Jt,setStableBufferTime:Zt,getStableBufferTime:en,setBufferTimeAtTopQuality:tn,getBufferTimeAtTopQuality:nn,setBufferTimeAtTopQualityLongForm:rn,getBufferTimeAtTopQualityLongForm:on,setFragmentLoaderRetryAttempts:hn,setFragmentLoaderRetryInterval:pn,setManifestLoaderRetryAttempts:mn,setManifestLoaderRetryInterval:gn,setXHRWithCredentialsForType:yn,getXHRWithCredentialsForType:vn,setJumpGaps:_n,getJumpGaps:En,setSmallGapLimit:bn,getSmallGapLimit:Tn,setLowLatencyEnabled:qt,getLowLatencyEnabled:Vt,setCatchUpPlaybackRate:ke,getCatchUpPlaybackRate:Be,setLowLatencyMinDrift:Ue,getLowLatencyMinDrift:He,setLowLatencyMaxDriftBeforeSeeking:je,getLowLatencyMaxDriftBeforeSeeking:Ke,setManifestUpdateRetryInterval:Sn,getManifestUpdateRetryInterval:wn,setLongFormContentDurationThreshold:an,setSegmentOverlapToleranceTime:sn,setCacheLoadThresholdForType:un,getProtectionController:er,attachProtectionController:tr,setProtectionData:nr,enableManifestDateHeaderTimeSource:Xt,displayCaptionsOnTop:Fn,attachVideoContainer:Bn,attachTTMLRenderingDiv:jn,getCurrentTextTrackIndex:On,getUseDeadTimeLatencyForAbr:Et,setUseDeadTimeLatencyForAbr:bt,getThumbnail:rr,keepProtectionMediaKeys:ir,reset:Te},_e(),g}ye.__dashjs_factory_name="MediaPlayer";var ve=Z["default"].getClassFactory(ye);ve.events=Q["default"],ve.errors=G["default"],Z["default"].updateClassFactory(ye.__dashjs_factory_name,ve),t["default"]=ve,e.exports=t["default"]},"43fc":function(e,t,n){"use strict";var r=n("63b6"),i=n("656e"),o=n("4439");r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},4439:function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},"446e":function(e,t,n){(function(e){(function(){var n="undefined"!=typeof window?window:e,r={};for(var i in function(e,t){var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},o="undefined"!=typeof e&&e===this?this:"undefined"!=typeof t&&null!=t?t:this;function a(){a=function(){},o.Symbol||(o.Symbol=s)}var s=function(){var e=0;return function(t){return"jscomp_symbol_"+(t||"")+e++}}();function u(){a();var e=o.Symbol.iterator;e||(e=o.Symbol.iterator=o.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&r(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return l(this)}}),u=function(){}}function l(e){var t=0;return c((function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}))}function c(e){return u(),e={next:e},e[o.Symbol.iterator]=function(){return this},e}function d(e){u();var t=e[Symbol.iterator];return t?t.call(e):l(e)}function f(e,t){if(t){for(var n=o,i=e.split("."),a=0;a<i.length-1;a++){var s=i[a];s in n||(n[s]={}),n=n[s]}i=i[i.length-1],a=n[i],s=t(a),s!=a&&null!=s&&r(n,i,{configurable:!0,writable:!0,value:s})}}function h(e){function t(t){return e.next(t)}function n(t){return e["throw"](t)}return new Promise((function(r,i){function o(e){e.done?r(e.value):Promise.resolve(e.value).then(t,n).then(o,i)}o(e.next())}))}function p(e){return h(e())}f("Promise",(function(e){function t(e){this.b=0,this.g=void 0,this.a=[];var t=this.c();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.a=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){null==this.a&&(this.a=[],this.f()),this.a.push(e)},n.prototype.f=function(){var e=this;this.c((function(){e.h()}))};var i=o.setTimeout;n.prototype.c=function(e){i(e,0)},n.prototype.h=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.g(r)}}}this.a=null},n.prototype.g=function(e){this.c((function(){throw e}))},t.prototype.c=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.s),reject:e(this.f)}},t.prototype.s=function(e){if(e===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.v(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.m(e):this.h(e)}},t.prototype.m=function(e){var t=void 0;try{t=e.then}catch(n){return void this.f(n)}"function"==typeof t?this.B(t,e):this.h(e)},t.prototype.f=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.g=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)a.b(this.a[e]);this.a=null}};var a=new n;return t.prototype.v=function(e){var t=this.c();e.ac(t.resolve,t.reject)},t.prototype.B=function(e,t){var n=this.c();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){o(n)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.ac(r(e,i),r(n,o)),a},t.prototype["catch"]=function(e){return this.then(void 0,e)},t.prototype.ac=function(e,t){function n(){switch(r.b){case 1:e(r.g);break;case 2:t(r.g);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var i=d(e),o=i.next();!o.done;o=i.next())r(o.value).ac(t,n)}))},t.all=function(e){var n=d(e),i=n.next();return i.done?r([]):new t((function(e,t){function o(t){return function(n){a[t]=n,s--,0==s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).ac(o(a.length-1),t),i=n.next()}while(!i.done)}))},t})),f("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}}));var m,g="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)m=Object.setPrototypeOf;else{var y;e:{var v={pe:!0},_={};try{_.__proto__=v,y=_.pe;break e}catch(fh){}y=!1}m=y?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var E=m;function b(){this.g=!1,this.c=null,this.o=void 0,this.j=1,this.b=this.f=0,this.i=this.a=null}function T(e){if(e.g)throw new TypeError("Generator is already running");e.g=!0}function S(e,t){e.a={Cd:t,Jd:!0},e.j=e.f||e.b}function w(e,t,n){return e.j=n,{value:t}}function x(e){e.j=0}function I(e,t,n){e.f=t,void 0!=n&&(e.b=n)}function A(e,t){e.f=0,e.b=t||0}function D(e,t){e.j=t,e.f=0}function R(e){e.f=0;var t=e.a.Cd;return e.a=null,t}function M(e){e.i=[e.a],e.f=0,e.b=0}function C(e,t){var n=e.i.splice(0)[0];(n=e.a=e.a||n)?n.Jd?e.j=e.f||e.b:void 0!=n.A&&e.b<n.A?(e.j=n.A,e.a=null):e.j=e.b:e.j=t}function N(e){this.a=new b,this.b=e}function L(e,t){T(e.a);var n=e.a.c;return n?P(e,"return"in n?n["return"]:function(e){return{value:e,done:!0}},t,e.a["return"]):(e.a["return"](t),O(e))}function P(e,t,n,r){try{var i=t.call(e.a.c,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.a.g=!1,i;var o=i.value}catch(a){return e.a.c=null,S(e.a,a),O(e)}return e.a.c=null,r.call(e.a,o),O(e)}function O(e){for(;e.a.j;)try{var t=e.b(e.a);if(t)return e.a.g=!1,{value:t.value,done:!1}}catch(n){e.a.o=void 0,S(e.a,n)}if(e.a.g=!1,e.a.a){if(t=e.a.a,e.a.a=null,t.Jd)throw t.Cd;return{value:t["return"],done:!0}}return{value:void 0,done:!0}}function F(e){this.next=function(t){return T(e.a),e.a.c?t=P(e,e.a.c.next,t,e.a.h):(e.a.h(t),t=O(e)),t},this["throw"]=function(t){return T(e.a),e.a.c?t=P(e,e.a.c["throw"],t,e.a.h):(S(e.a,t),t=O(e)),t},this["return"]=function(t){return L(e,t)},u(),this[Symbol.iterator]=function(){return this}}function k(e,t){return F.prototype=e.prototype,new F(new N(t))}function B(e){if(!(e instanceof Array)){e=d(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}function U(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function H(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var o=e[i];if(t.call(n,o,i,e))return{Gd:i,ke:o}}return{Gd:-1,ke:void 0}}function j(e,t){u(),e instanceof String&&(e+="");var n=0,r={next:function(){if(n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r}function K(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}b.prototype.h=function(e){this.o=e},b.prototype["return"]=function(e){this.a={return:e},this.j=this.b},b.prototype.A=function(e){this.j=e},f("WeakMap",(function(e){function t(e){if(this.a=(s+=Math.random()+1).toString(),e){a(),u(),e=d(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(e){U(e,o)||r(e,o,{value:{}})}function i(e){var t=Object[e];t&&(Object[e]=function(e){return n(e),t(e)})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r["delete"](t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(i){return!1}}())return e;var o="$jscomp_hidden_"+Math.random();i("freeze"),i("preventExtensions"),i("seal");var s=0;return t.prototype.set=function(e,t){if(n(e),!U(e,o))throw Error("WeakMap key fail: "+e);return e[o][this.a]=t,this},t.prototype.get=function(e){return U(e,o)?e[o][this.a]:void 0},t.prototype.has=function(e){return U(e,o)&&U(e[o],this.a)},t.prototype["delete"]=function(e){return!(!U(e,o)||!U(e[o],this.a))&&delete e[o][this.a]},t})),f("Map",(function(e){function t(){var e={};return e.Ea=e.next=e.head=e}function n(e,t){var n=e.a;return c((function(){if(n){for(;n.head!=e.a;)n=n.Ea;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?o.has(t)?n=o.get(t):(n=""+ ++s,o.set(t,n)):n="p_"+t;var r=e.b[n];if(r&&U(e.b,n))for(var i=0;i<r.length;i++){var a=r[i];if(t!==t&&a.key!==a.key||t===a.key)return{id:n,list:r,index:i,X:a}}return{id:n,list:r,index:-1,X:void 0}}function i(e){if(this.b={},this.a=t(),this.size=0,e){e=d(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(d([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&(i=r.next(),!(i.done||4!=i.value[0].x||"t"!=i.value[1]||!r.next().done))}catch(o){return!1}}())return e;a(),u();var o=new WeakMap;i.prototype.set=function(e,t){var n=r(this,e);return n.list||(n.list=this.b[n.id]=[]),n.X?n.X.value=t:(n.X={next:this.a,Ea:this.a.Ea,head:this.a,key:e,value:t},n.list.push(n.X),this.a.Ea.next=n.X,this.a.Ea=n.X,this.size++),this},i.prototype["delete"]=function(e){return e=r(this,e),!(!e.X||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.b[e.id],e.X.Ea.next=e.X.next,e.X.next.Ea=e.X.Ea,e.X.head=null,this.size--,!0)},i.prototype.clear=function(){this.b={},this.a=this.a.Ea=t(),this.size=0},i.prototype.has=function(e){return!!r(this,e).X},i.prototype.get=function(e){return(e=r(this,e).X)&&e.value},i.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},i.prototype.keys=function(){return n(this,(function(e){return e.key}))},i.prototype.values=function(){return n(this,(function(e){return e.value}))},i.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var s=0;return i})),f("Set",(function(e){function t(e){if(this.a=new Map,e){e=d(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.a.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(d([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&i.value[1]==t&&(i=r.next(),!i.done&&i.value[0]!=t&&4==i.value[0].x&&i.value[1]==i.value[0]&&r.next().done)}catch(o){return!1}}()?e:(a(),u(),t.prototype.add=function(e){return this.a.set(e,e),this.size=this.a.size,this},t.prototype["delete"]=function(e){return e=this.a["delete"](e),this.size=this.a.size,e},t.prototype.clear=function(){this.a.clear(),this.size=0},t.prototype.has=function(e){return this.a.has(e)},t.prototype.entries=function(){return this.a.entries()},t.prototype.values=function(){return this.a.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.a.forEach((function(r){return e.call(t,r,r,n)}))},t)})),f("Array.prototype.findIndex",(function(e){return e||function(e,t){return H(this,e,t).Gd}})),f("Array.prototype.keys",(function(e){return e||function(){return j(this,(function(e){return e}))}})),f("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}})),f("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length,i=t||0;for(0>i&&(i=Math.max(i+r,0));i<r;i++){var o=n[i];if(o===e||Object.is(o,e))return!0}return!1}})),f("String.prototype.includes",(function(e){return e||function(e,t){return-1!==K(this,e,"includes").indexOf(e,t||0)}})),f("Array.from",(function(e){return e||function(e,t,n){u(),t=null!=t?t:function(e){return e};var r=[],i=e[Symbol.iterator];if("function"==typeof i)for(e=i.call(e);!(i=e.next()).done;)r.push(t.call(n,i.value));else{i=e.length;for(var o=0;o<i;o++)r.push(t.call(n,e[o]))}return r}})),f("String.prototype.startsWith",(function(e){return e||function(e,t){for(var n=K(this,e,"startsWith"),r=n.length,i=e.length,o=Math.max(0,Math.min(0|t,n.length)),a=0;a<i&&o<r;)if(n[o++]!=e[a++])return!1;return a>=i}})),f("Array.prototype.find",(function(e){return e||function(e,t){return H(this,e,t).ke}}));var V=this;function q(e,t){var n,r=e.split("."),i=V;r[0]in i||!i.execScript||i.execScript("var "+r[0]);for(;r.length&&(n=r.shift());)r.length||void 0===t?i=i[n]?i[n]:i[n]={}:i[n]=t}function G(e,t){function n(){}n.prototype=t.prototype,e.dg=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.qg=function(e,n,r){return t.prototype[n].apply(e,Array.prototype.slice.call(arguments,2))}}function Y(e){this.c=Math.exp(Math.log(.5)/e),this.b=this.a=0}function z(e,t,n){var r=Math.pow(e.c,t);n=n*(1-r)+r*e.a,isNaN(n)||(e.a=n,e.b+=t)}function W(e){return e.a/(1-Math.pow(e.c,e.b))}function X(){this.b=new Y(2),this.c=new Y(5),this.a=0}function $(){}function Q(){}function J(){}V.a=!0,X.prototype.getBandwidthEstimate=function(e){return 128e3>this.a?e:Math.min(W(this.b),W(this.c))},e.console&&e.console.log.bind&&(Q=console.warn.bind(console),$=console.error.bind(console));var Z=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function ee(e){var t;e instanceof ee?(te(this,e.va),this.bb=e.bb,this.ra=e.ra,ne(this,e.zb),this.ja=e.ja,re(this,e.a.clone()),this.Sa=e.Sa):e&&(t=String(e).match(Z))?(te(this,t[1]||"",!0),this.bb=ie(t[2]||""),this.ra=ie(t[3]||"",!0),ne(this,t[4]),this.ja=ie(t[5]||"",!0),re(this,t[6]||"",!0),this.Sa=ie(t[7]||"")):this.a=new fe(null)}function te(e,t,n){e.va=n?ie(t,!0):t,e.va&&(e.va=e.va.replace(/:$/,""))}function ne(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.zb=t}else e.zb=null}function re(e,t,n){t instanceof fe?e.a=t:(n||(t=oe(t,ce)),e.a=new fe(t))}function ie(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function oe(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ae),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ae(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}n=ee.prototype,n.va="",n.bb="",n.ra="",n.zb=null,n.ja="",n.Sa="",n.toString=function(){var e=[],t=this.va;if(t&&e.push(oe(t,se,!0),":"),t=this.ra){e.push("//");var n=this.bb;n&&e.push(oe(n,se,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.zb,null!=t&&e.push(":",String(t))}return(t=this.ja)&&(this.ra&&"/"!=t.charAt(0)&&e.push("/"),e.push(oe(t,"/"==t.charAt(0)?le:ue,!0))),(t=this.a.toString())&&e.push("?",t),(t=this.Sa)&&e.push("#",oe(t,de)),e.join("")},n.resolve=function(e){var t=this.clone();"data"===t.va&&(t=new ee);var n=!!e.va;n?te(t,e.va):n=!!e.bb,n?t.bb=e.bb:n=!!e.ra,n?t.ra=e.ra:n=null!=e.zb;var r=e.ja;if(n)ne(t,e.zb);else if(n=!!e.ja){if("/"!=r.charAt(0))if(this.ra&&!this.ja)r="/"+r;else{var i=t.ja.lastIndexOf("/");-1!=i&&(r=t.ja.substr(0,i+1)+r)}if(".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],a=0;a<r.length;){var s=r[a++];"."==s?i&&a==r.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&a==r.length&&o.push("")):(o.push(s),i=!0)}r=o.join("/")}}return n?t.ja=r:n=""!==e.a.toString(),n?re(t,e.a.clone()):n=!!e.Sa,n&&(t.Sa=e.Sa),t},n.clone=function(){return new ee(this)};var se=/[#\/\?@]/g,ue=/[#\?:]/g,le=/[#\?]/g,ce=/[#\?@]/g,de=/#/g;function fe(e){this.a=e||null}function he(e){this.b=e,this.a=null}function pe(e){this.b=e,this.a=null}function me(e,t){var n=ye();this.i=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.f=null==e.baseDelay?n.baseDelay:e.baseDelay,this.h=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.g=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.a=0,this.b=this.f,(this.c=void 0!==t&&t)&&(this.a=1)}function ge(e){return p((function t(){var n,r;return k(t,(function(t){switch(t.j){case 1:if(e.a>=e.i){if(!e.c)return t["return"](Promise.reject());e.a=1,e.b=e.f}return n=e.a,e.a++,0==n?t["return"]():(r=e.b*(1+(2*Math.random()-1)*e.h),w(t,new Promise((function(e){new pe(e).P(r/1e3)})),2));case 2:e.b*=e.g,x(t)}}))}))}function ye(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}}function ve(e,t,n,r){for(var i=[],o=3;o<arguments.length;++o)i[o-3]=arguments[o];this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1}function _e(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function Ee(e,t){this.promise=e,this.Md=t,this.a=!1}function be(e){return new Ee(Promise.reject(e),(function(){return Promise.resolve()}))}function Te(){var e=Promise.reject(new ve(2,7,7001));return e["catch"]((function(){})),new Ee(e,(function(){return Promise.resolve()}))}function Se(e){return new Ee(Promise.resolve(e),(function(){return Promise.resolve()}))}function we(e){return new Ee(e,(function(){return e["catch"]((function(){}))}))}function xe(e){return new Ee(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function Ie(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then((function(){}))["catch"]((function(){}))})}catch(i){return n.reject(i),function(){return Promise.resolve()}}}function Ae(t,n){for(var r in n=void 0===n?{}:n,n)this[r]=n[r];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function De(){this.a={}}function Re(){this.Fc=new De,this.Yb=this}function Me(e){function t(e){switch(typeof e){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return e;default:if(!e||e.buffer&&e.buffer.constructor==ArrayBuffer)return e;if(n.has(e))return null;var r=e.constructor==Array;if(e.constructor!=Object&&!r)return null;n.add(e);var i,o=r?[]:{};for(i in e)o[i]=t(e[i]);return r&&(o.length=e.length),o}}var n=new Set;return t(e)}function Ce(e,t){return!("number"!==typeof e||"number"!==typeof t||!isNaN(e)||!isNaN(t))||e===t}function Ne(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function Le(e,t){var n=0;return e.forEach((function(e){n+=t(e)?1:0})),n}function Pe(e,t,n){if(n||(n=Ce),e.length!=t.length)return!1;t=t.slice();var r={};e=d(e);for(var i=e.next();!i.done;r={item:r.item},i=e.next()){if(r.item=i.value,i=t.findIndex(function(e){return function(t){return n(e.item,t)}}(r)),-1==i)return!1;t[i]=t[t.length-1],t.pop()}return 0==t.length}function Oe(){this.a=[]}function Fe(e,t){e.a.push(t["finally"]((function(){Ne(e.a,t)})))}function ke(e){Re.call(this),this.f=!1,this.g=new Oe,this.a=new Set,this.b=new Set,this.c=e||null}n=fe.prototype,n.ha=null,n.cc=null,n.add=function(e,t){if(!this.ha&&(this.ha={},this.cc=0,this.a))for(var n=this.a.split("&"),r=0;r<n.length;r++){var i=n[r].indexOf("="),o=null;if(0<=i){var a=n[r].substring(0,i);o=n[r].substring(i+1)}else a=n[r];a=decodeURIComponent(a.replace(/\+/g," ")),o=o||"",this.add(a,decodeURIComponent(o.replace(/\+/g," ")))}return this.a=null,(n=this.ha.hasOwnProperty(e)&&this.ha[e])||(this.ha[e]=n=[]),n.push(t),this.cc++,this},n.toString=function(){if(this.a)return this.a;if(!this.ha)return"";var e,t=[];for(e in this.ha)for(var n=encodeURIComponent(e),r=this.ha[e],i=0;i<r.length;i++){var o=n;""!==r[i]&&(o+="="+encodeURIComponent(r[i])),t.push(o)}return this.a=t.join("&")},n.clone=function(){var e=new fe;if(e.a=this.a,this.ha){var t,n={};for(t in this.ha)n[t]=this.ha[t].concat();e.ha=n,e.cc=this.cc}return e},he.prototype.P=function(t){var n=this;this.stop();var r=!0,i=null;return this.a=function(){e.clearTimeout(i),r=!1},i=e.setTimeout((function(){r&&n.b()}),1e3*t),this},he.prototype.stop=function(){this.a&&(this.a(),this.a=null)},q("shaka.util.Timer",pe),pe.prototype.uc=function(){return this.stop(),this.b(),this},pe.prototype.tickNow=pe.prototype.uc,pe.prototype.P=function(e){var t=this;return this.stop(),this.a=new he((function(){t.b()})).P(e),this},pe.prototype.tickAfter=pe.prototype.P,pe.prototype.Na=function(e){var t=this;return this.stop(),this.a=new he((function(){t.a.P(e),t.b()})).P(e),this},pe.prototype.tickEvery=pe.prototype.Na,pe.prototype.stop=function(){this.a&&(this.a.stop(),this.a=null)},pe.prototype.stop=pe.prototype.stop,q("shaka.util.Error",ve),ve.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},ve.Severity={RECOVERABLE:1,CRITICAL:2},ve.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},ve.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,CAST_RECEIVER_APP_ID_MISSING:8007,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013},_e.prototype.resolve=function(){},_e.prototype.reject=function(){},q("shaka.util.AbortableOperation",Ee),Ee.failed=be,Ee.aborted=Te,Ee.completed=Se,Ee.notAbortable=we,Ee.prototype.abort=function(){return this.a=!0,this.Md()},Ee.prototype.abort=Ee.prototype.abort,Ee.all=xe,Ee.prototype["finally"]=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},Ee.prototype["finally"]=Ee.prototype["finally"],Ee.prototype.U=function(e,t){function n(){return i.reject(new ve(2,7,7001)),r.abort()}var r=this,i=new _e;return this.promise.then((function(t){r.a?i.reject(new ve(2,7,7001)):e?n=Ie(e,t,i):i.resolve(t)}),(function(e){t?n=Ie(t,e,i):i.reject(e)})),new Ee(i,(function(){return n()}))},Ee.prototype.chain=Ee.prototype.U,Ae.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Ae.prototype.stopImmediatePropagation=function(){this.a=!0},Ae.prototype.stopPropagation=function(){},n=De.prototype,n.push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},n.get=function(e){return(e=this.a[e])?e.slice():null},n.getAll=function(){var e,t=[];for(e in this.a)t.push.apply(t,this.a[e]);return t},n.remove=function(e,t){var n=this.a[e];if(n)for(var r=0;r<n.length;++r)n[r]==t&&(n.splice(r,1),--r)},n.forEach=function(e){for(var t in this.a)e(t,this.a[t])},Re.prototype.addEventListener=function(e,t){this.Fc.push(e,t)},Re.prototype.removeEventListener=function(e,t){this.Fc.remove(e,t)},Re.prototype.dispatchEvent=function(e){for(var t=this.Fc.get(e.type)||[],n=0;n<t.length;++n){e.target=this.Yb,e.currentTarget=this.Yb;var r=t[n];try{r.handleEvent?r.handleEvent(e):r.call(this,e)}catch(i){}if(e.a)break}return e.defaultPrevented},Oe.prototype.destroy=function(){var e=[];return this.a.forEach((function(t){t.promise["catch"]((function(){})),e.push(t.abort())})),this.a=[],Promise.all(e)},G(ke,Re),q("shaka.net.NetworkingEngine",ke),ke.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3,TIMING:4},ke.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3};var Be={};function Ue(e,t,n){n=n||3;var r=Be[e];(!r||n>=r.priority)&&(Be[e]={priority:n,Cf:t})}function He(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null}}function je(e,t,n){var r=Se(void 0),i={};e=d(e.a);for(var o=e.next();!o.done;i={ld:i.ld},o=e.next())i.ld=o.value,r=r.U(function(e){return function(){return e.ld(t,n)}}(i));return r.U(void 0,(function(e){if(e&&7001==e.code)throw e;throw new ve(2,1,1006,e)}))}function Ke(e,t,n,r,i,o,a){var s=new ee(n.uris[i]),u=s.va,l=!1;u||(u=location.protocol,u=u.slice(0,-1),te(s,u),n.uris[i]=s.toString()),u=u.toLowerCase();var c,d=(u=Be[u])?u.Cf:null;return d?we(ge(r)).U((function(){return e.f?Te():(c=Date.now(),d(n.uris[i],n,t,(function(n,r,i){e.c&&1==t&&(e.c(n,r),l=!0,a.a=i)})))})).U((function(e){return void 0==e.timeMs&&(e.timeMs=Date.now()-c),{response:e,bf:l}}),(function(s){if(s&&7001==s.code)throw s;if(e.f)return Te();if(s&&1==s.severity)return e.dispatchEvent(new Ae("retry",{error:s instanceof ve?s:null})),i=(i+1)%n.uris.length,Ke(e,t,n,r,i,s,a);throw s||o})):be(new ve(2,1,1e3,s))}function Ve(e,t,n){var r=Se(void 0);e=d(e.b);for(var i=e.next();!i.done;i=e.next())r=r.U(i.value.bind(null,t,n.response));return r.U((function(){return n}),(function(e){if(e&&7001==e.code)throw e;var t=2;throw e instanceof ve&&(t=e.severity),new ve(t,1,1007,e)}))}function qe(){this.a=0}function Ge(e,t,n){Ee.call(this,e,t),this.b=n}ke.registerScheme=Ue,ke.unregisterScheme=function(e){delete Be[e]},ke.prototype.Ef=function(e){this.a.add(e)},ke.prototype.registerRequestFilter=ke.prototype.Ef,ke.prototype.fg=function(e){this.a["delete"](e)},ke.prototype.unregisterRequestFilter=ke.prototype.fg,ke.prototype.ye=function(){this.a.clear()},ke.prototype.clearAllRequestFilters=ke.prototype.ye,ke.prototype.Ff=function(e){this.b.add(e)},ke.prototype.registerResponseFilter=ke.prototype.Ff,ke.prototype.gg=function(e){this.b["delete"](e)},ke.prototype.unregisterResponseFilter=ke.prototype.gg,ke.prototype.ze=function(){this.b.clear()},ke.prototype.clearAllResponseFilters=ke.prototype.ze,ke.defaultRetryParameters=function(){return ye()},ke.makeRequest=He,ke.prototype.destroy=function(){return this.f=!0,this.a.clear(),this.b.clear(),this.g.destroy()},ke.prototype.destroy=ke.prototype.destroy,ke.prototype.request=function(e,t){var n=this,r=new qe;if(this.f){var i=Promise.reject(new ve(2,7,7001));return i["catch"]((function(){})),new Ge(i,(function(){return Promise.resolve()}),r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Me(t.retryParameters):ye(),t.uris=Me(t.uris),i=je(this,e,t);var o=i.U((function(){return Ke(n,e,t,new me(t.retryParameters,!1),0,null,r)})),a=o.U((function(t){return Ve(n,e,t)})),s=Date.now(),u=0;i.promise.then((function(){u=Date.now()-s}),(function(){}));var l=0;return o.promise.then((function(){l=Date.now()}),(function(){})),i=a.U((function(t){var r=Date.now()-l,i=t.response;return i.timeMs+=u,i.timeMs+=r,t.bf||!n.c||i.fromCache||1!=e||n.c(i.timeMs,i.data.byteLength),i}),(function(e){throw e&&(e.severity=2),e})),i=new Ge(i.promise,i.Md,r),Fe(this.g,i),i},ke.prototype.request=ke.prototype.request,ke.NumBytesRemainingClass=qe;var Ye=Ge;if(Ye.prototype=g(Ee.prototype),Ye.prototype.constructor=Ye,E)E(Ye,Ee);else for(var ze in Ee)if("prototype"!=ze)if(Object.defineProperties){var We=Object.getOwnPropertyDescriptor(Ee,ze);We&&Object.defineProperty(Ye,ze,We)}else Ye[ze]=Ee[ze];function Xe(){}function $e(){this.a=new De}function Qe(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.a=Je(e,r),this.target.addEventListener(t,n,this.a)}function Je(e,t){if(void 0==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter((function(e){return!n.has(e)})),Ze(e)?t:t.capture||!1}function Ze(e){var t=et;if(void 0==t){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(i){t=!1}et=t}return t||!1}Ye.dg=Ee.prototype,ke.PendingRequest=Ge,Ge.all=xe,Ge.notAbortable=we,Ge.completed=Se,Ge.aborted=Te,Ge.failed=be,q("shaka.util.IReleasable",Xe),Xe.prototype.release=function(){},q("shaka.util.EventManager",$e),$e.prototype.release=function(){this.$a(),this.a=null},$e.prototype.release=$e.prototype.release,$e.prototype.w=function(e,t,n,r){this.a&&(e=new Qe(e,t,n,r),this.a.push(t,e))},$e.prototype.listen=$e.prototype.w,$e.prototype.da=function(e,t,n,r){function i(r){o.ea(e,t,i),n(r)}var o=this;this.w(e,t,i,r)},$e.prototype.listenOnce=$e.prototype.da,$e.prototype.ea=function(e,t,n){if(this.a){var r=this.a.get(t)||[];r=d(r);for(var i=r.next();!i.done;i=r.next())i=i.value,i.target!=e||n!=i.listener&&n||(i.ea(),this.a.remove(t,i))}},$e.prototype.unlisten=$e.prototype.ea,$e.prototype.$a=function(){if(this.a){var e=this.a.getAll();e=d(e);for(var t=e.next();!t.done;t=e.next())t.value.ea();this.a.a={}}},$e.prototype.removeAll=$e.prototype.$a,Qe.prototype.ea=function(){this.target.removeEventListener(this.type,this.listener,this.a),this.listener=this.target=null,this.a=!1},Qe.prototype.unlisten=Qe.prototype.ea;var et=void 0;function tt(e){if(e=new Uint8Array(e),new DataView(e.buffer,e.byteOffset,e.byteLength).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");return e=vt(e.subarray(4),!0),new ee(e).ra}function nt(e,t,n){function r(e){new DataView(o.buffer).setUint32(a,e.byteLength,!0),a+=4,i(e)}function i(e){o.set(e,a),a+=e.byteLength}if(!n||!n.byteLength)throw new ve(2,6,6015);t="string"==typeof t?new Uint8Array(bt(t,!0)):new Uint8Array(t);var o=new Uint8Array(8+e.byteLength+t.byteLength+n.byteLength),a=0;return i(new Uint8Array(e)),r(t),r(new Uint8Array(n)),o}function rt(e,t){for(var n=[],r=d(e),i=r.next();!i.done;i=r.next())n.push(t(i.value));return n}function it(e,t){for(var n=d(e),r=n.next();!r.done;r=n.next())if(!t(r.value))return!1;return!0}function ot(e){var t=new Map;return Object.keys(e).forEach((function(n){t.set(n,e[n])})),t}function at(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}function st(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function ut(e){var t=[e.mimeType];return ct.forEach((function(n,r){var i=e[r];i&&t.push(n+'="'+i+'"')})),t.join(";")}function lt(e){e=e.split(".");var t=e[0];return e.pop(),[t,e.join(".")]}q("shaka.util.FairPlayUtils.defaultGetContentId",tt),q("shaka.util.FairPlayUtils.initDataTransform",nt);var ct=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function dt(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function ft(e){return""!=pt().canPlayType(e)}function ht(e){return(navigator.userAgent||"").includes(e)}function pt(){return gt||(mt||(mt=new pe((function(){gt=null}))),(gt=document.querySelector("video")||document.querySelector("audio"))||(gt=document.createElement("video")),mt.P(1),gt)}var mt=null,gt=null;function yt(e){if(!e)return"";e=new Uint8Array(e),239==e[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=Tt(e),e=escape(e);try{return decodeURIComponent(e)}catch(t){throw new ve(2,2,2004)}}function vt(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new ve(2,2,2004);if(e instanceof ArrayBuffer)var r=e;else n=new Uint8Array(e.byteLength),n.set(new Uint8Array(e)),r=n.buffer;e=Math.floor(e.byteLength/2),n=new Uint16Array(e),r=new DataView(r);for(var i=0;i<e;i++)n[i]=r.getUint16(2*i,t);return Tt(n)}function _t(e){var t=new Uint8Array(e);if(239==t[0]&&187==t[1]&&191==t[2])return yt(t);if(254==t[0]&&255==t[1])return vt(t.subarray(2),!1);if(255==t[0]&&254==t[1])return vt(t.subarray(2),!0);var n=function(e,t){return e.byteLength<=t||32<=e[t]&&126>=e[t]}.bind(null,t);if(0==t[0]&&0==t[2])return vt(e,!1);if(0==t[1]&&0==t[3])return vt(e,!0);if(n(0)&&n(1)&&n(2)&&n(3))return yt(e);throw new ve(2,2,2003)}function Et(e){e=encodeURIComponent(e),e=unescape(e);for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t.buffer}function bt(e,t){for(var n=new Uint8Array(2*e.length),r=new DataView(n.buffer),i=0;i<e.length;++i)r.setUint16(2*i,e.charCodeAt(i),t);return n.buffer}function Tt(e){if(!St)for(var t=function(e){try{var t=new Uint8Array(e);return B(t),!0}catch(n){return!1}},n={size:65536};0<n.size;n={size:n.size},n.size/=2)if(t(n.size)){St=function(e){return function(t){for(var n="",r=0;r<t.length;r+=e.size)n+=String.fromCharCode.apply(String,B(t.subarray(r,r+e.size)));return n}}(n);break}return St(e)}q("shaka.util.StringUtils.fromUTF8",yt),q("shaka.util.StringUtils.fromUTF16",vt),q("shaka.util.StringUtils.fromBytesAutoDetect",_t),q("shaka.util.StringUtils.toUTF8",Et),q("shaka.util.StringUtils.toUTF16",bt);var St=null,wt={vc:function(t,n){var r=Tt(t);return n=void 0==n||n,r=e.btoa(r).replace(/\+/g,"-").replace(/\//g,"_"),n?r:r.replace(/=*$/,"")}};function xt(e){var t=this;this.B=e,this.v=new Set,this.l=this.h=null,this.R=!1,this.a=null,this.i=new $e,this.b=new Map,this.s=[],this.m=new _e,this.f=null,this.g=function(n){t.m.reject(n),e.onError(n)},this.oa=new Map,this.T=new Map,this.L=new pe((function(){return Wt(t)})),this.c=!1,this.$=new _e,this.D=!1,this.F=[],this.na=!1,this.W=new pe((function(){Jt(t)})).Na(1),this.m["catch"]((function(){}))}function It(e){return p((function t(){var n;return k(t,(function(t){switch(t.j){case 1:return e.i.release(),e.i=null,e.m.reject(),e.W.stop(),e.W=null,e.L.stop(),e.L=null,n=Array.from(e.b.keys()),e.b.clear(),w(t,Promise.all(n.map((function(e){return p((function t(){return k(t,(function(t){switch(t.j){case 1:return I(t,2),w(t,Promise.all([e.close(),e.closed]),4);case 4:D(t,0);break;case 2:R(t),x(t)}}))}))}))),2);case 2:if(!e.l){t.A(3);break}return I(t,4),w(t,e.l.setMediaKeys(null),6);case 6:D(t,5);break;case 4:R(t);case 5:e.l=null;case 3:e.a=null,e.v.clear(),e.h=null,e.s=[],e.f=null,e.g=null,e.B=null,x(t)}}))}))}function At(e,t,n){return e.s=[],e.D=n,Mt(e,t)}function Dt(e,t,n){return e.s=n,e.D=0<n.length,Mt(e,t)}function Rt(e,t,n,r,i,o){var a=new Map;return a.set(t,{audioCapabilities:i,videoCapabilities:o,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t,drmInfos:[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,initData:null,keyIds:null}]}),Ut(e,a)}function Mt(e,t){var n=Ht(e);if(n)for(var r=d(t),i=r.next();!i.done;i=r.next())i.value.drmInfos=[n];for(n=t.some((function(e){return 0<e.drmInfos.length})),n||(i=ot(e.f.servers),en(t,i)),r=d(t),i=r.next();!i.done;i=r.next()){i=d(i.value.drmInfos);for(var o=i.next();!o.done;o=i.next())nn(o.value,ot(e.f.servers),ot(e.f.advanced||{}))}return i=Bt(e,t),i.size?(i=Ut(e,i),n?i:i["catch"]((function(){}))):(e.R=!0,Promise.resolve())}function Ct(e){return p((function t(){var n;return k(t,(function(t){switch(t.j){case 1:if(!(e.h&&e.a&&e.a.serverCertificate&&e.a.serverCertificate.length)){t.A(0);break}return I(t,3),w(t,e.h.setServerCertificate(e.a.serverCertificate),5);case 5:D(t,0);break;case 3:return n=R(t),t["return"](Promise.reject(new ve(2,6,6004,n.message)))}}))}))}function Nt(e,t){return p((function n(){var r,i,o;return k(n,(function(n){switch(n.j){case 1:return w(n,jt(e,t),2);case 2:return r=n.o,r?(i=[],(o=e.b.get(r))&&(o.xa=new _e,i.push(o.xa)),i.push(r.remove()),w(n,Promise.all(i),0)):n["return"]()}}))}))}function Lt(e){var t=e.a?e.a.initData:[];return t.forEach((function(t){return Kt(e,t.initDataType,t.initData)})),e.s.forEach((function(t){return jt(e,t)})),t.length||e.s.length||e.m.resolve(),e.m}function Pt(e,t,n){var r=e.b.values();r=d(r);for(var i=r.next();!i.done;i=r.next())if(wt.ya(n,i.value.initData))return;Kt(e,t,n)}function Ot(e){return e?e.keySystem:""}function Ft(e,t){return!!ht("Edge/")||e.v.has(t)}function kt(e){return e=e.b.keys(),e=rt(e,(function(e){return e.sessionId})),Array.from(e)}function Bt(e,t){for(var n=new Set,r=d(t),i=r.next();!i.done;i=r.next()){var o=d(i.value.drmInfos);for(i=o.next();!i.done;i=o.next())n.add(i.value)}for(r=d(n),i=r.next();!i.done;i=r.next())nn(i.value,ot(e.f.servers),ot(e.f.advanced||{}));o=e.D?"required":"optional";var a=e.D?["persistent-license"]:["temporary"];for(r=new Map,n=d(n),i=n.next();!i.done;i=n.next())i=i.value,r.set(i.keySystem,{audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:o,sessionTypes:a,label:i.keySystem,drmInfos:[]});for(n=d(t),i=n.next();!i.done;i=n.next()){i=i.value,o=i.audio,a=i.video;var s=o?st(o.mimeType,o.codecs):"",u=a?st(a.mimeType,a.codecs):"",l=d(i.drmInfos);for(i=l.next();!i.done;i=l.next()){i=i.value;var c=r.get(i.keySystem);c.drmInfos.push(i),i.distinctiveIdentifierRequired&&(c.distinctiveIdentifier="required"),i.persistentStateRequired&&(c.persistentState="required"),o&&c.audioCapabilities.push({robustness:i.audioRobustness||"",contentType:s}),a&&c.videoCapabilities.push({robustness:i.videoRobustness||"",contentType:u})}}return r}function Ut(e,t){if(1==t.size&&t.has(""))return Promise.reject(new ve(2,6,6e3));for(var n=d(t.values()),r=n.next();!r.done;r=n.next())r=r.value,0==r.audioCapabilities.length&&delete r.audioCapabilities,0==r.videoCapabilities.length&&delete r.videoCapabilities;var i=n=new _e;return[!0,!1].forEach(function(e){var n=this;t.forEach((function(t,r){t.drmInfos.some((function(e){return!!e.licenseServerUri}))==e&&(i=i["catch"](function(){if(!this.c)return navigator.requestMediaKeySystemAccess(r,[t])}.bind(n)))}))}.bind(e)),i=i["catch"]((function(){return Promise.reject(new ve(2,6,6001))})),i=i.then(function(e){if(this.c)return Promise.reject();this.v.clear();var n=e.getConfiguration(),r=n.videoCapabilities||[],i=d(n.audioCapabilities||[]);for(n=i.next();!n.done;n=i.next())this.v.add(n.value.contentType);for(r=d(r),n=r.next();!n.done;n=r.next())this.v.add(n.value.contentType);r=e.keySystem,n=t.get(e.keySystem),i=[];var o=[],a=[],s=[];return tn(n.drmInfos,i,o,a,s),this.a={keySystem:r,licenseServerUri:i[0],distinctiveIdentifierRequired:"required"==n.distinctiveIdentifier,persistentStateRequired:"required"==n.persistentState,audioRobustness:n.audioCapabilities?n.audioCapabilities[0].robustness:"",videoRobustness:n.videoCapabilities?n.videoCapabilities[0].robustness:"",serverCertificate:o[0],initData:a,keyIds:s},this.a.licenseServerUri?e.createMediaKeys():Promise.reject(new ve(2,6,6012,this.a.keySystem))}.bind(e)).then(function(e){if(this.c)return Promise.reject();this.h=e,this.R=!0}.bind(e))["catch"](function(e){if(!this.c)return this.a=null,this.v.clear(),e instanceof ve?Promise.reject(e):Promise.reject(new ve(2,6,6002,e.message))}.bind(e)),n.reject(),i}function Ht(t){if(t=ot(t.f.clearKeys),0==t.size)return null;var n=[],r=[];t.forEach((function(e,t){var i=wt.Mc(t),o=wt.Mc(e);i={kty:"oct",kid:wt.vc(i,!1),k:wt.vc(o,!1)},n.push(i),r.push(i.kid)})),t=JSON.stringify({keys:n});var i=JSON.stringify({kids:r});return i=[{initData:new Uint8Array(Et(i)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:i,keyIds:[]}}function jt(e,t){try{var n=e.h.createSession("persistent-license")}catch(o){var r=new ve(2,6,6005,o.message);return e.g(r),Promise.reject(r)}e.i.w(n,"message",e.Ud.bind(e)),e.i.w(n,"keystatuseschange",e.Sd.bind(e));var i={initData:null,loaded:!1,cd:1/0,xa:null};return e.b.set(n,i),n.load(t).then(function(e){return this.c?Promise.reject():e?(i.loaded=!0,Zt(this)&&this.m.resolve(),n):(this.b["delete"](n),void this.g(new ve(2,6,6013)))}.bind(e),function(e){this.c||(this.b["delete"](n),this.g(new ve(2,6,6005,e.message)))}.bind(e))}function Kt(e,t,n){try{var r=e.D?e.h.createSession("persistent-license"):e.h.createSession()}catch(i){return void e.g(new ve(2,6,6005,i.message))}e.i.w(r,"message",e.Ud.bind(e)),e.i.w(r,"keystatuseschange",e.Sd.bind(e)),e.b.set(r,{initData:n,loaded:!1,cd:1/0,xa:null});try{n=e.f.initDataTransform(n,e.a)}catch(i){return t=i,i instanceof ve||(t=new ve(2,6,6016,i)),void e.g(t)}r.generateRequest(t,n.buffer)["catch"]((function(t){if(!e.c){if(e.b["delete"](r),t.errorCode&&t.errorCode.systemCode){var n=t.errorCode.systemCode;0>n&&(n+=Math.pow(2,32)),n="0x"+n.toString(16)}e.g(new ve(2,6,6006,t.message,t,n))}}))}function Vt(e,t){if(Ot(t).startsWith("com.apple.fps")){var n=t.serverCertificate,r=tt(e);e=nt(e,r,n)}return e}function qt(e,t){var n=t.target,r=e.b.get(n),i=e.a.licenseServerUri,o=e.f.advanced[e.a.keySystem];"individualization-request"==t.messageType&&o&&o.individualizationServer&&(i=o.individualizationServer),i=He([i],e.f.retryParameters),i.body=t.message,i.method="POST",i.licenseRequestType=t.messageType,i.sessionId=n.sessionId,"com.microsoft.playready"!=e.a.keySystem&&"com.chromecast.playready"!=e.a.keySystem||Gt(i),e.a.keySystem.startsWith("com.apple.fps")&&e.f.fairPlayTransform&&Yt(i),e.B.tb.request(2,i).promise.then(function(e){return this.c?Promise.reject():(this.a.keySystem.startsWith("com.apple.fps")&&this.f.fairPlayTransform&&zt(e),n.update(e.data).then(function(){var e=this;this.B.onEvent(new Ae("drmsessionupdate")),r&&(r.xa&&r.xa.resolve(),new pe((function(){r.loaded=!0,Zt(e)&&e.m.resolve()})).P(rn))}.bind(this)))}.bind(e),function(e){this.c||(e=new ve(2,6,6007,e),this.g(e),r&&r.xa&&r.xa.reject(e))}.bind(e))["catch"](function(e){this.c||(e=new ve(2,6,6008,e.message),this.g(e),r&&r.xa&&r.xa.reject(e))}.bind(e))}function Gt(e){var t=vt(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){t=(new DOMParser).parseFromString(t,"application/xml");for(var n=t.getElementsByTagName("HttpHeader"),r=0;r<n.length;++r)e.headers[n[r].querySelector("name").textContent]=n[r].querySelector("value").textContent;e.body=wt.Aa(t.querySelector("Challenge").textContent).buffer}else e.headers["Content-Type"]="text/xml; charset=utf-8"}function Yt(e){var t=new Uint8Array(e.body);t="spc="+wt.vc(t),e.headers["Content-Type"]="application/x-www-form-urlencoded",e.body=Et(t)}function zt(e){try{var t=yt(e.data)}catch(n){return}t=t.trim(),"<ckc>"===t.substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6));try{t=JSON.parse(t).ckc}catch(n){}e.data=wt.Aa(t).buffer}function Wt(e){var t=e.oa,n=e.T;n.clear(),t.forEach((function(e,t){return n.set(t,e)})),t=Array.from(n.values()),t.length&&t.every((function(e){return"expired"==e}))&&e.g(new ve(2,6,6014)),e.B.mc(at(n))}function Xt(){function e(e){return p((function t(){var i,o,a;return k(t,(function(t){switch(t.j){case 1:return I(t,2),w(t,navigator.requestMediaKeySystemAccess(e,n),4);case 4:return i=t.o,a=!!(o=i.getConfiguration().sessionTypes)&&o.includes("persistent-license"),ht("Tizen 3")&&(a=!1),r.set(e,{persistentState:a}),w(t,i.createMediaKeys(),5);case 5:D(t,0);break;case 2:R(t),r.set(e,null),x(t)}}))}))}var t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],n=[{videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:t}],r=new Map;return t="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").map((function(t){return e(t)})),Promise.all(t).then((function(){return at(r)}))}function $t(e,t){var n=t.audio,r=t.video;if(n&&n.encrypted&&!Ft(e,st(n.mimeType,n.codecs))||r&&r.encrypted&&!Ft(e,st(r.mimeType,r.codecs)))return!1;var i=Ot(e.a);return 0==t.drmInfos.length||t.drmInfos.some((function(e){return e.keySystem==i}))}function Qt(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],r=0;r<e.length;r++)for(var i=0;i<t.length;i++)if(e[r].keySystem==t[i].keySystem){var o=e[r];i=t[i];var a=[];a=a.concat(o.initData||[]),a=a.concat(i.initData||[]);var s=[];s=s.concat(o.keyIds),s=s.concat(i.keyIds),n.push({keySystem:o.keySystem,licenseServerUri:o.licenseServerUri||i.licenseServerUri,distinctiveIdentifierRequired:o.distinctiveIdentifierRequired||i.distinctiveIdentifierRequired,persistentStateRequired:o.persistentStateRequired||i.persistentStateRequired,videoRobustness:o.videoRobustness||i.videoRobustness,audioRobustness:o.audioRobustness||i.audioRobustness,serverCertificate:o.serverCertificate||i.serverCertificate,initData:a,keyIds:s});break}return n}function Jt(e){e.b.forEach((function(t,n){var r=t.cd,i=n.expiration;isNaN(i)&&(i=1/0),i!=r&&(e.B.onExpirationUpdated(n.sessionId,i),t.cd=i)}))}function Zt(e){return e=e.b.values(),it(e,(function(e){return e.loaded}))}function en(e,t){var n=[];t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]})}));for(var r=d(e),i=r.next();!i.done;i=r.next())i.value.drmInfos=n}function tn(e,t,n,r,i){e.forEach((function(e){if(t.includes(e.licenseServerUri)||t.push(e.licenseServerUri),e.serverCertificate&&(n.some((function(t){return wt.ya(t,e.serverCertificate)}))||n.push(e.serverCertificate)),e.initData&&e.initData.forEach((function(e){r.some((function(t){return!(!t.keyId||t.keyId!=e.keyId)||t.initDataType==e.initDataType&&wt.ya(t.initData,e.initData)}))||r.push(e)})),e.keyIds)for(var o=0;o<e.keyIds.length;++o)i.includes(e.keyIds[o])||i.push(e.keyIds[o])}))}function nn(t,n,r){!t.keySystem||"org.w3.clearkey"==t.keySystem&&t.licenseServerUri||(n.size&&(n=n.get(t.keySystem)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=[]),(r=r.get(t.keySystem))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=r.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=r.persistentStateRequired),t.videoRobustness||(t.videoRobustness=r.videoRobustness),t.audioRobustness||(t.audioRobustness=r.audioRobustness),t.serverCertificate||(t.serverCertificate=r.serverCertificate)),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==t.keySystem&&(t.keySystem="com.chromecast.playready"))}q("shaka.util.Uint8ArrayUtils.toBase64",wt.vc),wt.Aa=function(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n},q("shaka.util.Uint8ArrayUtils.fromBase64",wt.Aa),wt.Mc=function(t){for(var n=new Uint8Array(t.length/2),r=0;r<t.length;r+=2)n[r/2]=e.parseInt(t.substr(r,2),16);return n},q("shaka.util.Uint8ArrayUtils.fromHex",wt.Mc),wt.wc=function(e){for(var t="",n=0;n<e.length;++n){var r=e[n].toString(16);1==r.length&&(r="0"+r),t+=r}return t},q("shaka.util.Uint8ArrayUtils.toHex",wt.wc),wt.ya=function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0},q("shaka.util.Uint8ArrayUtils.equal",wt.ya),wt.concat=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];for(var r=n=0;r<t.length;++r)n+=t[r].length;n=new Uint8Array(n);for(var i=r=0;i<t.length;++i)n.set(t[i],r),r+=t[i].length;return n},q("shaka.util.Uint8ArrayUtils.concat",wt.concat),n=xt.prototype,n.destroy=function(){var e=this;return p((function t(){return k(t,(function(t){switch(t.j){case 1:return e.c?w(t,e.$,0):(e.c=!0,w(t,It(e),4));case 4:e.$.resolve(),t.A(0)}}))}))},n.configure=function(e){this.f=e},n.Fb=function(e){var t=this;if(!this.h)return this.i.da(e,"encrypted",(function(){t.g(new ve(2,6,6010))})),Promise.resolve();this.l=e,this.i.da(this.l,"play",(function(){for(var e=0;e<t.F.length;e++)qt(t,t.F[e]);t.na=!0,t.F=[]})),e=this.l.setMediaKeys(this.h),e=e["catch"]((function(e){return Promise.reject(new ve(2,6,6003,e.message))}));var n=Ct(this);return Promise.all([e,n]).then((function(){if(t.c)return Promise.reject();Lt(t),t.a.initData.length||t.s.length||t.i.w(t.l,"encrypted",(function(e){return Pt(t,e.initDataType,new Uint8Array(e.initData))}))}))["catch"]((function(e){if(!t.c)return Promise.reject(e)}))},n.Ib=function(){var e=1/0,t=this.b.keys();t=d(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},n.Ud=function(e){this.l&&this.f.delayLicenseRequestUntilPlayed&&this.l.paused&&!this.na?this.F.push(e):qt(this,e)},n.Sd=function(e){e=e.target;var t=this.b.get(e),n=!1;e.keyStatuses.forEach(function(e,r){if("string"==typeof r){var i=r;r=e,e=i}if("com.microsoft.playready"==this.a.keySystem&&16==r.byteLength&&!ht("Tizen")){i=new DataView(r);var o=i.getUint32(0,!0),a=i.getUint16(4,!0),s=i.getUint16(6,!0);i.setUint32(0,o,!1),i.setUint16(4,a,!1),i.setUint16(6,s,!1)}"com.microsoft.playready"==this.a.keySystem&&"status-pending"==e&&(e="usable"),"status-pending"!=e&&(t.loaded=!0),"expired"==e&&(n=!0),i=wt.wc(new Uint8Array(r)),this.oa.set(i,e)}.bind(this));var r=e.expiration-Date.now();(0>r||n&&1e3>r)&&t&&!t.xa&&(this.b["delete"](e),e.close()["catch"]((function(){}))),Zt(this)&&(this.m.resolve(),this.L.P(on))};var rn=5,on=.5;function an(){this.a=new muxjs.mp4.CaptionParser,this.g=[],this.f={}}function sn(){}function un(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function ln(e,t,n){return n=void 0===n?0:n,!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t+n>=e.start(0)}function cn(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,r=e.length-1;0<=r&&e.end(r)>t;--r)n+=e.end(r)-Math.max(e.start(r),t);return n}function dn(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}an.prototype.init=function(e){var t=muxjs.mp4.probe;e=new Uint8Array(e),this.g=t.videoTrackIds(e),this.f=t.timescale(e),this.a.init()},an.prototype.b=function(e,t){var n=new Uint8Array(e);(n=this.a.parse(n,this.g,this.f))&&n.captions&&t(n.captions),this.a.clearParsedCaptions()},an.prototype.c=function(){this.a.resetCaptionStream()},sn.prototype.init=function(){},sn.prototype.b=function(){},sn.prototype.c=function(){};var fn={Ae:function(e,t){return e.reduce(function(e,t,n){return t["catch"](e.bind(null,n))}.bind(null,t),Promise.reject())},Cc:function(e,t){return e.concat(t)},kc:function(){},Ia:function(e){return null!=e}};function hn(e,t){if(0==t.length)return e;var n=t.map((function(e){return new ee(e)}));return e.map((function(e){return new ee(e)})).map((function(e){return n.map(e.resolve.bind(e))})).reduce(fn.Cc,[]).map((function(e){return e.toString()}))}function pn(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:[]}}var mn={Pa:"video",Db:"audio",qa:"text",ng:"application"},gn=1/15;function yn(){this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.b=null,this.g=[],this.c=[],this.f=!1,this.a.on("data",this.i.bind(this)),this.a.on("done",this.h.bind(this))}function vn(t,n){return!(!e.muxjs||"mp2t"!=t.toLowerCase().split(";")[0].split("/")[1])&&(n?MediaSource.isTypeSupported(_n(n,t)):MediaSource.isTypeSupported(_n("audio",t))||MediaSource.isTypeSupported(_n("video",t)))}function _n(e,t){var n=t.replace(/mp2t/i,"mp4");"audio"==e&&(n=n.replace("video","audio"));var r=/avc1\.(66|77|100)\.(\d+)/.exec(n);if(r){var i="avc1.",o=r[1],a=Number(r[2]);i=("66"==o?i+"4200":"77"==o?i+"4d00":i+"6400")+(a>>4).toString(16),i+=(15&a).toString(16),n=n.replace(r[0],i)}return n}function En(e,t){e.f=!0,e.b=new _e,e.g=[],e.c=[];var n=new Uint8Array(t);return e.a.push(n),e.a.flush(),e.f&&e.b.reject(new ve(2,3,3018)),e.b}function bn(e,t,n){this.startTime=e,this.direction=An,this.endTime=t,this.payload=n,this.region=new On,this.position=null,this.positionAlign=Tn,this.size=100,this.textAlign=Sn,this.writingMode=Dn,this.lineInterpretation=Rn,this.line=null,this.lineHeight="",this.lineAlign=Mn,this.displayAlign=xn,this.fontSize=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Nn,this.fontStyle=Ln,this.fontFamily="",this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.spacer=!1}yn.prototype.destroy=function(){return this.a.dispose(),this.a=null,Promise.resolve()},yn.prototype.i=function(e){this.c=e.captions;var t=new Uint8Array(e.data.byteLength+e.initSegment.byteLength);t.set(e.initSegment,0),t.set(e.data,e.initSegment.byteLength),this.g.push(t)},yn.prototype.h=function(){var e={data:wt.concat.apply(null,this.g),captions:this.c};this.b.resolve(e),this.f=!1},q("shaka.text.Cue",bn);var Tn="auto";bn.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Tn};var Sn="center",wn={LEFT:"left",RIGHT:"right",CENTER:Sn,START:"start",END:"end"};bn.textAlign=wn;var xn="after",In={BEFORE:"before",CENTER:"center",AFTER:xn};bn.displayAlign=In;var An="ltr";bn.direction={HORIZONTAL_LEFT_TO_RIGHT:An,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Dn="horizontal-tb";bn.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Dn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Rn=0;bn.lineInterpretation={LINE_NUMBER:Rn,PERCENTAGE:1};var Mn="start",Cn={CENTER:"center",START:Mn,END:"end"};bn.lineAlign=Cn;var Nn=400;bn.fontWeight={NORMAL:Nn,BOLD:700};var Ln="normal",Pn={NORMAL:Ln,ITALIC:"italic",OBLIQUE:"oblique"};function On(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Fn,this.scroll=kn}bn.fontStyle=Pn,bn.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},q("shaka.text.CueRegion",On);var Fn=1;On.units={PX:0,PERCENTAGE:Fn,LINES:2};var kn="";function Bn(e){this.g=null,this.c=e,this.f=this.m=0,this.h=1/0,this.b=this.a=null,this.l="",this.i=new Map}On.scrollMode={NONE:kn,UP:"up"};var Un={};function Hn(t){return!!(Un[t]||e.muxjs&&"application/cea-608"==t)}function jn(e,t){"application/cea-608"!=t&&(e.g=new Un[t])}function Kn(e,t,n,r){return Promise.resolve().then(function(){if(this.g&&this.c)if(null==n||null==r)this.g.parseInit(new Uint8Array(t));else{var e={periodStart:this.m,segmentStart:n,segmentEnd:r};e=this.g.parseMedia(new Uint8Array(t),e).filter(function(e){return e.startTime>=this.f&&e.startTime<this.h}.bind(this)),this.c.append(e),null==this.a&&(this.a=Math.max(n,this.f)),this.b=Math.min(r,this.h)}}.bind(e))}function Vn(e,t,n,r,i){var o=n+" "+r,a=new Map;t=d(t);for(var s=t.next();!s.done;s=t.next()){var u=s.value;s=u.stream,a.has(s)||a.set(s,new Map),a.get(s).has(o)||a.get(s).set(o,[]),u.startTime+=i,u.endTime+=i,u.startTime>=e.f&&u.startTime<e.h&&(u=new bn(u.startTime,u.endTime,u.text),a.get(s).get(o).push(u),s==e.l&&e.c.append([u]))}for(i=d(a.keys()),o=i.next();!o.done;o=i.next())for(o=o.value,e.i.has(o)||e.i.set(o,new Map),t=d(a.get(o).keys()),s=t.next();!s.done;s=t.next())s=s.value,u=a.get(o).get(s),e.i.get(o).set(s,u);e.a=null==e.a?Math.max(n,e.f):Math.min(e.a,Math.max(n,e.f)),e.b=Math.max(e.b,Math.min(r,e.h))}function qn(e,t,n){this.f=e,this.g=n,this.b={},this.a=null,this.c={},this.i=new $e,this.v=!1,this.l={},this.m=t,e=this.s=new _e,t=new MediaSource,this.i.da(t,"sourceopen",e.resolve),this.f.src=Gn(t),this.h=t}q("shaka.text.TextEngine.registerParser",(function(e,t){Un[e]=t})),q("shaka.text.TextEngine.unregisterParser",(function(e){delete Un[e]})),Bn.prototype.destroy=function(){return this.c=this.g=null,this.i.clear(),Promise.resolve()},Bn.prototype.Rc=function(e){var t={periodStart:0,segmentStart:null,segmentEnd:0};try{return this.g.parseMedia(new Uint8Array(e),t)[0].startTime}catch(n){throw new ve(2,2,2009,n)}},Bn.prototype.remove=function(e,t){return Promise.resolve().then(function(){!this.c||!this.c.remove(e,t)||null==this.a||t<=this.a||e>=this.b||(e<=this.a&&t>=this.b?this.a=this.b=null:e<=this.a&&t<this.b?this.a=t:e>this.a&&t>=this.b&&(this.b=e))}.bind(this))},Bn.prototype.se=function(e){this.c.append(e)},Bn.prototype.appendCues=Bn.prototype.se,Bn.prototype.tc=function(e,t){this.l=e;var n=this.i.get(e);if(n)for(var r=d(n.keys()),i=r.next();!i.done;i=r.next())(i=n.get(i.value).filter((function(e){return e.endTime<=t})))&&this.c.append(i)},Bn.prototype.setSelectedClosedCaptionId=Bn.prototype.tc;var Gn=e.URL.createObjectURL;function Yn(e){var t=st(e.mimeType,e.codecs),n=ut(e);return Hn(t)||MediaSource.isTypeSupported(n)||vn(t,e.type)}function zn(e,t){e.a||(e.a=new Bn(e.g)),jn(e.a,t)}function Wn(e){return!e.h||"ended"==e.h.readyState}function Xn(e,t){if("text"==t)var n=e.a.a;else n=Jn(e,t),n=!n||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function $n(e,t){return"text"==t?e.a.b:un(Jn(e,t))}function Qn(e,t,n){return"text"==t?(e=e.a,null==e.b||e.b<n?0:e.b-Math.max(n,e.a)):(e=Jn(e,t),cn(e,n))}function Jn(e,t){try{return e.b[t].buffered}catch(n){return null}}function Zn(t,n,r,i,o,a){return"text"==n?Kn(t.a,r,i,o):t.l[n]?En(t.l[n],r).then(function(e){return this.a||zn(this,"text/vtt"),e.captions&&e.captions.length&&Vn(this.a,e.captions,i,o,this.b.video.timestampOffset),nr(this,n,this.ge.bind(this,n,e.data.buffer))}.bind(t)):(a&&e.muxjs&&(t.a||zn(t,"text/vtt"),null==i&&null==o?t.m.init(r):t.m.b(r,(function(e){e.length&&Vn(t.a,e,i,o,t.b.video.timestampOffset)}))),nr(t,n,t.ge.bind(t,n,r)))}function er(e,t){return"text"==t?e.a?(e.m.c(),e.a.remove(0,1/0)):Promise.resolve():nr(e,t,e.he.bind(e,t,0,e.h.duration))}function tr(e,t,n,r,i){return"text"==t?(e.a.m=n,e=e.a,e.f=r,e.h=i,Promise.resolve()):Promise.all([nr(e,t,e.qe.bind(e,t)),nr(e,t,e.Vf.bind(e,t,n)),nr(e,t,e.Sf.bind(e,t,r,i))])}function nr(e,t,n){if(e.v)return Promise.reject();if(n={start:n,p:new _e},e.c[t].push(n),1==e.c[t].length)try{n.start()}catch(r){"QuotaExceededError"==r.name?n.p.reject(new ve(2,3,3017,t)):n.p.reject(new ve(2,3,3015,r)),ir(e,t)}return n.p}function rr(e,t){if(e.v)return Promise.reject();var n,r=[];for(n in e.b){var i=new _e,o={start:function(e){e.resolve()}.bind(null,i),p:i};e.c[n].push(o),r.push(i),1==e.c[n].length&&o.start()}return Promise.all(r).then(function(){try{t()}catch(r){var e=Promise.reject(new ve(2,3,3015,r))}for(var n in this.b)ir(this,n);return e}.bind(e),function(e){throw e}.bind(e))}function ir(e,t){e.c[t].shift();var n=e.c[t][0];if(n)try{n.start()}catch(r){n.p.reject(new ve(2,3,3015,r)),ir(e,t)}}function or(e,t){return e=sr(e),t=sr(t),e.split("-")[0]==t.split("-")[0]}function ar(e,t){e=sr(e),t=sr(t);var n=e.split("-"),r=t.split("-");return n[0]==r[0]&&1==n.length&&2==r.length}function sr(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=cr.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function ur(e){return e.language?sr(e.language):e.audio&&e.audio.language?sr(e.audio.language):e.video&&e.video.language?sr(e.video.language):"und"}function lr(e,t){for(var n=sr(e),r=new Set,i=d(t),o=i.next();!o.done;o=i.next())r.add(sr(o.value));for(i=d(r),o=i.next();!o.done;o=i.next())if(o=o.value,o==n)return o;for(i=d(r),o=i.next();!o.done;o=i.next())if(o=o.value,ar(o,n))return o;for(i=d(r),o=i.next();!o.done;o=i.next()){var a=o=o.value,s=n;if(a=sr(a),s=sr(s),a=a.split("-"),s=s.split("-"),2==a.length&&2==s.length&&a[0]==s[0])return o}for(r=d(r),o=r.next();!o.done;o=r.next())if(i=o.value,ar(n,i))return i;return null}n=qn.prototype,n.destroy=function(){var e=this;this.v=!0;var t,n=[];for(t in this.c){var r=this.c[t],i=r[0];for(this.c[t]=r.slice(0,1),i&&n.push(i.p["catch"](fn.kc)),i=1;i<r.length;++i)r[i].p.reject()}for(var o in this.a&&n.push(this.a.destroy()),this.g&&n.push(this.g.destroy()),this.l)n.push(this.l[o].destroy());return Promise.all(n).then((function(){e.i&&(e.i.release(),e.i=null),e.f&&(e.f.removeAttribute("src"),e.f.load(),e.f=null),e.h=null,e.a=null,e.g=null,e.b={},e.l={},e.m=null,e.c={}}))},n.init=function(e,t){var n=this;return p((function r(){var i;return k(r,(function(r){switch(r.j){case 1:return i=mn,w(r,n.s,2);case 2:e.forEach((function(e,r){var o=st(e.mimeType,e.codecs);r==i.qa?zn(n,o):(!t&&MediaSource.isTypeSupported(o)||!vn(o,r)||(n.l[r]=new yn,o=_n(r,o)),o=n.h.addSourceBuffer(o),n.i.w(o,"error",n.Wf.bind(n,r)),n.i.w(o,"updateend",n.wb.bind(n,r)),n.b[r]=o,n.c[r]=[])})),x(r)}}))}))},n.Oc=function(e){if(e.total=dn(this.f.buffered),e.audio=dn(Jn(this,"audio")),e.video=dn(Jn(this,"video")),e.text=[],this.a){var t=this.a.a,n=this.a.b;null!=t&&null!=n&&e.text.push({start:t,end:n})}},n.tc=function(e){var t=$n(this,"video")||0;this.a.tc(e,t)},n.remove=function(e,t,n){return"text"==e?this.a.remove(t,n):nr(this,e,this.he.bind(this,e,t,n))},n.flush=function(e){return"text"==e?Promise.resolve():nr(this,e,this.Ee.bind(this,e))},n.endOfStream=function(e){return rr(this,function(){Wn(this)||(e?this.h.endOfStream(e):this.h.endOfStream())}.bind(this))},n.wa=function(e){return rr(this,function(){this.h.duration=e}.bind(this))},n.Y=function(){return this.h.duration},n.ge=function(e,t){this.b[e].appendBuffer(t)},n.he=function(e,t,n){n<=t?this.wb(e):this.b[e].remove(t,n)},n.qe=function(e){var t=this.b[e].appendWindowStart,n=this.b[e].appendWindowEnd;this.b[e].abort(),this.b[e].appendWindowStart=t,this.b[e].appendWindowEnd=n,this.wb(e)},n.Ee=function(e){this.f.currentTime-=.001,this.wb(e)},n.Vf=function(e,t){0>t&&(t+=.001),this.b[e].timestampOffset=t,this.wb(e)},n.Sf=function(e,t,n){this.b[e].appendWindowStart=0,this.b[e].appendWindowEnd=n,this.b[e].appendWindowStart=t,this.wb(e)},n.Wf=function(e){this.c[e][0].p.reject(new ve(2,3,3014,this.f.error?this.f.error.code:0))},n.wb=function(e){var t=this.c[e][0];t&&(t.p.resolve(),ir(this,e))};var cr=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function dr(e,t,n){function r(e,t,n){return e>=t&&e<=n}var i=e.video;return!(i&&i.width&&i.height&&!(r(i.width,t.minWidth,Math.min(t.maxWidth,n.width))&&r(i.height,t.minHeight,Math.min(t.maxHeight,n.height))&&r(i.width*i.height,t.minPixels,t.maxPixels))||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function fr(e,t,n){var r=!1;return e.forEach((function(e){var i=e.allowedByApplication;e.allowedByApplication=dr(e,t,n),i!=e.allowedByApplication&&(r=!0)})),r}function hr(e,t,n,r){r.variants=r.variants.filter((function(r){if(e&&e.R&&!$t(e,r))return!1;var i=r.audio;return r=r.video,!(i&&!Yn(i)||r&&!Yn(r)||i&&t&&!pr(i,t)||r&&n&&!pr(r,n))})),r.textStreams=r.textStreams.filter((function(e){return Hn(st(e.mimeType,e.codecs))}))}function pr(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}function mr(e){var t=e.audio,n=e.video,r=t?t.codecs:null,i=n?n.codecs:null,o=[];i&&o.push(i),r&&o.push(r);var a=[];n&&a.push(n.mimeType),t&&a.push(t.mimeType),a=a[0]||null;var s=[];t&&s.push(t.kind),n&&s.push(n.kind),s=s[0]||null;var u=new Set;return t&&t.roles.forEach((function(e){return u.add(e)})),n&&n.roles.forEach((function(e){return u.add(e)})),e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:s,width:null,height:null,frameRate:null,mimeType:a,codecs:o.join(", "),audioCodec:r,videoCodec:i,primary:e.primary,roles:Array.from(u),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioBandwidth=t.bandwidth||null,e.label=t.label,e.audioRoles=t.roles),e}function gr(e){return{id:e.id,active:!1,type:"text",bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId}}function yr(e){return e.__shaka_id||(e.__shaka_id=vr++),e.__shaka_id}var vr=0;function _r(e){return{id:yr(e),active:!1,type:"",bandwidth:0,language:sr(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}}function Er(e){return e.allowedByApplication&&e.allowedByKeySystem}function br(e){return e.filter((function(e){return Er(e)}))}function Tr(e,t){var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),r=new Map;n=d(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var o=i.audio.channelsCount;r.has(o)||r.set(o,[]),r.get(o).push(i)}return n=Array.from(r.keys()),0==n.length?e:(i=n.filter((function(e){return e<=t})),i.length?r.get(Math.max.apply(null,i)):r.get(Math.min.apply(null,n)))}function Sr(e,t,n){var r=e,i=e.filter((function(e){return e.primary}));i.length&&(r=i);var o=r.length?r[0].language:"";if(r=r.filter((function(e){return e.language==o})),t){var a=lr(sr(t),e.map((function(e){return e.language})));a&&(r=e.filter((function(e){return sr(e.language)==a})))}if(n){if(e=wr(r,n),e.length)return e}else if(e=r.filter((function(e){return 0==e.roles.length})),e.length)return e;return e=r.map((function(e){return e.roles})).reduce(fn.Cc,[]),e.length?wr(r,e[0]):r}function wr(e,t){return e.filter((function(e){return e.roles.includes(t)}))}function xr(e,t,n){for(var r=0;r<n.length;r++)if(n[r].audio==e&&n[r].video==t)return n[r];return null}function Ir(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t}function Ar(){this.h=null,this.f=!1,this.b=new X,this.c=[],this.i=!1,this.a=this.g=null}function Dr(e,t){return e&&(t=t.filter((function(t){return dr(t,e,{width:1/0,height:1/0})}))),t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}function Rr(e,t){this.a=e,this.b=t}function Mr(e,t){var n=new Rr(2,6),r=Lr,i=r.a,o=n.b-i.b;(0<(n.a-i.a||o)?r.c:r.b)(r.a,n,e,t)}function Cr(e,t,n,r){Q([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function Nr(e,t,n,r){$([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(""))}q("shaka.abr.SimpleAbrManager",Ar),Ar.prototype.stop=function(){this.h=null,this.f=!1,this.c=[],this.g=null},Ar.prototype.stop=Ar.prototype.stop,Ar.prototype.init=function(e){this.h=e},Ar.prototype.init=Ar.prototype.init,Ar.prototype.chooseVariant=function(){var e=Dr(this.a.restrictions,this.c),t=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);this.c.length&&!e.length&&(e=Dr(null,this.c),e=[e[0]]);for(var n=e[0]||null,r=0;r<e.length;++r){var i=e[r],o=(e[r+1]||{bandwidth:1/0}).bandwidth/this.a.bandwidthUpgradeTarget;t>=i.bandwidth/this.a.bandwidthDowngradeTarget&&t<=o&&(n=i)}return this.g=Date.now(),n},Ar.prototype.chooseVariant=Ar.prototype.chooseVariant,Ar.prototype.enable=function(){this.f=!0},Ar.prototype.enable=Ar.prototype.enable,Ar.prototype.disable=function(){this.f=!1},Ar.prototype.disable=Ar.prototype.disable,Ar.prototype.segmentDownloaded=function(e,t){var n=this.b;if(!(16e3>t)){var r=8e3*t/e,i=e/1e3;n.a+=t,z(n.b,i,r),z(n.c,i,r)}if(null!=this.g&&this.f)e:{if(this.i){if(Date.now()-this.g<1e3*this.a.switchInterval)break e}else{if(!(128e3<=this.b.a))break e;this.i=!0}n=this.chooseVariant(),this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate),this.h(n)}},Ar.prototype.segmentDownloaded=Ar.prototype.segmentDownloaded,Ar.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate)},Ar.prototype.getBandwidthEstimate=Ar.prototype.getBandwidthEstimate,Ar.prototype.setVariants=function(e){this.c=e},Ar.prototype.setVariants=Ar.prototype.setVariants,Ar.prototype.configure=function(e){this.a=e},Ar.prototype.configure=Ar.prototype.configure,Rr.prototype.toString=function(){return"v"+this.a+"."+this.b};var Lr=null,Pr="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Or="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Fr=["loop","playbackRate"],kr=["pause","play"],Br="abrstatuschanged adaptation buffering emsg error loading streaming texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged unloading variantchanged textchanged".split(" "),Ur={getAssetUri:2,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,usingEmbeddedTextTrack:2,getLoadMode:10},Hr={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},jr=[["getConfiguration","configure"]],Kr=[["isTextTrackVisible","setTextTrackVisibility"]],Vr="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectEmbeddedTextTrack selectTextLanguage selectTextTrack selectVariantTrack setTextTrackVisibility trickPlay".split(" "),qr=["attach","detach","load","unload"];function Gr(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof Ae){var n,r={};for(n in t){var i=t[n];i&&"object"==typeof i?"detail"==n&&(r[n]=i):n in Event||(r[n]=i)}return r}if(t instanceof TimeRanges)for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=0;n<t.length;++n)r.start.push(t.start(n)),r.end.push(t.end(n));else r=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return r}}))}function Yr(e){return JSON.parse(e,(function(e,t){return"NaN"==t?NaN:"-Infinity"==t?-1/0:"Infinity"==t?1/0:t&&"object"==typeof t&&"TimeRanges"==t.__type__?zr(t):t&&"object"==typeof t&&"Uint8Array"==t.__type__?new Uint8Array(t.entries):t}))}function zr(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}function Wr(e,t,n,r,i,o){this.T=e,this.f=new pe(t),this.R=n,this.l=!1,this.F=r,this.L=i,this.B=o,this.b=this.h=!1,this.D="",this.i=null,this.m=this.Qd.bind(this),this.s=this.nf.bind(this),this.a={video:{},player:{}},this.v=0,this.c={},this.g=null}var Xr=!1,$r=null;function Qr(e){var t=$r;t.removeUpdateListener(e.m),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.s)}function Jr(e){for(var t in e.c){var n=e.c[t];delete e.c[t],n.reject(new ve(1,7,7e3))}}function Zr(e){e=Gr(e),$r.sendMessage("urn:x-cast:com.google.shaka.v2",e,(function(){}),J)}function ei(e,t,n){var r=this;Re.call(this),this.c=e,this.b=t,this.i=this.g=this.f=this.l=this.h=null,(this.m=n)&&(this.a=new Wr(n,(function(){return ri(r)}),(function(){return ii(r)}),(function(e,t){return ai(r,e,t)}),(function(){return oi(r)}),(function(){return ni(r)}))),ti(this)}function ti(e){for(var t in e.a&&e.a.init(),e.i=new $e,Pr.forEach(function(e){this.i.w(this.c,e,this.lg.bind(this))}.bind(e)),Br.forEach(function(e){this.i.w(this.b,e,this.Bf.bind(this))}.bind(e)),e.h={},e.c)Object.defineProperty(e.h,t,{configurable:!1,enumerable:!0,get:e.kg.bind(e,t),set:e.mg.bind(e,t)});for(var n in e.l={},e.b)Object.defineProperty(e.l,n,{configurable:!1,enumerable:!0,get:e.Xd.bind(e,n)});e.f=new Re,e.f.Yb=e.h,e.g=new Re,e.g.Yb=e.l}function ni(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.b.ec(),startTime:null};return e.c.pause(),Fr.forEach(function(e){t.video[e]=this.c[e]}.bind(e)),e.c.ended||(t.startTime=e.c.currentTime),jr.forEach(function(e){var n=e[1];e=this.b[e[0]](),t.player[n]=e}.bind(e)),Kr.forEach(function(e){var n=e[1];e=this.b[e[0]](),t.playerAfterLoad[n]=e}.bind(e)),t}function ri(e){e.dispatchEvent(new Ae("caststatuschanged"))}function ii(e){e.f.dispatchEvent(new Ae(e.h.paused?"pause":"play"))}function oi(e){jr.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(e));var t=e.a.get("player","getAssetUri")(),n=e.a.get("video","ended"),r=Promise.resolve(),i=e.c.autoplay,o=null;n||(o=e.a.get("video","currentTime")),t&&(e.c.autoplay=!1,r=e.b.load(t,o));var a={};Fr.forEach(function(e){a[e]=this.a.get("video",e)}.bind(e)),r.then((function(){e.c&&(Fr.forEach(function(e){this.c[e]=a[e]}.bind(e)),Kr.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(e)),e.c.autoplay=i,t&&e.c.play())}),(function(t){e.b.dispatchEvent(new Ae("error",{detail:t}))}))}function ai(e,t,n){e.a.ga()&&("video"==t?e.f.dispatchEvent(n):"player"==t&&e.g.dispatchEvent(n))}function si(e,t,n,r){var i=this;Re.call(this),this.a=e,this.b=t,this.c=new $e,this.D={video:e,player:t},this.s=n||function(){},this.F=r||function(e){return e},this.v=!1,this.h=!0,this.g=0,this.m=!1,this.l=!0,this.i=this.f=null,this.B=new pe((function(){di(i)})),ui(this)}function ui(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=e.Td.bind(e),t.onSenderDisconnected=e.Td.bind(e),t.onSystemVolumeChanged=e.De.bind(e),e.i=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.i.onMessage=e.hf.bind(e),e.f=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.f.onMessage=e.uf.bind(e),t.start(),Pr.forEach(function(e){this.c.w(this.a,e,this.Zd.bind(this,"video"))}.bind(e)),Br.forEach(function(e){this.c.w(this.b,e,this.Zd.bind(this,"player"))}.bind(e)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.b.qd(3840,2160):e.b.qd(1920,1080),e.c.w(e.a,"loadeddata",function(){this.m=!0}.bind(e)),e.c.w(e.b,"loading",function(){this.h=!1,li(this)}.bind(e)),e.c.w(e.a,"playing",function(){this.h=!1,li(this)}.bind(e)),e.c.w(e.a,"pause",function(){li(this)}.bind(e)),e.c.w(e.b,"unloading",function(){this.h=!0,li(this)}.bind(e)),e.c.w(e.a,"ended",function(){var e=this;new pe((function(){e.a&&e.a.ended&&(e.h=!0,li(e))})).P(5)}.bind(e))}function li(e){Promise.resolve().then(function(){this.b&&(this.dispatchEvent(new Ae("caststatuschanged")),fi(this)||mi(this,0))}.bind(e))}function ci(e,t,n){for(var r in t.player)e.b[r](t.player[r]);e.s(n),n=Promise.resolve();var i=e.a.autoplay;t.manifest&&(e.a.autoplay=!1,n=e.b.load(t.manifest,t.startTime)),n.then((function(){if(e.b){for(var n in t.video)e.a[n]=t.video[n];for(var r in t.playerAfterLoad)e.b[r](t.playerAfterLoad[r]);e.a.autoplay=i,t.manifest&&(e.a.play(),mi(e,0))}}),(function(t){e.b.dispatchEvent(new Ae("error",{detail:t}))}))}function di(e){e.B.P(.5);var t={video:{},player:{}};if(Or.forEach(function(e){t.video[e]=this.a[e]}.bind(e)),e.b.V())for(var n in Hr)0==e.g%Hr[n]&&(t.player[n]=e.b[n]());for(var r in Ur)0==e.g%Ur[r]&&(t.player[r]=e.b[r]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),e.m&&(e.g+=1),pi(e,{type:"update",update:t},e.f),fi(e)}function fi(e){return!(!e.l||!e.a.duration&&!e.b.V())&&(hi(e),e.l=!1,!0)}function hi(e){var t={contentId:e.b.ec(),streamType:e.b.V()?"LIVE":"BUFFERED",duration:e.a.duration,contentType:""};mi(e,0,t)}function pi(e,t,n,r){e.v&&(e=Gr(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function mi(e,t,n){var r=e.a.playbackRate,i=gi;i=e.h?i.IDLE:e.b.Tc()?i.le:e.a.paused?i.ne:i.oe,r={mediaSessionId:0,playbackRate:r,playerState:i,currentTime:e.a.currentTime,supportedMediaCommands:15,volume:{level:e.a.volume,muted:e.a.muted}},n&&(r.media=n),pi(e,{requestId:t,type:"MEDIA_STATUS",status:[r]},e.i)}n=Wr.prototype,n.destroy=function(){return Jr(this),$r&&Qr(this),this.f&&(this.f.stop(),this.f=null),this.L=this.F=null,this.b=this.h=!1,this.s=this.m=this.g=this.c=this.a=this.i=null,Promise.resolve()},n.ga=function(){return this.b},n.hd=function(){return this.D},n.init=function(){if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){delete e.__onGCastApiAvailable,this.h=!0,this.f.uc();var t=new chrome.cast.SessionRequest(this.T);t=new chrome.cast.ApiConfig(t,this.Rd.bind(this),this.sf.bind(this),"origin_scoped"),chrome.cast.initialize(t,(function(){}),(function(){})),Xr&&this.f.P(.02),(t=$r)&&t.status!=chrome.cast.SessionStatus.STOPPED?this.Rd(t):$r=null}else e.__onGCastApiAvailable=function(e){e&&this.init()}.bind(this)},n.pd=function(e){this.i=e,this.b&&Zr({type:"appData",appData:this.i})},n.cast=function(e){return this.h?Xr?this.b?Promise.reject(new ve(1,8,8002)):(this.g=new _e,chrome.cast.requestSession(this.ed.bind(this,e),this.Pd.bind(this)),this.g):Promise.reject(new ve(1,8,8001)):Promise.reject(new ve(1,8,8e3))},n.Hb=function(){this.b&&(Jr(this),$r&&(Qr(this),$r.stop((function(){}),(function(){})),$r=null))},n.get=function(e,t){if("video"==e){if(kr.includes(t))return this.ae.bind(this,e,t)}else if("player"==e){if(Hr[t]&&!this.get("player","isLive")())return function(){};if(Vr.includes(t))return this.ae.bind(this,e,t);if(qr.includes(t))return this.Hf.bind(this,e,t);if(Ur[t])return this.Yd.bind(this,e,t)}return this.Yd(e,t)},n.set=function(e,t,n){this.a[e][t]=n,Zr({type:"set",targetName:e,property:t,value:n})},n.ed=function(e,t){$r=t,t.addUpdateListener(this.m),t.addMessageListener("urn:x-cast:com.google.shaka.v2",this.s),this.Qd(),Zr({type:"init",initState:e,appData:this.i}),this.g.resolve()},n.Pd=function(e){var t=8003;switch(e.code){case"cancel":t=8004;break;case"timeout":t=8005;break;case"receiver_unavailable":t=8006}this.g.reject(new ve(2,8,t,e))},n.Yd=function(e,t){return this.a[e][t]},n.ae=function(e,t,n){for(var r=[],i=2;i<arguments.length;++i)r[i-2]=arguments[i];Zr({type:"call",targetName:e,methodName:t,args:r})},n.Hf=function(e,t,n){for(var r=[],i=2;i<arguments.length;++i)r[i-2]=arguments[i];i=new _e;var o=this.v.toString();return this.v++,this.c[o]=i,Zr({type:"asyncCall",targetName:e,methodName:t,args:r,id:o}),i},n.Rd=function(e){var t=this.B();this.g=new _e,this.l=!0,this.ed(t,e)},n.sf=function(e){Xr="available"==e,this.f.uc()},n.Qd=function(){var e=!!$r&&"connected"==$r.status;if(this.b&&!e){for(var t in this.L(),this.a)this.a[t]={};Jr(this)}this.D=(this.b=e)?$r.receiver.friendlyName:"",this.f.uc()},n.nf=function(e,t){var n=Yr(t);switch(n.type){case"event":var r=n.event;this.F(n.targetName,new Ae(r.type,r));break;case"update":for(var i in r=n.update,r)for(var o in n=this.a[i]||{},r[i])n[o]=r[i][o];this.l&&(this.R(),this.l=!1);break;case"asyncComplete":if(i=n.id,n=n.error,o=this.c[i],delete this.c[i],o)if(n){for(r in i=new ve(n.severity,n.category,n.code),n)i[r]=n[r];o.reject(i)}else o.resolve()}},G(ei,Re),q("shaka.cast.CastProxy",ei),ei.prototype.destroy=function(e){return e&&this.a&&this.a.Hb(),this.i&&(this.i.release(),this.i=null),e=[],this.b&&(e.push(this.b.destroy()),this.b=null),this.a&&(e.push(this.a.destroy()),this.a=null),this.l=this.h=this.c=null,Promise.all(e)},ei.prototype.destroy=ei.prototype.destroy,ei.prototype.af=function(){return this.h},ei.prototype.getVideo=ei.prototype.af,ei.prototype.Ue=function(){return this.l},ei.prototype.getPlayer=ei.prototype.Ue,ei.prototype.ue=function(){return!!this.a&&(this.a.h&&Xr)},ei.prototype.canCast=ei.prototype.ue,ei.prototype.ga=function(){return!!this.a&&this.a.ga()},ei.prototype.isCasting=ei.prototype.ga,ei.prototype.hd=function(){return this.a?this.a.hd():""},ei.prototype.receiverName=ei.prototype.hd,ei.prototype.cast=function(){if(!this.a)throw new ve(1,8,8007);var e=ni(this);return this.a.cast(e).then(function(){if(this.b)return this.b.xd()}.bind(this))},ei.prototype.cast=ei.prototype.cast,ei.prototype.pd=function(e){this.a&&this.a.pd(e)},ei.prototype.setAppData=ei.prototype.pd,ei.prototype.cg=function(){if(this.a){var e=this.a;if(e.b){var t=e.B();chrome.cast.requestSession(e.ed.bind(e,t),e.Pd.bind(e))}}},ei.prototype.suggestDisconnect=ei.prototype.cg,ei.prototype.xe=function(e){var t=this;return p((function n(){return k(n,(function(n){switch(n.j){case 1:if(e==t.m)return n["return"]();if(t.m=e,!t.a){n.A(2);break}return t.a.Hb(),w(n,t.a.destroy(),3);case 3:t.a=null;case 2:t.a=new Wr(e,(function(){return ri(t)}),(function(){return ii(t)}),(function(e,n){return ai(t,e,n)}),(function(){return oi(t)}),(function(){return ni(t)})),t.a.init(),x(n)}}))}))},ei.prototype.changeReceiverId=ei.prototype.xe,ei.prototype.Hb=function(){this.a&&this.a.Hb()},ei.prototype.forceDisconnect=ei.prototype.Hb,n=ei.prototype,n.kg=function(e){if("addEventListener"==e)return this.f.addEventListener.bind(this.f);if("removeEventListener"==e)return this.f.removeEventListener.bind(this.f);if(this.a&&this.a.ga()&&0==Object.keys(this.a.a.video).length){var t=this.c[e];if("function"!=typeof t)return t}return this.a&&this.a.ga()?this.a.get("video",e):(e=this.c[e],"function"==typeof e&&(e=e.bind(this.c)),e)},n.mg=function(e,t){this.a&&this.a.ga()?this.a.set("video",e,t):this.c[e]=t},n.lg=function(e){this.a&&this.a.ga()||this.f.dispatchEvent(new Ae(e.type,e))},n.Xd=function(e){if("addEventListener"==e)return this.g.addEventListener.bind(this.g);if("removeEventListener"==e)return this.g.removeEventListener.bind(this.g);if("getMediaElement"==e)return function(){return this.h}.bind(this);if("getSharedConfiguration"==e)return this.a?this.a.get("player","getConfiguration"):this.b.getConfiguration();if("getNetworkingEngine"==e)return this.b.Jb.bind(this.b);if(this.a&&this.a.ga()){if("getManifest"==e||"drmInfo"==e)return function(){return Q(e+"() does not work while casting!"),null};if("getManifestUri"==e)return Mr("getManifestUri",'Please use "getAssetUri" instead.'),this.Xd("getAssetUri");if("attach"==e||"detach"==e)return function(){return Q(e+"() does not work while casting!"),Promise.resolve()}}return this.a&&this.a.ga()&&0==Object.keys(this.a.a.video).length&&Ur[e]||!this.a||!this.a.ga()?this.b[e].bind(this.b):this.a.get("player",e)},n.Bf=function(e){this.a&&this.a.ga()||this.g.dispatchEvent(e)},G(si,Re),q("shaka.cast.CastReceiver",si),si.prototype.isConnected=function(){return this.v},si.prototype.isConnected=si.prototype.isConnected,si.prototype.ef=function(){return this.h},si.prototype.isIdle=si.prototype.ef,si.prototype.destroy=function(){var e=this;return p((function t(){var n,r;return k(t,(function(t){switch(t.j){case 1:return e.c&&(e.c.release(),e.c=null),n=[],e.b&&(n.push(e.b.destroy()),e.b=null),e.B&&(e.B.stop(),e.B=null),e.a=null,e.D=null,e.s=null,e.v=!1,e.h=!0,e.f=null,e.i=null,w(t,Promise.all(n),2);case 2:r=cast.receiver.CastReceiverManager.getInstance(),r.stop(),x(t)}}))}))},si.prototype.destroy=si.prototype.destroy,n=si.prototype,n.Td=function(){this.g=0,this.l=!0,this.v=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,li(this)},n.Zd=function(e,t){this.b&&(di(this),pi(this,{type:"event",targetName:e,event:t},this.f))},n.De=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();e&&pi(this,{type:"update",update:{video:{volume:e.level,muted:e.muted}}},this.f),pi(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.f)},n.uf=function(e){var t=Yr(e.data);switch(t.type){case"init":this.g=0,this.m=!1,this.l=!0,ci(this,t.initState,t.appData),di(this);break;case"appData":this.s(t.appData);break;case"set":var n=t.targetName,r=t.property;if(t=t.value,"video"==n){var i=cast.receiver.CastReceiverManager.getInstance();if("volume"==r){i.setSystemVolumeLevel(t);break}if("muted"==r){i.setSystemVolumeMuted(t);break}}this.D[n][r]=t;break;case"call":n=this.D[t.targetName],n[t.methodName].apply(n,t.args);break;case"asyncCall":n=t.targetName,r=t.methodName,"player"==n&&"load"==r&&(this.g=0,this.m=!1),i=t.id,e=e.senderId;var o=this.D[n];t=o[r].apply(o,t.args),"player"==n&&"load"==r&&(t=t.then(function(){this.l=!0}.bind(this))),t.then(this.de.bind(this,e,i,null),this.de.bind(this,e,i))}},n.hf=function(e){var t=Yr(e.data);switch(t.type){case"PLAY":this.a.play(),mi(this,0);break;case"PAUSE":this.a.pause(),mi(this,0);break;case"SEEK":e=t.currentTime;var n=t.resumeState;null!=e&&(this.a.currentTime=Number(e)),n&&"PLAYBACK_START"==n?(this.a.play(),mi(this,0)):n&&"PLAYBACK_PAUSE"==n&&(this.a.pause(),mi(this,0));break;case"STOP":this.b.xd().then(function(){this.b&&mi(this,0)}.bind(this));break;case"GET_STATUS":mi(this,Number(t.requestId));break;case"VOLUME":n=t.volume,e=n.level,n=n.muted;var r=this.a.volume,i=this.a.muted;null!=e&&(this.a.volume=Number(e)),null!=n&&(this.a.muted=n),r==this.a.volume&&i==this.a.muted||mi(this,0);break;case"LOAD":this.g=0,this.l=this.m=!1,e=t.media,n=t.currentTime,r=this.F(e.contentId),i=t.autoplay||!0,this.s(e.customData),i&&(this.a.autoplay=!0),this.b.load(r,n).then(function(){this.b&&hi(this)}.bind(this))["catch"](function(e){var n="LOAD_FAILED";7==e.category&&7e3==e.code&&(n="LOAD_CANCELLED"),pi(this,{requestId:Number(t.requestId),type:n},this.i)}.bind(this));break;default:pi(this,{requestId:Number(t.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.i)}},n.de=function(e,t,n){this.b&&pi(this,{type:"asyncComplete",id:t,error:n},this.f,e)};var gi={IDLE:"IDLE",oe:"PLAYING",le:"BUFFERING",ne:"PAUSED"};function yi(e,t){this.I=e,this.b=t==vi,this.a=0}q("shaka.util.DataViewReader",yi);var vi=1;function _i(){throw new ve(2,3,3e3)}function Ei(){this.c=[],this.b=[],this.a=!1}function bi(e){for(var t=null!=e.flags?12:8;e.reader.sa()&&!e.parser.a;)e.parser.oc(e.start+t,e.reader,e.partialOkay)}function Ti(e){for(var t=null!=e.flags?12:8,n=e.reader.G();0<n&&!e.parser.a;--n)e.parser.oc(e.start+t,e.reader,e.partialOkay)}function Si(e){return function(t){e(t.reader.Za(t.reader.I.byteLength-t.reader.ba()))}}function wi(e){for(var t=0,n=0;n<e.length;n++)t=t<<8|e.charCodeAt(n);return t}function xi(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Ii(e){var t=this;this.b=[],this.a=[],this.data=[],(new Ei).H("moov",bi).fa("pssh",(function(e){if(!(1<e.version)){var n=e.reader.I;if(n=new Uint8Array(n.buffer,n.byteOffset-12,e.size),t.data.push(n),t.b.push(wt.wc(e.reader.Za(16))),0<e.version){n=e.reader.G();for(var r=0;r<n;++r){var i=wt.wc(e.reader.Za(16));t.a.push(i)}}}})).parse(e)}function Ai(e){if(!e)return e;var t=new Ii(e);if(1>=t.data.length)return e;e=[];var n={};t=d(t.data);for(var r=t.next();!r.done;n={hc:n.hc},r=t.next())n.hc=r.value,e.some(function(e){return function(t){return wt.ya(t,e.hc)}}(n))||e.push(n.hc);return wt.concat.apply(wt,B(e))}yi.Endianness={og:0,pg:vi},yi.prototype.sa=function(){return this.a<this.I.byteLength},yi.prototype.hasMoreData=yi.prototype.sa,yi.prototype.ba=function(){return this.a},yi.prototype.getPosition=yi.prototype.ba,yi.prototype.Ke=function(){return this.I.byteLength},yi.prototype.getLength=yi.prototype.Ke,yi.prototype.la=function(){try{var e=this.I.getUint8(this.a);return this.a+=1,e}catch(t){_i()}},yi.prototype.readUint8=yi.prototype.la,yi.prototype.Qb=function(){try{var e=this.I.getUint16(this.a,this.b);return this.a+=2,e}catch(t){_i()}},yi.prototype.readUint16=yi.prototype.Qb,yi.prototype.G=function(){try{var e=this.I.getUint32(this.a,this.b);return this.a+=4,e}catch(t){_i()}},yi.prototype.readUint32=yi.prototype.G,yi.prototype.$d=function(){try{var e=this.I.getInt32(this.a,this.b);return this.a+=4,e}catch(t){_i()}},yi.prototype.readInt32=yi.prototype.$d,yi.prototype.Ab=function(){try{if(this.b)var e=this.I.getUint32(this.a,!0),t=this.I.getUint32(this.a+4,!0);else t=this.I.getUint32(this.a,!1),e=this.I.getUint32(this.a+4,!1)}catch(n){_i()}if(2097151<t)throw new ve(2,3,3001);return this.a+=8,t*Math.pow(2,32)+e},yi.prototype.readUint64=yi.prototype.Ab,yi.prototype.Za=function(e){this.a+e>this.I.byteLength&&_i();var t=new Uint8Array(this.I.buffer,this.I.byteOffset+this.a,e);return this.a+=e,t},yi.prototype.readBytes=yi.prototype.Za,yi.prototype.M=function(e){this.a+e>this.I.byteLength&&_i(),this.a+=e},yi.prototype.skip=yi.prototype.M,yi.prototype.be=function(e){this.a<e&&_i(),this.a-=e},yi.prototype.rewind=yi.prototype.be,yi.prototype.seek=function(e){(0>e||e>this.I.byteLength)&&_i(),this.a=e},yi.prototype.seek=yi.prototype.seek,yi.prototype.gd=function(){for(var e=this.a;this.sa()&&0!=this.I.getUint8(this.a);)this.a+=1;return e=new Uint8Array(this.I.buffer,this.I.byteOffset+e,this.a-e),this.a+=1,yt(e)},yi.prototype.readTerminatedString=yi.prototype.gd,q("shaka.util.Mp4Parser",Ei),Ei.prototype.H=function(e,t){var n=wi(e);return this.c[n]=0,this.b[n]=t,this},Ei.prototype.box=Ei.prototype.H,Ei.prototype.fa=function(e,t){var n=wi(e);return this.c[n]=1,this.b[n]=t,this},Ei.prototype.fullBox=Ei.prototype.fa,Ei.prototype.stop=function(){this.a=!0},Ei.prototype.stop=Ei.prototype.stop,Ei.prototype.parse=function(e,t){var n=new Uint8Array(e);for(n=new yi(new DataView(n.buffer,n.byteOffset,n.byteLength),0),this.a=!1;n.sa()&&!this.a;)this.oc(0,n,t)},Ei.prototype.parse=Ei.prototype.parse,Ei.prototype.oc=function(e,t,n){var r=t.ba(),i=t.G(),o=t.G();switch(i){case 0:i=t.I.byteLength-r;break;case 1:i=t.Ab()}var a=this.b[o];if(a){var s=null,u=null;1==this.c[o]&&(u=t.G(),s=u>>>24,u&=16777215),o=r+i,n&&o>t.I.byteLength&&(o=t.I.byteLength),o-=t.ba(),t=0<o?t.Za(o):new Uint8Array(0),t=new yi(new DataView(t.buffer,t.byteOffset,t.byteLength),0),a({parser:this,partialOkay:n||!1,version:s,flags:u,reader:t,size:i,start:r+e})}else t.M(Math.min(r+i-t.ba(),t.I.byteLength-t.ba()))},Ei.prototype.parseNext=Ei.prototype.oc,Ei.children=bi,Ei.sampleDescription=Ti,Ei.allData=Si,Ei.typeToString=xi,(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");var Di={dc:function(e,t){var n=Di.O(e,t);return 1!=n.length?null:n[0]},Kc:function(e,t,n){return e=Di.Dd(e,t,n),1!=e.length?null:e[0]},O:function(e,t){return Array.prototype.filter.call(e.childNodes,(function(e){return e instanceof Element&&e.tagName==t}))},Dd:function(e,t,n){return Array.prototype.filter.call(e.childNodes,(function(e){return e instanceof Element&&e.localName==n&&e.namespaceURI==t}))},getAttributeNS:function(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null},fc:function(e){return Array.prototype.every.call(e.childNodes,(function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}))?e.textContent.trim():null},K:function(e,t,n,r){r=void 0===r?null:r;var i=null;return e=e.getAttribute(t),null!=e&&(i=n(e)),null==i?r:i},yf:function(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null},Da:function(e){return e?(e=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e),e?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null):null},qc:function(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null},parseInt:function(e){return e=Number(e),0===e%1?e:null},pc:function(e){return e=Number(e),0===e%1&&0<e?e:null},xb:function(e){return e=Number(e),0===e%1&&0<=e?e:null},parseFloat:function(e){return e=Number(e),isNaN(e)?null:e},Ce:function(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(e)?null:e},Wd:function(e,t){var n=new DOMParser;try{var r=n.parseFromString(e,"text/xml")}catch(o){}if(r&&r.documentElement.tagName==t)var i=r.documentElement;return i&&0<i.getElementsByTagName("parsererror").length?null:i},Vd:function(e,t){try{var n=yt(e);return Di.Wd(n,t)}catch(r){}}},Ri=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime");function Mi(e,t,n){var r=ki(e),i=null;e=[];var o=[],a=new Set(r.map((function(e){return e.keyId})));if(a["delete"](null),1<a.size)throw new ve(2,4,4010);if(n||(o=r.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.ce||(i=e.init||i,!1)})),o.length&&(e=Pi(i,t,o),0==e.length&&(e=[pn("",i)]))),r.length&&(n||!o.length))for(e=[],t=d(Ri.values()),n=t.next();!n.done;n=t.next())n=n.value,"org.w3.clearkey"!=n&&e.push(pn(n,i));if(a=Array.from(a)[0]||null)for(t=d(e),n=t.next();!n.done;n=t.next())for(n=d(n.value.initData),r=n.next();!r.done;r=n.next())r.value.keyId=a;return{Bd:a,rg:i,drmInfos:e,Ed:!0}}function Ci(e,t,n,r){var i=Mi(e,t,r);if(n.Ed)e=1==n.drmInfos.length&&!n.drmInfos[0].keySystem,t=0==i.drmInfos.length,(0==n.drmInfos.length||e&&!t)&&(n.drmInfos=i.drmInfos),n.Ed=!1;else if(0<i.drmInfos.length&&(n.drmInfos=n.drmInfos.filter((function(e){return i.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==n.drmInfos.length))throw new ve(2,4,4008);return i.Bd||n.Bd}function Ni(e){var t=0,n=new DataView(e).getUint32(t,!0);if(n!==e.byteLength)return[];t+=6,n=[];for(var r=new DataView(e);t<e.byteLength-1;){var i=r.getUint16(t,!0);t+=2;var o=r.getUint16(t,!0);t+=2;var a=new Uint8Array(e,t,o);n.push({type:i,value:a}),t+=o}return n}function Li(e){return(e=e.querySelector("DATA > LA_URL"))?e.textContent:""}function Pi(e,t,n){var r=[];n=d(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var o=Ri.get(i.ce);if(o){var a;if(a=Di.Kc(i.node,"urn:microsoft:playready","pro")){a=wt.Aa(a.textContent);var s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),u=a.length,l=s.length+16+u,c=new ArrayBuffer(l),f=new Uint8Array(c);c=new DataView(c);var h=0;c.setUint32(h,l),h+=4,c.setUint32(h,1886614376),h+=4,c.setUint32(h,0),h+=4,f.set(s,h),h+=s.length,c.setUint32(h,u),h+=4,f.set(a,h),a=[{initData:f,initDataType:"cenc",keyId:i.keyId}]}else a=null;a=pn(o,i.init||e||a),(o=Fi.get(o))&&(a.licenseServerUri=o(i)),r.push(a)}else for(i=t(i.node)||[],i=d(i),o=i.next();!o.done;o=i.next())r.push(o.value)}return r}var Oi,Fi=(new Map).set("com.widevine.alpha",(function(e){return(e=Di.Kc(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",(function(e){return e=Di.Kc(e.node,"urn:microsoft:playready","pro"),e?(e=wt.Aa(e.textContent),e=Ni(e.buffer).filter((function(e){return 1===e.type}))[0],e?(e=vt(e.value,!0),(e=Di.Wd(e,"WRMHEADER"))?Li(e):""):""):""}));function ki(e){var t=[];e=d(e);for(var n=e.next();!n.done;n=e.next())(n=Bi(n.value))&&t.push(n);return t}function Bi(e){var t=e.getAttribute("schemeIdUri"),n=Di.getAttributeNS(e,"urn:mpeg:cenc:2013","default_KID"),r=Di.Dd(e,"urn:mpeg:cenc:2013","pssh").map(Di.fc);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new ve(2,4,4009);var i=[];try{i=r.map((function(e){return{initDataType:"cenc",initData:wt.Aa(e),keyId:null}}))}catch(o){throw new ve(2,4,4007)}return{node:e,ce:t,keyId:n,init:0<i.length?i:null}}function Ui(t,n,r,i,o){var a={RepresentationID:n,Number:r,Bandwidth:i,Time:o};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,n,r,i){if("$$"==t)return"$";var o=a[n];if(null==o)return t;switch("RepresentationID"==n&&r&&(r=void 0),"Time"==n&&(o=Math.round(o)),i){case void 0:case"d":case"i":case"u":t=o.toString();break;case"o":t=o.toString(8);break;case"x":t=o.toString(16);break;case"X":t=o.toString(16).toUpperCase();break;default:t=o.toString()}return r=e.parseInt(r,10)||1,Array(Math.max(0,r-t.length)+1).join("0")+t}))}function Hi(e,t){var n=ji(e,t,"timescale"),r=1;n&&(r=Di.pc(n)||1),n=ji(e,t,"duration"),(n=Di.pc(n||""))&&(n/=r);var i=ji(e,t,"startNumber"),o=Number(ji(e,t,"presentationTimeOffset"))||0,a=Di.xb(i||"");null!=i&&null!=a||(a=1);var s=Ki(e,t,"SegmentTimeline");if(i=null,s){i=r;var u=e.S.duration||1/0;s=Di.O(s,"S");for(var l=[],c=0,d=0;d<s.length;++d){var f=s[d],h=Di.K(f,"t",Di.xb),p=Di.K(f,"d",Di.xb);if(f=Di.K(f,"r",Di.parseInt),null!=h&&(h-=o),!p)break;if(h=null!=h?h:c,f=f||0,0>f)if(d+1<s.length){if(f=Di.K(s[d+1],"t",Di.xb),null==f)break;if(h>=f)break;f=Math.ceil((f-h)/p)-1}else{if(1/0==u)break;if(h/i>=u)break;f=Math.ceil((u*i-h)/p)-1}0<l.length&&h!=c&&(l[l.length-1].end=h/i);for(var m=0;m<=f;++m)c=h+p,l.push({start:h/i,end:c/i,hg:h}),h=c}i=l}return{timescale:r,Z:n,ab:a,ma:o/r||0,yd:o,N:i}}function ji(e,t,n){return[t(e.C),t(e.ca),t(e.ka)].filter(fn.Ia).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function Ki(e,t,n){return[t(e.C),t(e.ca),t(e.ka)].filter(fn.Ia).map((function(e){return Di.dc(e,n)})).reduce((function(e,t){return e||t}))}function Vi(e,t,n,r,i,o){for(var a=Di.getAttributeNS(e,"http://www.w3.org/1999/xlink","href"),s=Di.getAttributeNS(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=0;u<e.attributes.length;u++){var l=e.attributes[u];"http://www.w3.org/1999/xlink"==l.namespaceURI&&(e.removeAttributeNS(l.namespaceURI,l.localName),--u)}if(5<=o)return be(new ve(2,4,4028));if("onLoad"!=s)return be(new ve(2,4,4027));var c=hn([r],[a]);return i.request(0,He(c,t)).U((function(r){if(r=Di.Vd(r.data,e.tagName),!r)return be(new ve(2,4,4001,a));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;r.childNodes.length;){var s=r.childNodes[0];r.removeChild(s),e.appendChild(s)}for(s=0;s<r.attributes.length;s++){var u=r.attributes[s].nodeName,l=r.getAttribute(u);e.setAttribute(u,l)}return qi(e,t,n,c[0],i,o+1)}))}function qi(e,t,n,r,i,o){if(o=void 0===o?0:o,Di.getAttributeNS(e,"http://www.w3.org/1999/xlink","href")){var a=Vi(e,t,n,r,i,o);return n&&(a=a.U(void 0,(function(){return qi(e,t,n,r,i,o)}))),a}a=[];for(var s=0;s<e.childNodes.length;s++){var u=e.childNodes[s];u instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Di.getAttributeNS(u,"http://www.w3.org/1999/xlink","href")?(e.removeChild(u),--s):"SegmentTimeline"!=u.tagName&&a.push(qi(u,t,n,r,i,o)))}return xe(a).U((function(){return e}))}function Gi(e,t,n){this.c=e,this.b=t,this.a=n}function Yi(e,t,n,r,i,o){this.position=e,this.startTime=t,this.endTime=n,this.c=r,this.b=i,this.a=o}function zi(e,t,n,r){var i,o=(new Ei).fa("sidx",(function(e){i=Wi(t,r,n,e)}));if(e&&o.parse(e),i)return i;throw new ve(2,3,3004)}function Wi(e,t,n,r){var i=[];r.reader.M(4);var o=r.reader.G();if(0==o)throw new ve(2,3,3005);if(0==r.version)var a=r.reader.G(),s=r.reader.G();else a=r.reader.Ab(),s=r.reader.Ab();r.reader.M(2);var u=r.reader.Qb();for(e=e+r.size+s,s=0;s<u;s++){var l=r.reader.G(),c=(2147483648&l)>>>31;l&=2147483647;var d=r.reader.G();if(r.reader.M(4),1==c)throw new ve(2,3,3006);i.push(new Yi(i.length,a/o-t,(a+d)/o-t,(function(){return n}),e,e+l-1)),a+=d,e+=l}return r.parser.stop(),i}function Xi(e){this.a=e}function $i(e,t){for(;e.a.length;){if(!(e.a[e.a.length-1].startTime>=t))break;e.a.pop()}for(;e.a.length;){if(!(0>=e.a[0].endTime))break;e.a.shift()}if(0!=e.a.length){var n=e.a[e.a.length-1];e.a[e.a.length-1]=new Yi(n.position,n.startTime,t,n.c,n.b,n.a)}}function Qi(e){this.b=e,this.a=new yi(e,0),Oi||(Oi=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function Ji(e){var t=Zi(e);if(7<t.length)throw new ve(2,3,3002);for(var n=0,r=0;r<t.length;r++)n=256*n+t[r];t=n,n=Zi(e);e:{r=wt.ya;for(var i=0;i<Oi.length;i++)if(r(n,Oi[i])){r=!0;break e}r=!1}if(r)n=e.b.byteLength-e.a.ba();else{if(8==n.length&&224&n[1])throw new ve(2,3,3001);for(r=n[0]&(1<<8-n.length)-1,i=1;i<n.length;i++)r=256*r+n[i];n=r}return n=e.a.ba()+n<=e.b.byteLength?n:e.b.byteLength-e.a.ba(),r=new DataView(e.b.buffer,e.b.byteOffset+e.a.ba(),n),e.a.M(n),new eo(t,r)}function Zi(e){var t,n=e.a.la();for(t=1;8>=t&&!(n&1<<8-t);t++);if(8<t)throw new ve(2,3,3002);var r=new Uint8Array(t);for(r[0]=n,n=1;n<t;n++)r[n]=e.a.la();return r}function eo(e,t){this.id=e,this.a=t}function to(e){if(8<e.a.byteLength)throw new ve(2,3,3002);if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new ve(2,3,3001);for(var t=0,n=0;n<e.a.byteLength;n++){var r=e.a.getUint8(n);t=256*t+r}return t}function no(){}function ro(e,t,n,r,i,o){function a(){return i}var s=[];e=new Qi(e.a);for(var u=null,l=null;e.sa();){var c=Ji(e);if(187==c.id){var d=io(c);d&&(c=n*d.ig,d=t+d.Gf,null!=u&&s.push(new Yi(s.length,u-o,c-o,a,l,d-1)),u=c,l=d)}}return null!=u&&s.push(new Yi(s.length,u-o,r-o,a,l,null)),s}function io(e){var t=new Qi(e.a);if(e=Ji(t),179!=e.id)throw new ve(2,3,3013);if(e=to(e),t=Ji(t),183!=t.id)throw new ve(2,3,3012);t=new Qi(t.a);for(var n=0;t.sa();){var r=Ji(t);if(241==r.id){n=to(r);break}}return{ig:e,Gf:n}}function oo(e,t){var n=Ki(e,t,"Initialization");if(!n)return null;var r=e.C.pa,i=n.getAttribute("sourceURL");i&&(r=hn(e.C.pa,[i])),i=0;var o=null;return(n=Di.K(n,"range",Di.qc))&&(i=n.start,o=n.end),new Gi((function(){return r}),i,o)}function ao(e,t){var n=Number(ji(e,uo,"presentationTimeOffset"))||0,r=ji(e,uo,"timescale"),i=1;r&&(i=Di.pc(r)||1),n=n/i||0,r=oo(e,uo);var o=e.C.contentType;if(i=e.C.mimeType.split("/")[1],"text"!=o&&"mp4"!=i&&"webm"!=i)throw new ve(2,4,4006);if("webm"==i&&!r)throw new ve(2,4,4005);o=Ki(e,uo,"RepresentationIndex");var a=ji(e,uo,"indexRange"),s=e.C.pa;if(a=Di.qc(a||""),o){var u=o.getAttribute("sourceURL");u&&(s=hn(e.C.pa,[u])),a=Di.K(o,"range",Di.qc,a)}if(!a)throw new ve(2,4,4002);return i=so(e,t,r,s,a.start,a.end,i,n),{createSegmentIndex:i.createSegmentIndex,findSegmentPosition:i.findSegmentPosition,getSegmentReference:i.getSegmentReference,initSegmentReference:r,ma:n}}function so(e,t,n,r,i,o,a,s){var u=e.presentationTimeline,l=!e.mb||!e.S.Vc,c=e.S.start,d=e.S.duration,f=t,h=null;return{createSegmentIndex:function(){var e=[f(r,i,o),"webm"==a?f(n.c(),n.b,n.a):null];return f=null,Promise.all(e).then((function(e){var t=e[0];e=e[1]||null,t="mp4"==a?zi(t,i,r,s):(new no).parse(t,e,r,s),u.ub(t,c),h=new Xi(t),l&&$i(h,d)}))},findSegmentPosition:function(e){return h.find(e)},getSegmentReference:function(e){return h.get(e)}}}function uo(e){return e.Rb}function lo(e,t){var n=oo(e,co),r=ho(e),i=Hi(e,co),o=i.ab;0==o&&(o=1);var a=0;if(i.Z?a=i.Z*(o-1):i.N&&0<i.N.length&&(a=i.N[0].start),r={Z:i.Z,startTime:a,ab:o,ma:i.ma,N:i.N,sb:r},!r.Z&&!r.N&&1<r.sb.length)throw new ve(2,4,4002);if(!r.Z&&!e.S.duration&&!r.N&&1==r.sb.length)throw new ve(2,4,4002);if(r.N&&0==r.N.length)throw new ve(2,4,4002);return o=i=null,e.ka.id&&e.C.id&&(o=e.ka.id+","+e.C.id,i=t[o]),a=fo(e.S.duration,r.ab,e.C.pa,r),i?(i.Yc(a),o=e.presentationTimeline.Lb(),i.Hc(o-e.S.start)):(e.presentationTimeline.ub(a,e.S.start),i=new Xi(a),o&&e.mb&&(t[o]=i)),e.mb&&e.S.Vc||$i(i,e.S.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:i.find.bind(i),getSegmentReference:i.get.bind(i),initSegmentReference:n,ma:r.ma}}function co(e){return e.La}function fo(e,t,n,r){var i=r.sb.length;r.N&&r.N.length!=r.sb.length&&(i=Math.min(r.N.length,r.sb.length));for(var o=[],a=r.startTime,s=0;s<i;s++){var u=r.sb[s],l=hn(n,[u.ff]),c=void 0;c=null!=r.Z?a+r.Z:r.N?r.N[s].end:a+e,o.push(new Yi(s+t,a,c,function(e){return e}.bind(null,l),u.start,u.end)),a=c}return o}function ho(e){return[e.C.La,e.ca.La,e.ka.La].filter(fn.Ia).map((function(e){return Di.O(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){t.getAttribute("indexRange")&&!e.Id&&(e.Id=!0);var n=t.getAttribute("media");return t=Di.K(t,"mediaRange",Di.qc,{start:0,end:null}),{ff:n,start:t.start,end:t.end}}))}function po(e,t,n,r){var i=vo(e),o=Hi(e,mo),a=ji(e,mo,"media"),s=ji(e,mo,"index");if(o={Z:o.Z,timescale:o.timescale,ab:o.ab,ma:o.ma,yd:o.yd,N:o.N,Xc:a,Nb:s},a=o.Nb?1:0,a+=o.N?1:0,a+=o.Z?1:0,0==a)throw new ve(2,4,4002);if(1!=a&&(o.Nb&&(o.N=null),o.Z=null),!o.Nb&&!o.Xc)throw new ve(2,4,4002);if(o.Nb){if(n=e.C.mimeType.split("/")[1],"mp4"!=n&&"webm"!=n)throw new ve(2,4,4006);if("webm"==n&&!i)throw new ve(2,4,4005);r=Ui(o.Nb,e.C.id,null,e.bandwidth||null,null),r=hn(e.C.pa,[r]),e=so(e,t,i,r,0,null,n,o.ma)}else o.Z?(r||(e.presentationTimeline.$c(o.Z),e.presentationTimeline.ad(e.S.start)),e=go(e,o)):(a=t=null,e.ka.id&&e.C.id&&(a=e.ka.id+","+e.C.id,t=n[a]),s=yo(e,o),r=!e.mb||!e.S.Vc,t?(r&&$i(new Xi(s),e.S.duration),t.Yc(s),n=e.presentationTimeline.Lb(),t.Hc(n-e.S.start)):(e.presentationTimeline.ub(s,e.S.start),t=new Xi(s),a&&e.mb&&(n[a]=t)),r&&$i(t,e.S.duration),e={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:t.find.bind(t),getSegmentReference:t.get.bind(t)});return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,initSegmentReference:i,ma:o.ma}}function mo(e){return e.Tb}function go(e,t){var n=e.S.duration,r=t.Z,i=t.ab,o=t.timescale,a=t.Xc,s=e.bandwidth||null,u=e.C.id,l=e.C.pa;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0>e||n&&e>=n?null:Math.floor(e/r)},getSegmentReference:function(e){var t=e*r,c=t+r;return n&&(c=Math.min(c,n)),0>c||n&&t>=n?null:new Yi(e,t,c,(function(){var n=Ui(a,u,e+i,s,t*o);return hn(l,[n])}),0,null)}}}function yo(e,t){for(var n=[],r=0;r<t.N.length;r++){var i=r+t.ab;n.push(new Yi(i,t.N[r].start,t.N[r].end,function(e,t,n,r,i,o){return e=Ui(e,t,i,n,o),hn(r,[e]).map((function(e){return e.toString()}))}.bind(null,t.Xc,e.C.id,e.bandwidth||null,e.C.pa,i,t.N[r].hg+t.yd),0,null))}return n}function vo(e){var t=ji(e,mo,"initialization");if(!t)return null;var n=e.C.id,r=e.bandwidth||null,i=e.C.pa;return new Gi((function(){var e=Ui(t,n,null,r,null);return hn(i,[e])}),0,null)}q("shaka.media.InitSegmentReference",Gi),Gi.prototype.Ec=function(){return this.c()},Gi.prototype.createUris=Gi.prototype.Ec,Gi.prototype.Qc=function(){return this.b},Gi.prototype.getStartByte=Gi.prototype.Qc,Gi.prototype.Pc=function(){return this.a},Gi.prototype.getEndByte=Gi.prototype.Pc,q("shaka.media.SegmentReference",Yi),Yi.prototype.ba=function(){return this.position},Yi.prototype.getPosition=Yi.prototype.ba,Yi.prototype.Rc=function(){return this.startTime},Yi.prototype.getStartTime=Yi.prototype.Rc,Yi.prototype.Ie=function(){return this.endTime},Yi.prototype.getEndTime=Yi.prototype.Ie,Yi.prototype.Ec=function(){return this.c()},Yi.prototype.createUris=Yi.prototype.Ec,Yi.prototype.Qc=function(){return this.b},Yi.prototype.getStartByte=Yi.prototype.Qc,Yi.prototype.Pc=function(){return this.a},Yi.prototype.getEndByte=Yi.prototype.Pc,q("shaka.media.SegmentIndex",Xi),Xi.prototype.destroy=function(){return this.a=null,Promise.resolve()},Xi.prototype.destroy=Xi.prototype.destroy,Xi.prototype.find=function(e){for(var t=this.a.length-1;0<=t;--t){var n=this.a[t];if(e>=n.startTime&&e<n.endTime)return n.position}return this.a.length&&e<this.a[0].startTime?this.a[0].position:null},Xi.prototype.find=Xi.prototype.find,Xi.prototype.get=function(e){return 0==this.a.length?null:(e-=this.a[0].position,0>e||e>=this.a.length?null:this.a[e])},Xi.prototype.get=Xi.prototype.get,Xi.prototype.offset=function(e){for(var t=0;t<this.a.length;++t)this.a[t].startTime+=e,this.a[t].endTime+=e},Xi.prototype.offset=Xi.prototype.offset,Xi.prototype.Yc=function(e){for(var t=[],n=0,r=0;n<this.a.length&&r<e.length;){var i=this.a[n],o=e[r];i.startTime<o.startTime?(t.push(i),n++):(i.startTime>o.startTime?0==n&&t.push(o):(.1<Math.abs(i.endTime-o.endTime)?t.push(new Yi(i.position,o.startTime,o.endTime,o.c,o.b,o.a)):t.push(i),n++),r++)}for(;n<this.a.length;)t.push(this.a[n++]);if(t.length)for(n=t[t.length-1].position+1;r<e.length;)i=e[r++],i=new Yi(n++,i.startTime,i.endTime,i.c,i.b,i.a),t.push(i);else t=e;this.a=t},Xi.prototype.merge=Xi.prototype.Yc,Xi.prototype.Hc=function(e){for(var t=0;t<this.a.length;++t)if(this.a[t].endTime>e)return void this.a.splice(0,t);this.a=[]},Xi.prototype.evict=Xi.prototype.Hc,Qi.prototype.sa=function(){return this.a.sa()},no.prototype.parse=function(e,t,n,r){var i;if(t=new Qi(new DataView(t)),440786851!=Ji(t).id)throw new ve(2,3,3008);var o=Ji(t);if(408125543!=o.id)throw new ve(2,3,3009);for(t=o.a.byteOffset,o=new Qi(o.a),i=null;o.sa();){var a=Ji(o);if(357149030==a.id){i=a;break}}if(!i)throw new ve(2,3,3010);for(o=new Qi(i.a),i=1e6,a=null;o.sa();){var s=Ji(o);if(2807729==s.id)i=to(s);else if(17545==s.id)if(a=s,4==a.a.byteLength)a=a.a.getFloat32(0);else{if(8!=a.a.byteLength)throw new ve(2,3,3003);a=a.a.getFloat64(0)}}if(null==a)throw new ve(2,3,3011);if(o=i/1e9,i=a*o,e=Ji(new Qi(new DataView(e))),475249515!=e.id)throw new ve(2,3,3007);return ro(e,t,o,i,n,r)};var _o={yb:{},Pb:{},kd:function(e,t){_o.Pb[e]=t}};function Eo(e,t,n){this.f=e,this.rc=t,this.h=this.g=1/0,this.a=1,this.b=this.c=null,this.l=0,this.m=!0,this.i=0,this.s=void 0===n||n}function bo(e,t,n,r){return e=He(e,r),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function To(){var e=this;this.b=this.a=null,this.f=[],this.c=null,this.l=[],this.h=1,this.m={},this.s=0,this.v=new Y(5),this.i=new pe((function(){Ro(e)})),this.g=new Oe}function So(e){var t=Date.now(),n=e.b.networkingEngine.request(0,He(e.f,e.a.retryParameters));return Fe(e.g,n),n.promise.then((function(t){if(e.b)return t.uri&&!e.f.includes(t.uri)&&e.f.unshift(t.uri),wo(e,t.data,t.uri)})).then((function(){var n=(Date.now()-t)/1e3;return z(e.v,1,n),n}))}function wo(e,t,n){if(t=Di.Vd(t,"MPD"),!t)throw new ve(2,4,4001,n);return t=qi(t,e.a.retryParameters,e.a.dash.xlinkFailGracefully,n,e.b.networkingEngine),Fe(e.g,t),t.promise.then((function(t){return xo(e,t,n)}))}function xo(e,t,n){return p((function r(){var i,o,a,s,u,l,c,d,f,h,p,m,g,y,v,_,E,b,T,S,I,A,D,R,M;return k(r,(function(r){switch(r.j){case 1:s=fn,u=Di,l=[n],c=u.O(t,"Location").map(u.fc).filter(s.Ia),0<c.length&&(d=hn(l,c),l=e.f=d),f=u.O(t,"BaseURL").map(u.fc),h=hn(l,f),p=e.a.dash.ignoreMinBufferTime,m=0,p||(m=u.K(t,"minBufferTime",u.Da)),e.s=u.K(t,"minimumUpdatePeriod",u.Da,-1),g=u.K(t,"availabilityStartTime",u.yf),y=u.K(t,"timeShiftBufferDepth",u.Da),v=u.K(t,"suggestedPresentationDelay",u.Da),_=u.K(t,"maxSegmentDuration",u.Da),E=t.getAttribute("type")||"static",e.c?b=e.c.presentationTimeline:(T=Math.max(e.a.dash.defaultPresentationDelay,1.5*m),S=null!=v?v:T,b=new Eo(g,S,e.a.dash.autoCorrectDrift)),I={mb:"static"!=E,presentationTimeline:b,ka:null,S:null,ca:null,C:null,bandwidth:0,Id:!1};for(var C=I,N=h,L=Di.K(t,"mediaPresentationDuration",Di.Da),P=[],O=0,F=Di.O(t,"Period"),k=0;k<F.length;k++){var B=F[k];O=Di.K(B,"start",Di.Da,O);var U=Di.K(B,"duration",Di.Da),H=null;if(k!=F.length-1){var j=Di.K(F[k+1],"start",Di.Da);null!=j&&(H=j-O)}else null!=L&&(H=L-O);if(null==H&&(H=U),B=Io(e,C,N,{start:O,duration:H,node:B,Vc:null==H||k==F.length-1}),P.push(B),U=C.ka.id,e.l.includes(U)||(e.l.push(U),e.c&&(e.b.filterNewPeriod(B),e.c.periods.push(B))),null==H){O=null;break}O+=H}if(null==e.c&&e.b.filterAllPeriods(P),null!=L?(i=P,o=L,a=!1):(i=P,o=O,a=!0),A=o,D=i,b.Ub("static"==E),"static"!=E&&a||b.wa(A||1/0),b.V()&&!isNaN(e.a.availabilityWindowOverride)&&(y=e.a.availabilityWindowOverride),null==y&&(y=1/0),b.sd(y),b.$c(_||1),e.c){r.A(0);break}if(e.c={presentationTimeline:b,periods:D,offlineSessionIds:[],minBufferTime:m||0},!b.je()){r.A(0);break}return R=u.O(t,"UTCTiming"),w(r,Oo(e,h,R),4);case 4:if(M=r.o,!e.b)return r["return"]();b.ee(M),x(r)}}))}))}function Io(e,t,n,r){if(t.ka=Co(r.node,null,n),t.S=r,t.ka.id||(t.ka.id="__shaka_period_"+r.start),Di.O(r.node,"EventStream").forEach(e.zf.bind(e,r.start,r.duration)),n=Di.O(r.node,"AdaptationSet").map(e.xf.bind(e,t)).filter(fn.Ia),t.mb){t=[];for(var i=d(n),o=i.next();!o.done;o=i.next()){o=d(o.value.Jf);for(var a=o.next();!a.done;a=o.next())t.push(a.value)}if(t.length!=new Set(t).size)throw new ve(2,4,4018)}var s=n.filter((function(e){return!e.wd}));if(n.filter((function(e){return e.wd})).forEach((function(e){var t=e.streams[0],n=e.wd;s.forEach((function(e){e.id==n&&e.streams.forEach((function(e){e.trickModeVideo=t}))}))})),t=Ao(s,"video"),i=Ao(s,"audio"),!t.length&&!i.length)throw new ve(2,4,4004);for(n=e.a.disableAudio,i.length&&!n||(i=[null]),t.length||(t=[null]),n=[],o=0;o<i.length;o++)for(a=0;a<t.length;a++)Do(e,i[o],t[a],n);for(e=Ao(s,"text"),t=[],i=0;i<e.length;i++)t.push.apply(t,e[i].streams);return{startTime:r.start,textStreams:t,variants:n}}function Ao(e,t){return e.filter((function(e){return e.contentType==t}))}function Do(e,t,n,r){if(t||n)if(t&&n){var i=t.drmInfos,o=n.drmInfos;if(!i.length||!o.length||0<Qt(i,o).length){o=Qt(t.drmInfos,n.drmInfos);for(var a=0;a<t.streams.length;a++)for(var s=0;s<n.streams.length;s++)i=(n.streams[s].bandwidth||0)+(t.streams[a].bandwidth||0),i={id:e.h++,language:t.language,primary:t.Wc||n.Wc,audio:t.streams[a],video:n.streams[s],bandwidth:i,drmInfos:o,allowedByApplication:!0,allowedByKeySystem:!0},r.push(i)}}else for(o=t||n,a=0;a<o.streams.length;a++)i=o.streams[a].bandwidth||0,i={id:e.h++,language:o.language||"und",primary:o.Wc,audio:t?o.streams[a]:null,video:n?o.streams[a]:null,bandwidth:i,drmInfos:o.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},r.push(i)}function Ro(e){p((function t(){var n,r;return k(t,(function(t){switch(t.j){case 1:return n=0,I(t,2),w(t,So(e),4);case 4:n=t.o,D(t,3);break;case 2:r=R(t),e.b&&(r.severity=1,e.b.onError(r));case 3:if(!e.b)return t["return"]();Mo(e,n),x(t)}}))}))}function Mo(e,t){0>e.s||e.i.P(Math.max(3,e.s-t,W(e.v)))}function Co(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,bd:null},n=n||t.pa;var r=Di.xb,i=Di.Ce,o=Di.O(e,"BaseURL").map(Di.fc),a=e.getAttribute("contentType")||t.contentType,s=e.getAttribute("mimeType")||t.mimeType,u=e.getAttribute("codecs")||t.codecs;i=Di.K(e,"frameRate",i)||t.frameRate;var l=Di.O(e,"InbandEventStream"),c=t.emsgSchemeIdUris.slice();l=d(l);for(var f=l.next();!f.done;f=l.next())f=f.value.getAttribute("schemeIdUri"),c.includes(f)||c.push(f);return l=Di.O(e,"AudioChannelConfiguration"),l=No(l)||t.bd,a||(a=Fo(s,u)),{pa:hn(n,o),Rb:Di.dc(e,"SegmentBase")||t.Rb,La:Di.dc(e,"SegmentList")||t.La,Tb:Di.dc(e,"SegmentTemplate")||t.Tb,width:Di.K(e,"width",r)||t.width,height:Di.K(e,"height",r)||t.height,contentType:a,mimeType:s,codecs:u,frameRate:i,emsgSchemeIdUris:c,id:e.getAttribute("id"),bd:l}}function No(e){for(var t=0;t<e.length;++t){var n=e[t],r=n.getAttribute("schemeIdUri");if(r&&(n=n.getAttribute("value")))switch(r){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(r=parseInt(n,10),!r)continue;return r;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(r=parseInt(n,16)){for(e=0;r;)1&r&&++e,r>>=1;return e}}}return null}function Lo(e){var t=e.Rb?1:0;return t+=e.La?1:0,t+=e.Tb?1:0,0==t?"text"==e.contentType||"application"==e.contentType:(1!=t&&(e.Rb&&(e.La=null),e.Tb=null),!0)}function Po(e,t,n,r){return t=hn(t,[n]),t=He(t,e.a.retryParameters),t.method=r,t=e.b.networkingEngine.request(4,t),Fe(e.g,t),t.promise.then((function(e){if("HEAD"==r){if(!e.headers||!e.headers.date)return 0;e=e.headers.date}else e=yt(e.data);return e=Date.parse(e),isNaN(e)?0:e-Date.now()}))}function Oo(e,t,n){n=n.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}}));var r=e.a.dash.clockSyncUri;return!n.length&&r&&n.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),fn.Ae(n,function(e){var n=e.scheme;switch(e=e.value,n){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return Po(this,t,e,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return Po(this,t,e,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return n=Date.parse(e),isNaN(n)?0:n-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":return Q("NTP UTCTiming scheme is not supported"),Promise.reject();default:return Q("Unrecognized scheme in UTCTiming element",n),Promise.reject()}}.bind(e))["catch"]((function(){return Q("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),0}))}function Fo(e,t){return Hn(st(e,t))?"text":e.split("/")[0]}function ko(e,t,n,r){this.b=e,this.type=t,this.a=n,this.segments=r||null}function Bo(e,t,n,r){this.id=e,this.name=t,this.a=n,this.value=void 0===r?null:r}function Uo(e,t){this.name=e,this.value=t}function Ho(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function jo(e,t){this.b=t,this.a=e}q("shaka.media.ManifestParser.registerParserByExtension",_o.kd),_o.Bb=function(e,t){_o.yb[e]=t},q("shaka.media.ManifestParser.registerParserByMime",_o.Bb),_o.Df=function(){var e={};if(dt()){for(var t in _o.yb)e[t]=!0;for(var n in _o.Pb)e[n]=!0}t={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"},n=d(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var r=n.next();!r.done;r=n.next())r=r.value,e[r]=dt()?!!_o.yb[r]:ft(r);for(var i in t)e[i]=dt()?!!_o.Pb[i]:ft(t[i]);return e},_o.create=function(e,t,n,r){return p((function i(){var o,a;return k(i,(function(i){switch(i.j){case 1:return I(i,2),w(i,_o.Je(e,t,n,r),4);case 4:return o=i.o,i["return"](new o);case 2:throw a=R(i),a.severity=2,a}}))}))},_o.Je=function(e,t,n,r){return p((function i(){var o,a,s,u,l;return k(i,(function(i){switch(i.j){case 1:if(o=_o,r&&(a=o.yb[r.toLowerCase()]))return i["return"](a);if((s=o.getExtension(e))&&(u=o.Pb[s]))return i["return"](u);if(r){i.A(2);break}return w(i,o.Re(e,t,n),3);case 3:if((r=i.o)&&(l=_o.yb[r]))return i["return"](l);case 2:throw new ve(2,4,4e3,e)}}))}))},_o.Re=function(e,t,n){return p((function r(){var i,o,a;return k(r,(function(r){switch(r.j){case 1:return i=He([e],n),i.method="HEAD",w(r,t.request(0,i).promise,2);case 2:return o=r.o,a=o.headers["content-type"],r["return"](a?a.toLowerCase().split(";").shift():"")}}))}))},_o.getExtension=function(e){return e=new ee(e).ja.split("/").pop().split("."),1==e.length?"":e.pop().toLowerCase()},_o.isSupported=function(e,t){return!!dt()&&(t in _o.yb||_o.getExtension(e)in _o.Pb)},q("shaka.media.PresentationTimeline",Eo),Eo.prototype.Y=function(){return this.g},Eo.prototype.getDuration=Eo.prototype.Y,Eo.prototype.Pe=function(){return this.a},Eo.prototype.getMaxSegmentDuration=Eo.prototype.Pe,Eo.prototype.wa=function(e){this.g=e},Eo.prototype.setDuration=Eo.prototype.wa,Eo.prototype.We=function(){return this.f},Eo.prototype.getPresentationStartTime=Eo.prototype.We,Eo.prototype.ee=function(e){this.l=e},Eo.prototype.setClockOffset=Eo.prototype.ee,Eo.prototype.Ub=function(e){this.m=e},Eo.prototype.setStatic=Eo.prototype.Ub,Eo.prototype.sd=function(e){this.h=e},Eo.prototype.setSegmentAvailabilityDuration=Eo.prototype.sd,Eo.prototype.Tf=function(e){this.rc=e},Eo.prototype.setDelay=Eo.prototype.Tf,Eo.prototype.He=function(){return this.rc},Eo.prototype.getDelay=Eo.prototype.He,Eo.prototype.ub=function(e,t){if(0!=e.length){var n=e[e.length-1].endTime+t;this.ad(e[0].startTime+t),this.a=e.reduce((function(e,t){return Math.max(e,t.endTime-t.startTime)}),this.a),this.b=Math.max(this.b,n),null!=this.f&&this.s&&(this.f=(Date.now()+this.l)/1e3-this.b-this.a)}},Eo.prototype.notifySegments=Eo.prototype.ub,Eo.prototype.ad=function(e){this.c=null==this.c?e:Math.min(this.c,e)},Eo.prototype.notifyMinSegmentStartTime=Eo.prototype.ad,Eo.prototype.$c=function(e){this.a=Math.max(this.a,e)},Eo.prototype.notifyMaxSegmentDuration=Eo.prototype.$c,Eo.prototype.offset=function(e){null!=this.c&&(this.c+=e),null!=this.b&&(this.b+=e)},Eo.prototype.offset=Eo.prototype.offset,Eo.prototype.V=function(){return 1/0==this.g&&!this.m},Eo.prototype.isLive=Eo.prototype.V,Eo.prototype.Xa=function(){return 1/0!=this.g&&!this.m},Eo.prototype.isInProgress=Eo.prototype.Xa,Eo.prototype.Lb=function(){if(1/0==this.h)return this.i;var e=this.pb()-this.h;return Math.max(this.i,e)},Eo.prototype.getSegmentAvailabilityStart=Eo.prototype.Lb,Eo.prototype.fe=function(e){this.i=e},Eo.prototype.setUserSeekStart=Eo.prototype.fe,Eo.prototype.pb=function(){return this.V()||this.Xa()?Math.min(Math.max(0,(Date.now()+this.l)/1e3-this.a-this.f),this.g):this.g},Eo.prototype.getSegmentAvailabilityEnd=Eo.prototype.pb,Eo.prototype.Kb=function(e){var t=Math.max(this.c,this.i);if(1/0==this.h)return t;var n=this.pb()-this.h;return e=Math.min(n+e,this.Ba()),Math.max(t,e)},Eo.prototype.getSafeSeekRangeStart=Eo.prototype.Kb,Eo.prototype.ob=function(){return this.Kb(0)},Eo.prototype.getSeekRangeStart=Eo.prototype.ob,Eo.prototype.Ba=function(){var e=this.V()||this.Xa()?this.rc:0;return Math.max(0,this.pb()-e)},Eo.prototype.getSeekRangeEnd=Eo.prototype.Ba,Eo.prototype.je=function(){return null!=this.f&&null==this.b},Eo.prototype.usingPresentationStartTime=Eo.prototype.je,q("shaka.dash.DashParser",To),n=To.prototype,n.configure=function(e){this.a=e},n.start=function(e,t){var n=this;return p((function r(){var i;return k(r,(function(r){switch(r.j){case 1:return n.f=[e],n.b=t,w(r,So(n),2);case 2:if(i=r.o,n.b&&Mo(n,i),!n.b)throw new ve(2,7,7001);return r["return"](n.c)}}))}))},n.stop=function(){return this.a=this.b=null,this.f=[],this.c=null,this.l=[],this.m={},null!=this.i&&(this.i.stop(),this.i=null),this.g.destroy()},n.update=function(){So(this)["catch"](function(e){this.b&&this.b.onError(e)}.bind(this))},n.onExpirationUpdated=function(){},n.xf=function(e,t){e.ca=Co(t,e.ka,null);var n=!1,r=Di.O(t,"Role"),i=r.map((function(e){return e.getAttribute("value")})).filter(fn.Ia),o=void 0,a="text"==e.ca.contentType;a&&(o="subtitle");for(var s=0;s<r.length;s++){var u=r[s].getAttribute("schemeIdUri");if(null==u||"urn:mpeg:dash:role:2011"==u)switch(u=r[s].getAttribute("value"),u){case"main":n=!0;break;case"caption":case"subtitle":o=u}}var l=null,c=!1;Di.O(t,"EssentialProperty").forEach((function(e){"http://dashif.org/guidelines/trickmode"==e.getAttribute("schemeIdUri")?l=e.getAttribute("value"):c=!0})),s=Di.O(t,"Accessibility");var f=new Map;for(r={},s=d(s),u=s.next();!u.done;r={Gb:r.Gb},u=s.next()){var h=u.value;u=h.getAttribute("schemeIdUri"),h=h.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==u||"urn:scte:dash:cc:cea-708:2015"==u?(r.Gb=1,null!=h?h.split(";").forEach(function(e){return function(t){if(t.includes("=")){t=t.split("=");var n=t[0].startsWith("CC")?t[0]:"CC"+t[0];t=t[1].split(",")[0].split(":").pop()}else n="CC"+e.Gb,e.Gb+=2;f.set(n,sr(t))}}(r)):f.set("CC1","und")):"urn:mpeg:dash:role:2011"==u&&null!=h&&(i.push(h),"captions"==h&&(o="caption"))}if(c)return null;r=Di.O(t,"ContentProtection");var p=Mi(r,this.a.dash.customScheme,this.a.dash.ignoreDrmInfo);if(r=sr(t.getAttribute("lang")||"und"),s=t.getAttribute("label"),(u=Di.O(t,"Label"))&&u.length&&(u=u[0],u.textContent&&(s=u.textContent)),u=Di.O(t,"Representation"),i=u.map(this.Af.bind(this,e,p,o,r,s,n,i,f)).filter((function(e){return!!e})),0==i.length){if(a)return null;throw new ve(2,4,4003)}return e.ca.contentType&&"application"!=e.ca.contentType||(e.ca.contentType=Fo(i[0].mimeType,i[0].codecs),i.forEach((function(t){t.type=e.ca.contentType}))),i.forEach((function(e){p.drmInfos.forEach((function(t){e.keyId&&t.keyIds.push(e.keyId)}))})),a=u.map((function(e){return e.getAttribute("id")})).filter(fn.Ia),{id:e.ca.id||"__fake__"+this.h++,contentType:e.ca.contentType,language:r,Wc:n,streams:i,drmInfos:p.drmInfos,wd:l,Jf:a}},n.Af=function(e,t,n,r,i,o,a,s,u){if(e.C=Co(u,e.ca,null),!Lo(e.C))return null;e.bandwidth=Di.K(u,"bandwidth",Di.pc)||0;var l=e.C.contentType;l="text"==l||"application"==l;try{var c=this.Kf.bind(this);if(e.C.Rb)var d=ao(e,c);else if(e.C.La)d=lo(e,this.m);else if(e.C.Tb)d=po(e,c,this.m,!!this.c);else{var f=e.C.pa,h=e.S.duration||0;d={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0<=e&&e<h?1:null},getSegmentReference:function(e){return 1!=e?null:new Yi(1,0,h,(function(){return f}),0,null)},initSegmentReference:null,ma:0}}}catch(p){if(l&&4002==p.code)return null;throw p}return u=Di.O(u,"ContentProtection"),u=Ci(u,this.a.dash.customScheme,t,this.a.dash.ignoreDrmInfo),{id:this.h++,originalId:e.C.id,createSegmentIndex:d.createSegmentIndex,findSegmentPosition:d.findSegmentPosition,getSegmentReference:d.getSegmentReference,initSegmentReference:d.initSegmentReference,presentationTimeOffset:d.ma,mimeType:e.C.mimeType,codecs:e.C.codecs,frameRate:e.C.frameRate,bandwidth:e.bandwidth,width:e.C.width,height:e.C.height,kind:n,encrypted:0<t.drmInfos.length,keyId:u,language:r,label:i,type:e.ca.contentType,primary:o,trickModeVideo:null,emsgSchemeIdUris:e.C.emsgSchemeIdUris,roles:a,channelsCount:e.C.bd,closedCaptions:s}},n.zf=function(e,t,n){var r=Di.xb,i=n.getAttribute("schemeIdUri")||"",o=n.getAttribute("value")||"",a=Di.K(n,"timescale",r)||1;Di.O(n,"Event").forEach(function(n){var s=Di.K(n,"presentationTime",r)||0,u=Di.K(n,"duration",r)||0;s=s/a+e,u=s+u/a,null!=t&&(s=Math.min(s,e+t),u=Math.min(u,e+t)),n={schemeIdUri:i,value:o,startTime:s,endTime:u,id:n.getAttribute("id")||"",eventElement:n},this.b.onTimelineRegionAdded(n)}.bind(this))},n.Kf=function(e,t,n){return e=bo(e,t,n,this.a.retryParameters),e=this.b.networkingEngine.request(1,e),Fe(this.g,e),e.promise.then((function(e){return e.data}))},_o.kd("mpd",To),_o.Bb("application/dash+xml",To),_o.Bb("video/vnd.mpeg.dash.mpd",To),Bo.prototype.toString=function(){function e(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)}var t="#"+this.name,n=this.a?this.a.map(e):[];return this.value&&n.unshift(this.value),0<n.length&&(t+=":"+n.join(",")),t},Bo.prototype.getAttribute=function(e){var t=this.a.filter((function(t){return t.name==e}));return t.length?t[0]:null};var Ko={nb:function(e,t){return e.filter((function(e){return e.name==t}))},Ta:function(e,t){var n=Ko.nb(e,t);return n.length?n[0]:null},Lc:function(e,t,n){return e.filter((function(e){var r=e.getAttribute("TYPE");return e=e.getAttribute("GROUP-ID"),r.value==t&&e.value==n}))},Dc:function(e,t){return hn([e],[t])[0]},Uc:function(e){return/^#(?!EXT)/m.test(e)}};function Vo(e){this.b=e,this.a=0}function qo(e){Go(e,/[ \t]+/gm)}function Go(e,t){t.lastIndex=e.a;var n=t.exec(e.b);return n=null==n?null:{position:n.index,length:n[0].length,Mf:n},e.a==e.b.length||null==n||n.position!=e.a?null:(e.a+=n.length,n.Mf)}function Yo(e){return e.a==e.b.length?null:(e=Go(e,/[^ \t\n]*/gm))?e[0]:null}function zo(){this.a=0}function Wo(e,t,n){t=yt(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var r=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(r[0]))throw new ve(2,4,4015);t=0;for(var i=1;i<r.length;i++)if(!Ko.Uc(r[i])){var o=$o(e,r[i]);if(--e.a,Qo.includes(o.name)){t=1;break}"EXT-X-STREAM-INF"==o.name&&(i+=1)}for(i=[],o=1;o<r.length;)if(Ko.Uc(r[o]))o+=1;else{var a=$o(e,r[o]);if(Jo.includes(a.name)){if(1!=t)throw new ve(2,4,4017);return r=r.splice(o,r.length-o),e=Xo(e,n,r,i),new ko(n,t,i,e)}i.push(a),o+=1,"EXT-X-STREAM-INF"==a.name&&(a.a.push(new Uo("URI",r[o])),o+=1)}return new ko(n,t,i)}function Xo(e,t,n,r){var i=[],o=[];return n.forEach((function(n){if(/^(#EXT)/.test(n))n=$o(e,n),Qo.includes(n.name)?r.push(n):o.push(n);else{if(Ko.Uc(n))return[];n=Ko.Dc(t,n.trim()),i.push(new jo(n,o)),o=[]}})),i}function $o(e,t){var n=e.a++,r=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!r)throw new ve(2,4,4016,t);var i,o=r[1],a=r[2];if(r=[],a){var s;a=new Vo(a),(s=Go(a,/^([^,=]+)(?:,|$)/g))&&(i=s[1]);for(var u=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;s=Go(a,u);)r.push(new Uo(s[1],s[2]||s[3]))}return new Bo(n,o,r,i)}var Qo="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),Jo="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");function Zo(e){try{var t=Zo.parse(e);return Se({uri:e,fd:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return be(n)}}function ea(){var e=this;this.c=this.g=null,this.$=1,this.D=new Map,this.T=new Set,this.a=new Map,this.b=null,this.v="",this.s=new zo,this.R=0,this.h=new pe((function(){Ca(e)})),this.f=Oa,this.m=null,this.B=0,this.F=1/0,this.i=new Oe,this.L=[],this.l=new Map,this.W=!1}function ta(e,t){return p((function n(){var r,i,o,a,s,u,l,c,d,f;return k(n,(function(n){switch(n.j){case 1:return r=Ko,i=Fa,o=t.re,w(n,La(e,He([o],e.c.retryParameters),0),2);case 2:if(a=n.o,s=Wo(e.s,a.data,a.uri),1!=s.type)throw new ve(2,4,4017);return l=(u=r.Ta(s.a,"EXT-X-MEDIA-SEQUENCE"))?Number(u.value):0,c=t.stream,w(n,ya(e,t.xc,s,l,c.mimeType,c.codecs),3);case 3:d=n.o,t.Sb.a=d,f=d[d.length-1],r.Ta(s.a,"EXT-X-ENDLIST")&&(Na(e,i.Qa),e.b.wa(f.endTime)),x(n)}}))}))}function na(e,t){return p((function n(){var r,i,o,a,s,u,l,c,f,h,p;return k(n,(function(n){switch(n.j){case 1:if(r=Wo(e.s,t,e.v),0!=r.type)throw new ve(2,4,4022);return w(n,ra(e,r),2);case 2:if(i=n.o,!e.g)throw new ve(2,7,7001);if(e.W&&0==i.variants.length)throw new ve(2,4,4034);e.g.filterAllPeriods([i]),o=1/0,a=0,s=1/0;for(var m=d(e.a.values()),g=m.next();!g.done;g=m.next())u=g.value,o=Math.min(o,u.Zc),a=Math.max(a,u.Zc),"text"!=u.stream.type&&(s=Math.min(s,u.duration));if(e.f!=Fa.Qa?(e.b=new Eo(0,3*e.B),e.b.Ub(!1)):(e.b=new Eo(null,0),e.b.Ub(!0)),ga(e),e.f!=Fa.Qa){for(e.R=e.F,l=Fa,e.f==l.zd&&(c=e.b.rc,isNaN(e.c.availabilityWindowOverride)||(c=e.c.availabilityWindowOverride),e.b.sd(c)),f=0;95443.7176888889<=a;)f+=95443.7176888889,a-=95443.7176888889;if(f)for(m=d(e.a.values()),g=m.next();!g.done;g=m.next())h=g.value,95443.7176888889>h.Zc&&(h.stream.presentationTimeOffset=-f,h.Sb.offset(f))}else for(e.b.wa(s),e.b.offset(-o),m=d(e.a.values()),g=m.next();!g.done;g=m.next())p=g.value,p.stream.presentationTimeOffset=o,p.Sb.offset(-o),$i(p.Sb,s);e.m={presentationTimeline:e.b,periods:[i],offlineSessionIds:[],minBufferTime:0},x(n)}}))}))}function ra(e,t){return p((function n(){var r,i,o,a,s,u,l,c,d,f,h,m;return k(n,(function(n){switch(n.j){case 1:return r=Ko,i=fn,o=t.a,a=r.nb(t.a,"EXT-X-MEDIA"),s=a.filter(function(e){return"SUBTITLES"==Aa(e,"TYPE")}.bind(e)),u=s.map(function(e){var t=this;return p((function n(){var r;return k(n,(function(n){switch(n.j){case 1:return I(n,2),w(n,ua(t,e),4);case 4:return n["return"](n.o);case 2:if(r=R(n),t.c.hls.ignoreTextStreamFailures)return n["return"](null);throw r}}))}))}.bind(e)),l=a.filter((function(e){return"CLOSED-CAPTIONS"==Aa(e,"TYPE")})),la(e,l),w(n,Promise.all(u),2);case 2:return c=n.o,d=r.nb(o,"EXT-X-STREAM-INF"),f=d.map(function(e){return ia(this,e,t)}.bind(e)),w(n,Promise.all(f),3);case 3:return h=n.o,m=h.reduce(i.Cc,[]),m=m.filter((function(e){return null!=e})),n["return"]({startTime:0,variants:m,textStreams:c.filter((function(e){return null!=e}))})}}))}))}function ia(e,t,n){return p((function r(){var i,o,a,s,u,l,c,d,f,h,p,m,g,y,v,_,E,b,T,S,x,I,A,D,R,M,C;return k(r,(function(r){switch(r.j){case 1:return i=mn,o=Ko,a=Ho(t,"CODECS","avc1.42E01E,mp4a.40.2"),s=Sa(a.split(/\s*,\s*/)),u=t.getAttribute("RESOLUTION"),c=l=null,d=Ho(t,"FRAME-RATE"),f=Number(Aa(t,"BANDWIDTH")),u&&(h=u.value.split("x"),l=h[0],c=h[1]),p=o.nb(n.a,"EXT-X-MEDIA"),p=p.filter((function(e){return"CLOSED-CAPTIONS"!=Aa(e,"TYPE")})),p=p.filter((function(e){var t=Ho(e,"URI")||"";return"SUBTITLES"==(Ho(e,"TYPE")||"")||""!=t})),m=Ho(t,"AUDIO"),g=Ho(t,"VIDEO"),m?p=o.Lc(p,"AUDIO",m):g&&(p=o.Lc(p,"VIDEO",g)),(y=wa(i.qa,s))&&((v=Ho(t,"SUBTITLES"))&&(_=o.Lc(p,"SUBTITLES",v),_.length&&(E=e.D.get(_[0].id))&&(E.stream.codecs=y)),Ne(s,y)),b=p.map(function(e){return ca(this,e,s)}.bind(e)),T=[],S=[],w(r,Promise.all(b),2);case 2:if(I=r.o,I=I.filter((function(e){return null!=e})),m?T=I:g&&(S=I),D=!1,T.length||S.length?T.length?(M=Aa(t,"URI"),C=T[0].xc,M==C?(A=i.Db,D=!0):A=i.Pa):A=i.Db:1==s.length?(R=wa(i.Pa,s),A=u||d||R?i.Pa:i.Db):(A=i.Pa,s=[s.join(",")]),D){r.A(3);break}return w(r,da(e,t,s,A),4);case 4:x=r.o;case 3:if(x)x.stream.type==i.Db?T=[x]:S=[x];else if(null===x)return r["return"]([]);return S&&oa(S),T&&oa(T),r["return"](aa(e,T,S,f,l,c,d))}}))}))}function oa(e){e.forEach((function(e){var t=e.stream.codecs.split(",");t=t.filter((function(e){return"mp4a.40.34"!=e})),e.stream.codecs=t.join(",")}))}function aa(e,t,n,r,i,o,a){n.forEach(function(e){(e=e.stream)&&(e.width=Number(i)||void 0,e.height=Number(o)||void 0,e.frameRate=Number(a)||void 0)}.bind(e));var s=!!e.c&&e.c.disableAudio;t.length&&!s||(t=[null]),n.length||(n=[null]),s=[],t=d(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;for(var l=d(n),c=l.next();!c.done;c=l.next()){var f=c.value;c=u?u.stream:null;var h=f?f.stream:null,p=u?u.drmInfos:null,m=f?f.drmInfos:null;f=(f?f.xc:"")+" - "+(u?u.xc:"");var g=void 0;if(c&&h){if(p.length&&m.length&&!(0<Qt(p,m).length))continue;g=Qt(p,m)}else c?g=p:h&&(g=m);e.T.has(f)||(c=sa(e,c,h,r,g),s.push(c),e.T.add(f))}}return s}function sa(e,t,n,r,i){return{id:e.$++,language:t?t.language:"und",primary:!!t&&t.primary||!!n&&n.primary,audio:t,video:n,bandwidth:r,drmInfos:i,allowedByApplication:!0,allowedByKeySystem:!0}}function ua(e,t){return p((function n(){var r;return k(n,(function(n){switch(n.j){case 1:return Aa(t,"TYPE"),w(n,ca(e,t,[]),2);case 2:return r=n.o,n["return"](r.stream)}}))}))}function la(e,t){for(var n=d(t),r=n.next();!r.done;r=n.next()){r=r.value,Aa(r,"TYPE");var i=Ho(r,"LANGUAGE")||"und";i=sr(i);var o=Aa(r,"GROUP-ID");r=Aa(r,"INSTREAM-ID"),e.l.get(o)||e.l.set(o,new Map),e.l.get(o).set(r,i)}}function ca(e,t,n){return p((function r(){var i,o,a,s,u,l,c,d,f,h,p;return k(r,(function(r){switch(r.j){case 1:if(i=Aa(t,"URI"),e.a.has(i))return r["return"](e.a.get(i));if(o=Aa(t,"TYPE").toLowerCase(),a=mn,"subtitles"==o&&(o=a.qa),s=sr(Ho(t,"LANGUAGE","und")),u=Ho(t,"NAME"),l=t.getAttribute("DEFAULT"),c=t.getAttribute("AUTOSELECT"),d=Ho(t,"CHANNELS"),"audio"==o)if(d){var m=d.split("/")[0];m=parseInt(m,10)}else m=null;else m=null;return f=m,h=!!l||!!c,w(r,fa(e,i,n,o,s,h,u,f,null),2);case 2:return p=r.o,null==p?r["return"](null):e.a.has(i)?r["return"](e.a.get(i)):(e.D.set(t.id,p),e.a.set(i,p),r["return"](p))}}))}))}function da(e,t,n,r){return p((function i(){var o,a,s,u,l;return k(i,(function(i){switch(i.j){case 1:return o=mn,a=Aa(t,"URI"),e.a.has(a)?i["return"](e.a.get(a)):(s=Ho(t,"CLOSED-CAPTIONS"),u=null,r==o.Pa&&s&&"NONE"!=s&&(u=e.l.get(s)),w(i,fa(e,a,n,r,"und",!1,null,null,u),2));case 2:return l=i.o,null==l?i["return"](null):e.a.has(a)?i["return"](e.a.get(a)):(e.a.set(a,l),i["return"](l))}}))}))}function fa(e,t,n,r,i,o,a,s,u){return p((function l(){var c,f,h,p,m,g,y,v,_,E,b,T,S,x,I,A,D,R,M,C,N,L,P,O,F;return k(l,(function(l){switch(l.j){case 1:return c=Ko,f=c.Dc(e.v,t),p="",w(l,La(e,He([f],e.c.retryParameters),0),2);case 2:if(g=l.o,f=g.uri,h=Wo(e.s,g.data,f),1!=h.type)throw new ve(2,4,4017);y=[],h.segments.forEach((function(e){e=c.nb(e.b,"EXT-X-KEY"),y.push.apply(y,e)})),v=!1,_=[],E=null;for(var k=d(y),B=k.next();!B.done;B=k.next())if(b=B.value,T=Aa(b,"METHOD"),"NONE"!=T){if(v=!0,"AES-128"==T)return e.W=!0,l["return"](null);S=Aa(b,"KEYFORMAT"),(I=(x=Pa[S])?x(b):null)&&(I.keyIds.length&&(E=I.keyIds[0]),_.push(I))}if(v&&!_.length)throw new ve(2,4,4026);return ha(e,h),p=xa(r,n),w(l,Ia(e,r,p,h),3);case 3:return m=l.o,D=(A=c.Ta(h.a,"EXT-X-MEDIA-SEQUENCE"))?Number(A.value):0,w(l,ya(e,t,h,D,m,p),4);case 4:return R=l.o,M=R[0].startTime,C=R[R.length-1].endTime,N=C-M,L=new Xi(R),P=pa(h),O=void 0,"text"==r&&(O="subtitle"),F={id:e.$++,originalId:a,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:L.find.bind(L),getSegmentReference:L.get.bind(L),initSegmentReference:P,presentationTimeOffset:0,mimeType:m,codecs:p,kind:O,encrypted:v,keyId:E,language:i,label:a,type:r,primary:o,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:[],channelsCount:s,closedCaptions:u},l["return"]({stream:F,Sb:L,drmInfos:_,xc:t,re:f,Zc:M,sg:C,duration:N})}}))}))}function ha(e,t){var n=Fa,r=Ko.Ta(t.a,"EXT-X-PLAYLIST-TYPE"),i=Ko.Ta(t.a,"EXT-X-ENDLIST");i=r&&"VOD"==r.value||i,r=r&&"EVENT"==r.value&&!i,r=!i&&!r,i?Na(e,n.Qa):(Na(e,r?n.zd:n.me),n=Da(t.a,"EXT-X-TARGETDURATION"),n=Number(n.value),e.B=Math.max(n,e.B),e.F=Math.min(n,e.F))}function pa(e){var t=Ko.nb(e.a,"EXT-X-MAP");if(!t.length)return null;if(1<t.length)throw new ve(2,4,4020);t=t[0];var n=Aa(t,"URI"),r=Ko.Dc(e.b,n);return e=0,n=null,(t=Ho(t,"BYTERANGE"))&&(e=t.split("@"),t=Number(e[0]),e=Number(e[1]),n=e+t-1),new Gi((function(){return[r]}),e,n)}function ma(e,t,n,r){var i=t.b,o=t.a;t=Da(i,"EXTINF").value.split(","),t=r+Number(t[0]);var a=0,s=null;return(i=Ko.Ta(i,"EXT-X-BYTERANGE"))&&(a=i.value.split("@"),i=Number(a[0]),a=a[1]?Number(a[1]):e.a+1,s=a+i-1),new Yi(n,r,t,(function(){return[o]}),a,s)}function ga(e){e.b&&(e.L.forEach((function(t){e.b.ub(t,0)})),e.L=[])}function ya(e,t,n,r,i,o){return p((function a(){var s,u,l,c,d,f,h,p,m,g,y;return k(a,(function(a){switch(a.j){case 1:return s=n.segments,u=[],l=s[0].a,c=ma(null,s[0],r,0),d=pa(n),w(a,_a(e,t,d,c,i,o),2);case 2:f=a.o,l.split("/").pop();for(var v=0;v<s.length;++v)h=s[v],p=u[u.length-1],m=0==v?f:p.endTime,g=r+v,y=ma(p,h,g,m),u.push(y);return e.L.push(u),ga(e),a["return"](u)}}))}))}function va(e,t){return p((function n(){var r,i,o,a,s,u;return k(n,(function(n){switch(n.j){case 1:return r=1,i=bo(t.c(),t.b,t.b+2048-1,e.c.retryParameters),o=bo(t.c(),t.b,t.a,e.c.retryParameters),I(n,2),w(n,La(e,i,r),4);case 4:return a=n.o,n["return"](a);case 2:if(s=R(n),7001==s.code)throw s;return Q("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",i.uris[0]),w(n,La(e,o,r),5);case 5:return u=n.o,n["return"](u)}}))}))}function _a(e,t,n,r,i,o){return p((function a(){var s,u,l,c,d,f,h,p,m;return k(a,(function(a){switch(a.j){case 1:if(e.m&&(s=e.a.get(t),u=s.Sb,l=u.get(r.position)))return a["return"](l.startTime);if("audio/mpeg"==i)return a["return"](0);if("video/mp4"!=i&&"audio/mp4"!=i){a.A(2);break}return c=[va(e,r)],n&&c.push(va(e,n)),w(a,Promise.all(c),3);case 3:return d=a.o,f=d[0],h=d[1]||d[0],a["return"](Ea(f.data,h.data));case 2:if("video/mp2t"!=i){a.A(4);break}return w(a,va(e,r),5);case 5:return p=a.o,a["return"](ba(p.data));case 4:if("application/mp4"!=i&&!i.startsWith("text/")){a.A(6);break}return w(a,va(e,r),7);case 7:return m=a.o,a["return"](Ta(i,o,m.data));case 6:if("video/webm"==i)return a["return"](null);throw new ve(2,4,4030)}}))}))}function Ea(e,t){var n=0;if((new Ei).H("moov",bi).H("trak",bi).H("mdia",bi).fa("mdhd",(function(e){e.reader.M(0==e.version?8:16),n=e.reader.G(),e.parser.stop()})).parse(t,!0),!n)throw new ve(2,4,4030);var r=0,i=!1;if((new Ei).H("moof",bi).H("traf",bi).fa("tfdt",(function(e){r=(0==e.version?e.reader.G():e.reader.Ab())/n,i=!0,e.parser.stop()})).parse(e,!0),!i)throw new ve(2,4,4030);return r}function ba(e){function t(){throw new ve(2,4,4030)}e=new yi(new DataView(e),0);for(var n=0,r=0;;){if(n=e.ba(),r=e.la(),71!=r&&t(),16384&e.Qb()||t(),r=(48&e.la())>>4,0!=r&&2!=r||t(),3==r&&(r=e.la(),e.M(r)),1==e.G()>>8)return e.M(3),n=e.la()>>6,0!=n&&1!=n||t(),0==e.la()&&t(),n=e.la(),r=e.Qb(),e=e.Qb(),(1073741824*((14&n)>>1)+((65534&r)<<14|(65534&e)>>1))/9e4;e.seek(n+188),r=e.la(),71!=r&&(e.seek(n+192),r=e.la()),71!=r&&(e.seek(n+204),r=e.la()),71!=r&&t(),e.be(1)}}function Ta(e,t,n){return e=st(e,t),Hn(e)?(t=new Bn(null),jn(t,e),t.Rc(n)):0}function Sa(e){var t=new Set,n=[];e=d(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var i=lt(r)[0];t.has(i)||(n.push(r),t.add(i))}return n}function wa(e,t){for(var n=Ra[e],r=0;r<n.length;r++)for(var i=0;i<t.length;i++)if(n[r].test(t[i].trim()))return t[i].trim();return"text"==e?"":null}function xa(e,t){if(1==t.length)return t[0];var n=wa(e,t);if(null!=n)return n;throw new ve(2,4,4025,t)}function Ia(e,t,n,r){return p((function i(){var o,a,s,u,l,c,d,f,h;return k(i,(function(i){switch(i.j){case 1:return o=mn,a=r.segments[0].a,s=new ee(a),u=s.ja.split(".").pop(),l=Ma[t],(c=l[u])?i["return"](c):t==o.qa?n&&"vtt"!=n?i["return"]("application/mp4"):i["return"]("text/vtt"):(d=He([a],e.c.retryParameters),d.method="HEAD",w(i,La(e,d,1),2));case 2:if(f=i.o,h=f.headers["content-type"],!h)throw new ve(2,4,4021,u);return i["return"](h.split(";")[0])}}))}))}function Aa(e,t){var n=e.getAttribute(t);if(!n)throw new ve(2,4,4023,t);return n.value}function Da(e,t){var n=Ko.Ta(e,t);if(!n)throw new ve(2,4,4024,t);return n}q("shaka.net.DataUriPlugin",Zo),Zo.parse=function(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new ve(2,1,1004,t);if(n=n.slice(1).join(":").split(","),2>n.length)throw new ve(2,1,1004,t);var r=n[0];n=e.decodeURIComponent(n.slice(1).join(",")),r=r.split(";");var i=null;if(1<r.length&&(i=r[1]),"base64"==i)t=wt.Aa(n).buffer;else{if(i)throw new ve(2,1,1005,t);t=Et(n)}return{data:t,contentType:r[0]}},Ue("data",Zo),q("shaka.hls.HlsParser",ea),n=ea.prototype,n.configure=function(e){this.c=e},n.start=function(e,t){var n=this;return p((function r(){var i,o;return k(r,(function(r){switch(r.j){case 1:return n.g=t,w(r,La(n,He([e],n.c.retryParameters),0),2);case 2:return i=r.o,n.v=i.uri,w(r,na(n,i.data),3);case 3:return o=n.R,0<o&&n.h.P(o),r["return"](n.m)}}))}))},n.stop=function(){this.h&&(this.h.stop(),this.h=null);var e=[];return this.i&&(e.push(this.i.destroy()),this.i=null),this.c=this.g=null,this.D.clear(),this.T.clear(),this.a.clear(),this.m=null,Promise.all(e)},n.update=function(){if(this.f!=Fa.Qa){for(var e=[],t=d(this.a.values()),n=t.next();!n.done;n=t.next())e.push(ta(this,n.value));return Promise.all(e)}},n.onExpirationUpdated=function(){};var Ra={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},Ma={audio:{mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",ts:"video/mp2t"},video:{mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}};function Ca(e){p((function t(){var n,r;return k(t,(function(t){switch(t.j){case 1:return e.g?(I(t,2),w(t,e.update(),4)):t["return"]();case 4:n=e.R,e.h.P(n),D(t,0);break;case 2:r=R(t),r.severity=1,e.g.onError(r),e.h.P(.1),x(t)}}))}))}function Na(e,t){e.f=t,e.b&&e.b.Ub(e.f==Fa.Qa),e.f!=Fa.Qa||e.h.stop()}function La(e,t,n){if(!e.i)throw new ve(2,7,7001);return t=e.g.networkingEngine.request(n,t),Fe(e.i,t),t.promise}var Pa={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Aa(e,"METHOD");return Mr("HLS SAMPLE-AES-CENC","SAMPLE-AES-CENC will no longer be supported, see Issue #1227"),["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].includes(t)?(t=Aa(e,"URI"),t=Zo.parse(t),t=new Uint8Array(t.data),t=pn("com.widevine.alpha",[{initDataType:"cenc",initData:t}]),(e=Ho(e,"KEYID"))&&(t.keyIds=[e.substr(2).toLowerCase()]),t):null}},Oa="VOD",Fa={Qa:Oa,me:"EVENT",zd:"LIVE"};function ka(){this.a=new Map}function Ba(e,t,n){Ua(e,t).text=n}function Ua(e,t){return e.a.has(t)||e.a.set(t,new Ha),e.a.get(t)}function Ha(){this.text=this.variant=null}function ja(e,t){this.a=e,this.b=new Set([e]),t=t||[];for(var n=d(t),r=n.next();!r.done;r=n.next())this.add(r.value)}function Ka(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var r=t.audio;n=!(n.channelsCount==r.channelsCount&&Va(n,r)&&qa(n.roles,r.roles))}return!n&&(n=e.video&&t.video)&&(n=e.video,r=t.video,n=!(Va(n,r)&&qa(n.roles,r.roles))),!n}function Va(e,t){if(e.mimeType!=t.mimeType)return!1;var n=e.codecs.split(",").map((function(e){return lt(e)[0]})),r=t.codecs.split(",").map((function(e){return lt(e)[0]}));if(n.length!=r.length)return!1;n.sort(),r.sort();for(var i=0;i<n.length;i++)if(n[i]!=r[i])return!1;return!0}function qa(e,t){var n=new Set(e),r=new Set(t);if(n["delete"]("main"),r["delete"]("main"),n.size!=r.size)return!1;n=d(n);for(var i=n.next();!i.done;i=n.next())if(!r.has(i.value))return!1;return!0}function Ga(e){this.a=e,this.b=new Ya(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0)}function Ya(e,t,n){this.c=e,this.b=t,this.a=n}function za(e,t){var n=sr(t),r=lr(n,e.map((function(e){return ur(e)})));return r?e.filter((function(e){return r==ur(e)})):[]}function Wa(e,t){return e.filter((function(e){var n=e.audio;return e=e.video,n&&0<=n.roles.indexOf(t)||e&&0<=e.roles.indexOf(t)}))}function Xa(){this.a=Ja,this.b=(new Map).set(Ja,2).set(Qa,1)}function $a(e,t,n){e.b.set(Ja,n).set(Qa,t)}_o.kd("m3u8",ea),_o.Bb("application/x-mpegurl",ea),_o.Bb("application/vnd.apple.mpegurl",ea),ja.prototype.add=function(e){return!!Ka(this.a,e)&&(this.b.add(e),!0)},ja.prototype.values=function(){return this.b.values()},Ga.prototype.create=function(e){var t=this,n=e.filter((function(e){return Ka(t.a,e)}));return n.length?new ja(n[0],n):this.b.create(e)},Ya.prototype.create=function(e){var t=[];t=za(e,this.c);var n=e.filter((function(e){return e.primary}));for(t=t.length?t:n.length?n:e,this.b&&(e=Wa(t,this.b),e.length&&(t=e)),this.a&&(e=Tr(t,this.a),e.length&&(t=e)),e=new ja(t[0]),t=d(t),n=t.next();!n.done;n=t.next())n=n.value,Ka(e.a,n)&&e.add(n);return e};var Qa=0,Ja=1;function Za(e,t){this.g=e,this.h=ns(e),this.a=e.a.currentTime,this.f=Date.now()/1e3,this.b=!1,this.i=t,this.c=function(){}}function es(e,t){e.c=t}function ts(e){this.a=e}function ns(e){if(e.a.paused||0==e.a.playbackRate||null==e.a.buffered)var t=!1;else e:{t=e.a.buffered,e=e.a.currentTime;for(var n=0;n<t.length;n++){var r=t.start(n),i=t.end(n);if(!(e<r||e>i-.5)){t=!0;break e}}t=!1}return t}function rs(e,t,n,r,i){var o=this;this.a=e,this.v=t,this.s=n,this.l=i,this.f=new $e,this.i=!1,this.m=e.readyState,this.c=!1,this.b=r,this.h=!1,this.f.w(e,"waiting",(function(){return is(o)})),this.g=new pe((function(){is(o)})).Na(.25)}function is(e){if(0!=e.a.readyState){if(e.a.seeking){if(!e.i)return}else e.i=!1;if(!e.a.paused){e.a.readyState!=e.m&&(e.c=!1,e.m=e.a.readyState);var t=e.s.smallGapLimit,n=e.a.currentTime,r=e.a.buffered;e:{if(r&&r.length&&!(1==r.length&&1e-6>r.end(0)-r.start(0)))for(var i=ht("Edge/")||ht("Trident/")||ht("Tizen")||ht("CrKey")?.5:.1,o=0;o<r.length;o++)if(r.start(o)>n&&(0==o||r.end(o-1)-n<=i)){i=o;break e}i=null}if(null==i)e.b&&(e=e.b,r=e.g,n=ns(r),i=r.a.currentTime,o=Date.now()/1e3,e.a==i&&e.h==n||(e.f=o,e.a=i,e.h=n,e.b=!1),i=o-e.f,i>=e.i&&n&&!e.b&&(e.c(e.a,i),e.b=!0,e.a=r.a.currentTime));else if(0!=i||e.h){o=r.start(i);var a=e.v.Ba();if(!(o>=a)){a=o-n,t=a<=t;var s=!1;.001>a||(t||e.c||(e.c=!0,n=new Ae("largegap",{currentTime:n,gapSize:a}),n.cancelable=!0,e.l(n),e.s.jumpLargeGaps&&!n.defaultPrevented&&(s=!0)),!t&&!s)||(0!=i&&r.end(i-1),e.a.currentTime=o)}}}}}function os(e){var t=this;this.c=e,this.a=new Set,this.b=new pe((function(){as(t,!1)})).Na(.25)}function as(e,t){for(var n=d(e.a),r=n.next();!r.done;r=n.next())r.value.g(e.c.currentTime,t)}function ss(e){var t=[];e=d(e);for(var n=e.next();!n.done;n=e.next()){n=d(n.value.variants);for(var r=n.next();!r.done;r=n.next())t.push(r.value)}return t}function us(e,t){for(var n=null,r=d(e),i=r.next();!i.done;i=r.next())i=i.value,t>=i.startTime&&(n=i);return n}function ls(e){this.c=e,this.a=null,this.b=function(){}}function cs(e,t){e.b=t}function ds(e){var t=this;this.a=e,this.f=!1,this.c=this.a.gc(),this.b=new pe((function(){t.a.Ld(.25*t.c)}))}function fs(e){e.b.stop();var t=e.f?0:e.c;if(0<=t)try{return void(e.a.gc()!=t&&e.a.rd(t))}catch(n){}e.b.Na(.25),0!=e.a.gc()&&e.a.rd(0)}function hs(e,t,n){this.a=e,this.f=t,this.g=n,this.h=!1,this.b=new $e,this.c=new vs(e),0<e.readyState?gs(this,n):ms(this,n)}function ps(e){return e.h?e.a.currentTime:e.g}function ms(e,t){e.g=t,e.b.ea(e.a,"loadedmetadata"),e.b.da(e.a,"loadedmetadata",(function(){gs(e,t)}))}function gs(e,t){.001>Math.abs(e.a.currentTime-t)?ys(e):(e.b.da(e.a,"seeking",(function(){ys(e)})),_s(e.c,0==e.a.currentTime?t:e.a.currentTime))}function ys(e){e.h=!0,e.b.w(e.a,"seeking",(function(){return e.f()}))}function vs(e){var t=this;this.b=e,this.h=10,this.g=this.f=this.c=0,this.a=new pe((function(){0>=t.c||t.b.currentTime!=t.f?t.a.stop():(t.b.currentTime=t.g,t.c--)}))}function _s(e,t){e.f=e.b.currentTime,e.g=t,e.c=e.h,e.b.currentTime=t,e.a.Na(.1)}function Es(e){function t(){null==n.c?n.f=!0:(n.b.da(n.a,"seeking",(function(){n.f=!0})),n.a.currentTime=n.c)}var n=this;this.a=e,this.f=!1,this.c=null,this.b=new $e,0==this.a.readyState?this.b.da(this.a,"loadedmetadata",t):t()}function bs(e,t,n,r,i,o){var a=this;this.b=e,this.a=t.presentationTimeline,this.B=t.minBufferTime||0,this.g=n,this.v=i,this.l=null,this.f=new rs(e,t.presentationTimeline,n,Is(e,n),o),this.c=new hs(e,(function(){var e=a.f;e.i=!0,e.h=!1,e.c=!1;var t=ps(a.c);return e=ws(a,t),.001<Math.abs(e-t)&&(t=(new Date).getTime()/1e3,!a.l||a.l<t-1)?(a.l=t,t=a.c,0<t.a.readyState?_s(t.c,e):ms(t,e),e=void 0):(a.v(),e=void 0),e}),Ts(this,r)),this.i=new pe((function(){if(0!=a.b.readyState&&!a.b.paused){var e=a.b.currentTime,t=a.a.ob(),n=a.a.Ba();3>n-t&&(t=n-3),e<t&&(e=ws(a,e),a.b.currentTime=e)}})).Na(.25)}function Ts(e,t){return null==t?t=1/0>e.a.Y()?e.a.ob():e.a.Ba():0>t&&(t=e.a.Ba()+t),Ss(e,xs(e,t))}function Ss(e,t){var n=e.a.Y();return t>=n?n-e.g.durationBackoff:t}function ws(e,t){var n=ln.bind(null,e.b.buffered),r=Math.max(e.B,e.g.rebufferingGoal),i=e.g.safeSeekOffset,o=e.a.ob(),a=e.a.Ba(),s=e.a.Y();3>a-o&&(o=a-3);var u=e.a.Kb(r),l=e.a.Kb(i);return r=e.a.Kb(r+i),t>=s?Ss(e,t):t>a?a:t<o?n(l)?l:r:t>=u||n(t)?t:r}function xs(e,t){var n=e.a.ob();return t<n?n:(n=e.a.Ba(),t>n?n:t)}function Is(e,t){if(!t.stallEnabled)return null;var n=t.stallSkip,r=new Za(new ts(e),t.stallThreshold);return es(r,(function(){e.currentTime+=n})),r}function As(){this.b=function(){},this.a=new Set}function Ds(e,t){e.b=t}function Rs(e){var t=this;this.h=e,this.f=new Map,this.a=function(){},this.b=function(){},this.c=function(){},this.i=[{eb:null,cb:Ns,Wa:function(e,n){return t.a(e,n)}},{eb:Cs,cb:Ns,Wa:function(e,n){return t.a(e,n)}},{eb:Ls,cb:Ns,Wa:function(e,n){return t.a(e,n)}},{eb:Ns,cb:Cs,Wa:function(e,n){return t.b(e,n)}},{eb:Ns,cb:Ls,Wa:function(e,n){return t.b(e,n)}},{eb:Cs,cb:Ls,Wa:function(e,n){return t.c(e,n)}},{eb:Ls,cb:Cs,Wa:function(e,n){return t.c(e,n)}}]}function Ms(e,t,n,r){e.a=t,e.b=n,e.c=r}Za.prototype.release=function(){this.g=null,this.c=function(){}},rs.prototype.release=function(){this.f&&(this.f.release(),this.f=null),null!=this.g&&(this.g.stop(),this.g=null),this.b&&(this.b.release(),this.b=null),this.a=this.v=this.l=null},rs.prototype.dd=function(){this.h=!0,is(this)},os.prototype.release=function(){this.b.stop();for(var e=d(this.a),t=e.next();!t.done;t=e.next())t.value.release();this.a.clear()},ls.prototype.release=function(){this.a=this.c=null,this.b=function(){}},ls.prototype.g=function(e){var t=this.a,n=this.c.periods;e=us(n,e)||n[0],t!=e&&this.b(e),this.a=e},ds.prototype.release=function(){this.b&&(this.b.stop(),this.b=null),this.a=null},ds.prototype.set=function(e){this.c=e,fs(this)},hs.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.c&&(this.c.release(),this.c=null),this.f=function(){},this.a=null},vs.prototype.release=function(){this.a&&(this.a.stop(),this.a=null),this.b=null},Es.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.a=null},Es.prototype.m=function(e){this.c=this.f?this.c:e},Es.prototype.h=function(){return(this.f?this.a.currentTime:this.c)||0},Es.prototype.s=function(){},bs.prototype.release=function(){this.c&&(this.c.release(),this.c=null),this.f&&(this.f.release(),this.f=null),this.i&&(this.i.stop(),this.i=null),this.b=this.c=this.a=this.g=null,this.v=function(){}},bs.prototype.m=function(e){var t=this.c;0<t.a.readyState?_s(t.c,e):ms(t,e)},bs.prototype.h=function(){var e=ps(this.c);return 0<this.b.readyState&&!this.b.paused?xs(this,e):e},bs.prototype.s=function(){this.f.dd()},As.prototype.release=function(){this.b=function(){},this.a.clear()},Rs.prototype.release=function(){this.h=null,this.f.clear(),this.a=function(){},this.b=function(){},this.c=function(){}},Rs.prototype.g=function(e,t){for(var n=d(this.h.a),r=n.next();!r.done;r=n.next()){r=r.value;var i=this.f.get(r),o=e<r.startTime?Cs:e>r.endTime?Ls:Ns;this.f.set(r,o);for(var a=d(this.i),s=a.next();!s.done;s=a.next())s=s.value,s.eb==i&&s.cb==o&&s.Wa(r,t)}};var Cs=1,Ns=2,Ls=3;function Ps(e,t){this.a=t,this.c=e,this.g=null,this.l=1,this.v=Promise.resolve(),this.h=[],this.i=new Map,this.b=new Map,this.s=!1,this.F=null,this.D=this.f=this.m=!1,this.B=0}function Os(e){return ks(e,"audio")}function Fs(e){return ks(e,"video")}function ks(e,t){var n=e.b.get(t);return n?n.Ka||n.stream:null}function Bs(e,t){return p((function n(){var r,i,o,a,s,u,l,c,d;return k(n,(function(n){switch(n.j){case 1:return r=mn,w(n,er(e.a.J,r.qa),2);case 2:return e.B++,e.D=!1,i=e.B,o=e.a.J,a=new Map,s=new Set,a.set(r.qa,t),s.add(t),w(n,o.init(a,!1),3);case 3:return e.f?n["return"]():w(n,Ws(e,s),4);case 4:if(e.f)return n["return"]();u=e.a.J.g.isTextVisible()||e.g.alwaysStreamText,e.B!=i||e.b.has(r.qa)||e.D||!u||(l=e.a.Ua(),c=cu(e,l),d=Ys(t,c,0),e.b.set(r.qa,d),pu(e,d,0)),x(n)}}))}))}function Us(e,t){var n=e.b.get("video");if(n){var r=n.stream;if(r)if(t){var i=r.trickModeVideo;i&&!n.Ka&&(js(e,i,!1,0,!1),n.Ka=r)}else(r=n.Ka)&&(n.Ka=null,js(e,r,!0,0,!1))}}function Hs(e,t,n,r){t.video&&js(e,t.video,n,r,!1),t.audio&&js(e,t.audio,n,r,!1)}function js(e,t,n,r,i){var o=e.b.get(t.type);if(!o&&"text"==t.type&&e.g.ignoreTextStreamFailures)Bs(e,t);else if(o){var a=du(e,t),s=Array.from(e.b.values()).every((function(e){return e.ia==o.ia}));n&&a!=o.ia&&s?e.b.forEach((function(t){qs(e,t)})):(o.Ka&&(t.trickModeVideo?(o.Ka=t,t=t.trickModeVideo):o.Ka=null),(s=e.h[a])&&s.Cb&&(s=e.i.get(t.id))&&s.Cb&&(o.stream!=t||i)&&("text"==t.type&&zn(e.a.J,st(t.mimeType,t.codecs)),o.stream=t,o.jc=!0,Ks(e,o,a)&&o.Ob.abort(),n&&(o.Ra?o.yc=!0:o.Ja?(o.Oa=!0,o.bc=r,o.yc=!0):(mu(o),hu(e,o,!0,r)["catch"]((function(t){e.a&&e.a.onError(t)}))))))}}function Ks(e,t,n){if(!t.Ob)return!1;var r=e.a.Ua(),i=$n(e.a.J,t.type);if(n=(n=Zs(e,t,r,i,n))&&n.a?n.a-n.b:null,null==n)return!1;var o=t.stream.initSegmentReference;return o&&(n+=(o.a?o.a-o.b:null)||0),o=e.a.getBandwidthEstimate(),8*n/o<i-r-Math.max(e.c.minBufferTime||0,e.g.rebufferingGoal)||t.Ob.b.a>n}function Vs(e){function t(t){var i=e.a.J;return"text"==t?(t=i.a,t=null!=t.a&&null!=t.b&&(n>=t.a&&n<t.b)):(t=Jn(i,t),t=ln(t,n,r)),t}var n=e.a.Ua(),r=e.g.smallGapLimit,i=cu(e,n);if(it(e.b.values(),(function(e){return e.ia==i})))for(var o=d(e.b.keys()),a=o.next();!a.done;a=o.next())a=a.value,t(a)||qs(e,e.b.get(a));else it(e.b.keys(),t)||e.b.forEach((function(t){qs(e,t)}))}function qs(e,t){t.Ra||t.Oa||(t.Ja?(t.Oa=!0,t.bc=0):null==Xn(e.a.J,t.type)?null==t.Fa&&pu(e,t,0):(mu(t),hu(e,t,!1,0)["catch"]((function(t){e.a&&e.a.onError(t)}))))}function Gs(e,t,n,r,i){return p((function o(){var a,s,u,l,c,d,f;return k(o,(function(o){switch(o.j){case 1:return a=e.a.Ua(),s=cu(e,a),u=mn,l=new Map,c=new Set,t&&(l.set(u.Db,t),c.add(t)),n&&(l.set(u.Pa,n),c.add(n)),r&&(l.set(u.qa,r),c.add(r)),d=e.a.J,f=e.g.forceTransmuxTS,w(o,d.init(l,f),2);case 2:return e.f?o["return"]():(Xs(e),w(o,Ws(e,c),3));case 3:if(e.f)return o["return"]();l.forEach((function(t,n){if(!e.b.has(n)){var r=Ys(t,s,i);e.b.set(n,r),pu(e,r,0)}})),x(o)}}))}))}function Ys(e,t,n){return{stream:e,type:e.type,rb:null,Ca:null,Ka:null,jc:!0,ia:t,endOfStream:!1,Ja:!1,Fa:null,Oa:!1,bc:0,yc:!1,Ra:!1,jd:!1,Mb:!1,md:n||0,Ob:null}}function zs(e,t){var n=e.h[t];if(n)return n.promise;n={promise:new _e,Cb:!1},e.h[t]=n;for(var r=new Set,i=d(e.c.periods[t].variants),o=i.next();!o.done;o=i.next())o=o.value,o.video&&r.add(o.video),o.video&&o.video.trickModeVideo&&r.add(o.video.trickModeVideo),o.audio&&r.add(o.audio);for(i=d(e.c.periods[t].textStreams),o=i.next();!o.done;o=i.next())r.add(o.value);return e.v=e.v.then(function(){if(!this.f)return Ws(this,r)}.bind(e)).then(function(){this.f||(this.h[t].promise.resolve(),this.h[t].Cb=!0)}.bind(e))["catch"](function(e){this.f||(this.h[t].promise["catch"]((function(){})),this.h[t].promise.reject(),delete this.h[t],this.a.onError(e))}.bind(e)),n.promise}function Ws(e,t){return p((function n(){var r,i,o,a,s,u,l;return k(n,(function(n){switch(n.j){case 1:r=[];for(var c=d(t),f=c.next();!f.done;f=c.next())i=f.value,(o=e.i.get(i.id))?r.push(o.promise):(e.i.set(i.id,{promise:new _e,Cb:!1}),r.push(i.createSegmentIndex()));return I(n,2),w(n,Promise.all(r),4);case 4:if(e.f)return n["return"]();D(n,3);break;case 2:if(a=R(n),e.f)return n["return"]();for(n=d(t),f=n.next();!f.done;f=n.next())s=f.value,e.i.get(s.id).promise["catch"]((function(){})),e.i.get(s.id).promise.reject(),e.i["delete"](s.id);throw a;case 3:for(c=d(t),f=c.next();!f.done;f=c.next())u=f.value,l=e.i.get(u.id),l.Cb||(l.promise.resolve(),l.Cb=!0);x(n)}}))}))}function Xs(e){var t=e.c.presentationTimeline.Y();1/0>t?e.a.J.wa(t):e.a.J.wa(Math.pow(2,32))}function $s(e,t){if(!e.f&&!t.Ja&&null!=t.Fa&&!t.Ra)if(t.Fa=null,t.Oa)hu(e,t,t.yc,t.bc);else{try{var n=Qs(e,t);null!=n&&(pu(e,t,n),t.Mb=!1)}catch(r){return void gu(e,r)}n=Array.from(e.b.values()),su(e,t),e.s&&n.every((function(e){return e.endOfStream}))&&e.a.J.endOfStream().then(function(){if(!this.f){var e=this.a.J.Y();0!=e&&e<this.c.presentationTimeline.Y()&&this.c.presentationTimeline.wa(e)}}.bind(e))}}function Qs(e,t){if(uu(t))return e.a.J.tc(t.stream.originalId||""),null;var n=e.a.Ua(),r=Js(e,t,n),i=du(e,t.stream),o=cu(e,r),a=Qn(e.a.J,t.type,n),s=Math.max(e.c.minBufferTime||0,e.g.rebufferingGoal,e.g.bufferingGoal)*e.l;if(r>=e.c.presentationTimeline.Y())return t.endOfStream=!0,"video"==t.type&&(r=e.b.get("text"))&&"application/cea-608"==r.stream.mimeType&&(r.endOfStream=!0),null;if(t.endOfStream=!1,t.ia=o,o!=i)return null;if(a>=s)return.5;if(o=$n(e.a.J,t.type),o=Zs(e,t,n,o,i),!o)return 1;var u=1/0;return Array.from(e.b.values()).forEach((function(t){uu(t)||(t=Js(e,t,n),u=Math.min(u,t))})),r>=u+e.c.presentationTimeline.a?1:(t.md=0,tu(e,t,n,i,o),null)}function Js(e,t,n){return t.rb&&t.Ca?(n=du(e,t.rb),e.c.periods[n].startTime+t.Ca.endTime):Math.max(n,t.md)}function Zs(e,t,n,r,i){if(t.Ca&&t.stream==t.rb)return eu(e,t,i,t.Ca.position+1);if(t.Ca?(n=du(e,t.rb),n=t.stream.findSegmentPosition(Math.max(0,e.c.periods[n].startTime+t.Ca.endTime-e.c.periods[i].startTime))):n=t.stream.findSegmentPosition(Math.max(0,(r||n)-e.c.periods[i].startTime)),null==n)return null;var o=null;return null==r&&(o=eu(e,t,i,Math.max(0,n-1))),o||eu(e,t,i,n)}function eu(e,t,n,r){return n=e.c.periods[n],t=t.stream.getSegmentReference(r),t?(r=e.c.presentationTimeline,e=r.Lb(),r=r.pb(),n.startTime+t.endTime<e||n.startTime+t.startTime>r?null:t):null}function tu(e,t,n,r,i){var o=e.c.periods[r],a=t.stream,s=e.c.presentationTimeline.Y(),u=e.c.periods[r+1];r=ru(e,t,r,Math.max(0,o.startTime-.1),u?u.startTime+.01:s),t.Ja=!0,t.jc=!1,s=fu(e,t,i),Promise.all([r,s]).then(function(e){if(!this.f&&!this.m)return iu(this,t,n,o,a,i,e[1])}.bind(e)).then(function(){this.f||this.m||(t.Ja=!1,t.jd=!1,t.Oa||this.a.dd(),pu(this,t,0),au(this,a))}.bind(e))["catch"](function(e){this.f||this.m||(t.Ja=!1,"text"==t.type&&this.g.ignoreTextStreamFailures?this.b["delete"]("text"):7001==e.code?(t.Ja=!1,t.Fa=null,pu(this,t,0)):3017==e.code?nu(this,t,e):(t.Mb=!0,e.severity=2,gu(this,e)))}.bind(e))}function nu(e,t,n){if(!Array.from(e.b.values()).some((function(e){return e!=t&&e.jd}))){var r=Math.round(100*e.l);if(20<r)e.l-=.2;else{if(!(4<r))return t.Mb=!0,e.m=!0,void e.a.onError(n);e.l-=.04}t.jd=!0}pu(e,t,4)}function ru(e,t,n,r,i){return t.jc?(n=tr(e.a.J,t.type,e.c.periods[n].startTime-t.stream.presentationTimeOffset,r,i),t.stream.initSegmentReference?(e=fu(e,t,t.stream.initSegmentReference).then(function(e){if(!this.f)return Zn(this.a.J,t.type,e,null,null,t.stream.closedCaptions&&0<t.stream.closedCaptions.size)}.bind(e))["catch"]((function(e){return t.jc=!0,Promise.reject(e)})),Promise.all([n,e])):n):Promise.resolve()}function iu(e,t,n,r,i,o,a){var s=i.closedCaptions&&0<i.closedCaptions.size;return null!=i.emsgSchemeIdUris&&0<i.emsgSchemeIdUris.length&&(new Ei).fa("emsg",e.L.bind(e,r,o,i.emsgSchemeIdUris)).parse(a),ou(e,t,n).then(function(){if(!this.f)return Zn(this.a.J,t.type,a,o.startTime+r.startTime,o.endTime+r.startTime,s)}.bind(e)).then(function(){if(!this.f)return t.rb=i,t.Ca=o,Promise.resolve()}.bind(e))}function ou(e,t,n){var r=Math.max(e.g.bufferBehind,e.c.presentationTimeline.a),i=Xn(e.a.J,t.type);return null==i?Promise.resolve():(n=n-i-r,0>=n?Promise.resolve():e.a.J.remove(t.type,i,i+n).then(function(){}.bind(e)))}function au(e,t){if(!e.s){var n=Array.from(e.b.values());if(1==n.length&&"text"==n[0].type||(e.s=n.every((function(e){return"text"==e.type||!e.Oa&&!e.Ra&&e.Ca}))),e.s){for(n=du(e,t),e.h[n]||zs(e,n).then(function(){this.f||this.a.Nd()}.bind(e))["catch"](fn.kc),n=0;n<e.c.periods.length;++n)zs(e,n)["catch"](fn.kc);e.a.vf&&e.a.vf()}}}function su(e,t){var n=du(e,t.stream);if(t.ia!=n){var r=t.ia,i=Array.from(e.b.values());i.every((function(e){return e.ia==r||uu(e)}))&&i.every(lu)&&zs(e,r).then(function(){if(!this.f&&i.every(function(e){var t=lu(e),n=du(this,e.stream);return!!uu(e)||t&&e.ia==r&&n!=r}.bind(this))){var e=this.c.periods[r],t=this.a.Od(e),n=new Map;t.variant&&t.variant.video&&n.set("video",t.variant.video),t.variant&&t.variant.audio&&n.set("audio",t.variant.audio),t.text&&n.set("text",t.text),t=d(this.b.keys());for(var o=t.next();!o.done;o=t.next())if(o=o.value,!n.has(o)&&"text"!=o)return void this.a.onError(new ve(2,5,5005));for(t=d(Array.from(n.keys())),o=t.next();!o.done;o=t.next())if(o=o.value,!this.b.has(o)){if("text"!=o)return void this.a.onError(new ve(2,5,5005));Gs(this,null,null,n.get("text"),e.startTime),n["delete"](o)}for(t=d(Array.from(this.b.keys())),o=t.next();!o.done;o=t.next()){o=o.value;var a=this.b.get(o),s=n.get(o);if(s){var u=uu(a);u&&(a.ia=r,a.md=e.startTime),js(this,s,!1,0,!1),u&&uu(a)||pu(this,this.b.get(o),0)}else this.b["delete"](o)}this.a.Nd()}}.bind(e))["catch"](fn.kc)}}function uu(e){return e&&"text"==e.type&&"application/cea-608"==e.stream.mimeType}function lu(e){return!e.Ja&&null==e.Fa&&!e.Oa&&!e.Ra}function cu(e,t){var n=us(e.c.periods,t+gn);return n?e.c.periods.indexOf(n):0}function du(e,t){for(var n=e.c.periods,r=0;r<n.length;r++){for(var i=n[r],o=new Set,a=d(i.variants),s=a.next();!s.done;s=a.next())s=s.value,s.audio&&o.add(s.audio),s.video&&o.add(s.video),s.video&&s.video.trickModeVideo&&o.add(s.video.trickModeVideo);for(i=d(i.textStreams),a=i.next();!a.done;a=i.next())o.add(a.value);if(o.has(t))return r}return-1}function fu(e,t,n){return n=bo(n.c(),n.b,n.a,e.g.retryParameters),e=e.a.tb.request(1,n),t.Ob=e,e.promise.then((function(e){return t.Ob=null,e.data}))}function hu(e,t,n,r){return p((function i(){var o,a,s;return k(i,(function(i){switch(i.j){case 1:return t.Oa=!1,t.yc=!1,t.bc=0,t.Ra=!0,r?(a=e.a.Ua(),s=e.a.J.Y(),o=e.a.J.remove(t.type,a+r,s)):o=er(e.a.J,t.type).then(function(){if(!this.f&&n)return this.a.J.flush(t.type)}.bind(e)),w(i,o,2);case 2:if(e.f)return i["return"]();t.rb=null,t.Ca=null,t.Ra=!1,t.endOfStream=!1,pu(e,t,0),x(i)}}))}))}function pu(e,t,n){t.Fa=new he((function(){return p((function n(){var r;return k(n,(function(n){switch(n.j){case 1:return I(n,2),w(n,$s(e,t),4);case 4:D(n,0);break;case 2:r=R(n),e.a&&e.a.onError(r),x(n)}}))}))})).P(n)}function mu(e){null!=e.Fa&&(e.Fa.stop(),e.Fa=null)}function gu(e,t){ge(e.F).then(function(){this.f||(this.a.onError(t),t.handled||this.g.failureCallback(t))}.bind(e))}function yu(e,t,n,r,i,o){if(200<=n&&299>=n&&202!=n)return{uri:i||r,fd:r,data:t,headers:e,fromCache:!!e["x-shaka-from-cache"]};i=null;try{i=_t(t)}catch(a){}throw new ve(401==n||403==n?2:1,1,1001,r,n,i,e,o)}function vu(e,t,n,r){var i=new vu.b;ot(t.headers).forEach((function(e,t){i.append(t,e)}));var o=new vu.a,a={Ad:!1,ie:!1};if(e=vu.l(e,n,{body:t.body||void 0,headers:i,method:t.method,signal:o.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},a,r),e=new Ee(e,(function(){return a.Ad=!0,o.abort(),Promise.resolve()})),t=t.retryParameters.timeout){var s=new pe((function(){a.ie=!0,o.abort()}));s.P(t/1e3),e["finally"]((function(){s.stop()}))}return e}function _u(e,t,n,r){var i=new _u.f,o=Date.now(),a=0,s=new Promise((function(s,u){for(var l in i.open(t.method,e,!0),i.responseType="arraybuffer",i.timeout=t.retryParameters.timeout,i.withCredentials=t.allowCrossSiteCredentials,i.onabort=function(){u(new ve(1,1,7001,e,n))},i.onload=function(t){t=t.target;var r=t.getAllResponseHeaders().trim().split("\r\n"),i={};r=d(r);for(var o=r.next();!o.done;o=r.next())o=o.value.split(": "),i[o[0].toLowerCase()]=o.slice(1).join(": ");try{var a=yu(i,t.response,t.status,e,t.responseURL,n);s(a)}catch(l){u(l)}},i.onerror=function(t){u(new ve(1,1,1002,e,t,n))},i.ontimeout=function(){u(new ve(1,1,1003,e,n))},i.onprogress=function(e){var t=Date.now();(100<t-o||e.lengthComputable&&e.loaded==e.total)&&(r(t-o,e.loaded-a,e.total-e.loaded),a=e.loaded,o=t)},t.headers)i.setRequestHeader(l.toLowerCase(),t.headers[l]);i.send(t.body)}));return new Ee(s,(function(){return i.abort(),Promise.resolve()}))}function Eu(){this.a=this.f=this.b=0,this.c=new Map,this.g=0}function bu(e,t){e.b+=t;var n=e.g;return e.g++,e.c.set(n,t),n}function Tu(e,t,n){this.h=e,this.b=new Map,this.c=!1,this.g=t,this.f=n,this.a=new Eu}function Su(e,t,n,r,i,o){var a=bu(e.a,r);r=e.b.get(t)||Promise.resolve(),e.b.set(t,r.then((function(){return p((function t(){var r,s,u,l;return k(t,(function(t){switch(t.j){case 1:return w(t,xu(e,n),2);case 2:if(r=t.o,e.c)throw new ve(2,9,7001);if(i){s=new Uint8Array(r),u=new Ii(s);for(var c=d(u.data),f=c.next();!f.done;f=c.next())l=f.value,e.f(l)}return e.a.close(a,r.byteLength),c=e.a,e.g(0==c.b?0:c.f/c.b,e.a.a),t["return"](o(r))}}))}))})))}function wu(e){return p((function t(){return k(t,(function(t){switch(t.j){case 1:return w(t,Promise.all(e.b.values()),2);case 2:return t["return"](e.a.a)}}))}))}function xu(e,t){return p((function n(){var r,i;return k(n,(function(n){switch(n.j){case 1:return r=e.h.request(1,t),w(n,r.promise,2);case 2:return i=n.o,n["return"](i.data)}}))}))}function Iu(e,t){var n=this;this.c=e,this.b=e.objectStore(t),this.a=new _e,e.onabort=function(e){e.preventDefault(),n.a.reject()},e.onerror=function(e){e.preventDefault(),n.a.reject()},e.oncomplete=function(){n.a.resolve()}}function Au(e,t){return new Promise((function(n,r){var i=e.b.openCursor();i.onerror=r,i.onsuccess=function(e){if(e=e.target.result,!e)return n();t(e.key,e.value,e),e["continue"]()}}))}function Du(e){this.b=e,this.a=[]}function Ru(e,t){return Cu(e,t,"readonly")}function Mu(e,t){return Cu(e,t,"readwrite")}function Cu(e,t,n){n=e.b.transaction([t],n);var r=new Iu(n,t);return e.a.push(r),r.promise().then((function(){Ne(e.a,r)}),(function(){Ne(e.a,r)})),r}function Nu(e){this.a=new Du(e)}function Lu(){this.a=new Map}function Pu(e){var t=null;if(e.a.forEach((function(e,n){e.getCells().forEach((function(e,r){e.hasFixedKeySpace()||t||(t={path:{ua:n,aa:r},aa:e})}))})),t)return t;throw new ve(2,9,9013,"Could not find a cell that supports add-operations")}function Ou(e,t){e.a.forEach((function(e,n){e.getCells().forEach((function(e,r){t({ua:n,aa:r},e)}))}))}function Fu(e,t,n){if(e=e.a.get(t),!e)throw new ve(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new ve(2,9,9013,"Could not find cell with name "+n);return t}function ku(e,t){e.a.forEach((function(e){t(e.getEmeSessionCell())}))}function Bu(e){var t=Array.from(e.a.keys());if(!t.length)throw new ve(2,9,9e3,"No supported storage mechanisms found");return e.a.get(t[0]).getEmeSessionCell()}function Uu(e,t){Hu.set(e,t)}Ps.prototype.destroy=function(){for(var e=d(this.b.values()),t=e.next();!t.done;t=e.next())mu(t.value);return this.b.clear(),this.i.clear(),this.g=this.h=this.v=this.c=this.a=null,this.f=!0,Promise.resolve()},Ps.prototype.configure=function(e){this.g=e,this.F=new me({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0},!0)},Ps.prototype.start=function(){var e=this;return p((function t(){var n,r,i;return k(t,(function(t){switch(t.j){case 1:return n=e.a.Ua(),r=cu(e,n),i=e.a.Od(e.c.periods[r]),i.variant||i.text?w(t,Gs(e,i.variant?i.variant.audio:null,i.variant?i.variant.video:null,i.text,n),2):t["return"](new ve(2,5,5005));case 2:if(e.f)return t["return"]();e.a&&e.a.kf&&e.a.kf(),x(t)}}))}))},Ps.prototype.L=function(e,t,n,r){var i=r.reader.gd(),o=r.reader.gd(),a=r.reader.G(),s=r.reader.G(),u=r.reader.G(),l=r.reader.G();r=r.reader.Za(r.reader.I.byteLength-r.reader.ba()),e=e.startTime+t.startTime+s/a,n.includes(i)&&("urn:mpeg:dash:event:2012"==i?this.a.lf():this.a.onEvent(new Ae("emsg",{detail:{startTime:e,endTime:e+u/a,schemeIdUri:i,value:o,timescale:a,presentationTimeDelta:s,eventDuration:u,id:l,messageData:r}})))},q("shaka.net.HttpFetchPlugin",vu),vu.l=function(e,t,n,r,i){return p((function o(){var a,s,u,l,c,d,f,h,m,g,y,v,_,E;return k(o,(function(o){switch(o.j){case 1:return a=vu.g,s=vu.c,d=c=0,f=Date.now(),I(o,2),w(o,a(e,n),4);case 4:return u=o.o,h=u.clone().body.getReader(),g=(m=u.headers.get("Content-Length"))?parseInt(m,10):0,y=function(e){function t(){return p((function n(){var r,o;return k(n,(function(n){switch(n.j){case 1:return I(n,2),w(n,h.read(),4);case 4:r=n.o,D(n,3);break;case 2:return R(n),n["return"]();case 3:r.done||(c+=r.value.byteLength),o=Date.now(),(100<o-f||r.done)&&(i(o-f,c-d,g-c),d=c,f=o),r.done?e.close():(e.enqueue(r.value),t()),x(n)}}))}))}t()},new s({start:y}),w(o,u.arrayBuffer(),5);case 5:l=o.o,D(o,3);break;case 2:if(v=R(o),r.Ad)throw new ve(1,1,7001,e,t);if(r.ie)throw new ve(1,1,1003,e,t);throw new ve(1,1,1002,e,v,t);case 3:return _={},E=u.headers,E.forEach((function(e,t){_[t.trim()]=e})),o["return"](yu(_,l,u.status,e,u.url,t))}}))}))},vu.isSupported=function(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(fh){return!1}return!(!e.fetch||!e.AbortController)},vu.isSupported=vu.isSupported,vu.g=e.fetch,vu.a=e.AbortController,vu.c=e.ReadableStream,vu.b=e.Headers,vu.isSupported()&&(Ue("http",vu,2),Ue("https",vu,2)),q("shaka.net.HttpXHRPlugin",_u),_u.f=e.XMLHttpRequest,Ue("http",_u,1),Ue("https",_u,1),Eu.prototype.close=function(e,t){if(this.c.has(e)){var n=this.c.get(e);this.c["delete"](e),this.f+=n,this.a+=t}},Tu.prototype.destroy=function(){return this.c=!0,Promise.all(this.b.values()).then((function(){}),(function(){}))},Iu.prototype.abort=function(){try{this.c.abort()}catch(fh){}return this.a["catch"]((function(){}))},Iu.prototype.store=function(){return this.b},Iu.prototype.promise=function(){return this.a},Du.prototype.destroy=function(){return Promise.all(this.a.map((function(e){return e.abort()})))},Nu.prototype.destroy=function(){return this.a.destroy()},Nu.prototype.getAll=function(){var e=this;return p((function t(){var n,r;return k(t,(function(t){switch(t.j){case 1:return n=Ru(e.a,"session-ids"),r=[],w(t,Au(n,(function(e,t){r.push(t)})),2);case 2:return w(t,n.promise(),3);case 3:return t["return"](r)}}))}))},Nu.prototype.add=function(e){var t=Mu(this.a,"session-ids"),n=t.store();e=d(e);for(var r=e.next();!r.done;r=e.next())n.add(r.value);return t.promise()},Nu.prototype.remove=function(e){var t=this;return p((function n(){var r;return k(n,(function(n){switch(n.j){case 1:return r=Mu(t.a,"session-ids"),w(n,Au(r,(function(t,n,r){0<=e.indexOf(n.sessionId)&&r["delete"]()})),2);case 2:return w(n,r.promise(),0)}}))}))},Lu.prototype.destroy=function(){for(var e=[],t=d(this.a.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.a.clear(),Promise.all(e)},Lu.prototype.init=function(){var e=this;Hu.forEach((function(t,n){var r=t();r&&e.a.set(n,r)}));for(var t=[],n=d(this.a.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)},Lu.prototype.erase=function(){var e=this;return p((function t(){var n,r,i;return k(t,(function(t){switch(t.j){case 1:return n=Array.from(e.a.values()),r=0<n.length,r||(i=Hu,i.forEach((function(e){(e=e())&&n.push(e)}))),w(t,Promise.all(n.map((function(e){return e.erase()}))),2);case 2:if(!r)return w(t,Promise.all(n.map((function(e){return e.destroy()}))),0);t.A(0)}}))}))},q("shaka.offline.StorageMuxer.register",Uu),q("shaka.offline.StorageMuxer.unregister",(function(e){Hu["delete"](e)}));var Hu=new Map;function ju(e){this.a=new Du(e)}function Ku(e){return Promise.reject(new ve(2,9,9011,"Cannot add new value to "+e))}function Vu(e,t,n,r){e=Mu(e.a,t);var i=e.store();return n.forEach((function(e){i["delete"](e).onsuccess=function(){return r(e)}})),e.promise()}function qu(e,t,n){e=Ru(e.a,t);var r=e.store(),i={},o=[];return n.forEach((function(e){r.get(e).onsuccess=function(t){t=t.target.result,void 0==t&&o.push(e),i[e]=t}})),e.promise().then((function(){return o.length?Promise.reject(new ve(2,9,9012,"Could not find values for "+o)):n.map((function(e){return i[e]}))}))}function Gu(e){return{originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,periods:e.periods.map(Yu),sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata}}function Yu(e){return Qu(e),e.streams.forEach((function(){})),{startTime:e.startTime,streams:e.streams.map(zu)}}function zu(e){var t=e.cf?$u(e.cf):null;return{id:e.id,originalId:null,primary:e.primary,presentationTimeOffset:e.presentationTimeOffset,contentType:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:t,encrypted:e.encrypted,keyId:e.keyId,segments:e.segments.map(Wu),variantIds:e.variantIds}}function Wu(e){var t=$u(e.uri);return{startTime:e.startTime,endTime:e.endTime,dataKey:t}}function Xu(e){return{data:e.data}}function $u(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new ve(2,9,9004,"Could not parse uri "+e)}function Qu(e){var t=e.streams.filter((function(e){return"audio"==e.contentType})),n=e.streams.filter((function(e){return"video"==e.contentType}));if(!t.every((function(e){return e.variantIds}))||!n.every((function(e){return e.variantIds}))){t.forEach((function(e){e.variantIds=[]})),n.forEach((function(e){e.variantIds=[]}));var r=0;if(n.length&&!t.length){var i=r++;n.forEach((function(e){e.variantIds.push(i)}))}if(!n.length&&t.length){var o=r++;t.forEach((function(e){e.variantIds.push(o)}))}n.length&&t.length&&t.forEach((function(e){n.forEach((function(t){var n=r++;e.variantIds.push(n),t.variantIds.push(n)}))}))}}function Ju(e,t,n,r){this.a=new Du(e),this.c=t,this.b=n,this.f=r}function Zu(e,t,n){if(e.f)return Promise.reject(new ve(1,9,9011,"Cannot add new value to "+t));e=Mu(e.a,t);var r=e.store(),i=[];return n.forEach((function(e){r.add(e).onsuccess=function(e){i.push(e.target.result)}})),e.promise().then((function(){return i}))}function el(e,t,n,r){e=Mu(e.a,t);var i=e.store();return n.forEach((function(e){i["delete"](e).onsuccess=function(){return r(e)}})),e.promise()}function tl(e,t,n){e=Ru(e.a,t);var r=e.store(),i={},o=[];return n.forEach((function(e){var t=r.get(e);t.onsuccess=function(){void 0==t.result&&o.push(e),i[e]=t.result}})),e.promise().then((function(){return o.length?Promise.reject(new ve(1,9,9012,"Could not find values for "+o)):n.map((function(e){return i[e]}))}))}function nl(){this.g=this.c=this.b=this.a=this.f=null}function rl(){var t=new _e,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new ve(2,9,9001,n.error)),e.preventDefault()},t}function il(e,t,n,r){this.a=e,this.g=t,this.f=n,this.c=r,this.b=["offline:",e,"/",t,"/",n,"/",r].join("")}function ol(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),null==e)return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var r=e[3];return r&&null!=t?new il(t,n,r,Number(e[4])):null}function al(e,t){this.b=e,this.a=t}function sl(e,t){var n=new Eo(null,0);n.wa(t.duration);var r=t.periods.map((function(t){return ul(e,t,n)})),i=t.drmInfo?[t.drmInfo]:[];return t.drmInfo&&r.forEach((function(e){e.variants.forEach((function(e){e.drmInfos=i}))})),{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,periods:r}}function ul(e,t,n){var r=t.streams.filter((function(e){return"audio"==e.contentType})),i=t.streams.filter((function(e){return"video"==e.contentType}));return r=ll(e,r,i),i=t.streams.filter((function(e){return"text"==e.contentType})).map((function(t){return cl(e,t)})),t.streams.forEach((function(r){r=r.segments.map((function(t,n){return dl(e,n,t)})),n.ub(r,t.startTime)})),{startTime:t.startTime,variants:Array.from(r.values()),textStreams:i}}function ll(e,t,n){for(var r=new Set,i=d(t),o=i.next();!o.done;o=i.next()){var a=d(o.value.variantIds);for(o=a.next();!o.done;o=a.next())r.add(o.value)}for(i=d(n),o=i.next();!o.done;o=i.next())for(a=d(o.value.variantIds),o=a.next();!o.done;o=a.next())r.add(o.value);for(i=new Map,r=d(r),o=r.next();!o.done;o=r.next())o=o.value,i.set(o,{id:o,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0});for(t=d(t),r=t.next();!r.done;r=t.next())for(r=r.value,o=cl(e,r),a=d(r.variantIds),r=a.next();!r.done;r=a.next())r=i.get(r.value),r.language=o.language,r.primary=r.primary||o.primary,r.audio=o;for(n=d(n),t=n.next();!t.done;t=n.next())for(r=t.value,t=cl(e,r),o=d(r.variantIds),r=o.next();!r.done;r=o.next())r=i.get(r.value),r.primary=r.primary||t.primary,r.video=t;return i}function cl(e,t){var n=t.segments.map((function(t,n){return dl(e,n,t)})),r=new Xi(n);return n={id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return r.find(e)},getSegmentReference:function(e){return r.get(e)},initSegmentReference:null,presentationTimeOffset:t.presentationTimeOffset,mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate||void 0,kind:t.kind,encrypted:t.encrypted,keyId:t.keyId,language:t.language,label:t.label||null,type:t.contentType,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},null!=t.initSegmentKey&&(n.initSegmentReference=fl(e,t.initSegmentKey)),n}function dl(e,t,n){var r=new il("segment",e.b,e.a,n.dataKey);return new Yi(t,n.startTime,n.endTime,(function(){return[r.toString()]}),0,null)}function fl(e,t){var n=new il("segment",e.b,e.a,t);return new Gi((function(){return[n.toString()]}),0,null)}function hl(){this.a=null}function pl(e){var t=ol(e);return t&&"manifest"==t.a?pl.h(e):t&&"segment"==t.a?pl.i(t.key(),t):be(new ve(2,1,9004,e))}function ml(e,t,n){return p((function r(){var i,o,a,s,u,l;return k(r,(function(r){switch(r.j){case 1:i=[];for(var c=[],f=d(n),h=f.next();!h.done;h=f.next()){h=h.value;for(var p=!1,m=d(c),g=m.next();!g.done;g=m.next())if(g=g.value,yl(g.info,h)){g.sessionIds.push(h.sessionId),p=!0;break}p||c.push({info:h,sessionIds:[h.sessionId]})}o=d(c),a=o.next();case 2:if(a.done){r.A(4);break}return s=a.value,u=gl(e,t,s),w(r,u,5);case 5:l=r.o,i=i.concat(l),a=o.next(),r.A(2);break;case 4:return r["return"](i)}}))}))}function gl(e,t,n){return p((function r(){var i,o;return k(r,(function(r){switch(r.j){case 1:return i=new xt({tb:t,onError:function(){},mc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),I(r,2),i.configure(e),w(r,Rt(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:D(r,3);break;case 2:return R(r),w(r,i.destroy(),5);case 5:return r["return"]([]);case 3:return I(r,6),w(r,Ct(i),8);case 8:D(r,7);break;case 6:return R(r),w(r,i.destroy(),9);case 9:return r["return"]([]);case 7:return o=[],w(r,Promise.all(n.sessionIds.map((function(e){return p((function t(){return k(t,(function(t){switch(t.j){case 1:return I(t,2),w(t,Nt(i,e),4);case 4:o.push(e),D(t,0);break;case 2:R(t),x(t)}}))}))}))),10);case 10:return w(r,i.destroy(),11);case 11:return r["return"](o)}}))}))}function yl(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Pe(e.audioCapabilities,t.audioCapabilities,n)&&Pe(e.videoCapabilities,t.videoCapabilities,n)}function vl(e,t){var n=jc(),r=this;this.g=t,this.c=e,this.i=n,this.h=null,this.f=[],this.b=this.a=null,this.l=!0,this.m=Promise.resolve().then((function(){return El(r)}))}function _l(e,t){var n={vb:function(){},lc:function(){},Ya:function(){},onError:function(){},nc:function(){},ug:function(){}};return e.f.push({create:t,ta:n}),e.b&&e.b.abort(),Tl(e),n}function El(e){return p((function t(){return k(t,(function(t){switch(t.j){case 1:if(e.l){if(0==e.f.length||e.a&&!e.a.Va)var n=!1;else{e.a&&(e.a.ta.Ya(),e.a=null),n=e.f.shift();var r=n.create(e.i);r?(n.ta.vb(),e.a={node:r.node,payload:r.payload,Va:r.Va,ta:n.ta}):n.ta.nc(),n=!0}return n?n=Promise.resolve():e.a?n=bl(e):(e.g.jf(e.c),e.h=new _e,n=e.h),w(t,n,1)}t.A(0)}}))}))}function bl(e){return p((function t(){var n,r;return k(t,(function(t){switch(t.j){case 1:return e.c=e.g.Se(e.c,e.i,e.a.node,e.a.payload),I(t,2),e.b=e.g.Be(e.c,e.i,e.a.payload),w(t,e.b.promise,4);case 4:e.b=null,e.c==e.a.node&&(e.a.ta.lc(),e.a=null),D(t,0);break;case 2:return n=R(t),7001==n.code?e.a.ta.Ya():e.a.ta.onError(n),e.a=null,e.b=null,r=e,w(t,e.g.handleError(e.i,n),5);case 5:r.c=t.o,x(t)}}))}))}function Tl(e){e.h&&(e.h.resolve(),e.h=null)}function Sl(e){this.a=null;for(var t=0;t<e.textTracks.length;++t){var n=e.textTracks[t];n.mode="disabled","Shaka Player TextTrack"==n.label&&(this.a=n)}this.a||(this.a=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden"}function wl(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,t.size=e.size;try{t.align=e.textAlign}catch(n){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function xl(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var r=e.cues,i=r.length-1;0<=i;i--){var o=r[i];o&&t(o)&&e.removeCue(o)}e.mode=n}function Il(e,t,n,r,i){var o,a=i in r,s=!0;for(o in t){var u=i+"."+o,l=a?r[i]:n[o];a||o in n?void 0===t[o]?void 0===l||a?delete e[o]:e[o]=Me(l):l.constructor==Object&&t[o]&&t[o].constructor==Object?(e[o]||(e[o]=Me(l)),u=Il(e[o],t[o],l,r,u),s=s&&u):typeof t[o]!=typeof l||null==t[o]||t[o].constructor!=l.constructor?s=!1:e[o]=t[o]:s=!1}return s}function Al(e,t){for(var n={},r=n,i=0,o=0;;){if(i=e.indexOf(".",i),0>i)break;0!=i&&"\\"==e[i-1]||(o=e.substring(o,i).replace(/\\\./g,"."),r[o]={},r=r[o],o=i+1),i+=1}return r[e.substring(o).replace(/\\\./g,".")]=t,n}function Dl(){}function Rl(){var e=5e5,t=1/0;navigator.connection&&(e=1e6*navigator.connection.downlink,navigator.connection.saveData&&(t=360));var n={retryParameters:ye(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:Vt,fairPlayTransform:!0},r={retryParameters:ye(),availabilityWindowOverride:NaN,disableAudio:!1,dash:{customScheme:function(e){if(e)return null},clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,defaultPresentationDelay:10,ignoreMinBufferTime:!1,autoCorrectDrift:!0},hls:{ignoreTextStreamFailures:!1}},i={retryParameters:ye(),failureCallback:function(){},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0};ht("Web0S")&&(i.stallEnabled=!1);var o={trackSelectionCallback:function(e){return e},progressCallback:function(){},usePersistentLicense:!0},a={drm:n,manifest:r,streaming:i,offline:o,abrFactory:Ar,abr:{enabled:!0,defaultBandwidthEstimate:e,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return o.trackSelectionCallback=function(e){return Cl(e,a.preferredAudioLanguage)},a}function Ml(e,t,n){var r={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return Il(e,t,n||Rl(),r,"")}function Cl(e,t){var n=e.filter((function(e){return"variant"==e.type})),r=[],i=lr(t,n.map((function(e){return e.language})));i&&(r=n.filter((function(e){return sr(e.language)==i}))),0==r.length&&(r=n.filter((function(e){return e.primary}))),0==r.length&&(n.map((function(e){return e.language})),r=n);var o=r.filter((function(e){return e.height&&480>=e.height}));if(o.length&&(o.sort((function(e,t){return t.height-e.height})),r=o.filter((function(e){return e.height==o[0].height}))),n=[],r.length){var a=Math.floor(r.length/2);r.sort((function(e,t){return e.bandwidth-t.bandwidth})),n.push(r[a])}for(r=d(e),a=r.next();!a.done;a=r.next())a=a.value,"text"==a.type&&n.push(a);return n}function Nl(){this.a=null,this.b=[]}function Ll(e,t){if(null==e.a)e.a={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.a.duration=n-e.a.timestamp,e.a.state!=t&&(e.b.push(e.a),e.a={timestamp:n,state:t,duration:0})}}function Pl(e,t){var n=0;e.a&&e.a.state==t&&(n+=e.a.duration);for(var r=d(e.b),i=r.next();!i.done;i=r.next())i=i.value,n+=i.state==t?i.duration:0;return n}function Ol(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],r=d(e.b),i=r.next();!i.done;i=r.next())n.push(t(i.value));return e.a&&n.push(t(e.a)),n}function Fl(){this.b=this.c=null,this.a=[]}function kl(){this.f=this.l=this.b=this.h=this.i=this.g=this.m=NaN,this.a=new Nl,this.c=new Fl}function Bl(t,n){var r=this;Re.call(this),this.h=qc,this.a=null,this.gb=!1,this.g=new $e,this.zc=this.l=this.Eb=this.b=this.m=this.f=this.Vb=this.B=this.Wb=this.W=this.ib=this.s=this.F=this.i=this.L=null,this.Kd=1e9,this.Zb=new Set,this.kb=!0,this.Ga=null,this.Hd=!1,this.Fd=0,this.oa=null,this.$=new ka,this.c=lc(this),this.$b={width:1/0,height:1/0},this.v=null,this.Xb=new Ya(this.c.preferredAudioLanguage,this.c.preferredVariantRole,this.c.preferredAudioChannelCount),this.na=this.c.preferredTextLanguage,this.fb=this.c.preferredTextRole,n&&n(this),this.L=ec(this),this.g.w(e,"online",(function(){r.nd()})),this.D={name:"detach"},this.R={name:"attach"},this.Ha={name:"unload"},this.Ic={name:"manifest-parser"},this.Gc={name:"manifest"},this.hb={name:"media-source"},this.Ac={name:"drm-engine"},this.T={name:"load"},this.Nc={name:"src-equals-drm-engine"},this.jb={name:"src-equals"};var i=new Map;i.set(this.R,(function(e,t){return we(Vl(r,e,t))})),i.set(this.D,(function(e){return e.u&&(r.g.ea(e.u,"error"),e.u=null),r.a=null,e=Promise.resolve(),we(e)})),i.set(this.Ha,(function(e){return we(ql(r,e))})),i.set(this.hb,(function(e){return e=Gl(r,e),we(e)})),i.set(this.Ic,(function(e,t){var n=Yl(r,e,t);return we(n)})),i.set(this.Gc,(function(e){return zl(r,e)})),i.set(this.Ac,(function(){var e=Wl(r);return we(e)})),i.set(this.T,(function(e,t){return we(Xl(r,e,t))})),i.set(this.Nc,(function(e){return e=$l(r,e),we(e)})),i.set(this.jb,(function(e,t){return Ql(r,e,t)})),this.lb=new vl(this.D,{Se:function(e,t,n,i){var o=null;return e==r.D&&(o=n==r.D?r.D:r.R),e==r.R&&(o=n==r.D||t.u!=i.u?r.D:n==r.R?r.R:n==r.hb||n==r.T?r.hb:n==r.jb?r.Nc:null),e==r.hb&&(o=n==r.T&&t.u==i.u?r.Ic:r.Ha),e==r.Ic&&(o=Hc(r.T,r.Gc,r.Ha,n,t,i)),e==r.Gc&&(o=Hc(r.T,r.Ac,r.Ha,n,t,i)),e==r.Ac&&(o=Hc(r.T,r.T,r.Ha,n,t,i)),e==r.Nc&&(o=n==r.jb&&t.u==i.u?r.jb:r.Ha),e!=r.T&&e!=r.jb||(o=r.Ha),e==r.Ha&&(o=i.u&&t.u==i.u?r.R:r.D),o},Be:function(e,t,n){return r.dispatchEvent(new Ae("onstatechange",{state:e.name})),i.get(e)(t,n)},handleError:function(e){return p((function t(){return k(t,(function(t){switch(t.j){case 1:return w(t,ql(r,e),2);case 2:return t["return"](e.u?r.R:r.D)}}))}))},jf:function(e){r.dispatchEvent(new Ae("onstateidle",{state:e.name}))}}),t&&this.Fb(t,!0)}n=ju.prototype,n.destroy=function(){return this.a.destroy()},n.hasFixedKeySpace=function(){return!0},n.addSegments=function(){return Ku("segment")},n.removeSegments=function(e,t){return Vu(this,"segment",e,t)},n.getSegments=function(e){return qu(this,"segment",e).then((function(e){return e.map(Xu)}))},n.addManifests=function(){return Ku("manifest")},n.updateManifestExpiration=function(e,t){var n=Mu(this.a,"manifest"),r=n.store(),i=new _e;return r.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,r.put(n),i.resolve()):i.reject(new ve(2,9,9012,"Could not find values for "+e))},n.promise().then((function(){return i}))},n.removeManifests=function(e,t){return Vu(this,"manifest",e,t)},n.getManifests=function(e){return qu(this,"manifest",e).then((function(e){return e.map(Gu)}))},n.getAllManifests=function(){var e=this;return p((function t(){var n,r;return k(t,(function(t){switch(t.j){case 1:return n=Ru(e.a,"manifest"),r=new Map,w(t,Au(n,(function(e,t){r.set(e,Gu(t))})),2);case 2:return w(t,n.promise(),3);case 3:return t["return"](r)}}))}))},n=Ju.prototype,n.destroy=function(){return this.a.destroy()},n.hasFixedKeySpace=function(){return this.f},n.addSegments=function(e){return Zu(this,this.c,e)},n.removeSegments=function(e,t){return el(this,this.c,e,t)},n.getSegments=function(e){return tl(this,this.c,e)},n.addManifests=function(e){return Zu(this,this.b,e)},n.updateManifestExpiration=function(e,t){var n=Mu(this.a,this.b),r=n.store();return r.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,r.put(n,e))},n.promise()},n.removeManifests=function(e,t){return el(this,this.b,e,t)},n.getManifests=function(e){return tl(this,this.b,e)},n.getAllManifests=function(){var e=this;return p((function t(){var n,r;return k(t,(function(t){switch(t.j){case 1:return n=Ru(e.a,e.b),r=new Map,w(t,Au(n,(function(e,t){r.set(e,t)})),2);case 2:return w(t,n.promise(),3);case 3:return t["return"](r)}}))}))},n=nl.prototype,n.init=function(){var t=this,n=new _e,r=e.indexedDB.open("shaka_offline_db",4);return r.onsuccess=function(e){e=e.target.result,t.f=e;var r=e.objectStoreNames;r=r.contains("manifest")&&r.contains("segment")?new ju(e):null,t.a=r,r=e.objectStoreNames,r=r.contains("manifest-v2")&&r.contains("segment-v2")?new Ju(e,"segment-v2","manifest-v2",!0):null,t.b=r,r=e.objectStoreNames,r=r.contains("manifest-v3")&&r.contains("segment-v3")?new Ju(e,"segment-v3","manifest-v3",!1):null,t.c=r,e=e.objectStoreNames.contains("session-ids")?new Nu(e):null,t.g=e,n.resolve()},r.onupgradeneeded=function(e){e=e.target.result;for(var t=d(["segment-v3","manifest-v3","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},r.onerror=function(e){n.reject(new ve(2,9,9001,r.error)),e.preventDefault()},n},n.destroy=function(){var e=this;return p((function t(){return k(t,(function(t){switch(t.j){case 1:if(!e.a){t.A(2);break}return w(t,e.a.destroy(),2);case 2:if(!e.b){t.A(4);break}return w(t,e.b.destroy(),4);case 4:if(!e.c){t.A(6);break}return w(t,e.c.destroy(),6);case 6:if(!e.g){t.A(8);break}return w(t,e.g.destroy(),8);case 8:e.f&&e.f.close(),x(t)}}))}))},n.getCells=function(){var e=new Map;return this.a&&e.set("v1",this.a),this.b&&e.set("v2",this.b),this.c&&e.set("v3",this.c),e},n.getEmeSessionCell=function(){return this.g},n.erase=function(){var e=this;return p((function t(){return k(t,(function(t){switch(t.j){case 1:if(!e.a){t.A(2);break}return w(t,e.a.destroy(),2);case 2:if(!e.b){t.A(4);break}return w(t,e.b.destroy(),4);case 4:if(!e.c){t.A(6);break}return w(t,e.c.destroy(),6);case 6:return e.f&&e.f.close(),w(t,rl(),8);case 8:return e.f=null,e.a=null,e.b=null,e.c=null,w(t,e.init(),0)}}))}))},Uu("idb",(function(){return e.indexedDB?new nl:null})),il.prototype.ua=function(){return this.g},il.prototype.aa=function(){return this.f},il.prototype.key=function(){return this.c},il.prototype.toString=function(){return this.b},n=hl.prototype,n.configure=function(){},n.start=function(e){var t=this;return p((function n(){var r,i,o,a,s,u;return k(n,(function(n){switch(n.j){case 1:return r=ol(e),t.a=r,null==r||"manifest"!=r.a?n["return"](Promise.reject(new ve(2,1,9004,r))):(i=new Lu,A(n,2),w(n,i.init(),4));case 4:return w(n,Fu(i,r.ua(),r.aa()),5);case 5:return o=n.o,w(n,o.getManifests([r.key()]),6);case 6:return a=n.o,s=a[0],u=new al(r.ua(),r.aa()),n["return"](sl(u,s));case 2:return M(n),w(n,i.destroy(),7);case 7:C(n,0)}}))}))},n.stop=function(){return Promise.resolve()},n.update=function(){},n.onExpirationUpdated=function(e,t){var n=this;return p((function r(){var i,o,a,s,u,l,c;return k(r,(function(r){switch(r.j){case 1:return i=n.a,o=new Lu,I(r,2,3),w(r,o.init(),5);case 5:return w(r,Fu(o,i.ua(),i.aa()),6);case 6:return a=r.o,w(r,a.getManifests([i.key()]),7);case 7:if(s=r.o,u=s[0],l=u.sessionIds.includes(e),c=void 0==u.expiration||u.expiration>t,!l||!c){r.A(3);break}return w(r,a.updateManifestExpiration(i.key(),t),3);case 3:return M(r),w(r,o.destroy(),10);case 10:C(r,0);break;case 2:R(r),r.A(3)}}))}))},_o.Bb("application/x-offline-manifest",hl),q("shaka.offline.OfflineScheme",pl),pl.h=function(e){return e={uri:e,fd:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},Se(e)},pl.i=function(e,t){var n=new Lu;return Se(void 0).U((function(){return n.init()})).U((function(){return Fu(n,t.ua(),t.aa())})).U((function(e){return e.getSegments([t.key()])})).U((function(e){return{uri:t,fd:t,data:e[0].data,headers:{}}}))["finally"]((function(){return n.destroy()}))},Ue("offline",pl),vl.prototype.destroy=function(){var e=this;return p((function t(){var n;return k(t,(function(t){switch(t.j){case 1:return e.l=!1,e.b&&e.b.abort(),Tl(e),w(t,e.m,2);case 2:e.a&&e.a.ta.Ya();for(var r=d(e.f),i=r.next();!i.done;i=r.next())n=i.value,n.ta.Ya();e.a=null,e.f=[],e.g=null,x(t)}}))}))},q("shaka.text.SimpleTextDisplayer",Sl),Sl.prototype.remove=function(e,t){return!!this.a&&(xl(this.a,(function(n){return n.startTime<t&&n.endTime>e})),!0)},Sl.prototype.remove=Sl.prototype.remove,Sl.prototype.append=function(e){for(var t=wl,n=[],r=0;r<e.length;r++){var i=t(e[r]);i&&n.push(i)}n.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:n.indexOf(t)-n.indexOf(e)})).forEach(function(e){this.a.addCue(e)}.bind(this))},Sl.prototype.append=Sl.prototype.append,Sl.prototype.destroy=function(){return this.a&&xl(this.a,(function(){return!0})),this.a=null,Promise.resolve()},Sl.prototype.destroy=Sl.prototype.destroy,Sl.prototype.isTextVisible=function(){return"showing"==this.a.mode},Sl.prototype.isTextVisible=Sl.prototype.isTextVisible,Sl.prototype.setTextVisibility=function(e){this.a.mode=e?"showing":"hidden"},Sl.prototype.setTextVisibility=Sl.prototype.setTextVisibility,q("shaka.util.ConfigUtils.mergeConfigObjects",Il),q("shaka.util.ConfigUtils.convertToConfigObject",Al),q("shaka.util.PlayerConfiguration",Dl),Dl.mergeConfigObjects=Ml,G(Bl,Re),q("shaka.Player",Bl),Bl.prototype.destroy=function(){var e=this;return p((function t(){var n;return k(t,(function(t){switch(t.j){case 1:return e.h==Vc?t["return"]():(e.h=Vc,n=_l(e.lb,(function(){return{node:e.D,payload:jc(),Va:!1}})),w(t,new Promise((function(e){n.vb=function(){},n.lc=function(){e()},n.Ya=function(){e()},n.onError=function(){e()},n.nc=function(){e()}})),2));case 2:return w(t,e.lb.destroy(),3);case 3:if(e.g&&(e.g.release(),e.g=null),e.zc=null,e.l=null,e.c=null,!e.L){t.A(0);break}return w(t,e.L.destroy(),5);case 5:e.L=null,x(t)}}))}))},Bl.prototype.destroy=Bl.prototype.destroy,Bl.version="v2.5.6";var Ul=["2","5"];Lr=new function(e){this.a=e,this.c=Cr,this.b=Nr}(new Rr(Number(Ul[0]),Number(Ul[1])));var Hl=["output-restricted","internal-error"],jl={};function Kl(e,t){if(t.za)return!1;if(!dt())return!0;var n=t.mimeType,r=t.uri||"";return n||(n={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",ts:"video/mp2t",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac"}[_o.getExtension(r)]),!!n&&(!!ft(n)&&(!_o.isSupported(r,n)||!!navigator.vendor&&navigator.vendor.includes("Apple")&&e.c.streaming.useNativeHlsOnSafari))}function Vl(e,t,n){return null==t.u&&(t.u=n.u,e.g.w(t.u,"error",(function(){var t=Ic(e);t&&e.Ma(t)}))),e.a=t.u,Promise.resolve()}function ql(e,t){return p((function n(){return k(n,(function(n){switch(n.j){case 1:if(e.h!=Vc&&(e.h=qc),e.dispatchEvent(new Ae("unloading")),t.za=null,t.mimeType=null,t.startTime=null,t.uri=null,t.u&&(e.g.ea(t.u,"loadeddata"),e.g.ea(t.u,"playing"),e.g.ea(t.u,"pause"),e.g.ea(t.u,"ended"),e.g.ea(t.u,"ratechange")),e.ib&&(e.ib.release(),e.ib=null),e.Wb&&(e.Wb.stop(),e.Wb=null),!e.m){n.A(2);break}return w(n,e.m.stop(),3);case 3:e.m=null;case 2:if(!e.l){n.A(4);break}return w(n,e.l.stop(),4);case 4:if(!e.f){n.A(6);break}return w(n,e.f.destroy(),7);case 7:e.f=null;case 6:if(e.s&&(e.s.release(),e.s=null),!e.F){n.A(8);break}return w(n,e.F.destroy(),9);case 9:e.F=null;case 8:if(!t.u||!t.u.src){n.A(10);break}return w(n,new Promise((function(e){return new pe(e).P(.1)})),11);case 11:t.u.removeAttribute("src"),t.u.load();case 10:if(!e.i){n.A(12);break}return w(n,e.i.destroy(),13);case 13:e.i=null;case 12:e.$.a.clear(),e.Eb=null,e.B=null,e.Zb.clear(),e.b=null,e.v=null,e.Bc=null,e.kb=!0,mc(e),x(n)}}))}))}function Gl(t,n){return p((function r(){var i,o,a,s;return k(r,(function(r){switch(r.j){case 1:return i=e.muxjs?new an:new sn,o=t.c.textDisplayFactory,a=new o,t.Bc=o,s=new qn(n.u,i,a),w(r,s.s,2);case 2:t.F=s,x(r)}}))}))}function Yl(e,t,n){return p((function r(){var i,o,a;return k(r,(function(r){switch(r.j){case 1:if(t.za=n.za,t.mimeType=n.mimeType,t.uri=n.uri,i=t.uri,o=e.L,e.Eb=i,t.za){e.m=t.za(),r.A(2);break}return a=e,w(r,_o.create(i,o,e.c.manifest.retryParameters,t.mimeType),3);case 3:a.m=r.o;case 2:e.m.configure(e.c.manifest),x(r)}}))}))}function zl(e,t){var n=t.uri,r=e.L;e.Vb=new As,Ds(e.Vb,(function(t){xc(e,"timelineregionadded",t)}));var i={networkingEngine:r,filterNewPeriod:function(t){return e.Jc(t)},filterAllPeriods:function(t){return dc(e,t)},onTimelineRegionAdded:function(t){var n=e.Vb;e:{for(var r=d(n.a),i=r.next();!i.done;i=r.next())if(i=i.value,i.schemeIdUri==t.schemeIdUri&&i.id==t.id&&i.startTime==t.startTime&&i.endTime==t.endTime){r=i;break e}r=null}null==r&&(n.a.add(t),n.b(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return e.Ma(t)}};return new Ee(Promise.resolve().then((function(){return p((function t(){var r;return k(t,(function(t){switch(t.j){case 1:return r=e,w(t,e.m.start(n,i),2);case 2:if(r.b=t.o,e.dispatchEvent(new Ae("manifestparsed")),0==e.b.periods.length)throw new ve(2,4,4014);Jl(e.b.periods),x(t)}}))}))})),(function(){return e.m.stop()}))}function Wl(e){return p((function t(){return k(t,(function(t){switch(t.j){case 1:return e.i=new xt({tb:e.L,onError:function(t){e.Ma(t)},mc:function(t){Ac(e,t)},onExpirationUpdated:function(t,n){Dc(e,t,n)},onEvent:function(t){e.dispatchEvent(t)}}),e.i.configure(e.c.drm),w(t,Dt(e.i,ss(e.b.periods),e.b.offlineSessionIds),2);case 2:dc(e,e.b.periods),x(t)}}))}))}function Xl(e,t,n){return p((function r(){var i,o,a,s,u,l,c,f,h;return k(r,(function(r){switch(r.j){case 1:return t.startTime=n.startTime,i=t.u,o=t.uri,e.Eb=o,e.v=new kl,a=function(){return gc(e)},s=function(){var t=e.a.playbackRate;0!=t&&e.W.set(t)},e.g.w(i,"playing",a),e.g.w(i,"pause",a),e.g.w(i,"ended",a),e.g.w(i,"ratechange",s),u=e.c.abrFactory,e.l&&e.zc==u||(e.zc=u,e.l=new u,e.l.configure(e.c.abr)),cc(e,e.b.periods),e.Xb=new Ya(e.c.preferredAudioLanguage,e.c.preferredVariantRole,e.c.preferredAudioChannelCount),e.na=e.c.preferredTextLanguage,Rc(e.b.presentationTimeline,e.c.playRangeStart,e.c.playRangeEnd),w(r,e.i.Fb(i),2);case 2:return e.l.init((function(t,n,r){n=void 0!==n&&n,r=void 0===r?0:r;e:{for(var i=d(e.b.periods),o=i.next();!o.done;o=i.next())if(o=o.value,o.variants.includes(t)){i=o;break e}i=null}sc(e,i,t,!0),e.f&&(Hs(e.f,t,n,r),_c(e))})),e.s=tc(e,t.startTime),e.ib=nc(e),e.W=new ds({gc:function(){return t.u.playbackRate},rd:function(e){t.u.playbackRate=e},Ld:function(e){t.u.currentTime+=e}}),l=Math.max(e.b.minBufferTime,e.c.streaming.rebufferingGoal),rc(e,l),e.f=oc(e),e.f.configure(e.c.streaming),Zl(e),e.h=Gc,e.dispatchEvent(new Ae("streaming")),w(r,e.f.start(),3);case 3:e.c.streaming.startAtSegmentBoundary&&(c=e.s.h(),f=pc(e,c),e.s.m(f)),e.b.periods.forEach(e.Jc.bind(e)),Ec(e),_c(e),h=Fc(e)||e.b.periods[0],h.variants.some((function(e){return e.primary})),yc(e,h.variants),e.g.da(i,"loadeddata",(function(){e.v.b=Date.now()/1e3-n.ud})),x(r)}}))}))}function $l(e,t){return p((function n(){var r,i;return k(n,(function(n){switch(n.j){case 1:return r=mn,e.i=new xt({tb:e.L,onError:function(t){e.Ma(t)},mc:function(t){Ac(e,t)},onExpirationUpdated:function(t,n){Dc(e,t,n)},onEvent:function(t){e.dispatchEvent(t)}}),e.i.configure(e.c.drm),i={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"video/mp4",codecs:"",encrypted:!0,keyId:null,language:"und",label:null,type:r.Pa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},bandwidth:100,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0},w(n,Dt(e.i,[i],[]),2);case 2:return w(n,e.i.Fb(t.u),0)}}))}))}function Ql(e,t,n){function r(){return gc(e)}if(t.uri=n.uri,t.startTime=n.startTime,e.Eb=t.uri,e.v=new kl,e.s=new Es(t.u),null!=t.startTime&&e.s.m(t.startTime),e.W=new ds({gc:function(){return t.u.playbackRate},rd:function(e){t.u.playbackRate=e},Ld:function(e){t.u.currentTime+=e}}),rc(e,e.c.streaming.rebufferingGoal),e.g.w(t.u,"playing",r),e.g.w(t.u,"pause",r),e.g.w(t.u,"ended",r),e.g.da(t.u,"loadeddata",(function(){e.v.b=Date.now()/1e3-n.ud})),e.a.audioTracks&&(e.g.w(e.a.audioTracks,"addtrack",(function(){return Ec(e)})),e.g.w(e.a.audioTracks,"removetrack",(function(){return Ec(e)})),e.g.w(e.a.audioTracks,"change",(function(){return Ec(e)}))),e.a.textTracks){var i=e.a.textTracks;e.g.w(i,"addtrack",(function(){return Ec(e)})),e.g.w(i,"removetrack",(function(){return Ec(e)})),e.g.w(i,"change",(function(){return Ec(e)}))}t.u.src=t.uri,e.h=Yc,e.dispatchEvent(new Ae("streaming"));var o=new _e;return e.a.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA?o.resolve():e.a.error?o.reject(Ic(e)):(e.g.da(e.a,"loadeddata",(function(){o.resolve()})),e.g.da(e.a,"error",(function(){o.reject(Ic(e))}))),new Ee(o,(function(){return o.reject(new ve(2,7,7001)),Promise.resolve()}))}function Jl(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.some((function(e){return e.variants.some(t)}))&&e.forEach((function(e){e.variants=e.variants.filter(t)}))}function Zl(e){function t(e){var t="";e.video&&(t=lt(e.video.codecs)[0]);var n="";return e.audio&&(n=lt(e.audio.codecs)[0]),t+"-"+n}var n=e.b.periods.reduce((function(e,t){return e.concat(t.variants)}),[]);n=Tr(n,e.c.preferredAudioChannelCount);var r=new De;n.forEach((function(e){var n=t(e);r.push(n,e)}));var i=null,o=1/0;r.forEach((function(e,t){var n=0,r=0;t.forEach((function(e){n+=e.bandwidth||0,++r}));var a=n/r;a<o&&(i=e,o=a)})),e.b.periods.forEach((function(e){e.variants=e.variants.filter((function(e){return t(e)==i}))}))}function ec(e){return new ke((function(t,n){e.l&&e.l.segmentDownloaded(t,n)}))}function tc(e,t){return new bs(e.a,e.b,e.c.streaming,t,(function(){e.ib&&as(e.ib,!0),e.f&&Vs(e.f),e.B&&ic(e)}),(function(t){return e.dispatchEvent(t)}))}function nc(e){var t=new ls(e.b);cs(t,(function(){Ec(e)}));var n=new Rs(e.Vb);Ms(n,(function(t){xc(e,"timelineregionenter",t)}),(function(t){xc(e,"timelineregionexit",t)}),(function(t,n){n||(xc(e,"timelineregionenter",t),xc(e,"timelineregionexit",t))}));var r=new os(e.a);return r.a.add(t),r.a.add(n),r}function rc(e,t){e.B=new Xa,e.B.a=Qa,$a(e.B,t,Math.min(.5,t/2)),mc(e),e.Wb=new pe((function(){ic(e)})).Na(.25)}function ic(e){switch(e.h){case Yc:var t=!!e.a.ended||un(e.a.buffered)>=e.a.duration-1;break;case Gc:e:if(e.a.ended||Wn(e.F))t=!0;else{if(e.b.presentationTimeline.V()){var n=e.b.presentationTimeline.pb();if(un(e.a.buffered)>=n){t=!0;break e}}t=!1}break;default:t=!1}var r=cn(e.a.buffered,e.a.currentTime);n=e.B;var i=t,o=n.b.get(n.a);t=n.a,r=i||r>=o?Ja:Qa,n.a=r,t!=r&&mc(e)}function oc(e){return new Ps(e.b,{Ua:function(){return e.s.h()},getBandwidthEstimate:function(){return e.l.getBandwidthEstimate()},J:e.F,tb:e.L,Od:e.gf.bind(e),Nd:e.ve.bind(e),onError:e.Ma.bind(e),onEvent:function(t){return e.dispatchEvent(t)},lf:e.mf.bind(e),dd:e.tf.bind(e)})}function ac(e){if(e.m&&e.m.configure(e.c.manifest),e.i&&e.i.configure(e.c.drm),e.f){e.f.configure(e.c.streaming);try{e.b.periods.forEach(e.Jc.bind(e))}catch(o){e.Ma(o)}var t=Os(e.f),n=Fs(e.f),r=Fc(e);t=xr(t,n,r.variants),e.l&&t&&t.allowedByApplication&&t.allowedByKeySystem?yc(e,r.variants):vc(e,r)}if(e.F&&(r=e.c.textDisplayFactory,e.Bc!=r)){t=new r,n=e.F;var i=n.g;n.g=t,i&&(t.setTextVisibility(i.isTextVisible()),i.destroy()),n.a&&(n.a.c=t),e.Bc=r,e.f&&(r=e.f,(t=r.b.get("text"))&&js(r,t.stream,!0,0,!0))}e.l&&(e.l.configure(e.c.abr),e.c.abr.enabled&&!e.kb?e.l.enable():e.l.disable(),wc(e)),e.B&&(r=e.c.streaming.rebufferingGoal,e.b&&(r=Math.max(r,e.b.minBufferTime)),$a(e.B,r,Math.min(.5,r/2)))}function sc(e,t,n,r){Ua(e.$,t).variant=n,e=e.v.c,e.c!=n&&(e.c=n,e.a.push({timestamp:Date.now()/1e3,id:n.id,type:"variant",fromAdaptation:r,bandwidth:n.bandwidth}))}function uc(e,t,n,r){Ba(e.$,t,n),e=e.v.c,e.b!=n&&(e.b=n,e.a.push({timestamp:Date.now()/1e3,id:n.id,type:"text",fromAdaptation:r,bandwidth:null}))}function lc(e){var t=Rl();return t.streaming.failureCallback=function(t){var n=[1001,1002,1003];e.V()&&n.includes(t.code)&&(t.severity=1,e.nd())},t.textDisplayFactory=function(){return new Sl(e.a)},t}function cc(e,t){for(var n=0;n<t.length;n++){for(var r=t[n],i=new Map,o=d(r.variants),a=o.next();!a.done;a=o.next())if(a=a.value,a.video&&a.video.closedCaptions){a=a.video;for(var s=d(a.closedCaptions.keys()),u=s.next();!u.done;u=s.next())if(u=u.value,!i.has(u)){var l={id:e.Kd++,originalId:u,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"application/cea-608",codecs:"",kind:"caption",encrypted:!1,keyId:null,language:a.closedCaptions.get(u),label:null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:a.roles,channelsCount:null,closedCaptions:null};i.set(u,l)}}for(i=d(i.values()),o=i.next();!o.done;o=i.next())r.textStreams.push(o.value)}}function dc(e,t){var n=e.f?Os(e.f):null,r=e.f?Fs(e.f):null;if(t.forEach(hr.bind(null,e.i,n,r)),n=Le(t,(function(e){return e.variants.some(Er)})),0==n)throw new ve(2,4,4032);if(n<t.length)throw new ve(2,4,4011);t.forEach(function(e){fr(e.variants,this.c.restrictions,this.$b)&&this.f&&Fc(this)==e&&Ec(this),Mc(this,e.variants)}.bind(e))}function fc(e,t,n,r){n=void 0!==n&&n,r=void 0===r?0:r,e.kb?(e.Ga=t,e.Hd=n,e.Fd=r):(Hs(e.f,t,n,r),bc(e))}function hc(e,t){e.kb?e.oa=t:(js(e.f,t,!0,0,!1),Tc(e))}function pc(e,t){function n(e,t){if(!e)return null;var n=e.findSegmentPosition(t-o.startTime);return null==n?null:(n=e.getSegmentReference(n))?n.startTime+o.startTime:null}var r=Os(e.f),i=Fs(e.f),o=Fc(e);return r=n(r,t),i=n(i,t),null!=i&&null!=r?Math.max(i,r):null!=i?i:null!=r?r:t}function mc(e){var t=e.Tc();if(e.v&&e.B&&e.s){var n=e.W;n.f=t,fs(n),gc(e)}e.dispatchEvent(new Ae("buffering",{buffering:t}))}function gc(e){if(e.v&&e.B){var t=e.v.a;e.B.a==Qa?Ll(t,"buffering"):e.a.paused?Ll(t,"paused"):e.a.ended?Ll(t,"ended"):Ll(t,"playing")}}function yc(e,t){try{Mc(e,t)}catch(r){return e.Ma(r),null}var n=t.filter((function(e){return Er(e)}));return n=e.Xb.create(n),e.l.setVariants(Array.from(n.values())),e.l.chooseVariant()}function vc(e,t){var n=yc(e,t.variants);n&&(sc(e,t,n,!0),fc(e,n,!0)),(n=Sr(t.textStreams,e.na,e.fb)[0]||null)&&(e.c.streaming.alwaysStreamText||e.ic())&&(uc(e,t,n,!0),hc(e,n)),_c(e)}function _c(e){Cc(e,new Ae("adaptation"))}function Ec(e){Cc(e,new Ae("trackschanged"))}function bc(e){Cc(e,new Ae("variantchanged"))}function Tc(e){Cc(e,new Ae("textchanged"))}function Sc(e){Cc(e,new Ae("texttrackvisibility"))}function wc(e){Cc(e,new Ae("abrstatuschanged",{tg:e.c.abr.enabled}))}function xc(e,t,n){e.dispatchEvent(new Ae(t,{detail:{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}}))}function Ic(e){if(!e.a.error)return null;var t=e.a.error.code;if(1==t)return null;var n=e.a.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new ve(2,3,3016,t,n,e.a.error.message)}function Ac(e,t){if(e.f){var n=Fc(e),r=!1,i=Object.keys(t),o=1==i.length&&"00"==i[0];i.length&&e.b.periods.forEach((function(e){e.variants.forEach((function(e){Ir(e).forEach((function(n){var i=e.allowedByKeySystem;n.keyId&&(n=t[o?"00":n.keyId],e.allowedByKeySystem=!!n&&!Hl.includes(n)),i!=e.allowedByKeySystem&&(r=!0)}))}))})),i=Os(e.f);var a=Fs(e.f);(i=xr(i,a,n.variants))&&!i.allowedByKeySystem&&vc(e,n),r&&(Ec(e),yc(e,n.variants))}}function Dc(e,t,n){e.m&&e.m.onExpirationUpdated&&e.m.onExpirationUpdated(t,n),e.dispatchEvent(new Ae("expirationupdated"))}function Rc(e,t,n){0<t&&(e.V()||e.fe(t)),n<e.Y()&&(e.V()||e.wa(n))}function Mc(e,t){var n=e.i?at(e.i.T):{},r=Object.keys(n);r=r.length&&"00"==r[0];for(var i=!1,o=!1,a=[],s=[],u=d(t),l=u.next();!l.done;l=u.next()){l=l.value;var c=[];l.audio&&c.push(l.audio),l.video&&c.push(l.video),c=d(c);for(var f=c.next();!f.done;f=c.next())if(f=f.value,f.keyId){var h=n[r?"00":f.keyId];h?Hl.includes(h)&&(s.includes(h)||s.push(h)):a.includes(f.keyId)||a.push(f.keyId)}l.allowedByApplication?l.allowedByKeySystem&&(i=!0):o=!0}if(!i)throw new ve(2,4,4012,{hasAppRestrictions:o,missingKeys:a,restrictedKeyStatuses:s})}function Cc(e,t){p((function n(){return k(n,(function(n){switch(n.j){case 1:return w(n,Promise.resolve(),2);case 2:e.h!=Vc&&e.dispatchEvent(t),x(n)}}))}))}function Nc(e){var t=new Set;e=d(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(sr(n.language)):t.add("und");return t}function Lc(e){var t=new Map;e=d(e);for(var n=e.next();!n.done;n=e.next()){var r=n.value;n="und";var i=[];for(r.language&&(n=sr(r.language)),i="variant"==r.type?r.audioRoles:r.roles,i&&i.length||(i=[""]),t.has(n)||t.set(n,new Set),r=d(i),i=r.next();!i.done;i=r.next())i=i.value,t.get(n).add(i)}var o=[];return t.forEach((function(e,t){for(var n=d(e),r=n.next();!r.done;r=n.next())o.push({language:t,role:r.value})})),o}function Pc(e){return e=Fc(e),null==e?[]:e.variants.filter((function(e){return Er(e)}))}function Oc(e){var t=Fc(e);return null==t?[]:t.textStreams.filter((function(t){return!e.Zb.has(t)}))}function Fc(e){var t=e.s.h(),n=null;e=d(e.b.periods);for(var r=e.next();!r.done;r=e.next())r=r.value,r.startTime<=t&&(n=r);return n}function kc(e){var t=Fc(e);return Ua(e.$,t).variant}function Bc(e){var t=Fc(e);if(null==t)return null;if(!Ua(e.$,t).text){var n=Sr(t.textStreams,e.na,e.fb);n.length&&Ba(e.$,t,n[0])}return Ua(e.$,t).text}function Uc(){return new ve(2,7,7e3)}function Hc(e,t,n,r,i,o){return r==e&&i.u==o.u&&i.uri==o.uri&&i.mimeType==o.mimeType&&i.za==o.za?t:n}function jc(){return{za:null,u:null,mimeType:null,startTime:null,ud:null,uri:null}}function Kc(e){return new Promise((function(t,n){e.Ya=function(){return n(Uc())},e.lc=function(){return t()},e.onError=function(e){return n(e)},e.nc=function(){return n(Uc())}}))}Bl.registerSupportPlugin=function(e,t){jl[e]=t},Bl.isBrowserSupported=function(){return!!(e.Promise&&e.Uint8Array&&Array.prototype.forEach&&e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration)&&(!!dt()||ft("application/x-mpegurl"))},Bl.probeSupport=function(){return Xt().then((function(e){for(var t=_o.Df(),n={},r=d('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",")),i=r.next();!i.done;i=r.next()){i=i.value,n[i]=dt()?!!Hn(i)||(MediaSource.isTypeSupported(i)||vn(i)):ft(i);var o=i.split(";")[0];n[o]=n[o]||n[i]}for(var a in e={manifest:t,media:n,drm:e},jl)e[a]=jl[a]();return e}))},Bl.prototype.Fb=function(e,t){if(t=void 0===t||t,this.h==Vc)return Promise.reject(Uc());var n=jc();n.u=e,dt()||(t=!1);var r=t?this.hb:this.R,i=_l(this.lb,(function(){return{node:r,payload:n,Va:!1}}));return i.vb=function(){},Kc(i)},Bl.prototype.attach=Bl.prototype.Fb,Bl.prototype.detach=function(){var e=this;if(this.h==Vc)return Promise.reject(Uc());var t=_l(this.lb,(function(){return{node:e.D,payload:jc(),Va:!1}}));return t.vb=function(){},Kc(t)},Bl.prototype.detach=Bl.prototype.detach,Bl.prototype.xd=function(e){var t=this;if(e=void 0===e||e,this.h==Vc)return Promise.reject(Uc());dt()||(e=!1);var n=jc(),r=_l(this.lb,(function(r){var i=r.u&&e?t.hb:r.u?t.R:t.D;return n.u=r.u,{node:i,payload:n,Va:!1}}));return r.vb=function(){},Kc(r)},Bl.prototype.unload=Bl.prototype.xd,Bl.prototype.load=function(e,t,n){if(this.h==Vc)return Promise.reject(Uc());this.dispatchEvent(new Ae("loading"));var r=jc();r.uri=e,r.ud=Date.now()/1e3,n&&"string"!=typeof n&&(Mr("Loading with a manifest parser factory","Please register a manifest parser and for the mime-type."),r.za=function(){return new n}),n&&"string"==typeof n&&(r.mimeType=n),void 0!==t&&(r.startTime=t);var i=Kl(this,r)?this.jb:this.T,o=_l(this.lb,(function(e){return null==e.u?null:(r.u=e.u,{node:i,payload:r,Va:!0})}));return o.vb=function(){},new Promise((function(e,t){o.nc=function(){return t(new ve(2,7,7002))},o.lc=function(){return e()},o.Ya=function(){return t(Uc())},o.onError=function(e){return t(e)}}))},Bl.prototype.load=Bl.prototype.load,Bl.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Al(e,t));var n=Ml(this.c,e,lc(this));return ac(this),n},Bl.prototype.configure=Bl.prototype.configure,Bl.prototype.getConfiguration=function(){var e=lc(this);return Ml(e,this.c,lc(this)),e},Bl.prototype.getConfiguration=Bl.prototype.getConfiguration,Bl.prototype.Lf=function(){for(var e in this.c)delete this.c[e];Ml(this.c,lc(this),lc(this)),ac(this)},Bl.prototype.resetConfiguration=Bl.prototype.Lf,Bl.prototype.Le=function(){return this.h},Bl.prototype.getLoadMode=Bl.prototype.Le,Bl.prototype.Qe=function(){return this.a},Bl.prototype.getMediaElement=Bl.prototype.Qe,Bl.prototype.Jb=function(){return this.L},Bl.prototype.getNetworkingEngine=Bl.prototype.Jb,Bl.prototype.ec=function(){return this.Eb},Bl.prototype.getAssetUri=Bl.prototype.ec,Bl.prototype.Oe=function(){return Mr("getManifestUri",'Please use "getAssetUri" instead.'),this.ec()},Bl.prototype.getManifestUri=Bl.prototype.Oe,Bl.prototype.V=function(){return this.b?this.b.presentationTimeline.V():!(!this.a||!this.a.src)&&1/0==this.a.duration},Bl.prototype.isLive=Bl.prototype.V,Bl.prototype.Xa=function(){return!!this.b&&this.b.presentationTimeline.Xa()},Bl.prototype.isInProgress=Bl.prototype.Xa,Bl.prototype.df=function(){if(this.b){if(!this.b.periods.length)return!1;var e=this.b.periods[0].variants;return!!e.length&&!e[0].video}return!(!this.a||!this.a.src)&&(this.a.videoTracks?0==this.a.videoTracks.length:0==this.a.videoHeight)},Bl.prototype.isAudioOnly=Bl.prototype.df,Bl.prototype.Nf=function(){if(this.b){var e=this.b.presentationTimeline;return{start:e.ob(),end:e.Ba()}}return this.a&&this.a.src&&(e=this.a.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},Bl.prototype.seekRange=Bl.prototype.Nf,Bl.prototype.keySystem=function(){return Ot(this.drmInfo())},Bl.prototype.keySystem=Bl.prototype.keySystem,Bl.prototype.drmInfo=function(){return this.i?this.i.a:null},Bl.prototype.drmInfo=Bl.prototype.drmInfo,Bl.prototype.Ib=function(){return this.i?this.i.Ib():1/0},Bl.prototype.getExpiration=Bl.prototype.Ib,Bl.prototype.Tc=function(){return!!this.B&&this.B.a==Qa},Bl.prototype.isBuffering=Bl.prototype.Tc,Bl.prototype.Te=function(){if(this.W){var e=this.W;e=e.f?0:e.c}else e=0;return e},Bl.prototype.getPlaybackRate=Bl.prototype.Te,Bl.prototype.eg=function(e){0==e?Q("A trick play rate of 0 is unsupported!"):(this.a.paused&&this.a.play(),this.W.set(e),this.h==Gc&&Us(this.f,1<Math.abs(e)))},Bl.prototype.trickPlay=Bl.prototype.eg,Bl.prototype.we=function(){this.h==Yc&&this.W.set(1),this.h==Gc&&(this.W.set(1),Us(this.f,!1))},Bl.prototype.cancelTrickPlay=Bl.prototype.we,Bl.prototype.Sc=function(){if(this.b&&this.s){for(var e=kc(this),t=[],n=d(Pc(this)),r=n.next();!r.done;r=n.next()){r=r.value;var i=mr(r);i.active=r==e,t.push(i)}return t}return this.a&&this.a.audioTracks?Array.from(this.a.audioTracks).map((function(e){var t=_r(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind?(t.primary=!0,t.roles=["main"],t.audioRoles=["main"]):t.audioRoles=[],t})):[]},Bl.prototype.getVariantTracks=Bl.prototype.Sc,Bl.prototype.qb=function(){if(this.b&&this.s){for(var e=Bc(this),t=[],n=d(Oc(this)),r=n.next();!r.done;r=n.next()){r=r.value;var i=gr(r);i.active=r==e,t.push(i)}return t}return this.a&&this.a.src&&this.a.textTracks?Array.from(this.a.textTracks).map((function(e){var t=_r(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),t})):[]},Bl.prototype.getTextTracks=Bl.prototype.qb,Bl.prototype.od=function(e){if(this.b&&this.f){var t=Fc(this),n=t.textStreams.find((function(t){return t.id==e.id}));n&&(uc(this,t,n,!1),hc(this,n),this.na=n.language)}else if(this.a&&this.a.src&&this.a.textTracks){for(t=Array.from(this.a.textTracks),t=d(t),n=t.next();!n.done;n=t.next())n=n.value,yr(n)==e.id?n.mode=this.gb?"showing":"hidden":n.mode="disabled";Tc(this)}},Bl.prototype.selectTextTrack=Bl.prototype.od,Bl.prototype.Pf=function(){Mr("selectEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. Please use SelectTextTrack.");var e=this.qb().filter((function(e){return"application/cea-608"==e.mimeType}));0<e.length&&this.od(e[0])},Bl.prototype.selectEmbeddedTextTrack=Bl.prototype.Pf,Bl.prototype.jg=function(){Mr("usingEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. There should be no reason to know if the player is playing embedded text.");var e=this.qb().filter((function(e){return e.active}))[0];return!!e&&"application/cea-608"==e.mimeType},Bl.prototype.usingEmbeddedTextTrack=Bl.prototype.jg,Bl.prototype.Rf=function(e,t,n){if(n=void 0===n?0:n,this.b&&this.f){var r=Fc(this);this.c.abr.enabled&&Q("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=r.variants.find((function(t){return t.id==e.id}));i&&Er(i)&&(sc(this,r,i,!1),fc(this,i,t,n),this.Xb=new Ga(i),yc(this,r.variants))}else if(this.a&&this.a.audioTracks){for(t=Array.from(this.a.audioTracks),t=d(t),n=t.next();!n.done;n=t.next())n=n.value,yr(n)==e.id&&(n.enabled=!0);bc(this)}},Bl.prototype.selectVariantTrack=Bl.prototype.Rf,Bl.prototype.Ge=function(){return Lc(this.Sc())},Bl.prototype.getAudioLanguagesAndRoles=Bl.prototype.Ge,Bl.prototype.$e=function(){return Lc(this.qb())},Bl.prototype.getTextLanguagesAndRoles=Bl.prototype.$e,Bl.prototype.Fe=function(){return Array.from(Nc(this.Sc()))},Bl.prototype.getAudioLanguages=Bl.prototype.Fe,Bl.prototype.Ze=function(){return Array.from(Nc(this.qb()))},Bl.prototype.getTextLanguages=Bl.prototype.Ze,Bl.prototype.Of=function(e,t){if(this.b&&this.s){var n=Fc(this);this.Xb=new Ya(e,t||"",0),vc(this,n)}else if(this.a&&this.a.audioTracks){n=Array.from(this.a.audioTracks),n=d(n);for(var r=n.next();!r.done;r=n.next())r=r.value,r.language==e&&(r.enabled=!0);bc(this)}},Bl.prototype.selectAudioLanguage=Bl.prototype.Of,Bl.prototype.Qf=function(e,t){if(this.b&&this.s){var n=Fc(this);this.na=e,this.fb=t||"";var r=Sr(n.textStreams,this.na,this.fb)[0]||null;r&&(uc(this,n,r,!1),(this.c.streaming.alwaysStreamText||this.ic())&&hc(this,r))}else(n=this.qb().filter((function(t){return t.language==e}))[0])&&this.od(n)},Bl.prototype.selectTextLanguage=Bl.prototype.Qf,Bl.prototype.ic=function(){var e=this.gb;return this.b?this.F.g.isTextVisible():this.a&&this.a.src&&this.a.textTracks?Array.from(this.a.textTracks).some((function(e){return"showing"==e.mode})):e},Bl.prototype.isTextTrackVisible=Bl.prototype.ic,Bl.prototype.Uf=function(e){var t=this;return p((function n(){var r,i,o,a,s,u;return k(n,(function(n){switch(n.j){case 1:if(r=t.gb,i=e,r==i)return n["return"]();if(t.gb=i,t.h!=Gc){if(t.a&&t.a.src&&t.a.textTracks){o=Array.from(t.a.textTracks);for(var l=d(o),c=l.next();!c.done;c=l.next())a=c.value,"disabled"!=a.mode&&(a.mode=e?"showing":"hidden")}n.A(2);break}if(t.F.g.setTextVisibility(e),t.c.streaming.alwaysStreamText){n.A(2);break}if(!e){l=t.f,l.D=!0,(c=l.b.get("text"))&&(mu(c),l.b["delete"]("text")),n.A(2);break}if(s=Fc(t),u=Sr(s.textStreams,t.na,t.fb),!(0<u.length)){n.A(2);break}return w(n,Bs(t.f,u[0]),2);case 2:Sc(t),x(n)}}))}))},Bl.prototype.setTextTrackVisibility=Bl.prototype.Uf,Bl.prototype.Ve=function(){if(!this.V())return null;if(this.b)return new Date(1e3*(this.b.presentationTimeline.f+this.a.currentTime));if(this.a&&this.a.getStartDate){var e=this.a.getStartDate();return isNaN(e.getTime())?null:new Date(e.getTime()+1e3*this.a.currentTime)}return null},Bl.prototype.getPlayheadTimeAsDate=Bl.prototype.Ve,Bl.prototype.Xe=function(){if(!this.V())return null;if(this.b)return new Date(1e3*this.b.presentationTimeline.f);if(this.a&&this.a.getStartDate){var e=this.a.getStartDate();return isNaN(e.getTime())?null:e}return null},Bl.prototype.getPresentationStartTimeAsDate=Bl.prototype.Xe,Bl.prototype.Oc=function(){var e={total:[],audio:[],video:[],text:[]};return this.h==Yc&&(e.total=dn(this.a.buffered)),this.h==Gc&&this.F.Oc(e),e},Bl.prototype.getBufferedInfo=Bl.prototype.Oc,Bl.prototype.getStats=function(){if(this.h!=Gc&&this.h!=Yc)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,switchHistory:[],stateHistory:[]};gc(this);var e=this.a;if(e.getVideoPlaybackQuality){e=e.getVideoPlaybackQuality();var t=this.v,n=Number(e.totalVideoFrames);t.i=Number(e.droppedVideoFrames),t.h=n}this.h==Gc&&((e=kc(this))&&(this.v.l=e.bandwidth),e&&e.video&&(t=this.v,n=e.video.height||NaN,t.m=e.video.width||NaN,t.g=n),e=this.l.getBandwidthEstimate(),this.v.f=e);var r=this.v;e=r.m,t=r.g,n=r.l;var i=r.h,o=r.i,a=r.f,s=r.b,u=Pl(r.a,"playing"),l=Pl(r.a,"paused"),c=Pl(r.a,"buffering"),f=Ol(r.a),h=[];r=d(r.c.a);for(var p=r.next();!p.done;p=r.next())p=p.value,h.push({timestamp:p.timestamp,id:p.id,type:p.type,fromAdaptation:p.fromAdaptation,bandwidth:p.bandwidth});return{width:e,height:t,streamBandwidth:n,decodedFrames:i,droppedFrames:o,estimatedBandwidth:a,loadLatency:s,playTime:u,pauseTime:l,bufferingTime:c,stateHistory:f,switchHistory:h}},Bl.prototype.getStats=Bl.prototype.getStats,Bl.prototype.addTextTrack=function(e,t,n,r,i,o){var a=this;return p((function s(){var u,l,c,d,f,h,p,m,g;return k(s,(function(s){switch(s.j){case 1:if(a.h==Yc)throw Error("State error!");if(a.h!=Gc)throw Error("State error!");if(u=Fc(a),l=mn,c=a.b.periods.indexOf(u),d=c+1,f=d>=a.b.periods.length?a.b.presentationTimeline.Y():a.b.periods[d].startTime,h=f-u.startTime,1/0==h)throw new ve(1,4,4033);return p=new Yi(1,0,h,(function(){return[e]}),0,null),m={id:a.Kd++,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(e){return 1==e?p:null},initSegmentReference:null,presentationTimeOffset:0,mimeType:r,codecs:i||"",kind:n,encrypted:!1,keyId:null,language:t,label:o||null,type:l.qa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},a.Zb.add(m),u.textStreams.push(m),w(s,Bs(a.f,m),2);case 2:return(g=ks(a.f,"text"))&&Ba(a.$,u,g),a.Zb["delete"](m),vc(a,u),Ec(a),s["return"](gr(m))}}))}))},Bl.prototype.addTextTrack=Bl.prototype.addTextTrack,Bl.prototype.qd=function(e,t){this.$b.width=e,this.$b.height=t},Bl.prototype.setMaxHardwareResolution=Bl.prototype.qd,Bl.prototype.nd=function(){if(this.h==Gc){var e=this.f;if(e.f)e=!1;else if(e.m)e=!1;else{for(var t=d(e.b.values()),n=t.next();!n.done;n=t.next())n=n.value,n.Mb&&(n.Mb=!1,pu(e,n,.1));e=!0}}else e=!1;return e},Bl.prototype.retryStreaming=Bl.prototype.nd,Bl.prototype.Me=function(){return this.b},Bl.prototype.getManifest=Bl.prototype.Me,Bl.prototype.Ne=function(){return this.m?this.m.constructor:null},Bl.prototype.getManifestParserFactory=Bl.prototype.Ne,n=Bl.prototype,n.Jc=function(e){var t=this.f?Os(this.f):null,n=this.f?Fs(this.f):null;if(hr(this.i,t,n,e),t=e.variants,!t.some(Er))throw new ve(2,4,4011);if(Mc(this,e.variants),fr(t,this.c.restrictions,this.$b)&&this.f&&Fc(this)==e&&Ec(this),e=this.i?this.i.a:null)for(t=d(t),n=t.next();!n.done;n=t.next()){n=d(n.value.drmInfos);for(var r=n.next();!r.done;r=n.next())if(r=r.value,r.keySystem==e.keySystem){r=d(r.initData||[]);for(var i=r.next();!i.done;i=r.next())i=i.value,Pt(this.i,i.initDataType,i.initData)}}},n.gf=function(e){try{this.kb=!0,this.l.disable(),wc(this);var t=yc(this,e.variants),n=Sr(e.textStreams,this.na,this.fb)[0]||null;this.Ga&&(e.variants.includes(this.Ga)&&(t=this.Ga),this.Ga=null),this.oa&&(e.textStreams.includes(this.oa)&&(n=this.oa),this.oa=null),t&&sc(this,e,t,!0),n&&uc(this,e,n,!0);var r=this.f,i=r.b.get("video");if(i)var o=r.c.periods[i.ia];else{var a=r.b.get("audio");o=a?r.c.periods[a.ia]:null}var s=t?t.audio:null;if(!o&&n){var u;if(u=s){e=n;var l=sr(this.c.preferredTextLanguage),c=sr(s.language),d=sr(e.language);u=or(d,l)&&!or(c,d)}u&&(this.gb=!0),this.gb&&this.F.g.setTextVisibility(!0),Sc(this)}return this.c.streaming.alwaysStreamText||this.ic()?{variant:t,text:n}:{variant:t,text:null}}catch(f){return this.Ma(f),{variant:null,text:null}}},n.ve=function(){this.kb=!1,this.c.abr.enabled&&(this.l.enable(),wc(this)),this.Ga&&(Hs(this.f,this.Ga,this.Hd,this.Fd),bc(this),this.Ga=null),this.oa&&(js(this.f,this.oa,!0,0,!1),Tc(this),this.oa=null)},n.mf=function(){this.m&&this.m.update&&this.m.update()},n.tf=function(){this.s&&this.s.s()},n.Ma=function(e){if(this.h!=Vc){var t=new Ae("error",{detail:e});this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)}};var Vc=0,qc=1,Gc=2,Yc=3;function zc(e,t,n){var r=void 0==t.expiration?1/0:t.expiration,i=t.presentationTimeline.Y();return t=Xc(t.periods[0]),{offlineUri:null,originalManifestUri:e,duration:i,size:0,expiration:r,tracks:t,appMetadata:n}}function Wc(e,t){var n=ul(new al(e.ua(),e.aa()),t.periods[0],new Eo(null,0)),r=t.appMetadata||{};return n=Xc(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r}}function Xc(e){var t=[],n=br(e.variants);n=d(n);for(var r=n.next();!r.done;r=n.next())t.push(mr(r.value));for(e=d(e.textStreams),n=e.next();!n.done;n=e.next())t.push(gr(n.value));return t}function $c(){this.a={}}function Qc(e,t,n){return n=n.endTime-n.startTime,Jc(e,t)*n}function Jc(e,t){var n=e.a[t];return null==n&&(n=0),n}function Zc(e){this.a=!1,this.b=new _e,this.c=e}function ed(e,t){for(var n={width:1/0,height:1/0},r=d(e.periods),i=r.next();!i.done;i=r.next())i=i.value,i.variants=i.variants.filter((function(e){return dr(e,t,n)}))}function td(e){e=d(e.periods);for(var t=e.next();!t.done;t=e.next())t=t.value,t.variants=t.variants.filter((function(e){var t=!0;return e.audio&&(t=t&&Yn(e.audio)),e.video&&(t=t&&Yn(e.video)),t}))}function nd(e,t){for(var n=d(e.periods),r=n.next();!r.done;r=n.next())r=r.value,r.variants=r.variants.filter((function(e){return $t(t,e)}))}function rd(e){var t=new ad;e.periods.forEach((function(e,n){var r=ld(e.variants);if(0==n){r=d(r.a);for(var i=r.next();!i.done;i=r.next())t.add(i.value)}else sd(t,r)})),e=d(e.periods);for(var n=e.next();!n.done;n=e.next())n=n.value,n.variants=n.variants.filter((function(e){return ud(t,new od(e))}))}function id(e,t){var n=new ad;e.periods.forEach((function(e,r){0<r&&(e.variants=e.variants.filter((function(e){return ud(n,new od(e))}))),t(e),n=ld(e.variants)}))}function od(e){var t=e.audio;e=e.video,this.b=t?t.mimeType:null,this.a=t?t.codecs.split(".")[0]:null,this.f=e?e.mimeType:null,this.c=e?e.codecs.split(".")[0]:null}function ad(){this.a=[]}function sd(e,t){e.a=e.a.filter((function(e){return ud(t,e)}))}function ud(e,t){return e.a.some((function(e){return t.b==e.b&&t.a==e.a&&t.f==e.f&&t.c==e.c}))}function ld(e){var t=new ad;e=d(e);for(var n=e.next();!n.done;n=e.next())t.add(new od(n.value));return t}function cd(e){var t=this;if(e&&e.constructor!=Bl)throw new ve(2,9,9008);this.b=this.a=null,e?(this.a=e.c,this.b=e.Jb()):(this.a=Rl(),this.b=new ke),this.f=!1,this.c=[],this.g=[];var n=!e;this.h=new Zc((function(){return p((function e(){var r;return k(e,(function(e){switch(e.j){case 1:return r=function(){},w(e,Promise.all(t.g.map((function(e){return e.then(r,r)}))),2);case 2:if(!n){e.A(3);break}return w(e,t.b.destroy(),3);case 3:t.a=null,t.b=null,x(e)}}))}))}))}function dd(){if(dt())e:{for(var e=d(Hu.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function fd(e,t,n,r){return p((function i(){var o,a,s,u,l,c,d,f,h,p;return k(i,(function(i){switch(i.j){case 1:return Dd(),e.f?i["return"](Promise.reject(new ve(2,9,9006))):(e.f=!0,w(i,bd(e,t,r),2));case 2:if(o=i.o,Ad(e),a=!o.presentationTimeline.V()&&!o.presentationTimeline.Xa(),!a)throw new ve(2,9,9005,t);return s=null,u=new Lu,c=l=null,I(i,3,4),w(i,Td(e,o,(function(e){c=c||e})),6);case 6:if(s=i.o,Ad(e),c)throw c;return hd(e,o,s),w(i,u.init(),7);case 7:return Ad(e),w(i,Pu(u),8);case 8:return l=i.o,Ad(e),w(i,pd(e,l.aa,s,o,t,n),9);case 9:if(d=i.o,Ad(e),c)throw c;return w(i,l.aa.addManifests([d]),10);case 10:return f=i.o,Ad(e),h=new il("manifest",l.path.ua,l.path.aa,f[0]),i["return"](Wc(h,d));case 4:return M(i),e.f=!1,e.c=[],w(i,u.destroy(),11);case 11:if(!s){i.A(12);break}return w(i,s.destroy(),12);case 12:C(i,0);break;case 3:if(p=R(i),!l){i.A(14);break}return w(i,l.aa.removeSegments(e.c,(function(){})),14);case 14:throw c||p}}))}))}function hd(e,t,n){ed(t,e.a.restrictions),td(t),nd(t,n),rd(t),id(t,(function(t){for(var n=[],r=d(t.variants),i=r.next();!i.done;i=r.next())n.push(mr(i.value));for(r=d(t.textStreams),i=r.next();!i.done;i=r.next())n.push(gr(i.value));n=e.a.offline.trackSelectionCallback(n);var o=new Set,a=new Set;for(n=d(n),r=n.next();!r.done;r=n.next())r=r.value,"variant"==r.type&&o.add(r.id),"text"==r.type&&a.add(r.id);t.variants=t.variants.filter((function(e){return o.has(e.id)})),t.textStreams=t.textStreams.filter((function(e){return a.has(e.id)}))})),Ld(t)}function pd(e,t,n,r,i,o){return p((function a(){var s,u,l,c,d,f,h,p;return k(a,(function(a){switch(a.j){case 1:return s=zc(i,r,o),u=r.periods.some((function(e){return e.variants.some((function(e){return e.drmInfos&&e.drmInfos.length}))})),l=r.periods.some((function(e){return e.variants.some((function(e){return e.drmInfos.some((function(e){return e.initData&&e.initData.length}))}))})),c=u&&!l,d=new Tu(e.b,(function(t,n){s.size=n,e.a.offline.progressCallback(s,t)}),(function(t){c&&e.a.offline.usePersistentLicense&&Pt(n,"cenc",t)})),A(a,2),h=f=Sd(e,d,t,n,r,i,o),w(a,wu(d),4);case 4:if(h.size=a.o,f.expiration=n.Ib(),p=kt(n),f.sessionIds=e.a.offline.usePersistentLicense?p:[],u&&e.a.offline.usePersistentLicense&&!p.length)throw new ve(2,9,9007);return a["return"](f);case 2:return M(a),w(a,d.destroy(),5);case 5:C(a,0)}}))}))}function md(e,t){return p((function n(){var r,i,o,a,s,u;return k(n,(function(n){switch(n.j){case 1:return Dd(),r=ol(t),null==r||"manifest"!=r.a?n["return"](Promise.reject(new ve(2,9,9004,t))):(i=r,o=new Lu,A(n,2),w(n,o.init(),4));case 4:return w(n,Fu(o,i.ua(),i.aa()),5);case 5:return a=n.o,w(n,a.getManifests([i.key()]),6);case 6:return s=n.o,u=s[0],w(n,Promise.all([yd(e,u,o),vd(e,a,i,u)]),2);case 2:return M(n),w(n,o.destroy(),8);case 8:C(n,0)}}))}))}function gd(e,t){for(var n=[],r=d(e.periods),i=r.next();!i.done;i=r.next()){i=d(i.value.streams);for(var o=i.next();!o.done;o=i.next())o=o.value,t&&"video"==o.contentType?n.push({contentType:st(o.mimeType,o.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=o.contentType||n.push({contentType:st(o.mimeType,o.codecs),robustness:e.drmInfo.audioRobustness})}return n}function yd(e,t,n){return p((function r(){return k(r,(function(r){switch(r.j){case 1:return w(r,Cd(e.b,e.a.drm,n,t),0)}}))}))}function vd(e,t,n,r){function i(){s+=1,e.a.offline.progressCallback(u,s/a)}var o=Md(r),a=o.length+1,s=0,u=Wc(n,r);return Promise.all([t.removeSegments(o,i),t.removeManifests([n.key()],i)])}function _d(e){return p((function t(){var n,r,i,o,a,s,u,l,c;return k(t,(function(t){switch(t.j){case 1:return Dd(),n=e.b,r=e.a.drm,i=new Lu,o=!1,A(t,2),w(t,i.init(),4);case 4:for(a=[],ku(i,(function(e){return a.push(e)})),s=Promise.resolve(),u={},l=d(a),c=l.next();!c.done;u={sc:u.sc},c=l.next())u.sc=c.value,s=s.then(function(e){return function(){return p((function t(){var i,a;return k(t,(function(t){switch(t.j){case 1:return w(t,e.sc.getAll(),2);case 2:return i=t.o,w(t,ml(r,n,i),3);case 3:return a=t.o,w(t,e.sc.remove(a),4);case 4:a.length!=i.length&&(o=!0),x(t)}}))}))}}(u));return w(t,s,2);case 2:return M(t),w(t,i.destroy(),6);case 6:C(t,3);break;case 3:return t["return"](!o)}}))}))}function Ed(){return p((function e(){var t,n,r;return k(e,(function(e){switch(e.j){case 1:return Dd(),t=[],n=new Lu,A(e,2),w(e,n.init(),4);case 4:return r=Promise.resolve(),Ou(n,(function(e,n){r=r.then((function(){return p((function r(){var i;return k(r,(function(r){switch(r.j){case 1:return w(r,n.getAllManifests(),2);case 2:i=r.o,i.forEach((function(n,r){var i=Wc(new il("manifest",e.ua,e.aa,r),n);t.push(i)})),x(r)}}))}))}))})),w(e,r,2);case 2:return M(e),w(e,n.destroy(),6);case 6:C(e,3);break;case 3:return e["return"](t)}}))}))}function bd(e,t,n){return p((function r(){var i,o,a,s,u,l;return k(r,(function(r){switch(r.j){case 1:return i=null,o=e.b,a={networkingEngine:o,filterAllPeriods:function(){},filterNewPeriod:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){i=e}},w(r,n(),2);case 2:return s=r.o,s.configure(e.a.manifest),Ad(e),A(r,3),w(r,s.start(t,a),5);case 5:return u=r.o,Ad(e),l=Nd(u),w(r,Promise.all(Array.from(l).map((function(e){return e.createSegmentIndex()}))),6);case 6:if(Ad(e),i)throw i;return r["return"](u);case 3:return M(r),w(r,s.stop(),7);case 7:C(r,0)}}))}))}function Td(e,t,n){return p((function r(){var i,o,a;return k(r,(function(r){switch(r.j){case 1:return i=new xt({tb:e.b,onError:n,mc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),o=ss(t.periods),a=e.a,i.configure(a.drm),w(r,At(i,o,a.offline.usePersistentLicense),2);case 2:return w(r,Ct(i),3);case 3:return w(r,Lt(i),4);case 4:return r["return"](i)}}))}))}function Sd(e,t,n,r,i,o,a){var s=new $c,u=i.periods.map((function(r){return wd(e,t,n,s,i,r)})),l=r.a,c=e.a.offline.usePersistentLicense;return l&&c&&(l.initData=[]),{originalManifestUri:o,duration:i.presentationTimeline.Y(),size:0,expiration:r.Ib(),periods:u,sessionIds:c?kt(r):[],drmInfo:l,appMetadata:a}}function wd(e,t,n,r,i,o){i.periods.forEach((function(e){e.variants.forEach((function(e){var t=e.audio,n=e.video;if(t&&!n&&(r.a[t.id]=t.bandwidth||e.bandwidth),!t&&n&&(r.a[n.id]=n.bandwidth||e.bandwidth),t&&n){var i=t.bandwidth||393216,o=n.bandwidth||e.bandwidth-i;0>=o&&(o=e.bandwidth),r.a[t.id]=i,r.a[n.id]=o}})),e.textStreams.forEach((function(e){r.a[e.id]=52}))}));var a=Nd(i),s=new Map;a=d(a);for(var u=a.next();!u.done;u=a.next()){u=u.value;var l=xd(e,t,n,r,i,u);s.set(u.id,l)}return o.variants.forEach((function(e){e.audio&&s.get(e.audio.id).variantIds.push(e.id),e.video&&s.get(e.video.id).variantIds.push(e.id)})),{startTime:o.startTime,streams:Array.from(s.values())}}function xd(e,t,n,r,i,o){var a={id:o.id,originalId:o.originalId,primary:o.primary,presentationTimeOffset:o.presentationTimeOffset||0,contentType:o.type,mimeType:o.mimeType,codecs:o.codecs,frameRate:o.frameRate,kind:o.kind,language:o.language,label:o.label,width:o.width||null,height:o.height||null,initSegmentKey:null,encrypted:o.encrypted,keyId:o.keyId,segments:[],variantIds:[]};i=i.presentationTimeline.Lb();var s=o.id,u=o.initSegmentReference;return u&&(u=bo(u.c(),u.b,u.a,e.a.streaming.retryParameters),Su(t,s,u,.5*Jc(r,o.id),!0,(function(t){return p((function r(){var i;return k(r,(function(r){switch(r.j){case 1:return w(r,n.addSegments([{data:t}]),2);case 2:i=r.o,e.c.push(i[0]),a.initSegmentKey=i[0],x(r)}}))}))}))),Id(o,i,(function(i){var u=bo(i.c(),i.b,i.a,e.a.streaming.retryParameters);Su(t,s,u,Qc(r,o.id,i),!1,(function(t){return p((function r(){var o;return k(r,(function(r){switch(r.j){case 1:return w(r,n.addSegments([{data:t}]),2);case 2:o=r.o,e.c.push(o[0]),a.segments.push({startTime:i.startTime,endTime:i.endTime,dataKey:o[0]}),x(r)}}))}))}))})),a}function Id(e,t,n){t=e.findSegmentPosition(t);for(var r=null==t?null:e.getSegmentReference(t);r;)n(r),r=e.getSegmentReference(++t)}function Ad(e){if(e.h.a)throw new ve(2,9,7001)}function Dd(){if(!dd())throw new ve(2,9,9e3)}function Rd(e,t){return p((function n(){return k(n,(function(n){switch(n.j){case 1:return e.g.push(t),A(n,2),w(n,t,4);case 4:return n["return"](n.o);case 2:M(n),Ne(e.g,t),C(n,0)}}))}))}function Md(e){var t=[];return e.periods.forEach((function(e){e.streams.forEach((function(e){null!=e.initSegmentKey&&t.push(e.initSegmentKey),e.segments.forEach((function(e){t.push(e.dataKey)}))}))})),t}function Cd(e,t,n,r){return p((function i(){var o,a,s;return k(i,(function(i){switch(i.j){case 1:return r.drmInfo?(o=Bu(n),a=r.sessionIds.map((function(e){return{sessionId:e,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:gd(r,!1),videoCapabilities:gd(r,!0)}})),w(i,ml(t,e,a),2)):i["return"]();case 2:return s=i.o,w(i,o.remove(s),3);case 3:return w(i,o.add(a.filter((function(e){return-1==s.indexOf(e.sessionId)}))),0)}}))}))}function Nd(e){var t=new Set;e=d(e.periods);for(var n=e.next();!n.done;n=e.next()){n=n.value;for(var r=d(n.textStreams),i=r.next();!i.done;i=r.next())t.add(i.value);for(n=d(n.variants),r=n.next();!r.done;r=n.next())r=r.value,r.audio&&t.add(r.audio),r.video&&t.add(r.video)}return t}function Ld(e){if(0==e.periods.length)throw new ve(2,4,4014);e=d(e.periods);for(var t=e.next();!t.done;t=e.next())Pd(t.value)}function Pd(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var n=d(t),r=n.next();!r.done;r=n.next()){r=d(t);for(var i=r.next();!i.done;i=r.next());}for(t=d(e),n=t.next();!n.done;n=t.next())for(n=d(e),r=n.next();!r.done;r=n.next());}Bl.LoadMode={DESTROYED:Vc,NOT_LOADED:qc,MEDIA_SOURCE:Gc,SRC_EQUALS:Yc},Zc.prototype.destroy=function(){var e=this;return this.a?this.b:(this.a=!0,this.c().then((function(){e.b.resolve()}),(function(){e.b.resolve()})))},ad.prototype.add=function(e){ud(this,e)||this.a.push(e)},q("shaka.offline.Storage",cd),cd.support=dd,cd.prototype.destroy=function(){return this.h.destroy()},cd.prototype.destroy=cd.prototype.destroy,cd.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Al(e,t));var n=e,r=!1;return null!=n.trackSelectionCallback&&(r=!0,n.offline=n.offline||{},n.offline.trackSelectionCallback=n.trackSelectionCallback,delete n.trackSelectionCallback),null!=n.progressCallback&&(r=!0,n.offline=n.offline||{},n.offline.progressCallback=n.progressCallback,delete n.progressCallback),null!=n.usePersistentLicense&&(r=!0,n.offline=n.offline||{},n.offline.usePersistentLicense=n.usePersistentLicense,delete n.usePersistentLicense),r&&Mr("Storage.configure with OfflineConfig","Please configure storage with a player configuration."),Ml(this.a,e)},cd.prototype.configure=cd.prototype.configure,cd.prototype.getConfiguration=function(){var e=Rl();return Ml(e,this.a,Rl()),e},cd.prototype.getConfiguration=cd.prototype.getConfiguration,cd.prototype.Jb=function(){return this.b},cd.prototype.getNetworkingEngine=cd.prototype.Jb,cd.prototype.store=function(e,t,n){var r=this;return Rd(this,fd(this,e,t||{},(function(){return p((function t(){var i,o;return k(t,(function(t){switch(t.j){case 1:return n&&"string"!=typeof n?(Mr("Storing with a manifest parser factory","Please register a manifest parser and for the mime-type."),i=n,t["return"](new i)):w(t,_o.create(e,r.b,r.a.manifest.retryParameters,n),2);case 2:return o=t.o,t["return"](o)}}))}))})))},cd.prototype.store=cd.prototype.store,cd.prototype.Ye=function(){return this.f},cd.prototype.getStoreInProgress=cd.prototype.Ye,cd.prototype.remove=function(e){return Rd(this,md(this,e))},cd.prototype.remove=cd.prototype.remove,cd.prototype.If=function(){return Rd(this,_d(this))},cd.prototype.removeEmeSessions=cd.prototype.If,cd.prototype.list=function(){return Rd(this,Ed())},cd.prototype.list=cd.prototype.list,cd.deleteAll=function(){return p((function e(){var t;return k(e,(function(e){switch(e.j){case 1:return t=new Lu,A(e,2),w(e,t.erase(),2);case 2:return M(e),w(e,t.destroy(),5);case 5:C(e,0)}}))}))},jl.offline=dd,q("shaka.polyfill.installAll",(function(){for(var e=0;e<kd.length;++e)kd[e].te()}));var Od,Fd,kd=[];function Bd(e,t){t=t||0;for(var n={priority:t,te:e},r=0;r<kd.length;r++)if(kd[r].priority<t)return void kd.splice(r,0,n);kd.push(n)}function Ud(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"===typeof Event)var n=new Event(t,e);else n=document.createEvent("Event"),n.initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(n)}function Hd(e,t,n){if("input"==e)switch(this.type){case"range":e="change"}HTMLInputElement.prototype.originalAddEventListener.call(this,e,t,n)}function jd(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(t){for(var n=[],r=0;r<arguments.length;++r)n[r]=arguments[r];return n=e.apply(this,n),n.abort=function(){},n}}function Kd(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function Vd(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(/ *; */)[0].split("/")[1].toLowerCase()&&e(t)}}function qd(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=lt(t)[0]&&e(t)}}function Gd(){var e=MediaSource.isTypeSupported,t=/^dv(?:h[e1]|a[v1])\./;MediaSource.isTypeSupported=function(n){for(var r=n.split(/ *; */),i=r[0],o={},a=1;a<r.length;++a){var s=r[a].split("="),u=s[0];s=s[1].replace(/"(.*)"/,"$1"),o[u]=s}if(r=o.codecs,!r)return e(n);var l=!1,c=!1;for(var d in n=r.split(",").filter((function(e){return t.test(e)&&(c=!0),/^(hev|hvc)1\.2/.test(e)&&(l=!0),!0})),c&&(l=!1),o.codecs=n.join(","),l&&(o.eotf="smpte2084"),o)i+="; "+d+'="'+o[d]+'"';return cast.__platform__.canDisplayType(i)}}function Yd(e,t){try{var n=new zd(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function zd(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(var n=d(t),r=n.next();!r.done;r=n.next()){var i=r.value;if("required"==i.persistentState)r=null;else{r={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label};var o=!1,a=!1;if(i.audioCapabilities)for(var s=d(i.audioCapabilities),u=s.next();!u.done;u=s.next())if(u=u.value,u.contentType){o=!0;var l=u.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(this.keySystem,l)&&(r.audioCapabilities.push(u),a=!0)}if(i.videoCapabilities)for(i=d(i.videoCapabilities),u=i.next();!u.done;u=i.next())s=u.value,s.contentType&&(o=!0,u=s.contentType.split(";")[0],WebKitMediaKeys.isTypeSupported(this.keySystem,u)&&(r.videoCapabilities.push(s),a=!0));o||(a=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),r=a?r:null}if(r)return void(this.a=r)}throw n=Error("Unsupported keySystem"),n.name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Wd(e){var t=this.mediaKeys;return t&&t!=e&&$d(t,null),delete this.mediaKeys,(this.mediaKeys=e)?$d(e,this):Promise.resolve()}function Xd(e){this.b=new WebKitMediaKeys(e),this.a=new $e}function $d(e,t){if(e.a.$a(),!t)return Promise.resolve();e.a.w(t,"webkitneedkey",Jd);try{return 1<=t.readyState?t.webkitSetMediaKeys(e.b):e.a.da(t,"loadedmetadata",(function(){t.webkitSetMediaKeys(e.b)})),Promise.resolve()}catch(n){return Promise.reject(n)}}function Qd(e){Re.call(this),this.b=null,this.g=e,this.c=this.a=null,this.f=new $e,this.sessionId="",this.expiration=NaN,this.closed=new _e,this.keyStatuses=new ef}function Jd(e){var t=new Event("encrypted");t.initDataType="cenc",t.initData=e.initData,this.dispatchEvent(t)}function Zd(e,t){var n=e.keyStatuses;n.size=void 0==t?0:1,n.a=t,e.dispatchEvent(new Ae("keystatuseschange"))}function ef(){this.size=0,this.a=void 0}function tf(e,t){try{var n=new nf(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function nf(e,t){this.keySystem=e;for(var n=!1,r=0;r<t.length;++r){var i=t[r],o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label},a=!1;if(i.audioCapabilities)for(var s=0;s<i.audioCapabilities.length;++s){var u=i.audioCapabilities[s];if(u.contentType){a=!0;var l=u.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,l)&&(o.audioCapabilities.push(u),n=!0)}}if(i.videoCapabilities)for(s=0;s<i.videoCapabilities.length;++s)u=i.videoCapabilities[s],u.contentType&&(a=!0,l=u.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,l)&&(o.videoCapabilities.push(u),n=!0));if(a||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==i.persistentState&&(n=!1),n)return void(this.a=o)}throw n=Error("Unsupported keySystem"),n.name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function rf(e){var t=this.mediaKeys;return t&&t!=e&&af(t,null),delete this.mediaKeys,(this.mediaKeys=e)?af(e,this):Promise.resolve()}function of(e){this.a=new MSMediaKeys(e),this.b=new $e}function af(e,t){function n(){t.msSetMediaKeys(r.a),t.removeEventListener("loadedmetadata",n)}if(e.b.$a(),!t)return Promise.resolve();e.b.w(t,"msneedkey",uf);var r=e;try{return 1<=t.readyState?t.msSetMediaKeys(e.a):t.addEventListener("loadedmetadata",n),Promise.resolve()}catch(i){return Promise.reject(i)}}function sf(e){Re.call(this),this.c=null,this.g=e,this.b=this.a=null,this.f=new $e,this.sessionId="",this.expiration=NaN,this.closed=new _e,this.keyStatuses=new cf}function uf(e){if(e.initData){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",t.initData=Ai(e.initData),this.dispatchEvent(t)}}function lf(e,t){var n=e.keyStatuses;n.size=void 0==t?0:1,n.a=t,e.dispatchEvent(new Ae("keystatuseschange"))}function cf(){this.size=0,this.a=void 0}function df(){return Promise.reject(Error("The key system specified is not supported."))}function ff(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function hf(){throw new TypeError("Illegal constructor.")}function pf(){throw new TypeError("Illegal constructor.")}q("shaka.polyfill.register",Bd),Bd((function(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,t=Document.prototype,t.exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitExitFullscreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Ud),document.addEventListener("webkitfullscreenerror",Ud),document.addEventListener("mozfullscreenchange",Ud),document.addEventListener("mozfullscreenerror",Ud),document.addEventListener("MSFullscreenChange",Ud),document.addEventListener("MSFullscreenError",Ud)}})),Bd((function(){ht("CrKey")&&delete e.indexedDB})),Bd((function(){ht("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=Hd)})),Bd((function(){navigator.languages||Object.defineProperty(navigator,"languages",{get:function(){return navigator.language?[navigator.language]:["en"]}})})),Bd((function(){})),Bd((function(){if(e.MediaSource)if(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType)Gd();else if(navigator.vendor&&navigator.vendor.includes("Apple")){var t=navigator.appVersion.match(/Version\/(\d+)/);t=parseInt(t[1],10),Vd(),10>=t?e.MediaSource=null:12>=t?(jd(),Kd()):jd()}else ht("Tizen")&&qd()})),zd.prototype.createMediaKeys=function(){var e=new Xd(this.keySystem);return Promise.resolve(e)},zd.prototype.getConfiguration=function(){return this.a},Xd.prototype.createSession=function(e){if(e=e||"temporary","temporary"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Qd(this.b,e)},Xd.prototype.setServerCertificate=function(e){return e&&new Uint8Array(e),Promise.resolve(!0)},G(Qd,Re),n=Qd.prototype,n.generateRequest=function(e,t){this.a=new _e;try{this.b=this.g.createSession("video/mp4",new Uint8Array(t)),this.sessionId=this.b.sessionId||"",this.f.w(this.b,"webkitkeymessage",this.Zf.bind(this)),this.f.w(this.b,"webkitkeyadded",this.Xf.bind(this)),this.f.w(this.b,"webkitkeyerror",this.Yf.bind(this)),Zd(this,"status-pending")}catch(n){this.a.reject(n)}return this.a},n.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},n.update=function(e){this.c=new _e;try{this.b.update(new Uint8Array(e))}catch(t){this.c.reject(t)}return this.c},n.close=function(){try{this.b.close(),this.closed.resolve(),this.f.$a()}catch(fh){this.closed.reject(fh)}return this.closed},n.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},n.Zf=function(e){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new Ae("message",{messageType:void 0==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},n.Xf=function(){this.c&&(Zd(this,"usable"),this.c.resolve(),this.c=null)},n.Yf=function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=this.b.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.c)this.c.reject(e),this.c=null;else switch(this.b.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Zd(this,"output-not-allowed");break;default:Zd(this,"internal-error")}},n=ef.prototype,n.forEach=function(e){this.a&&e(this.a,Od)},n.get=function(e){if(this.has(e))return this.a},n.has=function(e){var t=Od;return!(!this.a||!wt.ya(new Uint8Array(e),new Uint8Array(t)))},n.entries=function(){},n.keys=function(){},n.values=function(){},Bd((function(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(Od=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Wd,e.MediaKeys=Xd,e.MediaKeySystemAccess=zd,navigator.requestMediaKeySystemAccess=Yd)})),nf.prototype.createMediaKeys=function(){var e=new of(this.keySystem);return Promise.resolve(e)},nf.prototype.getConfiguration=function(){return this.a},of.prototype.createSession=function(e){if(e=e||"temporary","temporary"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");return new sf(this.a,e)},of.prototype.setServerCertificate=function(){return Promise.resolve(!1)},G(sf,Re),n=sf.prototype,n.generateRequest=function(e,t){this.a=new _e;try{this.c=this.g.createSession("video/mp4",new Uint8Array(t),null),this.f.w(this.c,"mskeymessage",this.rf.bind(this)),this.f.w(this.c,"mskeyadded",this.pf.bind(this)),this.f.w(this.c,"mskeyerror",this.qf.bind(this)),lf(this,"status-pending")}catch(n){this.a.reject(n)}return this.a},n.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},n.update=function(e){this.b=new _e;try{this.c.update(new Uint8Array(e))}catch(t){this.b.reject(t)}return this.b},n.close=function(){try{this.c.close(),this.closed.resolve(),this.f.$a()}catch(fh){this.closed.reject(fh)}return this.closed},n.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},n.rf=function(e){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new Ae("message",{messageType:void 0==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},n.pf=function(){this.a?(lf(this,"usable"),this.a.resolve(),this.a=null):this.b&&(lf(this,"usable"),this.b.resolve(),this.b=null)},n.qf=function(){var e=Error("EME PatchedMediaKeysMs key error");if(e.errorCode=this.c.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.b)this.b.reject(e),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:lf(this,"output-not-allowed");break;default:lf(this,"internal-error")}},n=cf.prototype,n.forEach=function(e){this.a&&e(this.a,Fd)},n.get=function(e){if(this.has(e))return this.a},n.has=function(e){var t=Fd;return!(!this.a||!wt.ya(new Uint8Array(e),new Uint8Array(t)))},n.entries=function(){},n.keys=function(){},n.values=function(){},Bd((function(){!e.HTMLVideoElement||!e.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(Fd=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=rf,e.MediaKeys=of,e.MediaKeySystemAccess=nf,navigator.requestMediaKeySystemAccess=tf)})),hf.prototype.createSession=function(){},hf.prototype.setServerCertificate=function(){},pf.prototype.getConfiguration=function(){},pf.prototype.createMediaKeys=function(){},Bd((function(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=df,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ff,e.MediaKeys=hf,e.MediaKeySystemAccess=pf)}),-10);var mf,gf="";function yf(e){var t=gf;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function vf(e,t){try{var n=new Ef(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function _f(e){var t=this.mediaKeys;return t&&t!=e&&Tf(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Tf(e,this),Promise.resolve()}function Ef(e,t){this.a=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.a="webkit-org.w3.clearkey",n=!1);var r=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video");for(var o=0;o<t.length;++o){var a=t[o],s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:a.initDataTypes,sessionTypes:["temporary"],label:a.label},u=!1;if(a.audioCapabilities)for(var l=0;l<a.audioCapabilities.length;++l){var c=a.audioCapabilities[l];if(c.contentType){u=!0;var d=c.contentType.split(";")[0];i.canPlayType(d,this.a)&&(s.audioCapabilities.push(c),r=!0)}}if(a.videoCapabilities)for(l=0;l<a.videoCapabilities.length;++l)c=a.videoCapabilities[l],c.contentType&&(u=!0,i.canPlayType(c.contentType,this.a)&&(s.videoCapabilities.push(c),r=!0));if(u||(r=i.canPlayType("video/mp4",this.a)||i.canPlayType("video/webm",this.a)),"required"==a.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):r=!1),r)return void(this.b=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),n=Error(n),n.name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function bf(e){this.g=e,this.b=null,this.a=new $e,this.c=[],this.f={}}function Tf(e,t){e.b=t,e.a.$a();var n=gf;t&&(e.a.w(t,n+"needkey",e.wf.bind(e)),e.a.w(t,n+"keymessage",e.bg.bind(e)),e.a.w(t,n+"keyadded",e.$f.bind(e)),e.a.w(t,n+"keyerror",e.ag.bind(e)))}function Sf(e,t){var n=e.f[t];return n||((n=e.c.shift())?(n.sessionId=t,e.f[t]=n):null)}function wf(e,t,n){Re.call(this),this.f=e,this.h=!1,this.a=this.b=null,this.c=t,this.g=n,this.sessionId="",this.expiration=NaN,this.closed=new _e,this.keyStatuses=new Af}function xf(e,t,n){if(e.h)return Promise.reject(Error("The session is already initialized."));e.h=!0;try{if("persistent-license"==e.g)if(n)var r=new Uint8Array(Et("LOAD_SESSION|"+n));else{var o=Et("PERSISTENT|"),a=new Uint8Array(o.byteLength+t.byteLength);a.set(new Uint8Array(o),0),a.set(new Uint8Array(t),o.byteLength),r=a}else r=new Uint8Array(t)}catch(i){return Promise.reject(i)}e.b=new _e;var s=yf("generateKeyRequest");try{e.f[s](e.c,r)}catch(i){if("InvalidStateError"!=i.name)return e.b=null,Promise.reject(i);new pe((function(){try{e.f[s](e.c,r)}catch(t){e.b.reject(t),e.b=null}})).P(.01)}return e.b}function If(e,t){var n=e.keyStatuses;n.size=void 0==t?0:1,n.a=t,e.dispatchEvent(new Ae("keystatuseschange"))}function Af(){this.size=0,this.a=void 0}function Df(e){if(e=e.target,"picture-in-picture"==e.webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function Rf(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Mf(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function Cf(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Nf(t,n,r){return new e.TextTrackCue(t,n,r)}function Lf(t,n,r){return new e.TextTrackCue(t+"-"+n+"-"+r,t,n,r)}function Pf(){}Ef.prototype.createMediaKeys=function(){var e=new bf(this.a);return Promise.resolve(e)},Ef.prototype.getConfiguration=function(){return this.b},n=bf.prototype,n.createSession=function(e){if(e=e||"temporary","temporary"!=e&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.b||document.createElement("video");return t.src||(t.src="about:blank"),e=new wf(t,this.g,e),this.c.push(e),e},n.setServerCertificate=function(){return Promise.resolve(!1)},n.wf=function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="webm",t.initData=e.initData,this.b.dispatchEvent(t)},n.bg=function(e){var t=Sf(this,e.sessionId);t&&(e=new Ae("message",{messageType:void 0==t.keyStatuses.a?"licenserequest":"licenserenewal",message:e.message}),t.b&&(t.b.resolve(),t.b=null),t.dispatchEvent(e))},n.$f=function(e){(e=Sf(this,e.sessionId))&&(If(e,"usable"),e.a&&e.a.resolve(),e.a=null)},n.ag=function(e){var t=Sf(this,e.sessionId);t&&t.handleError(e)},G(wf,Re),n=wf.prototype,n.handleError=function(e){var t=Error("EME v0.1b key error");t.errorCode=e.errorCode,t.errorCode.systemCode=e.systemCode,!e.sessionId&&this.b?(t.method="generateRequest",45==e.systemCode&&(t.message="Unsupported session type."),this.b.reject(t),this.b=null):e.sessionId&&this.a?(t.method="update",this.a.reject(t),this.a=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?If(this,"output-restricted"):If(this,1==t?"expired":"internal-error"))},n.td=function(e,t){if(this.a)this.a.then(this.td.bind(this,e,t))["catch"](this.td.bind(this,e,t));else{if(this.a=e,"webkit-org.w3.clearkey"==this.c){var n=yt(t),r=JSON.parse(n);"oct"!=r.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),n=wt.Aa(r.keys[0].k),r=wt.Aa(r.keys[0].kid)}else n=new Uint8Array(t),r=null;var i=yf("addKey");try{this.f[i](this.c,n,r,this.sessionId)}catch(o){this.a.reject(o),this.a=null}}},n.generateRequest=function(e,t){return xf(this,t,null)},n.load=function(e){return"persistent-license"==this.g?xf(this,null,e):Promise.reject(Error("Not a persistent session."))},n.update=function(e){var t=new _e;return this.td(t,e),t},n.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=yf("cancelKeyRequest");try{this.f[e](this.c,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},n.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},n=Af.prototype,n.forEach=function(e){this.a&&e(this.a,mf)},n.get=function(e){if(this.has(e))return this.a},n.has=function(e){var t=mf;return!(!this.a||!wt.ya(new Uint8Array(e),new Uint8Array(t)))},n.entries=function(){},n.keys=function(){},n.values=function(){},Bd((function(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)gf="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;mf=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=vf,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=_f,e.MediaKeys=bf,e.MediaKeySystemAccess=Ef}})),Bd((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=Rf,document.exitPictureInPicture=Mf,document.addEventListener("webkitpresentationmodechanged",Df,!0))}})),Bd((function(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e["catch"]((function(){})),e}}})),Bd((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in t&&(t.getVideoPlaybackQuality=Cf)}})),Bd((function(){if(!e.VTTCue&&e.TextTrackCue){var t=TextTrackCue.length;if(3==t)e.VTTCue=Nf;else if(6==t)e.VTTCue=Lf;else{try{var n=!!Nf(1,2,"")}catch(r){n=!1}n&&(e.VTTCue=Nf)}}})),Pf.prototype.parseInit=function(){},Pf.prototype.parseMedia=function(e,t){var n=yt(e),r=[],i=new DOMParser,o=null;if(""==n)return r;try{o=i.parseFromString(n,"text/xml")}catch(E){throw new ve(2,2,2005,"Failed to parse TTML.")}if(o){if(n=o.getElementsByTagName("parsererror")[0])throw new ve(2,2,2005,n.textContent);if(!(i=o.getElementsByTagName("tt")[0]))throw new ve(2,2,2005,"TTML does not contain <tt> tag.");var a=Di.getAttributeNS(i,"http://www.w3.org/ns/ttml#parameter","frameRate"),s=Di.getAttributeNS(i,"http://www.w3.org/ns/ttml#parameter","subFrameRate"),u=Di.getAttributeNS(i,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier"),l=Di.getAttributeNS(i,"http://www.w3.org/ns/ttml#parameter","tickRate");if(o=i.getAttribute("xml:space")||"default",n=i.getAttribute("tts:extent"),"default"!=o&&"preserve"!=o)throw new ve(2,2,2005,"Invalid xml:space value: "+o);o="default"==o,a=new rh(a,s,u,l),s=Yf(i.getElementsByTagName("metadata")[0]),u=Yf(i.getElementsByTagName("styling")[0]),l=Yf(i.getElementsByTagName("layout")[0]);for(var c=[],f=0;f<l.length;f++){var h,p,m=l[f],g=u,y=n,v=new On,_=m.getAttribute("xml:id");if(_)v.id=_,_=null,y&&(_=Of.exec(y)||kf.exec(y)),y=_?Number(_[1]):null,_=_?Number(_[2]):null,(h=Jf(m,g,"extent"))&&(h=(p=Of.exec(h))||kf.exec(h),null!=h&&(v.width=null!=y?100*Number(h[1])/y:Number(h[1]),v.height=null!=_?100*Number(h[2])/_:Number(h[2]),v.widthUnits=p||null!=y?Fn:0,v.heightUnits=p||null!=_?Fn:0)),(m=Jf(m,g,"origin"))&&(h=(p=Of.exec(m))||kf.exec(m),null!=h&&(v.viewportAnchorX=null!=_?100*Number(h[1])/_:Number(h[1]),v.viewportAnchorY=null!=y?100*Number(h[2])/y:Number(h[2]),v.viewportAnchorUnits=p||null!=y?Fn:0));else v=null;v&&c.push(v)}for(n=(n=i.getElementsByTagName("body")[0])?Array.from(n.querySelectorAll("[begin]")):[],n=d(n),i=n.next();!i.done;i=n.next())(i=Wf(i.value,t.periodStart,a,s,u,l,c,o,!1))&&r.push(i)}return r};var Of=/^(\d{1,2}(?:\.\d+)?|100)% (\d{1,2}(?:\.\d+)?|100)%$/,Ff=/^(\d+px|\d+em)$/,kf=/^(\d+)px (\d+)px$/,Bf=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Uf=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Hf=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,jf=/^(\d*(?:\.\d*)?)f$/,Kf=/^(\d*(?:\.\d*)?)t$/,Vf=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,qf={left:Mn,center:"center",right:"end",start:Mn,end:"end"},Gf={left:"line-left",center:"center",right:"line-right"};function Yf(e){var t=[];if(!e)return t;for(var n=d(e.childNodes),r=n.next();!r.done;r=n.next())r=r.value,r.nodeType==Node.ELEMENT_NODE&&"br"!==r.nodeName&&(r=Yf(r),t=t.concat(r));return t.length||t.push(e),t}function zf(e,t){for(var n="",r=d(e.childNodes),i=r.next();!i.done;i=r.next())i=i.value,"br"==i.nodeName&&e.childNodes[0]!==i?n+="\n":i.childNodes&&0<i.childNodes.length?n+=zf(i,t):t?(i=i.textContent.trim(),i=i.replace(/\s+/g," "),n+=i):n+=i.textContent;return n}function Wf(e,t,n,r,i,o,a,s,u){if(u&&"br"==e.nodeName)return e=new bn(0,0,""),e.spacer=!0,e;var l=/^[\s\n]*$/.test(e.textContent),c=e.nodeType==Node.ELEMENT_NODE&&!e.hasAttribute("begin")&&!e.hasAttribute("end");if(e.nodeType!=Node.ELEMENT_NODE||c&&l||c&&!u)return null;l=th(e.getAttribute("begin"),n),c=th(e.getAttribute("end"),n);var f=th(e.getAttribute("dur"),n);if(null==c&&null!=f&&(c=l+f),!u&&(null==l||null==c))throw new ve(2,2,2001);if(l+=t,c+=t,f="",u=[],Array.from(e.childNodes).find((function(e){return e.nodeType===Node.TEXT_NODE&&/\w+/.test(e.textContent)})))f=zf(e,s);else for(var h=d(e.childNodes),p=h.next();!p.done;p=h.next())(p=Wf(p.value,t,n,r,i,o,a,s,!0))&&u.push(p);if(t=new bn(l,c,f),t.nestedCues=u,(o=eh(e,"region",o,"")[0])&&o.getAttribute("xml:id")){var m=o.getAttribute("xml:id");t.region=a.filter((function(e){return e.id==m}))[0]}return r=eh(e,"smpte:backgroundImage",r,"#")[0],Xf(t,e,o,r,i),t}function Xf(e,t,n,r,i){"rtl"==Qf(t,n,i,"direction")&&(e.direction="rtl");var o=Qf(t,n,i,"writingMode");if("tb"==o||"tblr"==o?e.writingMode="vertical-lr":"tbrl"==o?e.writingMode="vertical-rl":"rltb"==o||"rl"==o?e.direction="rtl":o&&(e.direction=An),(o=Qf(t,n,i,"textAlign"))&&(e.positionAlign=Gf[o],e.lineAlign=qf[o],e.textAlign=wn[o.toUpperCase()]),(o=Qf(t,n,i,"displayAlign"))&&(e.displayAlign=In[o.toUpperCase()]),(o=Qf(t,n,i,"color"))&&(e.color=o),(o=Qf(t,n,i,"backgroundColor"))&&(e.backgroundColor=o),(o=Qf(t,n,i,"fontFamily"))&&(e.fontFamily=o),(o=Qf(t,n,i,"fontWeight"))&&"bold"==o&&(e.fontWeight=700),(o=Qf(t,n,i,"wrapOption"))&&"noWrap"==o&&(e.wrapLine=!1),(o=Qf(t,n,i,"lineHeight"))&&o.match(Ff)&&(e.lineHeight=o),(o=Qf(t,n,i,"fontSize"))&&o.match(Ff)&&(e.fontSize=o),(o=Qf(t,n,i,"fontStyle"))&&(e.fontStyle=Pn[o.toUpperCase()]),r){o=r.getAttribute("imagetype");var a=r.getAttribute("encoding");r=r.textContent.trim(),"PNG"==o&&"Base64"==a&&r&&(e.backgroundImage="data:image/png;base64,"+r)}(n=Jf(n,i,"textDecoration"))&&$f(e,n),(t=Zf(t,i,"textDecoration"))&&$f(e,t)}function $f(e,t){for(var n=t.split(" "),r=0;r<n.length;r++)switch(n[r]){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Ne(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Ne(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Ne(e.textDecoration,"overline")}}function Qf(e,t,n,r){return(e=Zf(e,n,r))?e:Jf(t,n,r)}function Jf(e,t,n){for(var r=Yf(e),i=0;i<r.length;i++){var o=Di.getAttributeNS(r[i],"http://www.w3.org/ns/ttml#styling",n);if(o)return o}return(e=eh(e,"style",t,"")[0])?Di.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",n):null}function Zf(e,t,n){var r=Di.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",n);if(r)return r;for(e=eh(e,"style",t,""),t=null,r=0;r<e.length;r++){var i=Di.getAttributeNS(e[r],"http://www.w3.org/ns/ttml#styling",n);i&&(t=i)}return t}function eh(e,t,n,r){var i=[];if(!e||1>n.length)return i;var o=e;for(e=null;o&&!(e=o.getAttribute(t))&&(o=o.parentNode,o instanceof Element););if(t=e)for(t=t.split(" "),t=d(t),e=t.next();!e.done;e=t.next()){e=e.value,o=d(n);for(var a=o.next();!a.done;a=o.next())if(a=a.value,r+a.getAttribute("xml:id")==e){i.push(a);break}}return i}function th(e,t){var n=null;if(Bf.test(e)){n=Bf.exec(e);var r=Number(n[1]),i=Number(n[2]),o=Number(n[3]),a=Number(n[4]);a+=(Number(n[5])||0)/t.b,o+=a/t.frameRate,n=o+60*i+3600*r}else Uf.test(e)?n=nh(Uf,e):Hf.test(e)?n=nh(Hf,e):jf.test(e)?(n=jf.exec(e),n=Number(n[1])/t.frameRate):Kf.test(e)?(n=Kf.exec(e),n=Number(n[1])/t.a):Vf.test(e)&&(n=nh(Vf,e));return n}function nh(e,t){var n=e.exec(t);return null==n||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function rh(e,t,n,r){this.frameRate=Number(e)||30,this.b=Number(t)||1,this.a=Number(r),0==this.a&&(this.a=e?this.frameRate*this.b:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}function ih(){this.a=new Pf}function oh(){}function ah(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],e.textAlign="middle"==t?Sn:wn[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==r[1]?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(r=/^region:(.*)$/.exec(t))?(t=sh(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Cn[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Rn,e.line=Number(n[1]),n[2]&&(e.lineAlign=Cn[n[2].toUpperCase()]))}function sh(e,t){var n=e.filter((function(e){return e.id==t}));return n.length?n[0]:null}function uh(e){if(e=Go(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g),null==e)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function lh(){this.a=null}function ch(e,t,n){var r,i,o;return(new Ei).H("payl",Si((function(e){r=yt(e)}))).H("iden",Si((function(e){i=yt(e)}))).H("sttg",Si((function(e){o=yt(e)}))).parse(e),r?dh(r,i,o,t,n):null}function dh(e,t,n,r,i){if(e=new bn(r,i,e),t&&(e.id=t),n)for(t=new Vo(n),n=Yo(t);n;)ah(e,n,[]),qo(t),n=Yo(t);return e}Un["application/ttml+xml"]=Pf,ih.prototype.parseInit=function(e){var t=!1;if((new Ei).H("moov",bi).H("trak",bi).H("mdia",bi).H("minf",bi).H("stbl",bi).fa("stsd",Ti).H("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new ve(2,2,2007)},ih.prototype.parseMedia=function(e,t){var n=!1,r=[];if((new Ei).H("mdat",Si(function(e){n=!0,r=r.concat(this.a.parseMedia(e,t))}.bind(this))).parse(e),!n)throw new ve(2,2,2007);return r},Un['application/mp4; codecs="stpp"']=ih,Un['application/mp4; codecs="stpp.TTML.im1t"']=ih,oh.prototype.parseInit=function(){},oh.prototype.parseMedia=function(e,t){var n=yt(e);if(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n"),n=n.split(/\n{2,}/m),!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new ve(2,2,2e3);var r=t.segmentStart;if(null==r&&(r=0,n[0].includes("X-TIMESTAMP-MAP"))){var i=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),o=n[0].match(/MPEGTS:(\d+)/m);if(i&&o){if(r=uh(new Vo(i[1])),null==r)throw new ve(2,2,2e3);r=t.periodStart+(Number(o[1])/9e4-r)}}o=[];var a=n[0].split("\n");for(i=1;i<a.length;i++)if(/^Region:/.test(a[i])){var s=new Vo(a[i]),u=new On;Yo(s),qo(s);for(var l=Yo(s);l;){var c=u,d=l;(l=/^id=(.*)$/.exec(d))?c.id=l[1]:(l=/^width=(\d{1,2}|100)%$/.exec(d))?c.width=Number(l[1]):(l=/^lines=(\d+)$/.exec(d))?(c.height=Number(l[1]),c.heightUnits=2):(l=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(c.regionAnchorX=Number(l[1]),c.regionAnchorY=Number(l[2])):(l=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(c.viewportAnchorX=Number(l[1]),c.viewportAnchorY=Number(l[2])):/^scroll=up$/.exec(d)&&(c.scroll="up"),qo(s),l=Yo(s)}o.push(u)}for(i=[],s=1;s<n.length;s++){if(a=n[s].split("\n"),l=a,d=r,a=o,1==l.length&&!l[0]||/^NOTE($|[ \t])/.test(l[0])||"STYLE"==l[0])a=null;else{u=null,l[0].includes("--\x3e")||(u=l[0],l.splice(0,1)),c=new Vo(l[0]);var f=uh(c),h=Go(c,/[ \t]+--\x3e[ \t]+/g),p=uh(c);if(null==f||null==h||null==p)throw new ve(2,2,2001);for(l=new bn(f+d,p+d,l.slice(1).join("\n").trim()),qo(c),d=Yo(c);d;)ah(l,d,a),qo(c),d=Yo(c);null!=u&&(l.id=u),a=l}a&&i.push(a)}return i},Un["text/vtt"]=oh,Un['text/vtt; codecs="vtt"']=oh,lh.prototype.parseInit=function(e){var t=!1;if((new Ei).H("moov",bi).H("trak",bi).H("mdia",bi).fa("mdhd",function(e){0==e.version?(e.reader.M(4),e.reader.M(4),this.a=e.reader.G(),e.reader.M(4)):(e.reader.M(8),e.reader.M(8),this.a=e.reader.G(),e.reader.M(8)),e.reader.M(4)}.bind(this)).H("minf",bi).H("stbl",bi).fa("stsd",Ti).H("wvtt",(function(){t=!0})).parse(e),!this.a)throw new ve(2,2,2008);if(!t)throw new ve(2,2,2008)},lh.prototype.parseMedia=function(e,t){var n=this;if(!this.a)throw new ve(2,2,2008);var r,i=0,o=[],a=[],s=!1,u=!1,l=!1,c=null;if((new Ei).H("moof",bi).H("traf",bi).fa("tfdt",(function(e){s=!0,i=0==e.version?e.reader.G():e.reader.Ab()})).fa("tfhd",(function(e){var t=e.flags;e=e.reader,e.M(4),1&t&&e.M(8),2&t&&e.M(4),c=8&t?e.G():null})).fa("trun",(function(e){u=!0;var t=e.version,n=e.flags;e=e.reader;var r=e.G();1&n&&e.M(4),4&n&&e.M(4);for(var i=[],a=0;a<r;a++){var s={duration:null,sampleSize:null,vd:null};256&n&&(s.duration=e.G()),512&n&&(s.sampleSize=e.G()),1024&n&&e.M(4),2048&n&&(s.vd=0==t?e.G():e.$d()),i.push(s)}o=i})).H("mdat",Si((function(e){l=!0,r=e}))).parse(e),!l&&!s&&!u)throw new ve(2,2,2008);var d=i,f=new DataView(r.buffer,r.byteOffset,r.byteLength),h=new yi(f,0);return o.forEach((function(e){var r=e.duration||c,o=e.vd?i+e.vd:d;d=o+(r||0);var s=0;do{var u=h.G();s+=u;var l=h.G(),f=null;"vttc"==xi(l)?8<u&&(f=h.Za(u-8)):h.M(u-8),r&&f&&a.push(ch(f,t.periodStart+o/n.a,t.periodStart+d/n.a))}while(e.sampleSize&&s<e.sampleSize)})),a.filter(fn.Ia)},Un['application/mp4; codecs="wvtt"']=lh,q("shaka.util.Dom.createHTMLElement",(function(e){return document.createElement(e)})),q("shaka.util.Dom.createVideoElement",(function(){var e=document.createElement("video");return e.muted=!0,e.width=600,e.height=400,e})),q("shaka.util.Dom.asHTMLElement",(function(e){return e})),q("shaka.util.Dom.asHTMLMediaElement",(function(e){return e})),q("shaka.util.Dom.removeAllChildren",(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}))}.call(r,n,n),r.shaka)t[i]=r.shaka[i]})()}).call(this,n("c8ba"))},4526:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("5beb");function s(e,t){var n=e.timelineConverter,r=void 0;function i(e,r,i,o){var s=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,u=e.segmentDuration,l=e.segmentAvailabilityRange,c=[],d=null,f=null,h=void 0,p=void 0,m=void 0,g=void 0,y=void 0;for(y=e.startNumber,h=isNaN(u)&&!t?{start:y,end:y}:(0,a.decideSegmentListRangeForTemplate)(n,t,e,r,i,o),m=h.start,g=h.end,p=m;p<=g;p++)f=(0,a.getIndexBasedSegment)(n,t,e,p),f.replacementTime=(y+p-1)*e.segmentDuration,d=s.media,d=(0,a.replaceTokenForTemplate)(d,"Number",f.replacementNumber),d=(0,a.replaceTokenForTemplate)(d,"Time",f.replacementTime),f.media=d,c.push(f),f=null;return isNaN(u)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((l.end-l.start)/u),c}return r={getSegments:i},r}s.__dashjs_factory_name="TemplateSegmentsGetter";var u=o["default"].getClassFactory(s);t["default"]=u,e.exports=t["default"]},4588:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},"45f2":function(e,t,n){var r=n("d9f6").f,i=n("07e3"),o=n("5168")("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},"45f6":function(e,t,n){"use strict";function r(){var e=void 0,t="http://schemas.xmlsoap.org/soap/envelope/";function n(e){var t=String.fromCharCode.apply(null,new Uint8Array(e)),n=decodeURIComponent(escape(t));return n}function r(e){if(window.DOMParser){var r=n(e),i=new window.DOMParser,o=i.parseFromString(r,"text/xml"),a=o?o.getElementsByTagNameNS(t,"Envelope")[0]:null,s=a?a.getElementsByTagNameNS(t,"Body")[0]:null,u=s?s.getElementsByTagNameNS(t,"Fault")[0]:null;if(u)return null}return e}function i(e){var r="",i="",o="",a=-1,s=-1;if(window.DOMParser){var u=n(e),l=new window.DOMParser,c=l.parseFromString(u,"text/xml"),d=c?c.getElementsByTagNameNS(t,"Envelope")[0]:null,f=d?d.getElementsByTagNameNS(t,"Body")[0]:null,h=f?f.getElementsByTagNameNS(t,"Fault")[0]:null,p=h?h.getElementsByTagName("detail")[0]:null,m=p?p.getElementsByTagName("Exception")[0]:null,g=null;if(null===h)return u;g=h.getElementsByTagName("faultstring")[0].firstChild,r=g?g.nodeValue:null,null!==m&&(g=m.getElementsByTagName("StatusCode")[0],i=g?g.firstChild.nodeValue:null,g=m.getElementsByTagName("Message")[0],o=g?g.firstChild.nodeValue:null,a=o?o.lastIndexOf("[")+1:-1,s=o?o.indexOf("]"):-1,o=o?o.substring(a,s):"")}var y="code: "+i+", name: "+r;return o&&(y+=", message: "+o),y}function o(e){return e}function a(){return"POST"}function s(){return"arraybuffer"}function u(e){return r.call(this,e)}function l(e){return i.call(this,e)}return e={getServerURLFromMessage:o,getHTTPMethod:a,getResponseType:s,getLicenseMessage:u,getErrorResponse:l},e}Object.defineProperty(t,"__esModule",{value:!0}),r.__dashjs_factory_name="PlayReady",t["default"]=dashjs.FactoryMaker.getSingletonFactory(r),e.exports=t["default"]},4630:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"467b":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=void 0,t=[],n={},r={};function i(e,t,n,r){!r[e]&&t&&(r[e]={instance:t,override:n})}function o(e,n){for(var r in t){var i=t[r];if(i.context===e&&i.name===n)return i.instance}return null}function a(e,n,r){for(var i in t){var o=t[i];if(o.context===e&&o.name===n)return void(t[i].instance=r)}t.push({name:n,context:e,instance:r})}function s(e,t){return t[e]}function u(e,t,n){e in n&&(n[e]=t)}function l(e,t){u(e,t,r)}function c(e){return s(e,r)}function d(e){var t=s(e.__dashjs_factory_name,r);return t||(t=function(t){return void 0===t&&(t={}),{create:function(){return m(e,t,arguments)}}},r[e.__dashjs_factory_name]=t),t}function f(e,t){u(e,t,n)}function h(e){return s(e,n)}function p(e){var r=s(e.__dashjs_factory_name,n);return r||(r=function(n){var r=void 0;return void 0===n&&(n={}),{getInstance:function(){return r||(r=o(n,e.__dashjs_factory_name)),r||(r=m(e,n,arguments),t.push({name:e.__dashjs_factory_name,context:n,instance:r})),r}}},n[e.__dashjs_factory_name]=r),r}function m(t,n,r){var i=void 0,o=t.__dashjs_factory_name,a=n[o];if(a){var s=a.instance;if(!a.override)return s.apply({context:n,factory:e},r);for(var u in i=t.apply({context:n},r),s=s.apply({context:n,factory:e,parent:i},r),s)i.hasOwnProperty(u)&&(i[u]=s[u])}else i=t.apply({context:n},r);return i.getClassName=function(){return o},i}return e={extend:i,getSingletonInstance:o,setSingletonInstance:a,getSingletonFactory:p,getSingletonFactoryByName:h,updateSingletonFactory:f,getClassFactory:d,getClassFactoryByName:c,updateClassFactory:l},e}();t["default"]=r,e.exports=t["default"]},4681:function(e,t,n){"use strict";var r=n("966d");function i(e,t){var n=this,i=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return i||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(a,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(a,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(e,t){e.emit("error",t)}e.exports={destroy:i,undestroy:o}},"46c1":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n,i,o,a){r(this,e),this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),n&&n.length&&(this.videoCapabilities=n),this.distinctiveIdentifier=i,this.persistentState=o,this.sessionTypes=a};t["default"]=i,e.exports=t["default"]},"46ee":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]};t["default"]=i,e.exports=t["default"]},"473d":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN};t["default"]=i,e.exports=t["default"]},"476a":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(){var e=0,t=void 0;function n(e){for(var t="",n=0;n<e.length;++n){var r=e[n];t+=r.uchar}var i=t.length,o=t.replace(/^\s+/,"").length;return i-o}function r(e){return"left: "+3.125*e.x+"%; top: "+6.66*e.y1+"%; width: "+(100-3.125*e.x)+"%; height: "+6.66*Math.max(e.y2-1-e.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function i(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function o(e,t){var n=e.videoHeight/15;return t?"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?i(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?i(t.background):"transparent")+";":"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function a(e){return e.replace(/^\s+/g,"")}function s(e){return e.replace(/\s+$/g,"")}function u(t,i,u,l){var c=null,d=null,f=!1,h=-1,p={start:i,end:u,spans:[]},m="style_cea608_white_black",g={},y={},v=[],_=void 0,E=void 0;for(_=0;_<15;++_){var b=l.rows[_],T="",S=null;if(!1===b.isEmpty()){var w=n(b.chars);null===c&&(c={x:w,y1:_,y2:_+1,p:[]}),w!==h&&f&&(c.p.push(p),p={start:i,end:u,spans:[]},c.y2=_,c.name="region_"+c.x+"_"+c.y1+"_"+c.y2,!1===g.hasOwnProperty(c.name)?(v.push(c),g[c.name]=c):(d=g[c.name],d.p.contat(c.p)),c={x:w,y1:_,y2:_+1,p:[]});for(var x=0;x<b.chars.length;++x){var I=b.chars[x],A=I.penState;if(null===S||!A.equals(S)){T.trim().length>0&&(p.spans.push({name:m,line:T,row:_}),T="");var D="style_cea608_"+A.foreground+"_"+A.background;A.underline&&(D+="_underline"),A.italics&&(D+="_italics"),y.hasOwnProperty(D)||(y[D]=JSON.parse(JSON.stringify(A))),S=A,m=D}T+=I.uchar}T.trim().length>0&&p.spans.push({name:m,line:T,row:_}),f=!0,h=w}else f=!1,h=-1,c&&(c.p.push(p),p={start:i,end:u,spans:[]},c.y2=_,c.name="region_"+c.x+"_"+c.y1+"_"+c.y2,!1===g.hasOwnProperty(c.name)?(v.push(c),g[c.name]=c):(d=g[c.name],d.p.contat(c.p)),c=null)}c&&(c.p.push(p),c.y2=_+1,c.name="region_"+c.x+"_"+c.y1+"_"+c.y2,!1===g.hasOwnProperty(c.name)?(v.push(c),g[c.name]=c):(d=g[c.name],d.p.contat(c.p)),c=null);var R=[];for(_=0;_<v.length;++_){var M=v[_],C="sub_cea608_"+e++,N=document.createElement("div");N.id=C;var L=r(M);N.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+L;var P=document.createElement("div");P.className="paragraph bodyStyle",P.style.cssText=o(t);var O=document.createElement("div");O.className="cueUniWrapper",O.style.cssText="unicode-bidi: normal; direction: ltr;";for(var F=0;F<M.p.length;++F){var k=M.p[F],B=0;for(E=0;E<k.spans.length;++E){var U=k.spans[E];if(U.line.length>0){if(0!==E&&B!=U.row){var H=document.createElement("br");H.className="lineBreak",O.appendChild(H)}var j=!1;B===U.row&&(j=!0),B=U.row;var K=y[U.name],V=document.createElement("span");V.className="spanPadding "+U.name+" customSpanColor",V.style.cssText=o(t,K),0!==E&&j?E===k.spans.length-1?V.textContent=s(U.line):V.textContent=U.line:k.spans.length>1&&E<k.spans.length-1&&U.row===k.spans[E+1].row?V.textContent=a(U.line):V.textContent=U.line.trim(),O.appendChild(V)}}}P.appendChild(O),N.appendChild(P);var q={bodyStyle:["%",90]};for(var G in y)y.hasOwnProperty(G)&&(q[G]=["%",90]);R.push({type:"html",start:i,end:u,cueHTMLElement:N,cueID:C,cellResolution:[32,15],isFromCEA608:!0,fontSize:q,lineHeight:{},linePadding:{}})}return R}return t={createHTMLCaptionsFromScreen:u},t}a.__dashjs_factory_name="EmbeddedTextHtmlRender",t["default"]=o["default"].getSingletonFactory(a),e.exports=t["default"]},"477f":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2d62"),o=r(i);function a(e){e=e||{};var t=!1,n=this.context,r=void 0,i=void 0,a=e.mediaElement;function s(e){e&&e.length&&(e.forEach((function(e){var t=e.starttime,n=t+e.duration;i.add(t,n)})),t=!!e[0]._useWallClockTime)}function u(){i.clear()}function l(){i=(0,o["default"])(n).create()}function c(){var e=i.length,n=void 0;if(!e)return!0;n=t?(new Date).getTime()/1e3:a.currentTime;for(var r=0;r<e;r+=1){var o=i.start(r),s=i.end(r);if(o<=n&&n<s)return!0}return!1}return r={initialize:s,reset:u,isEnabled:c},l(),r}a.__dashjs_factory_name="RangeController",t["default"]=dashjs.FactoryMaker.getClassFactory(a),e.exports=t["default"]},"47e4":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){i(this,e),this.init()}return r(e,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors"}}]),e}(),a=new o;t["default"]=a,e.exports=t["default"]},"481b":function(e,t){e.exports={}},"4a59":function(e,t,n){var r=n("9b43"),i=n("1fa8"),o=n("33a4"),a=n("cb7c"),s=n("9def"),u=n("27ee"),l={},c={};t=e.exports=function(e,t,n,d,f){var h,p,m,g,y=f?function(){return e}:u(e),v=r(n,d,t?2:1),_=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(h=s(e.length);h>_;_++)if(g=t?v(a(p=e[_])[0],p[1]):v(e[_]),g===l||g===c)return g}else for(m=y.call(e);!(p=m.next()).done;)if(g=i(m,v,p.value,t),g===l||g===c)return g};t.BREAK=l,t.RETURN=c},"4ac7":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("e217"),o=r(i),a=n("5fb0"),s=r(a),u=n("6a2d"),l=r(u),c=n("b4be"),d=r(c),f=n("46c1"),h=r(f),p=n("f288"),m=r(p),g=n("d0a4"),y=r(g);function v(e){e=e||{};var t=this.context,n=e.eventBus,r=e.events,i=e.debug,a=e.api,u=e.errHandler,c=void 0,f=void 0,p=void 0,g=void 0,v=void 0,_=void 0,E=void 0,b=void 0,T=void 0;function S(){f=i.getLogger(c),p=null,g=null,_=[],E=[],v=(0,o["default"])(t).getInstance(),T=F()}function w(){p&&B();for(var e=0;e<E.length;e++)N(E[e]);n.trigger(r.TEARDOWN_COMPLETE)}function x(){return g}function I(){for(var e=[],t=0;t<_.length;t++)e.push(_[t].initData);for(t=0;t<E.length;t++)e.push(E[t].initData);return e}function A(e){var t=p;t||(t=document.createElement("video"));for(var i=!1,o=0;o<e.length;o++)for(var a=e[o].ks.systemString,s=e[o].configs,u=null,l=null,c=0;c<s.length;c++){var d=s[c].videoCapabilities;if(d&&0!==d.length){l=[];for(var f=0;f<d.length;f++)""!==t.canPlayType(d[f].contentType,a)&&l.push(d[f])}if(!(!u&&!l||u&&0===u.length||l&&0===l.length)){i=!0;var g=new h["default"](u,l),y=v.getKeySystemBySystemString(a);n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{data:new m["default"](y,g)});break}}i||n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})}function D(e){g=e.keySystem,n.trigger(r.INTERNAL_KEY_SYSTEM_SELECTED)}function R(e){if(p!==e){if(p){B();for(var t=0;t<E.length;t++)N(E[t]);E=[]}p=e,p&&(p.addEventListener(a.keyerror,T),p.addEventListener(a.needkey,T),p.addEventListener(a.keymessage,T),p.addEventListener(a.keyadded,T),n.trigger(r.VIDEO_ELEMENT_SELECTED))}}function M(e){if(!g)throw new Error("Can not create sessions until you have selected a key system");if(b||0===E.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return _.push(t),p[a.generateKeyRequest](g.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")}function C(e,t){var n=e.sessionID;if(v.isClearKey(g))for(var r=0;r<t.keyPairs.length;r++)p[a.addKey](g.systemString,t.keyPairs[r].key,t.keyPairs[r].keyID,n);else p[a.addKey](g.systemString,new Uint8Array(t),new Uint8Array(e.initData),n)}function N(e){try{p[a.cancelKeyRequest](g.systemString,e.sessionID)}catch(t){n.trigger(r.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.sessionID+") "+t.message})}}function L(){}function P(){}function O(){}function F(){return{handleEvent:function(e){var t=null;switch(e.type){case a.needkey:var i=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;n.trigger(r.NEED_KEY,{key:new s["default"](i,"cenc")});break;case a.keyerror:if(t=k(E,e.sessionId),t||(t=k(_,e.sessionId)),t){var o=y["default"].MEDIA_KEYERR_CODE,c="";switch(e.errorCode.code){case 1:o=y["default"].MEDIA_KEYERR_UNKNOWN_CODE,c+="MEDIA_KEYERR_UNKNOWN - "+y["default"].MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:o=y["default"].MEDIA_KEYERR_CLIENT_CODE,c+="MEDIA_KEYERR_CLIENT - "+y["default"].MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:o=y["default"].MEDIA_KEYERR_SERVICE_CODE,c+="MEDIA_KEYERR_SERVICE - "+y["default"].MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:o=y["default"].MEDIA_KEYERR_OUTPUT_CODE,c+="MEDIA_KEYERR_OUTPUT - "+y["default"].MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:o=y["default"].MEDIA_KEYERR_HARDWARECHANGE_CODE,c+="MEDIA_KEYERR_HARDWARECHANGE - "+y["default"].MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:o=y["default"].MEDIA_KEYERR_DOMAIN_CODE,c+="MEDIA_KEYERR_DOMAIN - "+y["default"].MEDIA_KEYERR_DOMAIN_MESSAGE;break}c+="  System Code = "+e.systemCode,n.trigger(r.KEY_ERROR,{data:new l["default"](o,c,t)})}else f.error("No session token found for key error");break;case a.keyadded:t=k(E,e.sessionId),t||(t=k(_,e.sessionId)),t?(f.debug("DRM: Key added."),n.trigger(r.KEY_ADDED,{data:t})):f.debug("No session token found for key added");break;case a.keymessage:if(b=null!==e.sessionId&&void 0!==e.sessionId,b?(t=k(E,e.sessionId),!t&&_.length>0&&(t=_.shift(),E.push(t),t.sessionID=e.sessionId,n.trigger(r.KEY_SESSION_CREATED,{data:t}))):_.length>0&&(t=_.shift(),E.push(t),0!==_.length&&(u.mediaKeyMessageError(y["default"].MEDIA_KEY_MESSAGE_ERROR_MESSAGE),u.error(new l["default"](y["default"].MEDIA_KEY_MESSAGE_ERROR_CODE,y["default"].MEDIA_KEY_MESSAGE_ERROR_MESSAGE)))),t){var h=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;t.keyMessage=h,n.trigger(r.INTERNAL_KEY_MESSAGE,{data:new d["default"](t,h,e.defaultURL)})}else f.warn("No session token found for key message");break}}}}function k(e,t){if(t&&e){for(var n=e.length,r=0;r<n;r++)if(e[r].sessionID==t)return e[r];return null}return null}function B(){p.removeEventListener(a.keyerror,T),p.removeEventListener(a.needkey,T),p.removeEventListener(a.keymessage,T),p.removeEventListener(a.keyadded,T)}return c={getAllInitData:I,requestKeySystemAccess:A,getKeySystem:x,selectKeySystem:D,setMediaElement:R,createKeySession:M,updateKeySession:C,closeKeySession:N,setServerCertificate:L,loadKeySession:P,removeKeySession:O,stop:w,reset:w},S(),c}v.__dashjs_factory_name="ProtectionModel_01b",t["default"]=dashjs.FactoryMaker.getClassFactory(v),e.exports=t["default"]},"4be9":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("ae98"),o=r(i),a=n("9859"),s=r(a),u=n("4e7a"),l=r(u),c=n("f447"),d=r(c),f=n("467b"),h=r(f),p=n("8a43"),m=r(p),g=n("1d48"),y=r(g);function v(){var e=void 0,t=void 0,n=this.context,r=(0,m["default"])(n).getInstance(),i=(0,l["default"])(n).getInstance(),a=void 0,u=void 0;function c(e){a.invalidateSelectedIndexes(e.entry)}function f(){a=(0,o["default"])(n).create(),u=(0,s["default"])(n).create(),r.on(y["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,c,e)}function h(e){e.baseURLTreeModel&&(a=e.baseURLTreeModel),e.baseURLSelector&&(u=e.baseURLSelector),e.dashManifestModel&&(t=e.dashManifestModel)}function p(e){a.update(e),u.chooseSelectorFromManifest(e)}function g(e){var t=a.getForPath(e),n=t.reduce((function(e,t){var n=u.select(t);return n?(i.isRelative(n.url)?e.url=i.resolve(n.url,e.url):(e.url=n.url,e.serviceLocation=n.serviceLocation),e.availabilityTimeOffset=n.availabilityTimeOffset,e.availabilityTimeComplete=n.availabilityTimeComplete,e):new d["default"]}),new d["default"]);if(!i.isRelative(n.url))return n}function v(){a.reset(),u.reset()}function _(e){a.setConfig({dashManifestModel:t}),u.setConfig({dashManifestModel:t}),p(e)}return e={reset:v,initialize:_,resolve:g,setConfig:h},f(),e}v.__dashjs_factory_name="BaseURLController",t["default"]=h["default"].getSingletonFactory(v),e.exports=t["default"]},"4bf8":function(e,t,n){var r=n("be13");e.exports=function(e){return Object(r(e))}},"4c95":function(e,t,n){"use strict";var r=n("e53d"),i=n("584a"),o=n("d9f6"),a=n("8e60"),s=n("5168")("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},"4e47":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("8e4c"),s=r(a),u=n("2b8a"),l=r(u),c=n("efb7"),d=r(c),f=n("36b1"),h=r(f),p=n("d665"),m=r(p),g=n("8a43"),y=r(g),v=n("1d48"),_=r(v),E=n("d25a"),b=r(E),T=n("467b"),S=r(T),w=n("589e"),x=r(w),I=n("0eda"),A=r(I),D=n("6a2d"),R=r(D),M=n("e172"),C=r(M),N=n("0757"),L="bufferLoaded",P="bufferStalled",O=.5,F=.5,k=.01,B=22,U="BufferController";function H(e){e=e||{};var t=this.context,n=(0,y["default"])(t).getInstance(),r=e.metricsModel,i=e.mediaPlayerModel,a=e.errHandler,u=e.streamController,c=e.mediaController,f=e.adapter,p=e.textController,g=e.abrController,v=e.playbackController,E=e.type,T=e.streamProcessor,S=void 0,w=void 0,I=void 0,D=void 0,M=void 0,H=void 0,j=void 0,K=void 0,V=void 0,q=void 0,G=void 0,Y=void 0,z=void 0,W=void 0,X=void 0,$=void 0,Q=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0;function ne(){w=(0,x["default"])(t).getInstance().getLogger(S),$=(0,A["default"])(t).getInstance(),et()}function re(){return U}function ie(e){We(e),I=g.getQualityFor(E,T.getStreamInfo()),n.on(_["default"].DATA_UPDATE_COMPLETED,ke,this),n.on(_["default"].INIT_FRAGMENT_LOADED,ue,this),n.on(_["default"].MEDIA_FRAGMENT_LOADED,ce,this),n.on(_["default"].QUALITY_CHANGE_REQUESTED,pe,this),n.on(_["default"].STREAM_COMPLETED,Be,this),n.on(_["default"].PLAYBACK_PLAYING,Te,this),n.on(_["default"].PLAYBACK_PROGRESS,Ee,this),n.on(_["default"].PLAYBACK_TIME_UPDATED,Ee,this),n.on(_["default"].PLAYBACK_RATE_CHANGED,je,this),n.on(_["default"].PLAYBACK_SEEKING,me,this),n.on(_["default"].PLAYBACK_SEEKED,ge,this),n.on(_["default"].PLAYBACK_STALLED,be,this),n.on(_["default"].WALLCLOCK_TIME_UPDATED,He,this),n.on(_["default"].CURRENT_TRACK_CHANGED,Ue,this,y["default"].EVENT_PRIORITY_HIGH),n.on(_["default"].SOURCEBUFFER_REMOVE_COMPLETED,Oe,this)}function oe(e,n){if(!$||!e||!T)return null;if(j)try{q=n&&n[E]?(0,l["default"])(t).create(j,e,he.bind(this),n[E]):(0,l["default"])(t).create(j,e,he.bind(this)),"function"===typeof q.getBuffer().initialize&&q.getBuffer().initialize(E,T)}catch(r){w.fatal("Caught error on create SourceBuffer: "+r),a.mediaSourceError("Error creating "+E+" source buffer."),a.error(new R["default"](C["default"].MEDIASOURCE_TYPE_UNSUPPORTED_CODE,C["default"].MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+E))}else q=(0,d["default"])(t).create(he.bind(this));return Fe(T.getRepresentationInfo(I).MSETimeOffset),q}function ae(){if(q&&G&&"function"===typeof G.discharge){var e=G.getAllBufferRanges();if(e.length>0){for(var t="Beginning "+E+"PreBuffer discharge, adding buffer for:",n=0;n<e.length;n++)t+=" start: "+e.start(n)+", end: "+e.end(n)+";";w.debug(t)}else w.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");for(var r=G.discharge(),i=null,o=0;o<r.length;o++){var a=r[o],s=$.extract(a.streamId,a.representationId);s&&(i!==s&&(q.append(s),i=s),q.append(a))}G.reset(),G=null}}function se(){return T&&u&&T.getStreamInfo()}function ue(e){e.fragmentModel===T.getFragmentModel()&&(w.info("Init fragment finished loading saving to",E+"'s init cache"),$.save(e.chunk),w.debug("Append Init fragment",E," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality,", data size:",e.chunk.bytes.byteLength),de(e.chunk))}function le(e,t,r){var i=$.extract(e,t);ee=!0===r&&r,i?(w.info("Append Init fragment",E," with representationId:",i.representationId," and quality:",i.quality,", data size:",i.bytes.byteLength),de(i)):n.trigger(_["default"].INIT_REQUESTED,{sender:S})}function ce(e){if(e.fragmentModel===T.getFragmentModel()){var t=e.chunk,n=t.bytes,r=t.quality,i=T.getRepresentationInfo(r),o=f.getEventsFor(i.mediaInfo,T),a=f.getEventsFor(i,T);if(o&&o.length>0||a&&a.length>0){var u=T.getFragmentModel().getRequests({state:s["default"].FRAGMENT_MODEL_EXECUTED,quality:r,index:t.index})[0],l=Me(n,u,o,a);T.addInbandEvents(l)}if(ee){te=t;var c=q&&q.getAllBufferRanges();c&&c.length>0&&v.getTimeToStreamEnd()>O&&(w.debug("Clearing buffer because track changed - "+(c.end(c.length-1)+F)),Le([{start:0,end:c.end(c.length-1)+F,force:!0}]))}else de(t)}}function de(e){q.append(e),e.mediaInfo.type===o["default"].VIDEO&&n.trigger(_["default"].VIDEO_CHUNK_RECEIVED,{chunk:e})}function fe(e){if(e&&e.length>0)for(var t=0,n=e.length;t<n;t++)w.debug("Buffered Range for type:",E,":",e.start(t)," - ",e.end(t)," currentTime = ",v.getTime())}function he(e){if(e.error){if(e.error.code===B&&(H=.8*Je(),w.warn("Quota exceeded for type: "+E+", Critical Buffer: "+H),H>0)){var t=Math.max(.2*H,1),r=H-t;i.setBufferToKeep(parseFloat(t.toFixed(5))),i.setBufferAheadToKeep(parseFloat(r.toFixed(5)))}e.error.code!==B&&Ze()||(w.warn("Clearing playback buffer to overcome quota exceed situation for type: "+E),n.trigger(_["default"].QUOTA_EXCEEDED,{sender:S,criticalBufferLevel:H}),ye())}else{z=e.chunk,z&&!isNaN(z.index)&&(K=Math.max(z.index,K),Ae());var o=q.getAllBufferRanges();if(z.segmentType===N.HTTPRequest.MEDIA_SEGMENT_TYPE)fe(o),Ee();else if(ee){var a=v.getTime();w.debug("AppendToBuffer seek target should be "+a),T.getScheduleController().setSeekTarget(a),f.setIndexHandlerTime(T,a)}var s={sender:S,quality:z.quality,startTime:z.start,index:z.index,bufferedRanges:o};z&&!z.endFragment?n.trigger(_["default"].BYTES_APPENDED,s):z&&n.trigger(_["default"].BYTES_APPENDED_END_FRAGMENT,s)}}function pe(e){I!==e.newQuality&&E===e.mediaType&&T.getStreamInfo().id===e.streamInfo.id&&(Fe(T.getRepresentationInfo(e.newQuality).MSETimeOffset),I=e.newQuality)}function me(){D&&(J=!0,D=!1,V=Number.POSITIVE_INFINITY),E!==o["default"].FRAGMENTED_TEXT?ye():Ee()}function ge(){Q=void 0}function ye(){var e=ve();e&&0!==e.length||Ee(),Le(e)}function ve(){var e=[],t=q.getAllBufferRanges();if(!t||0===t.length)return e;var n=v.getTime(),r=t.end(t.length-1)+F,i=T.getFragmentModel().getRequests({state:s["default"].FRAGMENT_MODEL_EXECUTED,time:n,threshold:k})[0];if(i){var o={start:0,end:i.startTime-O},a=T.getFragmentModel().getRequests({state:s["default"].FRAGMENT_MODEL_EXECUTED,time:i.startTime-i.duration/2,threshold:k})[0];a&&a.startTime!=i.startTime&&(o.end=a.startTime),o.start<o.end&&o.end>t.start(0)&&e.push(o);var u={start:i.startTime+i.duration+O,end:r},l=T.getFragmentModel().getRequests({state:s["default"].FRAGMENT_MODEL_EXECUTED,time:i.startTime+i.duration+O,threshold:k})[0];l&&l.startTime!==i.startTime&&(u.start=l.startTime+l.duration+O),u.start<u.end&&u.start<r&&e.push(u)}else w.debug("getAllRangesWithSafetyFactor for",E,"- No request found in current time position, removing full buffer 0 -",r),e.push({start:0,end:r});return e}function _e(){var e=v.getTime();if(Q){var t=q.getAllBufferRanges();t&&t.length&&(e=Math.max(t.start(0),Q))}return e}function Ee(){(!ee||E===o["default"].FRAGMENTED_TEXT&&p.isTextEnabled())&&(xe(),Ie())}function be(){De()}function Te(){De()}function Se(e,t){var n=q.getAllBufferRanges(),r=0,i=0,o=null,a=null,s=0,u=void 0,l=void 0,c=t||.15;if(null!==n&&void 0!==n){for(l=0,u=n.length;l<u;l++)if(r=n.start(l),i=n.end(l),null===o)s=Math.abs(r-e),(e>=r&&e<i||s<=c)&&(o=r,a=i);else{if(s=r-a,!(s<=c))break;a=i}if(null!==o)return{start:o,end:a}}return null}function we(e,t){var n=void 0,r=void 0;return n=Se(e,t),r=null===n?0:n.end-e,r}function xe(){v&&(M=we(_e()||0),n.trigger(_["default"].BUFFER_LEVEL_UPDATED,{sender:S,bufferLevel:M}),De())}function Ie(){se()&&(r.addBufferState(E,Y,T.getScheduleController().getBufferTarget()),r.addBufferLevel(E,new Date,1e3*M))}function Ae(){var e=K>=V-1;e&&!D&&void 0===q.discharge&&(D=!0,w.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED"),n.trigger(_["default"].BUFFERING_COMPLETED,{sender:S,streamInfo:T.getStreamInfo()}))}function De(){"audio"!==E&&"video"!==E||(J&&!D&&v&&v.getTimeToStreamEnd()-M<O&&(J=!1,D=!0,w.debug("checkIfSufficientBuffer trigger BUFFERING_COMPLETED"),n.trigger(_["default"].BUFFERING_COMPLETED,{sender:S,streamInfo:T.getStreamInfo()})),(!i.getLowLatencyEnabled()&&M<O||0===M)&&!D?Re(P):(D||M>=i.getStableBufferTime())&&Re(L))}function Re(e){Y===e||e===P&&0===v.getTime()||E===o["default"].FRAGMENTED_TEXT&&!p.isTextEnabled()||(Y=e,Ie(),n.trigger(_["default"].BUFFER_LEVEL_STATE_CHANGED,{sender:S,state:e,mediaType:E,streamInfo:T.getStreamInfo()}),n.trigger(e===L?_["default"].BUFFER_LOADED:_["default"].BUFFER_EMPTY,{mediaType:E}),w.debug(e===L?"Got enough buffer to start for "+E:"Waiting for more buffer before starting playback for "+E))}function Me(e,n,r,i){for(var o=Math.max(!n||isNaN(n.startTime)?0:n.startTime,0),a=[],s=[],u=r.concat(i),l=0,c=u.length;l<c;l++)a[u[l].schemeIdUri+"/"+u[l].value]=u[l];var d=(0,b["default"])(t).getInstance().parse(e),h=d.getBoxes("emsg");for(l=0,c=h.length;l<c;l++){var p=f.getEvent(h[l],a,o);p&&s.push(p)}return s}function Ce(){q&&E!==o["default"].FRAGMENTED_TEXT&&(D||Le(Ne()))}function Ne(){var e=[],t=q.getAllBufferRanges();if(!t||0===t.length)return e;var n=v.getTime(),r={start:Math.max(0,n-i.getBufferToKeep()),end:n+i.getBufferAheadToKeep()},o=T.getFragmentModel().getRequests({state:s["default"].FRAGMENT_MODEL_EXECUTED,time:n,threshold:k})[0];if(o)r.start=Math.min(o.startTime,r.start),r.end=Math.max(o.startTime+o.duration,r.end);else if(0===n&&v.getIsDynamic())return[];if(t.start(0)<=r.start){for(var a={start:0,end:r.start},u=0;u<t.length&&t.end(u)<=r.start;u++)a.end=t.end(u);a.start<a.end&&e.push(a)}if(t.end(t.length-1)>=r.end){var l={start:r.end,end:t.end(t.length-1)+k};l.start<l.end&&e.push(l)}return e}function Le(e){e&&q&&0!==e.length&&(Z.push.apply(Z,e),X||Pe())}function Pe(){if(0===Z.length||!q)return w.debug("Nothing to prune, halt pruning"),Z=[],void(X=!1);var e=q.getBuffer();if(!e||!e.buffered||0===e.buffered.length)return w.debug("SourceBuffer is empty (or does not exist), halt pruning"),Z=[],void(X=!1);var t=Z.shift();w.debug("Removing",E,"buffer from:",t.start,"to",t.end),X=!0;var n=v.getTime();n<t.end&&(D=!1,K=0,ee||(T.getScheduleController().setSeekTarget(n),f.setIndexHandlerTime(T,n))),q.remove(t.start,t.end,t.force)}function Oe(e){if(q===e.buffer){w.debug("onRemoved buffer from:",e.from,"to",e.to);var t=q.getAllBufferRanges();fe(t),0===Z.length&&(X=!1),e.unintended&&(w.warn("Detected unintended removal from:",e.from,"to",e.to,"setting index handler time to",e.from),f.setIndexHandlerTime(T,e.from)),X?Pe():(ee?(ee=!1,te&&de(te)):(w.debug("onRemoved : call updateBufferLevel"),xe()),n.trigger(_["default"].BUFFER_CLEARED,{sender:S,from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:Ze()}))}}function Fe(e){q&&q.updateTimestampOffset&&q.updateTimestampOffset(e)}function ke(e){e.sender.getStreamProcessor()!==T||e.error||Fe(e.currentRepresentation.MSETimeOffset)}function Be(e){e.fragmentModel===T.getFragmentModel()&&(V=e.request.index,Ae())}function Ue(e){var t=q&&q.getAllBufferRanges();t&&e.newMediaInfo.type===E&&e.newMediaInfo.streamInfo.id===T.getStreamInfo().id&&(w.info("Track change asked"),c.getSwitchMode(E)===m["default"].TRACK_SWITCH_MODE_ALWAYS_REPLACE&&t&&t.length>0&&v.getTimeToStreamEnd()>O&&(D=!1,V=Number.POSITIVE_INFINITY))}function He(){W++;var e=W*(i.getWallclockTimeUpdateInterval()/1e3);e>=i.getBufferPruningInterval()&&(W=0,Ce())}function je(){De()}function Ke(){return E}function Ve(){return T}function qe(e){Q=e}function Ge(){return q}function Ye(e){q=e}function ze(){return M}function We(e,t){j=e,q&&t&&"function"===typeof q.discharge&&(G=q,oe(t))}function Xe(){return j}function $e(){return D}function Qe(){return X}function Je(){var e=q.getAllBufferRanges(),t=0,n=void 0,r=void 0;if(!e)return t;for(r=0,n=e.length;r<n;r++)t+=e.end(r)-e.start(r);return t}function Ze(){var e=Je();return e<H}function et(e,t){H=Number.POSITIVE_INFINITY,Y=void 0,I=h["default"].QUALITY_DEFAULT,V=Number.POSITIVE_INFINITY,K=0,z=null,D=!1,X=!1,J=!1,M=0,W=0,Z=[],q&&(e||q.abort(),q.reset(t),q=null),ee=!1}function tt(e,t){n.off(_["default"].DATA_UPDATE_COMPLETED,ke,this),n.off(_["default"].QUALITY_CHANGE_REQUESTED,pe,this),n.off(_["default"].INIT_FRAGMENT_LOADED,ue,this),n.off(_["default"].MEDIA_FRAGMENT_LOADED,ce,this),n.off(_["default"].STREAM_COMPLETED,Be,this),n.off(_["default"].CURRENT_TRACK_CHANGED,Ue,this),n.off(_["default"].PLAYBACK_PLAYING,Te,this),n.off(_["default"].PLAYBACK_PROGRESS,Ee,this),n.off(_["default"].PLAYBACK_TIME_UPDATED,Ee,this),n.off(_["default"].PLAYBACK_RATE_CHANGED,je,this),n.off(_["default"].PLAYBACK_SEEKING,me,this),n.off(_["default"].PLAYBACK_SEEKED,ge,this),n.off(_["default"].PLAYBACK_STALLED,be,this),n.off(_["default"].WALLCLOCK_TIME_UPDATED,He,this),n.off(_["default"].SOURCEBUFFER_REMOVE_COMPLETED,Oe,this),et(e,t)}return S={getBufferControllerType:re,initialize:ie,createBuffer:oe,dischargePreBuffer:ae,getType:Ke,getStreamProcessor:Ve,setSeekStartTime:qe,getBuffer:Ge,setBuffer:Ye,getBufferLevel:ze,getRangeAt:Se,setMediaSource:We,getMediaSource:Xe,getIsBufferingCompleted:$e,switchInitData:le,getIsPruningInProgress:Qe,reset:tt},ne(),S}H.__dashjs_factory_name=U;var j=S["default"].getClassFactory(H);j.BUFFER_LOADED=L,j.BUFFER_EMPTY=P,S["default"].updateClassFactory(H.__dashjs_factory_name,j),t["default"]=j,e.exports=t["default"]},"4e7a":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(){var e=void 0,t=/^[a-z][a-z0-9+\-.]*:/i,n=/^https?:\/\//i,r=/^https:\/\//i,i=/^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i,o=function(e,t){try{return new window.URL(e,t).toString()}catch(n){return e}},a=function(e,t){var n=u;if(!t)return e;if(!d(e))return e;f(e)&&(n=l),h(e)&&(n=c);var r=n(t),i="/"!==r.charAt(r.length-1)&&"/"!==e.charAt(0)?"/":"";return[r,e].join(i)};function s(){try{new window.URL("x","http://y");e=o}catch(t){}finally{e=e||a}}function u(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function l(e){var t=e.match(i);return t?t[1]:""}function c(e){var n=e.match(t);return n?n[0]:""}function d(e){return!t.test(e)}function f(e){return d(e)&&"/"===e.charAt(0)}function h(e){return 0===e.indexOf("//")}function p(e){return n.test(e)}function m(e){return r.test(e)}function g(t,n){return e(t,n)}s();var y={parseBaseUrl:u,parseOrigin:l,parseScheme:c,isRelative:d,isPathAbsolute:f,isSchemeRelative:h,isHTTPURL:p,isHTTPS:m,resolve:g};return y}a.__dashjs_factory_name="URLUtils",t["default"]=o["default"].getSingletonFactory(a),e.exports=t["default"]},"4ee1":function(e,t,n){var r=n("5168")("iterator"),i=!1;try{var o=[7][r]();o["return"]=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(a){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},e(o)}catch(a){}return n}},"4f3c":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(t){i(this,e);var n=function(e){return e&&e.length&&e.charAt(0)===e.charAt(0).toUpperCase()};this._name=t,this._merge=n(t)}return r(e,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),e}();t["default"]=o,e.exports=t["default"]},"502a":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n,i){r(this,e),this.lastCompletedOffset=t,this.found=n,this.size=i};t["default"]=i,e.exports=t["default"]},5058:function(e,t,n){(function(n){var r,o;(function(n,i){r=[],o=function(){return n["MediaPlayer"]=i()}.apply(t,r),void 0===o||(e.exports=o)})(this,(function(){var t,r,o,u={},l={},c={},d={};d=function(){var e,n="1.2.0",r="1.15.1",i="b21165b9",a="2019-2-13_11:37:25",s=new d.di.Context,u=new o.System,l=!1,c=null,f=null,h=null,p=[],m=[],g=null,y=null,v="und",_="und",E=!1,S={video:-1,audio:-1},w=null,x=!1,I=!1,A=!0,D=null,R=!1,M="Safari"===b().name,C={},N=function(){if(!l)throw new Error("MediaPlayer not initialized !!!")},L=function(){if(!e.getElement())throw new Error("MediaPlayer.play(): Video element not attached to MediaPlayer")},P=function(){if(!D)throw new Error("MediaPlayer.play(): Source not attached to MediaPlayer")},O=function(){var n,r=[],i=[];if(N(),L(),P(),M&&"HLS"===D.protocol||d.hasMediaSourceExtension()){for(var o in C)r.push(C[o].deferInit.promise);t.all(r).then(function(){for(var r in C)n=C[r],n.deferLoad=t.defer(),i.push(n.deferLoad.promise),n.load(D,function(){this.deferLoad.resolve()}.bind(n));t.all(i).then(function(){I=!0,this.metricsModel.addSession(null,D.url,e.getElement().loop,null,"MediaPlayer.js_"+this.getVersion()),this.debug.log("[MediaPlayer] Version: "+this.getVersionFull()+" - "+this.getBuildDate()),this.debug.log("[MediaPlayer] user-agent: "+navigator.userAgent),this.debug.log("[MediaPlayer] Load stream:\n",JSON.stringify(D,null,"  ")),w||(w=u.getObject("streamController"),w.setVideoModel(e),w.setAutoPlay(A)),w.setDefaultAudioLang(v),w.setDefaultSubtitleLang(_),w.enableSubtitles(E),w.load(D),u.mapValue("scheduleWhilePaused",R),u.mapOutlet("scheduleWhilePaused","stream")}.bind(this))}.bind(this))}else this.errHandler.sendError(d.dependencies.ErrorHandler.prototype.CAPABILITY_ERR_MEDIASOURCE,"MediaSource extension not supported by the browser")},F=function(){return l&&e.getElement()&&D&&!x},k=function(){F()&&O.call(this)},B=function(t,n){var r=document.createEvent("CustomEvent");r.initCustomEvent(t,!1,!1,{type:n.streamType,bitrate:n.switchedQuality,representationId:n.representationId,time:e.getCurrentTime(),width:n.width,height:n.height}),e.getElement().dispatchEvent(r)},U=function(t){var n;switch(t.data.metric){case"ManifestReady":N(),this.debug.log("[MediaPlayer] ManifestReady"),f=this.metricsExt.getBitratesForType("video"),this.debug.log("[MediaPlayer] video bitrates: "+JSON.stringify(f)),n=document.createEvent("CustomEvent"),n.initCustomEvent("manifest_loaded",!1,!1,{}),e.getElement().dispatchEvent(n);break;case"RepresentationSwitch":N(),"video"==t.data.stream?(f=this.metricsExt.getBitratesForType(t.data.stream),f&&(B("download_bitrate",{streamType:t.data.stream,switchedQuality:f[t.data.value.lto],representationId:t.data.value.to,width:this.metricsExt.getVideoWidthForRepresentation(t.data.value.to),height:this.metricsExt.getVideoHeightForRepresentation(t.data.value.to)}),this.debug.log("[MediaPlayer]["+t.data.stream+"] send download_bitrate - b="+f[t.data.value.lto]))):"audio"==t.data.stream&&(h=this.metricsExt.getBitratesForType(t.data.stream),h&&(B("download_bitrate",{streamType:t.data.stream,switchedQuality:h[t.data.value.lto],representationId:t.data.value.to,width:this.metricsExt.getVideoWidthForRepresentation(t.data.value.to),height:this.metricsExt.getVideoHeightForRepresentation(t.data.value.to)}),this.debug.log("[MediaPlayer]["+t.data.stream+"] send download_bitrate - b="+f[t.data.value.lto])));break;case"BufferedSwitch":N(),"video"==t.data.stream?p.push({streamType:t.data.stream,mediaStartTime:t.data.value.mt,switchedQuality:f[t.data.value.lto],representationId:t.data.value.to,width:this.metricsExt.getVideoWidthForRepresentation(t.data.value.to),height:this.metricsExt.getVideoHeightForRepresentation(t.data.value.to)}):"audio"==t.data.stream&&m.push({streamType:t.data.stream,mediaStartTime:t.data.value.mt,switchedQuality:h[t.data.value.lto],representationId:t.data.value.to,width:this.metricsExt.getVideoWidthForRepresentation(t.data.value.to),height:this.metricsExt.getVideoHeightForRepresentation(t.data.value.to)});break;case"BufferLevel":n=document.createEvent("CustomEvent"),n.initCustomEvent("bufferLevel_updated",!1,!1,{type:t.data.stream,level:t.data.value.level}),e.getElement().dispatchEvent(n);break;case"State":n=document.createEvent("CustomEvent"),n.initCustomEvent("state_changed",!1,!1,{type:t.data.stream,state:t.data.value.current}),e.getElement().dispatchEvent(n);break}},H=function(e){g=e.data,this.reset(2)},j=function(e){y=e.data},K=function(e,t){var n=0;for(n=t.length-1;n>=0;n-=1)e.splice(n,1)},V=function(t){var n=e.getCurrentTime(),r=null,i=[],o=0;for(o=0;o<t.length;o+=1)r=t[o],n>=r.mediaStartTime&&(B("play_bitrate",r),this.debug.log("[MediaPlayer]["+r.streamType+"] send play_bitrate - b="+r.switchedQuality+", t="+r.mediaStartTime+"("+e.getPlaybackRate()+")"),i.push(o));K(t,i)},q=function(){0!==e.getPlaybackRate()&&(V.call(this,p),V.call(this,m))},G=function(){this.addEventListener("metricAdded",U.bind(this)),this.addEventListener("error",H.bind(this)),this.addEventListener("warning",j.bind(this)),this.addEventListener("timeupdate",q.bind(this))},Y=function(e){if(!0===e.altKey&&!0===e.ctrlKey&&!0===e.shiftKey&&86===e.keyCode)for(var t in console.log("[MediaPlayer] Version: "+this.getVersion()+" - "+this.getBuildDate()),C)console.log("["+C[t].getName()+"] Version: "+C[t].getVersion()+" - "+C[t].getBuildDate())},z=function(e){if(I&&w){if(!x){x=!0;var t={};t[d.dependencies.StreamController.eventList.ENAME_TEARDOWN_COMPLETE]=function(){for(var e in C)C[e].reset();w=null,I=!1,x=!1,this.debug.log("[MediaPlayer] Player is stopped"),F.call(this)&&k.call(this)}.bind(this),w.subscribe(d.dependencies.StreamController.eventList.ENAME_TEARDOWN_COMPLETE,t,void 0,!0),w.reset(e)}}else F.call(this)&&k.call(this)},W=function(e){if(!e)return null;var t={};return e.id&&(t.id=e.id),e.lang&&(t.lang=e.lang),e.subType&&(t.subType=e.subType),t},X=function(e){if(!w)return null;switch(e){case d.TRACKS_TYPE.AUDIO:return w.getAudioTracks();case d.TRACKS_TYPE.TEXT:return w.getSubtitleTracks()}return null},$=function(e){if(!w)return null;switch(e){case d.TRACKS_TYPE.AUDIO:return w.getSelectedAudioTrack();case d.TRACKS_TYPE.TEXT:return w.getSelectedSubtitleTrack()}return null},Q=function(e,t){if(!w)return null;switch(e){case d.TRACKS_TYPE.AUDIO:w.setAudioTrack(t);break;case d.TRACKS_TYPE.TEXT:w.setSubtitleTrack(t);break}return null},J=function(e,t){return!e&&!t||e===t},Z=function(e,t){return J(e.id,t.id)&&J(e.lang,t.lang)&&J(e.subType,t.subType)},ee=function(){if(arguments&&arguments.length>0){var e={};return"string"===typeof arguments[0]&&(e.url=arguments[0]),arguments[1]&&(e.protData=arguments[1]),e}},te=function(){var e=this.metricsModel.getReadOnlyMetricsFor("video"),t=e?this.metricsExt.getCurrentDVRInfo(e):null;return t};return u.mapValue("system",u),u.mapOutlet("system"),u.injectInto(s),{notifier:void 0,debug:void 0,eventBus:void 0,metricsExt:void 0,abrController:void 0,metricsModel:void 0,errHandler:void 0,config:void 0,getVersion:function(){return r},getVersionFull:function(){return-1===i.indexOf("@@")?r+"_"+i:r},getVersionDashJS:function(){return n},getBuildDate:function(){return-1===a.indexOf("@@")?a:"Not a builded version"},init:function(t){if(!t)throw new Error("MediaPlayer.init(): Invalid Argument");l||(u.injectInto(this),l=!0,this.debug.log("[MediaPlayer] Version: "+this.getVersionFull()+" - "+this.getBuildDate()),this.debug.log("[MediaPlayer] user-agent: "+navigator.userAgent)),e=u.getObject("videoModel"),e.setElement(t),G.call(this),c=u.getObject("debugController"),c.init(r),window.addEventListener("keydown",Y.bind(this))},addEventListener:function(t,n,r){N(),"hasplayer"===d.PUBLIC_EVENTS[t]?this.eventBus.addEventListener(t,n,r):e.listen(t,n,r)},removeEventListener:function(t,n){N(),"hasplayer"===d.PUBLIC_EVENTS[t]?this.eventBus.removeEventListener(t,n):e.unlisten(t,n)},getVideoModel:function(){return e},getDebug:function(){return this.debug},getMetricsExt:function(){return this.metricsExt},setConfig:function(e){this.config&&e&&(this.debug.log("[MediaPlayer] set config: "+JSON.stringify(e,null,"\t")),this.config.setParams(e))},setParams:function(e){this.setConfig(e)},setDebug:function(e){if(N(),"boolean"!==typeof e)throw new Error("MediaPlayer.setDebug(): Invalid Arguments");!0===e?this.debug.setLevel(4):this.debug.setLevel(0)},getAutoPlay:function(){return A},setAutoPlay:function(e){A=e},setInitialQualityFor:function(e,t){S[e]=t},getQualityFor:function(e){return N(),this.abrController.getQualityFor(e)},setQualityFor:function(e,t){if(N(),"number"!==typeof t)throw new Error("MediaPlayer.setQualityFor(): Invalid Arguments");this.abrController.setQualityFor(e,t)},getAutoSwitchQuality:function(){return N(),this.abrController.getAutoSwitchBitrate()},setAutoSwitchQuality:function(e){if(N(),"boolean"!==typeof e)throw new Error("MediaPlayer.setAutoSwitchQuality(): Invalid Arguments");this.abrController.setAutoSwitchBitrate(e)},getScheduleWhilePaused:function(){return R},setScheduleWhilePaused:function(e){if("boolean"!==typeof e)throw new Error("MediaPlayer.setScheduleWhilePaused(): Invalid Arguments");R=e},setDefaultAudioLang:function(e){if("string"!==typeof e)throw new Error("MediaPlayer.setDefaultAudioLang(): Invalid Arguments");v=e},getDefaultAudioLang:function(){return v},setDefaultSubtitleLang:function(e){if("string"!==typeof e)throw new Error("MediaPlayer.setDefaultSubtitleLang(): Invalid Arguments");_=e},getDefaultSubtitleLang:function(){return _},load:function(e){var t={video:{"ABR.keepBandwidthCondition":!0},audio:{"ABR.keepBandwidthCondition":!0}};if(arguments&&arguments.length>0&&"object"!==typeof arguments[0]&&(console.warn('You are using "deprecated" call of the method load, please refer to the documentation to change prameters call'),e=ee.apply(null,arguments)),!e||!e.url)throw new Error("MediaPlayer.load(): stream has no url.");p=[],m=[],N(),this.reset(0),S.video>=0&&(this.abrController.setQualityFor("video",S.video),t.video["ABR.keepBandwidthCondition"]=!1,S.video=-1),S.audio>=0&&(this.abrController.setQualityFor("audio",S.audio),t.audio["ABR.keepBandwidthCondition"]=!1,S.audio=-1),this.setConfig(t),g=null,y=null,D=e,z.call(this,0)},play:function(){N(),e.play()},seek:function(t){var n=null,r=0;if(N(),"number"!==typeof t||isNaN(t))throw new Error("MediaPlayer.seek(): Invalid Arguments");if(this.isLive()){if(n=this.getDVRWindowRange(),r=w.getLiveDelay(),null===n)throw new Error("MediaPlayer.seek(): impossible for live stream");if(t<n.start||t>n.end)throw new Error("MediaPlayer.seek(): seek value outside available time range");t>n.end-r&&(t=n.end-r),w.seek(t,!0)}else{if(t<0||t>e.getDuration())throw new Error("MediaPlayer.seek(): seek value outside available time range");e.setCurrentTime(t)}},pause:function(){N(),e.pause()},stop:function(){for(var t in N(),e.pause(),this.isLive()||e.setCurrentTime(0),C)C[t].stop()},reset:function(e){N(),this.setQualityFor("video",0),this.setQualityFor("audio",0),D=null,z.call(this,e)},refreshManifest:function(e){N(),w.refreshManifest(e)},getDuration:function(){return N(),e.getDuration()},isLive:function(){return N(),e.getDuration()===Number.POSITIVE_INFINITY},getPosition:function(){return N(),e.getCurrentTime()},getDVRWindowRange:function(){if(N(),!this.isLive())return null;var e=te.call(this);return e?e.range:null},getDVRWindowSize:function(){return N(),this.isLive(),null},getDVRSeekOffset:function(e){if(N(),!this.isLive())return null;var t=te.call(this),n=t?t.range.start+e:null;return n&&n>t.range.end&&(n=t.range.end),n},getVideoBitrates:function(){return N(),f?f.slice():[]},getMetricsFor:function(e){var t=this.metricsModel.getReadOnlyMetricsFor(e);return t},getTrickModeSpeed:function(){return w?w.getTrickModeSpeed():0},setTrickModeSpeed:function(e){N(),w&&w.setTrickModeSpeed(e)},getError:function(){return g},getWarning:function(){return y},getTracks:function(e){if(N(),!e||e!==d.TRACKS_TYPE.AUDIO&&e!==d.TRACKS_TYPE.TEXT)throw new Error('MediaPlayer Invalid Argument - "type" should be defined and shoud be kind of MediaPlayer.TRACKS_TYPE');var t=X(e);if(!t)return[];for(var n=[],r=0;r<t.length;r+=1)n.push(W(t[r]));return n},selectTrack:function(e,t){if(N(),!e||e!==d.TRACKS_TYPE.AUDIO&&e!==d.TRACKS_TYPE.TEXT)throw new Error('MediaPlayer Invalid Argument - "type" should be defined and shoud be kind of MediaPlayer.TRACKS_TYPE');if(!t||!(t.id||t.lang||t.subType))throw new Error("MediaPlayer.selectTrack(): track parameter is not in valid");var n=X(e);if(n){var r=$(e);if(r&&Z(r,t))this.debug.log("[MediaPlayer] "+e+" track ["+t.id+" - "+t.lang+"] is already selected");else for(var i=0;i<n.length;i+=1)if(Z(n[i],t))return void Q(e,n[i])}else this.debug.error("[MediaPlayer] No available track for type "+e)},getSelectedTrack:function(e){if(N(),!e||e!==d.TRACKS_TYPE.AUDIO&&e!==d.TRACKS_TYPE.TEXT)throw new Error('MediaPlayer Invalid Argument - "type" should be defined and shoud be kind of MediaPlayer.TRACKS_TYPE');return W($(e))},enableSubtitles:function(e){if(N(),"boolean"!==typeof e)throw new Error("MediaPlayer.enableSubtitles(): Invalid Arguments");E=e,w&&w.enableSubtitles(E)},isSubtitlesEnabled:function(){return N(),E},enableSubtitleExternDisplay:function(e){if("boolean"!==typeof e)throw new Error("MediaPlayer.enableSubtitleExternDisplay(): Invalid Arguments");this.config.setParams({"TextTrackExtensions.displayModeExtern":e})},getTTMLRenderingDiv:function(){return e?e.getTTMLRenderingDiv():null},attachTTMLRenderingDiv:function(t){N(),e.setTTMLRenderingDiv(t)},getMute:function(){return N(),e.getMute()},setMute:function(t){if(N(),"boolean"!==typeof t)throw new Error("MediaPlayer.setMute(): Invalid Arguments");e.setMute(t)},getVolume:function(){return N(),e.getVolume()},setVolume:function(t){if(N(),"number"!==typeof t||t<0||t>1)throw new Error("MediaPlayer.setVolume(): Invalid Arguments");e.setVolume(t)},getTerminalId:function(){var e=b(),t=T();return t.name+"-"+t.bits+"-"+e.name},addPlugin:function(e){if(N(),void 0===e)throw new Error("MediaPlayer.addPlugin(): plugin undefined");if("function"!==typeof e.getName||"function"!==typeof e.getVersion||"function"!==typeof e.init||"function"!==typeof e.load||"function"!==typeof e.stop||"function"!==typeof e.reset)throw new Error("MediaPlayer.addPlugin(): plugin API not compliant");C[e.getName()]&&C[e.getName()].destroy(),this.debug.log("[MediaPlayer] Add plugin '"+e.getName()+"' (v"+e.getVersion()+")"),C[e.getName()]=e,e.deferInit=t.defer(),l&&e.init(this,function(){this.deferInit.resolve()}.bind(e))},removePlugin:function(e){var t;if(void 0===e)throw new Error("MediaPlayer.removePlugin(): plugin undefined");if("string"===typeof e)t=e;else{if("function"!==typeof e.getName)throw new Error("MediaPlayer.removePlugin(): plugin API not compliant");t=e.getName()}C[t]&&(this.debug.log("[MediaPlayer] Remove plugin '"+t),C[t].destroy(),C[t]=null,delete C[t])}}},d.prototype={constructor:d},d.dependencies={},d.dependencies.protection={},d.dependencies.protection.servers={},d.utils={},d.models={},d.modules={},d.vo={},d.vo.metrics={},d.vo.protection={},d.rules={},d.rules.o={},d.di={},d.PUBLIC_EVENTS={error:"hasplayer",warning:"hasplayer",manifestUrlUpdate:"hasplayer",metricAdded:"hasplayer",metricChanged:"hasplayer",cueEnter:"hasplayer",cueExit:"hasplayer",play_bitrate:"video",download_bitrate:"video",bufferLevel_updated:"video",state_changed:"video"},d.TRACKS_TYPE={AUDIO:"audio",TEXT:"text"},d.hasMediaSourceExtension=function(){return(new d.utils.Capabilities).supportsMediaSource()},d.hasMediaKeysExtension=function(){return(new d.utils.Capabilities).supportsMediaKeys()},d.dependencies.AbrController=function(){"use strict";var e=!0,t={},n={},r={},i={},o="",a=function(e){return t.hasOwnProperty(e)||(t[e]=!0),t[e]},s=function(e,n){t[e]=n},u=function(e){var t;return n.hasOwnProperty(e)||(n[e]=0),t=n[e],t},l=function(e,t){n[e]=t},c=function(e){var t;return i.hasOwnProperty(e)||(i[e]=0),t=i[e],t},f=function(e,t){i[e]=t},h=function(t,n){var i,s,l,f,h,p,m=this,g=a(t),y=u(t),v=c(t),_=d.rules.SwitchRequest.prototype.NO_CHANGE,E=d.rules.SwitchRequest.prototype.NO_CHANGE,b=d.rules.SwitchRequest.prototype.NO_CHANGE,T=[],S={};if(!e||!g)return m.debug.log("[AbrController]["+t+"] ABR disabled"),{quality:y,confidence:v};for(m.debug.log("[AbrController]["+t+"] Check rules...."),l=m.getMetricsFor(n),h=m.abrRulesCollection.getRules(d.rules.BaseRulesCollection.prototype.QUALITY_SWITCH_RULES),i=0,s=h.length;i<s;i+=1)T.push(h[i].checkIndex(y,l,n,o));for(S[d.rules.SwitchRequest.prototype.STRONG]=d.rules.SwitchRequest.prototype.NO_CHANGE,S[d.rules.SwitchRequest.prototype.WEAK]=d.rules.SwitchRequest.prototype.NO_CHANGE,S[d.rules.SwitchRequest.prototype.DEFAULT]=d.rules.SwitchRequest.prototype.NO_CHANGE,i=0,s=T.length;i<s;i+=1)f=T[i],f.quality!==d.rules.SwitchRequest.prototype.NO_CHANGE&&(m.debug.log("[AbrController]["+t+"] Request for quality "+f.quality+", priority = "+f.priority+" ("+h[i].name+")"),S[f.priority]=Math.min(S[f.priority],f.quality)),!0===f.max&&(b=Math.min(b,f.quality));return S[d.rules.SwitchRequest.prototype.WEAK]!==d.rules.SwitchRequest.prototype.NO_CHANGE&&(E=d.rules.SwitchRequest.prototype.WEAK,_=S[d.rules.SwitchRequest.prototype.WEAK]),S[d.rules.SwitchRequest.prototype.DEFAULT]!==d.rules.SwitchRequest.prototype.NO_CHANGE&&(E=d.rules.SwitchRequest.prototype.DEFAULT,_=S[d.rules.SwitchRequest.prototype.DEFAULT]),S[d.rules.SwitchRequest.prototype.STRONG]!==d.rules.SwitchRequest.prototype.NO_CHANGE&&(E=d.rules.SwitchRequest.prototype.STRONG,_=S[d.rules.SwitchRequest.prototype.STRONG]),_!==d.rules.SwitchRequest.prototype.NO_CHANGE&&void 0!==_&&(y=_),E!==d.rules.SwitchRequest.prototype.NO_CHANGE&&void 0!==E&&(v=E),b!==d.rules.SwitchRequest.prototype.NO_CHANGE&&(r[t]=b),p=m.manifestExt.getRepresentationCount(n),y<0&&(y=0),y>=p&&(y=p-1),v!==d.rules.SwitchRequest.prototype.STRONG&&v!==d.rules.SwitchRequest.prototype.WEAK&&(v=d.rules.SwitchRequest.prototype.DEFAULT),m.debug.info("[AbrController]["+t+"] Request quality: "+y),{quality:y,confidence:v}},p=function(e,t){var n,r=this.metricsExt.getBitratesForType(e,t),i=this.config.getParamFor(e,"ABR.minQuality","number",-1),o=this.config.getParamFor(e,"ABR.maxQuality","number",-1),a=this.config.getParamFor(e,"ABR.minBandwidth","number",-1),s=this.config.getParamFor(e,"ABR.maxBandwidth","number",-1),u=r.length;if(-1!==a)for(n=0;n<r.length;n++)if(r[n]>=a){i=-1===i?n:Math.max(n,i);break}if(-1!==s)for(n=r.length-1;n>=0;n--)if(r[n]<=s){o=-1===o?n:Math.min(n,o);break}return i=i>=u?u-1:i,i=i<0?0:i,o=o>=u||o<0?u-1:o,{min:i,max:o}};return{debug:void 0,abrRulesCollection:void 0,manifestExt:void 0,metricsModel:void 0,metricsExt:void 0,config:void 0,getAutoSwitchBitrate:function(){return e},setAutoSwitchBitrate:function(t){this.debug.log("[AbrController] Set auto switch: "+t),e=t},getMetricsFor:function(e){var t,n;return t=this.manifestExt.getIsVideo(e),t?this.metricsModel.getMetricsFor("video"):(n=this.manifestExt.getIsAudio(e),n?this.metricsModel.getMetricsFor("audio"):this.metricsModel.getMetricsFor("stream"))},getPlaybackQuality:function(e,t){var n,i,o,a=this,s=this.getQualityFor(e),u=-1,c=-1,d=this.config.getParamFor(e,"ABR.switchUpIncrementally","boolean",!1);if(o=h.call(this,e,t),n=o.quality,i=o.confidence,a.getAutoSwitchBitrate()){d&&n>s&&(a.debug.log("[AbrController]["+e+"] Incremental switch => quality: "+n),n=s+1);var m=p.call(a,e,t);u=m.min,c=m.max,n<u&&(n=u,a.debug.log("[AbrController]["+e+"] New quality < min => "+n)),n>c&&(n=c,a.debug.log("[AbrController]["+e+"] New quality > max => "+n)),n>r[e]&&(n=r[e],a.debug.log("[AbrController]["+e+"] Max allowed quality = "+n))}return l.call(a,e,n),f.call(a,e,i),a.debug.info("[AbrController]["+e+"] Set quality: "+n),{quality:n,confidence:i}},getAutoSwitchFor:function(e){return a(e)},setAutoSwitchFor:function(e,t){var n=a(e);t!==n&&(this.debug.log("[AbrController]["+e+"] Set auto switch: "+t),s(e,t))},getQualityFor:function(e){return u(e)},setQualityFor:function(e,t){var n=u(e);t!==n&&(this.debug.log("[AbrController]["+e+"] Set playback quality: "+t),l(e,t))},isMinQuality:function(e,t,n){var r=p.call(this,e,t);return n<=r.min},setPlayerState:function(e){o=e}}},d.dependencies.AbrController.prototype={constructor:d.dependencies.AbrController},d.dependencies.AbrController.BANDWIDTH_SAFETY=.9,d.dependencies.BufferController=function(){"use strict";var e,n,r,i,o,a,s,u,l,f,h="READY",p=h,m=!1,g=!1,y=!1,v=[],E=!1,T=-1,S=!0,w=!1,x=!1,I=-1,A=-1,D=!1,R=!1,M=!1,C=null,N=null,L=null,P=0,O=!1,F=null,k=null,B=!1,U=0,H=!0,j=!1,K=null,V=null,q=!0,G=!1,Y=-1,z=0,W=1,X=Y,$=-1,Q=null,J=3,Z=0,ee=null,te=-1,ne=null,re=NaN,ie="Safari"===b().name,oe="WebKit"===b().name,ae="Firefox"===b().name,se=function(){xe.call(this)&&null!==L&&this.fragmentController.onBufferControllerStateChange()},ue=function(e,t){var n=0,r=null;!1===q&&(r=V.start,n=e.getTime()-r.getTime(),V.duration=n,V.stopreason=t,q=!0)},le=function(e){"text"!==i&&(this.debug.info("[BufferController]["+i+"] stalled = "+e),D=e,this.videoModel.stallStream(i,D),this.abrController.setPlayerState(D?"buffering":"playing"))},ce=function(){m&&g&&(this.debug.info("[BufferController]["+i+"] startPlayback"),Ue.call(this))},de=function(){var e;if(!0!==g&&null===Q){if(!1===E&&(e=new Date,ue(e,d.vo.metrics.PlayList.Trace.USER_REQUEST_STOP_REASON),K=this.metricsModel.addPlayList(i,e,0,d.vo.metrics.PlayList.INITIAL_PLAY_START_REASON)),M){if("application/ttml+xml"===F.mimeType)return;M=!1}g=!0,this.debug.info("[BufferController]["+i+"] START"),y=!0,X===Y&&this.metricsModel.addState(i,"buffering",this.videoModel.getCurrentTime()),X=z,$=-1,ee=null,this.fragmentController.clearExecutedRequests(L),ce.call(this)}},fe=function(e){var n=this;!0===E&&T===e||(this.debug.info("[BufferController]["+i+"] SEEK: "+e),!0===g&&pe.call(this),E=!0,T=e,t.when(!Q||Q.promise).then((function(){le.call(n,!0),de.call(n)})))},he=function(){this.debug.info("[BufferController]["+i+"] SEEKED"),E=!1,T=-1},pe=function(){g&&(this.debug.info("[BufferController]["+i+"] STOP"),clearTimeout(l),clearTimeout(f),g=!1,y=!1,E=!1,T=-1,ue(new Date,d.vo.metrics.PlayList.Trace.USER_REQUEST_STOP_REASON),this.fragmentController.abortRequestsForModel(L))},me=function(t){return e[t]},ge=function(e){this.debug.info("[BufferController]["+i+"] Load request ",null!==e.url?e.url:e.quality)},ye=function(e,t){void 0!==e.sequenceNumber&&(te=e.sequenceNumber),this.fragmentController.isInitializationRequest(e)?ve.call(this,e,t):_e.call(this,e,t)},ve=function(e,t){if(xe.call(this)){var n=t.data,r=e.quality,o=this;this.debug.log("[BufferController]["+i+"] Initialization loaded ",r);try{this.fragmentController.process(n).then((function(t){t?(v[r]=t,o.debug.info("[BufferController]["+i+"] Buffer initialization segment ",null!==e.url?e.url:e.quality),Ee.call(o,t,e.quality).then((function(){xe.call(o)&&Ne.call(o)}))):Ne.call(o)}),(function(e){Ie.call(o),e.name?o.errHandler.sendError(e.name,e.message,e.data):o.errHandler.sendError(d.dependencies.ErrorHandler.prototype.INTERNAL_ERROR,"Internal error while processing media segment",e.message)}))}catch(a){Ie.call(o),a.name?o.errHandler.sendError(a.name,a.message,a.data):o.errHandler.sendError(d.dependencies.ErrorHandler.prototype.INTERNAL_ERROR,"Internal error while processing media segment",a.message)}}},_e=function(e,r){if(xe.call(this)){var o,a=this.manifestExt.getEventStreamForAdaptationSet(this.getData()),s=this.manifestExt.getEventStreamForRepresentation(this.getData(),n),u=this;re=e.duration,Z=0,this.debug.log("[BufferController]["+i+"] Media loaded ",e.url),!0===this.chunkAborted&&(this.chunkAborted=!1),1===this.chunkMissingCount&&(this.chunkMissingCount=0);try{this.fragmentController.process(r.data,e,n).then((function(r){r?((a.length>0||s.length>0)&&(o=Se.call(u,r,e,a,s),u.eventController.addInbandEvents(o)),u.debug.info("[BufferController]["+i+"] Buffer segment from url ",e.url),r=we.call(u,r),t.when(!x||De.call(u)).then((function(){x=!1,ae&&(k.timestampOffset=-Te(r,e)),Ee.call(u,r,e.quality,e).then((function(){I!==e.quality&&(u.debug.log("[BufferController]["+i+"] Buffered quality changed: "+e.quality),u.metricsModel.addBufferedSwitch(i,e.startTime,n.id,e.quality),I=e.quality),Ie.call(u),Ue.call(u)}))}))):(u.debug.error("[BufferController]["+i+"] Error with segment data, no bytes to push"),Ie.call(u),Ue.call(u))}),(function(e){Ie.call(u),e.name?u.errHandler.sendError(e.name,e.message,e.data):u.errHandler.sendError(d.dependencies.ErrorHandler.prototype.INTERNAL_ERROR,"Internal error while processing media segment",e.message)}))}catch(l){Ie.call(u),l.name?u.errHandler.sendError(l.name,l.message,l.data):u.errHandler.sendError(d.dependencies.ErrorHandler.prototype.INTERNAL_ERROR,"Internal error while processing media segment",l.message)}}},Ee=function(e,r,o){var a=t.defer(),u=this.videoModel.getCurrentTime(),l=new Date,c=this;if(!0===q&&(q=!1,V=this.metricsModel.appendPlayListTrace(K,n.id,null,l,u,null,1,null)),Pe())return Ae.call(this).then((function(){Pe()&&(c.debug.log("[BufferController]["+i+"] Buffering segment"),c.sourceBufferExt.append(k,e,o).then((function(){if(c.debug.log("[BufferController]["+i+"] Segment buffered"),O=!1,P>1&&!ie&&!oe)De.call(c,-1,Fe.call(c)-s).then((function(){be.call(c),a.resolve()}));else if(B){var e=j?-1:Fe.call(c)+re,t=j?Fe.call(c)-re:-1;De.call(c,e,t).then((function(){be.call(c),a.resolve()}))}else be.call(c),a.resolve();c.system.notify("bufferUpdated")}),(function(t){"text"===i?(c.debug.error("[BufferController]["+i+"] Failed to append data in source buffer : "+t.err.message),a.resolve()):(c.errHandler.sendError(d.dependencies.ErrorHandler.prototype.MEDIA_ERR_APPEND_SOURCEBUFFER,"Failed to append data into "+i+" source buffer",new d.vo.Error(t.err.code,t.err.name,t.err.message)),t.err.code===d.dependencies.ErrorHandler.prototype.DOM_ERR_QUOTA_EXCEEDED?({data:e,quality:r},C=a,O=!0,0,pe.call(c)):a.resolve())})))})),a.promise},be=function(){var e,t,n=null;if(this.debug.getLevel()>=this.debug.INFO&&k){if(n=this.sourceBufferExt.getAllRanges(k),null===n||0===n.length)return;for(e=0,t=n.length;e<t;e+=1)this.debug.info("[BufferController]["+i+"] Buffered range ["+e+"]: "+n.start(e)+" - "+n.end(e)+" ("+this.getVideoModel().getCurrentTime()+")")}},Te=function(e,t){var n,r,i=_.deserialize(e),o=i.getBoxByType("moov"),a=i.getBoxByType("moof"),s=null===a?null:a.getBoxByType("traf"),u=null===s?null:s.getBoxByType("trun");if(null===u||0===u.samples_table.length)return 0;if(n=u.samples_table[0].sample_composition_time_offset,void 0===n)return 0;if(o){var l=o.getBoxByType("mvhd");r=l.timescale}else r=t.timescale;return n/r},Se=function(e,t,n,r){var i,o,a,s=[],u=0,l=Math.pow(256,2),d=Math.pow(256,3),f=Math.max(isNaN(t.startTime)?0:t.startTime,0),h=[];G=!1,a=n.concat(r);for(var p=0;p<a.length;p++)h[a[p].schemeIdUri]=a[p];while(u<e.length){if(i=String.fromCharCode(e[u+4],e[u+5],e[u+6],e[u+7]),o=e[u]*d+e[u+1]*l+256*e[u+2]+1*e[u+3],"moov"===i||"moof"===i)break;if("emsg"===i){G=!0;var m=["","",0,0,0,0,""],g=0,y=u+12;while(y<o+u)0===g||1===g||6===g?(0!==e[y]?m[g]+=String.fromCharCode(e[y]):g+=1,y+=1):(m[g]=e[y]*d+e[y+1]*l+256*e[y+2]+1*e[y+3],y+=4,g+=1);var v=m[0],_=m[1],E=m[2],b=m[3],T=m[4],S=m[5],w=m[6],x=f*E+b;if(h[v]){var I=new c.vo.Event;I.eventStream=h[v],I.eventStream.value=_,I.eventStream.timescale=E,I.duration=T,I.id=S,I.presentationTime=x,I.messageData=w,I.presentationTimeDelta=b,s.push(I)}}u+=o}return s},we=function(e){if(!G)return e;var t,n,r=e.length,i=0,o=0,a=0,s=Math.pow(256,2),u=Math.pow(256,3),l=new Uint8Array(e.length);while(i<r){if(t=String.fromCharCode(e[i+4],e[i+5],e[i+6],e[i+7]),n=e[i]*u+e[i+1]*s+256*e[i+2]+1*e[i+3],"emsg"!==t)for(a=i;a<i+n;a++)l[o]=e[a],o+=1;i+=n}return l.subarray(0,o)},xe=function(){return!!g||(Ie.call(this),!1)},Ie=function(){Q&&(Q.resolve(),Q=null)},Ae=function(){var e,n,r=t.defer(),i=0;return O?(n=function(){var t,o,a=this.videoModel.getCurrentTime(),s=0;o=this.fragmentController.getExecutedRequestForTime(L,a),t=o&&!isNaN(o.startTime)?o.startTime:Math.floor(a),e=o&&!isNaN(o.duration)?o.duration:1,De.call(this,s,t).then((function(t){i+=t,i>=e?r.resolve():setTimeout(n,1e3*e)}))},n.call(this),r.promise):t.when(!0)},De=function(e,n){var o,a,s=t.defer(),u=this;return 0===k.buffered.length?(s.resolve(0),s.promise):(o=void 0!==e&&-1!==e?e:k.buffered.start(0),a=void 0!==n&&-1!==n?n:k.buffered.end(k.buffered.length-1),a<=o?(s.resolve(0),s.promise):(this.debug.info("[BufferController]["+i+"] Remove from "+o+" to "+a+" ("+this.getVideoModel().getCurrentTime()+")"),"text"!==i&&this.sourceBufferExt.abort(r,k),this.sourceBufferExt.remove(k,o,a,N.duration,r).then((function(){u.fragmentController.removeExecutedRequestsBeforeTime(L,a+1),u.fragmentController.cancelPendingRequestsForModel(L),s.resolve(a-o)}),(function(e){u.errHandler.sendWarning(d.dependencies.ErrorHandler.prototype.MEDIA_ERR_REMOVE_SOURCEBUFFER,"Failed to remove data from "+i+" source buffer",new d.vo.Error(e.code,e.name,e.message)),s.resolve(0)})),s.promise))},Re=function(e){xe.call(this)&&(Ie.call(this),e.aborted?je.call(this):"text"!==i?(Z+=1,Z===J?this.errHandler.sendError(d.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_CONTENT,"Failed to download media segment",{url:e.url,status:e.status}):(this.errHandler.sendWarning(d.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_CONTENT,"Failed to download media segment",{url:e.url,status:e.status}),ee=e,X===z&&Ye.call(this))):this.errHandler.sendWarning(d.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_CONTENT,"Failed to download media segment",{url:e.url,status:e.status}))},Me=function(){this.debug.log("[BufferController]["+i+"] Stream is complete."),M=!0,ue(new Date,d.vo.metrics.PlayList.Trace.END_OF_CONTENT_STOP_REASON),Ie.call(this),pe.call(this),this.system.notify("bufferingCompleted")},Ce=function(n){if(!xe.call(this))return t.when(null);var r=this;return v[n]?(this.debug.info("[BufferController]["+i+"] Buffer initialization segment, quality = ",n),Ee.call(this,v[n],n).then((function(){r.debug.log("[BufferController]["+i+"] Initialization segment buffered"),xe.call(r)&&Ne.call(r)})),t.when(null)):this.indexHandler.getInitRequest(e[n])},Ne=function(){if(xe.call(this)){var e,t,r=Fe.call(this),o=this;x?t=r:(e=this.sourceBufferExt.getBufferRange(k,r),t=e?e.end:r),-1===te||E||x?(this.debug.log("[BufferController]["+i+"] loadNextFragment for time: "+t),this.indexHandler.getSegmentRequestForTime(n,t).then(Le.bind(this),(function(){A=-1,Me.call(o)}))):(this.debug.log("[BufferController]["+i+"] loadNextFragment for sequence number: "+te),this.indexHandler.getNextSegmentRequestFromSN(n,te).then(Le.bind(this)))}},Le=function(e){if(xe.call(this)){var t=this.manifestModel.getValue();null===e||e.action!==e.ACTION_COMPLETE?null!==e?(B&&(e=this.indexHandler.getIFrameRequest(e)),this.fragmentController.isFragmentLoadedOrPending(this,e)?(this.debug.log("[BufferController]["+i+"] new fragment request => already loaded or pending "+e.url),this.indexHandler.getNextSegmentRequest(n).then(Le.bind(this))):(this.fragmentController.prepareFragmentForLoading(this,e,ge,ye,Re,null),se.call(this))):(this.debug.log("[BufferController]["+i+"] loadNextFragment failed"),Ie.call(this),R?"M3U"===t.name&&He.call(this):Me.call(this)):Me.call(this)}},Pe=function(){return!!F&&!!k},Oe=function(){var e=this.videoModel.getCurrentTime();return N.start+N.duration-e},Fe=function(){var e=-1,t=this.videoModel.getCurrentTime();return e=E?T:t,e},ke=function(){var e,r=t.defer(),o=n.segmentAvailabilityRange.end,a=this;return this.debug.log("[BufferController]["+i+"] Manifest live edge = "+o),e=Math.max(o-u,n.segmentAvailabilityRange.start),this.indexHandler.getSegmentRequestForTime(n,e).then((function(e){N.liveEdge=e.startTime,a.debug.log("[BufferController]["+i+"] Live edge = "+N.liveEdge),r.resolve(N.liveEdge)})),r.promise},Be=function(e){if(Pe()){var t=Fe.call(this);P=this.sourceBufferExt.getBufferLength(k,t),this.debug.log("[BufferController]["+i+"] Working time = "+t+", Buffer level = "+P.toFixed(3)),e&&this.metricsModel.addBufferLevel(i,new Date,P),this.updateBufferState()}},Ue=function(){var e,t;xe.call(this)&&(this.debug.log("[BufferController]["+i+"] Check buffer..."),Be.call(this,!0),D&&P>a&&le.call(this,!1),e=Oe.call(this),this.debug.log("[BufferController]["+i+"] time to end = "+e),B?P<1&&je.call(this):w||x||P<o&&(o<e||o>=e&&!M)?je.call(this):(t=P-o+.5,He.call(this,t)))},He=function(e){var t=this;e=e||1,this.debug.log("[BufferController]["+i+"] Check buffer in = "+e.toFixed(3)+" ms (bufferLevel = "+P+")"),clearTimeout(l),l=setTimeout((function(){l=null,Ue.call(t)}),1e3*e)},je=function(){var e,r=new Date,o=this.videoModel.getCurrentTime(),a=this.manifestModel.getValue(),s=!1,u=null,l=this;null!==Q&&this.debug.error("[BufferController]["+i+"] deferredFragmentBuffered has not been resolved, create a new one is not correct."),Q=t.defer(),this.debug.log("[BufferController]["+i+"] Start buffering process..."),qe.call(this),s=0===v.length&&"M3U"!==a.name,e=this.abrController.getPlaybackQuality(i,F).quality,n=me.call(this,e),e!==A&&(this.debug.log("[BufferController]["+i+"] currentDownloadQuality changed : "+e),A=e,s=!0,ue(new Date,d.vo.metrics.PlayList.Trace.REPRESENTATION_SWITCH_STOP_REASON),this.debug.log("[BufferController]["+i+"] Send RepresentationSwitch with quality = "+e),this.metricsModel.addRepresentationSwitch(i,r,o,n.id,e),u=Ke.call(this)),t.when(u||!0).then((function(){!0===s?Ce.call(l,e).then((function(e){null!==e&&(l.fragmentController.prepareFragmentForLoading(l,e,ge,ye,Re,null),se.call(l))}),(function(e){Ie.call(l),e.name===d.dependencies.ErrorHandler.prototype.MEDIA_ERR_CODEC_UNSUPPORTED?l.errHandler.sendError(e.name,e.message,e.data):l.errHandler.sendError(d.dependencies.ErrorHandler.prototype.INTERNAL_ERROR,"Internal error while processing initialization segment",e.message)})):Ne.call(l)}),(function(e){Ie.call(l),e&&l.errHandler.sendError(e.name,e.message,e.data)}))},Ke=function(){var r,o,a,s=this.manifestModel.getValue(),u=this;return"M3U"!==s.name?t.when(!0):R||"SegmentList"!==n.segmentInfoType?(ne&&(clearTimeout(ne),ne=null),r=t.defer(),a=this.manifestExt.getDataIndex(F,s,N.index),o=s.Period_asArray[N.index].AdaptationSet_asArray[a].Representation_asArray[A],this.debug.log("[BufferController]["+i+"] Update playlist for representation "+o.id),this.parser.hlsParser.updatePlaylist(o,F).then((function(){e=Ve.call(u,F,N),n=me.call(u,A),o=s.Period_asArray[N.index].AdaptationSet_asArray[a].Representation_asArray[A];var t=o.SegmentList.SegmentURL_asArray;t>0&&(re=t[t.length-1]-1),ne=setTimeout((function(){Ke.call(u)}),1e3*re),r.resolve()}),(function(e){e&&u.errHandler.sendWarning(e.name,e.message,e.data),r.reject(e)})),r.promise):t.when(!0)},Ve=function(e,t){var n,r,i=this.manifestModel.getValue();return n=this.manifestExt.getDataIndex(e,i,t.index),r=this.manifestExt.getAdaptationsForPeriod(i,t),this.manifestExt.getRepresentationsForAdaptation(i,r[n])},qe=function(){if(!1===S)return!1;this.debug.log("[BufferController]["+i+"] Data changed"),e=Ve.call(this,F,N),n=me.call(this,this.abrController.getPlaybackQuality(i,F).quality),this.bufferExt.updateData(F,i),w&&(v=[],this.fragmentController.clearExecutedRequests(L),x=!0,"text"===i&&(k.UpdateLang(F.id,F.lang),"application/ttml+xml"===F.mimeType&&De.call(this))),S=!1,w=!1},Ge=function(e){var t,n,r=this.abrController.getQualityFor(i);if(!this.abrController.isMinQuality(i,F,r)){n=this.abrRulesCollection.getRules(d.rules.BaseRulesCollection.prototype.ABANDON_FRAGMENT_RULES);var o=function(e){e.quality<r&&(this.fragmentController.abortRequestsForModel(L),this.debug.info("[BufferController]["+i+"] Abandon current segment download"))};for(t=0;t<n.length;t++)n[t].execute(e.data.request,o.bind(this))}},Ye=function(){null!==ee&&(this.debug.log("[BufferController]["+i+"] Signal segment loading failed"),this.system.notify("segmentLoadingFailed",ee),ee=null)};return{videoModel:void 0,metricsModel:void 0,manifestExt:void 0,manifestModel:void 0,bufferExt:void 0,sourceBufferExt:void 0,abrController:void 0,parser:void 0,fragmentExt:void 0,indexHandler:void 0,debug:void 0,system:void 0,errHandler:void 0,config:void 0,abrRulesCollection:void 0,initialize:function(e,t,n,r,i,l,c){var f=this.manifestModel.getValue();this.debug.log("[BufferController]["+e+"] Initialize"),this[d.dependencies.FragmentLoader.eventList.ENAME_LOADING_PROGRESS]=Ge,R=this.manifestExt.getIsDynamic(f),this.setMediaSource(l),this.setType(e),this.setBuffer(r),this.setFragmentController(i),this.setEventController(c),o=this.config.getParamFor(e,"BufferController.minBufferTime","number",-1),a=this.config.getParamFor(e,"BufferController.minBufferTimeForPlaying","number",d.dependencies.BufferExtensions.BUFFER_TIME_AT_STARTUP),s=this.config.getParamFor(e,"BufferController.bufferToKeep","number",d.dependencies.BufferExtensions.DEFAULT_BUFFER_TO_KEEP),u=this.config.getParamFor(e,"BufferController.liveDelay","number",-1),this.updateData(n,t),this.load(),m=!0},load:function(){var e=this.manifestModel.getValue(),t=this;qe.call(this),n=me.call(this,this.abrController.getPlaybackQuality(i,F).quality),A=-1,De.call(this).then((function(){n&&(t.indexHandler.setIsDynamic(R),-1===o&&(o=t.bufferExt.decideBufferLength(e.minBufferTime,N.duration,y)),(-1===u||u<o)&&(u=o),e.minBufferTime=o,"video"===i&&(R?t.indexHandler.updateSegmentList(n).then((function(){ke.call(t).then((function(e){t.system.notify("startTimeFound",e)}))})):t.indexHandler.getCurrentTime(n).then((function(e){e<n.segmentAvailabilityRange.start&&(e=n.segmentAvailabilityRange.start),t.system.notify("startTimeFound",e)}))))}))},getIndexHandler:function(){return this.indexHandler},getType:function(){return i},setType:function(e){i=e,void 0!==this.indexHandler&&this.indexHandler.setType(e)},getPeriodInfo:function(){return N},getVideoModel:function(){return this.videoModel},setVideoModel:function(e){this.videoModel=e},getFragmentController:function(){return this.fragmentController},setFragmentController:function(e){e&&(this.fragmentController=e,L=this.fragmentController.attachBufferController(this),L.fragmentLoader.subscribe(d.dependencies.FragmentLoader.eventList.ENAME_LOADING_PROGRESS,this),L.setType(i))},setEventController:function(e){this.eventController=e},getData:function(){return F},updateData:function(e,t){this.debug.log("[BufferController]["+i+"] Update data"),w=null!==F&&(F.id!==e.id||F.lang!==e.lang||F.subType!==e.subType),F=e,N=t,S=!0,w&&(this.debug.log("[BufferController]["+i+"] Track changed"),clearTimeout(l),l=null,M=!1,de.call(this),null===Q&&Ue.call(this))},getHtmlVideoState:function(){return X},getAvailableRepresentations:function(){return e},getCurrentRepresentation:function(){return n},getBuffer:function(){return k},setBuffer:function(e){k=e},getMinBufferTime:function(){return o},setMinBufferTime:function(e){o=e},getLiveDelay:function(){return u},setMediaSource:function(e){r=e},isReady:function(){return p===h},isBufferingCompleted:function(){return M},updateManifest:function(){this.system.notify("manifestUpdate")},updateBufferState:function(){var e,t=this.videoModel.getCurrentTime(),n=-1===$?t:$,r=t-n,o=this;if(clearTimeout(f),f=null,!1!==g&&"text"!==i&&!B){switch(X){case Y:X=z,this.debug.info("[BufferController]["+i+"] BUFFERING - "+t+" - "+P),this.metricsModel.addState(i,"buffering",t);break;case z:!this.getVideoModel().isPaused()&&r>0&&P>=1?(X=W,this.debug.info("[BufferController]["+i+"] PLAYING - "+t),this.metricsModel.addState(i,"playing",t),E=!1,T=-1,Z=0):this.getVideoModel().isStalled()||(e=this.sourceBufferExt.getAllRanges(k));break;case W:if(!this.getVideoModel().isPaused()&&!this.getVideoModel().isSeeking()&&(r<=0&&P<=1||0===P))if(X=z,this.debug.info("[BufferController]["+i+"] BUFFERING - "+t+" - "+P),this.metricsModel.addState(i,"buffering",t),ee)Ye.call(this);else{var a;for(e=this.sourceBufferExt.getAllRanges(k),a=0;a<e.length;a++)if(t<e.start(a)&&(!R||e.start(a)-t<re))break;a<e.length&&(this.debug.info("[BufferController]["+i+"] BUFFERING => skip buffer discontinuity, seek to "+e.start(a)),this.videoModel.setCurrentTime(e.start(a)))}f=setTimeout((function(){f=null,Be.call(o,!1)}),1e3);break}t>0&&($=t)}},updateStalledState:function(){D=this.videoModel.isStalled()},reset:function(e){var n=function(e){e&&(e.reject(),e=null)},o=t.defer(),a=this;return pe.call(this),this.sourceBufferExt.abort(r,k),ne&&(clearTimeout(ne),ne=null),t.when(!Q||Q.promise).then((function(){n(C),n(Q),L&&(L.fragmentLoader.unsubscribe(d.dependencies.FragmentLoader.eventList.ENAME_LOADING_PROGRESS,a.abrController),a.fragmentController.abortRequestsForModel(L),a.fragmentController.detachBufferController(L),L=null),v=[],!0,O=!1,null,!1,B&&(a.abrController.setAutoSwitchFor(i,H),a.abrController.setQualityFor(i,U)),e||a.sourceBufferExt.removeSourceBuffer(r,k),F=null,k=null,o.resolve()}),(function(){o.reject()})),o.promise},getSegmentDuration:function(){return re},setTrickMode:function(e,n){var r=t.defer();return this.debug.log("[BufferController]["+i+"] setTrickMode - enabled = "+e),B===e?(r.resolve(),r.promise):(B=e,B?(j=n,U=this.abrController.getQualityFor(i),H=this.abrController.getAutoSwitchFor(i),this.abrController.setAutoSwitchFor(i,!1),this.abrController.setQualityFor(i,0),r.resolve()):(this.abrController.setAutoSwitchFor(i,H),this.abrController.setQualityFor(i,U),De.call(this).then((function(){r.resolve()}))),r.promise)},start:de,seek:fe,stop:pe,seeked:he,updateBufferLevel:Be}},d.dependencies.BufferController.prototype={constructor:d.dependencies.BufferController},d.dependencies.BufferExtensions=function(){"use strict";var e,n,r=0,i=0,o=null,a=null,s=function(e){var t=this.metricsExt.getCurrentHttpRequest(e);return null!==t?(t.tresponse.getTime()-t.trequest.getTime())/1e3:0},u=function(){var e,t,n,s=this;return e=o?s.abrController.getQualityFor("audio"):r,t=a?s.abrController.getQualityFor("video"):i,n=e===r&&t===i,n};return{system:void 0,videoModel:void 0,metricsExt:void 0,metricsModel:void 0,abrController:void 0,bufferMax:void 0,updateData:function(e,t){if(e){var n=e.Representation_asArray.length-1;"audio"===t?(r=n,o=e):"video"===t&&(i=n,a=e)}},getTopQualityIndex:function(e){var t=null;return"audio"===e?t=r:"video"===e&&(t=i),t},decideBufferLength:function(t,n){return e=n===1/0?t>0?t:d.dependencies.BufferExtensions.DEFAULT_MIN_BUFFER_TIME:t>=n?Math.min(n,d.dependencies.BufferExtensions.DEFAULT_MIN_BUFFER_TIME):Math.min(n,t),e},getLeastBufferLevel:function(){var e=this.metricsModel.getReadOnlyMetricsFor("video"),t=this.metricsExt.getCurrentBufferLevel(e),n=this.metricsModel.getReadOnlyMetricsFor("audio"),r=this.metricsExt.getCurrentBufferLevel(n),i=null;return i=null===t||null===r?null!==r?r.level:null!==t?t.level:null:Math.min(r.level,t.level),i},getRequiredBufferLength:function(r,i,o,a){var l,c=this,f=c.metricsModel.getReadOnlyMetricsFor("video"),h=c.metricsModel.getReadOnlyMetricsFor("audio"),p=a>=d.dependencies.BufferExtensions.LONG_FORM_CONTENT_DURATION_THRESHOLD,m=t.defer(),g=!1;return c.bufferMax===d.dependencies.BufferExtensions.BUFFER_SIZE_MIN?(l=e,m.resolve(l)):c.bufferMax===d.dependencies.BufferExtensions.BUFFER_SIZE_INFINITY?(l=a,m.resolve(l)):c.bufferMax===d.dependencies.BufferExtensions.BUFFER_SIZE_REQUIRED?(n=e,o||r||(g=u.call(c)),g&&(n=p?d.dependencies.BufferExtensions.BUFFER_TIME_AT_TOP_QUALITY_LONG_FORM:d.dependencies.BufferExtensions.BUFFER_TIME_AT_TOP_QUALITY),l=n+i+Math.max(s.call(c,f),s.call(c,h)),m.resolve(l)):m.reject("invalid bufferMax value: "+c.bufferMax),m.promise},getBufferTarget:function(){return void 0===n?e:n}}},d.dependencies.BufferExtensions.BUFFER_SIZE_REQUIRED="required",d.dependencies.BufferExtensions.BUFFER_SIZE_MIN="min",d.dependencies.BufferExtensions.BUFFER_SIZE_INFINITY="infinity",d.dependencies.BufferExtensions.BUFFER_TIME_AT_STARTUP=1,d.dependencies.BufferExtensions.DEFAULT_MIN_BUFFER_TIME=16,d.dependencies.BufferExtensions.DEFAULT_BUFFER_TO_KEEP=30,d.dependencies.BufferExtensions.DEFAULT_LIVE_DELAY=16,d.dependencies.BufferExtensions.BUFFER_TIME_AT_TOP_QUALITY=30,d.dependencies.BufferExtensions.BUFFER_TIME_AT_TOP_QUALITY_LONG_FORM=300,d.dependencies.BufferExtensions.LONG_FORM_CONTENT_DURATION_THRESHOLD=600,d.dependencies.BufferExtensions.prototype.constructor=d.dependencies.BufferExtensions,d.utils.Capabilities=function(){},d.utils.Capabilities.prototype={constructor:d.utils.Capabilities,system:void 0,supportsMediaSource:function(){"use strict";var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t},supportsMediaKeys:function(){"use strict";var e="WebKitMediaKeys"in window,t="MSMediaKeys"in window,n="MediaKeys"in window;return e||t||n},supportsEncryptedMedia:function(){return this.system.hasMapping("protectionModel")},supportsCodec:function(e,t){"use strict";if(!(e instanceof HTMLMediaElement))throw"element must be of type HTMLMediaElement.";var n=e.canPlayType(t);return"probably"===n||"maybe"===n}},d.utils.Config=function(){"use strict";var e=["video","audio"],t={"BufferController.minBufferTimeForPlaying":-1,"BufferController.minBufferTime":-1,"BufferController.bufferToKeep":-1,"BufferController.liveDelay":-1,"ABR.minBandwidth":-1,"ABR.maxBandwidth":-1,"ABR.minQuality":-1,"ABR.maxQuality":-1,"ABR.switchUpIncrementally":-1,"ABR.switchUpRatioSafetyFactor":-1,"ABR.latencyInBandwidth":-1,"ABR.switchDownBufferTime":-1,"ABR.switchDownBufferRatio":-1,"ABR.switchLowerBufferTime":-1,"ABR.switchLowerBufferRatio":-1,"ABR.switchUpBufferTime":-1,"ABR.switchUpBufferRatio":-1,"ABR.keepBandwidthCondition":-1,"ABR.droppedFramesMinRatio":-1,"ABR.droppedFramesMaxRatio":-1,"ManifestLoader.RetryAttempts":-1,"ManifestLoader.RetryInterval":-1,"FragmentLoader.RetryAttempts":-1,"FragmentLoader.RetryInterval":-1,"Protection.licensePersistence":-1,backoffSeekToEnd:2,video:{},audio:{}},n=function(n){var r,i,o;for(r in n)if(n.hasOwnProperty(r)&&-1===r.indexOf("//"))if(e.indexOf(r)>-1)for(o in i=n[r],i)i.hasOwnProperty(o)&&(t[r][o]=n[r][o]);else t[r]=n[r]},r=function(e,t,n,r){var i=e[t];if(void 0===i||-1===i)return r;if(void 0!==n&&typeof i!==n)switch(n){case"number":i=Number(i);break;case"boolean":i="true"===i||"1"===i||1===i;break;default:break}return i},i=function(e,n,i){return r(t,e,n,i)},o=function(e,n,i,o){var a=t[e];return void 0!==a&&void 0!==a[n]?r(a,n,i,o):r(t,n,i,o)};return{debug:void 0,setup:function(){},setParams:function(e){n(e);var t=this.getParam("Debug.level","number",-1);-1!==t&&this.debug.setLevel(t)},getParam:function(e,t,n){return i(e,t,n)},getParamFor:function(e,t,n,r){return o(e,t,n,r)}}},d.utils.Config.prototype={constructor:d.utils.Config},d.di.Context=function(){"use strict";var e=function(){var e=document.createElement("video"),t=this.system.getObject("debug");d.models.ProtectionModel_21Jan2015.detect(e)?this.system.mapSingleton("protectionModel",d.models.ProtectionModel_21Jan2015):d.models.ProtectionModel_3Feb2014.detect(e)?this.system.mapClass("protectionModel",d.models.ProtectionModel_3Feb2014):d.models.ProtectionModel_01b.detect(e)?this.system.mapClass("protectionModel",d.models.ProtectionModel_01b):(t.log("No supported version of EME detected on this user agent!"),t.log("Attempts to play encrypted content will fail!"))};return{system:void 0,setup:function(){this.system.autoMapOutlets=!0,this.system.mapSingleton("capabilities",d.utils.Capabilities),this.system.mapSingleton("config",d.utils.Config),this.system.mapSingleton("debug",d.utils.Debug),this.system.mapSingleton("debugController",d.utils.DebugController),this.system.mapClass("domParser",d.utils.DOMParser),this.system.mapSingleton("eventBus",d.utils.EventBus),this.system.mapSingleton("textTrackExtensions",d.utils.TextTrackExtensions),this.system.mapSingleton("tokenAuthentication",d.utils.TokenAuthentication),this.system.mapSingleton("vttParser",d.utils.VTTParser),this.system.mapSingleton("ttmlParser",d.utils.TTMLParser),this.system.mapSingleton("ttmlRenderer",d.utils.TTMLRenderer),this.system.mapSingleton("manifestModel",d.models.ManifestModel),this.system.mapClass("metrics",d.models.MetricsList),this.system.mapSingleton("metricsModel",d.models.MetricsModel),this.system.mapSingleton("uriQueryFragModel",d.models.URIQueryAndFragmentModel),this.system.mapSingleton("videoModel",d.models.VideoModel),this.system.mapSingleton("abrController",d.dependencies.AbrController),this.system.mapClass("bufferController",d.dependencies.BufferController),this.system.mapSingleton("bufferExt",d.dependencies.BufferExtensions),this.system.mapSingleton("errHandler",d.dependencies.ErrorHandler),this.system.mapClass("eventController",d.dependencies.EventController),this.system.mapClass("fragmentController",d.dependencies.FragmentController),this.system.mapClass("fragmentLoader",d.dependencies.FragmentLoader),this.system.mapClass("fragmentModel",d.dependencies.FragmentModel),this.system.mapClass("manifestLoader",d.dependencies.ManifestLoader),this.system.mapSingleton("manifestUpdater",d.dependencies.ManifestUpdater),this.system.mapSingleton("mediaSourceExt",d.dependencies.MediaSourceExtensions),this.system.mapSingleton("notifier",d.dependencies.Notifier),this.system.mapSingleton("parser",d.dependencies.Parser),this.system.mapSingleton("sourceBufferExt",d.dependencies.SourceBufferExtensions),this.system.mapClass("stream",d.dependencies.Stream),this.system.mapSingleton("streamController",d.dependencies.StreamController),this.system.mapClass("textController",d.dependencies.TextController),this.system.mapSingleton("textSourceBuffer",d.dependencies.TextSourceBuffer),this.system.mapSingleton("textTTMLXMLMP4SourceBuffer",d.dependencies.TextTTMLXMLMP4SourceBuffer),this.system.mapSingleton("videoExt",d.dependencies.VideoModelExtensions),d.dependencies.ProtectionController&&(this.system.mapClass("protectionController",d.dependencies.ProtectionController),this.system.mapSingleton("protectionExt",d.dependencies.ProtectionExtensions),this.system.mapSingleton("ksClearKey",d.dependencies.protection.KeySystem_ClearKey),this.system.mapSingleton("ksPlayReady",d.dependencies.protection.KeySystem_PlayReady),this.system.mapSingleton("ksWidevine",d.dependencies.protection.KeySystem_Widevine),this.system.mapSingleton("serverClearKey",d.dependencies.protection.servers.ClearKey),this.system.mapSingleton("serverDRMToday",d.dependencies.protection.servers.DRMToday),this.system.mapSingleton("serverPlayReady",d.dependencies.protection.servers.PlayReady),this.system.mapSingleton("serverWidevine",d.dependencies.protection.servers.Widevine),e.call(this)),this.system.mapClass("abrRulesCollection",d.rules.BaseRulesCollection),this.system.mapClass("abandonRequestRule",d.rules.AbandonRequestsRule),this.system.mapClass("downloadRatioRule",d.rules.DownloadRatioRule),this.system.mapClass("droppedFramesRule",d.rules.DroppedFramesRule),this.system.mapClass("insufficientBufferRule",d.rules.InsufficientBufferRule),this.system.mapClass("limitSwitchesRule",d.rules.LimitSwitchesRule),this.system.mapClass("baseURLExt",c.dependencies.BaseURLExtensions),this.system.mapClass("fragmentExt",c.dependencies.FragmentExtensions),this.system.mapClass("indexHandler",c.dependencies.DashHandler),this.system.mapSingleton("manifestExt",c.dependencies.DashManifestExtensions),this.system.mapSingleton("metricsExt",d.dependencies.MetricsExtensions),this.system.mapSingleton("timelineConverter",c.dependencies.TimelineConverter),this.system.mapClass("dashParser",c.dependencies.DashParser),u.dependencies.MssParser&&this.system.mapClass("mssParser",u.dependencies.MssParser),l.dependencies.HlsParser&&(this.system.mapClass("hlsParser",l.dependencies.HlsParser),this.system.mapSingleton("hlsDemux",l.dependencies.HlsDemux)),this.system.mapClass("hlsStream",l.dependencies.HlsStream),this.system.mapSingleton("contextManager",d.modules.ContextManager),this.system.mapHandler("setContext","contextManager","setContext")}}},d.modules.ContextManager=function(){"use strict";return{system:void 0,debug:void 0,setContext:function(e){this.system.autoMapOutlets=!0,"MSS"===e?(this.system.mapClass("mp4Processor",d.dependencies.Mp4Processor),this.system.mapClass("indexHandler",u.dependencies.MssHandler),this.system.mapClass("fragmentController",u.dependencies.MssFragmentController),this.system.mapClass("mssFragmentInfoController",u.dependencies.MssFragmentInfoController)):"HLS"===e?(this.system.mapClass("mp4Processor",d.dependencies.Mp4Processor),this.system.mapClass("fragmentController",l.dependencies.HlsFragmentController),this.system.mapClass("indexHandler",l.dependencies.HlsHandler)):(this.system.mapClass("fragmentController",d.dependencies.FragmentController),this.system.mapClass("indexHandler",c.dependencies.DashHandler))}}},d.modules.ContextManager.prototype={constructor:d.modules.ContextManager},d.utils.Debug=function(){"use strict";Date.prototype.HHMMSSmmm=function(){var e=this.getHours().toString(),t=this.getMinutes().toString(),n=this.getSeconds().toString(),r=this.getMilliseconds().toString(),i=e[1]?e:"0"+e[0],o=t[1]?t:"0"+t[0],a=n[1]?n:"0"+n[0],s=r[2]?r:"0"+(r[1]?r:"0"+r[0]);return i+":"+o+":"+a+"."+s},Date.prototype.MMSSmmm=function(){var e=this.getMinutes().toString(),t=this.getSeconds().toString(),n=this.getMilliseconds().toString(),r=e[1]?e:"0"+e[0],i=t[1]?t:"0"+t[0],o=n[2]?n:"0"+(n[1]?n:"0"+n[0]);return r+":"+i+"."+o};var e=function(){this.logArray=[],this.showLevel=!0};e.prototype.error=e.prototype.warn=e.prototype.info=e.prototype.debug=function(e){this.logArray.push(e)},e.prototype.getLogs=function(){return this.logArray};var t=0,n=1,r=2,i=3,o=4,a=4,s=0,u=!0,l=!1,c=new Date,d=console,f=function(e,t){if(e<=m()){var a=h(e,t);switch(e){case n:d.error(a);break;case r:d.warn(a);break;case i:d.info(a);break;case o:d.debug(a);break}}},h=function(e,t){var n="",r=null;return u&&(r=new Date,n+="["+r.HHMMSSmmm()+"]"),d&&d.showLevel&&(n+="["+p(e)+"]"),l&&(n+="["+new Date(r-c).MMSSmmm()+"]"),Array.apply(null,t).forEach((function(e){n+=e+" "})),n},p=function(e){switch(e){case n:return"ERROR";case r:return"WARN";case i:return"INFO";case o:return"DEBUG";default:return""}},m=function(){return s},g=function(){return d};return{NONE:t,ERROR:n,WARN:r,INFO:i,DEBUG:o,ALL:a,getLevel:m,getLogger:g,setLevel:function(e){s=e},setLogger:function(t){switch(t){case"log4javascript":var n=new log4javascript.PopUpAppender,r=new log4javascript.PatternLayout("%d{HH:mm:ss.SSS} %-5p - %m%n");n.setLayout(r),d.addAppender(n),d.setLevel(log4javascript.Level.ALL),d.initialized=!0;break;case"memory":d=new e;break;case"console":d=console;break;default:d=null}},error:function(){f.call(this,n,arguments)},warn:function(){f.call(this,r,arguments)},info:function(){f.call(this,i,arguments)},log:function(){f.call(this,o,arguments)}}},d.utils.DebugController=function(){"use strict";var e={isInDebug:!1,level:0,loggerType:"console"},t="",n=function(n){!0!==n.altKey||!0!==n.ctrlKey||!0!==n.shiftKey||68!==n.keyCode&&90!==n.keyCode||(e.isInDebug?(console.log("hasplayer.js debug OFF (v"+t+")"),e.isInDebug=!1,90===n.keyCode?(r(this.debug.getLogger().getLogs()),this.debug.setLevel(e.level),this.debug.setLogger(e.loggerType)):this.debug.setLevel(0)):(console.log("hasplayer.js debug ON (v"+t+")"),e.isInDebug=!0,e.level=this.debug.getLevel(),this.debug.setLevel(68===n.keyCode?4:3),this.debug.setLogger(68===n.keyCode?"console":"memory")))},r=function(e){if(e&&e.length>0){var t="hasplayer_logs.txt",n=JSON.stringify(e,null,"\r\n"),r=new Blob([n],{type:"text/json"});if(navigator.msSaveBlob)navigator.msSaveBlob(r,t);else{var i=document.createEvent("MouseEvents"),o=document.createElement("a");o.download=t,o.href=window.URL.createObjectURL(r),o.dataset.downloadurl=["text/json",o.download,o.href].join(":"),i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(i)}}};return{debug:void 0,setup:function(){window.addEventListener("keydown",n.bind(this))},init:function(e){t=e}}},d.utils.DebugController.prototype={constructor:d.utils.DebugController},d.dependencies.ErrorHandler=function(){"use strict";return{eventBus:void 0,debug:void 0,sendWarning:function(e,t,n){this.debug.warn("[Warn] Code: "+e+", Message: "+t+", Data: "+JSON.stringify(n,null,"\t")),this.eventBus.dispatchEvent({type:"warning",data:{code:e,message:t,data:n}})},sendError:function(e,t,n){this.debug.error("[Error] Code: "+e+", Message: "+t+", Data: "+JSON.stringify(n,null,"\t")),this.eventBus.dispatchEvent({type:"error",data:{code:e,message:t,data:n}})}}},d.dependencies.ErrorHandler.prototype={constructor:d.dependencies.ErrorHandler},d.dependencies.ErrorHandler.prototype.INTERNAL_ERROR="INTERNAL_ERROR",d.dependencies.ErrorHandler.prototype.MEDIA_ERR_ABORTED="MEDIA_ERR_ABORTED",d.dependencies.ErrorHandler.prototype.MEDIA_ERR_NETWORK="MEDIA_ERR_NETWORK",d.dependencies.ErrorHandler.prototype.MEDIA_ERR_DECODE="MEDIA_ERR_DECODE",d.dependencies.ErrorHandler.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED="MEDIA_ERR_SRC_NOT_SUPPORTED",d.dependencies.ErrorHandler.prototype.MEDIA_ERR_ENCRYPTED="MEDIA_ERR_ENCRYPTED",d.dependencies.ErrorHandler.prototype.CAPABILITY_ERR_MEDIASOURCE="CAPABILITY_ERR_MEDIASOURCE",d.dependencies.ErrorHandler.prototype.CAPABILITY_ERR_MEDIAKEYS="CAPABILITY_ERR_MEDIAKEYS",d.dependencies.ErrorHandler.prototype.MEDIA_ERR_CREATE_MEDIASOURCE="MEDIA_ERR_CREATE_MEDIASOURCE",d.dependencies.ErrorHandler.prototype.MEDIA_ERR_CODEC_UNSUPPORTED="MEDIA_ERR_CODEC_UNSUPPORTED",d.dependencies.ErrorHandler.prototype.MEDIA_ERR_CREATE_SOURCEBUFFER="MEDIA_ERR_CREATE_SOURCEBUFFER",d.dependencies.ErrorHandler.prototype.MEDIA_ERR_APPEND_SOURCEBUFFER="MEDIA_ERR_APPEND_SOURCEBUFFER",d.dependencies.ErrorHandler.prototype.MEDIA_ERR_REMOVE_SOURCEBUFFER="MEDIA_ERR_REMOVE_SOURCEBUFFER",d.dependencies.ErrorHandler.prototype.MANIFEST_ERR_PARSE="MANIFEST_ERR_PARSE",d.dependencies.ErrorHandler.prototype.MANIFEST_ERR_NO_STREAM="MANIFEST_ERR_NO_STREAM",d.dependencies.ErrorHandler.prototype.MANIFEST_ERR_NO_VIDEO="MANIFEST_ERR_NO_VIDEO",d.dependencies.ErrorHandler.prototype.MANIFEST_ERR_NO_AUDIO="MANIFEST_ERR_NO_AUDIO",d.dependencies.ErrorHandler.prototype.MANIFEST_ERR_NO_TEXT="MANIFEST_ERR_NO_TEXT",d.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_MANIFEST="DOWNLOAD_ERR_MANIFEST",d.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_SIDX="DOWNLOAD_ERR_SIDX",d.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_INIT="DOWNLOAD_ERR_INIT",d.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_CONTENT="DOWNLOAD_ERR_CONTENT",d.dependencies.ErrorHandler.prototype.MSS_NO_TFRF="MSS_NO_TFRF",d.dependencies.ErrorHandler.prototype.HLS_INVALID_PACKET_ERROR="HLS_INVALID_PACKET_ERROR",d.dependencies.ErrorHandler.prototype.HLS_DEMUX_ERROR="HLS_DEMUX_ERROR",d.dependencies.ErrorHandler.prototype.HLS_INVALID_KEY_ERROR="HLS_INVALID_KEY_ERROR",d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR="MEDIA_KEYERR",d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_UNKNOWN="MEDIA_KEYERR_UNKNOWN",d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_CLIENT="MEDIA_KEYERR_CLIENT",d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_SERVICE="MEDIA_KEYERR_SERVICE",d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_OUTPUT="MEDIA_KEYERR_OUTPUT",d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_HARDWARECHANGE="MEDIA_KEYERR_HARDWARECHANGE",d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_DOMAIN="MEDIA_KEYERR_DOMAIN",d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_EXPIRED="MEDIA_KEYERR_EXPIRED",d.dependencies.ErrorHandler.prototype.MEDIA_KEYSYSERR_ACCESS_DENIED="MEDIA_KEYSYSERR_ACCESS_DENIED",d.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_URL_LICENSER_UNKNOWN="MEDIA_KEYMESSERR_URL_LICENSER_UNKNOWN",d.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_NO_CHALLENGE="MEDIA_KEYMESSERR_NO_CHALLENGE",d.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_LICENSER_ERROR="MEDIA_KEYMESSERR_LICENSER_ERROR",d.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_NO_SESSION="MEDIA_KEYMESSERR_NO_SESSION",d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_SERVER_CERTIFICATE="MEDIA_KEYERR_SERVER_CERTIFICATE",d.dependencies.ErrorHandler.prototype.DOM_ERR_INDEX_SIZE=1,d.dependencies.ErrorHandler.prototype.DOM_ERR_HIERARCHY_REQUEST=3,d.dependencies.ErrorHandler.prototype.DOM_ERR_WRONG_DOCUMENT=4,d.dependencies.ErrorHandler.prototype.DOM_ERR_INVALID_CHARACTER=5,d.dependencies.ErrorHandler.prototype.DOM_ERR_NO_MODIFICATION_ALLOWED=7,d.dependencies.ErrorHandler.prototype.DOM_ERR_NOT_FOUND=8,d.dependencies.ErrorHandler.prototype.DOM_ERR_NOT_SUPPORTED=9,d.dependencies.ErrorHandler.prototype.DOM_ERR_INVALID_STATE=11,d.dependencies.ErrorHandler.prototype.DOM_ERR_SYNTAX=12,d.dependencies.ErrorHandler.prototype.DOM_ERR_INVALID_MODIFICATION=13,d.dependencies.ErrorHandler.prototype.DOM_ERR_NAMESPACE=14,d.dependencies.ErrorHandler.prototype.DOM_ERR_INVALID_ACCESS=15,d.dependencies.ErrorHandler.prototype.DOM_ERR_SECURITY=18,d.dependencies.ErrorHandler.prototype.DOM_ERR_NETWORK=19,d.dependencies.ErrorHandler.prototype.DOM_ERR_ABORT=20,d.dependencies.ErrorHandler.prototype.DOM_ERR_URL_MISMATCH=21,d.dependencies.ErrorHandler.prototype.DOM_ERR_QUOTA_EXCEEDED=22,d.dependencies.ErrorHandler.prototype.DOM_ERR_TIMEOUT=23,d.dependencies.ErrorHandler.prototype.DOM_ERR_INVALID_NODE_TYPE=24,d.dependencies.ErrorHandler.prototype.DOM_ERR_DATA_CLONE=25,d.utils.EventBus=function(){"use strict";var e,t=function(t,n){var r=(n?"1":"0")+t;return r in e||(e[r]=[]),e[r]},n=function(){e={}};return n(),{addEventListener:function(e,n,r){var i=t(e,r),o=i.indexOf(n);-1===o&&i.push(n)},removeEventListener:function(e,n,r){var i=t(e,r),o=i.indexOf(n);-1!==o&&i.splice(o,1)},dispatchEvent:function(e){var n=t(e.type,!1).slice(),r=0;for(r=0;r<n.length;r+=1)n[r].call(this,e);return!e.defaultPrevented}}},d.dependencies.EventController=function(){"use strict";var e=[],t=[],n=[],r=null,i=100,o=i/1e3,a="urn:mpeg:dash:event:2012",s=1,u=function(){null!==r&&(clearInterval(r),r=null),e=null,t=null,n=null},l=function(){null!==r&&(clearInterval(r),r=null)},c=function(){var e=this;e.debug.log("[EventController] Start Event Controller"),isNaN(i)||(r=setInterval(h.bind(this),i))},d=function(t){var n=this;e=[],t&&t.length>0&&(e=t),n.debug.log("[EventController] Added "+t.length+" inline events")},f=function(e){var n,r=this,i=0;for(i=0;i<e.length;i++)n=e[i],t[n.id]=n,r.debug.log("[EventController] Add inband event with id "+n.id)},h=function(){p.call(this,t),p.call(this,e),m.call(this)},p=function(e){var t,r,i=this,u=this.videoModel.getCurrentTime(),l=0;if(e)for(l=0;l<e.length;l++)r=e[l],void 0!==r&&(t=r.presentationTime/r.eventStream.timescale,(0===t||t<=u&&t+o>u)&&(i.debug.log("[EventController] Start Event at "+u),r.duration>0&&n.push(r),r.eventStream.schemeIdUri===a&&r.eventStream.value===s&&g.call(this),e.splice(l,1)))},m=function(){var e,t,r=this,i=0;if(n)for(e=this.videoModel.getCurrentTime(),i=0;i<n.length;i++)t=n[i],null!==t&&(t.duration+t.presentationTime)/t.eventStream.timescale<e&&(r.debug.log("[EventController] Remove Event at time "+e),t=null,n.splice(i,1))},g=function(){var e=this,t=e.manifestModel.getValue(),n=t.mpdUrl;t.hasOwnProperty("Location")&&(n=t.Location),e.debug.log("[EventController] Refresh manifest @ "+n),e.manifestLoader.load(n).then((function(t){e.manifestModel.setValue(t)}))};return{manifestModel:void 0,manifestLoader:void 0,debug:void 0,system:void 0,videoModel:void 0,addInlineEvents:d,addInbandEvents:f,reset:u,clear:l,start:c}},d.dependencies.EventController.prototype={constructor:d.dependencies.EventController},d.dependencies.FragmentController=function(){"use strict";var e=[],n=function(t){var n=e.length,r=0;for(r=0;r<n;r+=1)if(e[r].getContext()===t)return e[r];return null},r=function(){var t=!0,n=e.length,r=0;for(r=0;r<n;r+=1)if(!e[r].isReady()){t=!1;break}return t},i=function(){var t=0;for(t=0;t<e.length;t+=1)e[t].executeCurrentRequest()};return{system:void 0,debug:void 0,process:function(e){var n=null;return null!==e&&void 0!==e&&e.byteLength>0&&(n=new Uint8Array(e)),t.when(n)},attachBufferController:function(t){var r;return t?(r=n(t),r||(r=this.system.getObject("fragmentModel"),r.setContext(t),e.push(r)),r):null},detachBufferController:function(t){var n=e.indexOf(t);n>-1&&e.splice(n,1)},onBufferControllerStateChange:function(){r()&&i.call(this)},isFragmentLoadedOrPending:function(e,t){var r,i=n(e);return!!i&&(r=i.isFragmentLoadedOrPending(t),r)},getPendingRequests:function(e){var t=n(e);return t?t.getPendingRequests():null},getLoadingRequests:function(e){var t=n(e);return t?t.getLoadingRequests():null},isInitializationRequest:function(e){return e&&e.type&&"initialization segment"===e.type.toLowerCase()},getLoadingTime:function(e){var t=n(e);return t?t.getLoadingTime():null},getExecutedRequestForTime:function(e,t){return e?e.getExecutedRequestForTime(t):null},removeExecutedRequest:function(e,t){e&&e.removeExecutedRequest(t)},removeExecutedRequestsBeforeTime:function(e,t){e&&e.removeExecutedRequestsBeforeTime(t)},clearExecutedRequests:function(e){e&&e.clearExecutedRequests()},cancelPendingRequestsForModel:function(e){e&&e.cancelPendingRequests()},abortRequestsForModel:function(e){e&&e.abortRequests()},prepareFragmentForLoading:function(e,t,r,i,o,a){var s=n(e);return s&&t?(s.addRequest(t),s.setCallbacks(r,i,o,a),!0):null}}},d.dependencies.FragmentController.prototype={constructor:d.dependencies.FragmentController},d.dependencies.FragmentLoader=function(){"use strict";var e,n=2,r=500,i=n,o=r,a=0,s=[],u=function(e){var t=new XMLHttpRequest,n=!1;t.open("HEAD",e.url,!0),t.onload=function(){t.status<200||t.status>399||(n=!0,e.deferred.resolve(e))},t.onloadend=t.onerror=function(){n||e.deferred.reject(t)},t.send()},l=function(n){var r=t.defer(),i=new XMLHttpRequest,o=null,a=!0,u=!0,l=null,c=this;return s.push(i),n.requestStartDate=new Date,o=c.metricsModel.addHttpRequest(n.streamType,null,n.type,n.url,null,n.range,n.requestStartDate,null,null,null,null,n.duration,n.startTime,n.quality),c.metricsModel.appendHttpTrace(o,n.requestStartDate,n.requestStartDate.getTime()-n.requestStartDate.getTime(),[0]),l=n.requestStartDate,i.open("GET",c.tokenAuthentication.addTokenAsQueryArg(n.url),!0),i.responseType="arraybuffer",i=c.tokenAuthentication.setTokenInRequestHeader(i),n.range&&i.setRequestHeader("Range","bytes="+n.range),i.onprogress=function(e){var t=new Date;a&&(a=!1,(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(n.firstByteDate=t,o.tresponse=t)),e.lengthComputable&&(n.bytesLoaded=e.loaded,n.bytesTotal=e.total),c.metricsModel.appendHttpTrace(o,t,t.getTime()-l.getTime(),[n.bytesLoaded?n.bytesLoaded:0]),l=t,c.notify(d.dependencies.FragmentLoader.eventList.ENAME_LOADING_PROGRESS,{request:n,httpRequestMetrics:o,lastTraceTime:l})},i.onload=function(){if(!(i.status<200||i.status>399)){u=!1;var t,a,s=new Date,d=i.response,f=d?d.byteLength:0;n.firstByteDate||(n.firstByteDate=n.requestStartDate),n.requestEndDate=s,t=n.firstByteDate.getTime()-n.requestStartDate.getTime(),a=n.requestEndDate.getTime()-n.firstByteDate.getTime(),c.debug.log("[FragmentLoader]["+e+"] Loaded: "+n.url+" ("+i.status+", "+t+"ms, "+a+"ms)"),o.tresponse=n.firstByteDate,o.tfinish=n.requestEndDate,o.responsecode=i.status,o.bytesLength=f,c.metricsModel.appendHttpTrace(o,s,s.getTime()-l.getTime(),[f]),l=s,r.resolve({data:d,request:n})}},i.onabort=function(){var e,t,r=new Date;i.aborted=!0,0!==o.trace.length&&(e=o.trace[o.trace.length-1],t=e.b[0],n.requestEndDate=r,o.tresponse=n.firstByteDate,o.tfinish=n.requestEndDate,o.responsecode=i.status,o.bytesLength=t)},i.onloadend=i.onerror=function(){-1!==s.indexOf(i)&&(s.splice(s.indexOf(i),1),u&&(u=!1,o.responsecode=i.status,r.reject(i)))},c.debug.log("[FragmentLoader]["+e+"] Load: "+n.url),i.send(),r.promise},c=function(e,t){var n=this;l.call(n,e).then((function(e){a=0,t.resolve(e)}),(function(r){r.aborted?(e.status=0,e.aborted=!0,t.reject(e)):a>=i?(a=0,e.status=r.status,t.reject(e)):setTimeout((function(){a++,c.call(n,e,t)}),o)}))};return{metricsModel:void 0,debug:void 0,tokenAuthentication:void 0,config:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,setup:function(){i=this.config.getParam("FragmentLoader.RetryAttempts","number",n),o=this.config.getParam("FragmentLoader.RetryInterval","number",r)},setType:function(t){e=t},load:function(e){var n=t.defer();return"Initialization Segment"===e.type&&e.data?n.resolve(e,{data:e.data}):c.call(this,e,n),n.promise},abort:function(){var t=0;for(t=0;t<s.length;t+=1)this.debug.log("[FragmentLoader]["+e+"] Abort XHR "+(s[t].responseURL?s[t].responseURL:"")),s[t].abort()},checkForExistence:function(e){return e?(e.deferred=t.defer(),u.call(this,e),e.deferred.promise):t.when(null)}}},d.dependencies.FragmentLoader.prototype={constructor:d.dependencies.FragmentLoader},d.dependencies.FragmentLoader.eventList={ENAME_LOADING_PROGRESS:"loadingProgress"},d.dependencies.FragmentModel=function(){"use strict";var e,t,n,r,i,o=[],a=[],s=[],u=2,l=function(i){var a,u,l=this;t.call(e,i),a=function(t,r){s.splice(s.indexOf(t),1),o.push(t),n.call(e,t,r),t.deferred=null},u=function(t){s.splice(s.indexOf(t),1),r.call(e,t),t.deferred=null},l.fragmentLoader.load(i).then(a.bind(e,i),u.bind(e,i))},c=function(e,t){var n=function(e,n){return e[t]<n[t]?-1:e[t]>n[t]?1:0};e.sort(n)},d=function(e){var t=o.indexOf(e);-1!==t&&o.splice(t,1)};return{system:void 0,debug:void 0,fragmentLoader:void 0,setContext:function(t){e=t},getContext:function(){return e},setType:function(e){e,this.fragmentLoader&&this.fragmentLoader.setType(e)},addRequest:function(e){if(e){if(this.isFragmentLoadedOrPending(e))return;a.push(e),c.call(this,a,"index")}},setCallbacks:function(e,o,a,s){t=e,i=s,r=a,n=o},isFragmentLoadedOrPending:function(e){var t,n=!1,r=0;for(r=0;r<o.length;r++)if(t=o[r],e.startTime===t.startTime||"complete"===t.action&&e.action===t.action){if(e.url===t.url){n=!0;break}o.splice(r,1),r--}if(!n)for(r=0;r<a.length;r++)t=a[r],e.url===t.url&&e.startTime===t.startTime&&(n=!0);if(!n)for(r=0;r<s.length;r++)t=s[r],e.url===t.url&&e.startTime===t.startTime&&(n=!0);return n},isReady:function(){return e.isReady()},getPendingRequests:function(){return a},getLoadingRequests:function(){return s},getLoadingTime:function(){var e,t,n=0;for(t=o.length-1;t>=0;t-=1)if(e=o[t],e.requestEndDate instanceof Date&&e.firstByteDate instanceof Date){n=e.requestEndDate.getTime()-e.firstByteDate.getTime();break}return n},getExecutedRequestForTime:function(e){var t,n=o.length-1,r=NaN,i=NaN,a=null;for(t=n;t>=0;t-=1)if(a=o[t],r=a.startTime,i=r+a.duration,!isNaN(r)&&!isNaN(i)&&e>r&&e<i)return a;return null},getExecutedRequestForQualityAndIndex:function(e,t){var n,r=o.length-1,i=null;for(n=r;n>=0;n-=1)if(i=o[n],i.quality===e&&i.index===t)return i;return null},removeExecutedRequest:function(e){d.call(this,e)},removeExecutedRequestsBeforeTime:function(e){var t,n=o.length-1,r=NaN,i=null;for(t=n;t>=0;t-=1)i=o[t],r=i.startTime,!isNaN(r)&&r<e&&d.call(this,i)},clearExecutedRequests:function(){o=[]},cancelPendingRequests:function(){a=[]},abortRequests:function(){this.fragmentLoader.abort(),s=[]},executeCurrentRequest:function(){var t,n=this;if(0!==a.length&&!(s.length>=u))switch(t=a.shift(),t.action){case"complete":o.push(t),i.call(e,t);break;case"download":s.push(t),l.call(n,t);break;default:this.debug.log("Unknown request action."),t.deferred?(t.deferred.reject(),t.deferred=null):r.call(e,t)}}}},d.dependencies.FragmentModel.prototype={constructor:d.dependencies.FragmentModel},d.dependencies.ManifestLoader=function(){"use strict";var e=2,n=500,r=e,i=n,o=null,a=function(e){var t,n="",r=0;if(e.length<1)return e;if(15360!==e.charCodeAt(0))return e;for(r=0;r<e.length;r+=1)t=e.charCodeAt(r),n+=String.fromCharCode((255&t)<<8|(65280&t)>>8);return n},s=function(e){var t=null;return-1!==e.indexOf("/")&&(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),t=e.substring(0,e.lastIndexOf("/")+1)),t},u=function(){null!==o&&o.abort(),this.parser.abort()},l=function(e){var n=s(e),u=t.defer(),l=this;return o=new d.dependencies.XHRLoader,o.initialize(null,r,i),o.load(e).then((function(t){t.responseURL&&(l.debug.log("[ManifestLoader] Redirect URL: "+t.responseURL),n=s(t.responseURL)),l.tokenAuthentication.checkRequestHeaderForToken(t),l.metricsModel.addHttpRequest("stream",null,"MPD",e,null,null,t.startDate,t.endDate,t.status,null,null),l.parser.parse(a(t.responseText),n).then((function(n){n?(n.mpdUrl=e,n.mpdLoadedTime=t.endDate,l.metricsModel.addManifestUpdate("stream",n.type,t.startDate,t.endDate,n.availabilityStartTime),u.resolve(n)):u.reject()}),(function(t){t&&t.name&&t.message?u.reject(t):(l.debug.error("[ManifestLoader] Manifest parsing error"),u.reject({name:d.dependencies.ErrorHandler.prototype.MANIFEST_ERR_PARSE,message:"Failed to parse manifest",data:{url:e}}))}))}),(function(t){!t||t.aborted?u.reject():(l.metricsModel.addHttpRequest("stream",null,"MPD",e,null,null,t.startDate,t.endDate,t.status,null,null),u.reject({name:d.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_MANIFEST,message:"Failed to download manifest",data:{url:e,status:t.status}}))})),u.promise};return{debug:void 0,parser:void 0,config:void 0,metricsModel:void 0,tokenAuthentication:void 0,setup:function(){r=this.config.getParam("ManifestLoader.RetryAttempts","number",e),i=this.config.getParam("ManifestLoader.RetryInterval","number",n)},load:l,abort:u}},d.dependencies.ManifestLoader.prototype={constructor:d.dependencies.ManifestLoader},d.dependencies.ManifestUpdater=function(){"use strict";var e,n=NaN,r=null,i=!1,o=function(){null!==r&&(clearInterval(r),r=null)},a=function(){o.call(this),isNaN(n)||(this.debug.log("Refresh manifest in "+n+" seconds."),r=setTimeout(u.bind(this),Math.min(1e3*n,Math.pow(2,31)-1),this))},s=function(){var e,t,r=this,i=r.manifestModel.getValue();void 0!==i&&null!==i&&(t=r.manifestExt.getRefreshDelay(i),e=((new Date).getTime()-i.mpdLoadedTime.getTime())/1e3,n=Math.max(t-e,0),a.call(r))},u=function(){var n,r,o=this;t.when(!e||e.promise).then((function(){e=t.defer(),n=o.manifestModel.getValue(),r=n.mpdUrl,n.hasOwnProperty("Location")&&(r=n.Location),o.manifestLoader.load(r).then((function(e){o.manifestModel.setValue(e),o.debug.log("Manifest has been refreshed."),i||s.call(o)}))}))},l=function(){e&&e.resolve()};return{debug:void 0,system:void 0,manifestModel:void 0,manifestExt:void 0,manifestLoader:void 0,setup:function(){s.call(this),this.system.mapHandler("streamsComposed",void 0,l.bind(this))},start:function(){i=!1,s.call(this)},stop:function(){i=!0,o.call(this)}}},d.dependencies.ManifestUpdater.prototype={constructor:d.dependencies.ManifestUpdater},d.models.ManifestModel=function(){"use strict";var e=null;return{system:void 0,eventBus:void 0,getValue:function(){return e},setValue:function(t){e=t,e&&this.system.notify("manifestUpdated"),null!==e&&this.eventBus.dispatchEvent({type:"manifestLoaded",data:t})}}},d.models.ManifestModel.prototype={constructor:d.models.ManifestModel},d.dependencies.MediaSourceExtensions=function(){},d.dependencies.MediaSourceExtensions.prototype={constructor:d.dependencies.MediaSourceExtensions,createMediaSource:function(){"use strict";var e="WebKitMediaSource"in window,t="MediaSource"in window;return t?new MediaSource:e?new WebKitMediaSource:null},attachMediaSource:function(e,t){"use strict";return t.setSource(window.URL.createObjectURL(e)),!0},detachMediaSource:function(e){"use strict";return e.setSource(null),!0},setDuration:function(e,t){"use strict";var n,r=!1;if("open"!==e.readyState)return e.duration;for(n=0;n<e.sourceBuffers.length;n++)if(e.sourceBuffers[n].updating){r=!0;break}return r||(e.duration=t),e.duration},signalEndOfStream:function(e){"use strict";var t=e.sourceBuffers,n=t.length,r=0;if("open"===e.readyState){for(r;r<n;r++){if(t[r].updating)return;if(0===t[r].buffered.length)return}return e.endOfStream(),!0}}},d.dependencies.MetricsExtensions=function(){"use strict";var e={42:"Baseline","4D":"Main",58:"Extended",64:"High"},t=function(e,t){var n,r,i,o,a,s,u,l;for(s=0;s<e.length;s+=1)for(n=e[s],i=n.AdaptationSet_asArray,u=0;u<i.length;u+=1)for(r=i[u],a=r.Representation_asArray,l=0;l<a.length;l+=1)if(o=a[l],t===o.id)return o;return null},n=function(e,t){var n=!1;return"video"===t?(this.manifestExt.getIsVideo(e),"video"===e.type&&(n=!0)):"audio"===t?(this.manifestExt.getIsAudio(e),"audio"===e.type&&(n=!0)):"text"===t?(this.manifestExt.getIsText(e),"text"===e.type&&(n=!0)):n=!1,n},r=d.utils.copyMethods(c.dependencies.DashMetricsExtensions);return r.config=void 0,r.getDuration=function(){var e=this,t=e.manifestModel.getValue(),n=t?t.Period.duration:null;return n!==1/0?n:-1},r.getFormatForType=function(e){var t,n=this,r=n.manifestModel.getValue(),i=0;if(!r)return null;for(i=0;i<r.Period.AdaptationSet.length;i++)if(t=r.Period.AdaptationSet[i],t.type===e)return t.mimeType;return null},r.getCodecForType=function(e){var t,n=this,r=n.manifestModel.getValue(),i=0;if(!r)return null;for(i=0;i<r.Period.AdaptationSet.length;i++)if(t=r.Period.AdaptationSet[i],t.type===e||t.contentType===e)return t.Representation_asArray[0].codecs;return null},r.getVideoWidthForRepresentation=function(e){var n,r,i=this,o=i.manifestModel.getValue();return o?(r=o.Period_asArray,n=t.call(i,r,e),null===n?null:n.width):null},r.getVideoHeightForRepresentation=function(e){var n,r,i=this,o=i.manifestModel.getValue();return o?(r=o.Period_asArray,n=t.call(i,r,e),null===n?null:n.height):null},r.getCodecsForRepresentation=function(e){var n,r=this,i=r.manifestModel.getValue(),o=i.Period_asArray;return i?(n=t.call(r,o,e),null===n?null:n.codecs):null},r.getH264ProfileLevel=function(t){if(t.indexOf("avc1")<0)return"";var n=e[t.substr(5,2)],r=parseInt(t.substr(9,2),16)/10;return n+"@"+r.toString()},r.getBitratesForType=function(e,t){var r,i,o,a,s,u,l,c,d=this,f=d.manifestModel.getValue(),h=null,p=[];if(!f)return null;if(t)h=t;else for(r=f.Period_asArray,o=0;o<r.length;o+=1)for(i=r[o],a=i.AdaptationSet_asArray,l=0;l<a.length;l+=1)if(h=a[l],n.call(d,a[l],e)){h=a[l];break}if(null!==h)for(h=d.manifestExt.processAdaptation(h),u=h.Representation_asArray,c=0;c<u.length;c+=1)s=u[c],p.push(s.bandwidth);return p},r.getBitratesWithResolutionForType=function(e){var t,r,i,o,a,s,u,l,c,d=this,f=d.manifestModel.getValue(),h=[];if(!f)return null;for(t=f.Period_asArray,i=0;i<t.length;i+=1)for(r=t[i],a=r.AdaptationSet_asArray,l=0;l<a.length;l+=1)if(o=a[l],n.call(d,o,e)){for(o=d.manifestExt.processAdaptation(o),u=o.Representation_asArray,c=0;c<u.length;c+=1){s=u[c];var p={bitrate:s.bandwidth,width:s.width,height:s.height};h.push(p)}return h}return h},r},d.dependencies.MetricsExtensions.prototype={constructor:d.dependencies.MetricsExtensions},d.models.MetricsModel=function(){"use strict";return{system:void 0,eventBus:void 0,config:void 0,streamMetrics:{},metricsChanged:function(){this.eventBus.dispatchEvent({type:"metricsChanged",data:{}})},metricChanged:function(e){this.eventBus.dispatchEvent({type:"metricChanged",data:{stream:e}}),this.metricsChanged()},metricUpdated:function(e,t,n){this.eventBus.dispatchEvent({type:"metricUpdated",data:{stream:e,metric:t,value:n}}),this.metricChanged(e)},metricAdded:function(e,t,n){this.eventBus.dispatchEvent({type:"metricAdded",data:{stream:e,metric:t,value:n}}),this.metricChanged(e)},clearAllCurrentMetrics:function(){var e=this;for(var t in this.streamMetrics)if(this.streamMetrics.hasOwnProperty(t)&&"stream"===t)delete this.streamMetrics[t];else{var n=this.config.getParamFor(t,"ABR.keepBandwidthCondition","boolean",!0);for(var r in this.streamMetrics[t])!this.streamMetrics[t].hasOwnProperty(r)||"HttpList"===r&&!1!==n||(this.streamMetrics[t][r]=[])}this.metricsChanged.call(e)},getReadOnlyMetricsFor:function(e){return this.streamMetrics.hasOwnProperty(e)?this.streamMetrics[e]:null},getMetricsFor:function(e){var t;return this.streamMetrics.hasOwnProperty(e)?t=this.streamMetrics[e]:(t=this.system.getObject("metrics"),this.streamMetrics[e]=t),t},addTcpConnection:function(e,t,n,r,i,o){var a=new d.vo.metrics.TCPConnection;return a.tcpid=t,a.dest=n,a.topen=r,a.tclose=i,a.tconnect=o,this.getMetricsFor(e).TcpList.push(a),this.metricAdded(e,"TcpConnection",a),a},addHttpRequest:function(e,t,n,r,i,o,a,s,u,l,c,f,h,p){var m=new d.vo.metrics.HTTPRequest,g=this.getMetricsFor(e).HttpList;return m.stream=e,m.tcpid=t,m.type=n,m.url=r,m.actualurl=i,m.range=o,m.trequest=a,m.tresponse=s,m.tfinish=u,m.responsecode=l,m.interval=c,m.mediaduration=f,m.startTime=h,m.quality=p,g.push(m),this.metricAdded(e,"HttpRequest",m),g.length>10&&g.shift(),m},appendHttpTrace:function(e,t,n,r){var i=new d.vo.metrics.HTTPRequest.Trace;return i.s=t,i.d=n,i.b=r,e.trace.push(i),this.metricUpdated(e.stream,"HttpRequestTrace",e),i},addRepresentationSwitch:function(e,t,n,r,i){var o=new d.vo.metrics.RepresentationSwitch;return o.t=t,o.mt=n,o.to=r,o.lto=i,this.getMetricsFor(e).RepSwitchList.push(o),this.metricAdded(e,"RepresentationSwitch",o),o},addBufferedSwitch:function(e,t,n,r){var i=new d.vo.metrics.BufferedSwitch;return i.mt=t,i.to=n,i.lto=r,this.getMetricsFor(e).BufferedSwitchList.push(i),this.metricAdded(e,"BufferedSwitch",i),i},addState:function(e,t,n,r){var i=this.getMetricsFor(e).State;if(!(i.length>0&&i[i.length-1].current===t)){var o=new d.vo.metrics.State,a=this.getMetricsFor(e).State;return o.current=t,o.position=n,o.reason=r,a.push(o),this.metricAdded(e,"State",o),a.length>10&&a.shift(),o}},addSession:function(e,t,n,r,i){var o=new d.vo.metrics.Session;return o.uri=t,o.loopMode=n?1:0,o.endTime=r,o.playerType=i,this.metricAdded(e,"Session",o),o},addCondition:function(e,t,n,r,i,o){var a=new d.vo.metrics.Condition;return a.isFullScreen=t,a.windowSize=n+"x"+r,a.fps=o,a.droppedFrames=i,this.metricAdded(e,"Condition",a),a},addMetaData:function(){this.metricAdded(null,"ManifestReady",null)},addBufferLevel:function(e,t,n){var r=new d.vo.metrics.BufferLevel,i=this.getMetricsFor(e).BufferLevel;return r.t=t,r.level=Number(n.toFixed(3)),i.push(r),this.metricAdded(e,"BufferLevel",r),i.length>10&&i.shift(),r},addDVRInfo:function(e,t,n){var r=new d.vo.metrics.DVRInfo,i=this.getMetricsFor(e).DVRInfo;return r.t=t,r.range=n,i.push(r),this.metricAdded(e,"DVRInfo",r),i.length>10&&i.shift(),r},addDroppedFrames:function(e,t){var n=new d.vo.metrics.DroppedFrames,r=this.getMetricsFor(e).DroppedFrames;return n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,n.decodedFrameCount=t.totalVideoFrames,r.length>0&&r[r.length-1]===n?r[r.length-1]:(r.push(n),this.metricAdded(e,"DroppedFrames",n),n)},addPlaybackQuality:function(e,t,n,r){var i=new d.vo.metrics.PlaybackQuality,o=this.getMetricsFor(e).PlaybackQuality;return i.t=t,i.mt=r,i.droppedFrames=n.droppedVideoFrames,i.totalVideoFrames=n.totalVideoFrames,o.length>0&&i.droppedFrames===o[o.length-1].droppedFrames&&i.totalVideoFrames===o[o.length-1].totalVideoFrames?o[o.length-1]:(o.push(i),this.metricAdded(e,"PlaybackQuality",i),o.length>10&&o.shift(),i)},addVideoResolution:function(e,t,n,r,i){var o=new d.vo.metrics.VideoResolution,a=this.getMetricsFor(e).VideoResolution;return o.t=t,o.mt=i,o.width=n,o.height=r,a.length>0&&o.width===a[a.length-1].width&&o.height===a[a.length-1].height?a[a.length-1]:(a.push(o),this.metricAdded(e,"VideoResolution",o),o)},addManifestUpdate:function(e,t,n,r,i,o,a,s,u,l){var c=new d.vo.metrics.ManifestUpdate,f=this.getMetricsFor("stream");return c.streamType=e,c.type=t,c.requestTime=n,c.fetchTime=r,c.availabilityStartTime=i,c.presentationStartTime=o,c.clientTimeOffset=a,c.currentTime=s,c.buffered=u,c.latency=l,f.ManifestUpdate.push(c),this.metricAdded(e,"ManifestUpdate",c),c},updateManifestUpdateInfo:function(e,t){if(e&&t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);this.metricUpdated(e.streamType,"ManifestUpdate",e)}},addManifestUpdatePeriodInfo:function(e,t,n,r,i){var o=new d.vo.metrics.ManifestUpdate.PeriodInfo;return o.id=t,o.index=n,o.start=r,o.duration=i,e.periodInfo.push(o),this.metricUpdated(e.streamType,"ManifestUpdatePeriodInfo",e),o},addManifestUpdateRepresentationInfo:function(e,t,n,r,i,o,a,s){var u=new d.vo.metrics.ManifestUpdate.RepresentationInfo;return u.id=t,u.index=n,u.periodIndex=r,u.streamType=i,u.startNumber=a,u.segmentInfoType=s,u.presentationTimeOffset=o,e.representationInfo.push(u),this.metricUpdated(e.streamType,"ManifestUpdateRepresentationInfo",e),u},addPlayList:function(e,t,n,r,i){var o=new d.vo.metrics.PlayList,a=this.getMetricsFor(e).PlayList;return o.stream=e,o.start=t,o.mstart=n,o.starttype=r,o.speed=i,a.push(o),this.metricAdded(e,"PlayList",o),a.length>10&&a.shift(),o},appendPlayListTrace:function(e,t,n,r,i,o,a,s){var u=new d.vo.metrics.PlayList.Trace;return u.representationid=t,u.subreplevel=n,u.start=r,u.mstart=i,u.duration=o,u.playbackspeed=a,u.stopreason=s,e&&Array.isArray(e.trace)&&(e.trace.push(u),this.metricUpdated(e.stream,"PlayListTrace",e),e.trace.length>10&&e.trace.shift()),u}}},d.models.MetricsModel.prototype={constructor:d.models.MetricsModel},d.dependencies.Mp4Processor=function(){"use strict";var e=function(e){var t=new _.boxes.MovieHeaderBox,n=e[e.length-1];return t.version=1,t.creation_time=0,t.modification_time=0,t.timescale=n.timescale,t.duration=Math.round(n.duration*n.timescale),t.rate=65536,t.volume=256,t.reserved=0,t.reserved_2=[0,0],t.matrix=[65536,0,0,0,65536,0,0,0,1073741824],t.pre_defined=[0,0,0,0,0,0],t.next_track_ID=n.trackId+1,t.flags=0,t},t=function(e){var t,n,i;return t=new _.boxes.TrackBox,n=new _.boxes.TrackHeaderBox,n.version=1,n.flags=7,n.creation_time=0,n.modification_time=0,n.track_id=e.trackId,n.reserved=0,n.duration=Math.round(e.duration*e.timescale),n.reserved_2=[0,0],n.layer=0,n.alternate_group=0,n.volume=256,n.reserved_3=0,n.matrix=[65536,0,0,0,65536,0,0,0,1073741824],n.width=e.width<<16,n.height=e.height<<16,t.boxes.push(n),i=new _.boxes.MediaBox,i.boxes.push(r(e)),i.boxes.push(o(e)),i.boxes.push(a(e)),t.boxes.push(i),t},n=function(e){var t,n,r,i=0;return t=e.charCodeAt(0)-96<<10,n=e.charCodeAt(1)-96<<5,r=e.charCodeAt(2)-96,i=t|n|r,i},r=function(e){var t=new _.boxes.MediaHeaderBox;return t.flags=0,t.version=1,t.creation_time=0,t.modification_time=0,t.timescale=e.timescale,t.duration=Math.round(e.duration*e.timescale),t.pad=0,t.language=n(e.language),t.pre_defined=0,t},i=function(e){var t,n=0;for(t=0;t<e.length;t+=1)n|=e.charCodeAt(t)<<8*(e.length-t-1);return n},o=function(e){var t=new _.boxes.HandlerBox;switch(t.version=0,t.pre_defined=0,e.type){case"video":t.handler_type=i(t.HANDLERTYPEVIDEO),t.name=t.HANDLERVIDEONAME;break;case"audio":t.handler_type=i(t.HANDLERTYPEAUDIO),t.name=t.HANDLERAUDIONAME;break;default:t.handler_type=i(t.HANDLERTYPETEXT),t.name=t.HANDLERTEXTNAME}return t.name+="\0",t.reserved=[0,0,0],t.flags=0,t},a=function(e){var t=new _.boxes.MediaInformationBox;switch(e.type){case"video":t.boxes.push(M(e));break;case"audio":t.boxes.push(C(e));break;default:}return t.boxes.push(s(e)),t.boxes.push(R(e)),t},s=function(){var e,t,n;return e=new _.boxes.DataInformationBox,t=new _.boxes.DataReferenceBox,t.version=0,t.entry_count=1,t.flags=0,n=new _.boxes.DataEntryUrlBox,n.location="",n.version=0,n.flags=1,t.boxes.push(n),e.boxes.push(t),e},u=function(){var e=new _.boxes.TimeToSampleBox;return e.version=0,e.entry_count=0,e.flags=0,e.entry=[],e},l=function(){var e=new _.boxes.SampleToChunkBox;return e.flags=0,e.version=0,e.entry_count=0,e.entry=[],e},c=function(){var e=new _.boxes.ChunkOffsetBox;return e.version=0,e.entry_count=0,e.flags=0,e.chunk_offset=[],e},f=function(){var e=new _.boxes.SampleSizeBox;return e.version=0,e.flags=0,e.sample_count=0,e.sample_size=0,e},h=function(e){var t,n=new Uint8Array(e.length/2);for(t=0;t<e.length/2;t+=1)n[t]=parseInt(""+e[2*t]+e[2*t+1],16);return n},p=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e,0),n.set(t,e.length),n},m=function(e){var t,n,r,i,o,a,s,u,l,c=new RegExp("^[A-Z0-9]7","gi"),d=new RegExp("^[A-Z0-9]8","gi");for(t=new _.boxes.AVCConfigurationBox,t.configurationVersion=1,t.lengthSizeMinusOne=3,t.reserved=63,t.SPS_NAL=[],t.PPS_NAL=[],n=new Uint8Array(0),r=e.codecPrivateData,i=r.split("00000001"),i.splice(0,1),o=0,a=0,s=0;s<i.length;s+=1)u=h(i[s]),i[s].match(c)&&(t.SPS_NAL[o++]={NAL_length:u.length,NAL:u},t.AVCProfileIndication=parseInt(i[s].substr(2,2),16),t.profile_compatibility=parseInt(i[s].substr(4,2),16),t.AVCLevelIndication=parseInt(i[s].substr(6,2),16)),i[s].match(d)&&(t.PPS_NAL[a++]={NAL_length:u.length,NAL:u}),l=new Uint8Array(u.length+4),l[3]=u.length,l.set(u,4),n=p(n,l);return t.numOfSequenceParameterSets=o,t.numOfPictureParameterSets=a,t},g=function(e){var t=null;return t=void 0!==e.contentProtection?new _.boxes.EncryptedVideoBox:new _.boxes.AVC1VisualSampleEntryBox,t.data_reference_index=1,t.compressorname=[10,65,86,67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t.depth=24,t.reserved=[0,0,0,0,0,0],t.reserved_2=0,t.reserved_3=0,t.pre_defined=0,t.pre_defined_2=[0,0,0],t.pre_defined_3=65535,t.frame_count=1,t.horizresolution=4718592,t.vertresolution=4718592,t.height=e.height,t.width=e.width,t.boxes.push(m(e)),void 0!==e.contentProtection&&t.boxes.push(T(e)),t},y=function(e){var t=new _.boxes.OriginalFormatBox;return t.data_format=i(e.codecs.substring(0,e.codecs.indexOf("."))),t},v=function(){var e=new _.boxes.SchemeTypeBox;return e.flags=0,e.version=0,e.scheme_type=1667591779,e.scheme_version=65536,e},E=function(e){var t=new _.boxes.SchemeInformationBox;return t.boxes.push(b(e)),t},b=function(e){var t=new _.boxes.TrackEncryptionBox;return t.flags=0,t.version=0,t.default_IsEncrypted=1,t.default_IV_size=8,t.default_KID=e.contentProtection&&e.contentProtection.length>0&&e.contentProtection[0]["cenc:default_KID"]?e.contentProtection[0]["cenc:default_KID"]:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t},T=function(e){var t=new _.boxes.ProtectionSchemeInformationBox;return t.boxes.push(y(e)),t.boxes.push(v()),t.boxes.push(E(e)),t},S=function(e){var t=e.codecs.substring(0,e.codecs.indexOf("."));switch(t){case"avc1":return g(e);default:throw{name:d.dependencies.ErrorHandler.prototype.MEDIA_ERR_CODEC_UNSUPPORTED,message:"Video codec is not supported (MP4)",data:{codec:t}}}},w=function(e){var t=[];while(e.length>=2)t.push(parseInt(e.substring(0,2),16)),e=e.substring(2,e.length);return t},x=function(e){var t,n,r,i,o,a,s;return t=w(e.codecPrivateData),n=t.length,r=new Uint8Array(2+n),r[0]=5,r[1]=n,r.set(t,2),i=13+r.length,o=new Uint8Array(2+i),o[0]=4,o[1]=i,o[2]=64,o[3]=20,o[3]|=0,o[3]|=1,o[4]=255,o[5]=255,o[6]=255,o[7]=(4278190080&e.bandwidth)>>24,o[8]=(16711680&e.bandwidth)>>16,o[9]=(65280&e.bandwidth)>>8,o[10]=255&e.bandwidth,o[11]=(4278190080&e.bandwidth)>>24,o[12]|=(16711680&e.bandwidth)>>16,o[13]|=(65280&e.bandwidth)>>8,o[14]|=255&e.bandwidth,o.set(r,15),a=3+o.length,s=new Uint8Array(2+a),s[0]=3,s[1]=a,s[2]=(65280&e.trackId)>>8,s[3]=255&e.trackId,s[4]=0,s.set(o,5),s},I=function(e){var t,n,r=null;return r=void 0!==e.contentProtection?new _.boxes.EncryptedAudioBox:new _.boxes.MP4AudioSampleEntryBox,r.reserved=[0,0,0,0,0,0],r.data_reference_index=1,r.reserved_2=[0,0],r.channelcount=e.channels,r.samplesize=16,r.pre_defined=0,r.reserved_3=0,r.samplerate=e.samplingRate<<16,t=new _.boxes.ESDBox,n=x(e),t.ES_tag=n[0],t.ES_length=n[1],t.ES_data=n.subarray(2,n.length),t.version=0,t.flags=0,r.boxes.push(t),void 0!==e.contentProtection&&r.boxes.push(T(e)),r},A=function(e){var t=e.codecs.substring(0,e.codecs.indexOf("."));switch(t){case"mp4a":return I(e);default:throw{name:d.dependencies.ErrorHandler.prototype.MEDIA_ERR_CODEC_UNSUPPORTED,message:"Audio codec is not supported (MP4)",data:{codec:t}}}return null},D=function(e){var t=new _.boxes.SampleDescriptionBox;switch(t.version=0,t.flags=0,e.type){case"video":t.boxes.push(S(e));break;case"audio":t.boxes.push(A(e));break;default:break}return t},R=function(e){var t=new _.boxes.SampleTableBox;return t.boxes.push(u(e)),t.boxes.push(l(e)),t.boxes.push(c(e)),t.boxes.push(f(e)),t.boxes.push(D(e)),t},M=function(){var e=new _.boxes.VideoMediaHeaderBox;return e.version=0,e.flags=1,e.graphicsmode=0,e.opcolor=[0,0,0],e},C=function(){var e=new _.boxes.SoundMediaHeaderBox;return e.version=0,e.balance=0,e.reserved=0,e.flags=1,e},N=function(){var e=new _.boxes.FileTypeBox;return e.major_brand=1769172790,e.minor_brand=1,e.compatible_brands=[],e.compatible_brands[0]=1769172845,e.compatible_brands[1]=1769172790,e.compatible_brands[2]=1836278888,e},L=function(e){var t,n,r,i=e[e.length-1];for(t=new _.boxes.MovieExtendsBox,r=0;r<e.length;r+=1)i=e[r],n=new _.boxes.TrackExtendsBox,n.version=0,n.flags=0,n.track_ID=i.trackId,n.default_sample_description_index=1,n.default_sample_duration=0,n.default_sample_flags=0,n.default_sample_size=0,t.boxes.push(n);return t},P=function(e){var t,n,r,i=[];for(r=0;r<e.length;r+=1)t=new Uint8Array(e[r].initData),n=new _.boxes.ProtectionSystemSpecificHeaderBox,n.read(t,8,t.length),i.push(n);return i},O=function(n){var r,i,o,a=[];for(r=new _.boxes.MovieBox,r.boxes.push(e(n)),o=0;o<n.length;o+=1)r.boxes.push(t(n[o]));for(r.boxes.push(L(n)),o=0;o<n.length;o++)void 0!==n[o].contentProtection&&(i=this.protectionExt.getSupportedKeySystemsFromContentProtection(n[o].contentProtection),r.boxes.push.apply(r.boxes,P(i)));return a.push(N()),a.push(r),a},F=1,k=function(){var e=new _.boxes.MovieFragmentHeaderBox;return e.version=0,e.flags=0,e.sequence_number=F++,e},B=function(e){var t=new _.boxes.TrackFragmentBox;return t.version=0,t.flags=0,t.boxes.push(U(e)),t.boxes.push(H(e)),t.boxes.push(j(e)),t.boxes.push(K(e)),t},U=function(e){var t=new _.boxes.TrackFragmentHeaderBox;return t.version=0,t.flags=131072,t.track_ID=e.trackId,t},H=function(e){var t=new _.boxes.TrackFragmentBaseMediaDecodeTimeBox;return t.version=1,t.flags=0,t.baseMediaDecodeTime=e.samples.length>0?e.samples[0].dts:0,t},j=function(e){var t,n,r,i=new _.boxes.TrackFragmentRunBox;for(e.samples[0].cts,n=e.samples[0].duration>0?256:0,i.version=0,i.flags=1537|n|("video"===e.type?2048:0),i.data_offset=0,i.samples_table=[],i.sample_count=e.samples.length,t=0;t<e.samples.length;t++)r={sample_duration:e.samples[t].duration,sample_size:e.samples[t].size,sample_composition_time_offset:e.samples[t].cts-e.samples[t].dts,sample_flags:e.samples[t].flags},r.sample_composition_time_offset<0&&(i.version=1),i.samples_table.push(r);return i},K=function(e){var t,n=new _.boxes.SampleDependencyTableBox;for(n.version=0,n.flags=0,n.sample_dependency_table=[],t=0;t<e.samples.length;t++)n.sample_dependency_table.push((267386880&e.samples[t].flags)>>20);return n},V=function(e){var t=new _.boxes.MediaDataBox;return t.data=e.data,t},q=function(e){var t,n,r,i,o=[],a=0,s={},u=[],l=0;if(t=new _.boxes.MovieFragmentBox,t.boxes.push(k()),e)for(n=0;n<e.length;n+=1)t.boxes.push(B(e[n]));if(o.push(t),t.computeLength(),r=t.size,i=t.getBoxesByType("traf"),r+=8,e&&e.length&&(u=[e.length]),e)for(n=0;n<e.length;n+=1)i[n].getBoxByType("trun").data_offset=r,r+=e[n].data.length,u[n]=e[n].data,a+=u[n].length;for(s.data=new Uint8Array(a),n=0;n<u.length;n++)s.data.set(u[n],l),l+=u[n].length;return o.push(V(s)),o};return{protectionExt:void 0,generateInitSegment:function(e){var t=new _.boxes.File;return t.boxes=O.call(this,e),_.serialize(t)},generateMediaSegment:function(e){var t=new _.boxes.File;return t.boxes=q.call(this,e),_.serialize(t)},generateInitMediaSegment:function(e){var t=new _.boxes.File;return t.boxes=O.call(this,e),t.boxes=t.boxes.concat(q.call(this,e)),_.serialize(t)}}},d.dependencies.Mp4Processor.prototype={constructor:d.dependencies.Mp4Processor},d.dependencies.Notifier=function(){"use strict";var e,t="observableId",n=0,r=function(){return this[t]||(n+=1,this[t]="_id_"+n),this[t]};return{system:void 0,setup:function(){e=this.system,e.mapValue("notify",this.notify),e.mapValue("subscribe",this.subscribe),e.mapValue("unsubscribe",this.unsubscribe)},notify:function(){var t=arguments[0]+r.call(this),n=new d.vo.Event;n.sender=this,n.type=arguments[0],n.data=arguments[1],n.error=arguments[2],n.timestamp=(new Date).getTime(),e.notify.call(e,t,n)},subscribe:function(t,n,i,o){if(!i&&n[t]&&(i=n[t]=n[t].bind(n)),!n)throw"observer object cannot be null or undefined";if(!i)throw"event handler cannot be null or undefined";t+=r.call(this),e.mapHandler(t,void 0,i,o)},unsubscribe:function(t,n,i){i=i||n[t],t+=r.call(this),e.unmapHandler(t,void 0,i)}}},d.dependencies.Notifier.prototype={constructor:d.dependencies.Notifier},d.dependencies.Parser=function(){"use strict";var e=null,n=function(n,r){if(null===e)if(n.indexOf("SmoothStreamingMedia")>-1&&"undefined"!==typeof this.mssParser)this.system.notify("setContext","MSS"),e=this.mssParser;else if(n.indexOf("#EXTM3U")>-1&&"undefined"!==typeof this.hlsParser)this.system.notify("setContext","HLS"),e=this.hlsParser;else{if(!(n.indexOf("MPD")>-1&&"undefined"!==typeof this.dashParser))return t.reject("manifest cannot be parsed, protocol is unsupported!");this.system.notify("setContext","MPD"),e=this.dashParser}return e.parse(n,r)},r=function(){null!==e&&void 0!==e.abort&&e.abort()},i=function(){e=null};return{debug:void 0,system:void 0,dashParser:void 0,mssParser:void 0,hlsParser:void 0,metricsModel:void 0,parse:n,abort:r,reset:i}},d.dependencies.Parser.prototype={constructor:d.dependencies.Parser},d.dependencies.SourceBufferExtensions=function(){"use strict";this.system=void 0,this.manifestExt=void 0},d.dependencies.SourceBufferExtensions.prototype={constructor:d.dependencies.SourceBufferExtensions,createSourceBuffer:function(e,t){"use strict";var n=null;if(!e)return null;try{n=e.addSourceBuffer(t)}catch(r){if(!this.manifestExt.getIsTextTrack(t))throw r;if("text/vtt"===t||"text/ttml"===t)n=this.system.getObject("textSourceBuffer");else{if("application/ttml+xml+mp4"!==t&&"application/mp4"!==t&&"application/ttml+xml"!==t)throw r;n=this.system.getObject("textTTMLXMLMP4SourceBuffer")}}return n},removeSourceBuffer:function(e,t){"use strict";try{e.removeSourceBuffer(t)}catch(n){}},getBufferRange:function(e,t,n){"use strict";var r,i,o=null,a=0,s=0,u=null,l=null,c=0,d=n||.03;try{o=e.buffered}catch(f){return null}if(o){for(i=0,r=o.length;i<r;i+=1)if(a=o.start(i),s=o.end(i),null===u){if(c=Math.abs(a-t),t>=a&&t<s){u=a,l=s;continue}if(c<=d){u=a,l=s;continue}}else{if(c=a-l,!(c<=d))break;l=s}if(null!==u)return{start:u,end:l}}return null},getAllRanges:function(e){var t=null;try{return t=e.buffered,t}catch(n){return null}},getBufferLength:function(e,t,n){"use strict";var r,i,o=this;return r=o.getBufferRange(e,t,n),i=null===r?0:r.end-t,i},waitForUpdateEnd:function(e){"use strict";var n,r=t.defer(),i=50,o=function(){e.updating||(clearInterval(n),r.resolve(!0))},a=function(){e.updating||(e.removeEventListener("updateend",a,!1),r.resolve(!0))};if(!e.updating)return r.resolve(!0),r.promise;if("function"===typeof e.addEventListener)try{e.addEventListener("updateend",a,!1)}catch(s){n=setInterval(o,i)}else n=setInterval(o,i);return r.promise},append:function(e,n,r){var i=t.defer(),o=this;return o.waitForUpdateEnd(e).then((function(){try{"append"in e?e.append(n,r):"appendBuffer"in e&&e.appendBuffer(n),o.waitForUpdateEnd(e,r).then((function(){i.resolve()}))}catch(t){i.reject({err:t,data:n})}})),i.promise},remove:function(e,n,r,i,o){var a=t.defer(),s=this;return s.waitForUpdateEnd(e).then((function(){try{n>=0&&n<i&&r>n&&"ended"!==o.readyState&&e.remove(n,r),isNaN(r)&&"ended"!==o.readyState&&e.remove(n),s.waitForUpdateEnd(e).then((function(){a.resolve()}))}catch(t){a.reject(t)}})),a.promise},abort:function(e,t){"use strict";try{"open"===e.readyState&&t.abort()}catch(n){}}},Math.sign||(Math.sign=function(e){"use strict";return e<0?-1:0===e?0:1}),d.dependencies.Stream=function(){"use strict";var e,n,r,i,o,a,s,u,l,c,f,h,p,m,g,y,v,_,E,b,T,S,w,x,I,A,D,R,M=null,C=null,N=-1,L=null,P=-1,O=null,F=!1,k=!1,B=null,U=null,H=null,j=-1,K=!0,V=!1,q=!1,G="und",Y="und",z=null,W=-1,X=-1,$="Stopped",Q=1,J=!1,Z=!1,ee=null,te=!0,ne=null,re=!1,ie=-1,oe=-1,ae=function(e){this.errHandler.sendError(e.data.code,e.data.message,e.data.data)},se=function(){V&&(this.debug.info("[Stream] Play."),this.videoModel.play())},ue=function(){this.debug.info("[Stream] Pause."),this.videoModel.pause()},le=function(t,n){V&&(this.debug.info("[Stream] Seek: "+t),this.manifestExt.getIsDynamic(e)&&!re&&0!==this.videoModel.getCurrentTime()&&ye.call(this),!0===n?(_=t,this.system.unmapHandler("bufferUpdated"),this.system.mapHandler("bufferUpdated",void 0,qe.bind(this)),Fe.call(this,_)):this.videoModel.setCurrentTime(t))},ce=function(e){var n=t.defer(),r=this,i=function(){e.removeEventListener("sourceopen",i),e.removeEventListener("webkitsourceopen",i),n.resolve(e)};return e.addEventListener("sourceopen",i,!1),e.addEventListener("webkitsourceopen",i,!1),r.mediaSourceExt.attachMediaSource(e,r.videoModel),n.promise},de=function(){var r=this,i=[],o=t.defer(),a=function(){C&&i.push(C.reset(q)),B&&i.push(B.reset(q)),L&&i.push(L.reset(q)),U&&i.push(U.reset(q)),O&&i.push(O.reset(q)),H&&i.push(H.reset(q)),t.all(i).then((function(){ee&&(ee.reset(),ee=void 0),n&&r.mediaSourceExt.detachMediaSource(r.videoModel),V=!1,M=null,C=null,L=null,O=null,n=null,e=null,o.resolve()}))};return t.when(te).then((function(){a()})),o.promise},fe=function(e,t){var r=null,i=null;if(("video"===e.type||"audio"===e.type)&&!this.capabilities.supportsCodec(this.videoModel.getElement(),t))return this.errHandler.sendError(d.dependencies.ErrorHandler.prototype.MEDIA_ERR_CODEC_UNSUPPORTED,"Codec is not supported (HTMLMediaElement)",{codec:t}),null;try{i=this.sourceBufferExt.createSourceBuffer(n,t)}catch(o){return this.errHandler.sendError(d.dependencies.ErrorHandler.prototype.MEDIA_ERR_CREATE_SOURCEBUFFER,"Failed to create "+e.type+" source buffer",new d.vo.Error(o.code,o.name,o.message)),null}return r=this.system.getObject("bufferController"),r.initialize(e.type,z,e,i,this.fragmentController,n,ee),"text"===e.type&&i.hasOwnProperty("initialize")&&i.initialize(t,r,e),r},he=function(t,n){if("MSS"!==e.name||!this.manifestExt.getIsDynamic(e)&&!this.manifestExt.getIsStartOver(e))return null;var r=null;return t&&n&&n.type&&(r=this.system.getObject("mssFragmentInfoController"),r.initialize(n.type,this.fragmentController,t)),r},pe=function(){var n,r,i=null,o=null,a=null,s=this;return n=this.manifestExt.getVideoData(e,z.index),n&&(a=this.manifestExt.getCodec(n),M=this.manifestExt.getContentProtectionData(n)),n=this.manifestExt.getSpecificAudioData(e,z.index,G),n&&(o=this.manifestExt.getCodec(n)),M?this.capabilities.supportsEncryptedMedia()?R?(i=t.defer(),r={},r[d.dependencies.ProtectionController.eventList.ENAME_KEY_SYSTEM_SELECTED]=function(){s.debug.log("[Stream] ProtectionController initialized"),R.unsubscribe(d.dependencies.ProtectionController.eventList.ENAME_KEY_SYSTEM_SELECTED,r),i.resolve(!0)},R.subscribe(d.dependencies.ProtectionController.eventList.ENAME_KEY_SYSTEM_SELECTED,r),this.debug.log("[Stream] Initialize ProtectionController"),R.init(M,o,a),i.promise):t.when(!0):(this.errHandler.sendError(d.dependencies.ErrorHandler.prototype.CAPABILITY_ERR_MEDIAKEYS,"EME is not supported/enabled",null),t.when(!1)):t.when(!0)},me=function(){var t,n,r,i;if(e)if(te=!1,ee=this.system.getObject("eventController"),t=this.manifestExt.getVideoData(e,z.index),null===t?this.errHandler.sendError(d.dependencies.ErrorHandler.prototype.MANIFEST_ERR_NO_VIDEO,"No Video data in manifest"):(ze.call(this,t),N=this.manifestExt.getDataIndex(t,e,z.index),n=this.manifestExt.getCodec(t),M=this.manifestExt.getContentProtectionData(t),null===n?this.errHandler.sendError(d.dependencies.ErrorHandler.prototype.MEDIA_ERR_CODEC_UNSUPPORTED,"Video codec information not available",{codec:""}):(C=fe.call(this,t,n),B=he.call(this,C,t))),null!==C){if(t=this.manifestExt.getSpecificAudioData(e,z.index,G),null===t)this.errHandler.sendWarning(d.dependencies.ErrorHandler.prototype.MANIFEST_ERR_NO_AUDIO,"No audio data in manifest");else if(ze.call(this,t),P=this.manifestExt.getDataIndex(t,e,z.index),r=this.manifestExt.getCodec(t),null===r)this.errHandler.sendWarning(d.dependencies.ErrorHandler.prototype.MEDIA_ERR_CODEC_UNSUPPORTED,"Audio codec information not available",{codec:""});else{if(L=fe.call(this,t,r),null===L)return void(te=!0);U=he.call(this,L,t)}t=this.manifestExt.getSpecificTextData(e,z.index,Y),null!==t&&(j=this.manifestExt.getDataIndex(t,e,z.index),i=this.manifestExt.getMimeType(t),null===i?this.errHandler.sendWarning(d.dependencies.ErrorHandler.prototype.MANIFEST_ERR_NO_TEXT,"Text codec information not available"):(O=fe.call(this,t,i),H=he.call(this,O,t))),ee&&ee.addInlineEvents(this.manifestExt.getEventsForPeriod(e,z)),te=!0}else te=!0},ge=function(){this.debug.log("[Stream] Setting duration: "+z.duration),this.mediaSourceExt.setDuration(n,z.duration),V=!0},ye=function(){"MSS"===e.name&&(this.manifestExt.getIsDynamic(e)||this.manifestExt.getIsStartOver(e))&&(B&&!1===k&&(k=!0,B.start(C.getSegmentDuration())),U&&U.start(L.getSegmentDuration()),H&&F&&H.start(O.getSegmentDuration()))},ve=function(){B&&(k=!1,B.stop()),U&&U.stop(),H&&H.stop()},_e=function(){this.debug.info("[Stream] <video> loadedmetadata event")},Ee=function(){this.debug.info("[Stream] <video> canplay event")},be=function(){this.debug.info("[Stream] <video> playing event"),this.metricsModel.addState("video","playing",this.getVideoModel().getCurrentTime()),ie=(new Date).getTime()/1e3,oe=this.getVideoModel().getCurrentTime()},Te=function(){this.debug.info("[Stream] <video> loadstart event")},Se=function(){this.debug.info("[Stream] <video> play event"),this.videoModel.listen("pause",a),1!==Q?this.setTrickModeSpeed(1):X>=0?(je.call(this,X),X=-1):Fe.call(this),this.metricsModel.addPlayList("video",(new Date).getTime(),this.videoModel.getCurrentTime(),"play")},we=function(){this.debug.info("[Stream] <video> ended event"),this.metricsModel.addState("video","stopped",this.videoModel.getCurrentTime(),1),this.manifestExt.getIsStartOver(e)&&ve.call(this)},xe=function(){this.debug.info("[Stream] <video> pause event"),ie=-1,oe=-1,1===Q&&(this.metricsModel.addState("video","paused",this.videoModel.getCurrentTime()),this.metricsModel.addPlayList("video",(new Date).getTime(),this.videoModel.getCurrentTime(),"pause")),Ue.call(this),"MSS"===e.name&&this.manifestExt.getIsDynamic(e)&&ye.call(this)},Ie=function(e){var t,n=e.target.error,r="[Stream] <video> error: ";if(-1!==n.code){switch(n.code){case 1:t=d.dependencies.ErrorHandler.prototype.MEDIA_ERR_ABORTED,r+="fetching process aborted";break;case 2:t=d.dependencies.ErrorHandler.prototype.MEDIA_ERR_NETWORK,r+="network error";break;case 3:t=d.dependencies.ErrorHandler.prototype.MEDIA_ERR_DECODE,r+="media decoding error";break;case 4:t=d.dependencies.ErrorHandler.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED,r+="media format not supported";break;case 5:t=d.dependencies.ErrorHandler.prototype.MEDIA_ERR_ENCRYPTED,r+="media is encrypted";break}q=!0,this.errHandler.sendError(t,r)}},Ae=function(){var e=this.videoModel.getCurrentTime(),t=this.videoModel.getDuration();if(this.debug.info("[Stream] <video> seeking event: "+e),1===Q||e.toFixed(3)===D.toFixed(3)){e=e<this.getStartTime()?this.getStartTime():e;var n=this.config.getParam("backoffSeekToEnd","number",2);t!==1/0&&e>=t-n?je.call(this,t-n):(1===Q&&(this.metricsModel.addState("video","seeking",this.getVideoModel().getCurrentTime()),this.metricsModel.addPlayList("video",(new Date).getTime(),e,d.vo.metrics.PlayList.SEEK_START_REASON)),Fe.call(this,e))}else this.setTrickModeSpeed(1)},De=function(){var e,t,n,r,i,o,a,s,l,c=this,d=.9,f=function(e,t){if(c.videoModel.getCurrentTime()===c.getStartTime()||J)return c.debug.log("[Stream] Trick mode (x"+Q+"): stop"),void(J&&(s=document.createEvent("Event"),s.initEvent("ended",!0,!0),c.videoModel.getElement().dispatchEvent(s)));t<c.getStartTime()?t=c.getStartTime():t>=c.videoModel.getDuration()&&(t=c.videoModel.getDuration()-w,J=!0),e>0&&c.debug.log("[Stream] Trick mode (x"+Q+"): wait "+e.toFixed(3)+" s"),A=setTimeout((function(){I=(new Date).getTime()/1e3,c.debug.log("[Stream] Trick mode (x"+Q+"): seek time = "+t.toFixed(3)),D=t,c.videoModel.setCurrentTime(t)}),e>0?1e3*e:0)};if(this.debug.info("[Stream] <video> seeked event"),Be.call(this),1!==Q){if(e=(new Date).getTime()/1e3,t=c.videoModel.getCurrentTime(),n=e-T,r=e-I,i=Math.abs(t-S),o=i/n,c.debug.log("[Stream] Trick mode (x"+Q+"): elapsed time = "+n.toFixed(3)+", elapsed video time = "+i.toFixed(3)+", speed = "+o.toFixed(3)),"Changed"===$)clearTimeout(A),$="Running",T=(new Date).getTime()/1e3,S=t,c.debug.info("[Stream] Trick mode (x"+Q+"): videoTime = "+S),x=Math.abs(b/Q)>1?x/Math.abs(b/Q):x,a=t+x*Math.sign(Q),l=0;else if(o<Math.abs(Q)*d){var h=Math.abs(Q/o);x*=Math.round(h)+Math.round(h%w),c.debug.info("[Stream] Trick mode (x"+Q+"): seek step = "+x),a=t+x*Math.sign(Q),l=0}else a=t+x*Math.sign(Q),l=Math.abs(a-S)/Math.abs(Q)-n-r;f.call(c,l,a)}this.videoModel.listen("seeking",u),re=!1,ie=-1,oe=-1},Re=function(){this.debug.info("[Stream] <video> progress event"),Oe.call(this)},Me=function(){this.debug.info("[Stream] <video> timeupdate event: "+this.videoModel.getCurrentTime()),Oe.call(this)},Ce=function(){this.debug.info("[Stream] <video> waiting event"),this.getVideoModel().isSeeking()||this.metricsModel.addState("video","buffering",this.getVideoModel().getCurrentTime())},Ne=function(){var e=this.videoModel.getDuration();this.debug.info("[Stream] <video> durationchange event: "+e)},Le=function(){this.debug.info("[Stream] <video> ratechange event: "+this.videoModel.getPlaybackRate()),C&&C.updateStalledState(),L&&L.updateStalledState(),O&&O.updateStalledState()},Pe=function(){ue.call(this),re=!0,this.system.notify("manifestUpdate",!0)},Oe=function(){C&&C.updateBufferLevel(!0),L&&L.updateBufferLevel(!0),O&&O.updateBufferLevel(!0)},Fe=function(e){this.debug.log("[Stream] startBuffering"+(void 0===e?"":" at time "+e)),C&&(void 0===e?C.start():C.seek(e)),L&&(void 0===e?L.start():L.seek(e)),O&&F&&1===Q&&(void 0===e?O.start():O.seek(e))},ke=function(){this.debug.log("[Stream] stopBuffering"),C&&C.stop(),L&&L.stop(),O&&O.stop()},Be=function(){C&&C.seeked(),L&&L.seeked(),O&&O.seeked()},Ue=function(){this.scheduleWhilePaused&&!this.manifestExt.getIsDynamic(e)||ke.call(this),clearInterval(E)},He=function(t){var r=this;e=t,r.debug.log("[Stream] Create MediaSource");try{n=r.mediaSourceExt.createMediaSource()}catch(i){r.errHandler.sendError(d.dependencies.ErrorHandler.prototype.MEDIA_ERR_CREATE_MEDIASOURCE,"Failed to create MediaSource",{name:i.name,message:i.message})}null!==n&&pe.call(r).then((function(){r.debug.log("[Stream] Setup MediaSource"),ce.call(r,n).then((function(e){n=e,r.debug.log("[Stream] Initialize MediaSource"),me.call(r),r.debug.log("[Stream] Initialize playback"),ge.call(r),r.debug.log("[Stream] Playback initialized")}))}))},je=function(e){this.debug.log("[Stream] Set video model current time: "+e),this.videoModel.unlisten("seeking",u),this.videoModel.setCurrentTime(e)},Ke=function(){C&&!C.isBufferingCompleted()||L&&!L.isBufferingCompleted()||n&&(this.videoModel.unlisten("pause",a),this.debug.info("[Stream] Signal end of stream"),this.mediaSourceExt.signalEndOfStream(n))},Ve=function(t){this.debug.info("[Stream] Start time = "+t),-1!==W&&!this.manifestExt.getIsDynamic(e)&&W<z.duration&&(this.debug.info("[Stream] Initial start time = "+W),t=W),le.call(this,t,0===z.index&&K)},qe=function(){var t,n,r;if(this.debug.info("[Stream] Check start time"),t=this.sourceBufferExt.getBufferRange(C.getBuffer(),_,C.getSegmentDuration()),null!==t&&(r=Math.max(_,t.start),!(t.end<r))){if(L){if(n=this.sourceBufferExt.getBufferRange(L.getBuffer(),_,L.getSegmentDuration()),null===n)return;if(this.debug.info("[Stream] Check start time: A["+n.start+"-"+n.end+"], V["+t.start+"-"+t.end+"]"),n.end<r)return;r=Math.max(r,n.start)}this.debug.info("[Stream] Check start time: OK => "+r),this.system.unmapHandler("bufferUpdated"),this.videoModel.isPaused()?X=r:je.call(this,r),this.manifestExt.getIsStartOver(e)&&ye.call(this),se.call(this)}},Ge=function(t){this.debug.info("[Stream] Source duration changed: "+t),this.mediaSourceExt.setDuration(n,t),e.mediaPresentationDuration=t,z.duration=t},Ye=function(t,n,r){var i=-1;return t?-1===r?r:(i=this.manifestExt.getDataIndex(n,e,z.index),i!==r&&("MSS"===e.name&&(this.manifestExt.getIsDynamic(e)||this.manifestExt.getIsStartOver(e))?this.system.notify("manifestUpdate"):t.updateData(n,z)),i):r},ze=function(e){var t,n;n=1;while(n<e.Representation_asArray.length)t=this.manifestExt.getCodecForRepresentation(e.Representation_asArray[n]),t&&(this.capabilities.supportsCodec(this.videoModel.getElement(),t)||(this.debug.warn("[Stream] codec not supported: "+t),e.Representation_asArray.splice(n,1),n--)),n++},We=function(t){var n,r;if(e=this.manifestModel.getValue(),z=t,this.debug.log("[Stream] Manifest updated ... set new data on buffers."),C&&(n=C.getData(),r=n&&n.hasOwnProperty("id")?this.manifestExt.getDataForId(n.id,e,z.index):this.manifestExt.getDataForIndex(N,e,z.index),ze.call(this,r),C.updateData(r,z)),L&&(r=this.manifestExt.getDataForIndex(P,e,z.index),ze.call(this,r),L.updateData(r,z)),O&&(r=this.manifestExt.getDataForIndex(j,e,z.index),O.updateData(r,z)),ee){var i=this.manifestExt.getEventsForPeriod(e,z);ee.addInlineEvents(i)}re&&C&&(this.system.unmapHandler("bufferUpdated"),this.system.mapHandler("bufferUpdated",void 0,qe.bind(this)),C.load()),k&&ye.call(this)},Xe=function(){var e=this.videoModel.getCurrentTime();O.seek(e),O.seeked()},$e=function(t){var n=this;if(this.debug.log("[Stream] Segment loading failed: start time = "+t.startTime+", duration = "+t.duration),(this.manifestExt.getIsDynamic(e)||this.manifestExt.getIsStartOver(e))&&null===ne){re=!0;var r=t.duration;this.debug.info("[Stream] Reload session in "+r+" s."),ne=setTimeout((function(){ne=null,re=!0,n.debug.info("[Stream] Reload session (update manifest)"),n.system.notify("manifestUpdate",!0),ve.call(n)}),1e3*r)}else le.call(this,t.startTime+t.duration)},Qe=function(){if(!0!==document.hidden&&-1!==ie){var e=(new Date).getTime()/1e3,t=this.getVideoModel().getCurrentTime(),n=e-ie,r=t-oe;this.debug.log("[Stream] VisibilityChange: elapsedClockTime = "+n+", elapsedStreamTime = "+r+" ("+(n-r)+")"),n-r>1&&Pe.call(this)}};return{system:void 0,videoModel:void 0,manifestLoader:void 0,manifestModel:void 0,mediaSourceExt:void 0,sourceBufferExt:void 0,manifestExt:void 0,fragmentController:void 0,fragmentExt:void 0,protectionExt:void 0,capabilities:void 0,debug:void 0,metricsExt:void 0,errHandler:void 0,timelineConverter:void 0,scheduleWhilePaused:void 0,textTrackExtensions:void 0,metricsModel:void 0,eventBus:void 0,notify:void 0,config:void 0,setup:function(){this.system.mapHandler("startTimeFound",void 0,Ve.bind(this)),this.system.mapHandler("segmentLoadingFailed",void 0,$e.bind(this)),this.system.mapHandler("bufferingCompleted",void 0,Ke.bind(this)),this.system.mapHandler("sourceDurationChanged",void 0,Ge.bind(this)),d.dependencies.ProtectionController&&(this[d.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR]=ae.bind(this)),o=Se.bind(this),a=xe.bind(this),s=Ie.bind(this),u=Ae.bind(this),l=De.bind(this),c=Ce.bind(this),p=Re.bind(this),m=Le.bind(this),f=Me.bind(this),h=Ne.bind(this),i=_e.bind(this),g=Ee.bind(this),y=be.bind(this),v=Te.bind(this),r=we.bind(this),Qe.bind(this)},load:function(e,t){z=t,He.call(this,e)},setVideoModel:function(e){this.videoModel=e,this.videoModel.listen("play",o),this.videoModel.listen("pause",a),this.videoModel.listen("error",s),this.videoModel.listen("seeking",u),this.videoModel.listen("seeked",l),this.videoModel.listen("waiting",c),this.videoModel.listen("timeupdate",f),this.videoModel.listen("durationchange",h),this.videoModel.listen("progress",p),this.videoModel.listen("ratechange",m),this.videoModel.listen("loadedmetadata",i),this.videoModel.listen("ended",r),this.videoModel.listen("canplay",g),this.videoModel.listen("playing",y),this.videoModel.listen("loadstart",v)},setInitialStartTime:function(e){var t=parseFloat(e);isNaN(t)||(W=t)},getAudioTracks:function(){return this.manifestExt.getAudioDatas(e,z.index)},setAudioTrack:function(e){U&&U.stop(),P=Ye.call(this,L,e,P)},getSelectedAudioTrack:function(){if(L)return this.manifestExt.getDataForIndex(P,e,z.index)},getSubtitleTracks:function(){return this.manifestExt.getTextDatas(e,z.index)},setSubtitleTrack:function(e){H&&H.stop(),j=Ye.call(this,O,e,j)},getSelectedSubtitleTrack:function(){if(O&&F)return this.manifestExt.getDataForIndex(j,e,z.index)},initProtection:function(e){R=e,R&&R.subscribe(d.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,this)},getVideoModel:function(){return this.videoModel},getManifestExt:function(){var e=this;return e.manifestExt},setAutoPlay:function(e){K=e},setDefaultAudioLang:function(e){G=e},setDefaultSubtitleLang:function(e){Y=e},getAutoPlay:function(){return K},reset:function(){var e=t.defer(),n=this;return this.debug.info("[Stream] Reset"),ke.call(this),ve.call(this),ue.call(this),clearTimeout(A),clearTimeout(ne),1!==Q&&this.videoModel.setMute(Z),this.videoModel.unlisten("play",o),this.videoModel.unlisten("pause",a),this.videoModel.unlisten("error",s),this.videoModel.unlisten("seeking",u),this.videoModel.unlisten("seeked",l),this.videoModel.unlisten("waiting",c),this.videoModel.unlisten("timeupdate",f),this.videoModel.unlisten("durationchange",h),this.videoModel.unlisten("progress",p),this.videoModel.unlisten("ratechange",m),this.videoModel.unlisten("loadedmetadata",i),this.videoModel.unlisten("ended",r),this.videoModel.unlisten("canplay",g),this.videoModel.unlisten("playing",y),this.videoModel.unlisten("loadstart",v),this.system.unmapHandler("streamsComposed",void 0,Xe),this.system.unmapHandler("bufferUpdated"),this.system.unmapHandler("startTimeFound"),this.system.unmapHandler("segmentLoadingFailed"),this.system.unmapHandler("bufferingCompleted"),this.system.unmapHandler("sourceDurationChanged"),de.call(this).then((function(){R&&R.unsubscribe(d.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,n),R=void 0,n.fragmentController=void 0,e.resolve()})),e.promise},getDuration:function(){return z.duration},getStartTime:function(){return z.start},getPeriodIndex:function(){return z.index},getId:function(){return z.id},getPeriodInfo:function(){return z},getMinbufferTime:function(){return C?C.getMinbufferTime():d.dependencies.BufferExtensions.DEFAULT_MIN_BUFFER_TIME},getLiveDelay:function(){return C?C.getLiveDelay():d.dependencies.BufferExtensions.DEFAULT_LIVE_DELAY},startEventController:function(){ee.start()},resetEventController:function(){ee.reset()},enableSubtitles:function(t){var n;t!==F&&(F=t,n=this.textTrackExtensions.getCurrentTextTrack(this.videoModel.getElement()),this.textTrackExtensions.cleanSubtitles(),O&&(t?("MSS"===e.name&&(this.manifestExt.getIsDynamic(e)||this.manifestExt.getIsStartOver(e))?(this.system.mapHandler("streamsComposed",void 0,Xe.bind(this),!0),this.system.notify("manifestUpdate")):Xe.call(this),n&&"metadata"!==n.kind&&"showing"!==n.mode?n.mode="showing":n&&(n.mode="hidden")):(H&&H.stop(),n&&(n.mode="disabled"),O.stop())))},setTrickModeSpeed:function(e){var n,r,i=[],o=this,s=1!==e,u=function(){o.videoModel.getCurrentTime()>n+1&&(o.videoModel.unlisten("timeupdate",u),o.debug.info("[Stream] Set mute: "+Z+", the mute state before using trick mode."),o.videoModel.setMute(Z))};e!==Q&&C&&(o.debug.info("[Stream] Trick mode: speed = "+e),s&&"Stopped"===$?(this.videoModel.unlisten("pause",a),o.debug.info("[Stream] Set mute: true"),Z=o.videoModel.getMute(),Z||o.videoModel.setMute(!0),o.videoModel.pause()):s||(o.metricsModel.addPlayList("video",(new Date).getTime(),S,"trickMode",Q),Q=1,clearTimeout(A),ke.call(o)),i.push(C.setTrickMode(s,e>1)),L&&i.push(L.setTrickMode(s,e>1)),t.all(i).then((function(){b=Q,Q=e,n=o.videoModel.getCurrentTime(),s?"Running"===$?(o.metricsModel.addPlayList("video",(new Date).getTime(),S,"trickMode",b),$="Changed"):"Stopped"===$&&(J=!1,$="Running",x=w=C.getSegmentDuration(),T=I=(new Date).getTime()/1e3,S=n,o.debug.info("[Stream] Trick mode (x"+Q+"): videoTime = "+S),r=n+x*Math.sign(Q),r=Math.round(1e3*(r-r%w))/1e3,o.debug.info("[Stream] Trick mode (x"+Q+"): seek step = "+x),D=r,le.call(o,r)):(o.videoModel.listen("pause",a),o.debug.info("[Stream] Trick mode: Stopped, current time = "+n),$="Stopped",o.videoModel.listen("timeupdate",u),n=J?o.getStartTime():n,le.call(o,n,!0))})))},getTrickModeSpeed:function(){return Q},updateData:We,play:se,seek:le,pause:ue}},d.dependencies.Stream.prototype={constructor:d.dependencies.Stream},d.dependencies.StreamController=function(){"use strict";var e,n,r,i,o,a,s,u,l,c=!1,f=[],h=!1,p=6,m=.2,g=!0,y=!1,v="und",_="und",E=!1,T=!1,S=null,w="Safari"===b().name,x=function(e,t){var n=e.getElement(),r=t.getElement();return r.parentNode||n.parentNode.insertBefore(r,n),n.style.width="0px",r.style.width="100%",D(n,r),A.call(this,e),I.call(this,t),!0},I=function(e){e.listen("seeking",o),e.listen("progress",a),e.listen("timeupdate",i),e.listen("pause",s),e.listen("play",u)},A=function(e){e.unlisten("seeking",o),e.unlisten("progress",a),e.unlisten("timeupdate",i),e.unlisten("pause",s),e.unlisten("play",u)},D=function(e,t){["controls","loop","muted","playbackRate","volume"].forEach((function(n){t[n]=e[n]}))},R=function(){var e=n.getVideoModel().getElement().buffered;if(e.length){var t=e.length-1,r=e.end(t),i=n.getStartTime()+n.getDuration()-r;i<p&&(n.getVideoModel().unlisten("progress",a),O())}},M=function(e,t,r){!y&&e&&t&&e!==t&&(y=!0,e.pause(),n=t,x.call(this,e.getVideoModel(),t.getVideoModel()),r?this.seek(e.getVideoModel().getCurrentTime()):this.seek(t.getStartTime()),this.play(),e.resetEventController(),n.startEventController(),y=!1)},C=function(){if(n){var e=this,t=new Date,r=n.getStartTime()+n.getDuration(),i=n.getVideoModel().getElement(),o=i.currentTime,a=e.videoExt.getPlaybackQuality(i);a&&e.metricsModel.addPlaybackQuality("video",t,a,o),e.metricsModel.addVideoResolution("video",t,i.videoWidth,i.videoHeight,o),F()&&(n.getVideoModel().getElement().seeking||r-o<m&&M.call(this,n,F()))}},N=function(){var e=n.getVideoModel().getCurrentTime(),t=k(e);t&&t!==n&&M.call(this,n,t,e)},L=function(){this.manifestUpdater.stop()},P=function(){this.manifestUpdater.start()},O=function(){var e=F();e&&e.seek(e.getStartTime())},F=function(){var e=n.getPeriodIndex()+1;return e<f.length?f[e]:null},k=function(e){var t=0,n=null,r=f.length,i=0;for(r>0&&(t+=f[0].getStartTime()),i=0;i<r;i+=1)if(n=f[i],t+=n.getDuration(),e<t)return n},B=function(){var e=this.system.getObject("videoModel"),t=document.createElement("video");return e.setElement(t),e},U=function(e){e.parentNode&&e.parentNode.removeChild(e)},H=function(){var t,i,o,a,s,u,c,d,p,m=this.manifestModel.getValue(),y=this.metricsModel.getMetricsFor("stream"),b=this.metricsExt.getCurrentManifestUpdate(y);if(!m)return!1;if(e.startOver&&(m.startOver=!0),this.debug.info("[StreamController] composeStreams"),this.capabilities.supportsEncryptedMedia()&&(r||(r=this.system.getObject("protectionController"),h=!0),r.setMediaElement(this.videoModel.getElement()),l&&r.setProtectionData(l)),d=this.manifestExt.getMpd(m),n&&(t=n.getPeriodInfo(),d.isClientServerTimeSyncCompleted=t.mpd.isClientServerTimeSyncCompleted,d.clientServerTimeShift=t.mpd.clientServerTimeShift),i=this.manifestExt.getRegularPeriods(m,d),0===i.length)return!1;for(s=0,o=i.length;s<o;s+=1){for(c=i[s],u=0,a=f.length;u<a;u+=1)f[u].getId()===c.id&&(p=f[u],this.debug.info("[StreamController] update stream data"),p.updateData(c));p||(this.debug.info("[StreamController] Create stream"),p=this.system.getObject("stream"),p.setVideoModel(0===s?this.videoModel:B.call(this)),p.initProtection(r),p.setAutoPlay(g),p.setDefaultAudioLang(v),p.setDefaultSubtitleLang(_),p.enableSubtitles(E),p.setInitialStartTime(e.startTime),p.load(m,c),f.push(p)),this.metricsModel.addManifestUpdatePeriodInfo(b,c.id,c.index,c.start,c.duration),p=null}return n||(n=f[0],I.call(this,n.getVideoModel())),this.metricsModel.updateManifestUpdateInfo(b,{currentTime:this.videoModel.getCurrentTime(),buffered:this.videoModel.getElement().buffered,presentationStartTime:i[0].start,clientTimeOffset:d.clientServerTimeShift}),S&&(S.resolve(),S=null),!0},j=function(e){!0===e&&(T=!0),this.refreshManifest()},K=function(){if(c){this.debug.info("[StreamController] Manifest updated");var e=H.call(this);e?this.system.notify("streamsComposed"):this.errHandler.sendError(d.dependencies.ErrorHandler.prototype.MANIFEST_ERR_NO_STREAM,"No stream/period is provided in the manifest"),S&&(S.resolve(),S=null)}else S&&(S.resolve(),S=null)},V=function(e){if(w&&"HLS"===e.protocol){var t=this.system.getObject("hlsStream");return t.setVideoModel(this.videoModel),t.setProtectionData(l),t.setAutoPlay(g),t.setDefaultAudioLang(v),t.setDefaultSubtitleLang(_),t.enableSubtitles(E),t.setInitialStartTime(e.startTime),f.push(t),n=t,I.call(this,n.getVideoModel()),t.load(e.url),!0}return!1};return{system:void 0,videoModel:void 0,parser:void 0,manifestLoader:void 0,manifestUpdater:void 0,manifestModel:void 0,manifestExt:void 0,fragmentExt:void 0,capabilities:void 0,debug:void 0,metricsModel:void 0,metricsExt:void 0,videoExt:void 0,errHandler:void 0,eventBus:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,setup:function(){this.system.mapHandler("manifestUpdate",void 0,j.bind(this)),this.system.mapHandler("manifestUpdated",void 0,K.bind(this)),i=C.bind(this),a=R.bind(this),o=N.bind(this),s=L.bind(this),u=P.bind(this)},getManifestExt:function(){return n.getManifestExt()},setAutoPlay:function(e){g=e},getAutoPlay:function(){return g},getVideoModel:function(){return this.videoModel},setVideoModel:function(e){this.videoModel=e},getAudioTracks:function(){return n?n.getAudioTracks():null},getSelectedAudioTrack:function(){if(n)return n.getSelectedAudioTrack()},setAudioTrack:function(e){n&&n.setAudioTrack(e)},getSubtitleTracks:function(){return n?n.getSubtitleTracks():null},setSubtitleTrack:function(e){n&&n.setSubtitleTrack(e)},getSelectedSubtitleTrack:function(){if(n)return n.getSelectedSubtitleTrack()},getMinbufferTime:function(){return n?n.getMinbufferTime():d.dependencies.BufferExtensions.DEFAULT_MIN_BUFFER_TIME},getLiveDelay:function(){return n?n.getLiveDelay():d.dependencies.BufferExtensions.DEFAULT_LIVE_DELAY},load:function(n){var r=this;c=!0,e=n,e.protData&&(l=e.protData),V.call(this,e)||(T=!1,S=t.defer(),r.debug.info("[StreamController] load url: "+e.url),r.manifestLoader.load(e.url).then((function(e){r.manifestModel.setValue(e),r.metricsModel.addMetaData(),r.debug.info("[StreamController] Manifest has loaded."),r.manifestUpdater.start()}),(function(e){S.resolve(),S=null,e&&r.errHandler.sendError(e.name,e.message,e.data)})))},refreshManifest:function(e){var t=this.manifestModel.getValue(),n=e||(t.hasOwnProperty("Location")?t.Location:t.mpdUrl);this.debug.log("[StreamController] Refresh manifest: "+n);var r=this;this.manifestLoader.abort(),this.manifestLoader.load(n,!0).then((function(e){r.manifestModel.setValue(e),r.debug.log("[StreamController] Manifest has been refreshed"),T=!1}),(function(t){void 0!==t&&(e?T&&r.errHandler.sendError(t.name,t.message,t.data):(r.errHandler.sendWarning(t.name,t.message,t.data),r.eventBus.dispatchEvent({type:"manifestUrlUpdate",data:{url:n}})))}))},reset:function(e){var i,o,a={},s=[],u=this;this.debug.info("[StreamController] Reset"),n&&A.call(this,n.getVideoModel()),c=!1,u.manifestLoader.abort(),u.manifestUpdater.stop(),u.parser.reset(),a[d.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE]=function(){h=!1,r=null,l=null,u.manifestModel.setValue(null),u.metricsModel.addState("video","stopped",u.videoModel.getCurrentTime(),e),u.metricsModel.clearAllCurrentMetrics(),u.notify(d.dependencies.StreamController.eventList.ENAME_TEARDOWN_COMPLETE)},t.when(!S||S.promise).then((function(){for(u.pause(),y=!1,o=0;o<f.length;o+=1)i=f[o],s.push(i.reset()),i!==n&&U(i.getVideoModel().getElement());u.videoModel.reset(),t.all(s).then((function(){f=[],n=null,r?h?(r.protectionModel.subscribe(d.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE,a,void 0,!0),r.teardown()):(r.setMediaElement(null),a[d.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE]()):a[d.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE]()}))}))},setDefaultAudioLang:function(e){v=e},setDefaultSubtitleLang:function(e){_=e},enableSubtitles:function(e){E=e,n&&n.enableSubtitles(e)},setTrickModeSpeed:function(e){n&&n.setTrickModeSpeed(e)},getTrickModeSpeed:function(){return n?n.getTrickModeSpeed():0},play:function(){n.play()},pause:function(){n&&n.pause()},seek:function(e,t){n&&n.seek(e,t)}}},d.dependencies.StreamController.prototype={constructor:d.dependencies.StreamController},d.dependencies.StreamController.eventList={ENAME_STREAMS_COMPOSED:"streamsComposed",ENAME_TEARDOWN_COMPLETE:"streamTeardownComplete"},d.utils.TokenAuthentication=function(){"use strict";var e={type:d.utils.TokenAuthentication.TYPE_QUERY};return{debug:void 0,getTokenAuthentication:function(){return e},setTokenAuthentication:function(t){e=t},checkRequestHeaderForToken:function(t){void 0!==e.name&&null!==t.getResponseHeader(e.name)&&(e.token=t.getResponseHeader(e.name),this.debug.log(e.name+" received: "+e.token))},addTokenAsQueryArg:function(t){if(void 0!==e.name&&void 0!==e.token&&e.type===d.utils.TokenAuthentication.TYPE_QUERY){var n=-1===t.indexOf("?")?"?":"&";t+=n+e.name+"="+e.token,this.debug.log(e.name+" is being appended on the request url with a value of : "+e.token)}return t},setTokenInRequestHeader:function(t){return e.type===d.utils.TokenAuthentication.TYPE_HEADER&&(t.setRequestHeader(e.name,e.token),this.debug.log(e.name+" is being set in the request header with a value of : "+e.token)),t}}},d.utils.TokenAuthentication.TYPE_QUERY="query",d.utils.TokenAuthentication.TYPE_HEADER="header",d.models.URIQueryAndFragmentModel=function(){"use strict";var e=new d.vo.URIFragmentData,t=[],n=function(){e=new d.vo.URIFragmentData,t=[]},r=function(n){var r=[],i=new RegExp(/[?]/),o=new RegExp(/[#]/),a=i.test(n),s=o.test(n);function u(e,t,n,r){var i=r[0].split(/[=]/);return r.push({key:i[0],value:i[1]}),r.shift(),r}function l(e,n,i){return n>0&&(a&&0===t.length?t=i[n].split(/[&]/):s&&(r=i[n].split(/[&]/))),i}return n.split(/[?#]/).map(l),t.length>0&&(t=t.reduce(u,null)),r.length>0&&(r=r.reduce(u,null),r.forEach((function(t){e[t.key]=t.value}))),n};return{parseURI:r,reset:n,getURIFragmentData:function(){return e},getURIQueryData:t}},d.models.URIQueryAndFragmentModel.prototype={constructor:d.models.URIQueryAndFragmentModel},d.models.VideoModel=function(){"use strict";var e,t=[],n=null,r=function(e){null!==e&&-1===t.indexOf(e)&&(this.debug.info("<video> # stall stream "+e),t.push(e),1===t.length&&this.setPlaybackRate(0))},i=function(n){var r=t.indexOf(n);null!==n&&(this.debug.info("<video> # unstall stream "+n),-1!==r&&t.splice(r,1),!1===this.isStalled()&&0===e.playbackRate&&this.setPlaybackRate(1))};return{system:void 0,debug:void 0,setup:function(){t=[]},reset:function(){t=[]},play:function(){this.debug.info("<video> # play()"),e.play()},pause:function(){this.debug.info("<video> # pause()"),e.pause()},isPaused:function(){return e.paused},isSeeking:function(){return e.seeking},getDuration:function(){return e.duration},getPlaybackRate:function(){return e.playbackRate},setPlaybackRate:function(t){this.debug.info("<video> # playbackRate = "+t),e.playbackRate=t},getMute:function(){return e.muted},setMute:function(t){e.muted=t},getVolume:function(){return e.volume},setVolume:function(t){e.volume=t},getCurrentTime:function(){return e.currentTime},setCurrentTime:function(t){this.debug.info("<video> # currentTime = "+t),e.currentTime=t},listen:function(t,n){e.addEventListener(t,n,!1)},unlisten:function(t,n){e.removeEventListener(t,n,!1)},listenOnParent:function(t,n){e.parentElement.addEventListener(t,n,!1)},unlistenOnParent:function(t,n){e.parentElement.removeEventListener(t,n,!1)},getElement:function(){return e},setElement:function(t){e=t},setSource:function(t){t?(this.debug.info("<video> # set source"),e.src=t):(this.debug.info("<video> # reset source"),e.removeAttribute("src"),e.load())},isStalled:function(){return t.length>0},stallStream:function(e,t){t?r.call(this,e):i.call(this,e)},getTTMLRenderingDiv:function(){return n},setTTMLRenderingDiv:function(e){n=e,n.style.position="absolute",n.style.display="flex",n.style.overflow="hidden",n.style.pointerEvents="none",n.style.top=0,n.style.left=0}}},d.models.VideoModel.prototype={constructor:d.models.VideoModel},d.dependencies.VideoModelExtensions=function(){"use strict";return{getPlaybackQuality:function(e){var t="webkitDroppedFrameCount"in e,n="getVideoPlaybackQuality"in e,r=null;return n?r=e.getVideoPlaybackQuality():t&&(r={droppedVideoFrames:e.webkitDroppedFrameCount,creationTime:new Date,totalVideoFrames:e.webkitDecodedFrameCount}),r}}},d.dependencies.VideoModelExtensions.prototype={constructor:d.dependencies.VideoModelExtensions},d.dependencies.XHRLoader=function(){"use strict";var e=null,n=null,r=null,i=null,o=null,a=0,s=0,u=0,l=null,c=null,d=function(){null!==e&&e.readyState>0&&e.readyState<4?e.abort():l&&(clearTimeout(l),l=null,c.reject())},f=function(){var t=!0,d=function(t){o&&o(e,t)},h=function(){e.aborted=!0},p=function(){e.status<200||e.status>299||200===e.status&&4===e.readyState&&(t=!1,e.endDate=new Date,c.resolve(e))},m=function(){t&&(t=!1,e.endDate=new Date,u++,!e.aborted&&a>0&&u<=a?l=setTimeout((function(){f()}),s):c.reject(e))};try{e=new XMLHttpRequest,e.open("GET",n,!0),r&&(e.responseType=r),i&&e.setRequestHeader("Range","bytes="+i),e.onprogress=d,e.onabort=h,e.onload=p,e.onloadend=m,e.onerror=m,e.startDate=new Date,e.send()}catch(g){e.onerror()}};return{initialize:function(e,t,n,i){r=e,a=t,s=n,o=i},load:function(e,r){return n=e,i=r,u=0,c=t.defer(),f(),c.promise},abort:d}},d.dependencies.XHRLoader.prototype={constructor:d.dependencies.XHRLoader},d.dependencies.TextController=function(){var e,t,n,r,i="LOADING",o="READY",a=!1,s=null,u=o,l=function(e){this.debug.log("TextController setState to:"+e),u=e},c=function(){if(a&&u===o){var e=this;e.indexHandler.getInitRequest(r[0]).then((function(t){e.fragmentLoader.load(t).then(h.bind(e,t),p.bind(e,t)),l.call(e,i)}))}},d=function(){c.call(this)},f=function(e,t){var n,r,i=this.manifestModel.getValue();return r=this.manifestExt.getDataIndex(e,i,t.index),n=this.manifestExt.getAdaptationsForPeriod(i,t),this.manifestExt.getRepresentationsForAdaptation(i,n[r])},h=function(e,t){var r=this;r.fragmentController.process(t.data,e).then((function(e){null!==e&&r.sourceBufferExt.append(n,e,r.videoModel)}))},p=function(){};return{videoModel:void 0,fragmentLoader:void 0,fragmentController:void 0,indexHandler:void 0,sourceBufferExt:void 0,manifestModel:void 0,manifestExt:void 0,debug:void 0,initialize:function(e,t,n,r,i){var o=this;o.setVideoModel(r),o.setBuffer(n),o.setMediaSource(i),o.updateData(t,e),a=!0,c.call(o)},setPeriodInfo:function(e){s=e},getPeriodIndex:function(){return s.index},getVideoModel:function(){return this.videoModel},setVideoModel:function(e){this.videoModel=e},getData:function(){return t},setData:function(e){t=e},getBuffer:function(){return n},setBuffer:function(e){n=e},setMediaSource:function(t){e=t},updateData:function(e,n){t=e,s=n,r=f.call(this,t,s),l.call(this,o),c.call(this)},reset:function(t){t||(this.sourceBufferExt.abort(e,n),this.sourceBufferExt.removeSourceBuffer(e,n))},start:d}},d.dependencies.TextController.prototype={constructor:d.dependencies.TextController},d.dependencies.TextSourceBuffer=function(){var e,t,n,r=function(e){var t="",n=0,r=0,i=0,o=0,a=new Uint8Array(e);a.length>=3&&239===a[0]&&187===a[1]&&191===a[2]&&(n=3);while(n<a.length)if(r=a[n],r<128)t+=String.fromCharCode(r),n++;else if(r>191&&r<224){if(n+1>=a.length)throw"UTF-8 Decode failed. Two byte character was truncated.";i=a[n+1],t+=String.fromCharCode((31&r)<<6|63&i),n+=2}else{if(n+2>=a.length)throw"UTF-8 Decode failed. Multi byte character was truncated.";i=a[n+1],o=a[n+2],t+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&o),n+=3}return t},i={length:0,ranges:[],start:function(e){return this.ranges[e].start},end:function(e){return this.ranges[e].end},addRange:function(e,t){var n=0,r=!1,i=.01;for(n=0;n<this.ranges.length;n++)this.ranges[n].end<=e+i&&this.ranges[n].end>=e-i&&(r=!0,this.ranges[n].end=t),this.ranges[n].start<=t+i&&this.ranges[n].start>=t-i&&(r=!0,this.ranges[n].start=e);r||(this.ranges.push({start:e,end:t}),this.length=this.length+1,this.ranges.sort((function(e,t){return e.start-t.start})))},removeRange:function(e,t){var n=0;for(n=this.ranges.length-1;n>=0;n-=1)(void 0===t||-1===t||this.ranges[n].end<=t)&&(void 0===e||-1===e||this.ranges[n].start>=e)&&this.ranges.splice(n,1);this.length=this.ranges.length},reset:function(){this.length=0,this.ranges=[]}};return{system:void 0,eventBus:void 0,errHandler:void 0,textTrackExtensions:void 0,buffered:i,initialize:function(r,o){n=r,e=o.getVideoModel().getElement(),t=o.getData(),i.reset()},remove:function(t,n){if(t<0||t>=n)throw"INVALID_ACCESS_ERR";this.textTrackExtensions.deleteCues(e,!1,t,n),this.buffered.removeRange(t,n)},append:function(n,i){var o=this,a=r(n),s=o.getParser().parse(a,i);0===e.textTracks.length&&o.textTrackExtensions.addTextTrack(e,[],t.Representation_asArray[0].id,t.lang,!0),0!==e.textTracks.length&&(o.textTrackExtensions.addCues(e.textTracks[0],s),i&&o.buffered.addRange(i.startTime,i.startTime+i.duration))},abort:function(){this.textTrackExtensions.deleteCues(e),this.buffered.reset()},getParser:function(){var e;return"text/vtt"===n&&(e=this.system.getObject("vttParser")),e},addEventListener:function(e,t,n){this.eventBus.addEventListener(e,t,n)},removeEventListener:function(e,t,n){this.eventBus.removeEventListener(e,t,n)}}},d.dependencies.TextSourceBuffer.prototype={constructor:d.dependencies.TextSourceBuffer},d.utils.TextTrackExtensions=function(){"use strict";var e,t="",n=null;return{system:void 0,eventBus:void 0,videoModel:void 0,debug:void 0,config:void 0,setup:function(){e=window.VTTCue||window.TextTrackCue},cueEnter:function(e,t,n){this.eventBus.dispatchEvent({type:"cueEnter",data:{text:t,style:e,type:n}})},cueExit:function(e,t,n){this.eventBus.dispatchEvent({type:"cueExit",data:{text:t,style:e,type:n}})},getCurrentTextTrack:function(e){for(var t=0;t<e.textTracks.length;t++)if("hascaption"===e.textTracks[t].label)return e.textTracks[t];return null},addTextTrack:function(r,i,o,a,s){var u,l=null,c=null,d="subtitles",f=this.videoModel.getTTMLRenderingDiv();for(l=this.getCurrentTextTrack(r),l?(this.cleanSubtitles(),l.default=s,"showing"!==l.mode&&"metadata"!==l.kind&&(l.mode="showing"),t=a):(f&&(n=this.system.getObject("ttmlRenderer"),n.initialize(f)),d=null!==f?"metadata":"subtitles","subtitles"===d&&(d=!0===this.config.getParam("TextTrackExtensions.displayModeExtern","boolean")?"metadata":"subtitles"),l=r.addTextTrack(d,"hascaption",a),t=a,l.default=s,l.mode="metadata"!==d?"showing":"hidden"),u=0;u<i.length;u+=1)c=i[u],l.addCue(new e(c.start,c.end,c.data));return l},onCueEnter:function(e){var t=this.videoModel.getTTMLRenderingDiv();"image"===e.currentTarget.type&&null===t&&this.debug.warn("[TextTrackExtensions] Rendering image subtitles without div is impossible"),t&&n.onCueEnter(e),this.cueEnter(e.currentTarget.style,e.currentTarget.text,e.currentTarget.type)},onCueExit:function(e){var t=this.videoModel.getTTMLRenderingDiv();t&&n.onCueExit(e),this.cueExit(e.currentTarget.style,e.currentTarget.text)},addCues:function(n,r){var i=0,o=null,a=null;for(i=0;i<r.length;i+=1)o=r[i],o.start<o.end&&(a=new e(o.start,o.end,o.data),a.id=t,a.type=o.type,a.onenter=this.onCueEnter.bind(this),a.onexit=this.onCueExit.bind(this),a.snapToLines=!1,a.line=o.line,o.style&&(a.style=o.style),n.addCue(a))},deleteCues:function(e,t,n,r){var i,o=null,a=null,s=null,u=0;if(e&&(o=e.textTracks[0],o)){if(i=o.mode,"disabled"===i&&(o.mode="hidden"),a=o.cues,a)for(s=a.length-1,u=s;u>=0;u-=1)(void 0===r||-1===r||a[u].endTime<=r)&&(void 0===n||-1===n||a[u].startTime>=n)&&o.removeCue(a[u]);o.mode=i}},cleanSubtitles:function(){var e=this.videoModel.getTTMLRenderingDiv();e&&n&&n.cleanSubtitles()}}},d.dependencies.TextTTMLXMLMP4SourceBuffer=function(){var e,n,r,i,o={length:0,ranges:[],start:function(e){return this.ranges[e].start},end:function(e){return this.ranges[e].end},addRange:function(e,t){var n=0,r=!1,i=.01;for(n=0;n<this.ranges.length;n++)this.ranges[n].end<=e+i&&this.ranges[n].end>=e-i&&(r=!0,this.ranges[n].end=t),this.ranges[n].start<=t+i&&this.ranges[n].start>=t-i&&(r=!0,this.ranges[n].start=e);r||(this.ranges.push({start:e,end:t}),this.length=this.length+1,this.ranges.sort((function(e,t){return e.start-t.start})))},removeRange:function(e,t){var n=0;for(n=this.ranges.length-1;n>=0;n-=1)(void 0===t||-1===t||this.ranges[n].end<=t)&&(void 0===e||-1===e||this.ranges[n].start>=e)&&this.ranges.splice(n,1);this.length=this.ranges.length},reset:function(){this.length=0,this.ranges=[]}};return{updating:!1,system:void 0,eventBus:void 0,buffered:o,textTrackExtensions:void 0,ttmlParser:void 0,debug:void 0,manifestModel:void 0,errHandler:void 0,initialize:function(t,a,s){n=t,e=a.getVideoModel().getElement(),o.reset(),r=s.lang,i=s.id},remove:function(t,n){if(t<0||t>=n)throw"INVALID_ACCESS_ERR";this.getTextTrackExtensions().deleteCues(e,!1,t,n),this.buffered.removeRange(t,n)},append:function(t){var o,a,s,u,l,c,f,h,p,m,g=this,y=_.deserialize(t),v=y.getBoxByType("moov"),E=0,b="utf-8";if("application/ttml+xml"===n)return this.track=this.textTrackExtensions.addTextTrack(e,[],i,r,!0),d.utils.isUTF16(t)&&(b="utf-16"),void this.convertUTFToString(t,b).then((function(t){g.ttmlParser.parse(t).then((function(t){t&&(g.textTrackExtensions.addCues(g.track,t),g.buffered.addRange(0,e.duration),g.eventBus.dispatchEvent({type:"updateend"}))}),(function(e){g.errHandler.sendWarning(d.dependencies.ErrorHandler.prototype.INTERNAL_ERROR,"Internal error while parsing TTML data",e)}))}));if(v)return o=v.getBoxByType("mvhd"),g.timescale=o.timescale,this.track=this.textTrackExtensions.addTextTrack(e,[],i,r,!0),void this.eventBus.dispatchEvent({type:"updateend"});if(a=y.getBoxByType("moof"),a){if(s=y.getBoxByType("mdat"),u=a.getBoxByType("traf"),l=u.getBoxByType("tfhd"),c=u.getBoxByType("tfdt"),f=u.getBoxByType("trun"),h=u.getBoxByType("subs"),p=c.baseMediaDecodeTime/g.timescale,E=0,E=256&f.flags?f.samples_table[0].sample_duration/g.timescale:l.default_sample_duration/g.timescale,g.buffered.addRange(p,p+E),h)for(var T=0;T<h.entry_count;T++)for(var S=0;S<h.entry[T].subsample_count;S++){m=s.data.subarray(0,h.entry[T].subSampleEntries[0].subsample_size);break}else m=s.data;d.utils.isUTF16(m)&&(b="utf-16"),g.convertUTFToString(m,b).then((function(e){g.ttmlParser.parse(e).then((function(e){var t,n=g.manifestModel.getValue();if(e){if("MSS"===n.name)for(t=0;t<e.length;t+=1)e[t].start=e[t].start+p,e[t].end=e[t].end+p;g.textTrackExtensions.addCues(g.track,e),g.eventBus.dispatchEvent({type:"updateend"})}}),(function(e){g.errHandler.sendWarning(d.dependencies.ErrorHandler.prototype.INTERNAL_ERROR,"Internal error while parsing TTML data",e)}))}))}},convertUTFToString:function(e,n){var r=t.defer(),i=new Blob([e],{type:"text/xml"}),o=new FileReader;return o.onload=function(e){r.resolve(e.target.result)},o.readAsText(i,n),r.promise},UpdateLang:function(e,t){i=e,r=t},abort:function(){this.getTextTrackExtensions().deleteCues(e,!0)},getTextTrackExtensions:function(){return this.textTrackExtensions},addEventListener:function(e,t,n){this.eventBus.addEventListener(e,t,n),this.updating||this.eventBus.dispatchEvent({type:"updateend"})},removeEventListener:function(e,t,n){this.eventBus.removeEventListener(e,t,n)}}},d.dependencies.TextTTMLXMLMP4SourceBuffer.prototype={constructor:d.dependencies.TextTTMLXMLMP4SourceBuffer},d.utils.TTMLParser=function(){"use strict";var e=3600,n=60,r="http://www.w3.org/2006/10/ttaf1",i="http://www.w3.org/2006/10/ttaf1#parameter",o="http://www.w3.org/2006/10/ttaf1#styling",a="http://www.w3.org/ns/ttml",s="http://www.w3.org/ns/ttml#parameter",u="http://www.w3.org/ns/ttml#styling",l="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",c=[a,r],d=[u,o],f=[s,i],h=[l],p=/^(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])((\.[0-9][0-9][0-9])|(:[0-9][0-9]))$/,m=/^\d+(\.\d+|)(h|m|s|ms|f)$/,g=null,y=null,v=null,_=null,E=null,b=[],T=[],S=[],w=function(t){var r,i,o;if(p.test(t))return r=t.split(":"),i=parseFloat(r[0])*e+parseFloat(r[1])*n+parseFloat(r[2]),r[3]&&E&&!isNaN(E)&&(i+=parseFloat(r[3])/E),i;if(m.test(t)){switch("ms"==t.substr(t.length-2)?(i=parseFloat(t.substr(0,t.length-3)),o=t.substr(t.length-2)):(i=parseFloat(t.substr(0,t.length-2)),o=t.substr(t.length-1)),o){case"h":i=60*i*60;break;case"m":i*=60;break;case"s":break;case"ms":i*=.01;break;case"f":if(!E||isNaN(E))return NaN;i/=E;break}return i}return NaN},x=function(){var e=!1;return y=g?this.domParser.getChildNode(g,"tt"):null,v=y?this.domParser.getChildNode(y,"head"):null,v?this.domParser.getChildNode(v,"layout"):null,v?this.domParser.getChildNode(v,"styling"):null,_=y?this.domParser.getChildNode(y,"body"):null,y&&v&&_&&(e=!0),e},I=function(e,t,n){var r,i,o=null,a=0;for(a=0;a<e.length;a+=1){if(o=D.call(this,[e[a]],d,t),o)return o;if(r=D.call(this,[e[a]],c,"style"),r){if(o=A.call(this,b,r,t),o)return o;r=A.call(this,b,r,"style");while(r){if(o=A.call(this,b,r,t),o)return o;r=A.call(this,b,r,"style")}}if(i=D.call(this,[e[a]],c,"region"),i){if(o=A.call(this,T,i,t),o)return o;if(r=A.call(this,T,i,"style"),r){if(o=A.call(this,b,r,t),o)return o;r=A.call(this,b,r,"style");while(r){if(o=A.call(this,b,r,t),o)return o;r=A.call(this,b,r,"style")}}}}return void 0!==n?n:null},A=function(e,t,n){var r=0,i=null,o=0;for(r=0;r<e[t].length;r+=1){for(o=0;o<d.length;o+=1)if(i=e[t].getNamedItem(n),i||(i=e[t].getNamedItemNS(d[o],n)),i)return i.nodeValue;for(o=0;o<c.length;o+=1)if(i=e[t].getNamedItem(n),i||(i=e[t].getNamedItemNS(c[o],n)),i)return i.nodeValue}return null},D=function(e,t,n){var r=null,i=0,o=0;for(i=0;i<e.length;i+=1)for(o=0;o<t.length;o+=1)if(r=this.domParser.getAttributeValue(e[i],n,t[o]),r)return r;return r},R=function(e){e||(e="32 15");var t=e,n=0;for(t=t.split(" "),n=0;n<t.length;n+=1)t[n]=parseFloat(t[n]);return t},M=function(e,t){var n={backgroundColor:null,color:null,fontSize:null,fontFamily:null,fontStyle:null,textOutline:{color:null,with:null},textAlign:null,displayAlign:null,origin:null,extent:null,cellResolution:null,rootExtent:t,showBackground:null};return n.backgroundColor=I.call(this,e,"backgroundColor","transparent"),n.color=I.call(this,e,"color"),n.fontSize=I.call(this,e,"fontSize"),n.fontFamily=I.call(this,e,"fontFamily"),n.fontStyle=I.call(this,e,"fontStyle","normal"),n.textOutline=I.call(this,e,"textOutline"),n.extent=I.call(this,e,"extent"),n.origin=I.call(this,e,"origin"),n.textAlign=I.call(this,e,"textAlign","start"),n.displayAlign=I.call(this,e,"displayAlign","before"),n.showBackground=I.call(this,e,"showBackground"),n.cellResolution=D.call(this,e,f,"cellResolution"),n.cellResolution=R(n.cellResolution),n},C=function(e){var n,r,i,o,a,s,u,l,d,p,m,v,A,R,C,N=[],L=null,P=null,O=null,F="",k="";try{if(null!==this.videoModel.getTTMLRenderingDiv()&&(k="html"),g=this.domParser.createXmlTree(e),!x.call(this))return n="TTML document has incorrect structure",t.reject(n);for(l=0;l<f.length;l+=1)E=this.domParser.getAttributeValue(y,"frameRate",f[l])?parseInt(E,10):null;if(u=this.domParser.getChildNodes(_,"div"),!u||0===u.length)return n="TTML body document does not contain any div",t.reject(n);for(b=this.domParser.getAllSpecificNodes(y,"style"),T=this.domParser.getAllSpecificNodes(y,"region"),S=this.domParser.getAllSpecificNodes(y,"image"),v=I.call(this,[y],"extent"),m=0;m<u.length;m+=1)if(R=D.call(this,[u[m]],h,"backgroundImage"),R&&void 0!==S[R.substring(1)]&&(o=w(D.call(this,[u[m]],c,"begin")),a=w(D.call(this,[u[m]],c,"end")),O=M.call(this,[u[m],y],v),s={start:o,end:a,data:"data:image/"+S[R.substring(1)].imagetype.nodeValue+";base64, "+this.domParser.getChildNode(S[R.substring(1)],"#text").nodeValue,type:"image",line:80,style:O},N.push(s)),r=this.domParser.getChildNodes(u[m],"p"),r&&0!==r.length)for(l=0;l<r.length;l+=1)if(s=null,O=null,i=r[l],o=w(D.call(this,[i],c,"begin")),a=w(D.call(this,[i],c,"end")),isNaN(o)||isNaN(a)||a<o)n="TTML document has incorrect timing value";else if(R=D.call(this,[i],h,"backgroundImage"),R&&void 0!==S[R.substring(1)]&&(O=M.call(this,[i,u[m],y],v),s={start:o,end:a,data:"data:image/"+S[R.substring(1)].imagetype.nodeValue+";base64, "+this.domParser.getChildNode(S[R.substring(1)],"#text").nodeValue,type:"image",line:80,style:O}),d=this.domParser.getChildNodes(i,"span"),d.length>0){for(p=0;p<d.length;p++){p>0&&(F+="\n"),0===p&&(O=M.call(this,[d[p],i,_,y,u[m]],v)),A=this.domParser.getTextNodesIn(d[p]);for(var B=0;B<A.length;B+=1)B>0&&(F+="\n"),F+=A[B].textContent}s={start:o,end:a,data:F,type:"text",line:80,style:O},F="",N.push(s)}else{if(O=M.call(this,[i,_,y],v),l>0&&(L=w(D.call(this,[r[l-1]],c,"begin")),P=w(D.call(this,[r[l-1]],c,"end"))),o===L&&a===P||o>=L&&a<=P)""!==i.textContent&&("html"===k?s={start:o,end:a,data:i.textContent,type:"text",line:80,style:O}:(o>=L&&a<=P?(C=N[N.length-1],C.end=o):C=N.pop(),s={start:o,end:a,data:C.data+"\n"+i.textContent,type:"text",line:80,style:O}));else{for(A=this.domParser.getTextNodesIn(i),p=0;p<A.length;p+=1)p>0&&(F+="\n"),F+=A[p].textContent;""!==F&&(s={start:o,end:a,data:F,type:"text",line:80,style:O},F="")}null!==s&&N.push(s)}else n="TTML document does not contain any cues";return N.length>0?t.when(N):t.reject(n)}catch(U){return n=U.message,t.reject(n)}};return{domParser:void 0,videoModel:void 0,parse:C}},d.utils.TTMLRenderer=function(){"use strict";var e,t=[],n=function(){var n=0;for(n=0;n<t.length;n++)c(t[n],t[n].ttmlStyle,e)},r=function(){this.cleanSubtitles()},i=function(){var t=document.createElement("div");return t.style.position="absolute",t.style.display="flex",t.style.flexDirection="row",t.style.overflow="initial",t.style.pointerEvents="none",e.appendChild(t),t},o=function(t){e.hasChildNodes()&&e.removeChild(t)},a=function(e,t){var n,r;if(e&&"%"===e[e.length-1])n=parseFloat(e.substr(0,e.length-1))/100*t[1]+"px";else if(e&&"x"===e[e.length-1])n=e;else if(e&&"c"===e[e.length-1]){var i=e.replace(/\s/g,"").split("c");for(r=0;r<i.length;r+=1)i[r]=parseFloat(i[r]);n=isNaN(i[1])?i[0]*t[1]+"px":i[1]*t[1]+"px"}else n=t[1]+"px";return n},s=function(e,t,n){var r,i={color:n,width:null},o=0;if(e&&(e=e.split(" "),e[0]&&isNaN(e[0][0])?(i.color=e[0],o=1):i.color=n,i.color&&"#"===i.color[0]&&(i.color=u(i.color)),e[o]))switch(r=e[o][e[o].length-1],r){case"c":e[o]=e[o].split("c"),e[o][0]&&(i.width=e[o][0]*t[1]+"px");break;case"x":i.width=e[o];break}return i},u=function(e){e=e.replace("#","");var t=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16),i=e.length>6?parseInt(e.substring(6,8),16):255,o="rgba("+t+","+n+","+r+","+i+")";return o},l=function(e){var t,n,r=e;return t=e.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),t[t.length-1]>1&&(n=parseInt(t[t.length-1],10)/255,r="rgba("+t[0]+","+t[1]+","+t[2]+","+n+")"),r},c=function(e,t,n){var r,i,o,c,d=[n.clientWidth/t.cellResolution[0],n.clientHeight/t.cellResolution[1]];if(e){if(t.backgroundColor&&"#"===t.backgroundColor[0]?t.backgroundColor=u(t.backgroundColor):t.backgroundColor&&"a"===t.backgroundColor[3]&&(t.backgroundColor=l(t.backgroundColor)),t.color&&"#"===t.color[0]?t.color=u(t.color):t.color&&"a"===t.color[3]&&(t.color=l(t.color)),t.origin&&"%"===t.origin[t.origin.length-1])r=t.origin.split("%"),e.style.left=parseInt(r[0],10)+"%",e.style.top=parseInt(r[1],10)+"%",t.extent&&"%"===t.extent[t.extent.length-1]&&(i=t.extent.split("%"),e.style.width=parseInt(i[0],10)+"%",e.style.height=parseInt(i[1],10)+"%");else if(t.origin&&"x"===t.origin[t.origin.length-1])if(r=t.origin.split("px"),t.rootExtent&&"x"===t.rootExtent[t.rootExtent.length-1]){c=t.rootExtent.split("px");var f=r[0]/c[0]*n.clientWidth;e.style.left=f/n.clientWidth*100+"%",f=r[1]/c[1]*n.clientHeight,e.style.top=f/n.clientHeight*100+"%",t.extent&&"x"===t.extent[t.extent.length-1]&&(i=t.extent.split("px"),f=i[0]/c[0]*n.clientWidth,e.style.width=f/n.clientWidth*100+"%",f=i[1]/c[1]*n.clientHeight,e.style.height=f/n.clientHeight*100+"%")}else e.style.left=r[0]+"px",e.style.top=r[1]+"px";else t.origin&&"c"===t.origin[t.origin.length-1]&&(r=t.origin.split("c"),e.style.left=r[0]*d[0]+"px",e.style.top=r[1]*d[1]+"px",t.extent&&"c"===t.extent[t.extent.length-1]&&(i=t.extent.split("c"),e.style.width=i[0]*d[0]+"px",e.style.height=i[1]*d[1]+"px"));switch(o=s(t.textOutline,d,t.color),e.style.webkitTextStrokeWidth=o.width,e.style.webkitTextStroke=o.color,t.textAlign){case"start":e.style.justifyContent="flex-start";break;case"end":e.style.justifyContent="flex-end";break;case"center":e.style.justifyContent="center";break;case"right":e.style.justifyContent="flex-end";break;case"left":e.style.justifyContent="flex-start";break;default:e.style.justifyContent="flex-start"}switch(t.displayAlign){case"before":e.style.alignItems="flex-start";break;case"center":e.style.alignItems=t.displayAlign;break;case"after":e.style.alignItems="flex-end";break;default:e.style.alignItems="flex-start"}e.style.fontStyle=t.fontStyle,t.showBackground&&"whenActive"===t.showBackground?e.style.backgroundColor="transparent":e.style.backgroundColor=t.backgroundColor,e.style.color=t.color,e.style.fontSize=a(t.fontSize,d),e.style.fontFamily=t.fontFamily}};return{videoModel:void 0,initialize:function(t){e=t,document.addEventListener("webkitfullscreenchange",n.bind(this)),document.addEventListener("mozfullscreenchange",n.bind(this)),document.addEventListener("fullscreenchange",n.bind(this)),this.videoModel.listen("seeking",r.bind(this))},cleanSubtitles:function(){var e=0;for(e=0;e<t.length;e++)o(t[e]);t=[]},onCueEnter:function(n){var r=i();if(n.currentTarget.style&&(c(r,n.currentTarget.style,e),r.ttmlStyle=n.currentTarget.style),"image"!==n.currentTarget.type){var o=document.createElement("p");r.appendChild(o),o.innerText=n.currentTarget.text,o.style.marginTop="auto",r.ttmlStyle&&r.ttmlStyle.showBackground&&"whenActive"===r.ttmlStyle.showBackground&&(o.style.backgroundColor=n.currentTarget.style.backgroundColor)}else{var a=new Image;a.style.height="auto",a.style.width="auto",a.src=n.currentTarget.text,r.appendChild(a)}r.data=n.currentTarget.text,t.push(r)},onCueExit:function(e){var n=0;for(n=0;n<t.length;n++)if(e.currentTarget.text===t[n].data&&t[n].ttmlStyle===e.currentTarget.style)break;o(t[n]),t.splice(n,1)}}},d.utils.VTTParser=function(){"use strict";var e=/X-TIMESTAMP-MAP=(.+)/,t=/\s*(.+?)\s*:((?:\".*?\")|.*?)(?:,|$)/g,n=/(\S*)[\s]*-->[\s]*(\S*)(.*)/g,r=/(?:\r\n|\r|\n)/gm,i=function(e){for(var t=e.split(":"),n=t.length,r=0,i=0;i<n;i++)r+=parseFloat(t[i],10)*Math.pow(60,n-i-1);return r},o=function(n){var r,o,a,s,u=null,l=null;if(r=e.exec(n),!r)return-1;o=r[1];while(null!==(r=t.exec(o)))switch(a=r[1],s=r[2],a){case"MPEGTS":l=parseInt(s,10);break;case"LOCAL":u=i(s)}return null===u||null===l?-1:{local:u,mpegts:l}},a=function(e,t){if(-1===e)return 0;var n=this.manifestModel.getValue().timestampMap;if(!n)return e.local-t.startTime;var r=(e.mpegts-n.mpegts)/9e4;return e.local-n.local-r};return{manifestModel:void 0,parse:function(e,t){var s,u,l,c=[],d=null,f=a.call(this,o(e),t),h=e.split(r);for(l=0;l<h.length;l++)s=h[l].trim(),0!==s.length&&(h[l].match(n)?(null!==d&&c.push(d),u=h[l].split(n),d={type:"text",line:80,start:i(u[1])-f,end:i(u[2])-f,data:""}):null!==d&&(d.data+=(0===d.data.length?"":"\n")+h[l]));return null!==d&&c.push(d),c}}},d.rules.AbandonRequestsRule=function(){"use strict";var e=.5,t=2;return{debug:void 0,metricsExt:void 0,name:"AbandonRequestRule",execute:function(n,r){var i,o,a,s=(new Date).getTime(),u=n.streamType,l=new d.rules.SwitchRequest(d.rules.SwitchRequest.prototype.NO_CHANGE,d.rules.SwitchRequest.prototype.WEAK);if(null===n.firstByteDate||n.aborted)return this.debug.log("[AbandonRequestsRule]["+u+"] Request has already been aborted."),void r(l);i=(s-n.firstByteDate.getTime())/1e3,n.bytesLoaded<n.bytesTotal&&i>=n.duration*e&&(o=n.bytesLoaded/i,a=n.bytesTotal/o,a>n.duration*t&&(l=new d.rules.SwitchRequest(0,d.rules.SwitchRequest.prototype.STRONG),this.debug.info("[AbandonRequestsRule]["+u+"] BW = "+(8*o/1e3).toFixed(3)+" kb/s => switch to lowest quality"))),r(l)}}},d.rules.AbandonRequestsRule.prototype={constructor:d.rules.AbandonRequestsRule},d.rules.BaseRulesCollection=function(){"use strict";var e=[],t=[];return{downloadRatioRule:void 0,insufficientBufferRule:void 0,droppedFramesRule:void 0,abandonRequestRule:void 0,getRules:function(n){switch(n){case d.rules.BaseRulesCollection.prototype.QUALITY_SWITCH_RULES:return e;case d.rules.BaseRulesCollection.prototype.ABANDON_FRAGMENT_RULES:return t;default:return null}},setup:function(){e.push(this.downloadRatioRule),e.push(this.insufficientBufferRule),e.push(this.droppedFramesRule),t.push(this.abandonRequestRule)}}},d.rules.BaseRulesCollection.prototype={constructor:d.rules.BaseRulesCollection,QUALITY_SWITCH_RULES:"qualitySwitchRules",ABANDON_FRAGMENT_RULES:"abandonFragmentRules"},d.rules.DownloadRatioRule=function(){"use strict";return{debug:void 0,manifestExt:void 0,metricsExt:void 0,manifestModel:void 0,config:void 0,name:"DownloadRatioRule",checkIndex:function(e,t,n){var r,i,o,a,s,u,l,c,f,h=this.metricsExt.getHttpRequests(t),p=null,m=[],g=d.rules.SwitchRequest.prototype.NO_CHANGE,y=0,v=d.rules.SwitchRequest.prototype.DEFAULT;if(n&&n.hasOwnProperty("type")){if(s=this.config.getParamFor(n.type,"ABR.latencyInBandwidth","boolean",!0),u=this.config.getParamFor(n.type,"ABR.switchUpRatioSafetyFactor","number",1.5),this.debug.log("[DownloadRatioRule]["+n.type+"] Checking download ratio rule... (current = "+e+")"),!t)return this.debug.log("[DownloadRatioRule]["+n.type+"] No metrics, bailing."),new d.rules.SwitchRequest;f=h.length-1;while(f>=0&&null===p)h[f].tfinish&&h[f].trequest&&h[f].tresponse&&h[f].bytesLength>0&&(p=h[f]),f--;if(null===p)return this.debug.log("[DownloadRatioRule]["+n.type+"] No valid requests made for this stream yet, bailing."),new d.rules.SwitchRequest;if(i=(p.tfinish.getTime()-p.trequest.getTime())/1e3,r=(p.tfinish.getTime()-p.tresponse.getTime())/1e3,i<=0)return this.debug.log("[DownloadRatioRule]["+n.type+"] Don't know how long the download of the last fragment took, bailing."),new d.rules.SwitchRequest;if(null===p.mediaduration||void 0===p.mediaduration||p.mediaduration<=0||isNaN(p.mediaduration))return this.debug.log("[DownloadRatioRule]["+n.type+"] Don't know the duration of the last media fragment, bailing."),new d.rules.SwitchRequest;y=p.bytesLength,this.debug.log("[DownloadRatioRule]["+n.type+"] DL: "+Number(r.toFixed(3))+"s, Total: "+Number(i.toFixed(3))+"s, Length: "+y),c=1;while(f>=0&&c<3){if(h[f].tfinish&&h[f].trequest&&h[f].tresponse&&h[f].bytesLength>0){var _=(h[f].tfinish.getTime()-h[f].trequest.getTime())/1e3,E=(h[f].tfinish.getTime()-h[f].tresponse.getTime())/1e3;this.debug.log("[DownloadRatioRule]["+n.type+"] DL: "+Number(E.toFixed(3))+"s, Total: "+Number(_.toFixed(3))+"s, Length: "+h[f].bytesLength),i+=_,r+=E,y+=h[f].bytesLength,c+=1}f--}if(y*=8,o=s?y/i:y/r,this.debug.log("[DownloadRatioRule]["+n.type+"] BW = "+Math.round(o/1e3)+" kb/s"),isNaN(o))return new d.rules.SwitchRequest;for(c=this.manifestExt.getRepresentationCount(n),l=this.manifestExt.getRepresentationFor(e,n),a=this.manifestExt.getBandwidth(l),f=0;f<c;f+=1)m.push(this.manifestExt.getRepresentationBandwidth(n,f));if(o<=a){for(f=e-1;f>0;f-=1)if(m[f]<=o)break;return g=f,v=d.rules.SwitchRequest.prototype.WEAK,this.debug.info("[DownloadRatioRule]["+n.type+"] SwitchRequest: q="+g+"/"+(c-1)+" ("+m[g]+"), p="+v),new d.rules.SwitchRequest(g,v)}for(f=c-1;f>e;f-=1)if(o>m[f]*u)break;return g=f,v=d.rules.SwitchRequest.prototype.STRONG,this.debug.info("[DownloadRatioRule]["+n.type+"] SwitchRequest: q="+g+"/"+(c-1)+" ("+m[g]+"), p="+v),new d.rules.SwitchRequest(g,v)}return new d.rules.SwitchRequest}}},d.rules.DownloadRatioRule.prototype={constructor:d.rules.DownloadRatioRule},d.rules.DroppedFramesRule=function(){"use strict";var e=1,t=null,n=-1,r=-1,i=function(i){var o;null!==t?(o=i.mt-t.mt,o<e||(n=i.droppedFrames-t.droppedFrames,r=i.totalVideoFrames-t.totalVideoFrames,t=i)):t=i};return{debug:void 0,metricsExt:void 0,manifestModel:void 0,config:void 0,name:"DroppedFramesRule",checkIndex:function(e,o,a,s){var u,l=this.config.getParamFor(a.type,"ABR.droppedFramesMaxRatio","number",.3),c=this.config.getParamFor(a.type,"ABR.droppedFramesMinRatio","number",.1),f=this.metricsExt.getCurrentPlaybackQuality(o),h=d.rules.SwitchRequest.prototype.NO_CHANGE,p=d.rules.SwitchRequest.prototype.DEFAULT;return null===a||"video"!==a.type?new d.rules.SwitchRequest:null===f||"buffering"===s?(t=null,n=r=-1,new d.rules.SwitchRequest):(i(f),-1===n?new d.rules.SwitchRequest:(u=n/r,this.debug.info("[DroppedFramesRule]["+a.type+"] DroppedFrames:"+n+", totalVideoFrames:"+r+" => ratio = "+u),u>l&&e>0?(h=e-1,p=d.rules.SwitchRequest.prototype.STRONG):u>c&&(h=e,p=d.rules.SwitchRequest.prototype.STRONG),this.debug.info("[DroppedFramesRule]["+a.type+"] SwitchRequest: q="+h+", p="+p),new d.rules.SwitchRequest(h,p)))}}},d.rules.DroppedFramesRule.prototype={constructor:d.rules.DroppedFramesRule},d.rules.InsufficientBufferRule=function(){"use strict";return{debug:void 0,manifestExt:void 0,metricsExt:void 0,manifestModel:void 0,config:void 0,isStartBuffering:{},name:"InsufficientBufferRule",checkIndex:function(e,t,n,r){var i,o,a,s,u,l,c,f=this.metricsExt.getCurrentBufferLevel(t),h=e,p=d.rules.SwitchRequest.prototype.DEFAULT;if(null===n)return new d.rules.SwitchRequest;if("buffering"===r&&(this.isStartBuffering[n.type]=!0),null===f)return new d.rules.SwitchRequest;if(this.debug.info("[InsufficientBufferRule]["+n.type+"] Checking buffer level ... (current = "+e+", buffer level = "+Math.round(100*f.level)/100+", buffering = "+this.isStartBuffering[n.type]+")"),c=this.manifestExt.getMpd(this.manifestModel.getValue()),c){if(i=this.config.getParamFor(n.type,"BufferController.minBufferTime","number",c.manifest.minBufferTime),o=this.config.getParamFor(n.type,"ABR.switchLowerBufferRatio","number",.25),a=this.config.getParamFor(n.type,"ABR.switchLowerBufferTime","number",o*i),s=this.config.getParamFor(n.type,"ABR.switchDownBufferRatio","number",.5),u=this.config.getParamFor(n.type,"ABR.switchDownBufferTime","number",s*i),l=this.config.getParamFor(n.type,"ABR.switchUpBufferRatio","number",.75),this.config.getParamFor(n.type,"ABR.switchUpBufferTime","number",l*i),f.level<u&&this.isStartBuffering[n.type])return new d.rules.SwitchRequest;f.level>=u&&(this.isStartBuffering[n.type]=!1);this.manifestExt.getRepresentationCount(n);return 1,f.level<=a?(h=0,p=d.rules.SwitchRequest.prototype.STRONG):f.level<=u&&(h=e>0?e-1:0,p=d.rules.SwitchRequest.prototype.DEFAULT),this.debug.info("[InsufficientBufferRule]["+n.type+"] SwitchRequest: q="+h+", p="+p),new d.rules.SwitchRequest(h,p)}return this.debug.log("[InsufficientBufferRule]["+n.type+"] Manifest not present yet"),new d.rules.SwitchRequest}}},d.rules.InsufficientBufferRule.prototype={constructor:d.rules.OInsufficientBufferRule},d.rules.LimitSwitchesRule=function(){"use strict";var e=10,t=2e4,n=5,r=0;return{debug:void 0,name:"LimitSwitchesRule",checkIndex:function(i,o){if(r>0)return r-=1,new d.rules.SwitchRequest(i,d.rules.SwitchRequest.prototype.STRONG);var a,s,u,l=this,c=!1,f=(new Date).getTime(),h=o.RepSwitchList.length;for(u=h-1;u>=0;u-=1){if(a=o.RepSwitchList[u],s=f-a.t.getTime(),s>=t){l.debug.log("Reached time limit, bailing.");break}if(u>=e){l.debug.log("Found too many switches within validation time, force the stream to not change."),c=!0;break}}return c?(l.debug.log("Wait some time before allowing another switch."),r=n,new d.rules.SwitchRequest(i,d.rules.SwitchRequest.prototype.STRONG)):new d.rules.SwitchRequest(d.rules.SwitchRequest.prototype.NO_CHANGE,d.rules.SwitchRequest.prototype.STRONG)}}},d.rules.LimitSwitchesRule.prototype={constructor:d.rules.LimitSwitchesRule},d.rules.SwitchRequest=function(e,t){"use strict";this.quality=e,this.priority=t,void 0===this.quality&&(this.quality=999),void 0===this.priority&&(this.priority=.5)},d.rules.SwitchRequest.prototype={constructor:d.rules.SwitchRequest,NO_CHANGE:999,DEFAULT:.5,STRONG:1,WEAK:0},d.models.ProtectionModel=function(){},d.models.ProtectionModel.eventList={ENAME_NEED_KEY:"needkey",ENAME_KEY_SYSTEM_ACCESS_COMPLETE:"keySystemAccessComplete",ENAME_KEY_SYSTEM_SELECTED:"keySystemSelected",ENAME_VIDEO_ELEMENT_SELECTED:"videoElementSelected",ENAME_SERVER_CERTIFICATE_UPDATED:"serverCertificateUpdated",ENAME_KEY_MESSAGE:"keyMessage",ENAME_KEY_ADDED:"keyAdded",ENAME_KEY_ERROR:"keyError",ENAME_KEY_SESSION_CREATED:"keySessionCreated",ENAME_KEY_SESSION_REMOVED:"keySessionRemoved",ENAME_KEY_SESSION_CLOSED:"keySessionClosed",ENAME_KEY_STATUSES_CHANGED:"keyStatusesChanged",ENAME_TEARDOWN_COMPLETE:"protectionTeardownComplete"},d.vo.Error=function(e,t,n){"use strict";this.code=e||null,this.message=t||null,this.data=n||null},d.vo.Error.prototype={constructor:d.vo.Error},d.vo.Event=function(){"use strict";this.type=null,this.sender=null,this.data=null,this.error=null,this.timestamp=NaN},d.vo.Event.prototype={constructor:d.vo.Event},d.models.MetricsList=function(){"use strict";return{TcpList:[],HttpList:[],RepSwitchList:[],BufferedSwitchList:[],BufferLevel:[],PlayList:[],State:[],DroppedFrames:[],PlaybackQuality:[],VideoResolution:[],DVRInfo:[],ManifestUpdate:[]}},d.models.MetricsList.prototype={constructor:d.models.MetricsList},d.vo.Mp4Track=function(){"use strict";this.type="und",this.trackId=0,this.timescale=0,this.duration=0,this.codecs="",this.codecPrivateData="",this.bandwidth="",this.width=0,this.height=0,this.language="und",this.channels=0,this.samplingRate=0,this.contentProtection=void 0,this.samples=[],this.data=null},d.vo.Mp4Track.prototype={constructor:d.vo.Mp4Track},d.vo.Mp4Track.Sample=function(){"use strict";this.dts=0,this.cts=0,this.duration=0,this.flags=0,this.data=null,this.size=0},d.vo.Mp4Track.Sample.prototype={constructor:d.vo.Mp4Track.Sample},d.vo.SegmentRequest=function(){"use strict";this.action="download",this.startTime=NaN,this.streamType=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.deferred=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null},d.vo.SegmentRequest.prototype={constructor:d.vo.SegmentRequest,ACTION_DOWNLOAD:"download",ACTION_COMPLETE:"complete"},d.vo.URIFragmentData=function(){"use strict";this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null},d.vo.URIFragmentData.prototype={constructor:d.vo.URIFragmentData},d.vo.metrics.BufferedSwitch=function(){"use strict";this.mt=null,this.to=null,this.lto=null},d.vo.metrics.BufferedSwitch.prototype={constructor:d.vo.metrics.BufferedSwitch},d.vo.metrics.BufferLevel=function(){"use strict";this.t=null,this.level=null},d.vo.metrics.BufferLevel.prototype={constructor:d.vo.metrics.BufferLevel},d.vo.metrics.Condition=function(){"use strict";this.isFullScreen=null,this.windowSize=null,this.droppedFrames=null,this.fps=null,this.bandwidth=null},d.vo.metrics.Condition.prototype={constructor:d.vo.metrics.Condition},d.vo.metrics.DroppedFrames=function(){"use strict";this.time=null,this.droppedFrames=null},d.vo.metrics.DroppedFrames.prototype={constructor:d.vo.metrics.DroppedFrames},d.vo.metrics.DVRInfo=function(){"use strict";this.time=null,this.range=null},d.vo.metrics.DVRInfo.prototype={constructor:d.vo.metrics.DVRInfo},d.vo.metrics.HTTPRequest=function(){"use strict";this.stream=null,this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.tfinish=null,this.responsecode=null,this.interval=null,this.mediaduration=null,this.trace=[],this.startTime=null,this.quality=null,this.bytesLength=null},d.vo.metrics.HTTPRequest.prototype={constructor:d.vo.metrics.HTTPRequest},d.vo.metrics.HTTPRequest.Trace=function(){"use strict";this.s=null,this.d=null,this.b=[]},d.vo.metrics.HTTPRequest.Trace.prototype={constructor:d.vo.metrics.HTTPRequest.Trace},d.vo.metrics.ManifestUpdate=function(){"use strict";this.streamType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.periodInfo=[],this.representationInfo=[]},d.vo.metrics.ManifestUpdate.PeriodInfo=function(){"use strict";this.id=null,this.index=null,this.start=null,this.duration=null},d.vo.metrics.ManifestUpdate.RepresentationInfo=function(){"use strict";this.id=null,this.index=null,this.streamType=null,this.periodIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.segmentInfoType=null},d.vo.metrics.ManifestUpdate.prototype={constructor:d.vo.metrics.ManifestUpdate},d.vo.metrics.ManifestUpdate.PeriodInfo.prototype={constructor:d.vo.metrics.ManifestUpdate.PeriodInfo},d.vo.metrics.ManifestUpdate.RepresentationInfo.prototype={constructor:d.vo.metrics.ManifestUpdate.RepresentationInfo},d.vo.metrics.PlaybackQuality=function(){"use strict";this.t=null,this.mt=null,this.droppedFrames=null,this.totalVideoFrames=null},d.vo.metrics.PlaybackQuality.prototype={constructor:d.vo.metrics.PlaybackQuality},d.vo.metrics.PlayList=function(){"use strict";this.stream=null,this.start=null,this.mstart=null,this.starttype=null,this.trace=[]},d.vo.metrics.PlayList.Trace=function(){"use strict";this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null},d.vo.metrics.PlayList.prototype={constructor:d.vo.metrics.PlayList},d.vo.metrics.PlayList.INITIAL_PLAY_START_REASON="initial_start",d.vo.metrics.PlayList.SEEK_START_REASON="seek",d.vo.metrics.PlayList.Trace.prototype={constructor:d.vo.metrics.PlayList.Trace()},d.vo.metrics.PlayList.Trace.USER_REQUEST_STOP_REASON="user_request",d.vo.metrics.PlayList.Trace.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",d.vo.metrics.PlayList.Trace.END_OF_CONTENT_STOP_REASON="end_of_content",d.vo.metrics.PlayList.Trace.REBUFFERING_REASON="rebuffering",d.vo.metrics.RepresentationSwitch=function(){"use strict";this.t=null,this.mt=null,this.to=null,this.lto=null},d.vo.metrics.RepresentationSwitch.prototype={constructor:d.vo.metrics.RepresentationSwitch},d.vo.metrics.Session=function(){"use strict";this.uri=null,this.loopMode=null,this.endTime=null,this.playerType=null},d.vo.metrics.Session.prototype={constructor:d.vo.metrics.Session},d.vo.metrics.State=function(){"use strict";this.t=null,this.current=null,this.position=null,this.reason=null},d.vo.metrics.State.prototype={constructor:d.vo.metrics.State},d.vo.metrics.TCPConnection=function(){"use strict";this.tcpid=null,this.dest=null,this.topen=null,this.tclose=null,this.tconnect=null},d.vo.metrics.TCPConnection.prototype={constructor:d.vo.metrics.TCPConnection},d.vo.metrics.VideoResolution=function(){"use strict";this.t=null,this.mt=null,this.width=null,this.height=null},d.vo.metrics.VideoResolution.prototype={constructor:d.vo.metrics.VideoResolution},c=function(){"use strict";return{modules:{},dependencies:{},vo:{},di:{}}}(),c.dependencies.BaseURLExtensions=function(){"use strict";var e=function(e,t){var n,r,i,o,a,s,u,l,c,d,f=new DataView(e),h={},p=0;while("sidx"!==l&&p<f.byteLength){for(c=f.getUint32(p),p+=4,l="",o=0;o<4;o+=1)d=f.getInt8(p),l+=String.fromCharCode(d),p+=1;"moof"!==l&&"traf"!==l&&"sidx"!==l?p+=c-8:"sidx"===l&&(p-=8)}if(i=f.getUint32(p,!1)+p,i>e.byteLength)throw"sidx terminates after array buffer";for(h.version=f.getUint8(p+8),p+=12,h.timescale=f.getUint32(p+4,!1),p+=8,0===h.version?(h.earliest_presentation_time=f.getUint32(p,!1),h.first_offset=f.getUint32(p+4,!1),p+=8):(h.earliest_presentation_time=g.Math.to64BitNumber(f.getUint32(p+4,!1),f.getUint32(p,!1)),h.first_offset=(f.getUint32(p+8,!1)<<32)+f.getUint32(p+12,!1),p+=16),h.first_offset+=i+(t||0),h.reference_count=f.getUint16(p+2,!1),p+=4,h.references=[],n=h.first_offset,r=h.earliest_presentation_time,o=0;o<h.reference_count;o+=1)s=f.getUint32(p,!1),a=s>>>31,s&=2147483647,u=f.getUint32(p+4,!1),p+=12,s>0&&h.references.push({size:s,type:a,offset:n,duration:u,time:r,timescale:h.timescale}),n+=s,r+=u;if(p!==i)throw"Error: final pos "+p+" differs from SIDX end "+i;return h},n=function(t,n,r){var i,o,a,s,u,l,d,f;for(i=e.call(this,t,r),o=i.references,a=[],u=0,l=o.length;u<l;u+=1)s=new c.vo.Segment,s.duration=o[u].duration,s.media=n,s.startTime=o[u].time,s.timescale=o[u].timescale,d=o[u].offset,f=o[u].offset+o[u].size-1,s.mediaRange=d+"-"+f,a.push(s);return this.debug.log("Parsed SIDX box: "+a.length+" segments."),a},r=function(e,n){var i,o,a,s,u,l,c,d,f=t.defer(),h=new DataView(e),p=0,m="",g=0,y=!1,v=this;v.debug.log("Searching for initialization.");while("moov"!==m&&p<h.byteLength){for(g=h.getUint32(p),p+=4,m="",u=0;u<4;u+=1)l=h.getInt8(p),m+=String.fromCharCode(l),p+=1;"ftyp"===m&&(i=p-8),"moov"===m&&(o=p-8),"moov"!==m&&(p+=g-8)}return h.byteLength-p,"moov"!==m?(v.debug.log("Loading more bytes to find initialization."),n.range.start=0,n.range.end=n.bytesLoaded+n.bytesToLoad,c=new XMLHttpRequest,c.onloadend=function(){y||f.reject("Error loading initialization.")},c.onload=function(){y=!0,n.bytesLoaded=n.range.end,r.call(v,c.response).then((function(e){f.resolve(e)}))},c.onerror=function(){f.reject("Error loading initialization.")},c.open("GET",v.tokenAuthentication.addTokenAsQueryArg(n.url)),c.responseType="arraybuffer",c.setRequestHeader("Range","bytes="+n.range.start+"-"+n.range.end),c=v.tokenAuthentication.setTokenInRequestHeader(c),c.send(null)):(a=void 0===i?o:i,s=o+g-1,d=a+"-"+s,v.debug.log("Found the initialization.  Range: "+d),f.resolve(d)),f.promise},i=function(e){var n=t.defer(),i=new XMLHttpRequest,o=!0,a=this,s={url:e,range:{},searching:!1,bytesLoaded:0,bytesToLoad:1500,request:i};return a.debug.log("Start searching for initialization."),s.range.start=0,s.range.end=s.bytesToLoad,i.onload=function(){i.status<200||i.status>299||(o=!1,s.bytesLoaded=s.range.end,r.call(a,i.response,s).then((function(e){n.resolve(e)}),(function(){n.reject()})))},i.onloadend=i.onerror=function(){if(o){o=!1;var e={};e.url=s.url,e.request=i,a.errHandler.sendError(d.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_INIT,null,e),n.reject(i)}},i.open("GET",a.tokenAuthentication.addTokenAsQueryArg(s.url)),i.responseType="arraybuffer",i.setRequestHeader("Range","bytes="+s.range.start+"-"+s.range.end),i=a.tokenAuthentication.setTokenInRequestHeader(i),i.send(null),a.debug.log("Perform init search: "+s.url),n.promise},o=function(e,r){var i,a,s,u,l,c,f,h,p=t.defer(),m=new DataView(e),g=new XMLHttpRequest,y=0,v="",_=0,E=!0,b=!1,T=this;T.debug.log("Searching for SIDX box."),T.debug.log(r.bytesLoaded+" bytes loaded.");while("sidx"!==v&&y<m.byteLength){for(_=m.getUint32(y),y+=4,v="",l=0;l<4;l+=1)c=m.getInt8(y),v+=String.fromCharCode(c),y+=1;"sidx"!==v&&(y+=_-8)}if(i=m.byteLength-y,"sidx"!==v)p.reject();else if(i<_-8)T.debug.log("Found SIDX but we don't have all of it."),r.range.start=0,r.range.end=r.bytesLoaded+(_-i),g.onload=function(){g.status<200||g.status>299||(E=!1,r.bytesLoaded=r.range.end,o.call(T,g.response,r).then((function(e){p.resolve(e)})))},g.onloadend=g.onerror=function(){if(E){E=!1;var e={};e.url=r.url,e.request=g,T.errHandler.sendError(d.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_SIDX,null,e),p.reject(g)}},g.open("GET",T.tokenAuthentication.addTokenAsQueryArg(r.url)),g.responseType="arraybuffer",g.setRequestHeader("Range","bytes="+r.range.start+"-"+r.range.end),g=T.tokenAuthentication.setTokenInRequestHeader(g),g.send(null);else if(r.range.start=y-8,r.range.end=r.range.start+_,T.debug.log("Found the SIDX box.  Start: "+r.range.start+" | End: "+r.range.end),a=new ArrayBuffer(r.range.end-r.range.start),u=new Uint8Array(a),s=new Uint8Array(e,r.range.start,r.range.end-r.range.start),u.set(s),f=this.parseSIDX.call(this,a,r.range.start),h=f.references,null!==h&&void 0!==h&&h.length>0&&(b=1===h[0].type),b){T.debug.log("Initiate multiple SIDX load.");var S,w,x,I,A,D,R=[];for(S=0,w=h.length;S<w;S+=1)x=h[S].offset,I=h[S].offset+h[S].size-1,A=x+"-"+I,R.push(this.loadSegments.call(T,r.url,A));t.all(R).then((function(e){for(D=[],S=0,w=e.length;S<w;S+=1)D=D.concat(e[S]);p.resolve(D)}),(function(e){p.reject(e)}))}else T.debug.log("Parsing segments from SIDX."),p.resolve(n.call(T,a,r.url,r.range.start));return p.promise},a=function(e,r){var i,a=t.defer(),s=new XMLHttpRequest,u=!0,l=this,c={url:e,range:{},searching:!1,bytesLoaded:0,bytesToLoad:1500,request:s};return null===r?(l.debug.log("No known range for SIDX request."),c.searching=!0,c.range.start=0,c.range.end=c.bytesToLoad):(i=r.split("-"),c.range.start=parseFloat(i[0]),c.range.end=parseFloat(i[1])),s.onload=function(){s.status<200||s.status>299||(u=!1,c.searching?(c.bytesLoaded=c.range.end,o.call(l,s.response,c).then((function(e){a.resolve(e)}),(function(){a.reject()}))):a.resolve(n.call(l,s.response,c.url,c.range.start)))},s.onloadend=s.onerror=function(){if(u){u=!1;var e={};e.url=c.url,e.request=s,l.errHandler.sendError(d.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_SIDX,null,e),a.reject(s)}},s.open("GET",l.tokenAuthentication.addTokenAsQueryArg(c.url)),s.responseType="arraybuffer",s.setRequestHeader("Range","bytes="+c.range.start+"-"+c.range.end),s=l.tokenAuthentication.setTokenInRequestHeader(s),s.send(null),l.debug.log("Perform SIDX load: "+c.url),a.promise};return{debug:void 0,errHandler:void 0,tokenAuthentication:void 0,loadSegments:a,loadInitialization:i,parseSegments:n,parseSIDX:e,findSIDX:o}},c.dependencies.BaseURLExtensions.prototype={constructor:c.dependencies.BaseURLExtensions},c.di.DashContext=function(){"use strict";return{system:void 0,setup:function(){c.di.DashContext.prototype.setup.call(this),this.system.mapClass("parser",c.dependencies.DashParser),this.system.mapClass("indexHandler",c.dependencies.DashHandler),this.system.mapClass("baseURLExt",c.dependencies.BaseURLExtensions),this.system.mapClass("fragmentExt",c.dependencies.FragmentExtensions),this.system.mapSingleton("manifestExt",c.dependencies.DashManifestExtensions),this.system.mapSingleton("metricsExt",c.dependencies.DashMetricsExtensions),this.system.mapSingleton("timelineConverter",c.dependencies.TimelineConverter)}}},c.di.DashContext.prototype=new d.di.Context,c.di.DashContext.prototype.constructor=c.di.DashContext,c.dependencies.DashHandler=function(){"use strict";var e,n,r=-1,i=null,o=function(e,t){while(e.length<t)e="0"+e;return e},a=function(e,t,n){var r,i,a,s,u=0,l=0,c=t.length,d="%0",f=d.length;while(1){if(u=e.indexOf("$"+t),u<0)return e;if(l=e.indexOf("$",u+c),l<0)return e;if(r=e.indexOf(d,u+c),r>u&&r<l)switch(i=e.charAt(l-1),a=parseInt(e.substring(r+f,l-1),10),i){case"d":case"i":case"u":s=o(n.toString(),a);break;case"x":s=o(n.toString(16),a);break;case"X":s=o(n.toString(16),a).toUpperCase();break;case"o":s=o(n.toString(8),a);break;default:return this.debug.log("Unsupported/invalid IEEE 1003.1 format identifier string in URL"),e}else s=n;e=e.substring(0,u)+s+e.substring(l+1)}},s=function(e){return e.split("$$").join("$")},u=function(e,t){if(null===t||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)},l=function(e,t){return e.representation.startNumber+t},f=function(e,t){var n,r=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].BaseURL;return n=e===r||-1!==e.indexOf("http://")||-1!==e.indexOf("https://")?e:r+e,n},h=function(t,n){var r,i,o=this,a=new d.vo.SegmentRequest;return r=t.adaptation.period,a.streamType=n,a.type="Initialization Segment",a.url=f(t.initialization,t),a.range=t.range,i=r.start,a.availabilityStartTime=o.timelineConverter.calcAvailabilityStartTimeFromPresentationTime(i,t.adaptation.period.mpd,e),a.availabilityEndTime=o.timelineConverter.calcAvailabilityEndTimeFromPresentationTime(i+r.duration,r.mpd,e),a.quality=t.index,a},p=function(e){var r=t.defer(),i=null,o=null,a=this;return e?(e.initialization?(i=h.call(a,e,n),r.resolve(i)):(o=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].BaseURL,a.baseURLExt.loadInitialization(o).then((function(t){e.range=t,e.initialization=o,i=h.call(a,e,n),r.resolve(i)}),(function(e){r.reject(e)}))),r.promise):t.reject("no represenation")},m=function(t){var n,i,o,a=t.adaptation.period,s=!1;return e||r<0?s=!1:r<t.availableSegmentsNumber+t.segmentStartIndex?(i=D(r,t),i&&(o=i.presentationStartTime-a.start,n=t.adaptation.period.duration,s=o>=n)):s=!0,s},g=function(t,n){var r,i,o,a,s=this;return i=t.segmentDuration,o=t.adaptation.period.start+n*i,a=o+i,r=new c.vo.Segment,r.representation=t,r.duration=i,r.presentationStartTime=o,r.mediaStartTime=s.timelineConverter.calcMediaTimeFromPresentationTime(r.presentationStartTime,t),r.availabilityStartTime=s.timelineConverter.calcAvailabilityStartTimeFromPresentationTime(r.presentationStartTime,t.adaptation.period.mpd,e),r.availabilityEndTime=s.timelineConverter.calcAvailabilityEndTimeFromPresentationTime(a,t.adaptation.period.mpd,e),r.wallStartTime=s.timelineConverter.calcWallTimeForSegment(r,e),r.replacementNumber=l(r,n),r.availabilityIdx=n,r},y=function(e){var n,r,o,a,s,u,l,c,d,f,h,p,m,g=this,y=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,v=y.SegmentTimeline,_=e.availableSegmentsNumber>0,b=10,S=[],w=0,x=-1,I=!1,A=function(t){return T.call(g,e,w,t.d,m,y.media,t.mediaRange,x,t.tManifest)};for(m=e.timescale,n=v.S_asArray,d=E.call(g,e),d?(h=d.start,p=d.end):f=g.timelineConverter.calcMediaTimeFromPresentationTime(i||0,e),o=0,a=n.length;o<a;o+=1)if(r=n[o],u=0,r.hasOwnProperty("r")&&(u=r.r),r.hasOwnProperty("t")&&(w=r.t),u<0&&(c=n[o+1],l=c&&c.hasOwnProperty("t")?c.t/m:e.adaptation.period.duration,u=Math.ceil((l-w/m)/(r.d/m))-1),I){if(_)break;x+=u+1}else for(s=0;s<=u;s+=1){if(x+=1,d){if(x>p){if(I=!0,_)break;continue}x>=h&&S.push(A.call(g,r))}else{if(S.length>b){if(I=!0,_)break;continue}w/m>=f-r.d/m&&S.push(A.call(g,r))}w+=r.d}var D,R,M=n[0];return D=void 0===M.t?0:g.timelineConverter.calcPresentationTimeFromMediaTime(M.t/m,e),R=g.timelineConverter.calcPresentationTimeFromMediaTime((w-r.d)/m,e),e.segmentAvailabilityRange={start:D,end:R},e.availableSegmentsNumber=x+1,e.segmentStartIndex=0,t.when(S)},v=function(n){var r,i,o,s,u=[],l=this,c=t.defer(),d=n.adaptation.period.mpd.manifest.Period_asArray[n.adaptation.period.index].AdaptationSet_asArray[n.adaptation.index].Representation_asArray[n.index].SegmentTemplate,f=n.segmentDuration,h=null,p=Math.floor(n.adaptation.period.start/f),m=null,y=null;return s=n.startNumber,b.call(l,n).then((function(t){for(n.segmentAvailabilityRange=t,h=_.call(l,n),i=h.start,o=h.end,r=i;r<=o;r+=1)m=g.call(l,n,r-(e?p:0)),m.replacementTime=(s+r-1)*n.segmentDuration,y=d.media,y=a(y,"Number",m.replacementNumber),y=a(y,"Time",m.replacementTime),m.media=y,u.push(m),m=null;n.availableSegmentsNumber=p+Math.ceil((t.end-t.start)/f),n.segmentStartIndex=i,c.resolve(u)})),c.promise},_=function(t){var n,o,a,s=this,u=t.adaptation.period.start,l=t.segmentDuration,c=t.adaptation.period.mpd.manifest.minBufferTime,d=t.segmentAvailabilityRange,f=NaN,h=null,p=t.segments,m=2*l,g=Math.max(2*c,10*l);return d||(d=s.timelineConverter.calcSegmentAvailabilityRange(t,e)),e&&!t.adaptation.period.mpd.isClientServerTimeSyncCompleted?(n=Math.floor(d.start/l),o=Math.floor(d.end/l),a={start:n,end:o},a):(p?(h=D(r,t),f=h?h.presentationStartTime-u:r>0?r*l:i-u||p[0].presentationStartTime-u):f=r>0?r*l:e?d.end:d.start,n=Math.floor(Math.max(f-m,d.start)/l),o=Math.floor(Math.min(n+g/l,d.end/l)),a={start:n,end:o},a)},E=function(t){var n,o,a,s=NaN,u=t.segments,l=2,c=10,d=0,f=Number.POSITIVE_INFINITY;if(e&&!t.adaptation.period.mpd.isClientServerTimeSyncCompleted)return a={start:d,end:f},a;if(!e&&null!==i)return null;if(u){if(r<0)return null;s=r}else s=r>0?r:e?f:d;return n=Math.max(s-l,d),o=Math.min(s+c,f),a={start:n,end:o},a},b=function(n){var r,i,o=this,a=t.defer(),s=function(){r=o.timelineConverter.calcSegmentAvailabilityRange(n,e),r.end>0?a.resolve(r):(i=1e3*Math.abs(r.end),setTimeout(s,i))};return s(),a.promise},T=function(t,n,r,i,o,s,u,d){var f,h,p,m=this,g=n/i,y=Math.min(r/i,t.adaptation.period.mpd.maxSegmentDuration);return f=m.timelineConverter.calcPresentationTimeFromMediaTime(g,t),f=g,h=f+y,p=new c.vo.Segment,p.representation=t,p.duration=y,p.mediaStartTime=g,p.presentationStartTime=f,p.availabilityStartTime=t.adaptation.period.mpd.manifest.mpdLoadedTime,p.availabilityEndTime=m.timelineConverter.calcAvailabilityEndTimeFromPresentationTime(h,t.adaptation.period.mpd,e),p.wallStartTime=m.timelineConverter.calcWallTimeForSegment(p,e),p.replacementTime=d||n,p.replacementNumber=l(p,u),o=a(o,"Number",p.replacementNumber),o=a(o,"Time",p.replacementTime),p.media=o,p.mediaRange=s,p.availabilityIdx=u,p},S=function(n){var r,i,o,a,s,u=this,l=[],c=t.defer(),d=n.adaptation.period.mpd.manifest.Period_asArray[n.adaptation.period.index].AdaptationSet_asArray[n.adaptation.index].Representation_asArray[n.index].SegmentList,f=d.SegmentURL_asArray.length,h=0,p=d.SegmentURL_asArray.length;return s=n.startNumber,b.call(u,n).then((function(t){for(e||(a=_.call(u,n),h=a.start,p=a.end),r=h;r<p;r+=1)o=d.SegmentURL_asArray[r],i=g.call(u,n,r),i.replacementTime=(s+r-1)*n.segmentDuration,i.media=o.media,i.mediaRange=o.mediaRange,i.index=o.index,i.indexRange=o.indexRange,o.duration&&(i.duration=o.duration,i.presentationStartTime=i.mediaStartTime=o.time),void 0!==o.sequenceNumber&&(i.sequenceNumber=o.sequenceNumber),void 0!==o.decryptionInfo&&(i.decryptionInfo=o.decryptionInfo),l.push(i),i=null;n.segmentAvailabilityRange=t,n.availableSegmentsNumber=f,n.segmentStartIndex=h,c.resolve(l)})),c.promise},w=function(e){var n,r,i,o,a=this,s=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].BaseURL,u=t.defer(),l=[],c=0,d=null;return e.indexRange&&(d=e.indexRange),this.baseURLExt.loadSegments(s,d).then((function(t){for(r=0,i=t.length;r<i;r+=1)n=t[r],o=T.call(a,e,n.startTime,n.duration,n.timescale,n.media,n.mediaRange,c),l.push(o),o=null,c+=1;e.segmentAvailabilityRange={start:l[0].presentationStartTime,end:l[i-1].presentationStartTime},e.availableSegmentsNumber=i,e.segmentStartIndex=0,u.resolve(l)}),(function(){u.reject()})),u.promise},x=function(n){var r,i,o=t.defer(),a=this;return M.call(a,n)?(r="SegmentTimeline"===n.segmentInfoType?y.call(a,n):"SegmentTemplate"===n.segmentInfoType?v.call(a,n):"SegmentList"===n.segmentInfoType?S.call(a,n):w.call(a,n),t.when(r).then((function(t){if(n.segments=t,i=t.length-1,e&&isNaN(n.adaptation.period.liveEdge)){var r=a.metricsModel.getMetricsFor("stream"),s=t[i].presentationStartTime;n.adaptation.period.liveEdge=s,a.metricsModel.updateManifestUpdateInfo(a.metricsExt.getCurrentManifestUpdate(r),{presentationStartTime:s})}o.resolve(t)}),(function(){o.reject()})),o.promise):t.when(n.segments)},I=function(e){var r=this,i=t.defer();return e.segments=null,r.debug.log("[DashHandler]["+n+"] updateSegmentList for representation ",e.id),x.call(r,e).then((function(t){e.segments=t,i.resolve(t)})),i.promise},A=function(e,r){var i,o,a,s,u=null===r?null:r.segments,l=null===u?0:u.length-1,d=-1,f=this;if(f.debug.log("[DashHandler]["+n+"] getIndexForSegments for time ",e),u&&u.length>0)for(s=l;s>=0;s--){if(i=u[s],o=i.presentationStartTime,a=i.duration,e+c.dependencies.DashHandler.EPSILON>=o&&e-c.dependencies.DashHandler.EPSILON<=o+a){d=i.availabilityIdx,f.debug.log("[DashHandler]["+n+"] getIndexForSegments, idx =  ",d);break}if(-1===d&&e-c.dependencies.DashHandler.EPSILON>o+a){f.debug.log("[DashHandler]["+n+"] getIndexForSegments, (past the end) idx =  ",d),d=isNaN(r.segmentDuration)?i.availabilityIdx+1:Math.floor((e-r.adaptation.period.start)/r.segmentDuration);break}}return-1===d&&(isNaN(r.segmentDuration)?u&&u.length>0&&e<u[0].presentationStartTime?(f.debug.log("[DashHandler]["+n+"] getIndexForSegments, (before start) idx =  ",d),d=0):f.debug.log("[DashHandler]["+n+"] Couldn't figure out segment for time: "+e):(f.debug.log("[DashHandler]["+n+"] getIndexForSegments, (segment duration) idx =  ",d),d=Math.floor((e-r.adaptation.period.start)/r.segmentDuration))),t.when(d)},D=function(e,t){if(!t||!t.segments)return null;var n,r,i=t.segments.length;for(r=0;r<i;r+=1)if(n=t.segments[r],n.availabilityIdx===e)return n;return null},R=function(e,t){if(!t||!t.segments)return null;var n,r,i=t.segments.length;for(r=0;r<i;r+=1)if(n=t.segments[r],void 0!==n.sequenceNumber&&n.sequenceNumber===e)return r<i-1?t.segments[r+1]:null;return null},M=function(e){var t,n,o,a,s=!1,u=e.segments;return u&&0!==u.length?null!==i?(a=u[0].presentationStartTime,o=u[u.length-1].presentationStartTime,s=i<a||i>o):(n=u[0].availabilityIdx,t=u[u.length-1].availabilityIdx,s=r<n||r>t):s=!0,s},C=function(e){if(null===e||void 0===e)return null;var t,r=new d.vo.SegmentRequest,i=e.representation,o=i.adaptation.period.mpd.manifest.Period_asArray[i.adaptation.period.index].AdaptationSet_asArray[i.adaptation.index].Representation_asArray[i.index].bandwidth;return t=f(e.media,i),t=a(t,"Number",e.replacementNumber),t=a(t,"Time",e.replacementTime),t=a(t,"Bandwidth",o),t=u(t,i.id),t=s(t),r.streamType=n,r.type="Media Segment",r.url=t,r.range=e.mediaRange,r.startTime=e.presentationStartTime,r.duration=e.duration,r.timescale=i.timescale,r.availabilityStartTime=e.availabilityStartTime,r.availabilityEndTime=e.availabilityEndTime,r.wallStartTime=e.wallStartTime,r.quality=i.index,r.index=e.availabilityIdx,void 0!==e.sequenceNumber&&(r.sequenceNumber=e.sequenceNumber),void 0!==e.decryptionInfo&&(r.decryptionInfo=e.decryptionInfo),r},N=function(e,o){var a,s,u,l=this;return e?(i=o,r=-1,l.debug.log("[DashHandler]["+n+"] Getting the request for time: "+o),a=t.defer(),x.call(l,e).then((function(){var t;return t=A.call(l,o,e),t}),(function(){a.reject()})).then((function(i){return l.debug.log("[DashHandler]["+n+"] Index for time "+o+" is "+i),r=i,t.when(m.call(l,e))})).then((function(i){var o=null;return i?(s=new d.vo.SegmentRequest,s.action=s.ACTION_COMPLETE,s.index=r,l.debug.log("[DashHandler]["+n+"] Signal complete."),l.debug.log(s),a.resolve(s)):(u=D(r,e),o=C.call(l,u)),t.when(o)})).then((function(e){a.resolve(e)})),a.promise):t.reject("no representation")},L=function(e){var o,a,s,u,l=this;if(!e)return t.reject("no represenation");if(-1===r)throw"You must call getSegmentRequestForTime first.";return i=null,r+=1,o=t.defer(),l.debug.log("[DashHandler]["+n+"] Getting the next request => index = "+r),u=m.call(l,e),u?(a=new d.vo.SegmentRequest,a.action=a.ACTION_COMPLETE,a.index=r,l.debug.log("[DashHandler]["+n+"] Signal complete."),o.resolve(a)):x.call(l,e).then((function(){var n;return s=D(r,e),n=C.call(l,s),t.when(n)})).then((function(e){o.resolve(e)})),o.promise},P=function(e,o){var a,s,u,l,c=this;if(!e)return t.reject("no represenation");if(-1===r)throw"You must call getSegmentRequestForTime first.";return i=null,r+=1,a=t.defer(),c.debug.log("[DashHandler]["+n+"] Getting the next request => sn = "+o),x.call(c,e).then((function(){if(l=m.call(c,e),l)s=new d.vo.SegmentRequest,s.action=s.ACTION_COMPLETE,s.index=r,c.debug.log("[DashHandler]["+n+"] Signal complete."),a.resolve(s);else if(u=R(o,e),null===u)a.resolve(null);else{r=u.availabilityIdx;var t=C.call(c,u);a.resolve(t)}})),a.promise},O=function(e,r,i){var o,a=this,s=Math.max(r-i,0),u=t.defer(),l=0;return e?(a.debug.log("[DashHandler]["+n+"] getSegmentCountForDuration"),x.call(a,e).then((function(e){o=e[0].duration,l=Math.ceil(s/o),u.resolve(l)}),(function(){u.resolve(0)})),u.promise):t.reject("no represenation")},F=function(e){var i,o,a=this,s=t.defer();return e?(o=r,x.call(a,e).then((function(t){o<0?i=a.timelineConverter.calcPresentationStartTime(e.adaptation.period):(o=o<t[0].availabilityIdx?t[0].availabilityIdx:Math.min(t[t.length-1].availabilityIdx,o),i=D(o,e).presentationStartTime,a.debug.log("[DashHandler]["+n+"] getSegmentByIndex, index = "+o+" => time = "+i)),a.debug.log("[DashHandler]["+n+"] getCurrentTime => ",i),s.resolve(i)}),(function(){s.reject()})),s.promise):t.reject("no represenation")},k=function(){},B=function(){};return{debug:void 0,baseURLExt:void 0,metricsModel:void 0,metricsExt:void 0,manifestModel:void 0,manifestExt:void 0,timelineConverter:void 0,capabilities:void 0,videoModel:void 0,getType:function(){return n},setType:function(e){n=e},getIsDynamic:function(){return e},setIsDynamic:function(t){e=t},getInitRequest:p,getSegmentRequestForTime:N,getNextSegmentRequest:L,getNextSegmentRequestFromSN:P,getCurrentTime:F,getSegmentCountForDuration:O,updateSegmentList:I,getIFrameRequest:k,getFragmentInfoRequest:B}},c.dependencies.DashHandler.EPSILON=.003,c.dependencies.DashHandler.prototype={constructor:c.dependencies.DashHandler},c.dependencies.DashManifestExtensions=function(){"use strict";this.timelineConverter=void 0},c.dependencies.DashManifestExtensions.prototype={constructor:c.dependencies.DashManifestExtensions,isInteger:Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},getIsType:function(e,t,n){"use strict";var r,i,o,a,s=!1;if(!e)return!1;if(void 0===e.type&&(e.type=null),o=e.ContentComponent_asArray,o)for(r=0;r<e.ContentComponent_asArray.length&&!s;r++)e.ContentComponent_asArray[r].contentType===t&&(e.type=t,s=!0);if(!s&&e.mimeType)for(r=0;r<n.length&&!s;r++)-1!==e.mimeType.indexOf(n[r])&&(e.type=t,s=!0);if(!s)for(r=0;r<e.Representation_asArray.length&&!s;r++)for(a=e.Representation_asArray[r],i=0;i<n.length&&!s;i++)-1!==a.mimeType.indexOf(n[i])&&(e.type=t,s=!0);return s},getIsVideo:function(e){return this.getIsType(e,"video",["video"])},getIsAudio:function(e){return this.getIsType(e,"audio",["audio"])},getIsText:function(e){return this.getIsType(e,"text",["vtt","ttml","application/mp4"])},getIsTextTrack:function(e){return"text/vtt"===e||"application/ttml+xml"===e||"application/ttml+xml+mp4"===e||"application/mp4"===e},getIsMain:function(){"use strict";return!1},processAdaptation:function(e){"use strict";return void 0!==e.Representation_asArray&&null!==e.Representation_asArray&&e.Representation_asArray.sort((function(e,t){return e.bandwidth-t.bandwidth})),e},getDataForId:function(e,t,n){"use strict";var r,i,o=t.Period_asArray[n].AdaptationSet_asArray;for(r=0,i=o.length;r<i;r+=1)if(o[r].hasOwnProperty("id")&&o[r].id===e)return o[r];return null},getDataForIndex:function(e,t,n){"use strict";var r;return t&&n>=0&&(r=t.Period_asArray[n].AdaptationSet_asArray,r&&r.length>0&&!isNaN(e))?r[e]:[]},getIndex:function(e,t){var n,r,i,o=t.Period_asArray;for(r=0;r<o.length;r+=1)for(n=o[r].AdaptationSet_asArray,i=0;i<n.length;i+=1)if(n[i]===e)return i;return-1},getDataIndex:function(e,t,n){"use strict";var r,i,o;if(t&&n>=0)if(r=t.Period_asArray[n].AdaptationSet_asArray,e.id){for(i=0,o=r.length;i<o;i+=1)if(r[i].id&&r[i].id===e.id)return i}else{var a,s=JSON.stringify(e);for(i=0,o=r.length;i<o;i+=1)if(a=JSON.stringify(r[i]),a===s)return i}return-1},getVideoData:function(e,t){"use strict";var n,r;if(!e||t<0)return null;if(n=e.Period_asArray[t].AdaptationSet_asArray,0===n.length)return null;for(r=0;r<n.length;r+=1)if(this.getIsVideo(n[r]))return n[r];return null},getTextDatas:function(e,t){"use strict";var n,r,i=[];if(!e||t<0)return i;if(n=e.Period_asArray[t].AdaptationSet_asArray,0===n.length)return i;for(r=0;r<n.length;r+=1)this.getIsText(n[r])&&i.push(n[r]);return i},getAudioDatas:function(e,t){"use strict";var n,r,i=[];if(!e||t<0)return i;if(n=e.Period_asArray[t].AdaptationSet_asArray,0===n.length)return i;for(r=0;r<n.length;r+=1)this.getIsAudio(n[r])&&i.push(n[r]);return i},getSpecificAudioData:function(e,t,n){"use strict";var r,i;if(!e||t<0)return null;if(i=this.getAudioDatas(e,t),0===i.length)return null;for(r=0;r<i.length;r+=1)if(i[r].lang===n)return this.processAdaptation(i[r]);return this.processAdaptation(i[0])},getSpecificTextData:function(e,t,n){"use strict";var r,i;if(!e||t<0)return null;if(i=this.getTextDatas(e,t),0===i.length)return null;for(r=0;r<i.length;r+=1)if(i[r].lang===n)return this.processAdaptation(i[r]);return this.processAdaptation(i[0])},getCodec:function(e){"use strict";var t,n=0,r=null;while(null===r&&n<e.Representation_asArray.length)t=e.Representation_asArray[n],r=this.getCodecForRepresentation(t),n++;return r},getCodecForRepresentation:function(e){"use strict";return null===e.codecs||""===e.codecs?null:e.mimeType+';codecs="'+e.codecs+'"'},getMimeType:function(e){"use strict";return e.Representation_asArray[0].mimeType},getKID:function(e){"use strict";return e&&e.hasOwnProperty("cenc:default_KID")?e["cenc:default_KID"]:null},getContentProtectionData:function(e){"use strict";return e&&e.hasOwnProperty("ContentProtection_asArray")&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:function(e){"use strict";var t=!1,n="dynamic";return e&&e.hasOwnProperty("type")&&(t=e.type===n),t},getIsDVR:function(e){"use strict";var t,n,r=this.getIsDynamic(e);return t=!isNaN(e.timeShiftBufferDepth),n=r&&t,n},getIsOnDemand:function(e){"use strict";var t=!1;return e.profiles&&e.profiles.length>0&&(t=-1!==e.profiles.indexOf("urn:mpeg:dash:profile:isoff-on-demand:2011")),t},getIsStartOver:function(e){"use strict";var t=!1;return e&&e.hasOwnProperty("startOver")&&(t=!0===e.startOver),t},getDuration:function(e){var t;return t=e&&e.hasOwnProperty("mediaPresentationDuration")?e.mediaPresentationDuration:Number.POSITIVE_INFINITY,t},getBandwidth:function(e){"use strict";return e&&e.bandwidth?e.bandwidth:NaN},getRefreshDelay:function(e){"use strict";var t=NaN,n=2;return e.hasOwnProperty("minimumUpdatePeriod")&&(t=Math.max(parseFloat(e.minimumUpdatePeriod),n)),t},getRepresentationCount:function(e){"use strict";return e?e.Representation_asArray.length:null},getRepresentationFor:function(e,t){"use strict";return t&&t.Representation_asArray&&t.Representation_asArray.length>0&&this.isInteger(e)&&e<t.Representation_asArray.length?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e,t){var n,r,i,o,a,s=[];if(e&&t){n=this.processAdaptation(e.Period_asArray[t.period.index].AdaptationSet_asArray[t.index]);for(var u=0;u<n.Representation_asArray.length;u+=1)a=n.Representation_asArray[u],r=new c.vo.Representation,r.index=u,r.adaptation=t,a.hasOwnProperty("id")&&(r.id=a.id),a.hasOwnProperty("SegmentBase")?(o=a.SegmentBase,r.segmentInfoType="SegmentBase"):a.hasOwnProperty("SegmentList")?(o=a.SegmentList,r.segmentInfoType="SegmentList",r.useCalculatedLiveEdgeTime=!0):a.hasOwnProperty("SegmentTemplate")?(o=a.SegmentTemplate,o.hasOwnProperty("SegmentTimeline")?r.segmentInfoType="SegmentTimeline":r.segmentInfoType="SegmentTemplate",o.hasOwnProperty("initialization")&&(r.initialization=o.initialization.split("$Bandwidth$").join(a.bandwidth).split("$RepresentationID$").join(a.id))):(o=a.BaseURL,r.segmentInfoType="BaseURL"),o.hasOwnProperty("Initialization")?(i=o.Initialization,i.hasOwnProperty("sourceURL")?r.initialization=i.sourceURL:i.hasOwnProperty("range")&&(r.initialization=a.BaseURL,r.range=i.range)):a.hasOwnProperty("mimeType")&&this.getIsTextTrack(a.mimeType)&&!r.initialization&&(r.initialization=a.BaseURL,r.range=0),o.hasOwnProperty("timescale")&&(r.timescale=o.timescale),o.hasOwnProperty("duration")&&(r.segmentDuration=o.duration/r.timescale),o.hasOwnProperty("startNumber")&&(r.startNumber=o.startNumber),o.hasOwnProperty("indexRange")&&(r.indexRange=o.indexRange),o.hasOwnProperty("presentationTimeOffset")&&(r.presentationTimeOffset=o.presentationTimeOffset/r.timescale),r.MSETimeOffset=this.timelineConverter.calcMSETimeOffset(r),s.push(r)}return s},getAdaptationsForPeriod:function(e,t){var n,r=null===e?null:e.Period_asArray[t.index],i=[];if(r)for(var o=0;o<r.AdaptationSet_asArray.length;o+=1)n=new c.vo.AdaptationSet,n.index=o,n.period=t,i.push(n);return i},getRegularPeriods:function(e,t){var n,r,i=[],o=this.getIsDynamic(e),a=null,s=null,u=null,l=null;for(n=0,r=e.Period_asArray.length;n<r;n+=1)s=e.Period_asArray[n],s.hasOwnProperty("start")?(l=new c.vo.Period,l.start=s.start):null!==a&&s.hasOwnProperty("duration")?(l=new c.vo.Period,l.start=u.start+u.duration,l.duration=s.duration):0!==n||o||(l=new c.vo.Period,l.start=0),null!==u&&isNaN(u.duration)&&(u.duration=l.start-u.start),null!==l&&s.hasOwnProperty("id")&&(l.id=s.id),null!==l&&s.hasOwnProperty("duration")&&(l.duration=s.duration),null!==l&&(l.index=n,l.mpd=t,i.push(l)),a=s,s=null,u=l,l=null;return 0===i.length||(t.checkTime=this.getCheckTime(e,i[0]),null!==u&&isNaN(u.duration)&&(u.duration=this.getEndTimeForLastPeriod(t)-u.start)),i},getMpd:function(e){var t=new c.vo.Mpd;return e?(t.manifest=e,e.hasOwnProperty("availabilityStartTime")?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):t.availabilityStartTime=new Date(e.mpdLoadedTime.getTime()),e.hasOwnProperty("availabilityEndTime")&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty("suggestedPresentationDelay")&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty("timeShiftBufferDepth")&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty("maxSegmentDuration")&&(t.maxSegmentDuration=e.maxSegmentDuration),t):null},getFetchTime:function(e,t){var n=this.timelineConverter.calcPresentationTimeFromWallTime(e.mpdLoadedTime,t);return n},getCheckTime:function(e,t){var n=NaN;return e.hasOwnProperty("minimumUpdatePeriod")&&(n=this.getFetchTime(e,t)+e.minimumUpdatePeriod),n},getEndTimeForLastPeriod:function(e){var t;if(e.manifest.mediaPresentationDuration)t=e.manifest.mediaPresentationDuration;else{if(isNaN(e.checkTime))return new Error("Must have @mediaPresentationDuration or @minimumUpdatePeriod on MPD or an explicit @duration on the last period.");t=e.checkTime}return t},getEventsForPeriod:function(e,t){var n=null===e?null:e.Period_asArray,r=null===n?null:n[t.index].EventStream_asArray,i=[];if(r)for(var o=0;o<r.length;o+=1){var a=new c.vo.EventStream;if(a.period=t,a.timescale=1,!r[o].hasOwnProperty("schemeIdUri"))throw"Invalid EventStream. SchemeIdUri has to be set";a.schemeIdUri=r[o].schemeIdUri,r[o].hasOwnProperty("timescale")&&(a.timescale=r[o].timescale),r[o].hasOwnProperty("value")&&(a.value=r[o].value);for(var s=0;s<r[o].Event_asArray.length;s+=1){var u=new c.vo.Event;u.presentationTime=0,u.eventStream=a,r[o].Event_asArray[s].hasOwnProperty("presentationTime")&&(u.presentationTime=r[o].Event_asArray[s].presentationTime),r[o].Event_asArray[s].hasOwnProperty("duration")&&(u.duration=r[o].Event_asArray[s].duration),r[o].Event_asArray[s].hasOwnProperty("id")&&(u.id=r[o].Event_asArray[s].id),i.push(u)}}return i},getEventStreamForAdaptationSet:function(e){var t,n=[];if(e&&(t=e.InbandEventStream_asArray,t))for(var r=0;r<t.length;r+=1){var i=new c.vo.EventStream;if(i.timescale=1,!t[r].hasOwnProperty("schemeIdUri"))throw"Invalid EventStream. SchemeIdUri has to be set";i.schemeIdUri=t[r].schemeIdUri,t[r].hasOwnProperty("timescale")&&(i.timescale=t[r].timescale),t[r].hasOwnProperty("value")&&(i.value=t[r].value),n.push(i)}return n},getEventStreamForRepresentation:function(e,t){var n,r=[];if(e&&t&&(n=e.Representation_asArray[t.index].InbandEventStream_asArray,n))for(var i=0;i<n.length;i++){var o=new c.vo.EventStream;if(o.timescale=1,o.representation=t,!n[i].hasOwnProperty("schemeIdUri"))throw"Invalid EventStream. SchemeIdUri has to be set";o.schemeIdUri=n[i].schemeIdUri,n[i].hasOwnProperty("timescale")&&(o.timescale=n[i].timescale),n[i].hasOwnProperty("value")&&(o.value=n[i].value),r.push(o)}return r},getRepresentationBandwidth:function(e,t){return this.getBandwidth(this.getRepresentationFor(t,e))}},c.dependencies.DashMetricsExtensions=function(){"use strict";var e=function(e,t){var n,r,i,o,a,s,u,l;for(s=0;s<e.length;s+=1)for(n=e[s],i=n.AdaptationSet_asArray,u=0;u<i.length;u+=1)for(r=i[u],a=r.Representation_asArray,l=0;l<a.length;l+=1)if(o=a[l],t===o.id)return l;return-1},t=function(e,t){var n,r,i,o,a,s,u,l;for(s=0;s<e.length;s+=1)for(n=e[s],i=n.AdaptationSet_asArray,u=0;u<i.length;u+=1)for(r=i[u],a=r.Representation_asArray,l=0;l<a.length;l+=1)if(o=a[l],t===o.id)return o;return null},n=function(e,t){var n=!1;return"video"===t?(this.manifestExt.getIsVideo(e),"video"===e.type&&(n=!0)):"audio"===t?(this.manifestExt.getIsAudio(e),"audio"===e.type&&(n=!0)):n=!1,n},r=function(e,t){var r,i,o,a,s,u;for(s=0;s<e.length;s+=1)for(r=e[s],o=r.AdaptationSet_asArray,u=0;u<o.length;u+=1)if(i=o[u],a=i.Representation_asArray,n.call(this,i,t))return a.length;return-1},i=function(e){var n,r=this,i=r.manifestModel.getValue(),o=null===i?null:i.Period_asArray;return o?(n=t.call(r,o,e),null===n?null:n.bandwidth):null},o=function(t){var n,r=this,i=r.manifestModel.getValue(),o=null===i?null:i.Period_asArray;return o?(n=e.call(r,o,t),n):null},a=function(e){var t,n=this,i=n.manifestModel.getValue(),o=null===i?null:i.Period_asArray;return o?(t=r.call(this,o,e),t):null},s=function(e){if(null===e)return null;var t,n,r,i=e.RepSwitchList;return null===i||i.length<=0?null:(t=i.length,n=t-1,r=i[n],r)},u=function(e){if(null===e)return null;var t,n,r,i=e.BufferLevel;return null===i||i.length<=0?null:(t=i.length,n=t-1,r=i[n],r)},l=function(e){if(null===e)return null;var t,n,r=e.HttpList,i=null;if(null===r||r.length<=0)return null;t=r.length,n=t-1;while(n>=0){if(null!==r[n].responsecode){i=r[n];break}n-=1}return i},c=function(e){return null===e?[]:e.HttpList?e.HttpList:[]},d=function(e){if(null===e)return null;var t,n,r,i=e.DroppedFrames;return null===i||i.length<=0?null:(t=i.length,n=t-1,r=i[n],r)},f=function(e){if(null===e)return null;var t=e.PlaybackQuality;return null===t||t.length<=0?null:t[t.length-1]},h=function(e){if(null===e)return null;var t,n=e.DVRInfo,r=null;return null===n||n.length<=0?null:(t=n.length-1,r=n[t],r)},p=function(e){if(null===e)return null;var t,n,r,i=e.ManifestUpdate;return null===i||i.length<=0?null:(t=i.length,n=t-1,r=i[n],r)};return{manifestModel:void 0,manifestExt:void 0,getBandwidthForRepresentation:i,getIndexForRepresentation:o,getMaxIndexForBufferType:a,getCurrentRepresentationSwitch:s,getCurrentBufferLevel:u,getCurrentHttpRequest:l,getHttpRequests:c,getCurrentDroppedFrames:d,getCurrentPlaybackQuality:f,getCurrentDVRInfo:h,getCurrentManifestUpdate:p}},c.dependencies.DashMetricsExtensions.prototype={constructor:c.dependencies.DashMetricsExtensions},c.dependencies.DashParser=function(){"use strict";var e=31536e3,n=2592e3,r=86400,i=3600,o=60,a=60,s=1e3,u=/^P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,l=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})([0-9]{2}))?/,c=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,d=[{type:"duration",test:function(e){return u.test(e)},converter:function(t){var a=u.exec(t);return parseFloat(a[2]||0)*e+parseFloat(a[4]||0)*n+parseFloat(a[6]||0)*r+parseFloat(a[8]||0)*i+parseFloat(a[10]||0)*o+parseFloat(a[12]||0)}},{type:"datetime",test:function(e){return l.test(e)},converter:function(e){var t,n=l.exec(e);if(t=Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10),n[6]&&parseInt(n[6],10)||0,n[7]&&parseFloat(n[7])*s||0),n[9]&&n[10]){var r=parseInt(n[9],10)*a+parseInt(n[10],10);t+=("+"===n[8]?-1:1)*r*o*s}return new Date(t)}},{type:"numeric",test:function(e){return c.test(e)},converter:function(e){return parseFloat(e)}}],f=function(){var e,t,n,r;return r=[{name:"profiles",merge:!1},{name:"width",merge:!1},{name:"height",merge:!1},{name:"sar",merge:!1},{name:"frameRate",merge:!1},{name:"audioSamplingRate",merge:!1},{name:"mimeType",merge:!1},{name:"segmentProfiles",merge:!1},{name:"codecs",merge:!1},{name:"maximumSAPPeriod",merge:!1},{name:"startsWithSap",merge:!1},{name:"maxPlayoutRate",merge:!1},{name:"codingDependency",merge:!1},{name:"scanType",merge:!1},{name:"FramePacking",merge:!0},{name:"AudioChannelConfiguration",merge:!0},{name:"ContentProtection",merge:!0}],e={},e.name="AdaptationSet",e.isRoot=!1,e.isArray=!0,e.parent=null,e.children=[],e.properties=r,t={},t.name="Representation",t.isRoot=!1,t.isArray=!0,t.parent=e,t.children=[],t.properties=r,e.children.push(t),n={},n.name="SubRepresentation",n.isRoot=!1,n.isArray=!0,n.parent=t,n.children=[],n.properties=r,t.children.push(n),e},h=function(){var e,t,n,r;return r=[{name:"SegmentBase",merge:!0},{name:"SegmentTemplate",merge:!0},{name:"SegmentList",merge:!0}],e={},e.name="Period",e.isRoot=!1,e.isArray=!0,e.parent=null,e.children=[],e.properties=r,t={},t.name="AdaptationSet",t.isRoot=!1,t.isArray=!0,t.parent=e,t.children=[],t.properties=r,e.children.push(t),n={},n.name="Representation",n.isRoot=!1,n.isArray=!0,n.parent=t,n.children=[],n.properties=r,t.children.push(n),e},p=function(){var e,t,n,r,i;return i=[{name:"BaseURL",merge:!0,mergeFunction:function(e,t){var n;return n=0===t.indexOf("http://")?t:e+t,n}}],e={},e.name="mpd",e.isRoot=!0,e.isArray=!0,e.parent=null,e.children=[],e.properties=i,t={},t.name="Period",t.isRoot=!1,t.isArray=!0,t.parent=null,t.children=[],t.properties=i,e.children.push(t),n={},n.name="AdaptationSet",n.isRoot=!1,n.isArray=!0,n.parent=t,n.children=[],n.properties=i,t.children.push(n),r={},r.name="Representation",r.isRoot=!1,r.isArray=!0,r.parent=n,r.children=[],r.properties=i,n.children.push(r),e},m=function(){var e=[];return e.push(f()),e.push(h()),e.push(p()),e},g=function(e,n){var r,i=new v(d,"",!0),o=new y(m()),a=new Date,s=null,u=null;try{r=i.xml_str2json(e),s=new Date,r.hasOwnProperty("BaseURL")?(r.BaseURL=r.BaseURL_asArray[0],0!==r.BaseURL.toString().indexOf("http")&&(r.BaseURL=n+r.BaseURL)):r.BaseURL=n,o.run(r),u=new Date,this.debug.log("Parsing complete: ( xml2json: "+(s.getTime()-a.getTime())+"ms, objectiron: "+(u.getTime()-s.getTime())+"ms, total: "+(u.getTime()-a.getTime())/1e3+"s)")}catch(l){return t.reject(null)}return t.when(r)};return{debug:void 0,parse:g}},c.dependencies.DashParser.prototype={constructor:c.dependencies.DashParser},c.dependencies.FragmentExtensions=function(){"use strict";var e=function(e){var t,n,r,i,o,a,s=new DataView(e),u=0;while("tfdt"!==i&&u<s.byteLength){for(r=s.getUint32(u),u+=4,i="",o=0;o<4;o+=1)a=s.getInt8(u),i+=String.fromCharCode(a),u+=1;"moof"!==i&&"traf"!==i&&"tfdt"!==i&&(u+=r-8)}if(u===s.byteLength)throw"Error finding live offset.";return n=s.getUint8(u),this.debug.log("position: "+u),0===n?(u+=4,t=s.getUint32(u,!1)):(u+=r-16,t=g.Math.to64BitNumber(s.getUint32(u+4,!1),s.getUint32(u,!1))),{version:n,base_media_decode_time:t}},n=function(e){var n,r,i,o,a,s,u,l=new DataView(e),c=0;while("sidx"!==a&&c<l.byteLength){for(s=l.getUint32(c),c+=4,a="",o=0;o<4;o+=1)u=l.getInt8(c),a+=String.fromCharCode(u),c+=1;"moof"!==a&&"traf"!==a&&"sidx"!==a?c+=s-8:"sidx"===a&&(c-=8)}return n=l.getUint8(c+8),c+=12,r=l.getUint32(c+4,!1),c+=8,i=0===n?l.getUint32(c,!1):g.Math.to64BitNumber(l.getUint32(c+4,!1),l.getUint32(c,!1)),t.when({earliestPresentationTime:i,timescale:r})},r=function(n){var r,i,o,a=t.defer(),s=new XMLHttpRequest,u=!1;return r=n,s.onloadend=function(){u||(i="Error loading fragment: "+r,a.reject(i))},s.onload=function(){u=!0,o=e(s.response),a.resolve(o)},s.onerror=function(){i="Error loading fragment: "+r,a.reject(i)},s.open("GET",r),s.responseType="arraybuffer",s.send(null),a.promise};return{debug:void 0,loadFragment:r,parseTFDT:e,parseSIDX:n}},c.dependencies.FragmentExtensions.prototype={constructor:c.dependencies.FragmentExtensions},c.dependencies.TimelineConverter=function(){"use strict";var e=0,t=function(e,t,n,r){var i=NaN;return i=r?n&&t.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*e):t.availabilityStartTime,i},n=function(e,n,r){return t.call(this,e,n,r)},r=function(e,n,r){return t.call(this,e,n,r,!0)},i=function(e){var t,n="dynamic"===e.mpd.manifest.type,r=parseInt(this.uriQueryFragModel.getURIFragmentData().s,10);return n?(!isNaN(r)&&r>1262304e3&&(t=r-e.mpd.availabilityStartTime.getTime()/1e3,(t>e.liveEdge||t<e.liveEdge-e.mpd.timeShiftBufferDepth)&&(t=null)),t=t||e.liveEdge):t=!isNaN(r)&&r<e.duration&&r>=0?r:e.start,t},o=function(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime())/1e3},a=function(e,t){var n=t.presentationTimeOffset;return e-n},s=function(e,t){var n=t.presentationTimeOffset;return n+e},u=function(e,t){var n,r,i;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,r=e.presentationStartTime+n,i=new Date(e.availabilityStartTime.getTime()+1e3*r)),i},l=function(e,t,n){var r,i=this,o=i.calcSegmentAvailabilityRange(e,n);return t>=o.start&&t<=o.end?t:(r=Math.max(o.end-2*e.adaptation.period.mpd.manifest.minBufferTime,o.start),r)},c=function(t,n){var r,i,a=t.segmentDuration,s=0,u=t.adaptation.period.duration,l={start:s,end:u};return n?t.adaptation.period.mpd.isClientServerTimeSyncCompleted&&!isNaN(a)||!t.segmentAvailabilityRange?(r=t.adaptation.period.mpd.checkTime,i=o(new Date((new Date).getTime()+e),t.adaptation.period),s=Math.max(i-t.adaptation.period.mpd.timeShiftBufferDepth,0),r+=e/1e3,u=isNaN(r)?i:Math.min(r,i),l={start:s,end:u},l):t.segmentAvailabilityRange:l},d=function(e){var t=e.presentationTimeOffset;return-t};return{system:void 0,debug:void 0,uriQueryFragModel:void 0,setup:function(){},calcAvailabilityStartTimeFromPresentationTime:n,calcAvailabilityEndTimeFromPresentationTime:r,calcPresentationTimeFromWallTime:o,calcPresentationTimeFromMediaTime:a,calcPresentationStartTime:i,calcActualPresentationTime:l,calcMediaTimeFromPresentationTime:s,calcSegmentAvailabilityRange:c,calcWallTimeForSegment:u,calcMSETimeOffset:d}},c.dependencies.TimelineConverter.prototype={constructor:c.dependencies.TimelineConverter},c.vo.AdaptationSet=function(){"use strict";this.period=null,this.index=-1},c.vo.AdaptationSet.prototype={constructor:c.vo.AdaptationSet},c.vo.Event=function(){"use strict";this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},c.vo.Event.prototype={constructor:c.vo.Event},c.vo.EventStream=function(){"use strict";this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""},c.vo.EventStream.prototype={constructor:c.vo.EventStream},c.vo.Mpd=function(){"use strict";this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.checkTime=NaN,this.clientServerTimeShift=0,this.isClientServerTimeSyncCompleted=!1},c.vo.Mpd.prototype={constructor:c.vo.Mpd},c.vo.Period=function(){"use strict";this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.liveEdge=NaN},c.vo.Period.prototype={constructor:c.vo.Period},c.vo.Representation=function(){"use strict";this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0},c.vo.Representation.prototype={constructor:c.vo.Representation},c.vo.Segment=function(){"use strict";this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null},c.vo.Segment.prototype={constructor:c.vo.Segment},l=function(){"use strict";return{dependencies:{}}}(),l.dependencies.HlsStream=function(){"use strict";var e,n,r,i,o,a,s,u,l,c,f,p,m,g,y,v,_,E,b,T,S,w={stream:{responseType:"arraybuffer",contentType:"application/octet-stream"},text:{responseType:"text",contentType:"application/x-www-form-urlencoded"}},x=null,I=!1,A=!0,D=!1,R=null,M="und",C="und",N=-1,L=function(){D&&(this.debug.info("[Stream] Play."),this.videoModel.play())},P=function(){this.debug.info("[Stream] Pause."),this.videoModel.pause()},O=function(e){D&&(this.debug.info("[Stream] Seek: "+e),this.videoModel.setCurrentTime(e))},F=function(){this.debug.info("[Stream] <video> loadedmetadata event"),this.metricsModel.addMetaData(),this.metricsModel.addState("video","buffering",this.getVideoModel().getCurrentTime())},k=function(){this.debug.info("[Stream] <video> loadeddata event"),this.setAudioLang(M),this.enableSubtitles(I)},B=function(){this.debug.info("[Stream] <video> canplay event"),A&&this.videoModel.play()},U=function(){this.debug.info("[Stream] <video> playing event"),this.metricsModel.addState("video","playing",this.getVideoModel().getCurrentTime())},H=function(){this.debug.info("[Stream] <video> loadstart event")},j=function(){this.debug.info("[Stream] <video> play event"),this.metricsModel.addPlayList("video",(new Date).getTime(),this.videoModel.getCurrentTime(),"play")},K=function(){this.debug.info("[Stream] <video> ended event"),this.metricsModel.addState("video","stopped",this.videoModel.getCurrentTime(),1)},V=function(){this.debug.info("[Stream] <video> pause event"),this.metricsModel.addState("video","paused",this.videoModel.getCurrentTime()),this.metricsModel.addPlayList("video",(new Date).getTime(),this.videoModel.getCurrentTime(),"pause")},q=function(e){var t,n=e.target.error,r="[Stream] <video> error: ",i=null;if(-1!==n.code){switch(n.code){case 1:t=d.dependencies.ErrorHandler.prototype.MEDIA_ERR_ABORTED,r+="[HLS] The fetching process for the media resource was aborted by the user";break;case 2:t=d.dependencies.ErrorHandler.prototype.MEDIA_ERR_NETWORK,r+="[HLS] A network error has caused the user agent to stop fetching the media resource";break;case 3:t=d.dependencies.ErrorHandler.prototype.MEDIA_ERR_DECODE,r+="[HLS] An error has occurred in the decoding of the media resource";break;case 4:t=d.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_MANIFEST,r="[HLS] Failed to download manifest",i={url:x,status:0};break;case 5:t=d.dependencies.ErrorHandler.prototype.MEDIA_ERR_ENCRYPTED,r+="[HLS] The encrypted media stream could not be played";break}!0,this.errHandler.sendError(t,r,i)}},G=function(){this.debug.info("[Stream] <video> seeking event: "+this.videoModel.getCurrentTime()),this.metricsModel.addState("video","seeking",this.videoModel.getCurrentTime()),this.metricsModel.addPlayList("video",(new Date).getTime(),this.getVideoModel().getCurrentTime(),d.vo.metrics.PlayList.SEEK_START_REASON)},Y=function(){},z=function(){},W=function(){this.debug.info("[Stream] <video> timeupdate event: "+this.videoModel.getCurrentTime())},X=function(){this.debug.info("[Stream] <video> waiting event"),this.getVideoModel().isSeeking()||this.metricsModel.addState("video","buffering",this.getVideoModel().getCurrentTime())},$=function(){this.debug.info("[Stream] <video> durationchange event: "+this.videoModel.getDuration())},Q=function(){this.debug.info("[Stream] <video> ratechange event: "+this.videoModel.getPlaybackRate())},J=function(t){return e?e[t]:null},Z=function(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},ee=function(e){var t=String.fromCharCode.apply(null,new Uint16Array(e.buffer)),n=t.split("//");if(2!=n.length)throw"Invalid content key format";return n[1]},te=function(){var e=J("com.apple.fps.1_0");return e&&e.serverCertificate?h.decodeArray(e.serverCertificate):new Uint8Array(0)},ne=function(e,t,n){"string"==typeof t&&(t=Z(t));var r=0,i=new ArrayBuffer(e.byteLength+4+t.byteLength+4+n.byteLength),o=new DataView(i),a=new Uint8Array(i,r,e.byteLength);a.set(e),r+=a.byteLength,o.setUint32(r,t.byteLength,!0),r+=4;var s=new Uint16Array(i,r,t.length);s.set(t),r+=s.byteLength,o.setUint32(r,n.byteLength,!0),r+=4;var u=new Uint8Array(i,r,n.byteLength);return u.set(n),new Uint8Array(i,0,i.byteLength)},re=function(e,t,n){return"text"===t&&(n=String.fromCharCode.apply(null,n),n="spc="+h.encodeASCII(n)+"&assetId="+encodeURIComponent(e.contentId)),n},ie=function(e,t,n,r){var i=this,o=!0,a=new XMLHttpRequest;a.responseType=w[t].responseType,a.session=e,a.onload=function(){this.status<200||this.status>299||200===this.status&&4===this.readyState&&(i.debug.log("[DRM] Received license response"),o=!1,oe(this,t))},a.onerror=a.onloadend=function(){o?(o=!1,this.aborted||i.errHandler.sendError(d.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_LICENSER_ERROR,"License request failed",{url:n,status:this.status,error:this.response}),a=null):a=null},a.open("POST",n,!0),a.setRequestHeader("Content-Type",w[t].contentType),a.send(r)},oe=function(e,t){var n;"text"===t?(n=e.responseText.trim(),"<ckc>"===n.substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6)),n=h.decodeArray(n)):n=new Uint8Array(e.response),e.session.update(n)},ae=function(e){var t=e.target.error,n=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR,r="MediakeyError";if(t)switch(t.code){case 1:n=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_UNKNOWN,r="An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break;case 2:n=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_CLIENT,r="The Key System could not be installed or updated.";break;case 3:n=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_SERVICE,r="The message passed into update indicated an error from the license service.";break;case 4:n=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_OUTPUT,r="There is no available output device with the required characteristics for the content protection system.";break;case 5:n=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_HARDWARECHANGE,r+="A hardware configuration change caused a content protection error.";break;case 6:n=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_DOMAIN,r="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.";break;default:n=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_UNKNOWN,r="An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break}else n=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_UNKNOWN,r="An unspecified error occurred. This value is used for errors that don't match any of the other codes.";return t.systemCode&&(r+="  (System Code = "+e.systemCode+")"),new d.vo.protection.KeyError(n,r)},se=function(e){this.debug.info("[Stream] <video> needkey event",e);var t=this.videoModel.getElement(),n=ee(e.initData),r=te(),i=ne(e.initData,n,r),o=new WebKitMediaKeys("com.apple.fps.1_0");t.webkitSetMediaKeys(o);var a=t.webkitKeys.createSession("video/mp4",i);if(!a)throw"Could not create key session";a.error&&this.errHandler.sendError(d.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_NO_SESSION,"Failed to create key session",{code:a.error.code,systemCode:a.error.systemCode}),a.contentId=n,a.addEventListener("webkitkeymessage",b,!1),a.addEventListener("webkitkeyadded",T,!1),a.addEventListener("webkitkeyerror",S,!1)},ue=function(e){this.debug.info("[Stream] keymessage event",e);var t,n=e.target,r=e.message,i=null,o=J("com.apple.fps.1_0");o&&(o.serverURL&&"string"===typeof o.serverURL&&""!==o.serverURL?i=o.serverURL:o.laURL&&""!==o.laURL&&(i=o.laURL)),null!==i?(t=o&&o.requestType&&"text"===o.requestType?"text":"stream",r=re(n,t,r),ie.call(this,n,t,i,r)):this.errHandler.sendError(d.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_URL_LICENSER_UNKNOWN,"No license server URL specified")},le=function(e){this.debug.info("[Stream] keyadded event",e)},ce=function(e){this.debug.info("[Stream] keyerror event",e);var t=ae(e);this.errHandler.sendError(t.code,t.msg)};return{system:void 0,videoModel:void 0,capabilities:void 0,debug:void 0,metricsExt:void 0,errHandler:void 0,metricsModel:void 0,eventBus:void 0,notify:void 0,setup:function(){o=j.bind(this),a=V.bind(this),s=q.bind(this),u=G.bind(this),l=Y.bind(this),m=z.bind(this),g=Q.bind(this),c=W.bind(this),f=X.bind(this),p=$.bind(this),r=F.bind(this),i=k.bind(this),y=B.bind(this),v=U.bind(this),_=H.bind(this),E=se.bind(this),b=ue.bind(this),T=le.bind(this),S=ce.bind(this),n=K.bind(this)},load:function(e){x=e,N>=0&&(e+="#t="+N),this.videoModel.setSource(e)},setVideoModel:function(e){this.videoModel=e,this.videoModel.listen("play",o),this.videoModel.listen("pause",a),this.videoModel.listen("error",s),this.videoModel.listen("seeking",u),this.videoModel.listen("seeked",l),this.videoModel.listen("timeupdate",c),this.videoModel.listen("waiting",f),this.videoModel.listen("durationchange",p),this.videoModel.listen("progress",m),this.videoModel.listen("ratechange",g),this.videoModel.listen("loadedmetadata",r),this.videoModel.listen("loadeddata",i),this.videoModel.listen("ended",n),this.videoModel.listen("canplay",y),this.videoModel.listen("playing",v),this.videoModel.listen("loadstart",_),this.videoModel.listen("webkitneedkey",E)},reset:function(){return this.debug.info("[Stream] Reset"),P.call(this),R&&(R.aborted=!0,R.abort()),this.videoModel.unlisten("play",o),this.videoModel.unlisten("pause",a),this.videoModel.unlisten("error",s),this.videoModel.unlisten("seeking",u),this.videoModel.unlisten("seeked",l),this.videoModel.unlisten("timeupdate",c),this.videoModel.unlisten("waiting",f),this.videoModel.unlisten("durationchange",p),this.videoModel.unlisten("progress",m),this.videoModel.unlisten("ratechange",g),this.videoModel.unlisten("loadedmetadata",r),this.videoModel.unlisten("loadeddata",i),this.videoModel.unlisten("ended",n),this.videoModel.unlisten("canplay",y),this.videoModel.unlisten("playing",v),this.videoModel.unlisten("loadstart",_),this.videoModel.unlisten("webkitneedkey",E),this.debug.info("[Stream] Reset source"),this.videoModel.setSource(null),this.videoModel=null,t.when(!0)},setProtectionData:function(t){e=t},setInitialStartTime:function(e){var t=parseFloat(e);isNaN(t)||(N=t)},getAudioTracks:function(){var e=[],t=this.getVideoModel().getElement().audioTracks;if(0===t.length)return[];for(var n=0;n<t.length;n++)e.push({type:"audio",id:t[n].id,lang:t[n].language});return e},setAudioLang:function(e){this.debug.log("[Stream] Set audio lang: "+e);var t=this.getVideoModel().getElement().audioTracks;if(0!==t.length)for(var n=0;n<t.length;n++)e===t[n].language&&(t[n].enabled=!0)},setAudioTrack:function(e){this.debug.log("[Stream] Set audio track: "+e.lang);var t=this.getVideoModel().getElement().audioTracks;if(0!==t.length)for(var n=0;n<t.length;n++)e.id===t[n].id&&e.lang===t[n].language&&(t[n].enabled=!0)},getSelectedAudioTrack:function(){for(var e=this.getVideoModel().getElement().audioTracks,t=0;t<e.length;t++)if(e[t].enabled)return{type:"audio",id:e[t].id,lang:e[t].language};return null},getSubtitleTracks:function(){var e=[],t=this.getVideoModel().getElement().textTracks;if(0===t.length)return[];for(var n=0;n<t.length;n++)e.push({type:"text",id:t[n].label,lang:t[n].language});return e},enableSubtitles:function(e){I=e;var t=this.getVideoModel().getElement().textTracks;if(0!==t.length){e&&this.debug.log("[Stream] Set subtitle lang: "+C);for(var n=!1,r=0;r<t.length;r++)e&&C===t[r].language?(t[r].mode="showing",n=!0):t[r].mode="hidden";e&&!n&&(t[0].mode="showing")}},setSubtitleTrack:function(e){this.debug.log("[Stream] Set subtitle track: "+e.lang);var t=this.getVideoModel().getElement().textTracks;if(0!==t.length)for(var n=0;n<t.length;n++)e.id===t[n].label&&e.lang===t[n].language&&(t[n].mode="showing")},getSelectedSubtitleTrack:function(){for(var e=this.getVideoModel().getElement().textTracks,t=0;t<e.length;t++)if("showing"===e[t].mode)return{type:"text",id:e[t].label,lang:e[t].language};return null},initProtection:function(){},getVideoModel:function(){return this.videoModel},setAutoPlay:function(e){A=e},setDefaultAudioLang:function(e){M=e},setDefaultSubtitleLang:function(e){C=e},getAutoPlay:function(){return A},getDuration:function(){return this.videoModel.getDuration()},getStartTime:function(){return 0},getPeriodIndex:function(){return 0},getId:function(){return""},getPeriodInfo:function(){return null},getMinbufferTime:function(){return 0},getLiveDelay:function(){return-1},startEventController:function(){},resetEventController:function(){},setTrickModeSpeed:function(){},getTrickModeSpeed:function(){return-1},updateData:function(){},play:L,seek:O,pause:P}},l.dependencies.HlsStream.prototype={constructor:l.dependencies.HlsStream},u=function(){"use strict";return{dependencies:{}}}(),d.utils.copyMethods=function(e){var t=new e;for(var n in t.parent={},t)t.parent[n]=t[n];return t.setup=function(){for(var e in this.parent)void 0===this.parent[e]&&(this.parent[e]=this[e])},t},d.utils.DOMParser=function(){"use strict";var e=null,t=null;return{getAllSpecificNodes:function(e,t){var n,r,i=0,o=[];if(e&&(r=e.querySelectorAll(t),r))for(i=0;i<r.length;i++)n=this.getAttributeValue(r[i],"xml:id"),n&&(o[n]=r[i].attributes,r[i].childNodes.length>0&&(o[n].childNodes=r[i].childNodes));return o},getAttributeName:function(e,t){var n=[],r=null,i=0,o=null;if(e&&e.attributes&&(o=e.attributes,o))for(i=0;i<o.length;i++)r=o[i],r.value===t&&n.push(r.name);return n},getTextNodesIn:function(e){var t=[],n=0,r=null,i=null,o=null;if(e)for(r=e.childNodes,n=0;n<r.length;n++)i=r[n],o=i.nodeType,3==o?t.push(i):1!=o&&9!=o&&11!=o||(t=t.concat(this.getTextNodesIn(i)));return t},getAttributeValue:function(e,t,n){var r=null;return e&&"function"==typeof e.getAttribute&&(r=e.getAttribute(t),null===r&&n&&(r=e.getAttributeNS(n,t))),r},getChildNode:function(e,t){var n,r=0;if(e&&e.childNodes)for(r=0;r<e.childNodes.length;r++){if(n=e.childNodes[r],n.nodeName===t)return n;n=void 0}return n},getChildNodes:function(e,t){var n=0,r=[];if(e&&e.childNodes)for(n=0;n<e.childNodes.length;n++)e.childNodes[n].nodeName===t&&r.push(e.childNodes[n]);return r},createXmlTree:function(n){if(window.DOMParser)try{if(e||(e=new window.DOMParser),t=e.parseFromString(n,"text/xml"),t.getElementsByTagName("parsererror").length>0)throw new Error("Error parsing XML")}catch(r){t=null}return t}}},d.utils.isUTF16=function(e){var t,n,r,i,o=0,a=e&&e.length,s=null;if(a<2){if(e[0]>255)return!1}else{if(t=e[0],n=e[1],255===t&&254===n)return!0;if(254===t&&255===n)return!0;for(;o<a;o++){if(0===e[o]){s=o;break}if(e[o]>255)return!1}if(null===s)return!1;if(r=e[s+1],void 0!==r&&r>0&&r<128)return!0;if(i=e[s-1],void 0!==i&&i>0&&i<128)return!0}return!1},d.utils.ObjectIron=function(e){var t;t=[];for(var n=0,r=e.length;n<r;n+=1)e[n].isRoot?t.push("root"):t.push(e[n].name);var i=function(e,t){var n;if(null!==e&&null!==t)for(n in e)e.hasOwnProperty(n)&&(t.hasOwnProperty(n)||(t[n]=e[n]))},o=function(e,t,n){var r,o,a,s,u;if(null!==e&&0!==e.length)for(r=0,o=e.length;r<o;r+=1)a=e[r],t.hasOwnProperty(a.name)&&(n.hasOwnProperty(a.name)?a.merge&&(s=t[a.name],u=n[a.name],"object"===typeof s&&"object"===typeof u?i(s,u):null!==a.mergeFunction?n[a.name]=a.mergeFunction(s,u):n[a.name]=s+u):n[a.name]=t[a.name])},a=function(e,t){var n,r,i,s,u,l,c,d=e;if(e.transformFunc&&(t=e.transformFunc(t)),null===d.children||0===d.children.length)return t;for(n=0,r=d.children.length;n<r;n+=1){l=d.children[n];var f=null;if(t.hasOwnProperty(l.name))if(l.isArray)for(u=t[l.name+"_asArray"],i=0,s=u.length;i<s;i+=1)c=u[i],o(d.properties,t,c),f=a(l,c),t[l.name+"_asArray"][i]=f,t[l.name][i]=f;else c=t[l.name],o(d.properties,t,c),f=a(l,c),t[l.name]=f,t[l.name+"_asArray"]=[f]}return t},s=function(n){var r,i,o,u,l,c,d;if(null===n)return n;if("object"!==typeof n)return n;for(r=0,i=t.length;r<i;r+=1)"root"===t[r]&&(l=e[r],c=n,n=a(l,c));for(u in n)if(n.hasOwnProperty(u)){if(o=t.indexOf(u),-1!==o)if(l=e[o],l.isArray)for(d=n[u+"_asArray"],r=0,i=d.length;r<i;r+=1)c=d[r],n[u][r]=a(l,c),n[u+"_asArray"][r]=a(l,c);else c=n[u],n[u]=a(l,c),n[u+"_asArray"]=[a(l,c)];n[u]=s(n[u])}return n};return{run:s}},d.dependencies.protection.CommonEncryption={findCencContentProtection:function(e){var t,n=null,r=0;for(r=0;r<e.length;++r)t=e[r],"urn:mpeg:dash:mp4protection:2011"===t.schemeIdUri.toLowerCase()&&"cenc"===t.value.toLowerCase()&&(n=t);return n},getPSSHData:function(e){var t=8,n=new DataView(e),r=n.getUint8(t);return t+=20,r>0&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)},getPSSHForKeySystem:function(e,t){var n=d.dependencies.protection.CommonEncryption.parsePSSHList(t);return n.hasOwnProperty(e.uuid.toLowerCase())?n[e.uuid.toLowerCase()]:null},parseInitDataFromContentProtection:function(e){return e&&"pssh"in e?h.decodeArray(e.pssh.__text).buffer:null},readBytes:function(e,t,n){var r=0,i=0;for(i=0;i<n;i++)r<<=8,r+=e[t],t++;return r},parsePSSHList:function(e){if(null===e)return[];var t=new DataView(e),n=!1,r={},i=0;while(!n){var o,a,s,u,l=i;if(i>=t.buffer.byteLength)break;if(o=t.getUint32(i),a=i+o,i+=4,1886614376===t.getUint32(i))if(i+=4,s=t.getUint8(i),0===s||1===s){var c,d;for(i++,i+=3,u="",c=0;c<4;c++)d=t.getUint8(i+c).toString(16),u+=1===d.length?"0"+d:d;for(i+=4,u+="-",c=0;c<2;c++)d=t.getUint8(i+c).toString(16),u+=1===d.length?"0"+d:d;for(i+=2,u+="-",c=0;c<2;c++)d=t.getUint8(i+c).toString(16),u+=1===d.length?"0"+d:d;for(i+=2,u+="-",c=0;c<2;c++)d=t.getUint8(i+c).toString(16),u+=1===d.length?"0"+d:d;for(i+=2,u+="-",c=0;c<6;c++)d=t.getUint8(i+c).toString(16),u+=1===d.length?"0"+d:d;i+=6,u=u.toLowerCase(),t.getUint32(i),i+=4,r[u]=t.buffer.slice(l,a),i=a}else i=a;else i=a}return r},getKeySystemConfigurations:function(e,t,n){var r=[],i=[];return e&&i.push(new d.vo.protection.MediaCapability(e)),t&&r.push(new d.vo.protection.MediaCapability(t)),[new d.vo.protection.KeySystemConfiguration(r,i,"optional","temporary"===n?"optional":"required",[n])]}},ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return e&&e.buffer instanceof ArrayBuffer}),ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,t){var n,r,i,o=this.byteLength;return e=0|e||0,t=void 0===t?o:0|t,e<0&&(e=Math.max(e+o,0)),t<0&&(t=Math.max(t+o,0)),0===o||e>=o||e>=t?new ArrayBuffer(0):(n=Math.min(o-e,t-e),r=new ArrayBuffer(n),i=new Uint8Array(r),i.set(new Uint8Array(this,e,n)),r)}),d.dependencies.ProtectionController=function(){"use strict";var e,t,n,r=[],i=null,o=!1,a=function(e){var t=null,r=e.systemString;return n&&(t=r in n?n[r]:null),t},s=function(n,i){var o,a,s,u,l,c=this,f=[],h=[],p=0;if(this.keySystem){for(a=0;a<n.length;a++)if(this.keySystem===n[a].ks){o=n[a].ks.sessionType,f.push({ks:n[a].ks,configs:n[a].ks.getKeySystemConfigurations(t,e,o)}),h.push({schemeIdURI:n[a].ks.schemeIdURI,systemString:n[a].ks.systemString}),s={},s[d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE]=function(e){c.protectionModel.unsubscribe(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,s),e.error?(c.debug.log("[DRM] KeySystem Access Denied! -- "+e.error),c.eventBus.dispatchEvent({type:d.dependencies.ProtectionController.events.KEY_SYSTEM_SELECTED,error:"[DRM] KeySystem Access Denied! -- "+e.error})):(c.debug.log("[DRM] KeySystem Access Granted"),c.eventBus.dispatchEvent({type:d.dependencies.ProtectionController.events.KEY_SYSTEM_SELECTED,data:e.data}),c.createKeySession(n[a].initData,n[a].cdmData))},this.protectionModel.subscribe(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,s,void 0,!0),this.protectionModel.requestKeySystemAccess(f);break}}else if(void 0===this.keySystem){for(this.keySystem=null,r.push(n),p=0;p<n.length;p++)o=n[p].ks.sessionType,f.push({ks:n[p].ks,configs:n[p].ks.getKeySystemConfigurations(t,e,o)}),h.push({schemeIdURI:n[p].ks.schemeIdURI,systemString:n[p].ks.systemString});u={},u[d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE]=function(e){c.protectionModel&&(c.protectionModel.unsubscribe(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,u),e.error?(c.debug.log("[DRM] KeySystem Access Denied! -- "+e.error),c.keySystem=void 0,c.protectionModel.unsubscribe(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,u),i||c.eventBus.dispatchEvent({type:d.dependencies.ProtectionController.events.KEY_SYSTEM_SELECTED,error:"[DRM] KeySystem Access Denied! -- "+e.error}),c.notify(d.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new d.vo.Error(d.dependencies.ErrorHandler.prototype.MEDIA_KEYSYSERR_ACCESS_DENIED,"No KeySystem/CDM available",{keySystems:h}))):(l=e.data,c.debug.log("[DRM] KeySystem Access ("+l.keySystem.systemString+") Granted!  Selecting key system..."),c.protectionModel.selectKeySystem(l)))},u[d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED]=function(e){if(c.protectionModel)if(c.protectionModel.unsubscribe(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,u),e.error)c.keySystem=void 0,i||c.eventBus.dispatchEvent({type:d.dependencies.ProtectionController.events.KEY_SYSTEM_SELECTED,error:"[DRM] Error selecting key system! -- "+e.error}),c.notify(d.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new d.vo.Error(d.dependencies.ErrorHandler.prototype.MEDIA_KEYSYSERR_ACCESS_DENIED,"No KeySystem/CDM available",{keySystems:h}));else for(c.debug.log("[DRM] KeySystem selected => create key session"),c.keySystem=c.protectionModel.keySystem,c.notify(d.dependencies.ProtectionController.eventList.ENAME_KEY_SYSTEM_SELECTED,l),c.eventBus.dispatchEvent({type:d.dependencies.ProtectionController.events.KEY_SYSTEM_SELECTED,data:l}),p=0;p<r.length;p++)for(a=0;a<r[p].length;a++)if(c.keySystem===r[p][a].ks){c.createKeySession(r[p][a].initData,r[p][a].cdmData);break}},this.protectionModel.subscribe(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,u,void 0,!0),this.protectionModel.subscribe(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,u,void 0,!0),this.protectionModel.requestKeySystemAccess(f)}else r.push(n)},u=function(e){var t,n,r=this,o=null;t=e.data,n=t.messageType?t.messageType:"license-request",this.debug.log("[DRM] Key message: type = "+n),this.eventBus.dispatchEvent({type:d.dependencies.ProtectionController.events.KEY_MESSAGE,data:t});var s=t.message,u=t.sessionToken,l=a(this.keySystem),c=this.keySystem.systemString,f=this.protectionExt.getLicenseServer(this.keySystem,l,n),h=!0;if(s&&0!==s.byteLength)if(f){if(this.protectionExt.isClearKey(this.keySystem)){var p=this.protectionExt.processClearKeyLicenseRequest(l,s);if(p)return this.debug.log("[DRM] ClearKey license request handled by application!"),void this.protectionModel.updateKeySession(u,p)}i=new XMLHttpRequest;var m=null;if(l)if(l.serverURL){var g=l.serverURL;"string"===typeof g&&""!==g?m=g:"object"===typeof g&&g.hasOwnProperty(n)&&(m=g[n])}else l.laURL&&""!==l.laURL&&(m=l.laURL);if(null===m&&(m=this.keySystem.getLicenseServerURLFromInitData(d.dependencies.protection.CommonEncryption.getPSSHData(u.initData)),m||(m=e.data.defaultURL)),m=f.getServerURLFromMessage(m,s,n),this.debug.log("[DRM] Licenser server url: "+m),m){i.open(f.getHTTPMethod(n),m,!0),i.responseType=f.getResponseType(c,n),i.onload=function(){this.status<200||this.status>299||200===this.status&&4===this.readyState&&(r.debug.log("[DRM] Received license response"),h=!1,o=f.getLicenseMessage(this.response,c,n),null!==o?(h=!1,r.protectionModel.updateKeySession(u,o)):h=!0)},i.onerror=i.onloadend=function(){h?(h=!1,this.aborted||r.notify(d.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new d.vo.Error(d.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_LICENSER_ERROR,"License request failed",{url:m,status:this.status,error:this.response&&null!==this.response?f.getErrorResponse(this.response):""})),i=null):i=null};var y=function(e){var t;if(e)for(t in e)"authorization"===t.toLowerCase()&&(i.withCredentials=!0),i.setRequestHeader(t,e[t])};l&&y(l.httpRequestHeaders),y(this.keySystem.getRequestHeadersFromMessage(s)),l&&l.withCredentials&&(i.withCredentials=!0),this.debug.log("[DRM] Send license request");var v=this.keySystem.getLicenseRequestFromMessage(s);null===v&&this.notify(d.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new d.vo.Error(d.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_NO_CHALLENGE,"No license challenge from CDM key message")),i.send(v)}else this.notify(d.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new d.vo.Error(d.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_URL_LICENSER_UNKNOWN,"No license server URL specified"))}else this.debug.log("[DRM] License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+u.getSessionID());else this.notify(d.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new d.vo.Error(d.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_NO_CHALLENGE,"Empty key message from CDM"))},l=function(e){var t,n,r=this;if(r.debug.log("[DRM] onNeedKey, initDataType = "+e.data.initDataType),"cenc"===e.data.initDataType){if(t=e.data.initData,ArrayBuffer.isView(t)&&(t=t.buffer),this.keySystem)for(var i=d.dependencies.protection.CommonEncryption.getPSSHForKeySystem(this.keySystem,t),o=this.protectionModel.getAllInitData(),a=0;a<o.length;a++)if(this.protectionExt.initDataEquals(i,o[a]))return void this.debug.log("[DRM] Ignoring initData because we have already seen it!");n=this.protectionExt.getSupportedKeySystems(t),0!==n.length?s.call(this,n,!1):r.debug.log("[DRM] Received needkey event with initData, but we don't support any of the key systems!")}else r.debug.log("[DRM] Only 'cenc' initData is supported!  Ignoring initData of type: "+e.data.initDataType)},c=function(e){e.error?(this.debug.error("[DRM] Failed to set license server certificate"),this.notify(d.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new d.vo.Error(d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_SERVER_CERTIFICATE,"Failed to set server certificate",e.error))):this.debug.log("[DRM] License server certificate successfully updated")},f=function(e){e.error?(this.debug.error("[DRM] Failed to create key session"),this.notify(d.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new d.vo.Error(d.dependencies.ErrorHandler.prototype.MEDIA_KEYMESSERR_NO_SESSION,"Failed to create key session",e.error))):this.debug.log("[DRM] Session created.  SessionID = "+e.data.getSessionID())},h=function(){this.debug.log("[DRM] Key added")},p=function(e){this.notify(d.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new d.vo.Error(e.data.code,e.data.message,e.data.data))},m=function(e){e.error?this.debug.warn("[DRM] Failed to close session"):this.debug.log("[DRM] Session closed. SessionID = "+e.data)},g=function(e){e.error?this.debug.warn("[DRM] Failed to remove session"):this.debug.log("[DRM] Session removed. SessionID = "+e.data)},y=function(e){e.error?this.notify(d.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new d.vo.Error(e.error.code,e.error.message,e.error.data)):this.debug.log("[DRM] Key statuses changed. statuses = "+e.data)};return{system:void 0,debug:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,protectionExt:void 0,keySystem:void 0,setup:function(){this[d.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE]=u.bind(this),this[d.models.ProtectionModel.eventList.ENAME_NEED_KEY]=l.bind(this),this[d.models.ProtectionModel.eventList.ENAME_SERVER_CERTIFICATE_UPDATED]=c.bind(this),this[d.models.ProtectionModel.eventList.ENAME_KEY_ADDED]=h.bind(this),this[d.models.ProtectionModel.eventList.ENAME_KEY_ERROR]=p.bind(this),this[d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED]=f.bind(this),this[d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED]=m.bind(this),this[d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_REMOVED]=g.bind(this),this[d.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED]=y.bind(this),this.protectionExt.getKeySystems(),this.protectionModel=this.system.getObject("protectionModel"),this.protectionModel.init(),this.eventBus=this.system.getObject("eventBus"),this.protectionModel.subscribe(d.models.ProtectionModel.eventList.ENAME_SERVER_CERTIFICATE_UPDATED,this),this.protectionModel.subscribe(d.models.ProtectionModel.eventList.ENAME_KEY_ADDED,this),this.protectionModel.subscribe(d.models.ProtectionModel.eventList.ENAME_KEY_ERROR,this),this.protectionModel.subscribe(d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,this),this.protectionModel.subscribe(d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED,this),this.protectionModel.subscribe(d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_REMOVED,this),this.protectionModel.subscribe(d.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,this),this.protectionModel.subscribe(d.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED,this)},init:function(n,r,i){var a;o||(this.debug.log("[DRM] Initialize ProtectionController ("+i+", "+r+")"),e=r,t=i,a=this.protectionExt.getSupportedKeySystemsFromContentProtection(n),a&&a.length>0&&s.call(this,a,!0),o=!0)},addEventListener:function(e,t){this.eventBus.addEventListener(e,t)},removeEventListener:function(e,t){this.eventBus.removeEventListener(e,t)},teardown:function(){var e=this;i&&(i.aborted=!0,i.abort()),this.protectionModel.unsubscribe(d.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,this),this.protectionModel.unsubscribe(d.models.ProtectionModel.eventList.ENAME_SERVER_CERTIFICATE_UPDATED,this),this.protectionModel.unsubscribe(d.models.ProtectionModel.eventList.ENAME_KEY_ADDED,this),this.protectionModel.unsubscribe(d.models.ProtectionModel.eventList.ENAME_KEY_ERROR,this),this.protectionModel.unsubscribe(d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,this),this.protectionModel.unsubscribe(d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED,this),this.protectionModel.unsubscribe(d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_REMOVED,this),this.protectionModel.unsubscribe(d.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,this),this.protectionModel.unsubscribe(d.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED,this),this.keySystem=void 0,this.setMediaElement(null).then((function(){e.protectionModel.teardown(),e.protectionModel=void 0}))},createKeySession:function(e,t){var n,r=d.dependencies.protection.CommonEncryption.getPSSHForKeySystem(this.keySystem,e),i=0;if(r){for(this.debug.log("[DRM] create key session for initData:",String.fromCharCode.apply(null,new Uint8Array(r))),n=this.protectionModel.getAllInitData(),i=0;i<n.length;i++)if(this.protectionExt.initDataEquals(r,n[i]))return void this.debug.log("[DRM] Ignoring initData because we have already seen it!");try{this.protectionModel.createKeySession(r,this.keySystem.sessionType,t)}catch(o){this.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,null,{reason:"Create key session raised en exception",error:new d.vo.Error(o.code,o.name,o.message)})}}else this.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,null,{reason:"needkey/encrypted event contains no initData corresponding to that key system "+this.keySystem.systemString,error:null})},loadKeySession:function(e){this.protectionModel.loadKeySession(e)},removeKeySession:function(e){this.protectionModel.removeKeySession(e)},closeKeySession:function(e){this.protectionModel.closeKeySession(e)},setServerCertificate:function(e){this.protectionModel.setServerCertificate(e)},setMediaElement:function(e){return e?this.protectionModel.subscribe(d.models.ProtectionModel.eventList.ENAME_NEED_KEY,this):null===e&&this.protectionModel.unsubscribe(d.models.ProtectionModel.eventList.ENAME_NEED_KEY,this),this.protectionModel.setMediaElement(e)},setSessionType:function(e){this.keysystem&&(this.keySystem.sessionType=e)},setProtectionData:function(e){n=e,this.protectionExt.init(e)}}},d.dependencies.ProtectionController.events={KEY_SYSTEM_SELECTED:"keySystemSelected",SERVER_CERTIFICATE_UPDATED:"serverCertificateUpdated",KEY_ADDED:"keyAdded",KEY_SESSION_CREATED:"keySessionCreated",KEY_SESSION_REMOVED:"keySessionRemoved",KEY_SESSION_CLOSED:"keySessionClosed",KEY_STATUSES_CHANGED:"keyStatusesChanged",KEY_MESSAGE:"keyMessage",LICENSE_REQUEST_COMPLETE:"licenseRequestComplete"},d.dependencies.ProtectionController.eventList={ENAME_PROTECTION_ERROR:"protectionError",ENAME_KEY_SYSTEM_SELECTED:"keySystemSelected"},d.dependencies.ProtectionController.prototype={constructor:d.dependencies.ProtectionController},d.dependencies.ProtectionExtensions=function(){"use strict";this.system=void 0,this.debug=void 0,this.keySystems=[],this.clearkeyKeySystem=void 0},d.dependencies.ProtectionExtensions.prototype={constructor:d.dependencies.ProtectionExtensions,setup:function(){var e;e=this.system.getObject("ksPlayReady"),this.keySystems.push(e),e=this.system.getObject("ksWidevine"),this.keySystems.push(e),e=this.system.getObject("ksClearKey"),this.keySystems.push(e),this.clearkeyKeySystem=e},init:function(e){for(var t=function(t){var n=null;return e&&(n=t in e?e[t]:null),n},n=0;n<this.keySystems.length;n++){var r=this.keySystems[n];r.init(t(r.systemString))}},getKeySystems:function(){return this.keySystems},getKeySystemBySystemString:function(e){for(var t=0;t<this.keySystems.length;t++)if(this.keySystems[t].systemString===e)return this.keySystems[t];return null},isClearKey:function(e){return e===this.clearkeyKeySystem},initDataEquals:function(e,t){if(e.byteLength===t.byteLength){for(var n=new Uint8Array(e),r=new Uint8Array(t),i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}return!1},getSupportedKeySystemsFromContentProtection:function(e){var t,n,r,i,o=[];if(e)for(r=0;r<this.keySystems.length;++r)for(n=this.keySystems[r],i=0;i<e.length;++i)if(t=e[i],t.schemeIdUri.toLowerCase()===n.schemeIdURI){var a=n.getInitData(t);a&&o.push({ks:this.keySystems[r],initData:a,cdmData:n.getCDMData()})}return o},getSupportedKeySystems:function(e){var t,n=[],r=d.dependencies.protection.CommonEncryption.parsePSSHList(e);for(this.debug.log("[DRM] Get supported key systems from init data"),t=0;t<this.keySystems.length;++t)this.keySystems[t].uuid in r&&n.push({ks:this.keySystems[t],initData:r[this.keySystems[t].uuid],cdmData:this.keySystems[t].getCDMData()});return n},getLicenseServer:function(e,t,n){if("license-release"===n||"individualization-request"==n)return null;var r=null;return t&&t.hasOwnProperty("drmtoday")?r=this.system.getObject("serverDRMToday"):"com.widevine.alpha"===e.systemString?r=this.system.getObject("serverWidevine"):"com.microsoft.playready"===e.systemString?r=this.system.getObject("serverPlayReady"):"org.w3.clearkey"===e.systemString&&(r=this.system.getObject("serverClearKey")),r},processClearKeyLicenseRequest:function(e,t){try{return d.dependencies.protection.KeySystem_ClearKey.getClearKeysFromProtectionData(e,t)}catch(n){return this.log("Failed to retrieve clearkeys from ProtectionData"),null}},autoSelectKeySystem:function(e,t,n,r){if(this.debug.log("[DRM] Auto select key system: "),this.debug.log("[DRM] ---- video codec = "+n),this.debug.log("[DRM] ---- audio codec = "+r),0===e.length)throw new Error("DRM system for this content not supported by the player!");var i=[],o=[];n&&o.push(new d.vo.protection.MediaCapability(n)),r&&i.push(new d.vo.protection.MediaCapability(r));for(var a=new d.vo.protection.KeySystemConfiguration(i,o),s=[],u=0;u<e.length;u++)s.push({ks:e[u].ks,configs:[a]});var l=this;(function(e){var t={};t[d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE]=function(t){if(e.protectionModel.unsubscribe(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,this),t.error)l.debug.log(t.error),e.notify(d.dependencies.ProtectionController.eventList.ENAME_PROTECTION_ERROR,new d.vo.Error(d.dependencies.ErrorHandler.prototype.MEDIA_KEYSYSERR_ACCESS_DENIED,"[DRM] KeySystem Access Denied! -- "+t.error,null));else{var n=t.data;l.debug.log("[DRM] KeySystem Access Granted ("+n.keySystem.systemString+")!"),e.selectKeySystem(n)}},e.protectionModel.subscribe(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,t),e.requestKeySystemAccess(s)})(t)}},d.models.ProtectionModel_01b=function(){var e,n=null,r=null,i=[],o=[],a=function(){var t=this;return{handleEvent:function(n){var a=null;switch(n.type){case r.needkey:var s=ArrayBuffer.isView(n.initData)?n.initData.buffer:n.initData;t.notify(d.models.ProtectionModel.eventList.ENAME_NEED_KEY,new d.vo.protection.NeedKey(s,"cenc"));break;case r.keyerror:if(a=u(o,n.sessionId),a||(a=u(i,n.sessionId)),a){var l=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR,c="MediakeyError";switch(n.errorCode.code){case 1:l=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_UNKNOWN,c+="An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break;case 2:l=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_CLIENT,c+="The Key System could not be installed or updated.";break;case 3:l=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_SERVICE,c+="The message passed into update indicated an error from the license service.";break;case 4:l=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_OUTPUT,c+="There is no available output device with the required characteristics for the content protection system.";break;case 5:l=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_HARDWARECHANGE,c+="A hardware configuration change caused a content protection error.";break;case 6:l=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_DOMAIN,c+="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.";break}n.systemCode&&(c+="  (System Code = "+n.systemCode+")"),t.notify(d.models.ProtectionModel.eventList.ENAME_KEY_ERROR,new d.vo.protection.KeyError(l,c))}else t.log("No session token found for key error");break;case r.keyadded:a=u(o,n.sessionId),a||(a=u(i,n.sessionId)),a?t.notify(d.models.ProtectionModel.eventList.ENAME_KEY_ADDED,a):t.log("No session token found for key added");break;case r.keymessage:if(e=null!==n.sessionId&&void 0!==n.sessionId,e?(a=u(o,n.sessionId),!a&&i.length>0&&(a=i.shift(),o.push(a),a.sessionID=n.sessionId)):i.length>0&&(a=i.shift(),o.push(a),0!==i.length&&t.errHandler.mediaKeyMessageError("Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!")),a){var f=ArrayBuffer.isView(n.message)?n.message.buffer:n.message;a.keyMessage=f,t.notify(d.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,new d.vo.protection.KeyMessage(a,f,n.defaultURL))}else t.log("No session token found for key message");break}}}},s=null,u=function(e,t){if(t&&e){for(var n=e.length,r=0;r<n;r++)if(e[r].sessionID===t)return e[r];return null}return null},l=function(){n.removeEventListener(r.keyerror,s),n.removeEventListener(r.needkey,s),n.removeEventListener(r.keymessage,s),n.removeEventListener(r.keyadded,s)};return{system:void 0,log:void 0,errHandler:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,protectionExt:void 0,keySystem:null,setup:function(){s=a.call(this)},init:function(){var e=document.createElement("video");r=d.models.ProtectionModel_01b.detect(e)},teardown:function(){n&&l();for(var e=0;e<o.length;e++)this.closeKeySession(o[e]);this.notify(d.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE)},getAllInitData:function(){var e,t=[];for(e=0;e<i.length;e++)t.push(i[e].initData);for(e=0;e<o.length;e++)t.push(o[e].initData);return t},requestKeySystemAccess:function(e){var t=n;t||(t=document.createElement("video"));for(var r=!1,i=0;i<e.length;i++)for(var o=e[i].ks.systemString,a=e[i].configs,s=null,u=null,l=0;l<a.length;l++){var c=a[l].videoCapabilities;if(c&&0!==c.length){u=[];for(var f=0;f<c.length;f++)""!==t.canPlayType(c[f].contentType,o)&&u.push(c[f])}if(!(!s&&!u||s&&0===s.length||u&&0===u.length)){r=!0;var h=new d.vo.protection.KeySystemConfiguration(s,u),p=this.protectionExt.getKeySystemBySystemString(o),m=new d.vo.protection.KeySystemAccess(p,h);this.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,m);break}}r||this.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,null,"Key system access denied! -- No valid audio/video content configurations detected!")},selectKeySystem:function(e){this.keySystem=e.keySystem,this.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED)},setMediaElement:function(e){if(n!==e)return n&&l(),n=e,n&&(n.addEventListener(r.keyerror,s),n.addEventListener(r.needkey,s),n.addEventListener(r.keymessage,s),n.addEventListener(r.keyadded,s),this.notify(d.models.ProtectionModel.eventList.ENAME_VIDEO_ELEMENT_SELECTED)),t.when()},createKeySession:function(t){if(!this.keySystem)throw new Error("Can not create sessions until you have selected a key system");if(e||0===o.length){var a={sessionID:null,initData:t,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return i.push(a),n[r.generateKeyRequest](this.keySystem.systemString,new Uint8Array(t)),a}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var i=e.sessionID;if(this.protectionExt.isClearKey(this.keySystem))for(var o=0;o<t.keyPairs.length;o++)n[r.addKey](this.keySystem.systemString,t.keyPairs[o].key,t.keyPairs[o].keyID,i);else n[r.addKey](this.keySystem.systemString,new Uint8Array(t),new Uint8Array(e.initData),i)},closeKeySession:function(e){n[r.cancelKeyRequest](this.keySystem.systemString,e.sessionID)},setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},checkIfEncrypted:function(){}}},d.models.ProtectionModel_01b.prototype={constructor:d.models.ProtectionModel_01b},d.models.ProtectionModel_01b.APIs=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],d.models.ProtectionModel_01b.detect=function(e){for(var t=d.models.ProtectionModel_01b.APIs,n=0;n<t.length;n++){var r=t[n];if("function"===typeof e[r.generateKeyRequest]&&("function"===typeof e[r.addKey]&&"function"===typeof e[r.cancelKeyRequest]))return r}return null},d.models.ProtectionModel_3Feb2014=function(){var e=null,n=null,r=null,i=null,o=null,a=[],s=function(){var e=this;return{handleEvent:function(t){switch(t.type){case o.needkey:if(t.initData){var n=ArrayBuffer.isView(t.initData)?t.initData.buffer:t.initData;e.notify(d.models.ProtectionModel.eventList.ENAME_NEED_KEY,new d.vo.protection.NeedKey(n,"cenc"))}break}}}},u=null,l=function(){var t=function(){e.removeEventListener("loadedmetadata",i),e[o.setMediaKeys](n),this.notify(d.models.ProtectionModel.eventList.ENAME_VIDEO_ELEMENT_SELECTED)};e.readyState>=1?t.call(this):(i=t.bind(this),e.addEventListener("loadedmetadata",i))},c=function(e){var t=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR,n="MediakeyError";if(e.errorCode)switch(e.errorCode.code){case 1:t=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_UNKNOWN,n="An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break;case 2:t=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_CLIENT,n="The Key System could not be installed or updated.";break;case 3:t=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_SERVICE,n="The message passed into update indicated an error from the license service.";break;case 4:t=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_OUTPUT,n="There is no available output device with the required characteristics for the content protection system.";break;case 5:t=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_HARDWARECHANGE,n+="A hardware configuration change caused a content protection error.";break;case 6:t=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_DOMAIN,n="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.";break;default:t=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_UNKNOWN,n="An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break}else t=d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_UNKNOWN,n="An unspecified error occurred. This value is used for errors that don't match any of the other codes.";return e.systemCode&&(n+="  (System Code = "+e.systemCode+")"),new d.vo.protection.KeyError(t,n)},f=function(e,t){var n=this;return{session:e,initData:t,handleEvent:function(e){switch(e.type){case o.error:n.notify(d.models.ProtectionModel.eventList.ENAME_KEY_ERROR,c(e));break;case o.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;n.notify(d.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,new d.vo.protection.KeyMessage(this,t,e.destinationURL));break;case o.ready:n.notify(d.models.ProtectionModel.eventList.ENAME_KEY_ADDED,this);break;case o.close:n.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED,this.getSessionID());break}},getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}}};return{system:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,protectionExt:void 0,debug:void 0,keySystem:null,setup:function(){u=s.call(this)},init:function(){var e=document.createElement("video");o=d.models.ProtectionModel_3Feb2014.detect(e)},teardown:function(){try{for(var t=0;t<a.length;t++)this.closeKeySession(a[t]);e&&e.removeEventListener(o.needkey,u),this.notify(d.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE)}catch(n){this.notify(d.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE,null,"Error tearing down key sessions and MediaKeys! -- "+n.message)}},getAllInitData:function(){for(var e=[],t=0;t<a.length;t++)e.push(a[t].initData);return e},requestKeySystemAccess:function(e){for(var t=!1,n=0;n<e.length;n++){var r=e[n].ks.systemString,i=e[n].configs,a=null,s=null;this.debug.log("[DRM][3Feb2014] Request access for key system "+r);for(var u=0;u<i.length;u++){var l=i[u].audioCapabilities,c=i[u].videoCapabilities;if(l&&0!==l.length){a=[];for(var f=0;f<l.length;f++)window[o.MediaKeys].isTypeSupported(r,l[f].contentType)&&a.push(l[f])}if(c&&0!==c.length){s=[];for(var h=0;h<c.length;h++)window[o.MediaKeys].isTypeSupported(r,c[h].contentType)&&s.push(c[h])}if(!(!a&&!s||a&&0===a.length||s&&0===s.length)){t=!0;var p=new d.vo.protection.KeySystemConfiguration(a,s),m=this.protectionExt.getKeySystemBySystemString(r),g=new d.vo.protection.KeySystemAccess(m,p);this.debug.log("[DRM][3Feb2014] configuration supported = audio:"+JSON.stringify(a)+", video:"+JSON.stringify(s)),this.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,g);break}}}t||this.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,null,"[DRM][3Feb2014] Key system access denied! -- No valid audio/video content configurations detected!")},selectKeySystem:function(t){this.debug.log("[DRM][3Feb2014] Select key system "+t.keySystem.systemString);try{n=t.mediaKeys=new window[o.MediaKeys](t.keySystem.systemString),this.keySystem=t.keySystem,r=t,e&&l.call(this),this.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED)}catch(i){this.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,null,"Error selecting keys system ("+this.keySystem.systemString+")! Could not create MediaKeys -- TODO")}},setMediaElement:function(r){if(e!==r)return e&&(e.removeEventListener(o.needkey,u),e.removeEventListener("loadedmetadata",i)),e=r,e&&n&&l.call(this),t.when()},createKeySession:function(e,t,i){if(!this.keySystem||!n||!r)throw new Error("Can not create sessions until you have selected a key system");this.debug.log("[DRM][3Feb2014] Create key session");var s=r.ksConfiguration.videoCapabilities[0].contentType,u=n.createSession(s,new Uint8Array(e),i?new Uint8Array(i):null),l=f.call(this,u,e);u.addEventListener(o.error,l),u.addEventListener(o.message,l),u.addEventListener(o.ready,l),u.addEventListener(o.close,l),a.push(l),this.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,l)},updateKeySession:function(e,t){var n=e.session;this.debug.log("[DRM][3Feb2014] Update key session"),this.protectionExt.isClearKey(this.keySystem)?n.update(new Uint8Array(t.toJWK())):n.update(new Uint8Array(t))},closeKeySession:function(e){this.debug.log("[DRM][3Feb2014] Close key session, token = "+e.session.sessionId);var t=e.session;t.removeEventListener(o.error,e),t.removeEventListener(o.message,e),t.removeEventListener(o.ready,e),t.removeEventListener(o.close,e);for(var n=0;n<a.length;n++)if(a[n]===e){a.splice(n,1);break}t[o.release]()},setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},checkIfEncrypted:function(){}}},d.models.ProtectionModel_3Feb2014.APIs=[{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"},{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"}],d.models.ProtectionModel_3Feb2014.detect=function(e){for(var t=d.models.ProtectionModel_3Feb2014.APIs,n=0;n<t.length;n++){var r=t[n];if("function"===typeof e[r.setMediaKeys]&&"function"===typeof window[r.MediaKeys])return r}return null},d.models.ProtectionModel_3Feb2014.prototype={constructor:d.models.ProtectionModel_3Feb2014},d.models.ProtectionModel_21Jan2015=function(){var e=null,n=null,r=null,i=[],o=function(e){var t,n="[";for(t=0;t<e.length;t++)n+="0x"+e[t].toString(16),t<e.length-1&&(n+=",");return n+="]",n},a=function(e,t){var n=this;void 0!==navigator.requestMediaKeySystemAccess&&"function"===typeof navigator.requestMediaKeySystemAccess?function(t){var r=e[t].ks,i=e[t].configs;n.debug.log("[DRM][PM_21Jan2015] requestMediaKeySystemAccess: "+r.systemString),navigator.requestMediaKeySystemAccess(r.systemString,i).then((function(e){var t="function"===typeof e.getConfiguration?e.getConfiguration():null,i=new d.vo.protection.KeySystemAccess(r,t);i.mksa=e,n.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,i)})).catch((function(){++t<e.length?a.call(n,e,t):n.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,null,"Key system access denied!")}))}(t):this.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,null,"Insecure origins are not allowed")},s=function(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()},u=function(){var e=this;return{session:null,handleEvent:function(t){switch(t.type){case"encrypted":if(e.debug.log("[DRM][PM_21Jan2015] 'encrypted' event"),t.initData){var n=ArrayBuffer.isView(t.initData)?t.initData.buffer:t.initData;e.notify(d.models.ProtectionModel.eventList.ENAME_NEED_KEY,new d.vo.protection.NeedKey(n,"cenc"))}break;case"waitingforkey":e.debug.log("[DRM][PM_21Jan2015] 'waitingforkey' event"),null!==this.session&&this.session.usable&&(this.session.usable=!1,e.notify(d.models.ProtectionModel.eventList.ENAME_KEY_ERROR,new d.vo.protection.KeyError(d.dependencies.ErrorHandler.prototype.MEDIA_ERR_ENCRYPTED,"Media is encrypted and no valid key is available")));break}}}},l=function(e){for(var t=0;t<i.length;t++)if(i[t]===e){i.splice(t,1);break}},c=function(t,n,a){var s=this,u=function(e,t){for(var n=0;n<i.length;n++)if(i[n].session===e){i[n].usable=t;break}},c={session:t,initData:n,usable:!1,handleEvent:function(t){switch(t.type){case"keystatuseschange":s.notify(d.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED,this),t.target.keyStatuses.forEach((function(){var n,i;switch(arguments&&arguments.length>0&&(arguments[0]&&("string"===typeof arguments[0]?n=arguments[0]:i=arguments[0]),arguments[1]&&("string"===typeof arguments[1]?n=arguments[1]:i=arguments[1])),s.debug.log("[DRM][PM_21Jan2015] status = "+n+" for KID "+o(new Uint8Array(i))),n){case"expired":u(t.target,!1),s.notify(d.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED,null,new d.vo.Error(d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_EXPIRED,"License has expired",null));break;case"output-restricted":u(t.target,!1),s.notify(d.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED,null,new d.vo.Error(d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR_OUTPUT,"There is no available output device with the required characteristics for the content protection system",null));break;case"usable":u(t.target,!0),e.addEventListener("waitingforkey",r);break;default:s.notify(d.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED,{status:n,keyId:i})}}));break;case"message":s.debug.log("[DRM][PM_21Jan2015] 'message' event: ",t);var n=ArrayBuffer.isView(t.message)?t.message.buffer:t.message;s.notify(d.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,new d.vo.protection.KeyMessage(this,n,void 0,t.messageType));break}},getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return this.session.expiration},getKeyStatuses:function(){return this.session.keyStatuses},getSessionType:function(){return a}};return t.addEventListener("keystatuseschange",c),t.addEventListener("message",c),t.closed.then((function(){l(c),s.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED,c.getSessionID())})),i.push(c),c};return{system:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,protectionExt:void 0,keySystem:null,config:null,debug:null,setup:function(){r=u.call(this)},init:function(){r.session=null},teardown:function(){var e,t,r,o=i.length,a=this;if(this.debug.log("[DRM][PM_21Jan2015] Teardown"),this.config.getParam("Protection.licensePersistence","boolean",!1)){for(t=0;t<i.length;t++)e=i[t],e.usable||(i.splice(t,1),t--);this.notify(d.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE)}else{var u=function(e){a.debug.log("[DRM][PM_21Jan2015] Session closed"),l(e),t>=o-1&&(n=null,clearTimeout(r),a.notify(d.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE))},c=function(){for(t=0;t<o;t++)u(i[t])};if(0===o)return n=null,void this.notify(d.models.ProtectionModel.eventList.ENAME_TEARDOWN_COMPLETE);for(t=0;t<o;t++)e=i[t],function(t){a.debug.log("[DRM][PM_21Jan2015] Close session "+e.getSessionID()),e.session.closed.then((function(){u(t)})),s(e).catch((function(){u(t)}))}(e);r=setTimeout(c,1e3)}},getAllInitData:function(){for(var e=[],t=0;t<i.length;t++)e.push(i[t].initData);return e},requestKeySystemAccess:function(e){a.call(this,e,0)},selectKeySystem:function(t){var i=this;if(i.debug.log("[DRM][PM_21Jan2015] Select key system, create new MediaKeys"),null!==n)return i.debug.log("[DRM][PM_21Jan2015] MediaKeys already created"),void i.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED);t.mksa.createMediaKeys().then((function(o){i.keySystem=t.keySystem,n=o,e&&e.setMediaKeys(n).then((function(){var t=i.keySystem.getServerCertificate();t?i.setServerCertificate(t).then((function(){i.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED),e.addEventListener("encrypted",r)})):(i.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED),e.addEventListener("encrypted",r))}))})).catch((function(){i.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,null,"Error selecting keys system ("+t.keySystem.systemString+")! Could not create MediaKeys -- TODO")}))},setMediaElement:function(i){var o=this,a=t.defer();return e===i?(a.resolve(),a.promise):(e&&(e.removeEventListener("encrypted",r),e.removeEventListener("waitingforkey",r),e.setMediaKeys?e.setMediaKeys(null).then((function(){o.debug.log("[DRM][PM_21Jan2015] Successfully detached MediaKeys from video element"),a.resolve()}),(function(e){o.debug.error("[DRM][PM_21Jan2015] Failed to detach MediaKeys from video element: "+e),a.resolve()})):a.resolve()),e=i,e&&n&&e.setMediaKeys&&(e.addEventListener("encrypted",r),e.setMediaKeys(n)),a.promise)},setServerCertificate:function(e){if(!this.keySystem||!n)throw new Error("Can not set server certificate until you have selected a key system");this.debug.log("[DRM][PM_21Jan2015] Set server certificate");var r=this,i=t.defer();return n.setServerCertificate(e).then((function(){r.notify(d.models.ProtectionModel.eventList.ENAME_SERVER_CERTIFICATE_UPDATED),i.resolve()})).catch((function(e){r.notify(d.models.ProtectionModel.eventList.ENAME_SERVER_CERTIFICATE_UPDATED,null,"Error updating server certificate -- "+e.name),i.reject()})),i.promise},createKeySession:function(e,t){if(!this.keySystem||!n)throw new Error("Can not create sessions until you have selected a key system");this.debug.log("[DRM][PM_21Jan2015] Create key session, type = "+t),this.debug.log("[DRM][PM_21Jan2015] initData = "+String.fromCharCode.apply(null,new Uint8Array(e)));var r=n.createSession(t),i=c.call(this,r,e,t),o=this;r.generateRequest("cenc",e).then((function(){o.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,i)})).catch((function(e){l(i),o.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,null,{reason:"Failed to generate key request",error:new d.vo.Error(e.code,e.name,e.message)})}))},updateKeySession:function(e,t){var n=e.session,i=this;i.debug.log("[DRM][PM_21Jan2015] Update key session. SessionID = "+n.sessionId),this.protectionExt.isClearKey(this.keySystem)&&(t=t.toJWK()),n.update(t).then((function(){r.session=e})).catch((function(e){i.notify(d.models.ProtectionModel.eventList.ENAME_KEY_ERROR,new d.vo.protection.KeyError(d.dependencies.ErrorHandler.prototype.MEDIA_KEYERR,"Error while providing license to the CDM",e))}))},loadKeySession:function(e){if(!this.keySystem||!n)throw new Error("Can not load sessions until you have selected a key system");this.debug.log("[DRM][PM_21Jan2015] Load key session. SessionID = "+e);var t=n.createSession(),r=this;t.load(e).then((function(n){if(n){var i=c.call(this,t);r.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,i)}else r.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,null,{reason:"Failed to load session "+e,error:null})})).catch((function(t){r.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,{reason:"Failed to load session "+e,error:new d.vo.Error(t.code,t.name,t.message)})}))},removeKeySession:function(e){var t=e.session;this.debug.log("[DRM][PM_21Jan2015] Remove key session. SessionID = "+e.getSessionID());var n=this;t.remove().then((function(){n.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_REMOVED,e.getSessionID())}),(function(t){n.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_REMOVED,null,"Error removing session ("+e.getSessionID()+"). "+t.name)}))},closeKeySession:function(e){this.debug.log("[DRM][PM_21Jan2015] Close key session. SessionID = "+e.getSessionID());var t=this;s(e).catch((function(n){l(e),t.notify(d.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED,null,"Error closing session ("+e.getSessionID()+") "+n.name)}))},checkIfEncrypted:function(){}}},d.models.ProtectionModel_21Jan2015.detect=function(e){return void 0!==e.onencrypted&&void 0!==e.mediaKeys&&!window.MSMediaKeys},d.models.ProtectionModel_21Jan2015.prototype={constructor:d.models.ProtectionModel_21Jan2015},d.dependencies.protection.KeySystem=function(){},d.dependencies.protection.KeySystem_Access=function(){},d.dependencies.protection.KeySystem_Access.prototype={constructor:d.dependencies.protection.KeySystem_Access},d.dependencies.protection.KeySystem_ClearKey=function(){"use strict";var e="org.w3.clearkey",t="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b";return{system:void 0,schemeIdURI:"urn:uuid:"+t,systemString:e,uuid:t,sessionType:"temporary",init:function(e){e},getInitData:d.dependencies.protection.CommonEncryption.parseInitDataFromContentProtection,getKeySystemConfigurations:d.dependencies.protection.CommonEncryption.getKeySystemConfigurations,getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getServerCertificate:function(){return null}}},d.dependencies.protection.KeySystem_ClearKey.prototype={constructor:d.dependencies.protection.KeySystem_ClearKey},d.dependencies.protection.KeySystem_ClearKey.getClearKeysFromProtectionData=function(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],o=0;o<r.kids.length;o++){var a=r.kids[o],s=e.clearkeys.hasOwnProperty(a)?e.clearkeys[a]:null;if(!s)throw new Error("[DRM] ClearKey keyID ("+a+") is not known!");i.push(new d.vo.protection.KeyPair(a,s))}n=new d.vo.protection.ClearKeyKeySet(i)}return n},d.dependencies.protection.KeySystem_PlayReady=function(){"use strict";var e,t="com.microsoft.playready",n="9a04f079-9840-4286-ab92-e65be0885f95",r='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>',i=function(e){var t,n,r,i,o={},a=e instanceof ArrayBuffer?e:e.buffer,s=d.utils.isUTF16(new Uint8Array(a))?new Uint16Array(a):new Uint8Array(a),u=0;for(t=String.fromCharCode.apply(null,s),n=this.domParser.createXmlTree(t),r=n.getElementsByTagName("name"),i=n.getElementsByTagName("value"),u=0;u<r.length;u+=1)o[r[u].childNodes[0].nodeValue]=i[u].childNodes[0].nodeValue;return o.hasOwnProperty("Content")&&(o["Content-Type"]=o.Content,delete o.Content),o.hasOwnProperty("Content-Type")||(o["Content-Type"]="text/xml; charset=utf-8"),o},o=function(e){var t,n,r,i=null,o=e instanceof ArrayBuffer?e:e.buffer,a=d.utils.isUTF16(new Uint8Array(o))?new Uint16Array(o):new Uint8Array(o);return t=String.fromCharCode.apply(null,a),n=this.domParser.createXmlTree(t),n.getElementsByTagName("Challenge")[0]&&(r=n.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue,r&&(i=h.decode(r))),i||(i=t),i},a=function(e){if(e){var t,n,r,i,o,a,s,u=new DataView(e),l=u.getUint16(4,!0),c=6,d=0;for(d=0;d<l;d++)if(t=u.getUint16(c,!0),c+=2,n=u.getUint16(c,!0),c+=2,1===t){if(r=e.slice(c,c+n),i=String.fromCharCode.apply(null,new Uint16Array(r)),o=this.domParser.createXmlTree(i),o.getElementsByTagName("LA_URL")[0]&&(a=o.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue,a))return a;if(o.getElementsByTagName("LUI_URL")[0]&&(s=o.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue,s))return s}else c+=n}return null},s=function(e){var t,n,r,i,o,a=0,s=new Uint8Array([112,115,115,104,0,0,0,0]),u=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),l=null;if("pssh"in e)return d.dependencies.protection.CommonEncryption.parseInitDataFromContentProtection(e);if("pro"in e)l=h.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;l=h.decodeArray(e.prheader.__text)}return t=l.length,n=4+s.length+u.length+4+t,r=new ArrayBuffer(n),i=new Uint8Array(r),o=new DataView(r),o.setUint32(a,n),a+=4,i.set(s,a),a+=s.length,i.set(u,a),a+=u.length,o.setUint32(a,t),a+=4,i.set(l,a),a+=t,i.buffer},u=function(){var t,n,i,o;if(e&&e.cdmData){for(t=[],o=0;o<e.cdmData.length;++o)t.push(e.cdmData.charCodeAt(o)),t.push(0);for(t=String.fromCharCode.apply(null,t),t=h.encode(t),n=r.replace("%CUSTOMDATA%",t),i=[],o=0;o<n.length;++o)i.push(n.charCodeAt(o)),i.push(0);return new Uint8Array(i).buffer}return null};return{schemeIdURI:"urn:uuid:"+n,systemString:t,uuid:n,notify:void 0,subscribe:void 0,unsubscribe:void 0,domParser:void 0,sessionType:"temporary",init:function(t){t&&(e=t,e.sessionType&&(this.sessionType=e.sessionType))},getInitData:s,getKeySystemConfigurations:d.dependencies.protection.CommonEncryption.getKeySystemConfigurations,getRequestHeadersFromMessage:i,getLicenseRequestFromMessage:o,getLicenseServerURLFromInitData:a,getCDMData:u,getServerCertificate:function(){return null}}},d.dependencies.protection.KeySystem_PlayReady.prototype={constructor:d.dependencies.protection.KeySystem_PlayReady},d.dependencies.protection.KeySystem_Widevine=function(){"use strict";var e,t="com.widevine.alpha",n="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",r=function(e){return d.dependencies.protection.CommonEncryption.parseInitDataFromContentProtection(e)},i=function(t,n,r){var i=d.dependencies.protection.CommonEncryption.getKeySystemConfigurations(t,n,r);return e&&(e.audioRobustness&&i[0].audioCapabilities.length>0&&(i[0].audioCapabilities[0].robustness=e.audioRobustness),e.videoRobustness&&i[0].videoCapabilities.length>0&&(i[0].videoCapabilities[0].robustness=e.videoRobustness)),i},o=function(){return e&&e.serverCertificate&&e.serverCertificate.length>0?h.decodeArray(e.serverCertificate).buffer:null};return{schemeIdURI:"urn:uuid:"+n,systemString:t,uuid:n,sessionType:"temporary",init:function(t){e=t,e&&e.sessionType&&(this.sessionType=e.sessionType)},getInitData:r,getKeySystemConfigurations:i,getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getServerCertificate:o}},d.dependencies.protection.KeySystem_Widevine.prototype={constructor:d.dependencies.protection.KeySystem_Widevine},d.dependencies.protection.servers.ClearKey=function(){"use strict";return{getServerURLFromMessage:function(e,t){var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),r=0;for(e+="/?",r=0;r<n.kids.length;r++)e+=n.kids[r]+"&";return e=e.substring(0,e.length-1),e},getHTTPMethod:function(){return"GET"},getResponseType:function(){return"json"},getLicenseMessage:function(e){var t,n,r,i,o=[];if(!e.hasOwnProperty("keys"))return null;for(t=0;t<e.keys.length;t++)n=e.keys[t],r=n.kid.replace(/=/g,""),i=n.k.replace(/=/g,""),o.push(new d.vo.protection.KeyPair(r,i));return new d.vo.protection.ClearKeyKeySet(o)},getErrorResponse:function(e){return{code:0,name:"UnknownError",message:String.fromCharCode.apply(null,new Uint8Array(e))}}}},d.dependencies.protection.servers.ClearKey.prototype={constructor:d.dependencies.protection.servers.ClearKey},d.dependencies.protection.servers.DRMToday=function(){"use strict";var e={"com.widevine.alpha":{responseType:"json",getLicenseMessage:function(e){return h.decodeArray(e.license)},getErrorResponse:function(e){return e}},"com.microsoft.playready":{responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}};return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(t){return e[t].responseType},getLicenseMessage:function(t,n){return e[n].getLicenseMessage(t)},getErrorResponse:function(t,n){return{code:0,name:"UnknownError",message:e[n].getErrorResponse(t)}}}},d.dependencies.protection.servers.DRMToday.prototype={constructor:d.dependencies.protection.servers.DRMToday},d.dependencies.protection.servers.LicenseServer=function(){},d.dependencies.protection.servers.PlayReady=function(){"use strict";var e=function(e){var t="",n=0,r=0,i=0,o=0,a=new Uint8Array(e);a.length>=3&&239===a[0]&&187===a[1]&&191===a[2]&&(n=3);while(n<a.length)if(r=a[n],r<128)t+=String.fromCharCode(r),n++;else if(r>191&&r<224){if(n+1>=a.length)throw"UTF-8 Decode failed. Two byte character was truncated.";i=a[n+1],t+=String.fromCharCode((31&r)<<6|63&i),n+=2}else{if(n+2>=a.length)throw"UTF-8 Decode failed. Multi byte character was truncated.";i=a[n+1],o=a[n+2],t+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&o),n+=3}return t},t=function(t){var n=e(t),r=this.domParser.createXmlTree(n),i=r?this.domParser.getChildNode(r,"soap:Envelope"):null,o=i?this.domParser.getChildNode(i,"soap:Body"):null,a=o?this.domParser.getChildNode(o,"soap:Fault"):null;return a?null:t},n=function(t){var n=e(t),r=this.domParser.createXmlTree(n),i=r?this.domParser.getChildNode(r,"soap:Envelope"):null,o=i?this.domParser.getChildNode(i,"soap:Body"):null,a=o?this.domParser.getChildNode(o,"soap:Fault"):null,s=a?this.domParser.getChildNode(a,"detail"):null,u=s?this.domParser.getChildNode(s,"Exception"):null,l=null,c="",d="",f="",h=-1,p=-1;return null===a?{code:0,name:"UnknownError",message:String.fromCharCode.apply(null,new Uint8Array(t))}:(l=this.domParser.getChildNode(a,"faultstring").firstChild,c=l?l.nodeValue:null,null!==u&&(l=this.domParser.getChildNode(u,"StatusCode"),d=l?l.firstChild.nodeValue:null,l=this.domParser.getChildNode(u,"Message"),f=l?l.firstChild.nodeValue:null,h=f?f.lastIndexOf("[")+1:-1,p=f?f.indexOf("]"):-1),{code:d,name:c,message:f?f.substring(h,p):""})};return{domParser:void 0,getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return t.call(this,e)},getErrorResponse:function(e){return n.call(this,e)}}},d.dependencies.protection.servers.PlayReady.prototype={constructor:d.dependencies.protection.servers.PlayReady},d.dependencies.protection.servers.Widevine=function(){"use strict";return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return{code:0,name:"UnknownError",message:String.fromCharCode.apply(null,new Uint8Array(e))}}}},d.dependencies.protection.servers.Widevine.prototype={constructor:d.dependencies.protection.servers.Widevine},d.vo.protection.ClearKeyKeySet=function(e,t){if(t&&"persistent"!==t&&"temporary"!==t)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=t,this.toJWK=function(){var e,t=this.keyPairs.length,n={keys:[]};for(e=0;e<t;e++){var r={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(r)}this.type&&(n.type=this.type);var i=JSON.stringify(n),o=i.length,a=new ArrayBuffer(o),s=new Uint8Array(a);for(e=0;e<o;e++)s[e]=i.charCodeAt(e);return a}},d.vo.protection.ClearKeyKeySet.prototype={constructor:d.vo.protection.ClearKeyKeySet},d.vo.protection.KeyError=function(e,t,n){"use strict";this.code=e,this.message=t,this.data=n},d.vo.protection.KeyError.prototype={constructor:d.vo.protection.KeyError},d.vo.protection.KeyMessage=function(e,t,n,r){"use strict";this.sessionToken=e,this.message=t,this.defaultURL=n,this.messageType=r},d.vo.protection.KeyMessage.prototype={constructor:d.vo.protection.KeyMessage},d.vo.protection.KeyPair=function(e,t){"use strict";this.keyID=e,this.key=t},d.vo.protection.KeyPair.prototype={constructor:d.vo.protection.KeyPair},d.vo.protection.KeySystemAccess=function(e,t){this.keySystem=e,this.ksConfiguration=t},d.vo.protection.KeySystemAccess.prototype={constructor:d.vo.protection.KeySystemAccess},d.vo.protection.KeySystemConfiguration=function(e,t,n,r,i){this.initDataTypes=["cenc"],this.audioCapabilities=e,this.videoCapabilities=t,this.distinctiveIdentifier=n,this.persistentState=r,this.sessionTypes=i},d.vo.protection.KeySystemConfiguration.prototype={constructor:d.vo.protection.KeySystemConfiguration},d.vo.protection.LicenseRequestComplete=function(e,t){"use strict";this.message=e,this.requestData=t},d.vo.protection.LicenseRequestComplete.prototype={constructor:d.vo.protection.LicenseRequestComplete},d.vo.protection.MediaCapability=function(e,t){this.contentType=e,this.robustness=t},d.vo.protection.MediaCapability.prototype={constructor:d.vo.protection.MediaCapability},d.vo.protection.NeedKey=function(e,t){this.initData=e,this.initDataType=t},d.vo.protection.NeedKey.prototype={constructor:d.vo.protection.NeedKey},d.vo.protection.ProtectionData=function(e,t,n,r){this.laURL=e,this.httpRequestHeaders=t,this.bearerToken=n,this.clearkeys=r},d.vo.protection.ProtectionData.prototype={constructor:d.vo.protection.ProtectionData},d.models.SessionToken=function(){},d.models.SessionToken.prototype={initData:null,getSessionID:function(){return""},getExpirationTime:function(){return NaN},getKeyStatuses:function(){return null}},l.dependencies.AES=function(){this.init=function(e){this._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],this._precompute.call(this);var t,n,r,i,o,a=this._tables[0][4],s=this._tables[1],u=e.length,l=1;if(4!==u&&6!==u&&8!==u)throw new Error("Invalid aes key size="+u);for(i=e.slice(0),o=[],this._key=[i,o],t=u;t<4*u+28;t++)r=i[t-1],(t%u===0||8===u&&t%u===4)&&(r=a[r>>>24]<<24^a[r>>16&255]<<16^a[r>>8&255]<<8^a[255&r],t%u===0&&(r=r<<8^r>>>24^l<<24,l=l<<1^283*(l>>7))),i[t]=i[t-u]^r;for(n=0;t;n++,t--)r=i[3&n?t:t-4],o[n]=t<=4||n<4?r:s[0][a[r>>>24]]^s[1][a[r>>16&255]]^s[2][a[r>>8&255]]^s[3][a[255&r]]},this._precompute=function(){var e,t,n,r,i,o,a,s,u,l=this._tables[0],c=this._tables[1],d=l[4],f=c[4],h=[],p=[];for(e=0;e<256;e++)p[(h[e]=e<<1^283*(e>>7))^e]=e;for(t=n=0;!d[t];t^=r||1,n=p[n]||1)for(a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^255&a^99,d[t]=a,f[a]=t,o=h[i=h[r=h[t]]],u=16843009*o^65537*i^257*r^16843008*t,s=257*h[a]^16843008*a,e=0;e<4;e++)l[e][t]=s=s<<24^s>>>8,c[e][a]=u=u<<24^u>>>8;for(e=0;e<5;e++)l[e]=l[e].slice(0),c[e]=c[e].slice(0)},this.decrypt=function(e,t,n,r,i,o){var a,s,u,l,c=this._key[1],d=e^c[0],f=r^c[1],h=n^c[2],p=t^c[3],m=c.length/4-2,g=4,y=this._tables[1],v=y[0],_=y[1],E=y[2],b=y[3],T=y[4];for(l=0;l<m;l++)a=v[d>>>24]^_[f>>16&255]^E[h>>8&255]^b[255&p]^c[g],s=v[f>>>24]^_[h>>16&255]^E[p>>8&255]^b[255&d]^c[g+1],u=v[h>>>24]^_[p>>16&255]^E[d>>8&255]^b[255&f]^c[g+2],p=v[p>>>24]^_[d>>16&255]^E[f>>8&255]^b[255&h]^c[g+3],g+=4,d=a,f=s,h=u;for(l=0;l<4;l++)i[(3&-l)+o]=T[d>>>24]<<24^T[f>>16&255]<<16^T[h>>8&255]<<8^T[255&p]^c[g++],a=d,d=f,f=h,h=p,p=a}},l.dependencies.AES.prototype={constructor:l.dependencies.AES},l.dependencies.AES128Decrypter=function(e,t){"use strict";this.key=e,this.iv=t,this.ntoh=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},this.doDecrypt=function(e,t,n){var r,i,o,a,s,u,c,d,f,h=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),p=new l.dependencies.AES,m=new Uint8Array(e.byteLength),g=new Int32Array(m.buffer);for(p.init(Array.prototype.slice.call(t)),r=~~n[0],i=~~n[1],o=~~n[2],a=~~n[3],f=0;f<h.length;f+=4)s=~~this.ntoh(h[f]),u=~~this.ntoh(h[f+1]),c=~~this.ntoh(h[f+2]),d=~~this.ntoh(h[f+3]),p.decrypt(s,u,c,d,g,f),g[f]=this.ntoh(g[f]^r),g[f+1]=this.ntoh(g[f+1]^i),g[f+2]=this.ntoh(g[f+2]^o),g[f+3]=this.ntoh(g[f+3]^a),r=s,i=u,o=c,a=d;return m},this.localDecrypt=function(e,t,n,r){var i=this.doDecrypt(e,t,n);r.set(i,e.byteOffset)},this.decrypt=function(e){var t=32e3,n=new Int32Array(e),r=new Uint8Array(e.byteLength),i=0,o=this.key,a=this.iv;for(this.localDecrypt(n.subarray(i,i+t),o,a,r),i=t;i<n.length;i+=t)a=new Uint32Array([this.ntoh(n[i-4]),this.ntoh(n[i-3]),this.ntoh(n[i-2]),this.ntoh(n[i-1])]),this.localDecrypt(n.subarray(i,i+t),o,a,r);return r}},l.dependencies.AES128Decrypter.prototype={constructor:l.dependencies.AES128Decrypter},l.dependencies.HlsDemux=function(){"use strict";var e=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(e,0),n.set(t,e.byteLength),n},t=[1,5,6],n=1,r=[],i=[],o=-1,a=-1,s=function(e,t,n,r){var i,o=t;while(o<e.length){if(i=new E.ts.TsPacket,i.parse(e.subarray(o,o+E.ts.TsPacket.prototype.TS_PACKET_SIZE)),i.getPid()===n&&(void 0===r||i.getPusi()===r))return{offset:o,packet:i};o+=E.ts.TsPacket.prototype.TS_PACKET_SIZE}return null},u=function(e){var t=new E.ts.TsPacket;return t.checkSyncWord(e.subarray(0,E.ts.TsPacket.prototype.TS_PACKET_SIZE))},l=function(e){var t=s.call(this,e,0,E.ts.TsPacket.prototype.PAT_PID);if(null===t)return null;var n=new E.si.PAT;return n.parse(t.packet.getPayload()),n},c=function(e,t){var n=s.call(this,e,0,t);if(null===n)return null;var r=new E.si.PMT;return r.parse(n.packet.getPayload()),r},f=function(e){var t,n,i,s,u=null,l=null;if(t=new E.ts.TsPacket,t.parse(e),!t.hasAdaptationFieldOnly()&&(n=t.getPid(),i=r[n],i))if(t.getPusi())if(s=new E.pes.PesPacket,s.parse(t.getPayload()),u=new d.vo.Mp4Track.Sample,u.cts=s.getPts().getValue(),u.dts=null!==s.getDts()?s.getDts().getValue():u.cts,u.size=0,u.duration=0,u.subSamples=[],-1===o&&(o=u.dts),u.mpegTimestamp=u.cts,u.dts-=o,u.cts-=o,u.dts+=a,u.cts+=a,l=s.getPayload(),"audio"===i.type&&(u.flags=16777216),"video"===i.type&&-1!==i.streamType.search("H.264")&&(u.flags=E.h264.isIDR(l)?33554432:16842752),u.subSamples.push(l),u.dts>=0)i.samples.push(u);else{var c=Math.abs(u.dts)/9e4;if(c>10)throw{name:d.dependencies.ErrorHandler.prototype.HLS_DEMUX_ERROR,message:"A/V desynchronization ("+Math.round(c)+" s.)"}}else i.samples.length>0&&(u=i.samples[i.samples.length-1],u.subSamples.push(t.getPayload()))},h=function(e){var t,n,r,i,o=0,a=0;if(0!==e.samples.length){for(r=0;r<e.samples.length;r++){for(n=0,t=e.samples[r],i=0;i<t.subSamples.length;i++)n+=t.subSamples[i].length;r>0&&(e.samples[r-1].duration=e.samples[r].dts-e.samples[r-1].dts),t.size=n,o+=n}for(e.samples[e.samples.length-1].duration=e.samples[e.samples.length-2].duration,e.data=new Uint8Array(o),e.dataCTS=[],r=0;r<e.samples.length;r++)for(t=e.samples[r],-1!==e.streamType.search("ADTS")&&(e.dataCTS[a]=t.cts),i=0;i<t.subSamples.length;i++)e.data.set(t.subSamples[i],a),a+=t.subSamples[i].length;if(-1!==e.streamType.search("H.264")&&p.call(this,e),-1!==e.streamType.search("ADTS")&&m.call(this,e),e.previousCts&&e.previousDuration){t=e.samples[0];var s=t.cts-(e.previousCts+e.previousDuration);s>0&&s<e.timescale&&(t.cts-=s,t.dts-=s,t.duration+=s,this.debug.log("[HlsDemux]["+e.type+"] Patch sample duration, cts = "+(t.cts/9e4).toFixed(3)+", duration = "+(t.duration/9e4).toFixed(3)))}}},p=function(e){var n,r,i,o,a,s,u;for(i=0,a=0,s=0;s<e.samples.length;s++){for(n=e.samples[s],n.nalus=E.h264.parseNALUs(e.data.subarray(a,a+n.size)),u=0;u<n.nalus.length;u++)r=n.nalus[u],-1!==t.indexOf(r.type)?(r.offset+=a,i+=4+n.nalus[u].size):(n.nalus.splice(u,1),u--);a+=n.size}for(o=new Uint8Array(i),a=0,s=0;s<e.samples.length;s++)for(n=e.samples[s],n.size=0,u=0;u<n.nalus.length;u++)r=n.nalus[u],o[a++]=(4278190080&r.size)>>24,o[a++]=(16711680&r.size)>>16,o[a++]=(65280&r.size)>>8,o[a++]=255&r.size,o.set(e.data.subarray(r.offset,r.offset+r.size),a),a+=r.size,n.size+=4+r.size;e.data=o},m=function(e){var t,n,r,i,o,a,s,u,l=[];for(t=E.aac.parseADTS(e.data,e.dataCTS),n=0,u=0;u<t.length;u++)n+=t[u].length;for(i=new Uint8Array(n),a=e.samples[0].cts,s=1024*e.timescale/e.samplingRate,r=0,u=0;u<t.length;u++)o=new d.vo.Mp4Track.Sample,o.cts=o.dts=t[u].cts?t[u].cts:a,o.size=t[u].length,o.duration=s,o.flags=16777216,0===l.length&&(o.mpegTimestamp=e.samples[0].mpegTimestamp),l.push(o),a=o.cts+s,u>0&&(l[u-1].duration=l[u].cts-l[u-1].cts,l[u-1].duration>s&&this.debug.log("[HlsDemux]["+e.type+"] Patch sample duration, cts = "+(l[u-1].cts/9e4).toFixed(3)+", duration = "+(l[u-1].duration/9e4).toFixed(3))),i.set(e.data.subarray(t[u].offset,t[u].offset+t[u].length),r),r+=t[u].length;e.data=i,e.samples=l},g=function(e){var t="",n=0,r=0;for(n=0;n<e.length;n++)r=e[n].toString(16),r.length<2&&(r="0"+r),t+=r;return t},y=function(){this.debug.log("[HlsDemux] Reset"),n=1,r=[],i=[],o=-1,a=-1},v=function(t,n){var r,i,o,a,u,l,c,f;if(r=s.call(this,t,0,n.pid,!0),null===r)throw{name:d.dependencies.ErrorHandler.prototype.HLS_DEMUX_ERROR,message:"No packets for track "+n.type};if(i=new E.pes.PesPacket,i.parse(r.packet.getPayload()),o=i.getPayload(),-1!==n.streamType.search("H.264")){a=E.h264.getSequenceHeader(o);while(null===a)r=s.call(this,t,r.offset+E.ts.TsPacket.prototype.TS_PACKET_SIZE,n.pid,!1),o=e(o,r.packet.getPayload()),a=E.h264.getSequenceHeader(o);n.codecPrivateData=g(a.bytes),n.codecs="avc1.",u=/00000001[0-9]7/.exec(n.codecPrivateData),u&&u[0]&&(n.codecs+=n.codecPrivateData.substr(n.codecPrivateData.indexOf(u[0])+10,6)),n.width=a.width,n.height=a.height,this.debug.log("[HlsDemux] width  = "+n.width),this.debug.log("[HlsDemux] height = "+n.height)}-1!==n.streamType.search("AAC")&&(l=E.aac.getAudioSpecificConfig(o),c=(248&l[0])>>3,n.codecPrivateData=g(l),n.codecs="mp4a.40."+c,f=(7&l[0])<<1|(128&l[1])>>7,n.samplingRate=E.aac.SAMPLING_FREQUENCY[f],n.channels=(120&l[1])>>3,n.bandwidth=0),this.debug.log("[HlsDemux] codecs = "+n.codecs),this.debug.log("[HlsDemux] codecPrivateData = "+n.codecPrivateData)},_=function(e){var t,o,a,s,f,h,p=0;if(!u.call(this,e))throw{name:d.dependencies.ErrorHandler.prototype.HLS_INVALID_PACKET_ERROR,message:"Failed to demux, packet is invalid, missing SYNC byte"};if(t=l.call(this,e),null===t)throw{name:d.dependencies.ErrorHandler.prototype.HLS_DEMUX_ERROR,message:"Failed to demux, missing signalization (PAT)"};if(o=c.call(this,e,t.getPmtPid()),null===o)throw{name:d.dependencies.ErrorHandler.prototype.HLS_DEMUX_ERROR,message:"Failed to demux, missing signalization (PMT)"};for(p=0;p<o.m_listOfComponents.length;p++){if(a=o.m_listOfComponents[p],s=a.m_elementary_PID,f=r[s],!f){if(f=new d.vo.Mp4Track,f.timescale=E.Pts.prototype.SYSTEM_CLOCK_FREQUENCY,f.pid=s,h=o.gStreamTypes[a.m_stream_type],null===h){this.debug.log("[HlsDemux] Stream Type "+a.m_stream_type+" unknown!");continue}switch(f.streamType=h.name,h.value){case 224:f.type="video";break;case 192:f.type="audio";break;case 252:f.type="data";break;default:f.type="und"}}if(v.call(this,e,f),""===f.codecs)throw{name:d.dependencies.ErrorHandler.prototype.HLS_DEMUX_ERROR,message:"Failed to get codec information for track "+f.type};r[s]||(f.trackId=n,n++,this.debug.log("[HlsDemux] Add track: type = "+f.type+", PID = "+f.pid+", trackId = "+f.trackId),i.push(f),r[s]=f)}return i},b=function(e,t){var n,r,o=0,s=-1;for(-1===a&&(a=9e4*t.startTime,this.debug.log("[HlsDemux] Media start time = "+a+" ("+t.startTime+")")),this.debug.log("[HlsDemux] Demux chunk, size = "+e.length+", nb packets = "+Math.round(e.length/E.ts.TsPacket.prototype.TS_PACKET_SIZE)),_.call(this,e),o=0;o<i.length;o++)n=i[o],n.samples.length>0&&(n.previousCts=n.samples[n.samples.length-1].cts,n.previousDuration=n.samples[n.samples.length-1].duration),i[o].samples=[],i[o].data=null;o=0;while(o<e.length){if(o+E.ts.TsPacket.prototype.TS_PACKET_SIZE>e.length){this.debug.log("[HlsDemux] Demux chunk, residual bytes = "+(e.length-o));break}f.call(this,e.subarray(o,o+E.ts.TsPacket.prototype.TS_PACKET_SIZE)),o+=E.ts.TsPacket.prototype.TS_PACKET_SIZE}for(o=0;o<i.length;o++)if(n=i[o],0!==n.samples.length&&(h.call(this,n),this.debug.log("[HlsDemux]["+n.type+"] Demux: 1st PTS = "+n.samples[0].dts+" ("+n.samples[0].dts/9e4+")"),s=Math.max(s,n.samples[0].dts),r=Math.abs(n.samples[0].dts-s)/9e4,r>10))throw{name:d.dependencies.ErrorHandler.prototype.HLS_DEMUX_ERROR,message:"A/V desynchronization ("+Math.round(r)+" s.)"};var u=[];for(o=0;o<i.length;o++)i[o].samples.length>0&&u.push(i[o]);return u};return{debug:void 0,reset:y,getTracks:_,demux:b}},l.dependencies.HlsDemux.prototype={constructor:l.dependencies.HlsDemux},l.dependencies.HlsFragmentController=function(){"use strict";var e={},n=function(e,t){var n=0,r=s.hlsDemux.demux(new Uint8Array(e),t);for(n=0;n<r.length;n+=1)!s.manifestModel.getValue().timestampMap&&r[n].samples[0].mpegTimestamp&&(s.manifestModel.getValue().timestampMap={local:r[n].samples[0].cts/9e4,mpegts:r[n].samples[0].mpegTimestamp});return s.mp4Processor.generateInitMediaSegment(r)},r=function(e){var t=new Uint8Array(16),n=0;for(n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},i=function(e,t){var n=new Date,i=new DataView(t.key.buffer),o=new Uint32Array([i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12)]);i=new DataView(r(t.iv).buffer);var a=new Uint32Array([i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12)]),u=new l.dependencies.AES128Decrypter(o,a);return s.debug.log("[HlsFragmentController] decrypted chunk ("+(((new Date).getTime()-n.getTime())/1e3).toFixed(3)+"s.)"),u.decrypt(e)},o=function(e){var n=t.defer();this.debug.log("[HlsFragmentController]","Load decryption key: "+e.uri);var r=new d.dependencies.XHRLoader;return r.initialize("arraybuffer",0,0),r.load(e.uri).then((function(t){e.key=new Uint8Array(t.response),n.resolve()}),(function(t){!t||t.aborted?n.reject():n.reject({name:d.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_MANIFEST,message:"Failed to download HLS decryption key",data:{url:e.uri,status:t.status}})})),n.promise},a=function(n,r){var a,s=t.defer(),u=this;return r.decryptionInfo&&"NONE"!==r.decryptionInfo.method?(a=e[r.decryptionInfo.uri],a?s.resolve(i.call(this,n,a)):(a=r.decryptionInfo,o.call(this,a).then((function(){if(a.key&&16!==a.key.byteLength)return s.reject({name:d.dependencies.ErrorHandler.prototype.HLS_INVALID_KEY_ERROR,message:"Invalid HLS key - Key length ("+a.key.byteLength+") does not respect specification"});e[a.uri]=a,s.resolve(i.call(u,n,a))}),(function(e){s.reject(e)}))),s.promise):(s.resolve(n),s.promise)},s=d.utils.copyMethods(d.dependencies.FragmentController);return s.manifestModel=void 0,s.hlsDemux=void 0,s.mp4Processor=void 0,s.process=function(e,r){var i=t.defer(),o=null;return null===e||void 0===e||0===e.byteLength?(i.resolve(null),i.promise):r&&"Media Segment"===r.type?"text"===r.streamType?(i.resolve(e),i.promise):(a.call(s,e,r).then((function(e){try{s.manifestModel.getValue()?(o=n(e,r),s.sequenceNumber++,i.resolve(o)):i.resolve(null)}catch(t){i.reject(t)}}),(function(e){i.reject(e)})),i.promise):(i.resolve(null),i.promise)},s},l.dependencies.HlsFragmentController.prototype={constructor:l.dependencies.HlsFragmentController},l.dependencies.HlsHandler=function(){"use strict";var e=function(e){var r,i,o,a=null,s=this,u=null,l=t.defer();return a=e.adaptation.period,u=a.start,r=n.manifestModel.getValue(),i=n.manifestExt.getIsDynamic(r),o=new d.vo.SegmentRequest,o.streamType=n.getType(),o.type="Initialization Segment",o.url=null,o.data=1,o.range=e.range,o.availabilityStartTime=s.timelineConverter.calcAvailabilityStartTimeFromPresentationTime(u,e.adaptation.period.mpd,i),o.availabilityEndTime=s.timelineConverter.calcAvailabilityEndTimeFromPresentationTime(u+a.duration,a.mpd,i),o.quality=e.index,l.resolve(o),l.promise},n=d.utils.copyMethods(c.dependencies.DashHandler);return n.getInitRequest=e,n},l.dependencies.HlsHandler.prototype={constructor:l.dependencies.HlsHandler},l.dependencies.HlsParser=function(){var e,n=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,r=/#EXT-X-MEDIA:(.*)/g,i="(?:#(EXT-X-MEDIA-SEQUENCE):*(\\d+))",o="(?:#(EXT-X-TARGETDURATION):*(\\d+))",a="(?:#(EXT-X-PROGRAM-DATE-TIME):*(.+))",s="(?:#(EXT-X-KEY):(.+))",u="(?:#(EXTINF):*(\\d+(?:\\.\\d+)?)(?:,(.*))?[\r\n]*(.*))",l="(?:#(EXT-X-ENDLIST))",c=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,f=new RegExp("(?:"+i+"|"+o+"|"+a+"|"+s+"|"+u+"|"+l+")","g"),h=2,p=500,m=h,g=p,y=function(e){var t,n,r,i={};while(null!==(t=c.exec(e)))n=t[1],r=t[2].replace(/"/g,""),i[n]=r;return i},v=function(e,t){return 0===e.indexOf("http://")||0===e.indexOf("https://")?e:t+e},_=function(e){var t,r,i,o,a,s,u,l,c,d,f=[];while(null!==(r=n.exec(e))){for(i=y(r[1]),o=i["CODECS"]||"",o=o.split(","),a=s="",d=0;d<o.length;d++)-1!==o[d].indexOf("avc1")?s=o[d]:a=o[d];u=i["RESOLUTION"]||"0x0",u=u.split("x"),l=parseInt(u[0],10),c=parseInt(u[1],10),t={programId:i["PROGRAM-ID"]||"",bandwidth:parseInt(i["BANDWIDTH"]||"0",10),audioCodec:a,videoCodec:s,width:l,height:c,audioId:i["AUDIO"]||"",subtitlesId:i["SUBTITLES"]||"",uri:r[2]},f.push(t)}return f},E=function(e){var t,n,i,o,a=[];while(null!==(t=r.exec(e))){if(n=y(t[1]),i=(n["TYPE"]||"").toLowerCase(),0===i.length)break;o={type:i,groupId:n["GROUP-ID"]||"",name:i+(n["NAME"]?"_"+n["NAME"]:""),language:n["LANGUAGE"]||"",autoSelect:"YES"===n["AUTO-SELECT"],default:"YES"===n["SUTITLES"],uri:n["URI"]||""},a.push(o)}return a},b=function(e,t){for(var n=0;n<e.length;n++){if(!(e[n].sequenceNumber<t))break;e.shift(),n--}},T=function(e,t,n){var r,i,o,a,s,u,l,c,d=null,h=0,p=0,m=null;if(!e||e&&e.length<0)return!1;if(0!==e.indexOf("#EXTM3U"))return!1;r=t["SegmentList"],r||(r={name:"SegmentList",isRoot:!1,isArray:!1,duration:0,startNumber:0,timescale:1,BaseURL:t.BaseURL,SegmentURL_asArray:[]},t["SegmentList"]=r),i=r.SegmentURL_asArray,t.duration=1/0;while(null!==(u=f.exec(e)))switch(u=u.filter((function(e){return void 0!==e})),l=u[1],l){case"EXT-X-MEDIA-SEQUENCE":p=parseInt(u[2]),r.startNumber=p;break;case"EXT-X-TARGETDURATION":r.duration=parseInt(u[2]);break;case"EXT-X-KEY":c=y(u[2]),d={method:c["METHOD"]||"NONE",uri:v(c["URI"],r.BaseURL),iv:c["IV"]};break;case"EXTINF":o={name:"SegmentURL",isRoot:!1,isArray:!0,media:v(u[4],r.BaseURL),sequenceNumber:p,time:0===i.length?0:i[i.length-1].time+i[i.length-1].duration,duration:parseFloat(u[2]),decryptionInfo:d},o.decryptionInfo&&!o.decryptionInfo.iv&&(o.decryptionInfo.iv=o.sequenceNumber),(0===i.length||o.sequenceNumber>i[i.length-1].sequenceNumber)&&i.push(o),p++,h+=o.duration,m&&(o.programDateTime=m,m+=1e3*o.duration);break;case"EXT-X-ENDLIST":t.duration=h;break;case"EXT-X-PROGRAM-DATE-TIME":m=Date.parse(u[2]);break;default:break}if(b(i,r.startNumber),n.segments&&n.segments.length>0&&(b(i,n.segments[0].sequenceNumber),i.length>0&&(b(n.segments,i[0].sequenceNumber),n.segments.length>0&&i[0].time!==n.segments[0].time)))for(i[0].time=n.segments[0].time,s=1;s<i.length;s++)i[s].time=i[s-1].time+i[s-1].duration;if(0===i.length)return!0;n.segments=i;var g={start:i[0].time,end:i[i.length-1].time+i[i.length-1].duration};return m&&(g.programStart=i[0].programDateTime,g.programEnd=i[i.length-1].programDateTime+i[i.length-1].duration),"video"===n.contentType&&this.metricsModel.addDVRInfo("video",new Date,g),a={name:"Initialization",sourceURL:t.SegmentList.SegmentURL_asArray[0].media},t.SegmentList.Initialization=a,!0},S=function(e,n){var r,i,o,a,s,u,l=t.defer(),c=e.Period_asArray[0],f=c.AdaptationSet_asArray[0],h=f.Representation_asArray[n],p=new d.vo.SegmentRequest;for(c.start=0,f.duration=h.duration,c.duration=h.duration,h.duration!==1/0&&(e.mediaPresentationDuration=h.duration),e.type=h.duration===1/0?"dynamic":"static",r=h.SegmentList.duration*h.SegmentList.SegmentURL_asArray.length,"dynamic"===e.type&&(i=new Date,e.availabilityStartTime=new Date(i.getTime()-1e3*r),e.timeShiftBufferDepth=r),e.minBufferTime=3*h.SegmentList.duration,o=Math.max.apply(null,c.AdaptationSet_asArray.map((function(e){var t=n>e.Representation_asArray.length?0:n;return e.Representation_asArray[t].SegmentList.startNumber}))),a=0;a<c.AdaptationSet_asArray.length;a++){var m=c.AdaptationSet_asArray[a];for(s=0;s<m.Representation_asArray.length;s++)if(m.Representation_asArray[s].SegmentList){var g=m.Representation_asArray[s].SegmentList.SegmentURL_asArray;if(g.length>0&&g[0].sequenceNumber<o&&(b(g,o),g.length>0))for(g[0].time=0,u=1;u<g.length;u++)g[u].time=g[u-1].time+g[u-1].duration}}h=f.Representation_asArray[n],p.type="Initialization Segment",p.url=h.SegmentList.Initialization.sourceURL;var y=function(e,t){var n=this.hlsDemux.getTracks(new Uint8Array(t.data)),r=0;for(e.codecs="",r=0;r<n.length;r++)e.codecs+=n[r].codecs,r<n.length-1&&(e.codecs+=",");l.resolve()},v=function(){l.resolve()};return""===h.codecs?(this.debug.log("[HlsParser]","Load initialization segment: "+p.url),this.fragmentLoader.load(p).then(y.bind(this,h),v.bind(this))):l.resolve(),l.promise},w=function(e){var t=null;return-1!==e.indexOf("/")&&(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),t=e.substring(0,e.lastIndexOf("/")+1)),t},x=function(n,r){var i=this,o=t.defer();return this.debug.log("[HlsParser]","Load playlist manifest: "+n.url),e=new d.dependencies.XHRLoader,e.initialize("text",m,g),e.load(n.url).then((function(e){T.call(i,e.response,n,r)?o.resolve():o.reject({name:d.dependencies.ErrorHandler.prototype.MANIFEST_ERR_PARSE,message:"Failed to parse variant stream playlist",data:{url:n.url}})}),(function(e){!e||e.aborted?o.reject():o.reject({name:d.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_MANIFEST,message:"Failed to download variant stream playlist",data:{url:n.url,status:e.status}})})),o.promise},I=function(e,n){var r,i,o,a,s,u,l,c,d=this,f=t.defer(),h=[],p=0,m=[],g=[],y=[],b=0;if(0!==e.indexOf("#EXTM3U"))return this.debug.error("[HlsParser] no stream in HLS manifest"),f.reject(),f.promise;if(r={},r.name="M3U",r.isRoot=!0,r.isArray=!0,r.parent=null,r.BaseURL=n,r.profiles="urn:mpeg:dash:profile:isoff-live:2011",r.type="static",i={},i.name="Period",i.isRoot=!1,i.isArray=!1,i.parent=r,i.duration=0,i.BaseURL=r.BaseURL,r.Period=i,r.Period_asArray=[i],h=[],i.AdaptationSet=h,i.AdaptationSet_asArray=h,m=_(e),0===m.length)return this.debug.error("[HlsParser] No stream in HLS manifest"),f.reject(),f.promise;for(m.sort((function(e,t){return e.bandwidth-t.bandwidth})),o={name:"AdaptationSet",isRoot:!1,isArray:!0,id:"video",lang:"",contentType:"video",mimeType:"video/mp4",maxWidth:0,maxHeight:0,BaseURL:i.BaseURL},a=[],b=0;b<m.length;b++){if(u=m[b],u.bandwidth<=64e3)break;s={name:"Representation",isRoot:!1,isArray:!0,id:p.toString(),mimeType:"video/mp4",codecs:u.videoCodec.length>0?u.audioId.length>0?u.videoCodec:u.videoCodec+","+u.audioCodec:"",bandwidth:u.bandwidth,width:u.width,height:u.height,url:v(u.uri,o.BaseURL)},s.BaseURL=w(s.url),a.push(s),p++}for(o.Representation=a.length>1?a:a[0],o.Representation_asArray=a,h.push(o),c=this.abrController.getPlaybackQuality("video",h[0]).quality,s=h[0].Representation_asArray[c],y.push(x.call(this,s,o)),g=E(e),b=0;b<g.length;b++)l=g[b],o={name:"AdaptationSet",isRoot:!1,isArray:!0,id:l.name,lang:l.language,contentType:l.type,mimeType:"audio"===l.type?"audio/mp4":"text/vtt",maxWidth:0,maxHeight:0,BaseURL:i.BaseURL},s={name:"Representation",isRoot:!1,isArray:!0,id:"",mimeType:"audio"===l.type?"audio/mp4":"text/vtt",codecs:"audio"===l.type?m[0].audioCodec:"WebVTT",bandwidth:0,width:0,height:0,url:v(l.uri,o.BaseURL)},s.BaseURL=w(s.url),o.Representation=s,o.Representation_asArray=[s],h.push(o),y.push(x.call(this,s,o));return t.all(y).then((function(){S.call(d,r,c).then((function(){f.resolve(r)}))}),(function(e){e?f.reject(e):f.resolve(null)})),f.promise},A=function(e,t){return this.hlsDemux.reset(),this.debug.log("[HlsParser]","Doing parse."),this.debug.log("[HlsParser]",e),I.call(this,e,t)},D=function(){null!==e&&e.abort()};return{debug:void 0,config:void 0,manifestModel:void 0,fragmentLoader:void 0,abrController:void 0,hlsDemux:void 0,metricsModel:void 0,setup:function(){m=this.config.getParam("ManifestLoader.RetryAttempts","number",h),g=this.config.getParam("ManifestLoader.RetryInterval","number",p)},parse:A,updatePlaylist:x,abort:D}},l.dependencies.HlsParser.prototype={constructor:l.dependencies.HlsParser},Number.MAX_SAFE_INTEGER||(Number.MAX_SAFE_INTEGER=9007199254740991),u.dependencies.MssParser=function(){"use strict";var e=1e7,n=["AAC","AACL","AVC1","H264","TTML","DFXP"],i={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},o={video:"video/mp4",audio:"audio/mp4",text:"application/ttml+xml+mp4"},a=null,s=null,u=function(e){var t,n,r={},i=[],o=this.domParser.getChildNode(a,"SmoothStreamingMedia");for(r.BaseURL=s,n=0;n<o.childNodes.length;n++)"StreamIndex"===o.childNodes[n].nodeName&&(t=l.call(this,o.childNodes[n],e),null!==t&&i.push(t));return i.length>0&&(r.AdaptationSet=i.length>1?i:i[0]),r.AdaptationSet_asArray=i,r},l=function(e,t){var n,r,i={},a=[],u={},l=null,d=null;for(i.id=this.domParser.getAttributeValue(e,"Name"),i.lang=this.domParser.getAttributeValue(e,"Language"),i.contentType=this.domParser.getAttributeValue(e,"Type"),i.mimeType=o[i.contentType],i.maxWidth=this.domParser.getAttributeValue(e,"MaxWidth"),i.maxHeight=this.domParser.getAttributeValue(e,"MaxHeight"),i.BaseURL=s,d=this.domParser.getAttributeValue(e,"Subtype"),d&&(i.subType=d),u=m.call(this,e,t),l=this.domParser.getChildNodes(e,"QualityLevel"),r=0;r<l.length;r++)l[r].BaseURL=i.BaseURL,l[r].mimeType=i.mimeType,l[r].Id=i.id+"_"+this.domParser.getAttributeValue(l[r],"Index"),n=c.call(this,l[r],e),null!==n&&(n.SegmentTemplate=u,a.push(n));return 0===a.length?null:(i.Representation=a.length>1?a:a[0],i.Representation_asArray=a,i.SegmentTemplate=u,i)},c=function(e,t){var r={},i=null,o=this.domParser.getAttributeValue(t,"Type");if(r.id=e.Id,r.bandwidth=parseInt(this.domParser.getAttributeValue(e,"Bitrate"),10),r.mimeType=e.mimeType,r.width=parseInt(this.domParser.getAttributeValue(e,"MaxWidth"),10),r.height=parseInt(this.domParser.getAttributeValue(e,"MaxHeight"),10),i=this.domParser.getAttributeValue(e,"FourCC"),null!==i&&""!==i||(i=this.domParser.getAttributeValue(t,"FourCC")),null===i||""===i){if("audio"!==o)return this.errHandler.sendWarning(d.dependencies.ErrorHandler.prototype.MEDIA_ERR_CODEC_UNSUPPORTED,o+" codec/FourCC not provided",{codec:""}),null;i="AAC"}return-1===n.indexOf(i.toUpperCase())?(this.debug.warn("[MssParser] Codec not supported: "+i),null):("H264"===i||"AVC1"===i?r.codecs=f.call(this,e):i.indexOf("AAC")>=0&&(r.codecs=p.call(this,e,i),r.audioSamplingRate=parseInt(this.domParser.getAttributeValue(e,"SamplingRate"),10),r.audioChannels=parseInt(this.domParser.getAttributeValue(e,"Channels"),10)),r.codecPrivateData=""+this.domParser.getAttributeValue(e,"CodecPrivateData"),r.BaseURL=e.BaseURL,r)},f=function(e){var t,n,r=this.domParser.getAttributeValue(e,"CodecPrivateData").toString();return t=/00000001[0-9]7/.exec(r),n=t&&t[0]?r.substr(r.indexOf(t[0])+10,6):void 0,"avc1."+n},p=function(e,t){var n,r,o,a,s=0,u=this.domParser.getAttributeValue(e,"CodecPrivateData").toString(),l=parseInt(this.domParser.getAttributeValue(e,"SamplingRate"),10);return"AACH"===t&&(s=5),void 0===u||""===u?(s=2,o=i[l],"AACH"===t?(s=5,u=new Uint8Array(4),a=i[2*l],u[0]=s<<3|o>>1,u[1]=o<<7|e.Channels<<3|a>>1,u[2]=a<<7|8,u[3]=0,r=new Uint16Array(2),r[0]=(u[0]<<8)+u[1],r[1]=(u[2]<<8)+u[3],n=r[0].toString(16),n=r[0].toString(16)+r[1].toString(16)):(u=new Uint8Array(2),u[0]=s<<3|o>>1,u[1]=o<<7|parseInt(this.domParser.getAttributeValue(e,"Channels"),10)<<3,r=new Uint16Array(1),r[0]=(u[0]<<8)+u[1],n=r[0].toString(16)),u=""+n,u=u.toUpperCase(),e.setAttribute("CodecPrivateData",u)):0===s&&(s=(248&parseInt(u.substr(0,2),16))>>3),"mp4a.40."+s},m=function(e,t){var n,r,i={};return n=this.domParser.getAttributeValue(e,"Url").replace("{bitrate}","$Bandwidth$"),n=n.replace("{start time}","$Time$"),r=this.domParser.getAttributeValue(e,"TimeScale"),r=r?parseFloat(r):t,i.media=n,i.timescale=r,i.SegmentTimeline=g.call(this,e,i.timescale),i},g=function(e,t){var n,i,o,a,s,u,l={},c=this.domParser.getChildNodes(e,"c"),d=[],f=0;for(o=0;o<c.length;o++)if(n={},u=this.domParser.getAttributeValue(c[o],"t"),u&&r.math.Long.fromString(u).greaterThan(r.math.Long.fromNumber(Number.MAX_SAFE_INTEGER))&&(n.tManifest=u),n.t=parseFloat(u),n.d=parseFloat(this.domParser.getAttributeValue(c[o],"d")),0!==o||n.t||(n.t=0),o>0&&(i=d[d.length-1],i.d||(i.tManifest?i.d=r.math.Long.fromString(u).subtract(r.math.Long.fromString(i.tManifest)).toNumber():i.d=n.t-i.t,f+=i.d),n.t||(i.tManifest?(n.tManifest=r.math.Long.fromString(i.tManifest).add(r.math.Long.fromNumber(i.d)).toString(),n.t=parseFloat(n.tManifest)):n.t=i.t+i.d)),n.d&&(f+=n.d),d.push(n),s=parseFloat(this.domParser.getAttributeValue(c[o],"r")),s)for(a=0;a<s-1;a++)i=d[d.length-1],n={},n.t=i.t+i.d,n.d=i.d,i.tManifest&&(n.tManifest=r.math.Long.fromString(i.tManifest).add(r.math.Long.fromNumber(i.d)).toString()),f+=n.d,d.push(n);return l.S=d,l.S_asArray=d,l.duration=f/t,l},y=function(e){var t,n,r,i;return t=h.decodeArray(e.firstChild.data),n=v(t),n=new Uint16Array(n.buffer),n=String.fromCharCode.apply(null,n),r=(new DOMParser).parseFromString(n,"application/xml"),i=r.querySelector("KID").textContent,i=h.decodeArray(i),_(i),i},v=function(e){var t,n,r,i=0;e[i+3],e[i+2],e[i+1],e[i],i+=4,e[i+1],e[i],i+=2;while(i<e.length)if(t=(e[i+1]<<8)+e[i],i+=2,1===t)return n=(e[i+1]<<8)+e[i],i+=2,r=new Uint8Array(n),r.set(e.subarray(i,i+n)),r;return null},_=function(e){E(e,0,3),E(e,1,2),E(e,4,5),E(e,6,7)},E=function(e,t,n){var r=e[t];e[t]=e[n],e[n]=r},b=function(e){var t,n={},r=this.system.getObject("ksPlayReady");return t={__text:e.firstChild.data,__prefix:"mspr"},n.schemeIdUri=r.schemeIdURI,n.value=r.systemString,n.pro=t,n.pro_asArray=t,n},T=function(e){var t={},n=this.system.getObject("ksWidevine");t.schemeIdUri=n.schemeIdURI,t.value=n.systemString;var r=new Uint8Array(2+e.length);r[0]=18,r[1]=16,r.set(e,2);var i=32+r.length,o=new Uint8Array(i),a=0;return o[a++]=(4278190080&i)>>24,o[a++]=(16711680&i)>>16,o[a++]=(65280&i)>>8,o[a++]=255&i,o.set([112,115,115,104,0,0,0,0],a),a+=8,o.set([237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237],a),a+=16,o[a++]=(4278190080&r.length)>>24,o[a++]=(16711680&r.length)>>16,o[a++]=(65280&r.length)>>8,o[a++]=255&r.length,o.set(r,a),o=String.fromCharCode.apply(null,o),o=h.encodeASCII(o),t.pssh={__text:o},t},S=function(e){var t=e.SegmentTemplate,n=t.SegmentTimeline.S_asArray;if(0!==n.length){var r={start:n[0].t/t.timescale,end:(n[n.length-1].t+n[n.length-1].d)/t.timescale};this.metricsModel.addDVRInfo(e.contentType,new Date,r)}},w=function(t){var n,r,i,o,l,c,f,h,p,m={},g=[],v=this.domParser.getChildNode(a,"SmoothStreamingMedia"),_=this.domParser.getChildNode(v,"Protection"),E=null;m.name="MSS",m.profiles="urn:mpeg:dash:profile:isoff-live:2011";var w=this.domParser.getAttributeValue(v,"TimeScale");m.timescale=w?parseFloat(w):e;var x=this.domParser.getAttributeValue(v,"IsLive");m.type=null!==x&&"true"===x.toLowerCase()?"dynamic":"static";var I=this.domParser.getAttributeValue(v,"CanSeek"),A=parseFloat(this.domParser.getAttributeValue(v,"DVRWindowLength"));0===A&&null!==I&&"true"===I.toLowerCase()&&(A=1/0),m.timeShiftBufferDepth=A/m.timescale;var D=parseFloat(this.domParser.getAttributeValue(v,"Duration"));if("dynamic"===m.type&&D>0&&(m.type="static",m.startOver=!0,m.timeShiftBufferDepth=D/m.timescale),m.mediaPresentationDuration=0===D?1/0:D/m.timescale,m.BaseURL=s,m.minBufferTime=d.dependencies.BufferExtensions.DEFAULT_MIN_BUFFER_TIME,"dynamic"===m.type&&m.timeShiftBufferDepth<1/0&&(m.availabilityStartTime=new Date(t.getTime()-1e3*m.timeShiftBufferDepth)),m.Period=u.call(this,m.timescale),m.Period_asArray=[m.Period],n=m.Period,n.start=0,void 0!==_){if(!d.dependencies.ProtectionController)return m.error={name:d.dependencies.ErrorHandler.prototype.MEDIA_ERR_ENCRYPTED,message:"protected content detected but protection module is not included."},m;E=this.domParser.getChildNode(_,"ProtectionHeader"),E.firstChild.data=E.firstChild.data.replace(/\n|\r/g,""),o=y(E),i=b.call(this,E),i["cenc:default_KID"]=o,g.push(i),i=T.call(this,o),i["cenc:default_KID"]=o,g.push(i),m.ContentProtection=g.length>1?g:g[0],m.ContentProtection_asArray=g}for(r=n.AdaptationSet_asArray,h=0;h<r.length;h+=1)void 0!==m.ContentProtection&&(r[h].ContentProtection=m.ContentProtection,r[h].ContentProtection_asArray=m.ContentProtection_asArray),"dynamic"===m.type&&(m.timeShiftBufferDepth===1/0&&(m.availabilityStartTime=new Date(t.getTime()-1e3*r[1].SegmentTemplate.SegmentTimeline.duration)),m.timeShiftBufferDepth>0&&m.timeShiftBufferDepth!==1/0&&"video"===r[h].contentType&&m.timeShiftBufferDepth>r[h].SegmentTemplate.SegmentTimeline.duration&&(m.timeShiftBufferDepth=r[h].SegmentTemplate.SegmentTimeline.duration),S.call(this,r[h]));if(m.timeShiftBufferDepth<m.minBufferTime&&(m.minBufferTime=m.timeShiftBufferDepth),delete m.ContentProtection,delete m.ContentProtection_asArray,"static"===m.type){var R=this.manifestModel.getValue();if(R&&R.timestampOffset)l=R.timestampOffset;else for(h=0;h<r.length;h++)"audio"!==r[h].contentType&&"video"!==r[h].contentType||(f=r[h].SegmentTemplate.SegmentTimeline.S_asArray,c=f[0].t/r[h].SegmentTemplate.timescale,void 0===l&&(l=c),l=Math.min(l,c),m.mediaPresentationDuration=Math.min(m.mediaPresentationDuration,r[h].SegmentTemplate.SegmentTimeline.duration));if(l>0){for(m.timestampOffset=l,h=0;h<r.length;h++){for(f=r[h].SegmentTemplate.SegmentTimeline.S_asArray,p=0;p<f.length;p++)f[p].tManifest||(f[p].tManifest=f[p].t),f[p].t-=l*r[h].SegmentTemplate.timescale;"audio"!==r[h].contentType&&"video"!==r[h].contentType||(n.start=Math.max(f[0].t,n.start))}n.start/=m.timescale}}return m.mediaPresentationDuration=Math.floor(1e3*m.mediaPresentationDuration)/1e3,n.duration=m.mediaPresentationDuration,m},x=function(e,n){this.debug.info("[MssParser]","Doing parse.");var r=new Date,i=null,o=null,u=null;return a=this.domParser.createXmlTree(e),i=new Date,null===a?t.reject(null):(s=n,o=w.call(this,r),o.error?t.reject(o.error):(u=new Date,this.debug.info("[MssParser]","Parsing complete (xmlParser: "+(i.getTime()-r.getTime())+"ms, mss2dash: "+(u.getTime()-i.getTime())+"ms, total: "+((new Date).getTime()-r.getTime())/1e3+"s)"),t.when(o)))};return{debug:void 0,system:void 0,errHandler:void 0,domParser:void 0,metricsModel:void 0,manifestModel:void 0,parse:x}},u.dependencies.MssParser.prototype={constructor:u.dependencies.MssParser},u.dependencies.MssHandler=function(){"use strict";var e=function(e,t){var n=1;return e.audioChannels?n=e.audioChannels:t.audioChannels&&(n=t.audioChannels),n},n=function(e,t){var n=1;return n=e.audioSamplingRate?e.audioSamplingRate:t.audioSamplingRate,n},r=function(t){var r,o,a,s,u,l=i.manifestModel.getValue();if(t.initData)return t.initData;if(r=t.adaptation,o=l.Period_asArray[r.period.index].AdaptationSet_asArray[r.index],a=o.Representation_asArray[t.index],s=new d.vo.Mp4Track,s.type=i.getType()||"und",s.trackId=r.index+1,s.timescale=t.timescale,s.duration=t.adaptation.period.duration,s.codecs=a.codecs,s.codecPrivateData=a.codecPrivateData,s.bandwidth=a.bandwidth,"text"!==s.type&&(u=a.mimeType+';codecs="'+a.codecs+'"',!this.capabilities.supportsCodec(this.videoModel.getElement(),u)))throw{name:d.dependencies.ErrorHandler.prototype.MEDIA_ERR_CODEC_UNSUPPORTED,message:"Codec is not supported (HTMLMediaElement)",data:{codec:u,bandwidth:a.bandwidth,codecPrivateData:a.codecPrivateData}};return o.ContentProtection_asArray&&o.ContentProtection_asArray.length>0&&(s.contentProtection=o.ContentProtection_asArray),s.width=a.width||o.maxWidth,s.height=a.height||o.maxHeight,s.language=o.lang?o.lang:"und",s.channels=e(o,a),s.samplingRate=n(o,a),t.initData=i.mp4Processor.generateInitSegment([s]),t.initData},i=d.utils.copyMethods(c.dependencies.DashHandler);return i.mp4Processor=void 0,i.getInitRequest=function(e){var n=null,o=this,a=null,s=null,u=t.defer();if(!e)throw new Error("MssHandler.getInitRequest(): representation is undefined");n=e.adaptation.period,a=n.start,s=new d.vo.SegmentRequest,s.streamType=i.getType(),s.type="Initialization Segment",s.url=null;try{s.data=r.call(this,e)}catch(l){return u.reject(l),u.promise}return s.range=e.range,s.availabilityStartTime=o.timelineConverter.calcAvailabilityStartTimeFromPresentationTime(a,e.adaptation.period.mpd,i.getIsDynamic()),s.availabilityEndTime=o.timelineConverter.calcAvailabilityEndTimeFromPresentationTime(a+n.duration,n.mpd,i.getIsDynamic()),s.quality=e.index,u.resolve(s),u.promise},i.getIFrameRequest=function(e){return e&&e.url&&("video"===e.streamType||"audio"===e.streamType)&&(e.url=e.url.replace("Fragments","KeyFrames")),e},i.getFragmentInfoRequest=function(e){return e&&e.url&&(e.url=e.url.replace("Fragments","FragmentInfo"),e.type="FragmentInfo Segment"),e},i},u.dependencies.MssHandler.prototype={constructor:u.dependencies.MssHandler},u.dependencies.MssFragmentController=function(){"use strict";var e=function(e,t,n,i){var o,a,s,u=this.manifestModel.getValue(),l=i.SegmentTemplate.SegmentTimeline.S_asArray,c=i.SegmentTemplate.timescale,d=t.entry,f=null,h=0,p=null,m=i.type;if((this.manifestExt.getIsDynamic(u)||this.manifestExt.getIsStartOver(u))&&0!==d.length&&(o=d[0],o.fragment_absolute_time.greaterThan(r.math.Long.fromNumber(Number.MAX_SAFE_INTEGER))&&(o.fragment_absolute_timeManifest=o.fragment_absolute_time.toString()),o.fragment_absolute_time=o.fragment_absolute_time.toNumber(),o.fragment_duration=o.fragment_duration.toNumber(),!(this.manifestExt.getIsStartOver(u)&&(a=l[0].tManifest?parseFloat(l[0].tManifest):l[0].t,o.fragment_absolute_time>a+u.timeShiftBufferDepth*c))&&(a=l[l.length-1].tManifest?parseFloat(l[l.length-1].tManifest):l[l.length-1].t,!(o.fragment_absolute_time<=a))))if(this.debug.log("[MssFragmentController]["+m+"] Add new segment - t = "+o.fragment_absolute_time/c),f={},f.t=o.fragment_absolute_time,f.d=o.fragment_duration,l[0].tManifest&&(f.t-=parseFloat(l[0].tManifest)-l[0].t),o.fragment_absolute_timeManifest?f.tManifest=o.fragment_absolute_timeManifest:l[0].tManifest&&(f.tManifest=o.fragment_absolute_time),l.push(f),this.manifestExt.getIsStartOver(u)){if("video"===m){f=l[l.length-1];var g=(f.t+f.d)/c;g>this.videoModel.getDuration()&&this.system.notify("sourceDurationChanged",g)}}else if(u.timeShiftBufferDepth&&u.timeShiftBufferDepth>0){f=l[l.length-1],h=f.t,p=h-u.timeShiftBufferDepth*c,f=l[0];while(f.t<p)this.debug.log("[MssFragmentController]["+m+"] Remove segment  - t = "+f.t/c),l.splice(0,1),f=l[0];s={start:l[0].t/i.SegmentTemplate.timescale,end:n.baseMediaDecodeTime/i.SegmentTemplate.timescale+e.duration};var y=this.metricsModel.getMetricsFor(i.type).DVRInfo;y&&y.length>0&&s.end>y[y.length-1].range.end&&this.metricsModel.addDVRInfo(i.type,new Date,s)}},n=function(t,n,r){var i,o=null,a=null,s=null,u=null,l=null;if(o=_.deserialize(t),a=o.getBoxByType("moof"),s=a.getBoxByType("traf"),u=s.getBoxByType("tfdt"),null===u&&(u=new _.boxes.TrackFragmentBaseMediaDecodeTimeBox,u.version=1,u.flags=0,u.baseMediaDecodeTime=Math.floor(n.startTime*n.timescale),i=s.getBoxIndexByType("tfhd"),s.boxes.splice(i+1,0,u)),l=s.getBoxesByType("tfrf"),null===l||0===l.length)throw{name:d.dependencies.ErrorHandler.prototype.MSS_NO_TFRF,message:"Missing tfrf in live FragmentInfo segment",data:{url:n.url}};e.call(this,n,l[0],u,r)},i=function(e,t){var n,r,i,o,a,s=null,u=null,l=null,c=null,d=null,f=null;for(s=e.getBoxByType("moof"),u=e.getBoxByType("mdat"),l=s.getBoxByType("traf"),c=l.getBoxByType("trun"),n=l.getBoxByType("tfhd"),c.samples_table[0].sample_duration||(c.samples_table[0].sample_duration=n.default_sample_duration),c.flags|=256,n.flags&=16777207,i=Math.floor(t/c.samples_table[0].sample_duration),r=0;r<i-1;r++)c.samples_table.push(c.samples_table[0]);if(c.sample_count=c.samples_table.length,o=i*c.samples_table[0].sample_duration,o<t&&(c.samples_table[c.samples_table.length-1].sample_duration+=t-o),d=l.getBoxByType("sepiff"),null!==d){for(d.sample_count>1&&(d.entry=d.entry.slice(0,1)),r=0;r<i-1;r+=1)d.entry.push(d.entry[0]);d.sample_count=d.entry.length}if(f=l.getBoxByType("saiz"),null!==f){if(0===f.default_sample_info_size)for(f.sample_count>1&&(f.sample_info_size=f.sample_info_size.slice(0,1)),r=0;r<i-1;r+=1)f.sample_info_size.push(f.sample_info_size[0]);f.sample_count=d.entry.length}for(a=u.data,u.data=new Uint8Array(a.length*c.sample_count),r=0;r<c.sample_count;r++)u.data.set(a,a.length*r)},o=function(t,n,r){var o,a,s=0,u=this.manifestModel.getValue(),l=u?this.manifestExt.getIndex(r,u)+1:-1,c=_.deserialize(t),f=null,h=null,p=null,m=null,g=null,y=null,v=null,E=null,b=null,T=null,S=-1,w=0,x=0,I=0,A=0,D=null;if(!c)return null;if(f=c.getBoxByType("moof"),h=c.getBoxByType("mdat"),p=f.getBoxByType("traf"),m=p.getBoxByType("trun"),g=p.getBoxByType("tfhd"),a=void 0!==m.samples_table[0].sample_duration?m.samples_table[0].sample_duration:g.default_sample_duration,o=n.duration*n.timescale,1===m.samples_table.length&&a<o&&i(c,o),g.track_ID=l,p.removeBoxByType("tfxd"),b=p.getBoxByType("tfdt"),null===b&&(b=new _.boxes.TrackFragmentBaseMediaDecodeTimeBox,b.version=1,b.flags=0,b.baseMediaDecodeTime=Math.floor(n.startTime*n.timescale),S=p.getBoxIndexByType("tfhd"),p.boxes.splice(S+1,0,b)),"dynamic"===u.type){if(T=p.getBoxesByType("tfrf"),null===T||0===T.length)throw{name:d.dependencies.ErrorHandler.prototype.MSS_NO_TFRF,message:"Missing tfrf in live media segment",data:{url:n.url}};e.call(this,n,T[0],b,r),p.removeBoxByType("tfrf")}if(v=p.getBoxByType("sepiff"),null!==v&&(v.boxtype="senc",v.extended_type=void 0,y=p.getBoxByType("saio"),null===y)){if(y=new _.boxes.SampleAuxiliaryInformationOffsetsBox,y.version=0,y.flags=0,y.entry_count=1,y.offset=[],E=new _.boxes.SampleAuxiliaryInformationSizesBox,E.version=0,E.flags=0,E.sample_count=v.sample_count,E.default_sample_info_size=0,E.sample_info_size=[],2&v.flags)for(s=0;s<v.sample_count;s+=1)E.sample_info_size[s]=10+6*v.entry[s].NumberOfEntries;else E.default_sample_info_size=8;p.boxes.push(E),p.boxes.push(y)}return g.flags&=16777214,g.flags|=131072,m.flags|=1,m.data_offset=0,w=c.getLength(),m.data_offset=w-h.size+8,y=p.getBoxByType("saio"),null!==y&&(x=c.getBoxOffsetByType("moof"),I=f.getBoxOffsetByType("traf"),A=p.getBoxOffsetByType("senc"),y.offset[0]=x+I+A+16),D=_.serialize(c),D},a=d.utils.copyMethods(d.dependencies.FragmentController);return a.manifestModel=void 0,a.manifestExt=void 0,a.metricsModel=void 0,a.videoModel=void 0,a.mediaSourceExt=void 0,a.process=function(e,r,i){var a=t.defer(),s=null,u=this.manifestModel.getValue(),l=null;if(!(null!==e&&void 0!==e&&e.byteLength>0))return a.resolve(null),a.promise;if(s=new Uint8Array(e),u&&i)try{l=u.Period_asArray[i.adaptation.period.index].AdaptationSet_asArray[i.adaptation.index],r&&("Media Segment"===r.type?(s=o.call(this,s,r,l),a.resolve(s||null)):"FragmentInfo Segment"===r.type?(n.call(this,s,r,l),a.resolve(s)):a.resolve(s))}catch(c){a.reject(c)}else a.resolve(s);return a.promise},a},u.dependencies.MssFragmentController.prototype={constructor:u.dependencies.MssFragmentController},u.dependencies.MssFragmentInfoController=function(){"use strict";var e,n,r,i=!1,o=!1,a=null,s=null,u=null,l=null,c=function(t,r,o){this.debug.log("[MssFragmentInfoController]["+t+"] Initialize"),n=o,e=t,a=r,s=a.attachBufferController(this),s.setType(t),i=!0},f=function(){return p.call(this),s&&(a.abortRequestsForModel(s),a.detachBufferController(s),s=null),t.when(null)},h=function(t){i&&!o&&(this.debug.info("[MssFragmentInfoController]["+e+"] START"),o=!0,u=(new Date).getTime()+1e3*t,b.call(this,t))},p=function(){o&&(this.debug.info("[MssFragmentInfoController]["+e+"] STOP"),a.abortRequestsForModel(s),clearTimeout(r),o=!1)},m=function(){if(o){var t,r=n.getData(),i=r.SegmentTemplate.SegmentTimeline.S_asArray,a=i[i.length-1],s=r.Representation_asArray[0];this.debug.log("[MssFragmentInfoController]["+e+"] Load next fragment for time: "+a.t/r.SegmentTemplate.timescale),t=g(r,s,a),y.call(this,t)}},g=function(t,n,r){var i=t.SegmentTemplate.timescale,o=new d.vo.SegmentRequest;return o.action="download",o.startTime=r.t/i,o.streamType=e,o.type="FragmentInfo Segment",o.duration=r.d/i,o.timescale=i,o.quality=n.quality,o.url=t.BaseURL+t.SegmentTemplate.media,o.url=o.url.replace("$Bandwidth$",n.bandwidth),o.url=o.url.replace("$Time$",r.tManifest?r.tManifest:r.t),o.url=o.url.replace("/Fragments(","/FragmentInfo("),o},y=function(t){a.isFragmentLoadedOrPending(this,t)?this.debug.log("[MssFragmentInfoController]["+e+"] No more fragments"):(this.debug.log("[MssFragmentInfoController]["+e+"] Request fragment info "+t.url),a.prepareFragmentForLoading(this,t,v,_,E,null),a.onBufferControllerStateChange())},v=function(t){this.debug.info("[MssFragmentInfoController]["+e+"] Load request ",null!==t.url?t.url:t.quality)},_=function(t,r){var i,o,s=this,c=n.getAvailableRepresentations()[0];this.debug.log("[MssFragmentInfoController]["+e+"] FragmentInfo loaded ",t.url),l||(l=t.startTime);try{a.process(r.data,t,c).then((function(){i=((new Date).getTime()-u)/1e3,o=t.startTime+t.duration-l,b.call(s,Math.max(0,o-i))}))}catch(f){this.errHandler.sendError(d.dependencies.ErrorHandler.prototype.INTERNAL_ERROR,"Internal error while processing fragment info segment",f.message)}},E=function(e){o||this.errHandler.sendWarning(d.dependencies.ErrorHandler.prototype.DOWNLOAD_ERR_CONTENT,"Failed to download fragmentInfo segment",{url:e.url,status:e.status})},b=function(t){var n=this;this.debug.log("[MssFragmentInfoController]["+e+"] Load next fragment in "+t+" s."),clearTimeout(r),r=setTimeout((function(){r=null,m.call(n)}),1e3*t)};return{debug:void 0,system:void 0,errHandler:void 0,initialize:c,reset:f,start:h,stop:p,isReady:function(){return i}}},u.dependencies.MssFragmentInfoController.prototype={constructor:u.dependencies.MssFragmentInfoController};var f={encode:function(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|63&r)):r<65536?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t},decode:function(e){var t=[],n=0;while(n<e.length){var r=e[n++];r<128||(r<224?(r=(31&r)<<6,r|=63&e[n++]):r<240?(r=(15&r)<<12,r|=(63&e[n++])<<6,r|=63&e[n++]):(r=(7&r)<<18,r|=(63&e[n++])<<12,r|=(63&e[n++])<<6,r|=63&e[n++])),t.push(String.fromCharCode(r))}return t.join("")}},h={};if(function(e){var t=function(t){var n=0,r=[],i=0|t.length/3;while(0<i--){var o=(t[n]<<16)+(t[n+1]<<8)+t[n+2];n+=3,r.push(e.charAt(63&o>>18)),r.push(e.charAt(63&o>>12)),r.push(e.charAt(63&o>>6)),r.push(e.charAt(63&o))}if(2==t.length-n){o=(t[n]<<16)+(t[n+1]<<8);r.push(e.charAt(63&o>>18)),r.push(e.charAt(63&o>>12)),r.push(e.charAt(63&o>>6)),r.push("=")}else if(1==t.length-n){o=t[n]<<16;r.push(e.charAt(63&o>>18)),r.push(e.charAt(63&o>>12)),r.push("==")}return r.join("")},n=function(){for(var t=[],n=0;n<e.length;++n)t[e.charCodeAt(n)]=n;return t["=".charCodeAt(0)]=0,t}(),r=function(e){var t=0,r=[],i=0|e.length/4;while(0<i--){var o=(n[e.charCodeAt(t)]<<18)+(n[e.charCodeAt(t+1)]<<12)+(n[e.charCodeAt(t+2)]<<6)+n[e.charCodeAt(t+3)];r.push(255&o>>16),r.push(255&o>>8),r.push(255&o),t+=4}return r&&("="==e.charAt(t-2)?(r.pop(),r.pop()):"="==e.charAt(t-1)&&r.pop()),r},i={encode:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}};h.decodeArray=function(e){var t=r(e);return new Uint8Array(t)},h.encodeASCII=function(e){var n=i.encode(e);return t(n)},h.decodeASCII=function(e){var t=r(e);return i.decode(t)},h.encode=function(e){var n=f.encode(e);return t(n)},h.decode=function(e){var t=r(e);return f.decode(t)}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),void 0===p)var p=h.encode;if(void 0===m)var m=h.decode;if(function(e){"use strict";var t={VERSION:"0.5.3",System:function(){this._mappings={},this._outlets={},this._handlers={},this.strictInjections=!0,this.autoMapOutlets=!1,this.postInjectionHook="setup"}};t.System.prototype={_createAndSetupInstance:function(e,t){var n=new t;return this.injectInto(n,e),n},_retrieveFromCacheOrCreate:function(e,t){var n;if("undefined"===typeof t&&(t=!1),!this._mappings.hasOwnProperty(e))throw new Error(1e3);var r=this._mappings[e];return!t&&r.isSingleton?(null==r.object&&(r.object=this._createAndSetupInstance(e,r.clazz)),n=r.object):n=r.clazz?this._createAndSetupInstance(e,r.clazz):r.object,n},mapOutlet:function(e,t,n){if("undefined"===typeof e)throw new Error(1010);return t=t||"global",n=n||e,this._outlets.hasOwnProperty(t)||(this._outlets[t]={}),this._outlets[t][n]=e,this},getObject:function(e){if("undefined"===typeof e)throw new Error(1020);return this._retrieveFromCacheOrCreate(e)},mapValue:function(e,t){if("undefined"===typeof e)throw new Error(1030);return this._mappings[e]={clazz:null,object:t,isSingleton:!0},this.autoMapOutlets&&this.mapOutlet(e),this.hasMapping(e)&&this.injectInto(t,e),this},hasMapping:function(e){if("undefined"===typeof e)throw new Error(1040);return this._mappings.hasOwnProperty(e)},mapClass:function(e,t){if("undefined"===typeof e)throw new Error(1050);if("undefined"===typeof t)throw new Error(1051);return this._mappings[e]={clazz:t,object:null,isSingleton:!1},this.autoMapOutlets&&this.mapOutlet(e),this},mapSingleton:function(e,t){if("undefined"===typeof e)throw new Error(1060);if("undefined"===typeof t)throw new Error(1061);return this._mappings[e]={clazz:t,object:null,isSingleton:!0},this.autoMapOutlets&&this.mapOutlet(e),this},instantiate:function(e){if("undefined"===typeof e)throw new Error(1070);return this._retrieveFromCacheOrCreate(e,!0)},injectInto:function(e,t){if("undefined"===typeof e)throw new Error(1080);if("object"===typeof e){var n=[];for(var r in this._outlets.hasOwnProperty("global")&&n.push(this._outlets["global"]),"undefined"!==typeof t&&this._outlets.hasOwnProperty(t)&&n.push(this._outlets[t]),n){var i=n[r];for(var o in i){var a=i[o];this.strictInjections&&!(o in e)||(e[o]=this.getObject(a))}}"setup"in e&&e.setup.call(e)}return this},unmap:function(e){if("undefined"===typeof e)throw new Error(1090);return delete this._mappings[e],this},unmapOutlet:function(e,t){if("undefined"===typeof e)throw new Error(1100);if("undefined"===typeof t)throw new Error(1101);return delete this._outlets[e][t],this},mapHandler:function(e,t,n,r,i){if("undefined"===typeof e)throw new Error(1110);return t=t||"global",n=n||e,"undefined"===typeof r&&(r=!1),"undefined"===typeof i&&(i=!1),this._handlers.hasOwnProperty(e)||(this._handlers[e]={}),this._handlers[e].hasOwnProperty(t)||(this._handlers[e][t]=[]),this._handlers[e][t].push({handler:n,oneShot:r,passEvent:i}),this},unmapHandler:function(e,t,n){if("undefined"===typeof e)throw new Error(1120);if(t=t||"global",this._handlers.hasOwnProperty(e)&&this._handlers[e].hasOwnProperty(t)){var r=this._handlers[e][t];for(var i in r){var o=r[i];if(!n||o.handler===n){r.splice(i,1);break}}}return this},notify:function(e){if("undefined"===typeof e)throw new Error(1130);var t=Array.prototype.slice.call(arguments),n=t.slice(1);if(this._handlers.hasOwnProperty(e)){var r=this._handlers[e];for(var i in r){var o,a=r[i];"global"!==i&&(o=this.getObject(i));var s,u,l=[];for(s=0,u=a.length;s<u;s++){var c,d=a[s];c=o&&"string"===typeof d.handler?o[d.handler]:d.handler,d.oneShot&&l.unshift(s),d.passEvent?c.apply(o,t):c.apply(o,n)}for(s=0,u=l.length;s<u;s++)a.splice(l[s],1)}}return this}},e.dijon=t}(this),r={},r.math={},r.math.Long=function(e,t){this.low_=0|e,this.high_=0|t},r.math.Long.IntCache_={},r.math.Long.fromInt=function(e){if(-128<=e&&e<128){var t=r.math.Long.IntCache_[e];if(t)return t}var n=new r.math.Long(0|e,e<0?-1:0);return-128<=e&&e<128&&(r.math.Long.IntCache_[e]=n),n},r.math.Long.fromNumber=function(e){return isNaN(e)||!isFinite(e)?r.math.Long.ZERO:e<=-r.math.Long.TWO_PWR_63_DBL_?r.math.Long.MIN_VALUE:e+1>=r.math.Long.TWO_PWR_63_DBL_?r.math.Long.MAX_VALUE:e<0?r.math.Long.fromNumber(-e).negate():new r.math.Long(e%r.math.Long.TWO_PWR_32_DBL_|0,e/r.math.Long.TWO_PWR_32_DBL_|0)},r.math.Long.fromBits=function(e,t){return new r.math.Long(e,t)},r.math.Long.fromString=function(e,t){if(0==e.length)throw Error("number format error: empty string");var n=t||10;if(n<2||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return r.math.Long.fromString(e.substring(1),n).negate();if(e.indexOf("-")>=0)throw Error('number format error: interior "-" character: '+e);for(var i=r.math.Long.fromNumber(Math.pow(n,8)),o=r.math.Long.ZERO,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),u=parseInt(e.substring(a,a+s),n);if(s<8){var l=r.math.Long.fromNumber(Math.pow(n,s));o=o.multiply(l).add(r.math.Long.fromNumber(u))}else o=o.multiply(i),o=o.add(r.math.Long.fromNumber(u))}return o},r.math.Long.TWO_PWR_16_DBL_=65536,r.math.Long.TWO_PWR_24_DBL_=1<<24,r.math.Long.TWO_PWR_32_DBL_=r.math.Long.TWO_PWR_16_DBL_*r.math.Long.TWO_PWR_16_DBL_,r.math.Long.TWO_PWR_31_DBL_=r.math.Long.TWO_PWR_32_DBL_/2,r.math.Long.TWO_PWR_48_DBL_=r.math.Long.TWO_PWR_32_DBL_*r.math.Long.TWO_PWR_16_DBL_,r.math.Long.TWO_PWR_64_DBL_=r.math.Long.TWO_PWR_32_DBL_*r.math.Long.TWO_PWR_32_DBL_,r.math.Long.TWO_PWR_63_DBL_=r.math.Long.TWO_PWR_64_DBL_/2,r.math.Long.ZERO=r.math.Long.fromInt(0),r.math.Long.ONE=r.math.Long.fromInt(1),r.math.Long.NEG_ONE=r.math.Long.fromInt(-1),r.math.Long.MAX_VALUE=r.math.Long.fromBits(-1,2147483647),r.math.Long.MIN_VALUE=r.math.Long.fromBits(0,-2147483648),r.math.Long.TWO_PWR_24_=r.math.Long.fromInt(1<<24),r.math.Long.prototype.toInt=function(){return this.low_},r.math.Long.prototype.toNumber=function(){return this.high_*r.math.Long.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},r.math.Long.prototype.toString=function(e){var t=e||10;if(t<2||36<t)throw Error("radix out of range: "+t);if(this.isZero())return"0";if(this.isNegative()){if(this.equals(r.math.Long.MIN_VALUE)){var n=r.math.Long.fromNumber(t),i=this.div(n),o=i.multiply(n).subtract(this);return i.toString(t)+o.toInt().toString(t)}return"-"+this.negate().toString(t)}var a=r.math.Long.fromNumber(Math.pow(t,6)),s=(o=this,"");while(1){var u=o.div(a),l=o.subtract(u.multiply(a)).toInt(),c=l.toString(t);if(o=u,o.isZero())return c+s;while(c.length<6)c="0"+c;s=""+c+s}},r.math.Long.prototype.getHighBits=function(){return this.high_},r.math.Long.prototype.getLowBits=function(){return this.low_},r.math.Long.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:r.math.Long.TWO_PWR_32_DBL_+this.low_},r.math.Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(r.math.Long.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!=this.high_?this.high_:this.low_,t=31;t>0;t--)if(0!=(e&1<<t))break;return 0!=this.high_?t+33:t+1},r.math.Long.prototype.isZero=function(){return 0==this.high_&&0==this.low_},r.math.Long.prototype.isNegative=function(){return this.high_<0},r.math.Long.prototype.isOdd=function(){return 1==(1&this.low_)},r.math.Long.prototype.equals=function(e){return this.high_==e.high_&&this.low_==e.low_},r.math.Long.prototype.notEquals=function(e){return this.high_!=e.high_||this.low_!=e.low_},r.math.Long.prototype.lessThan=function(e){return this.compare(e)<0},r.math.Long.prototype.lessThanOrEqual=function(e){return this.compare(e)<=0},r.math.Long.prototype.greaterThan=function(e){return this.compare(e)>0},r.math.Long.prototype.greaterThanOrEqual=function(e){return this.compare(e)>=0},r.math.Long.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.subtract(e).isNegative()?-1:1},r.math.Long.prototype.negate=function(){return this.equals(r.math.Long.MIN_VALUE)?r.math.Long.MIN_VALUE:this.not().add(r.math.Long.ONE)},r.math.Long.prototype.add=function(e){var t=this.high_>>>16,n=65535&this.high_,i=this.low_>>>16,o=65535&this.low_,a=e.high_>>>16,s=65535&e.high_,u=e.low_>>>16,l=65535&e.low_,c=0,d=0,f=0,h=0;return h+=o+l,f+=h>>>16,h&=65535,f+=i+u,d+=f>>>16,f&=65535,d+=n+s,c+=d>>>16,d&=65535,c+=t+a,c&=65535,r.math.Long.fromBits(f<<16|h,c<<16|d)},r.math.Long.prototype.subtract=function(e){return this.add(e.negate())},r.math.Long.prototype.multiply=function(e){if(this.isZero())return r.math.Long.ZERO;if(e.isZero())return r.math.Long.ZERO;if(this.equals(r.math.Long.MIN_VALUE))return e.isOdd()?r.math.Long.MIN_VALUE:r.math.Long.ZERO;if(e.equals(r.math.Long.MIN_VALUE))return this.isOdd()?r.math.Long.MIN_VALUE:r.math.Long.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(r.math.Long.TWO_PWR_24_)&&e.lessThan(r.math.Long.TWO_PWR_24_))return r.math.Long.fromNumber(this.toNumber()*e.toNumber());var t=this.high_>>>16,n=65535&this.high_,i=this.low_>>>16,o=65535&this.low_,a=e.high_>>>16,s=65535&e.high_,u=e.low_>>>16,l=65535&e.low_,c=0,d=0,f=0,h=0;return h+=o*l,f+=h>>>16,h&=65535,f+=i*l,d+=f>>>16,f&=65535,f+=o*u,d+=f>>>16,f&=65535,d+=n*l,c+=d>>>16,d&=65535,d+=i*u,c+=d>>>16,d&=65535,d+=o*s,c+=d>>>16,d&=65535,c+=t*l+n*u+i*s+o*a,c&=65535,r.math.Long.fromBits(f<<16|h,c<<16|d)},r.math.Long.prototype.div=function(e){if(e.isZero())throw Error("division by zero");if(this.isZero())return r.math.Long.ZERO;if(this.equals(r.math.Long.MIN_VALUE)){if(e.equals(r.math.Long.ONE)||e.equals(r.math.Long.NEG_ONE))return r.math.Long.MIN_VALUE;if(e.equals(r.math.Long.MIN_VALUE))return r.math.Long.ONE;var t=this.shiftRight(1),n=t.div(e).shiftLeft(1);if(n.equals(r.math.Long.ZERO))return e.isNegative()?r.math.Long.ONE:r.math.Long.NEG_ONE;var i=this.subtract(e.multiply(n)),o=n.add(i.div(e));return o}if(e.equals(r.math.Long.MIN_VALUE))return r.math.Long.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();var a=r.math.Long.ZERO;i=this;while(i.greaterThanOrEqual(e)){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));var s=Math.ceil(Math.log(n)/Math.LN2),u=s<=48?1:Math.pow(2,s-48),l=r.math.Long.fromNumber(n),c=l.multiply(e);while(c.isNegative()||c.greaterThan(i))n-=u,l=r.math.Long.fromNumber(n),c=l.multiply(e);l.isZero()&&(l=r.math.Long.ONE),a=a.add(l),i=i.subtract(c)}return a},r.math.Long.prototype.modulo=function(e){return this.subtract(this.div(e).multiply(e))},r.math.Long.prototype.not=function(){return r.math.Long.fromBits(~this.low_,~this.high_)},r.math.Long.prototype.and=function(e){return r.math.Long.fromBits(this.low_&e.low_,this.high_&e.high_)},r.math.Long.prototype.or=function(e){return r.math.Long.fromBits(this.low_|e.low_,this.high_|e.high_)},r.math.Long.prototype.xor=function(e){return r.math.Long.fromBits(this.low_^e.low_,this.high_^e.high_)},r.math.Long.prototype.shiftLeft=function(e){if(e&=63,0==e)return this;var t=this.low_;if(e<32){var n=this.high_;return r.math.Long.fromBits(t<<e,n<<e|t>>>32-e)}return r.math.Long.fromBits(0,t<<e-32)},r.math.Long.prototype.shiftRight=function(e){if(e&=63,0==e)return this;var t=this.high_;if(e<32){var n=this.low_;return r.math.Long.fromBits(n>>>e|t<<32-e,t>>e)}return r.math.Long.fromBits(t>>e-32,t>=0?0:-1)},r.math.Long.prototype.shiftRightUnsigned=function(e){if(e&=63,0==e)return this;var t=this.high_;if(e<32){var n=this.low_;return r.math.Long.fromBits(n>>>e|t<<32-e,t>>>e)}return 32==e?r.math.Long.fromBits(t,0):r.math.Long.fromBits(t>>>e-32,0)},"undefined"==typeof g)var g={};function y(e){var t;for(t=[],i=0,len=e.length;i<len;i+=1)e[i].isRoot?t.push("root"):t.push(e[i].name);var n=function(e,t){var n;if(null!==e&&null!==t)for(n in e)e.hasOwnProperty(n)&&(t.hasOwnProperty(n)||(t[n]=e[n]))},r=function(e,t,r){var i,o,a,s,u;if(null!==e&&0!==e.length)for(i=0,o=e.length;i<o;i+=1)a=e[i],t.hasOwnProperty(a.name)&&(r.hasOwnProperty(a.name)?a.merge&&(s=t[a.name],u=r[a.name],"object"===typeof s&&"object"===typeof u?n(s,u):null!=a.mergeFunction?r[a.name]=a.mergeFunction(s,u):r[a.name]=s+u):r[a.name]=t[a.name])},o=function(e,t){var n,i,a,s,u,l,c,d=e;if(null!==d.children&&0!==d.children.length)for(n=0,i=d.children.length;n<i;n+=1)if(l=d.children[n],t.hasOwnProperty(l.name))if(l.isArray)for(u=t[l.name+"_asArray"],a=0,s=u.length;a<s;a+=1)c=u[a],r(d.properties,t,c),o(l,c);else c=t[l.name],r(d.properties,t,c),o(l,c)},a=function(n){var r,i,s,u,l,c,d;if(null===n)return n;if("object"!==typeof n)return n;for(r=0,i=t.length;r<i;r+=1)"root"===t[r]&&(l=e[r],c=n,o(l,c));for(u in n)if(n.hasOwnProperty(u)){if(s=t.indexOf(u),-1!==s)if(l=e[s],l.isArray)for(d=n[u+"_asArray"],r=0,i=d.length;r<i;r+=1)c=d[r],o(l,c);else c=n[u],o(l,c);a(n[u])}return n};return{run:a}}
/*!
 *
 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */function v(e,t,n){null!==t&&void 0!==t||(t="_"),null!==n&&void 0!==n||(n=!1);var r="1.0.11",i=!1,o={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function a(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function s(e){return e.prefix}function u(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):e}function l(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}function c(r){if(r.nodeType==o.DOCUMENT_NODE){var u,d,f=r.firstChild;for(u=0,d=r.childNodes.length;u<d;u+=1)if(r.childNodes[u].nodeType!==o.COMMENT_NODE){f=r.childNodes[u];break}if(n)p=c(f);else{p={};var h=a(f);p[h]=c(f)}return p}if(r.nodeType==o.ELEMENT_NODE){var p=new Object;p.__cnt=0;for(var m=r.childNodes,g=0;g<m.length;g++){f=m.item(g),h=a(f);if(p.__cnt++,null==p[h])p[h]=c(f),p[h+"_asArray"]=new Array(1),p[h+"_asArray"][0]=p[h];else{if(null!=p[h]&&!(p[h]instanceof Array)){var y=p[h];p[h]=new Array,p[h][0]=y,p[h+"_asArray"]=p[h]}var v=0;while(null!=p[h][v])v++;p[h][v]=c(f)}}for(var _=0;_<r.attributes.length;_++){var E=r.attributes.item(_);p.__cnt++;for(var b=E.value,T=0,S=e.length;T<S;T++){var w=e[T];w.test.call(this,E.value)&&(b=w.converter.call(this,E.value))}p[t+E.name]=b}var x=s(r);return null!=x&&""!=x&&(p.__cnt++,p.__prefix=x),1==p.__cnt&&null!=p["#text"]&&(p=p["#text"]),null!=p["#text"]&&(p.__text=p["#text"],i&&(p.__text=l(p.__text)),delete p["#text"],delete p["#text_asArray"]),null!=p["#cdata-section"]&&(p.__cdata=p["#cdata-section"],delete p["#cdata-section"],delete p["#cdata-section_asArray"]),null==p.__text&&null==p.__cdata||(p.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),p}return r.nodeType==o.TEXT_NODE||r.nodeType==o.CDATA_SECTION_NODE?r.nodeValue:r.nodeType==o.COMMENT_NODE?null:void 0}function d(e,t,n,r){var i="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=n)for(var o=0;o<n.length;o++){var a=n[o],s=e[a];i+=" "+a.substr(1)+"='"+s+"'"}return i+=r?"/>":">",i}function f(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function h(e,t){return-1!==e.indexOf(t,e.length-t.length)}function p(e,t){return!!(h(t.toString(),"_asArray")||0==t.toString().indexOf("_")||e[t]instanceof Function)}function m(e){var t=0;if(e instanceof Object)for(var n in e)p(e,n)||t++;return t}function g(e){var t=[];if(e instanceof Object)for(var n in e)-1==n.toString().indexOf("__")&&0==n.toString().indexOf("_")&&t.push(n);return t}function y(e){var t="";return null!=e.__cdata&&(t+="<![CDATA["+e.__cdata+"]]>"),null!=e.__text&&(t+=i?u(e.__text):e.__text),t}function v(e){var t="";return e instanceof Object?t+=y(e):null!=e&&(t+=i?u(e):e),t}function _(e,t,n){var r="";if(0==e.length)r+=d(e,t,n,!0);else for(var i=0;i<e.length;i++)r+=d(e[i],t,g(e[i]),!1),r+=E(e[i]),r+=f(e[i],t);return r}function E(e){var t="",n=m(e);if(n>0)for(var r in e)if(!p(e,r)){var i=e[r],o=g(i);if(null==i||void 0==i)t+=d(i,r,o,!0);else if(i instanceof Object)if(i instanceof Array)t+=_(i,r,o);else{var a=m(i);a>0||null!=i.__text||null!=i.__cdata?(t+=d(i,r,o,!1),t+=E(i),t+=f(i,r)):t+=d(i,r,o,!0)}else t+=d(i,r,o,!1),t+=v(i),t+=f(i,r)}return t+=v(e),t}this.parseXmlString=function(e){var t;if(window.DOMParser)try{var n=new window.DOMParser;if(t=n.parseFromString(e,"text/xml"),t.getElementsByTagName("parsererror").length>0)throw new Error("Error parsing XML")}catch(r){return null}return t},this.xml2json=function(e){return c(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null===t?t:this.xml2json(t)},this.json2xml_str=function(e){return E(e)},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return r},this.escapeMode=function(e){i=e}}"undefined"==typeof g.Math&&(g.Math={}),g.Math.to64BitNumber=function(e,t){var n,i,o;return n=new r.math.Long(0,t),i=new r.math.Long(e,0),o=n.add(i),o.toNumber()},function(e){t=e()}((function(){"use strict";var e,t,r=b(),i=function(){};function o(e){var t=Function.call;return function(){return t.apply(e,arguments)}}"undefined"!==typeof n?t=n.nextTick:"function"===typeof setImmediate?t="undefined"!==typeof window?setImmediate.bind(window):setImmediate:function(){var e,n={task:void 0,next:null},r=n,i=2,o=0,a=0,s=0;function u(){if(--o,++s>=i){s=0,i*=4;var t=a&&Math.min(a-1,i);while(o<t)++o,e()}while(a){--a,n=n.next;var r=n.task;n.task=void 0,r()}s=0}if(t=function(t){r=r.next={task:t,next:null},o<++a&&o<i&&(++o,e())},"undefined"!==typeof MessageChannel){var l=new MessageChannel;l.port1.onmessage=u,e=function(){l.port2.postMessage(0)}}else e=function(){setTimeout(u,0)}}();var a,s=o(Array.prototype.slice),u=o(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(1===arguments.length)do{if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}while(1);for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),l=o(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),c=o(Array.prototype.map||function(e,t){var n=this,r=[];return u(n,(function(i,o,a){r.push(e.call(t,o,a,n))}),void 0),r}),d=Object.create||function(e){function t(){}return t.prototype=e,new t},f=o(Object.prototype.hasOwnProperty),h=Object.keys||function(e){var t=[];for(var n in e)f(e,n)&&t.push(n);return t},p=o(Object.prototype.toString);function m(e){return"[object StopIteration]"===p(e)||e instanceof a}a="undefined"!==typeof ReturnValue?ReturnValue:function(e){this.value=e},T.longStackJumpLimit=1;var g="From previous event:";function y(e,t){t.stack&&"object"===typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(g)&&(e.stack=v(e.stack)+"\n"+g+"\n"+v(t.stack))}function v(e){for(var t=e.split("\n"),n=[],r=0;r<t.length;++r){var i=t[r];E(i)||_(i)||n.push(i)}return n.join("\n")}function _(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function E(t){var n=/at .+ \((.*):(\d+):\d+\)/.exec(t);if(!n)return!1;var i=n[1],o=n[2];return i===e&&o>=r&&o<=fe}function b(){if(Error.captureStackTrace){var t,n,r=Error.prepareStackTrace;return Error.prepareStackTrace=function(e,r){t=r[1].getFileName(),n=r[1].getLineNumber()},(new Error).stack,Error.prepareStackTrace=r,e=t,n}}function T(e){return F(e)}function S(){var e,n=[],r=[],i=d(S.prototype),o=d(x.prototype);function a(i){n&&(e=F(i),u(n,(function(n,r){t((function(){e.promiseDispatch.apply(e,r)}))}),void 0),n=void 0,r=void 0)}return o.promiseDispatch=function(i,o,a){var u=s(arguments);n?(n.push(u),"when"===o&&a[1]&&r.push(a[1])):t((function(){e.promiseDispatch.apply(e,u)}))},o.valueOf=function(){return n?o:(e=I(e),e)},Error.captureStackTrace&&T.longStackJumpLimit>0&&(Error.captureStackTrace(o,S),o.stack=o.stack.substring(o.stack.indexOf("\n")+1)),i.promise=o,i.resolve=a,i.fulfill=function(e){a(O(e))},i.reject=function(e){a(P(e))},i.notify=function(e){n&&u(r,(function(n,r){t((function(){r(e)}))}),void 0)},i}function w(e){var t=S();return X(e,t.resolve,t.reject,t.notify).fail(t.reject),t.promise}function x(e,t,n,r,i){void 0===t&&(t=function(e){return P(new Error("Promise does not support operation: "+e))});var o=d(x.prototype);return o.promiseDispatch=function(n,i,a){var s;try{s=e[i]?e[i].apply(o,a):t.call(o,i,a)}catch(r){s=P(r)}n&&n(s)},n&&(o.valueOf=n),i&&(o.exception=r),o}function I(e){return A(e)?e.valueOf():e}function A(e){return e&&"function"===typeof e.promiseDispatch}function D(e){return e&&"function"===typeof e.then}function R(e){return!M(e)&&!C(e)}function M(e){return!D(I(e))}function C(e){return e=I(e),A(e)&&"exception"in e}T.nextTick=t,T.defer=S,S.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(s(arguments,1)):e.resolve(n)}},T.promise=w,T.makePromise=x,x.prototype.then=function(e,t,n){return U(this,e,t,n)},x.prototype.thenResolve=function(e){return U(this,(function(){return e}))},u(["isFulfilled","isRejected","isPending","dispatch","when","spread","get","put","set","del","delete","post","send","invoke","keys","fapply","fcall","fbind","all","allResolved","timeout","delay","catch","finally","fail","fin","progress","done","nfcall","nfapply","nfbind","denodeify","nbind","ncall","napply","nbind","npost","nsend","ninvoke","nodeify"],(function(e,t){x.prototype[t]=function(){return T[t].apply(T,[this].concat(s(arguments)))}}),void 0),x.prototype.toSource=function(){return this.toString()},x.prototype.toString=function(){return"[object Promise]"},T.nearer=I,T.isPromise=A,T.isPromiseAlike=D,T.isPending=R,T.isFulfilled=M,T.isRejected=C;var N=[],L=[];function P(e){var t=x({when:function(t){if(t){var n=l(N,this);-1!==n&&(L.splice(n,1),N.splice(n,1))}return t?t(e):this}},(function(){return P(e)}),(function(){return this}),e,!0);return N.push(t),L.push(e),t}function O(e){return x({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},delete:function(t){delete e[t]},post:function(t,n){return null==t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return h(e)}},void 0,(function(){return e}))}function F(e){return A(e)?e:(e=I(e),D(e)?k(e):O(e))}function k(e){var n=S();return t((function(){try{e.then(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}})),n.promise}function B(e){return x({isDef:function(){}},(function(t,n){return q(e,t,n)}),(function(){return I(e)}))}function U(e,n,r,i){var o=S(),a=!1;function s(e){try{return"function"===typeof n?n(e):e}catch(t){return P(t)}}function u(e){if("function"===typeof r){y(e,c);try{return r(e)}catch(t){return P(t)}}return P(e)}function l(e){return"function"===typeof i?i(e):e}var c=F(e);return t((function(){c.promiseDispatch((function(e){a||(a=!0,o.resolve(s(e)))}),"when",[function(e){a||(a=!0,o.resolve(u(e)))}])})),c.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=l(e)}catch(r){if(n=!0,!T.onerror)throw r;T.onerror(r)}n||o.notify(t)}]),o.promise}function H(e,t,n){return U(e,(function(e){return Q(e).then((function(e){return t.apply(void 0,e)}),n)}),n)}function j(e){return function(){function t(e,t){var o;try{o=n[e](t)}catch(a){return m(a)?a.value:P(a)}return U(o,r,i)}var n=e.apply(this,arguments),r=t.bind(t,"send"),i=t.bind(t,"throw");return r()}}function K(e){throw new a(e)}function V(e){return function(){return H([this,Q(arguments)],(function(t,n){return e.apply(t,n)}))}}function q(e,n,r){var i=S();return t((function(){F(e).promiseDispatch(i.resolve,n,r)})),i.promise}function G(e){return function(t){var n=s(arguments,1);return q(t,e,n)}}"undefined"!==typeof n&&n.on&&n.on("exit",(function(){for(var e=0;e<L.length;e++){var t=L[e];t&&"undefined"!==typeof t.stack?console.warn("Unhandled rejected promise:",t.stack):console.warn("Unhandled rejected promise (no stack):",t)}})),T.reject=P,T.fulfill=O,T.resolve=F,T.master=B,T.when=U,T.spread=H,T.async=j,T["return"]=K,T.promised=V,T.dispatch=q,T.dispatcher=G,T.get=G("get"),T.set=G("set"),T["delete"]=T.del=G("delete");var Y=T.post=G("post");function z(e,t){var n=s(arguments,2);return Y(e,t,n)}function W(e,t){return q(e,"apply",[void 0,t])}function X(e){var t=s(arguments,1);return W(e,t)}function $(e){var t=s(arguments,1);return function(){var n=t.concat(s(arguments));return q(e,"apply",[this,n])}}function Q(e){return U(e,(function(e){var t=e.length;if(0===t)return F(e);var n=S();return u(e,(function(r,i,o){M(i)?(e[o]=I(i),0===--t&&n.resolve(e)):U(i,(function(r){e[o]=r,0===--t&&n.resolve(e)})).fail(n.reject)}),void 0),n.promise}))}function J(e){return U(e,(function(e){return e=c(e,F),U(Q(c(e,(function(e){return U(e,i,i)}))),(function(){return e}))}))}function Z(e,t){return U(e,void 0,t)}function ee(e,t){return U(e,void 0,void 0,t)}function te(e,t){return U(e,(function(e){return U(t(),(function(){return e}))}),(function(e){return U(t(),(function(){return P(e)}))}))}function ne(e,r,i,o){var a=function(n){t((function(){if(y(n,e),!T.onerror)throw n;T.onerror(n)}))},s=r||i||o?U(e,r,i,o):e;"object"===typeof n&&n&&n.domain&&(a=n.domain.bind(a)),Z(s,a)}function re(e,t){var n=S(),r=setTimeout((function(){n.reject(new Error("Timed out after "+t+" ms"))}),t);return U(e,(function(e){clearTimeout(r),n.resolve(e)}),(function(e){clearTimeout(r),n.reject(e)})),n.promise}function ie(e,t){void 0===t&&(t=e,e=void 0);var n=S();return setTimeout((function(){n.resolve(e)}),t),n.promise}function oe(e,t){var n=s(t),r=S();return n.push(r.makeNodeResolver()),W(e,n).fail(r.reject),r.promise}function ae(e){var t=s(arguments,1),n=S();return t.push(n.makeNodeResolver()),W(e,t).fail(n.reject),n.promise}function se(e){var t=s(arguments,1);return function(){var n=t.concat(s(arguments)),r=S();return n.push(r.makeNodeResolver()),W(e,n).fail(r.reject),r.promise}}function ue(e){var t=s(arguments,1);return function(){var n=t.concat(s(arguments)),r=S();n.push(r.makeNodeResolver());var i=this;function o(){return e.apply(i,arguments)}return W(o,n).fail(r.reject),r.promise}}function le(e,t,n){var r=s(n||[]),i=S();return r.push(i.makeNodeResolver()),Y(e,t,r).fail(i.reject),i.promise}function ce(e,t){var n=s(arguments,2),r=S();return n.push(r.makeNodeResolver()),Y(e,t,n).fail(r.reject),r.promise}function de(e,n){if(!n)return e;e.then((function(e){t((function(){n(null,e)}))}),(function(e){t((function(){n(e)}))}))}T.send=z,T.invoke=z,T.fapply=W,T["try"]=X,T.fcall=X,T.fbind=$,T.keys=G("keys"),T.all=Q,T.allResolved=J,T["catch"]=T.fail=Z,T.progress=ee,T["finally"]=T.fin=te,T.done=ne,T.timeout=re,T.delay=ie,T.nfapply=oe,T.nfcall=ae,T.nfbind=se,T.denodeify=T.nfbind,T.nbind=ue,T.npost=le,T.nsend=ce,T.ninvoke=T.nsend,T.nodeify=de;var fe=b();return T}));var _=function(){var e={boxes:{},fields:{},debug:!1,warningHandler:function(e){}},t={};return e.registerTypeBoxes=function(){t["moov"]=e.boxes.MovieBox,t["moof"]=e.boxes.MovieFragmentBox,t["ftyp"]=e.boxes.FileTypeBox,t["mfhd"]=e.boxes.MovieFragmentHeaderBox,t["mfra"]=e.boxes.MovieFragmentRandomAccessBox,t["udta"]=e.boxes.UserDataBox,t["trak"]=e.boxes.TrackBox,t["edts"]=e.boxes.EditBox,t["mdia"]=e.boxes.MediaBox,t["minf"]=e.boxes.MediaInformationBox,t["dinf"]=e.boxes.DataInformationBox,t["stbl"]=e.boxes.SampleTableBox,t["mvex"]=e.boxes.MovieExtendsBox,t["traf"]=e.boxes.TrackFragmentBox,t["meta"]=e.boxes.MetaBox,t["mvhd"]=e.boxes.MovieHeaderBox,t["mdat"]=e.boxes.MediaDataBox,t["free"]=e.boxes.FreeSpaceBox,t["sidx"]=e.boxes.SegmentIndexBox,t["tkhd"]=e.boxes.TrackHeaderBox,t["mdhd"]=e.boxes.MediaHeaderBox,t["mehd"]=e.boxes.MovieExtendsHeaderBox,t["hdlr"]=e.boxes.HandlerBox,t["stts"]=e.boxes.TimeToSampleBox,t["stsc"]=e.boxes.SampleToChunkBox,t["stco"]=e.boxes.ChunkOffsetBox,t["trex"]=e.boxes.TrackExtendsBox,t["vmhd"]=e.boxes.VideoMediaHeaderBox,t["smhd"]=e.boxes.SoundMediaHeaderBox,t["dref"]=e.boxes.DataReferenceBox,t["url "]=e.boxes.DataEntryUrlBox,t["urn "]=e.boxes.DataEntryUrnBox,t["tfhd"]=e.boxes.TrackFragmentHeaderBox,t["tfdt"]=e.boxes.TrackFragmentBaseMediaDecodeTimeBox,t["trun"]=e.boxes.TrackFragmentRunBox,t["stsd"]=e.boxes.SampleDescriptionBox,t["sdtp"]=e.boxes.SampleDependencyTableBox,t["avc1"]=e.boxes.AVC1VisualSampleEntryBox,t["encv"]=e.boxes.EncryptedVideoBox,t["avcC"]=e.boxes.AVCConfigurationBox,t["pasp"]=e.boxes.PixelAspectRatioBox,t["mp4a"]=e.boxes.MP4AudioSampleEntryBox,t["enca"]=e.boxes.EncryptedAudioBox,t["esds"]=e.boxes.ESDBox,t["stsz"]=e.boxes.SampleSizeBox,t["pssh"]=e.boxes.ProtectionSystemSpecificHeaderBox,t["senc"]=e.boxes.SampleEncryptionBox,t["saiz"]=e.boxes.SampleAuxiliaryInformationSizesBox,t["saio"]=e.boxes.SampleAuxiliaryInformationOffsetsBox,t["sinf"]=e.boxes.ProtectionSchemeInformationBox,t["schi"]=e.boxes.SchemeInformationBox,t["tenc"]=e.boxes.TrackEncryptionBox,t["schm"]=e.boxes.SchemeTypeBox,t["elst"]=e.boxes.EditListBox,t["hmhd"]=e.boxes.HintMediaHeaderBox,t["nmhd"]=e.boxes.NullMediaHeaderBox,t["ctts"]=e.boxes.CompositionOffsetBox,t["cslg"]=e.boxes.CompositionToDecodeBox,t["stss"]=e.boxes.SyncSampleBox,t["tref"]=e.boxes.TrackReferenceBox,t["frma"]=e.boxes.OriginalFormatBox,t["subs"]=e.boxes.SubSampleInformationBox,t[JSON.stringify([109,29,155,5,66,213,68,230,128,226,20,29,175,247,87,178])]=e.boxes.TfxdBox,t[JSON.stringify([212,128,126,242,202,57,70,149,142,84,38,203,158,70,167,159])]=e.boxes.TfrfBox,t[JSON.stringify([208,138,79,24,16,243,74,130,182,200,50,216,171,161,131,211])]=e.boxes.PiffProtectionSystemSpecificHeaderBox,t[JSON.stringify([137,116,219,206,123,231,76,81,132,249,113,72,249,136,37,84])]=e.boxes.PiffTrackEncryptionBox,t[JSON.stringify([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244])]=e.boxes.PiffSampleEncryptionBox},e.constructorTypeBox=function(e){var t,n;return t=Object.create(e.prototype),n=Array.prototype.slice.call(arguments,1),e.apply(t,n),t},e.searchBox=function(n,r){var i;return i=r?t[r]:t[n],i||(i=e.boxes.UnknownBox),i},e.createBox=function(t,n,r){return e.constructorTypeBox.apply(null,[e.searchBox(t,r),n])},e.deserialize=function(t){var n=new e.boxes.File;try{n.read(t)}catch(r){return e.warningHandler(r.message),null}return n},e.serialize=function(e){var t=e.getLength(),n=new Uint8Array(t);return e.write(n),n},e.ParseException=function(e){this.message=e,this.name="ParseException"},e.DataIntegrityException=function(e){this.message=e,this.name="DataIntegrityException"},e}();"undefined"!==typeof e.exports?e.exports=_:window.mp4lib=_,_.fields.readBytes=function(e,t,n){var r=0,i=0;for(i=0;i<n;i++)r<<=8,r+=e[t],t++;return r},_.fields.writeBytes=function(e,t,n,r){var i=0;for(i=0;i<n;i++)e[t+n-i-1]=255&r,r>>=8},_.fields.readString=function(e,t,n){var r,i="";for(r=t;r<t+n;r++)i+=String.fromCharCode(e[r]);return i},_.fields.NumberField=function(e,t){this.bits=e,this.signed=t},_.fields.NumberField.prototype.read=function(e,t){return _.fields.readBytes(e,t,this.bits/8)},_.fields.NumberField.prototype.write=function(e,t,n){_.fields.writeBytes(e,t,this.bits/8,n)},_.fields.NumberField.prototype.getLength=function(){return this.bits/8},_.fields.LongNumberField=function(){},_.fields.LongNumberField.prototype.read=function(e,t){var n=_.fields.readBytes(e,t,4),i=_.fields.readBytes(e,t+4,4);return r.math.Long.fromBits(i,n)},_.fields.LongNumberField.prototype.write=function(e,t,n){var i="function"===typeof n.getLowBits?n:r.math.Long.fromNumber(n),o=i.getLowBits(),a=i.getHighBits();_.fields.writeBytes(e,t,4,a),_.fields.writeBytes(e,t+4,4,o)},_.fields.LongNumberField.prototype.getLength=function(){return 8},_.fields.FixedLenStringField=function(e){this.size=e},_.fields.FixedLenStringField.prototype.read=function(e,t){var n="",r=0;for(r=0;r<this.size;r++)n+=String.fromCharCode(e[t+r]);return n},_.fields.FixedLenStringField.prototype.write=function(e,t,n){var r=0;for(r=0;r<this.size;r++)e[t+r]=n.charCodeAt(r)},_.fields.FixedLenStringField.prototype.getLength=function(){return this.size},_.fields.BoxTypeField=function(){},_.fields.BoxTypeField.prototype.read=function(e,t){var n="",r=0;for(r=0;r<4;r++)n+=String.fromCharCode(e[t+r]);return n},_.fields.BoxTypeField.prototype.write=function(e,t,n){var r=0;for(r=0;r<4;r++)e[t+r]=n.charCodeAt(r)},_.fields.BoxTypeField.prototype.getLength=function(){return 4},_.fields.StringField=function(){},_.fields.StringField.prototype.read=function(e,t,n){var r="",i=0;for(i=t;i<n;i++)if(r+=String.fromCharCode(e[i]),0===e[i])return r;if(n-t<255&&e[0]==String.fromCharCode(n-t))return r=r.substr(1,n-t),_.warningHandler('null-terminated string expected, but found a string "'+r+'", which seems to be length-prefixed instead. Conversion done.'),r;throw new _.ParseException('expected null-terminated string, but end of field reached without termination. Read so far:"'+r+'"')},_.fields.StringField.prototype.write=function(e,t,n){var r=0;for(r=0;r<n.length;r++)e[t+r]=n.charCodeAt(r);e[t+n.length]=0},_.fields.StringField.prototype.getLength=function(e){return e.length},_.fields.ArrayField=function(e,t){this.innerField=e,this.size=t},_.fields.ArrayField.prototype.read=function(e,t){var n=-1,r=[],i=0;for(i=0;i<this.size;i++)r.push(this.innerField.read(e,t)),-1==n&&(n=this.innerField.getLength(r[i])),t+=n;return r},_.fields.FIELD_INT8=new _.fields.NumberField(8,!0),_.fields.FIELD_INT16=new _.fields.NumberField(16,!0),_.fields.FIELD_INT32=new _.fields.NumberField(32,!0),_.fields.FIELD_INT64=new _.fields.LongNumberField,_.fields.FIELD_UINT8=new _.fields.NumberField(8,!1),_.fields.FIELD_UINT16=new _.fields.NumberField(16,!1),_.fields.FIELD_UINT32=new _.fields.NumberField(32,!1),_.fields.FIELD_UINT64=new _.fields.LongNumberField,_.fields.FIELD_BIT8=new _.fields.NumberField(8,!1),_.fields.FIELD_BIT16=new _.fields.NumberField(16,!1),_.fields.FIELD_BIT24=new _.fields.NumberField(24,!1),_.fields.FIELD_BIT32=new _.fields.NumberField(32,!1),_.fields.FIELD_ID=new _.fields.BoxTypeField(4),_.fields.FIELD_STRING=new _.fields.StringField,_.boxes.File=function(){this.boxes=[]},_.boxes.File.prototype.getBoxByType=function(e){var t=0;for(t=0;t<this.boxes.length;t++)if(this.boxes[t].boxtype===e)return this.boxes[t];return null},_.boxes.File.prototype.getLength=function(){var e=0,t=0;for(t=0;t<this.boxes.length;t++)this.boxes[t].computeLength(),e+=this.boxes[t].size;return e},_.boxes.File.prototype.write=function(e){var t=0,n=0;for(n=0;n<this.boxes.length;n++)t=this.boxes[n].write(e,t)},_.boxes.File.prototype.read=function(e){var t,n=0,r=null,i=0,o=null,a=0,s=e.length;while(a<s)if(n=_.fields.FIELD_UINT32.read(e,a),r=_.fields.readString(e,a+4,4),"uuid"==r&&(i=1==n?16:8,o=new _.fields.ArrayField(_.fields.FIELD_INT8,16).read(e,a+i,a+i+16),o=JSON.stringify(o)),t=_.createBox(r,n,o),"uuid"===r?(a=t.read(e,a+16*_.fields.FIELD_INT8.getLength()+8,a+n),o=null):a=t.read(e,a+8,a+n),_.debug&&(t.__sourceBuffer=e.subarray(a-t.size,a)),t.boxtype&&this.boxes.push(t),t.size<=0||null===t.size)throw new _.ParseException("Problem on size of box "+t.boxtype+", parsing stopped to avoid infinite loop")},_.boxes.File.prototype.getBoxOffsetByType=function(e){var t=0,n=0;for(n=0;n<this.boxes.length;n++){if(this.boxes[n].boxtype===e)return t;t+=this.boxes[n].size}return-1},_.boxes.File.prototype.getBoxIndexByType=function(e){var t=0,n=0;for(n=0;n<this.boxes.length;n++){if(this.boxes[n].boxtype===e)return t;t++}return-1},_.boxes.Box=function(e,t,n,r){this.size=t||null,this.boxtype=e,1===this.size&&r&&(this.largesize=r),n&&(this.extended_type=n),this.localPos=0,this.localEnd=0},_.boxes.Box.prototype.write=function(e,t){this.localPos=t;var n=0;if(this._writeData(e,_.fields.FIELD_UINT32,this.size),this.extended_type?this._writeData(e,_.fields.FIELD_ID,"uuid"):this._writeData(e,_.fields.FIELD_ID,this.boxtype),1===this.size&&this._writeData(e,_.fields.FIELD_INT64,this.largesize),this.extended_type)for(n=0;n<16;n++)this._writeData(e,_.fields.FIELD_INT8,this.extended_type[n])},_.boxes.Box.prototype.getBoxByType=function(e){var t=0;if(this.hasOwnProperty("boxes"))for(t=0;t<this.boxes.length;t++)if(this.boxes[t].boxtype===e)return this.boxes[t];return null},_.boxes.Box.prototype.getBoxesByType=function(e){var t=[],n=0;if(this.hasOwnProperty("boxes"))for(n=0;n<this.boxes.length;n++)this.boxes[n].boxtype===e&&t.push(this.boxes[n]);return t},_.boxes.Box.prototype.removeBoxByType=function(e){var t=0;if(this.hasOwnProperty("boxes"))for(t=0;t<this.boxes.length;t++)this.boxes[t].boxtype===e&&this.boxes.splice(t,1);else _.warningHandler(this.boxtype+"does not have "+e+" box, impossible to remove it")},_.boxes.Box.prototype.getBoxOffsetByType=function(e){var t=8,n=0;if(this.hasOwnProperty("boxes"))for(n=0;n<this.boxes.length;n++){if(this.boxes[n].boxtype===e)return t;t+=this.boxes[n].size}return null},_.boxes.Box.prototype.getBoxIndexByType=function(e){var t=0,n=0;if(this.hasOwnProperty("boxes"))for(n=0;n<this.boxes.length;n++){if(this.boxes[n].boxtype===e)return t;t++}return null},_.boxes.Box.prototype.computeLength=function(){this.size=_.fields.FIELD_UINT32.getLength()+_.fields.FIELD_ID.getLength(),this.extended_type&&(this.size+=16*_.fields.FIELD_INT8.getLength())},_.boxes.Box.prototype._readData=function(e,t){var n=t.read(e,this.localPos,this.localEnd);return this.localPos+=t.getLength(n),n},_.boxes.Box.prototype._writeData=function(e,t,n){if(void 0===n||null===n)throw new _.ParseException("a field to write is null or undefined for box : "+this.boxtype);t.write(e,this.localPos,n),this.localPos+=t.getLength(n)},_.boxes.Box.prototype._writeBuffer=function(e,t,n){e.set(t,this.localPos),this.localPos+=n},_.boxes.Box.prototype._writeArrayData=function(e,t,n){var r=0;if(void 0===n||null===n||0===n.length)throw new _.ParseException("an array to write is null, undefined or length = 0 for box : "+this.boxtype);for(r=0;r<n.length;r++)this._writeData(e,t,n[r])},_.boxes.Box.prototype._readArrayData=function(e,t){var n=[],r=t.getLength(),i=(this.localEnd-this.localPos)/r,o=0;for(o=0;o<i;o++)n.push(t.read(e,this.localPos)),this.localPos+=r;return n},_.boxes.Box.prototype._readArrayFieldData=function(e,t,n){var r=-1,i=[],o=0;for(o=0;o<n;o++)i.push(t.read(e,this.localPos)),-1===r&&(r=t.getLength(i[o])),this.localPos+=r;return i},_.boxes.ContainerBox=function(e,t){_.boxes.Box.call(this,e,t),this.boxes=[]},_.boxes.ContainerBox.prototype=Object.create(_.boxes.Box.prototype),_.boxes.ContainerBox.prototype.constructor=_.boxes.ContainerBox,_.boxes.ContainerBox.prototype.computeLength=function(){_.boxes.Box.prototype.computeLength.call(this);var e=0;for(e=0;e<this.boxes.length;e++)this.boxes[e].computeLength(),this.size+=this.boxes[e].size},_.boxes.ContainerBox.prototype.write=function(e,t){_.boxes.Box.prototype.write.call(this,e,t);var n=0;for(n=0;n<this.boxes.length;n++)this.localPos=this.boxes[n].write(e,this.localPos);return this.localPos},_.boxes.ContainerBox.prototype.read=function(e,t,n){var r,i,o=0,a=0,s=null;while(t<n)if(o=_.fields.FIELD_UINT32.read(e,t),r=_.fields.readString(e,t+4,4),"uuid"===r&&(a=1==o?16:8,s=new _.fields.ArrayField(_.fields.FIELD_INT8,16).read(e,t+a,t+a+16),s=JSON.stringify(s)),i=_.createBox(r,o,s),"uuid"===r?(t=i.read(e,t+16*_.fields.FIELD_INT8.getLength()+8,t+o),s=null):t=i.read(e,t+8,t+o),_.debug&&(i.__sourceBuffer=e.subarray(t-i.size,t)),i.boxtype&&this.boxes.push(i),i.size<=0||null===i.size)throw new _.ParseException("Problem on size of box "+i.boxtype+", parsing stopped to avoid infinite loop");return t},_.boxes.FullBox=function(e,t,n){_.boxes.Box.call(this,e,t,n),this.version=null,this.flags=null},_.boxes.FullBox.prototype=Object.create(_.boxes.Box.prototype),_.boxes.FullBox.prototype.constructor=_.boxes.FullBox,_.boxes.FullBox.prototype.read=function(e,t,n){this.localPos=t,this.localEnd=n,this.version=this._readData(e,_.fields.FIELD_INT8),this.flags=this._readData(e,_.fields.FIELD_BIT24)},_.boxes.FullBox.prototype.write=function(e,t){_.boxes.Box.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_INT8,this.version),this._writeData(e,_.fields.FIELD_BIT24,this.flags)},_.boxes.FullBox.prototype.getFullBoxAttributesLength=function(){this.size+=_.fields.FIELD_INT8.getLength()+_.fields.FIELD_BIT24.getLength()},_.boxes.FullBox.prototype.computeLength=function(){_.boxes.Box.prototype.computeLength.call(this),_.boxes.FullBox.prototype.getFullBoxAttributesLength.call(this)},_.boxes.ContainerFullBox=function(e,t){_.boxes.FullBox.call(this,e,t),this.boxes=[]},_.boxes.ContainerFullBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.ContainerFullBox.prototype.constructor=_.boxes.ContainerFullBox,_.boxes.ContainerFullBox.prototype.computeLength=function(e){_.boxes.FullBox.prototype.computeLength.call(this);var t=0;for(e&&(this.size+=_.fields.FIELD_UINT32.getLength()),t=0;t<this.boxes.length;t++)this.boxes[t].computeLength(),this.size+=this.boxes[t].size},_.boxes.ContainerFullBox.prototype.read=function(e,t,n,r){_.boxes.FullBox.prototype.read.call(this,e,t,n);var i,o,a=0,s=0,u=null;r&&(this.entry_count=this._readData(e,_.fields.FIELD_UINT32));while(this.localPos<this.localEnd)if(a=_.fields.FIELD_UINT32.read(e,this.localPos),i=_.fields.readString(e,this.localPos+4,4),"uuid"==i&&(s=1==a?16:8,u=new _.fields.ArrayField(_.fields.FIELD_INT8,16).read(e,this.localPos+s,this.localPos+s+16),u=JSON.stringify(u)),o=_.createBox(i,a,u),"uuid"===i?(this.localPos=o.read(e,this.localPos+16*_.fields.FIELD_INT8.getLength()+8,this.localPos+a),u=null):this.localPos=o.read(e,this.localPos+8,this.localPos+a),_.debug&&(o.__sourceBuffer=e.subarray(this.localPos-o.size,this.localPos)),o.boxtype&&this.boxes.push(o),o.size<=0||null===o.size)throw new _.ParseException("Problem on size of box "+o.boxtype+", parsing stopped to avoid infinite loop");return this.localPos},_.boxes.ContainerFullBox.prototype.write=function(e,t,n){_.boxes.FullBox.prototype.write.call(this,e,t);var r=0;for(!0===n&&this._writeData(e,_.fields.FIELD_UINT32,this.entry_count),r=0;r<this.boxes.length;r++)this.localPos=this.boxes[r].write(e,this.localPos);return this.localPos},_.boxes.UnknownBox=function(e){_.boxes.Box.call(this,null,e)},_.boxes.UnknownBox.prototype=Object.create(_.boxes.Box.prototype),_.boxes.UnknownBox.prototype.constructor=_.boxes.UnknownBox,_.boxes.UnknownBox.prototype.read=function(e,t,n){return this.localPos=t,this.localEnd=n,this.unrecognized_data=e.subarray(this.localPos,this.localEnd),this.localEnd},_.boxes.UnknownBox.prototype.write=function(e,t){return _.boxes.Box.prototype.write.call(this,e,t),this._writeBuffer(e,this.unrecognized_data,this.unrecognized_data.length),this.localPos},_.boxes.UnknownBox.prototype.computeLength=function(){_.boxes.Box.prototype.computeLength.call(this),this.size+=this.unrecognized_data.length},_.boxes.FileTypeBox=function(e){_.boxes.Box.call(this,"ftyp",e)},_.boxes.FileTypeBox.prototype=Object.create(_.boxes.Box.prototype),_.boxes.FileTypeBox.prototype.constructor=_.boxes.FileTypeBox,_.boxes.FileTypeBox.prototype.computeLength=function(){_.boxes.Box.prototype.computeLength.call(this),this.size+=2*_.fields.FIELD_INT32.getLength()+_.fields.FIELD_INT32.getLength()*this.compatible_brands.length},_.boxes.FileTypeBox.prototype.read=function(e,t,n){return this.localPos=t,this.localEnd=n,this.major_brand=this._readData(e,_.fields.FIELD_INT32),this.minor_brand=this._readData(e,_.fields.FIELD_INT32),this.compatible_brands=this._readArrayData(e,_.fields.FIELD_INT32),this.localPos},_.boxes.FileTypeBox.prototype.write=function(e,t){return _.boxes.Box.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_INT32,this.major_brand),this._writeData(e,_.fields.FIELD_INT32,this.minor_brand),this._writeArrayData(e,_.fields.FIELD_INT32,this.compatible_brands),this.localPos},_.boxes.MovieBox=function(e){_.boxes.ContainerBox.call(this,"moov",e)},_.boxes.MovieBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.MovieBox.prototype.constructor=_.boxes.MovieBox,_.boxes.MovieFragmentBox=function(e){_.boxes.ContainerBox.call(this,"moof",e)},_.boxes.MovieFragmentBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.MovieFragmentBox.prototype.constructor=_.boxes.MovieFragmentBox,_.boxes.MovieFragmentRandomAccessBox=function(e){_.boxes.ContainerBox.call(this,"mfra",e)},_.boxes.MovieFragmentRandomAccessBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.MovieFragmentRandomAccessBox.prototype.constructor=_.boxes.MovieFragmentRandomAccessBox,_.boxes.UserDataBox=function(e){_.boxes.ContainerBox.call(this,"udta",e)},_.boxes.UserDataBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.UserDataBox.prototype.constructor=_.boxes.UserDataBox,_.boxes.TrackBox=function(e){_.boxes.ContainerBox.call(this,"trak",e)},_.boxes.TrackBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.TrackBox.prototype.constructor=_.boxes.TrackBox,_.boxes.EditBox=function(e){_.boxes.ContainerBox.call(this,"edts",e)},_.boxes.EditBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.EditBox.prototype.constructor=_.boxes.EditBox,_.boxes.MediaBox=function(e){_.boxes.ContainerBox.call(this,"mdia",e)},_.boxes.MediaBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.MediaBox.prototype.constructor=_.boxes.MediaBox,_.boxes.MediaInformationBox=function(e){_.boxes.ContainerBox.call(this,"minf",e)},_.boxes.MediaInformationBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.MediaInformationBox.prototype.constructor=_.boxes.MediaInformationBox,_.boxes.DataInformationBox=function(e){_.boxes.ContainerBox.call(this,"dinf",e)},_.boxes.DataInformationBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.DataInformationBox.prototype.constructor=_.boxes.DataInformationBox,_.boxes.SampleTableBox=function(e){_.boxes.ContainerBox.call(this,"stbl",e)},_.boxes.SampleTableBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.SampleTableBox.prototype.constructor=_.boxes.SampleTableBox,_.boxes.MovieExtendsBox=function(e){_.boxes.ContainerBox.call(this,"mvex",e)},_.boxes.MovieExtendsBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.MovieExtendsBox.prototype.constructor=_.boxes.MovieExtendsBox,_.boxes.TrackFragmentBox=function(e){_.boxes.ContainerBox.call(this,"traf",e)},_.boxes.TrackFragmentBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.TrackFragmentBox.prototype.constructor=_.boxes.TrackFragmentBox,_.boxes.MetaBox=function(e){_.boxes.ContainerFullBox.call(this,"meta",e)},_.boxes.MetaBox.prototype=Object.create(_.boxes.ContainerFullBox.prototype),_.boxes.MetaBox.prototype.constructor=_.boxes.MetaBox,_.boxes.MetaBox.prototype.computeLength=function(){_.boxes.ContainerFullBox.prototype.computeLength.call(this,!1)},_.boxes.MetaBox.prototype.read=function(e,t,n){return _.boxes.ContainerFullBox.prototype.read.call(this,e,t,n,!1)},_.boxes.MetaBox.prototype.write=function(e,t){return _.boxes.ContainerFullBox.prototype.write.call(this,e,t,!1)},_.boxes.MovieHeaderBox=function(e){_.boxes.FullBox.call(this,"mvhd",e)},_.boxes.MovieHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.MovieHeaderBox.prototype.constructor=_.boxes.MovieHeaderBox,_.boxes.MovieHeaderBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_INT32.getLength()+2*_.fields.FIELD_INT16.getLength(),this.size+=2*_.fields.FIELD_INT32.getLength()+9*_.fields.FIELD_INT32.getLength(),this.size+=6*_.fields.FIELD_BIT32.getLength()+_.fields.FIELD_UINT32.getLength(),1===this.version?this.size+=3*_.fields.FIELD_UINT64.getLength()+_.fields.FIELD_UINT32.getLength():this.size+=4*_.fields.FIELD_UINT32.getLength()},_.boxes.MovieHeaderBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),1===this.version?(this._writeData(e,_.fields.FIELD_UINT64,this.creation_time),this._writeData(e,_.fields.FIELD_UINT64,this.modification_time),this._writeData(e,_.fields.FIELD_UINT32,this.timescale),this._writeData(e,_.fields.FIELD_UINT64,this.duration)):(this._writeData(e,_.fields.FIELD_UINT32,this.creation_time),this._writeData(e,_.fields.FIELD_UINT32,this.modification_time),this._writeData(e,_.fields.FIELD_UINT32,this.timescale),this._writeData(e,_.fields.FIELD_UINT32,this.duration)),this._writeData(e,_.fields.FIELD_INT32,this.rate),this._writeData(e,_.fields.FIELD_INT16,this.volume),this._writeData(e,_.fields.FIELD_INT16,this.reserved),this._writeArrayData(e,_.fields.FIELD_INT32,this.reserved_2),this._writeArrayData(e,_.fields.FIELD_INT32,this.matrix),this._writeArrayData(e,_.fields.FIELD_BIT32,this.pre_defined),this._writeData(e,_.fields.FIELD_UINT32,this.next_track_ID),this.localPos},_.boxes.MovieHeaderBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),1==this.version?(this.creation_time=this._readData(e,_.fields.FIELD_UINT64),this.modification_time=this._readData(e,_.fields.FIELD_UINT64),this.timescale=this._readData(e,_.fields.FIELD_UINT32),this.duration=this._readData(e,_.fields.FIELD_UINT64)):(this.creation_time=this._readData(e,_.fields.FIELD_UINT32),this.modification_time=this._readData(e,_.fields.FIELD_UINT32),this.timescale=this._readData(e,_.fields.FIELD_UINT32),this.duration=this._readData(e,_.fields.FIELD_UINT32)),this.rate=this._readData(e,_.fields.FIELD_INT32),this.volume=this._readData(e,_.fields.FIELD_INT16),this.reserved=this._readData(e,_.fields.FIELD_INT16),this.reserved_2=this._readArrayFieldData(e,_.fields.FIELD_INT32,2),this.matrix=this._readArrayFieldData(e,_.fields.FIELD_INT32,9),this.pre_defined=this._readArrayFieldData(e,_.fields.FIELD_BIT32,6),this.next_track_ID=this._readData(e,_.fields.FIELD_UINT32),this.localPos},_.boxes.MediaDataBox=function(e){_.boxes.Box.call(this,"mdat",e)},_.boxes.MediaDataBox.prototype=Object.create(_.boxes.Box.prototype),_.boxes.MediaDataBox.prototype.constructor=_.boxes.MediaDataBox,_.boxes.MediaDataBox.prototype.computeLength=function(){_.boxes.Box.prototype.computeLength.call(this),this.size+=this.data.length},_.boxes.MediaDataBox.prototype.read=function(e,t,n){return this.data=e.subarray(t,n),n},_.boxes.MediaDataBox.prototype.write=function(e,t){return _.boxes.Box.prototype.write.call(this,e,t),this._writeBuffer(e,this.data,this.data.length),this.localPos},_.boxes.FreeSpaceBox=function(e){_.boxes.Box.call(this,"free",e)},_.boxes.FreeSpaceBox.prototype=Object.create(_.boxes.Box.prototype),_.boxes.FreeSpaceBox.prototype.constructor=_.boxes.FreeSpaceBox,_.boxes.FreeSpaceBox.prototype.computeLength=function(){_.boxes.Box.prototype.computeLength.call(this),this.size+=this.data.length},_.boxes.FreeSpaceBox.prototype.read=function(e,t,n){return this.localPos=t,this.localEnd=n,this.data=e.subarray(this.localPos,this.localEnd),this.localEnd},_.boxes.FreeSpaceBox.prototype.write=function(e,t){return _.boxes.Box.prototype.write.call(this,e,t),this._writeBuffer(e,this.data,this.data.length),this.localPos},_.boxes.SegmentIndexBox=function(e){_.boxes.FullBox.call(this,"sidx",e)},_.boxes.SegmentIndexBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SegmentIndexBox.prototype.constructor=_.boxes.SegmentIndexBox,_.boxes.SegmentIndexBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=2*_.fields.FIELD_UINT32.getLength(),1===this.version?this.size+=2*_.fields.FIELD_UINT64.getLength():this.size+=2*_.fields.FIELD_UINT32.getLength(),this.size+=_.fields.FIELD_UINT16.getLength(),this.size+=_.fields.FIELD_UINT16.getLength(),this.size+=(_.fields.FIELD_UINT64.getLength()+_.fields.FIELD_UINT32.getLength())*this.reference_count},_.boxes.SegmentIndexBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i={};for(this.reference_ID=this._readData(e,_.fields.FIELD_UINT32),this.timescale=this._readData(e,_.fields.FIELD_UINT32),1===this.version?(this.earliest_presentation_time=this._readData(e,_.fields.FIELD_UINT64),this.first_offset=this._readData(e,_.fields.FIELD_UINT64)):(this.earliest_presentation_time=this._readData(e,_.fields.FIELD_UINT32),this.first_offset=this._readData(e,_.fields.FIELD_UINT32)),this.reserved=this._readData(e,_.fields.FIELD_UINT16),this.reference_count=this._readData(e,_.fields.FIELD_UINT16),this.references=[],r=0;r<this.reference_count;r++)i={},i.reference_info=this._readData(e,_.fields.FIELD_UINT64),i.SAP=this._readData(e,_.fields.FIELD_UINT32),this.references.push(i);return this.localPos},_.boxes.SegmentIndexBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.reference_ID),this._writeData(e,_.fields.FIELD_UINT32,this.timescale),1===this.version?(this._writeData(e,_.fields.FIELD_UINT64,this.earliest_presentation_time),this._writeData(e,_.fields.FIELD_UINT64,this.first_offset)):(this._writeData(e,_.fields.FIELD_UINT32,this.earliest_presentation_time),this._writeData(e,_.fields.FIELD_UINT32,this.first_offset)),this._writeData(e,_.fields.FIELD_UINT16,this.reserved),this._writeData(e,_.fields.FIELD_UINT16,this.reference_count),n=0;n<this.reference_count;n++)this._writeData(e,_.fields.FIELD_UINT64,this.references[n].reference_info),this._writeData(e,_.fields.FIELD_UINT32,this.references[n].SAP);return this.localPos},_.boxes.TrackHeaderBox=function(e){_.boxes.FullBox.call(this,"tkhd",e)},_.boxes.TrackHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.TrackHeaderBox.prototype.constructor=_.boxes.TrackHeaderBox,_.boxes.TrackHeaderBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=4*_.fields.FIELD_INT16.getLength()+2*_.fields.FIELD_INT32.getLength()+2*_.fields.FIELD_UINT32.getLength()+9*_.fields.FIELD_INT32.getLength(),1==this.version?this.size+=3*_.fields.FIELD_UINT64.getLength()+2*_.fields.FIELD_UINT32.getLength():this.size+=5*_.fields.FIELD_UINT32.getLength()},_.boxes.TrackHeaderBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),1===this.version?(this.creation_time=this._readData(e,_.fields.FIELD_UINT64),this.modification_time=this._readData(e,_.fields.FIELD_UINT64),this.track_id=this._readData(e,_.fields.FIELD_UINT32),this.reserved=this._readData(e,_.fields.FIELD_UINT32),this.duration=this._readData(e,_.fields.FIELD_UINT64)):(this.creation_time=this._readData(e,_.fields.FIELD_UINT32),this.modification_time=this._readData(e,_.fields.FIELD_UINT32),this.track_id=this._readData(e,_.fields.FIELD_UINT32),this.reserved=this._readData(e,_.fields.FIELD_UINT32),this.duration=this._readData(e,_.fields.FIELD_UINT32)),this.reserved_2=this._readArrayFieldData(e,_.fields.FIELD_UINT32,2),this.layer=this._readData(e,_.fields.FIELD_INT16),this.alternate_group=this._readData(e,_.fields.FIELD_INT16),this.volume=this._readData(e,_.fields.FIELD_INT16),this.reserved_3=this._readData(e,_.fields.FIELD_INT16),this.matrix=this._readArrayFieldData(e,_.fields.FIELD_INT32,9),this.width=this._readData(e,_.fields.FIELD_INT32),this.height=this._readData(e,_.fields.FIELD_INT32),this.localPos},_.boxes.TrackHeaderBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),1===this.version?(this._writeData(e,_.fields.FIELD_UINT64,this.creation_time),this._writeData(e,_.fields.FIELD_UINT64,this.modification_time),this._writeData(e,_.fields.FIELD_UINT32,this.track_id),this._writeData(e,_.fields.FIELD_UINT32,this.reserved),this._writeData(e,_.fields.FIELD_UINT64,this.duration)):(this._writeData(e,_.fields.FIELD_UINT32,this.creation_time),this._writeData(e,_.fields.FIELD_UINT32,this.modification_time),this._writeData(e,_.fields.FIELD_UINT32,this.track_id),this._writeData(e,_.fields.FIELD_UINT32,this.reserved),this._writeData(e,_.fields.FIELD_UINT32,this.duration)),this._writeArrayData(e,_.fields.FIELD_UINT32,this.reserved_2),this._writeData(e,_.fields.FIELD_INT16,this.layer),this._writeData(e,_.fields.FIELD_INT16,this.alternate_group),this._writeData(e,_.fields.FIELD_INT16,this.volume),this._writeData(e,_.fields.FIELD_INT16,this.reserved_3),this._writeArrayData(e,_.fields.FIELD_INT32,this.matrix),this._writeData(e,_.fields.FIELD_INT32,this.width),this._writeData(e,_.fields.FIELD_INT32,this.height),this.localPos},_.boxes.MediaHeaderBox=function(e){_.boxes.FullBox.call(this,"mdhd",e)},_.boxes.MediaHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.MediaHeaderBox.prototype.constructor=_.boxes.MediaHeaderBox,_.boxes.MediaHeaderBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=2*_.fields.FIELD_UINT16.getLength(),1==this.version?this.size+=3*_.fields.FIELD_UINT64.getLength()+_.fields.FIELD_UINT32.getLength():this.size+=4*_.fields.FIELD_UINT32.getLength()},_.boxes.MediaHeaderBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),1===this.version?(this.creation_time=this._readData(e,_.fields.FIELD_UINT64),this.modification_time=this._readData(e,_.fields.FIELD_UINT64),this.timescale=this._readData(e,_.fields.FIELD_UINT32),this.duration=this._readData(e,_.fields.FIELD_UINT64)):(this.creation_time=this._readData(e,_.fields.FIELD_UINT32),this.modification_time=this._readData(e,_.fields.FIELD_UINT32),this.timescale=this._readData(e,_.fields.FIELD_UINT32),this.duration=this._readData(e,_.fields.FIELD_UINT32)),this.language=this._readData(e,_.fields.FIELD_UINT16),this.pre_defined=this._readData(e,_.fields.FIELD_UINT16),this.localPos},_.boxes.MediaHeaderBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),1===this.version?(this._writeData(e,_.fields.FIELD_UINT64,this.creation_time),this._writeData(e,_.fields.FIELD_UINT64,this.modification_time),this._writeData(e,_.fields.FIELD_UINT32,this.timescale),this._writeData(e,_.fields.FIELD_UINT64,this.duration)):(this._writeData(e,_.fields.FIELD_UINT32,this.creation_time),this._writeData(e,_.fields.FIELD_UINT32,this.modification_time),this._writeData(e,_.fields.FIELD_UINT32,this.timescale),this._writeData(e,_.fields.FIELD_UINT32,this.duration)),this._writeData(e,_.fields.FIELD_UINT16,this.language),this._writeData(e,_.fields.FIELD_UINT16,this.pre_defined),this.localPos},_.boxes.MovieExtendsHeaderBox=function(e){_.boxes.FullBox.call(this,"mehd",e)},_.boxes.MovieExtendsHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.MovieExtendsHeaderBox.prototype.constructor=_.boxes.MovieExtendsHeaderBox,_.boxes.MovieExtendsHeaderBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),1==this.version?this.size+=_.fields.FIELD_UINT64.getLength():this.size+=_.fields.FIELD_UINT32.getLength()},_.boxes.MovieExtendsHeaderBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),1===this.version?this.fragment_duration=this._readData(e,_.fields.FIELD_UINT64):this.fragment_duration=this._readData(e,_.fields.FIELD_UINT32),this.localPos},_.boxes.MovieExtendsHeaderBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),1===this.version?this._writeData(e,_.fields.FIELD_UINT64,this.fragment_duration):this._writeData(e,_.fields.FIELD_UINT32,this.fragment_duration),this.localPos},_.boxes.HandlerBox=function(e){_.boxes.FullBox.call(this,"hdlr",e)},_.boxes.HandlerBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.HandlerBox.prototype.constructor=_.boxes.HandlerBox,_.boxes.HandlerBox.prototype.HANDLERTYPEVIDEO="vide",_.boxes.HandlerBox.prototype.HANDLERTYPEAUDIO="soun",_.boxes.HandlerBox.prototype.HANDLERTYPETEXT="meta",_.boxes.HandlerBox.prototype.HANDLERVIDEONAME="Video Track",_.boxes.HandlerBox.prototype.HANDLERAUDIONAME="Audio Track",_.boxes.HandlerBox.prototype.HANDLERTEXTNAME="Text Track",_.boxes.HandlerBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=2*_.fields.FIELD_UINT32.getLength()+3*_.fields.FIELD_UINT32.getLength()+_.fields.FIELD_STRING.getLength(this.name)},_.boxes.HandlerBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.pre_defined=this._readData(e,_.fields.FIELD_UINT32),this.handler_type=this._readData(e,_.fields.FIELD_UINT32),this.reserved=this._readArrayFieldData(e,_.fields.FIELD_UINT32,3),this.name=this._readData(e,_.fields.FIELD_STRING),this.localPos},_.boxes.HandlerBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_UINT32,this.pre_defined),this._writeData(e,_.fields.FIELD_UINT32,this.handler_type),this._writeArrayData(e,_.fields.FIELD_UINT32,this.reserved),this._writeData(e,_.fields.FIELD_STRING,this.name),this.localPos},_.boxes.TimeToSampleBox=function(e){_.boxes.FullBox.call(this,"stts",e)},_.boxes.TimeToSampleBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.TimeToSampleBox.prototype.constructor=_.boxes.TimeToSampleBox,_.boxes.TimeToSampleBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength(),this.size+=this.entry_count*(2*_.fields.FIELD_UINT32.getLength())},_.boxes.TimeToSampleBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i={};for(this.entry_count=this._readData(e,_.fields.FIELD_UINT32),this.entry=[],r=0;r<this.entry_count;r++)i={},i.sample_count=this._readData(e,_.fields.FIELD_UINT32),i.sample_delta=this._readData(e,_.fields.FIELD_UINT32),this.entry.push(i);return this.localPos},_.boxes.TimeToSampleBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.entry_count),n=0;n<this.entry_count;n++)this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].sample_count),this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].sample_delta);return this.localPos},_.boxes.SampleToChunkBox=function(e){_.boxes.FullBox.call(this,"stsc",e)},_.boxes.SampleToChunkBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SampleToChunkBox.prototype.constructor=_.boxes.SampleToChunkBox,_.boxes.SampleToChunkBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength(),this.size+=this.entry_count*(3*_.fields.FIELD_UINT32.getLength())},_.boxes.SampleToChunkBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i={};for(this.entry_count=this._readData(e,_.fields.FIELD_UINT32),this.entry=[],r=0;r<this.entry_count;r++)i={},i.first_chunk=this._readData(e,_.fields.FIELD_UINT32),i.samples_per_chunk=this._readData(e,_.fields.FIELD_UINT32),i.samples_description_index=this._readData(e,_.fields.FIELD_UINT32),this.entry.push(i);return this.localPos},_.boxes.SampleToChunkBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.entry_count),n=0;n<this.entry_count;n++)this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].first_chunk),this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].samples_per_chunk),this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].samples_description_index);return this.localPos},_.boxes.ChunkOffsetBox=function(e){_.boxes.FullBox.call(this,"stco",e)},_.boxes.ChunkOffsetBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.ChunkOffsetBox.prototype.constructor=_.boxes.ChunkOffsetBox,_.boxes.ChunkOffsetBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength()+this.entry_count*_.fields.FIELD_UINT32.getLength()},_.boxes.ChunkOffsetBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.entry_count=this._readData(e,_.fields.FIELD_UINT32),this.chunk_offset=this._readArrayFieldData(e,_.fields.FIELD_UINT32,this.entry_count),this.localPos},_.boxes.ChunkOffsetBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.entry_count),n=0;n<this.entry_count;n++)this._writeData(e,_.fields.FIELD_UINT32,this.chunk_offset[n]);return this.localPos},_.boxes.TrackExtendsBox=function(e){_.boxes.FullBox.call(this,"trex",e)},_.boxes.TrackExtendsBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.TrackExtendsBox.prototype.constructor=_.boxes.TrackExtendsBox,_.boxes.TrackExtendsBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=5*_.fields.FIELD_UINT32.getLength()},_.boxes.TrackExtendsBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.track_ID=this._readData(e,_.fields.FIELD_UINT32),this.default_sample_description_index=this._readData(e,_.fields.FIELD_UINT32),this.default_sample_duration=this._readData(e,_.fields.FIELD_UINT32),this.default_sample_size=this._readData(e,_.fields.FIELD_UINT32),this.default_sample_flags=this._readData(e,_.fields.FIELD_UINT32),this.localPos},_.boxes.TrackExtendsBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_UINT32,this.track_ID),this._writeData(e,_.fields.FIELD_UINT32,this.default_sample_description_index),this._writeData(e,_.fields.FIELD_UINT32,this.default_sample_duration),this._writeData(e,_.fields.FIELD_UINT32,this.default_sample_size),this._writeData(e,_.fields.FIELD_UINT32,this.default_sample_flags),this.localPos},_.boxes.VideoMediaHeaderBox=function(e){_.boxes.FullBox.call(this,"vmhd",e)},_.boxes.VideoMediaHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.VideoMediaHeaderBox.prototype.constructor=_.boxes.VideoMediaHeaderBox,_.boxes.VideoMediaHeaderBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_INT16.getLength()+3*_.fields.FIELD_UINT16.getLength()},_.boxes.VideoMediaHeaderBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.graphicsmode=this._readData(e,_.fields.FIELD_INT16),this.opcolor=this._readArrayFieldData(e,_.fields.FIELD_UINT16,3),this.localPos},_.boxes.VideoMediaHeaderBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_INT16,this.graphicsmode),this._writeArrayData(e,_.fields.FIELD_UINT16,this.opcolor),this.localPos},_.boxes.SoundMediaHeaderBox=function(e){_.boxes.FullBox.call(this,"smhd",e)},_.boxes.SoundMediaHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SoundMediaHeaderBox.prototype.constructor=_.boxes.SoundMediaHeaderBox,_.boxes.SoundMediaHeaderBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_INT16.getLength()+_.fields.FIELD_UINT16.getLength()},_.boxes.SoundMediaHeaderBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.balance=this._readData(e,_.fields.FIELD_INT16),this.reserved=this._readData(e,_.fields.FIELD_UINT16),this.localPos},_.boxes.SoundMediaHeaderBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_INT16,this.balance),this._writeData(e,_.fields.FIELD_UINT16,this.reserved),this.localPos},_.boxes.DataReferenceBox=function(e){_.boxes.ContainerFullBox.call(this,"dref",e)},_.boxes.DataReferenceBox.prototype=Object.create(_.boxes.ContainerFullBox.prototype),_.boxes.DataReferenceBox.prototype.constructor=_.boxes.DataReferenceBox,_.boxes.DataReferenceBox.prototype.computeLength=function(){_.boxes.ContainerFullBox.prototype.computeLength.call(this,!0)},_.boxes.DataReferenceBox.prototype.read=function(e,t,n){return _.boxes.ContainerFullBox.prototype.read.call(this,e,t,n,!0)},_.boxes.DataReferenceBox.prototype.write=function(e,t){return this.entry_count||(this.entry_count=this.boxes.length),_.boxes.ContainerFullBox.prototype.write.call(this,e,t,!0)},_.boxes.DataEntryUrlBox=function(e){_.boxes.FullBox.call(this,"url ",e)},_.boxes.DataEntryUrlBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.DataEntryUrlBox.prototype.constructor=_.boxes.DataEntryUrlBox,_.boxes.DataEntryUrlBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),void 0!==this.location&&(this.size+=_.fields.FIELD_STRING.getLength(this.location))},_.boxes.DataEntryUrlBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),!1&this.flags&&(this.location=this._readData(e,_.fields.FIELD_STRING)),this.localPos},_.boxes.DataEntryUrlBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),void 0!==this.location&&this._writeData(e,_.fields.FIELD_STRING,this.location),this.localPos},_.boxes.DataEntryUrnBox=function(e){_.boxes.FullBox.call(this,"urn ",e)},_.boxes.DataEntryUrnBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.DataEntryUrnBox.prototype.constructor=_.boxes.DataEntryUrnBox,_.boxes.DataEntryUrnBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),!1&this.flags&&(this.size+=_.fields.FIELD_STRING.getLength(this.name)+_.fields.FIELD_STRING.getLength(this.location))},_.boxes.DataEntryUrnBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),!1&this.flags&&(this.name=this._readData(e,_.fields.FIELD_STRING),this.location=this._readData(e,_.fields.FIELD_STRING)),this.localPos},_.boxes.DataEntryUrnBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),!1&this.flags&&(this._writeData(e,_.fields.FIELD_STRING,this.name),this._writeData(e,_.fields.FIELD_STRING,this.location)),this.localPos},_.boxes.MovieFragmentHeaderBox=function(e){_.boxes.FullBox.call(this,"mfhd",e)},_.boxes.MovieFragmentHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.MovieFragmentHeaderBox.prototype.constructor=_.boxes.MovieFragmentHeaderBox,_.boxes.MovieFragmentHeaderBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength()},_.boxes.MovieFragmentHeaderBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.sequence_number=this._readData(e,_.fields.FIELD_UINT32),this.localPos},_.boxes.MovieFragmentHeaderBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_UINT32,this.sequence_number),this.localPos},_.boxes.TrackFragmentHeaderBox=function(e){_.boxes.FullBox.call(this,"tfhd",e)},_.boxes.TrackFragmentHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.TrackFragmentHeaderBox.prototype.constructor=_.boxes.TrackFragmentHeaderBox,_.boxes.TrackFragmentHeaderBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength(),0!==(1&this.flags)&&void 0!==this.base_data_offset&&(this.size+=_.fields.FIELD_UINT64.getLength()),0!==(2&this.flags)&&void 0!==this.sample_description_index&&(this.size+=_.fields.FIELD_UINT32.getLength()),0!==(8&this.flags)&&void 0!==this.default_sample_duration&&(this.size+=_.fields.FIELD_UINT32.getLength()),0!==(16&this.flags)&&void 0!==this.default_sample_size&&(this.size+=_.fields.FIELD_UINT32.getLength()),0!==(32&this.flags)&&void 0!==this.default_sample_flags&&(this.size+=_.fields.FIELD_UINT32.getLength())},_.boxes.TrackFragmentHeaderBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.track_ID=this._readData(e,_.fields.FIELD_UINT32),0!==(1&this.flags)&&(this.base_data_offset=this._readData(e,_.fields.FIELD_UINT64)),0!==(2&this.flags)&&(this.sample_description_index=this._readData(e,_.fields.FIELD_UINT32)),0!==(8&this.flags)&&(this.default_sample_duration=this._readData(e,_.fields.FIELD_UINT32)),0!==(16&this.flags)&&(this.default_sample_size=this._readData(e,_.fields.FIELD_UINT32)),0!==(32&this.flags)&&(this.default_sample_flags=this._readData(e,_.fields.FIELD_UINT32)),this.localPos},_.boxes.TrackFragmentHeaderBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_UINT32,this.track_ID),0!==(1&this.flags)&&this._writeData(e,_.fields.FIELD_UINT64,this.base_data_offset),0!==(2&this.flags)&&this._writeData(e,_.fields.FIELD_UINT32,this.sample_description_index),0!==(8&this.flags)&&this._writeData(e,_.fields.FIELD_UINT32,this.default_sample_duration),0!==(16&this.flags)&&this._writeData(e,_.fields.FIELD_UINT32,this.default_sample_size),0!==(32&this.flags)&&this._writeData(e,_.fields.FIELD_UINT32,this.default_sample_flags),this.localPos},_.boxes.TrackFragmentBaseMediaDecodeTimeBox=function(e){_.boxes.FullBox.call(this,"tfdt",e)},_.boxes.TrackFragmentBaseMediaDecodeTimeBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.TrackFragmentBaseMediaDecodeTimeBox.prototype.constructor=_.boxes.TrackFragmentBaseMediaDecodeTimeBox,_.boxes.TrackFragmentBaseMediaDecodeTimeBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),1===this.version?this.size+=_.fields.FIELD_UINT64.getLength():this.size+=_.fields.FIELD_UINT32.getLength()},_.boxes.TrackFragmentBaseMediaDecodeTimeBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),1===this.version?this.baseMediaDecodeTime=this._readData(e,_.fields.FIELD_UINT64):this.baseMediaDecodeTime=this._readData(e,_.fields.FIELD_UINT32),this.localPos},_.boxes.TrackFragmentBaseMediaDecodeTimeBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),1===this.version?this._writeData(e,_.fields.FIELD_UINT64,this.baseMediaDecodeTime):this._writeData(e,_.fields.FIELD_UINT32,this.baseMediaDecodeTime),this.localPos},_.boxes.TrackFragmentRunBox=function(e){_.boxes.FullBox.call(this,"trun",e)},_.boxes.TrackFragmentRunBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.TrackFragmentRunBox.prototype.constructor=_.boxes.TrackFragmentRunBox,_.boxes.TrackFragmentRunBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this);var e=0;for(this.size+=_.fields.FIELD_UINT32.getLength(),0!==(1&this.flags)&&void 0!==this.data_offset&&(this.size+=_.fields.FIELD_INT32.getLength()),0!==(4&this.flags)&&void 0!==this.first_sample_flags&&(this.size+=_.fields.FIELD_UINT32.getLength()),e=0;e<this.sample_count;e++)0!==(256&this.flags)&&void 0!==this.samples_table[e].sample_duration&&(this.size+=_.fields.FIELD_UINT32.getLength()),0!==(512&this.flags)&&void 0!==this.samples_table[e].sample_size&&(this.size+=_.fields.FIELD_UINT32.getLength()),0!==(1024&this.flags)&&void 0!==this.samples_table[e].sample_flags&&(this.size+=_.fields.FIELD_UINT32.getLength()),1===this.version?0!==(2048&this.flags)&&void 0!==this.samples_table[e].sample_composition_time_offset&&(this.size+=_.fields.FIELD_INT32.getLength()):0!==(2048&this.flags)&&void 0!==this.samples_table[e].sample_composition_time_offset&&(this.size+=_.fields.FIELD_UINT32.getLength())},_.boxes.TrackFragmentRunBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i={};for(this.sample_count=this._readData(e,_.fields.FIELD_UINT32),0!==(1&this.flags)&&(this.data_offset=this._readData(e,_.fields.FIELD_INT32)),0!==(4&this.flags)&&(this.first_sample_flags=this._readData(e,_.fields.FIELD_UINT32)),this.samples_table=[],r=0;r<this.sample_count;r++)i={},0!==(256&this.flags)&&(i.sample_duration=this._readData(e,_.fields.FIELD_UINT32)),0!==(512&this.flags)&&(i.sample_size=this._readData(e,_.fields.FIELD_UINT32)),0!==(1024&this.flags)&&(i.sample_flags=this._readData(e,_.fields.FIELD_UINT32)),1===this.version?0!==(2048&this.flags)&&(i.sample_composition_time_offset=this._readData(e,_.fields.FIELD_INT32)):0!==(2048&this.flags)&&(i.sample_composition_time_offset=this._readData(e,_.fields.FIELD_UINT32)),this.samples_table.push(i);return this.localPos},_.boxes.TrackFragmentRunBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.sample_count),0!==(1&this.flags)&&this._writeData(e,_.fields.FIELD_INT32,this.data_offset),0!==(4&this.flags)&&this._writeData(e,_.fields.FIELD_UINT32,this.first_sample_flags),n=0;n<this.sample_count;n++)0!==(256&this.flags)&&this._writeData(e,_.fields.FIELD_UINT32,this.samples_table[n].sample_duration),0!==(512&this.flags)&&this._writeData(e,_.fields.FIELD_UINT32,this.samples_table[n].sample_size),0!==(1024&this.flags)&&this._writeData(e,_.fields.FIELD_UINT32,this.samples_table[n].sample_flags),1===this.version?0!==(2048&this.flags)&&this._writeData(e,_.fields.FIELD_INT32,this.samples_table[n].sample_composition_time_offset):0!==(2048&this.flags)&&this._writeData(e,_.fields.FIELD_UINT32,this.samples_table[n].sample_composition_time_offset);return this.localPos},_.boxes.SampleDescriptionBox=function(e){_.boxes.ContainerFullBox.call(this,"stsd",e)},_.boxes.SampleDescriptionBox.prototype=Object.create(_.boxes.ContainerFullBox.prototype),_.boxes.SampleDescriptionBox.prototype.constructor=_.boxes.SampleDescriptionBox,_.boxes.SampleDescriptionBox.prototype.computeLength=function(){_.boxes.ContainerFullBox.prototype.computeLength.call(this,!0)},_.boxes.SampleDescriptionBox.prototype.read=function(e,t,n){return _.boxes.ContainerFullBox.prototype.read.call(this,e,t,n,!0)},_.boxes.SampleDescriptionBox.prototype.write=function(e,t){return this.entry_count=this.boxes.length,_.boxes.ContainerFullBox.prototype.write.call(this,e,t,!0)},_.boxes.SampleDependencyTableBox=function(e){_.boxes.FullBox.call(this,"sdtp",e)},_.boxes.SampleDependencyTableBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SampleDependencyTableBox.prototype.constructor=_.boxes.SampleDependencyTableBox,_.boxes.SampleDependencyTableBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT8.getLength()*this.sample_dependency_table.length},_.boxes.SampleDependencyTableBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.sample_dependency_table=this._readArrayData(e,_.fields.FIELD_UINT8),this.localPos},_.boxes.SampleDependencyTableBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeArrayData(e,_.fields.FIELD_UINT8,this.sample_dependency_table),this.localPos},_.boxes.SampleEntryBox=function(e,t){_.boxes.Box.call(this,e,t)},_.boxes.SampleEntryBox.prototype=Object.create(_.boxes.Box.prototype),_.boxes.SampleEntryBox.prototype.constructor=_.boxes.SampleEntryBox,_.boxes.SampleEntryBox.prototype.computeLength=function(){_.boxes.Box.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT16.getLength()+6*_.fields.FIELD_UINT8.getLength()},_.boxes.SampleEntryBox.prototype.read=function(e,t,n){return this.localPos=t,this.localEnd=n,this.reserved=this._readArrayFieldData(e,_.fields.FIELD_UINT8,6),this.data_reference_index=this._readData(e,_.fields.FIELD_UINT16),this.localPos},_.boxes.SampleEntryBox.prototype.write=function(e,t){return _.boxes.Box.prototype.write.call(this,e,t),this._writeArrayData(e,_.fields.FIELD_UINT8,this.reserved),this._writeData(e,_.fields.FIELD_UINT16,this.data_reference_index),this.localPos},_.boxes.VisualSampleEntryBox=function(e,t){_.boxes.SampleEntryBox.call(this,e,t)},_.boxes.VisualSampleEntryBox.prototype=Object.create(_.boxes.SampleEntryBox.prototype),_.boxes.VisualSampleEntryBox.prototype.constructor=_.boxes.VisualSampleEntryBox,_.boxes.VisualSampleEntryBox.prototype.computeLength=function(){_.boxes.SampleEntryBox.prototype.computeLength.call(this),this.size+=7*_.fields.FIELD_UINT16.getLength()+3*_.fields.FIELD_UINT32.getLength(),this.size+=3*_.fields.FIELD_UINT32.getLength(),this.size+=32},_.boxes.VisualSampleEntryBox.prototype.read=function(e,t,n){return _.boxes.SampleEntryBox.prototype.read.call(this,e,t,n),this.pre_defined=this._readData(e,_.fields.FIELD_UINT16),this.reserved_2=this._readData(e,_.fields.FIELD_UINT16),this.pre_defined_2=this._readArrayFieldData(e,_.fields.FIELD_UINT32,3),this.width=this._readData(e,_.fields.FIELD_UINT16),this.height=this._readData(e,_.fields.FIELD_UINT16),this.horizresolution=this._readData(e,_.fields.FIELD_UINT32),this.vertresolution=this._readData(e,_.fields.FIELD_UINT32),this.reserved_3=this._readData(e,_.fields.FIELD_UINT32),this.frame_count=this._readData(e,_.fields.FIELD_UINT16),this.compressorname=this._readArrayFieldData(e,_.fields.FIELD_UINT8,32),this.depth=this._readData(e,_.fields.FIELD_UINT16),this.pre_defined_3=this._readData(e,_.fields.FIELD_INT16),this.localPos},_.boxes.VisualSampleEntryBox.prototype.write=function(e,t){return _.boxes.SampleEntryBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_UINT16,this.pre_defined),this._writeData(e,_.fields.FIELD_UINT16,this.reserved_2),this._writeArrayData(e,_.fields.FIELD_UINT32,this.pre_defined_2),this._writeData(e,_.fields.FIELD_UINT16,this.width),this._writeData(e,_.fields.FIELD_UINT16,this.height),this._writeData(e,_.fields.FIELD_UINT32,this.horizresolution),this._writeData(e,_.fields.FIELD_UINT32,this.vertresolution),this._writeData(e,_.fields.FIELD_UINT32,this.reserved_3),this._writeData(e,_.fields.FIELD_UINT16,this.frame_count),this._writeArrayData(e,_.fields.FIELD_UINT8,this.compressorname),this._writeData(e,_.fields.FIELD_UINT16,this.depth),this._writeData(e,_.fields.FIELD_INT16,this.pre_defined_3),this.localPos},_.boxes.VisualSampleEntryContainerBox=function(e,t){_.boxes.VisualSampleEntryBox.call(this,e,t),this.boxes=[]},_.boxes.VisualSampleEntryContainerBox.prototype=Object.create(_.boxes.VisualSampleEntryBox.prototype),_.boxes.VisualSampleEntryContainerBox.prototype.constructor=_.boxes.VisualSampleEntryContainerBox,_.boxes.VisualSampleEntryContainerBox.prototype.computeLength=function(){_.boxes.VisualSampleEntryBox.prototype.computeLength.call(this);var e=0;for(e=0;e<this.boxes.length;e++)this.boxes[e].computeLength(),this.size+=this.boxes[e].size},_.boxes.VisualSampleEntryContainerBox.prototype.read=function(e,t,n){_.boxes.VisualSampleEntryBox.prototype.read.call(this,e,t,n);var r,i,o=0,a=0,s=null;while(this.localPos<this.localEnd){if(o=_.fields.FIELD_UINT32.read(e,this.localPos),r=_.fields.readString(e,this.localPos+4,4),"uuid"==r&&(a=1==o?16:8,s=new _.fields.ArrayField(_.fields.FIELD_INT8,16).read(e,this.localPos+a,this.localPos+a+16),s=JSON.stringify(s)),i=_.createBox(r,o,s),this.localPos="uuid"===r?i.read(e,this.localPos+16*_.fields.FIELD_INT8.getLength()+8,this.localPos+o):i.read(e,this.localPos+8,this.localPos+o),_.debug&&(i.__sourceBuffer=e.subarray(this.localPos-i.size,this.localPos)),this.boxes.push(i),i.size<=0||null===i.size)throw new _.ParseException("Problem on size of box "+i.boxtype+", parsing stopped to avoid infinite loop");if(!i.boxtype)throw new _.ParseException("Problem on unknown box, parsing stopped to avoid infinite loop")}return this.localPos},_.boxes.VisualSampleEntryContainerBox.prototype.write=function(e,t){_.boxes.VisualSampleEntryBox.prototype.write.call(this,e,t);var n=0;for(n=0;n<this.boxes.length;n++)this.localPos=this.boxes[n].write(e,this.localPos);return this.localPos},_.boxes.AVC1VisualSampleEntryBox=function(e){_.boxes.VisualSampleEntryContainerBox.call(this,"avc1",e)},_.boxes.AVC1VisualSampleEntryBox.prototype=Object.create(_.boxes.VisualSampleEntryContainerBox.prototype),_.boxes.AVC1VisualSampleEntryBox.prototype.constructor=_.boxes.AVC1VisualSampleEntryBox,_.boxes.EncryptedVideoBox=function(e){_.boxes.VisualSampleEntryContainerBox.call(this,"encv",e)},_.boxes.EncryptedVideoBox.prototype=Object.create(_.boxes.VisualSampleEntryContainerBox.prototype),_.boxes.EncryptedVideoBox.prototype.constructor=_.boxes.EncryptedVideoBox,_.boxes.AVCConfigurationBox=function(e){_.boxes.Box.call(this,"avcC",e)},_.boxes.AVCConfigurationBox.prototype=Object.create(_.boxes.Box.prototype),_.boxes.AVCConfigurationBox.prototype.constructor=_.boxes.AVCConfigurationBox,_.boxes.AVCConfigurationBox.prototype.computeLength=function(){_.boxes.Box.prototype.computeLength.call(this),this.size+=4*_.fields.FIELD_UINT8.getLength()+3*_.fields.FIELD_UINT8.getLength(),this.size+=this._getNALLength(this.numOfSequenceParameterSets,this.SPS_NAL),this.size+=this._getNALLength(this.numOfPictureParameterSets,this.PPS_NAL)},_.boxes.AVCConfigurationBox.prototype._getNALLength=function(e,t){var n=0,r=0;for(r=0;r<e;r++)n+=_.fields.FIELD_UINT16.getLength()+t[r].NAL_length;return n},_.boxes.AVCConfigurationBox.prototype.read=function(e,t,n){return this.localPos=t,this.localEnd=n,this.configurationVersion=this._readData(e,_.fields.FIELD_UINT8),this.AVCProfileIndication=this._readData(e,_.fields.FIELD_UINT8),this.profile_compatibility=this._readData(e,_.fields.FIELD_UINT8),this.AVCLevelIndication=this._readData(e,_.fields.FIELD_UINT8),this.temp=this._readData(e,_.fields.FIELD_UINT8),this.lengthSizeMinusOne=3&this.temp,this.numOfSequenceParameterSets_tmp=this._readData(e,_.fields.FIELD_UINT8),this.numOfSequenceParameterSets=31&this.numOfSequenceParameterSets_tmp,this.SPS_NAL=this._readNAL(e,this.numOfSequenceParameterSets),this.numOfPictureParameterSets=this._readData(e,_.fields.FIELD_UINT8),this.PPS_NAL=this._readNAL(e,this.numOfPictureParameterSets),this.localPos},_.boxes.AVCConfigurationBox.prototype._readNAL=function(e,t){var n=[],r=0,i={};for(r=0;r<t;r++)i={},i.NAL_length=this._readData(e,_.fields.FIELD_UINT16),i.NAL=e.subarray(this.localPos,this.localPos+i.NAL_length),this.localPos+=i.NAL_length,n.push(i);return n},_.boxes.AVCConfigurationBox.prototype.write=function(e,t){return _.boxes.Box.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_UINT8,this.configurationVersion),this._writeData(e,_.fields.FIELD_UINT8,this.AVCProfileIndication),this._writeData(e,_.fields.FIELD_UINT8,this.profile_compatibility),this._writeData(e,_.fields.FIELD_UINT8,this.AVCLevelIndication),this.temp=252|this.lengthSizeMinusOne,this._writeData(e,_.fields.FIELD_UINT8,this.temp),this.numOfSequenceParameterSets=this.SPS_NAL.length,this.numOfSequenceParameterSets_tmp=224|this.numOfSequenceParameterSets,this._writeData(e,_.fields.FIELD_UINT8,this.numOfSequenceParameterSets_tmp),this._writeNAL(e,this.numOfSequenceParameterSets,this.SPS_NAL),this._writeData(e,_.fields.FIELD_UINT8,this.numOfPictureParameterSets),this._writeNAL(e,this.numOfPictureParameterSets,this.PPS_NAL),this.localPos},_.boxes.AVCConfigurationBox.prototype._writeNAL=function(e,t,n){var r=0;for(r=0;r<t;r++)this._writeData(e,_.fields.FIELD_UINT16,n[r].NAL_length),this._writeBuffer(e,n[r].NAL,n[r].NAL_length)},_.boxes.PixelAspectRatioBox=function(e){_.boxes.Box.call(this,"pasp",e)},_.boxes.PixelAspectRatioBox.prototype=Object.create(_.boxes.Box.prototype),_.boxes.PixelAspectRatioBox.prototype.constructor=_.boxes.PixelAspectRatioBox,_.boxes.PixelAspectRatioBox.prototype.computeLength=function(){_.boxes.Box.prototype.computeLength.call(this),this.size+=2*_.fields.FIELD_INT32.getLength()},_.boxes.PixelAspectRatioBox.prototype.read=function(e,t,n){return this.localPos=t,this.localEnd=n,this.hSpacing=this._readData(e,_.fields.FIELD_INT32),this.vSpacing=this._readData(e,_.fields.FIELD_INT32),this.localPos},_.boxes.PixelAspectRatioBox.prototype.write=function(e,t){return _.boxes.Box.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_INT32,this.hSpacing),this._writeData(e,_.fields.FIELD_INT32,this.vSpacing),this.localPos},_.boxes.AudioSampleEntryBox=function(e,t){_.boxes.SampleEntryBox.call(this,e,t)},_.boxes.AudioSampleEntryBox.prototype=Object.create(_.boxes.SampleEntryBox.prototype),_.boxes.AudioSampleEntryBox.prototype.constructor=_.boxes.AudioSampleEntryBox,_.boxes.AudioSampleEntryBox.prototype.computeLength=function(){_.boxes.SampleEntryBox.prototype.computeLength.call(this),this.size+=4*_.fields.FIELD_UINT16.getLength()+3*_.fields.FIELD_UINT32.getLength()},_.boxes.AudioSampleEntryBox.prototype.read=function(e,t,n){return _.boxes.SampleEntryBox.prototype.read.call(this,e,t,n),this.reserved_2=this._readArrayFieldData(e,_.fields.FIELD_UINT32,2),this.channelcount=this._readData(e,_.fields.FIELD_UINT16),this.samplesize=this._readData(e,_.fields.FIELD_UINT16),this.pre_defined=this._readData(e,_.fields.FIELD_UINT16),this.reserved_3=this._readData(e,_.fields.FIELD_UINT16),this.samplerate=this._readData(e,_.fields.FIELD_UINT32),this.localPos},_.boxes.AudioSampleEntryBox.prototype.write=function(e,t){return _.boxes.SampleEntryBox.prototype.write.call(this,e,t),this._writeArrayData(e,_.fields.FIELD_UINT32,this.reserved_2),this._writeData(e,_.fields.FIELD_UINT16,this.channelcount),this._writeData(e,_.fields.FIELD_UINT16,this.samplesize),this._writeData(e,_.fields.FIELD_UINT16,this.pre_defined),this._writeData(e,_.fields.FIELD_UINT16,this.reserved_3),this._writeData(e,_.fields.FIELD_UINT32,this.samplerate),this.localPos},_.boxes.AudioSampleEntryContainerBox=function(e,t){_.boxes.AudioSampleEntryBox.call(this,e,t),this.boxes=[]},_.boxes.AudioSampleEntryContainerBox.prototype=Object.create(_.boxes.AudioSampleEntryBox.prototype),_.boxes.AudioSampleEntryContainerBox.prototype.constructor=_.boxes.AudioSampleEntryContainerBox,_.boxes.AudioSampleEntryContainerBox.prototype.computeLength=function(){_.boxes.AudioSampleEntryBox.prototype.computeLength.call(this);var e=0;for(e=0;e<this.boxes.length;e++)this.boxes[e].computeLength(),this.size+=this.boxes[e].size},_.boxes.AudioSampleEntryContainerBox.prototype.read=function(e,t,n){_.boxes.AudioSampleEntryBox.prototype.read.call(this,e,t,n);var r,i,o=0,a=0,s=null;while(this.localPos<this.localEnd){if(o=_.fields.FIELD_UINT32.read(e,this.localPos),r=_.fields.readString(e,this.localPos+4,4),"uuid"==r&&(a=1==o?16:8,s=new _.fields.ArrayField(_.fields.FIELD_INT8,16).read(e,this.localPos+a,this.localPos+a+16),s=JSON.stringify(s)),i=_.createBox(r,o,s),this.localPos="uuid"===r?i.read(e,this.localPos+16*_.fields.FIELD_INT8.getLength()+8,this.localPos+o):i.read(e,this.localPos+8,this.localPos+o),_.debug&&(i.__sourceBuffer=e.subarray(this.localPos-i.size,this.localPos)),this.boxes.push(i),i.size<=0||null===i.size)throw new _.ParseException("Problem on size of box "+i.boxtype+", parsing stopped to avoid infinite loop");if(!i.boxtype)throw new _.ParseException("Problem on unknown box, parsing stopped to avoid infinite loop")}return this.localPos},_.boxes.AudioSampleEntryContainerBox.prototype.write=function(e,t){_.boxes.AudioSampleEntryBox.prototype.write.call(this,e,t);var n=0;for(n=0;n<this.boxes.length;n++)this.localPos=this.boxes[n].write(e,this.localPos);return this.localPos},_.boxes.MP4AudioSampleEntryBox=function(e){_.boxes.AudioSampleEntryContainerBox.call(this,"mp4a",e)},_.boxes.MP4AudioSampleEntryBox.prototype=Object.create(_.boxes.AudioSampleEntryContainerBox.prototype),_.boxes.MP4AudioSampleEntryBox.prototype.constructor=_.boxes.MP4AudioSampleEntryBox,_.boxes.EncryptedAudioBox=function(e){_.boxes.AudioSampleEntryContainerBox.call(this,"enca",e)},_.boxes.EncryptedAudioBox.prototype=Object.create(_.boxes.AudioSampleEntryContainerBox.prototype),_.boxes.EncryptedAudioBox.prototype.constructor=_.boxes.EncryptedAudioBox,_.boxes.ESDBox=function(e){_.boxes.FullBox.call(this,"esds",e)},_.boxes.ESDBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.ESDBox.prototype.constructor=_.boxes.ESDBox,_.boxes.ESDBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=2*_.fields.FIELD_UINT8.getLength()+this.ES_length},_.boxes.ESDBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.ES_tag=this._readData(e,_.fields.FIELD_UINT8),this.ES_length=this._readData(e,_.fields.FIELD_UINT8),this.ES_data=e.subarray(this.localPos,this.localPos+this.ES_length),this.localPos+=this.ES_length,this.localPos},_.boxes.ESDBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_UINT8,this.ES_tag),this._writeData(e,_.fields.FIELD_UINT8,this.ES_length),this._writeBuffer(e,this.ES_data,this.ES_length),this.localPos},_.boxes.SampleSizeBox=function(e){_.boxes.FullBox.call(this,"stsz",e)},_.boxes.SampleSizeBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SampleSizeBox.prototype.constructor=_.boxes.SampleSizeBox,_.boxes.SampleSizeBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=2*_.fields.FIELD_UINT32.getLength()+_.fields.FIELD_UINT32.getLength()*this.sample_count},_.boxes.SampleSizeBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.sample_size=this._readData(e,_.fields.FIELD_UINT32),this.sample_count=this._readData(e,_.fields.FIELD_UINT32),this.entries=this._readArrayFieldData(e,_.fields.FIELD_UINT32,this.sample_count),this.localPos},_.boxes.SampleSizeBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.sample_size),this._writeData(e,_.fields.FIELD_UINT32,this.sample_count),n=0;n<this.sample_count;n++)this._writeData(e,_.fields.FIELD_UINT32,this.entries[n]);return this.localPos},_.boxes.ProtectionSystemSpecificHeaderBox=function(e){_.boxes.FullBox.call(this,"pssh",e)},_.boxes.ProtectionSystemSpecificHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.ProtectionSystemSpecificHeaderBox.prototype.constructor=_.boxes.ProtectionSystemSpecificHeaderBox,_.boxes.ProtectionSystemSpecificHeaderBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=16*_.fields.FIELD_UINT8.getLength(),this.size+=_.fields.FIELD_UINT32.getLength(),this.size+=_.fields.FIELD_UINT8.getLength()*this.DataSize},_.boxes.ProtectionSystemSpecificHeaderBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.SystemID=this._readArrayFieldData(e,_.fields.FIELD_UINT8,16),this.DataSize=this._readData(e,_.fields.FIELD_UINT32),this.Data=this._readArrayFieldData(e,_.fields.FIELD_UINT8,this.DataSize),this.localPos},_.boxes.ProtectionSystemSpecificHeaderBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(n=0;n<16;n++)this._writeData(e,_.fields.FIELD_UINT8,this.SystemID[n]);for(this._writeData(e,_.fields.FIELD_UINT32,this.DataSize),n=0;n<this.DataSize;n++)this._writeData(e,_.fields.FIELD_UINT8,this.Data[n]);return this.localPos},_.boxes.SampleEncryptionBox=function(e){_.boxes.FullBox.call(this,"senc",e)},_.boxes.SampleEncryptionBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SampleEncryptionBox.prototype.constructor=_.boxes.SampleEncryptionBox,_.boxes.SampleEncryptionBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this);var e=0,t=0;for(this.size+=_.fields.FIELD_UINT32.getLength(),1&this.flags&&(this.size+=_.fields.FIELD_UINT8.getLength()),e=0;e<this.sample_count;e++)if(this.size+=8,2&this.flags)for(this.size+=_.fields.FIELD_UINT16.getLength(),t=0;t<this.entry[e].NumberOfEntries;t++)this.size+=_.fields.FIELD_UINT16.getLength(),this.size+=_.fields.FIELD_UINT32.getLength()},_.boxes.SampleEncryptionBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0,r=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.sample_count),1&this.flags&&this._writeData(e,_.fields.FIELD_UINT8,this.IV_size),n=0;n<this.sample_count;n++)if(this._writeBuffer(e,this.entry[n].InitializationVector,8),2&this.flags)for(this._writeData(e,_.fields.FIELD_UINT16,this.entry[n].NumberOfEntries),r=0;r<this.entry[n].NumberOfEntries;r++)this._writeData(e,_.fields.FIELD_UINT16,this.entry[n].clearAndCryptedData[r].BytesOfClearData),this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].clearAndCryptedData[r].BytesOfEncryptedData);return this.localPos},_.boxes.SampleEncryptionBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i=0,o={},a={};for(this.sample_count=this._readData(e,_.fields.FIELD_UINT32),1&this.flags&&(this.IV_size=this._readData(e,_.fields.FIELD_UINT8)),this.entry=[],r=0;r<this.sample_count;r++){if(a={},a.InitializationVector=e.subarray(this.localPos,this.localPos+8),this.localPos+=8,2&this.flags)for(a.NumberOfEntries=this._readData(e,_.fields.FIELD_UINT16),a.clearAndCryptedData=[],i=0;i<a.NumberOfEntries;i++)o={},o.BytesOfClearData=this._readData(e,_.fields.FIELD_UINT16),o.BytesOfEncryptedData=this._readData(e,_.fields.FIELD_UINT32),a.clearAndCryptedData.push(o);this.entry.push(a)}return this.localPos},_.boxes.SampleAuxiliaryInformationSizesBox=function(e){_.boxes.FullBox.call(this,"saiz",e)},_.boxes.SampleAuxiliaryInformationSizesBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SampleAuxiliaryInformationSizesBox.prototype.constructor=_.boxes.SampleAuxiliaryInformationSizesBox,_.boxes.SampleAuxiliaryInformationSizesBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),1&this.flags&&(this.size+=2*_.fields.FIELD_UINT32.getLength()),this.size+=_.fields.FIELD_UINT8.getLength()+_.fields.FIELD_UINT32.getLength(),0===this.default_sample_info_size&&(this.size+=_.fields.FIELD_UINT8.getLength()*this.sample_count)},_.boxes.SampleAuxiliaryInformationSizesBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),1&this.flags&&(this.aux_info_type=this._readData(e,_.fields.FIELD_UINT32),this.aux_info_type_parameter=this._readData(e,_.fields.FIELD_UINT32)),this.default_sample_info_size=this._readData(e,_.fields.FIELD_UINT8),this.sample_count=this._readData(e,_.fields.FIELD_UINT32),0===this.default_sample_info_size&&(this.sample_info_size=this._readArrayFieldData(e,_.fields.FIELD_UINT8,this.sample_count)),this.localPos},_.boxes.SampleAuxiliaryInformationSizesBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;if(1&this.flags&&(this._writeData(e,_.fields.FIELD_UINT32,this.aux_info_type),this._writeData(e,_.fields.FIELD_UINT32,this.aux_info_type_parameter)),this._writeData(e,_.fields.FIELD_UINT8,this.default_sample_info_size),this._writeData(e,_.fields.FIELD_UINT32,this.sample_count),0===this.default_sample_info_size)for(n=0;n<this.sample_count;n++)this._writeData(e,_.fields.FIELD_UINT8,this.sample_info_size[n]);return this.localPos},_.boxes.SampleAuxiliaryInformationOffsetsBox=function(e){_.boxes.FullBox.call(this,"saio",e)},_.boxes.SampleAuxiliaryInformationOffsetsBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SampleAuxiliaryInformationOffsetsBox.prototype.constructor=_.boxes.SampleAuxiliaryInformationOffsetsBox,_.boxes.SampleAuxiliaryInformationOffsetsBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),1&this.flags&&(this.size+=2*_.fields.FIELD_UINT32.getLength()),this.size+=_.fields.FIELD_UINT32.getLength(),0===this.version?this.size+=_.fields.FIELD_UINT32.getLength()*this.entry_count:this.size+=_.fields.FIELD_UINT64.getLength()*this.entry_count},_.boxes.SampleAuxiliaryInformationOffsetsBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),1&this.flags&&(this.aux_info_type=this._readData(e,_.fields.FIELD_UINT32),this.aux_info_type_parameter=this._readData(e,_.fields.FIELD_UINT32)),this.entry_count=this._readData(e,_.fields.FIELD_UINT32),0===this.version?this.offset=this._readArrayFieldData(e,_.fields.FIELD_UINT32,this.entry_count):this.offset=this._readArrayFieldData(e,_.fields.FIELD_UINT64,this.entry_count),this.localPos},_.boxes.SampleAuxiliaryInformationOffsetsBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;if(1&this.flags&&(this._writeData(e,_.fields.FIELD_UINT32,this.aux_info_type),this._writeData(e,_.fields.FIELD_UINT32,this.aux_info_type_parameter)),this._writeData(e,_.fields.FIELD_UINT32,this.entry_count),0===this.version)for(n=0;n<this.entry_count;n++)this._writeData(e,_.fields.FIELD_UINT32,this.offset[n]);else for(n=0;n<this.entry_count;n++)this._writeData(e,_.fields.FIELD_UINT64,this.offset[n]);return this.localPos},_.boxes.ProtectionSchemeInformationBox=function(e){_.boxes.ContainerBox.call(this,"sinf",e)},_.boxes.ProtectionSchemeInformationBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.ProtectionSchemeInformationBox.prototype.constructor=_.boxes.ProtectionSchemeInformationBox,_.boxes.SchemeInformationBox=function(e){_.boxes.ContainerBox.call(this,"schi",e)},_.boxes.SchemeInformationBox.prototype=Object.create(_.boxes.ContainerBox.prototype),_.boxes.SchemeInformationBox.prototype.constructor=_.boxes.SchemeInformationBox,_.boxes.TrackEncryptionBox=function(e){_.boxes.FullBox.call(this,"tenc",e)},_.boxes.TrackEncryptionBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.TrackEncryptionBox.prototype.constructor=_.boxes.TrackEncryptionBox,_.boxes.TrackEncryptionBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_BIT24.getLength(),this.size+=_.fields.FIELD_UINT8.getLength(),this.size+=16*_.fields.FIELD_UINT8.getLength()},_.boxes.TrackEncryptionBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.default_IsEncrypted=this._readData(e,_.fields.FIELD_BIT24),this.default_IV_size=this._readData(e,_.fields.FIELD_UINT8),this.default_KID=this._readArrayFieldData(e,_.fields.FIELD_UINT8,16),this.localPos},_.boxes.TrackEncryptionBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_BIT24,this.default_IsEncrypted),this._writeData(e,_.fields.FIELD_UINT8,this.default_IV_size),this._writeArrayData(e,_.fields.FIELD_UINT8,this.default_KID),this.localPos},_.boxes.SchemeTypeBox=function(e){_.boxes.FullBox.call(this,"schm",e)},_.boxes.SchemeTypeBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SchemeTypeBox.prototype.constructor=_.boxes.SchemeTypeBox,_.boxes.SchemeTypeBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=2*_.fields.FIELD_UINT32.getLength(),1&this.flags&&(this.size+=_.fields.FIELD_STRING.getLength(this.scheme_uri))},_.boxes.SchemeTypeBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.scheme_type=this._readData(e,_.fields.FIELD_UINT32),this.scheme_version=this._readData(e,_.fields.FIELD_UINT32),1&this.flags&&(this.scheme_uri=this._readData(e,_.fields.FIELD_STRING)),this.localPos},_.boxes.SchemeTypeBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_UINT32,this.scheme_type),this._writeData(e,_.fields.FIELD_UINT32,this.scheme_version),1&this.flags&&this._writeData(e,_.fields.FIELD_STRING,this.scheme_uri),this.localPos},_.boxes.EditListBox=function(e){_.boxes.FullBox.call(this,"elst",e),this.entries=[]},_.boxes.EditListBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.EditListBox.prototype.constructor=_.boxes.EditListBox,_.boxes.EditListBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength(),1===this.version?this.size+=(2*_.fields.FIELD_UINT64.getLength()+2*_.fields.FIELD_UINT16.getLength())*this.entry_count:this.size+=(2*_.fields.FIELD_UINT32.getLength()+2*_.fields.FIELD_UINT16.getLength())*this.entry_count},_.boxes.EditListBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i={};for(this.entry_count=this._readData(e,_.fields.FIELD_UINT32),r=0;r<this.entry_count;r++)i={},1===this.version?(i.segment_duration=this._readData(e,_.fields.FIELD_UINT64),i.media_time=this._readData(e,_.fields.FIELD_UINT64)):(i.segment_duration=this._readData(e,_.fields.FIELD_UINT32),i.media_time=this._readData(e,_.fields.FIELD_UINT32)),i.media_rate_integer=this._readData(e,_.fields.FIELD_UINT16),i.media_rate_fraction=this._readData(e,_.fields.FIELD_UINT16),this.entries.push(i);return this.localPos},_.boxes.EditListBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.entry_count),n=0;n<this.entry_count;n++)1===this.version?(this._writeData(e,_.fields.FIELD_UINT64,this.entries[n].segment_duration),this._writeData(e,_.fields.FIELD_UINT64,this.entries[n].media_time)):(this._writeData(e,_.fields.FIELD_UINT32,this.entries[n].segment_duration),this._writeData(e,_.fields.FIELD_UINT32,this.entries[n].media_time)),this._writeData(e,_.fields.FIELD_UINT16,this.entries[n].media_rate_integer),this._writeData(e,_.fields.FIELD_UINT16,this.entries[n].media_rate_fraction);return this.localPos},_.boxes.HintMediaHeaderBox=function(e){_.boxes.FullBox.call(this,"hmhd",e)},_.boxes.HintMediaHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.HintMediaHeaderBox.prototype.constructor=_.boxes.HintMediaHeaderBox,_.boxes.HintMediaHeaderBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=2*_.fields.FIELD_UINT16.getLength(),this.size+=3*_.fields.FIELD_UINT32.getLength()},_.boxes.HintMediaHeaderBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.maxPDUsize=this._readData(e,_.fields.FIELD_UINT16),this.avgPDUsize=this._readData(e,_.fields.FIELD_UINT16),this.maxbitrate=this._readData(e,_.fields.FIELD_UINT32),this.avgbitrate=this._readData(e,_.fields.FIELD_UINT32),this.reserved=this._readData(e,_.fields.FIELD_UINT32),this.localPos},_.boxes.HintMediaHeaderBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_UINT16,this.maxPDUsize),this._writeData(e,_.fields.FIELD_UINT16,this.avgPDUsize),this._writeData(e,_.fields.FIELD_UINT32,this.maxbitrate),this._writeData(e,_.fields.FIELD_UINT32,this.avgbitrate),this._writeData(e,_.fields.FIELD_UINT32,this.reserved),this.localPos},_.boxes.NullMediaHeaderBox=function(e){_.boxes.FullBox.call(this,"nmhd",e)},_.boxes.NullMediaHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.NullMediaHeaderBox.prototype.constructor=_.boxes.NullMediaHeaderBox,_.boxes.CompositionOffsetBox=function(e){_.boxes.FullBox.call(this,"ctts",e),this.entries=[]},_.boxes.CompositionOffsetBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.CompositionOffsetBox.prototype.constructor=_.boxes.CompositionOffsetBox,_.boxes.CompositionOffsetBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength(),0===this.version?this.size+=2*_.fields.FIELD_UINT32.getLength()*this.entry_count:this.size+=(_.fields.FIELD_UINT32.getLength()+_.fields.FIELD_INT32.getLength())*this.entry_count},_.boxes.CompositionOffsetBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i={};for(this.entry_count=this._readData(e,_.fields.FIELD_UINT32),r=0;r<this.entry_count;r++)i={},0===this.version?(i.sample_count=this._readData(e,_.fields.FIELD_UINT32),i.sample_offset=this._readData(e,_.fields.FIELD_UINT32)):(i.sample_count=this._readData(e,_.fields.FIELD_UINT32),i.sample_offset=this._readData(e,_.fields.FIELD_INT32)),this.entries.push(i);return this.localPos},_.boxes.CompositionOffsetBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.entry_count),n=0;n<this.entry_count;n++)0===this.version?(this._writeData(e,_.fields.FIELD_UINT32,this.entries[n].sample_count),this._writeData(e,_.fields.FIELD_UINT32,this.entries[n].sample_offset)):(this._writeData(e,_.fields.FIELD_UINT32,this.entries[n].sample_count),this._writeData(e,_.fields.FIELD_INT32,this.entries[n].sample_offset));return this.localPos},_.boxes.CompositionToDecodeBox=function(e){_.boxes.FullBox.call(this,"cslg",e)},_.boxes.CompositionToDecodeBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.CompositionToDecodeBox.prototype.constructor=_.boxes.CompositionToDecodeBox,_.boxes.CompositionToDecodeBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=5*_.fields.FIELD_INT32.getLength()},_.boxes.CompositionToDecodeBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.compositionToDTSShift=this._readData(e,_.fields.FIELD_INT32),this.leastDecodeToDisplayDelta=this._readData(e,_.fields.FIELD_INT32),this.greatestDecodeToDisplayDelta=this._readData(e,_.fields.FIELD_INT32),this.compositionStartTime=this._readData(e,_.fields.FIELD_INT32),this.compositionEndTime=this._readData(e,_.fields.FIELD_INT32),this.localPos},_.boxes.CompositionToDecodeBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_INT32,this.compositionToDTSShift),this._writeData(e,_.fields.FIELD_INT32,this.leastDecodeToDisplayDelta),this._writeData(e,_.fields.FIELD_INT32,this.greatestDecodeToDisplayDelta),this._writeData(e,_.fields.FIELD_INT32,this.compositionStartTime),this._writeData(e,_.fields.FIELD_INT32,this.compositionEndTime),this.localPos},_.boxes.SyncSampleBox=function(e){_.boxes.FullBox.call(this,"stss",e),this.entries=[]},_.boxes.SyncSampleBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SyncSampleBox.prototype.constructor=_.boxes.SyncSampleBox,_.boxes.SyncSampleBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength(),this.size+=_.fields.FIELD_UINT32.getLength()*this.entry_count},_.boxes.SyncSampleBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i={};for(this.entry_count=this._readData(e,_.fields.FIELD_UINT32),r=0;r<this.entry_count;r++)i={},i.sample_number=this._readData(e,_.fields.FIELD_UINT32),this.entries.push(i);return this.localPos},_.boxes.SyncSampleBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.entry_count),n=0;n<this.entry_count;n++)this._writeData(e,_.fields.FIELD_UINT32,this.entries[n].sample_number);return this.localPos},_.boxes.TrackReferenceBox=function(e){_.boxes.FullBox.call(this,"tref",e)},_.boxes.TrackReferenceBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.TrackReferenceBox.prototype.constructor=_.boxes.TrackReferenceBox,_.boxes.TrackReferenceBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength()*this.track_IDs.length},_.boxes.TrackReferenceBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),this.track_IDs=this._readArrayData(e,_.fields.FIELD_UINT32),this.localPos},_.boxes.TrackReferenceBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),this._writeArrayData(e,_.fields.FIELD_UINT32,this.track_IDs),this.localPos},_.boxes.OriginalFormatBox=function(e){_.boxes.Box.call(this,"frma",e)},_.boxes.OriginalFormatBox.prototype=Object.create(_.boxes.Box.prototype),_.boxes.OriginalFormatBox.prototype.constructor=_.boxes.OriginalFormatBox,_.boxes.OriginalFormatBox.prototype.computeLength=function(){_.boxes.Box.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength()},_.boxes.OriginalFormatBox.prototype.read=function(e,t,n){return this.localPos=t,this.localEnd=n,this.data_format=this._readData(e,_.fields.FIELD_UINT32),this.localPos},_.boxes.OriginalFormatBox.prototype.write=function(e,t){return _.boxes.Box.prototype.write.call(this,e,t),this._writeData(e,_.fields.FIELD_UINT32,this.data_format),this.localPos},_.boxes.PiffSampleEncryptionBox=function(e){_.boxes.FullBox.call(this,"sepiff",e,[162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244])},_.boxes.PiffSampleEncryptionBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.PiffSampleEncryptionBox.prototype.constructor=_.boxes.PiffSampleEncryptionBox,_.boxes.PiffSampleEncryptionBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this);var e=0,t=0;for(this.size+=_.fields.FIELD_UINT32.getLength(),1&this.flags&&(this.size+=_.fields.FIELD_UINT8.getLength()),e=0;e<this.sample_count;e++)if(this.size+=8,2&this.flags)for(this.size+=_.fields.FIELD_UINT16.getLength(),t=0;t<this.entry[e].NumberOfEntries;t++)this.size+=_.fields.FIELD_UINT16.getLength(),this.size+=_.fields.FIELD_UINT32.getLength()},_.boxes.PiffSampleEncryptionBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0,r=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.sample_count),1&this.flags&&this._writeData(e,_.fields.FIELD_UINT8,this.IV_size),n=0;n<this.sample_count;n++)if(this._writeBuffer(e,this.entry[n].InitializationVector,8),2&this.flags)for(this._writeData(e,_.fields.FIELD_UINT16,this.entry[n].NumberOfEntries),r=0;r<this.entry[n].NumberOfEntries;r++)this._writeData(e,_.fields.FIELD_UINT16,this.entry[n].clearAndCryptedData[r].BytesOfClearData),this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].clearAndCryptedData[r].BytesOfEncryptedData);return this.localPos},_.boxes.PiffSampleEncryptionBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i=0,o={},a={};for(this.sample_count=this._readData(e,_.fields.FIELD_UINT32),1&this.flags&&(this.IV_size=this._readData(e,_.fields.FIELD_UINT8)),this.entry=[],r=0;r<this.sample_count;r++){if(a={},a.InitializationVector=e.subarray(this.localPos,this.localPos+8),this.localPos+=8,2&this.flags)for(a.NumberOfEntries=this._readData(e,_.fields.FIELD_UINT16),a.clearAndCryptedData=[],i=0;i<a.NumberOfEntries;i++)o={},o.BytesOfClearData=this._readData(e,_.fields.FIELD_UINT16),o.BytesOfEncryptedData=this._readData(e,_.fields.FIELD_UINT32),a.clearAndCryptedData.push(o);this.entry.push(a)}return this.localPos},_.boxes.PiffTrackEncryptionBox=function(e){_.boxes.FullBox.call(this,"tepiff",e,[137,116,219,206,123,231,76,81,132,249,113,72,249,136,37,84])},_.boxes.PiffTrackEncryptionBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.PiffTrackEncryptionBox.prototype.constructor=_.boxes.PiffTrackEncryptionBox,_.boxes.PiffProtectionSystemSpecificHeaderBox=function(e){_.boxes.FullBox.call(this,"psshpiff",e,[208,138,79,24,16,243,74,130,182,200,50,216,171,161,131,211])},_.boxes.PiffProtectionSystemSpecificHeaderBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.PiffProtectionSystemSpecificHeaderBox.prototype.constructor=_.boxes.PiffProtectionSystemSpecificHeaderBox,_.boxes.TfxdBox=function(e){_.boxes.FullBox.call(this,"tfxd",e,[109,29,155,5,66,213,68,230,128,226,20,29,175,247,87,178])},_.boxes.TfxdBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.TfxdBox.prototype.constructor=_.boxes.TfxdBox,_.boxes.TfxdBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),1===this.version?this.size+=2*_.fields.FIELD_UINT64.getLength():this.size+=2*_.fields.FIELD_UINT32.getLength()},_.boxes.TfxdBox.prototype.write=function(e,t){return _.boxes.FullBox.prototype.write.call(this,e,t),1===this.version?(this._writeData(e,_.fields.FIELD_UINT64,this.fragment_absolute_time),this._writeData(e,_.fields.FIELD_UINT64,this.fragment_duration)):(this._writeData(e,_.fields.FIELD_UINT32,this.fragment_absolute_time),this._writeData(e,_.fields.FIELD_UINT32,this.fragment_duration)),this.localPos},_.boxes.TfxdBox.prototype.read=function(e,t,n){return _.boxes.FullBox.prototype.read.call(this,e,t,n),1===this.version?(this.fragment_absolute_time=this._readData(e,_.fields.FIELD_UINT64),this.fragment_duration=this._readData(e,_.fields.FIELD_UINT64)):(this.fragment_absolute_time=this._readData(e,_.fields.FIELD_UINT32),this.fragment_duration=this._readData(e,_.fields.FIELD_UINT32)),this.localPos},_.boxes.TfrfBox=function(e){_.boxes.FullBox.call(this,"tfrf",e,[212,128,126,242,202,57,70,149,142,84,38,203,158,70,167,159])},_.boxes.TfrfBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.TfrfBox.prototype.constructor=_.boxes.TfrfBox,_.boxes.TfrfBox.prototype.computeLength=function(){_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT8.getLength(),1===this.version?this.size+=2*_.fields.FIELD_UINT64.getLength()*this.fragment_count:this.size+=2*_.fields.FIELD_UINT32.getLength()*this.fragment_count},_.boxes.TfrfBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0;for(this._writeData(e,_.fields.FIELD_UINT8,this.fragment_count),n=0;n<this.fragment_count;n++)1===this.version?(this._writeData(e,_.fields.FIELD_UINT64,this.entry[n].fragment_absolute_time),this._writeData(e,_.fields.FIELD_UINT64,this.entry[n].fragment_duration)):(this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].fragment_absolute_time),this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].fragment_duration));return this.localPos},_.boxes.TfrfBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i={};for(this.fragment_count=this._readData(e,_.fields.FIELD_UINT8),this.entry=[],r=0;r<this.fragment_count;r++)i={},1===this.version?(i.fragment_absolute_time=this._readData(e,_.fields.FIELD_UINT64),i.fragment_duration=this._readData(e,_.fields.FIELD_UINT64)):(i.fragment_absolute_time=this._readData(e,_.fields.FIELD_UINT32),i.fragment_duration=this._readData(e,_.fields.FIELD_UINT32)),this.entry.push(i);return this.localPos},_.boxes.SubSampleInformationBox=function(e){_.boxes.FullBox.call(this,"subs",e)},_.boxes.SubSampleInformationBox.prototype=Object.create(_.boxes.FullBox.prototype),_.boxes.SubSampleInformationBox.prototype.constructor=_.boxes.SubSampleInformationBox,_.boxes.SubSampleInformationBox.prototype.computeLength=function(){for(_.boxes.FullBox.prototype.computeLength.call(this),this.size+=_.fields.FIELD_UINT32.getLength(),i=0;i<this.entry_count;i++)if(this.size+=_.fields.FIELD_UINT32.getLength(),this.size+=_.fields.FIELD_UINT16.getLength(),this.entry[i].subsample_count>0)for(j=0;j<this.entry[i].subsample_count;j++)1===this.version?this.size+=_.fields.FIELD_UINT32.getLength():this.size+=_.fields.FIELD_UINT16.getLength(),this.size+=_.fields.FIELD_UINT8.getLength(),this.size+=_.fields.FIELD_UINT8.getLength(),this.size+=_.fields.FIELD_UINT32.getLength()},_.boxes.SubSampleInformationBox.prototype.read=function(e,t,n){_.boxes.FullBox.prototype.read.call(this,e,t,n);var r=0,i=0,o={},a={};for(this.entry_count=this._readData(e,_.fields.FIELD_UINT32),this.entry=[],r=0;r<this.entry_count;r++){if(o={},o.sample_delta=this._readData(e,_.fields.FIELD_UINT32),o.subsample_count=this._readData(e,_.fields.FIELD_UINT16),o.subsample_count>0)for(o.subSampleEntries=[],i=0;i<o.subsample_count;i++)a={},1===this.version?a.subsample_size=this._readData(e,_.fields.FIELD_UINT32):a.subsample_size=this._readData(e,_.fields.FIELD_UINT16),a.subsample_priority=this._readData(e,_.fields.FIELD_UINT8),a.discardable=this._readData(e,_.fields.FIELD_UINT8),a.reserved=this._readData(e,_.fields.FIELD_UINT32),o.subSampleEntries.push(a);this.entry.push(o)}return this.localPos},_.boxes.SubSampleInformationBox.prototype.write=function(e,t){_.boxes.FullBox.prototype.write.call(this,e,t);var n=0,r=0;for(this._writeData(e,_.fields.FIELD_UINT32,this.entry_count),n=0;n<this.entry_count;n++)if(this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].sample_delta),this._writeData(e,_.fields.FIELD_UINT16,this.entry[n].subsample_count),this.entry[n].subsample_count>0)for(r=0;r<this.entry[n].subsample_count;r++)1===this.version?this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].subSampleEntries[r].subsample_size):this._writeData(e,_.fields.FIELD_UINT16,this.entry[n].subSampleEntries[r].subsample_size),this._writeData(e,_.fields.FIELD_UINT8,this.entry[n].subSampleEntries[r].subsample_priority),this._writeData(e,_.fields.FIELD_UINT8,this.entry[n].subSampleEntries[r].discardable),this._writeData(e,_.fields.FIELD_UINT32,this.entry[n].subSampleEntries[r].reserved);return this.localPos},_.registerTypeBoxes();var E=function(){return{pes:{},si:{},binary:{},ts:{},Pts:{},aac:{},h264:{}}}();function b(){"use strict";var e,t,n;try{e=navigator.userAgent.toLowerCase(),/msie (\d+\.\d+);/.test(e)?(n=Number(RegExp.$1),e.indexOf("trident/6")>-1&&(n=10),e.indexOf("trident/5")>-1&&(n=9),e.indexOf("trident/4")>-1&&(n=8),t="Internet Explorer"):e.indexOf("trident/7")>-1?(n=11,t="Internet Explorer"):/edge[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Edge"):/firefox[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Firefox"):/opera[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Opera"):/chrome[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Chrome"):/version[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Safari"):/rv[\/\s](\d+\.\d+)/.test(e)||/mozilla[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Mozilla"):/binget[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Library (BinGet)"):/curl[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Library (cURL)"):/java[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Library (Java)"):/libwww-perl[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Library (libwww-perl)"):/microsoft url control -[\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Library (Microsoft URL Control)"):/peach[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Library (Peach)"):/php[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Library (PHP)"):/pxyscand[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Library (pxyscand)"):/pycurl[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Library (PycURL)"):/python-urllib[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="Library (Python URLlib)"):/appengine-google/.test(e)?(n=Number(RegExp.$1),t="Cloud (Google AppEngine)"):/trident/.test(e)?(n=Number(RegExp.$1),t="Trident"):/adventurer/.test(e)?(n=Number(RegExp.$1),t="Adventurer"):/webkit[\/\s](\d+\.\d+)/.test(e)?(n=Number(RegExp.$1),t="WebKit"):(n="unknown",t="unknown")}catch(r){t="error",n="error"}return{name:t.replace(/\s+/g,""),version:n}}function T(){"use strict";var e,t,n,r;try{e=navigator.userAgent.toLowerCase(),n=-1!==e.indexOf("windows nt 10.0")?"Windows 10":-1!==e.indexOf("windows nt 6.3")?"Windows 8.1":-1!==e.indexOf("windows nt 6.2")?"Windows 8":-1!==e.indexOf("windows nt 6.1")?"Windows 7":-1!==e.indexOf("windows nt 6.0")?"Windows Vista/Windows Server 2008":-1!==e.indexOf("windows nt 5.2")?"Windows XP x64/Windows Server 2003":-1!==e.indexOf("windows nt 5.1")?"Windows XP":-1!==e.indexOf("windows nt 5.01")?"Windows 2000, Service Pack 1 (SP1)":-1!==e.indexOf("windows xp")?"Windows XP":-1!==e.indexOf("windows 2000")||-1!==e.indexOf("windows nt 5.0")?"Windows 2000":-1!==e.indexOf("windows nt 4.0")||-1!==e.indexOf("windows nt")||-1!==e.indexOf("winnt4.0")||-1!==e.indexOf("winnt")?"Windows NT 4.0":-1!==e.indexOf("windows me")||-1!==e.indexOf("win 9x 4.90")?"Windows ME":-1!==e.indexOf("windows 98")||-1!==e.indexOf("win98")?"Windows 98":-1!==e.indexOf("windows 95")||-1!==e.indexOf("windows_95")||-1!==e.indexOf("win95")?"Windows 95":-1!==e.indexOf("ce")?"Windows CE":-1!==e.indexOf("win16")?"Windows 3.11":-1!==e.indexOf("iemobile")||-1!==e.indexOf("wm5 pie")?"Windows Mobile":-1!==e.indexOf("windows phone 10.0")?"Windows Phone 10":-1!==e.indexOf("windows")?"Windows (Unknown Version)":-1!==e.indexOf("openbsd")?"Open BSD":-1!==e.indexOf("sunos")?"Sun OS":-1!==e.indexOf("ubuntu")?"Ubuntu":-1!==e.indexOf("ipad")?"iOS (iPad)":-1!==e.indexOf("ipod")?"iOS (iTouch)":-1!==e.indexOf("iphone")?"iOS (iPhone)":-1!==e.indexOf("mac os x beta")?"Mac O SX Beta":-1!==e.indexOf("mac os x 10")?/mac os x 10_(\d+)\_(\d+)/.test(e)?"Mac OS X 10."+RegExp.$1:"Mac OS X 10":-1!==e.indexOf("mac os x")?"Mac OS X":-1!==e.indexOf("mac_68000")||-1!==e.indexOf("68K")?"Mac OS Classic (68000)":-1!==e.indexOf("mac_powerpc")||-1!==e.indexOf("ppc mac")?"Mac OS Classic (PowerPC)":-1!==e.indexOf("macintosh")?"Mac OS Classic":-1!==e.indexOf("googletv")?"Android (GoogleTV)":-1!==e.indexOf("xoom")?"Android (Xoom)":-1!==e.indexOf("htc_flyer")?"Android (HTC Flyer)":-1!==e.indexOf("android")?"Android":-1!==e.indexOf("symbian")?"Symbian":-1!==e.indexOf("series60")?"Symbian (Series 60)":-1!==e.indexOf("series70")?"Symbian (Series 70)":-1!==e.indexOf("series80")?"Symbian (Series 80)":-1!==e.indexOf("series90")?"Symbian (Series 90)":-1!==e.indexOf("x11")||-1!==e.indexOf("nix")?"UNIX":-1!==e.indexOf("linux")?"Linux":-1!==e.indexOf("qnx")?"QNX":-1!==e.indexOf("os/2")?"IBM OS/2":-1!==e.indexOf("beos")?"BeOS":-1!==e.indexOf("blackberry95")?"Blackberry (Storm 1/2)":-1!==e.indexOf("blackberry97")?"Blackberry (Bold)":-1!==e.indexOf("blackberry96")?"Blackberry (Tour)":-1!==e.indexOf("blackberry89")?"Blackberry (Curve 2)":-1!==e.indexOf("blackberry98")?"Blackberry (Torch)":-1!==e.indexOf("playbook")?"Blackberry (Playbook)":-1!==e.indexOf("wnd.rim")?"Blackberry (IE/FF Emulator)":-1!==e.indexOf("blackberry")?"Blackberry":-1!==e.indexOf("palm")?"Palm OS":-1!==e.indexOf("webos")?"WebOS":-1!==e.indexOf("hpwos")?"WebOS (HP)":-1!==e.indexOf("blazer")?"Palm OS (Blazer)":-1!==e.indexOf("xiino")?"Palm OS (Xiino)":-1!==e.indexOf("kindle")?"Kindle":-1!==e.indexOf("wii")?"Nintendo (Wii)":-1!==e.indexOf("nintendo ds")?"Nintendo (DS)":-1!==e.indexOf("playstation 3")?"Sony (Playstation Console)":-1!==e.indexOf("playstation portable")?"Sony (Playstation Portable)":-1!==e.indexOf("webtv")?"MSN TV (WebTV)":-1!==e.indexOf("inferno")?"Inferno":"Unknown",t=navigator.platform.toLowerCase(),r=-1!==t.indexOf("x64")||-1!==e.indexOf("x86_64")||-1!==e.indexOf("x86-64")||-1!==e.indexOf("win64")||-1!==e.indexOf("x64;")||-1!==e.indexOf("amd64")||-1!==e.indexOf("wow64")||-1!==e.indexOf("x64_64")||-1!==e.indexOf("ia65")||-1!==e.indexOf("sparc64")||-1!==e.indexOf("ppc64")||-1!==e.indexOf("irix64")||-1!==e.indexOf("irix64")?"64":"32"}catch(i){n="error",r="error"}return{name:n.replace(/\s+/g,""),bits:"x"+r}}return"undefined"!==typeof e.exports?e.exports=E:window.mpegts=E,E.si.PSISection=function(e){this.m_table_id=e,this.m_section_syntax_indicator=1,this.m_section_length=E.si.PSISection.prototype.SECTION_LENGTH,this.m_transport_stream_id=0,this.m_version_number=0,this.m_current_next_indicator=!0,this.m_section_number=0,this.m_last_section_number=0,this.m_bValid=null},E.si.PSISection.prototype.parse=function(e){this.m_bValid=!1;var t=0,n=e[t];return t=0===n?t+1:t+n,this.m_table_id=e[t],t++,this.m_section_syntax_indicator=E.binary.getBitFromByte(e[t],0),this.m_section_length=E.binary.getValueFrom2Bytes(e.subarray(t,t+2),4),t+=2,this.m_transport_stream_id=E.binary.getValueFrom2Bytes(e.subarray(t,t+2)),t+=2,this.m_version_number=E.binary.getValueFromByte(e[t],2,5),this.m_current_next_indicator=E.binary.getBitFromByte(e[t],7),t++,this.m_section_number=e[t],t++,this.m_last_section_number=e[t],this.m_bValid=!0,t},E.si.PSISection.prototype.getSectionLength=function(){return this.m_section_length},E.si.PSISection.prototype.SECTION_LENGTH=9,E.si.PSISection.prototype.HEADER_LENGTH=8,E.aac.SAMPLING_FREQUENCY=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],E.aac.getAudioSpecificConfig=function(e){var t=E.binary.getValueFromByte(e[2],0,2),n=E.binary.getValueFromByte(e[2],2,4),r=E.binary.getValueFrom2Bytes(e.subarray(2,5),7,3),i=new Uint8Array(2);return i[0]=t+1<<3,i[0]|=(14&n)>>1,i[1]|=(1&n)<<7,i[1]|=r<<3,i},E.aac.parseADTS=function(e,t){var n,r,i=[],o={},a=0;while(a<e.length)r=a,o.syncword=(e[a]<<4)+((240&e[a+1])>>4),o.protection_absent=1&e[a+1],o.sampling_frequency_index=(60&e[a+2])>>2,o.channel_configuration=((1&e[a+2])<<1)+((192&e[a+3])>>6),o.aac_frame_length=((3&e[a+3])<<11)+(e[a+4]<<3)+((224&e[a+5])>>5),o.number_of_raw_data_blocks_in_frame=(3&e[a+6])>>2,a+=7,0===o.number_of_raw_data_blocks_in_frame&&(0===o.protection_absent&&(a+=2),n={},n.offset=a,n.length=o.aac_frame_length-(a-r),t&&t[r]&&(n.cts=t[r]),i.push(n),a+=n.length);return i},E.ts.AdaptationField=function(){this.m_cAFLength=null,this.m_bDiscontinuityInd=null,this.m_bRAI=null,this.m_bESPriority=null,this.m_bPCRFlag=null,this.m_bOPCRFlag=null,this.m_bSplicingPointFlag=null,this.m_bPrivateDataFlag=null,this.m_bAdaptationFieldExtFlag=null},E.ts.AdaptationField.prototype.getLength=function(){return this.m_cAFLength+1},E.ts.AdaptationField.prototype.parse=function(e){if(this.m_cAFLength=e[0],0!==this.m_cAFLength){var t=1;this.m_bDiscontinuityInd=E.binary.getBitFromByte(e[t],0),this.m_bRAI=E.binary.getBitFromByte(e[t],1),this.m_bESPriority=E.binary.getBitFromByte(e[t],2),this.m_bPCRFlag=E.binary.getBitFromByte(e[t],3),this.m_bOPCRFlag=E.binary.getBitFromByte(e[t],4),this.m_bSplicingPointFlag=E.binary.getBitFromByte(e[t],5),this.m_bPrivateDataFlag=E.binary.getBitFromByte(e[t],6),this.m_bAdaptationFieldExtFlag=E.binary.getBitFromByte(e[t],7)}},E.binary.readBytes=function(e,t,n){for(var r=0,i=0;i<n;i++)r<<=8,r+=e[t],t++;return r},E.binary.getBitFromByte=function(e,t){var n=0;return n+=1<<7-t,0!==(e&n)},E.binary.getValueFrom3Bytes=function(e,t,n){"undefined"===typeof n&&(n=-1),"undefined"===typeof t&&(t=0);var r=-1==n?-1:n-(16-t),i=-1==n?0:8-r,o=E.binary.getValueFromByte(e[0],t),a=E.binary.getValueFromByte(e[1]),s=E.binary.getValueFromByte(e[2],0,r,!1);return(o<<16&16711680|a<<8&65280|255&s)>>i},E.binary.getValueFrom2Bytes=function(e,t,n){"undefined"===typeof n&&(n=-1),"undefined"===typeof t&&(t=0);var r=-1==n?-1:n-(8-t),i=-1==n?0:8-r,o=E.binary.getValueFromByte(e[0],t),a=E.binary.getValueFromByte(e[1],0,r,!1);return(o<<8&65280|255&a)>>i},E.binary.getValueFromByte=function(e,t,n,r){var i=0,o=0;"undefined"===typeof n&&(n=-1),"undefined"===typeof t&&(t=0);var a=-1==n?7:t+n-1;for(o=t;o<=a;o++)i+=1<<7-o;var s=e&i;return(r||"undefined"===typeof r)&&(s>>=7-a),s},E.h264.getSequenceHeader=function(e){var t,n=-1,r=-1,i=0,o=null,a=0,s=0;while(i<e.length)if(0===e[i]&&0===e[i+1]&&0===e[i+2]&&1===e[i+3]){if(t=31&e[i+4],t>=E.h264.NALUTYPE_SPS&&t<=E.h264.NALUTYPE_PPS){if(-1===n&&(n=i),t===E.h264.NALUTYPE_SPS){var u=E.h264.parseSPS(e.subarray(i+5));a=u.pic_width_in_mbs_minus1+1<<4,s=u.pic_height_in_map_units_minus1+1<<4}}else n>0&&(r=i-n);if(t===E.h264.NALUTYPE_IDR||t===E.h264.NALUTYPE_NONIDR)break;i+=4}else{if(0===e[i]&&0===e[i+1]&&1===e[i+2]){n>0&&(r=i-n);break}i++}return-1===n||-1===r?null:(o=new Uint8Array(r),o.set(e.subarray(n,n+r)),{bytes:o,width:a,height:s})},E.h264.read_ue=function(e,t){var n=1,r=0,i=0;t._bit=t._byte>>t._bitPos&1,t._bitPos--,t._bitPos<0&&(t._byte=e[t._bytePos],t._bytePos++,t._bitPos=7);while(0===t._bit)i++,n<<=1,t._bit=t._byte>>t._bitPos&1,t._bitPos--,t._bitPos<0&&(t._byte=e[t._bytePos],t._bytePos++,t._bitPos=7);if(n-=1,r=0,i)while(i>0)t._bit=t._byte>>t._bitPos&1,t._bitPos--,r=(r<<1)+t._bit,i--,t._bitPos<0&&(t._byte=e[t._bytePos],t._bytePos++,t._bitPos=7);return n+=r,n},E.h264.read_flag=function(e,t){var n=0;return t._bit=t._byte>>t._bitPos&1,t._bitPos--,t._bitPos<0&&(t._byte=e[t._bytePos],t._bytePos++,t._bitPos=7),n=t._bit,n},E.h264.parseSPS=function(e){var t={profile_idc:0,constraint_set0_flag:0,constraint_set1_flag:0,constraint_set2_flag:0,constraint_set3_flag:0,level_idc:0,seq_parameter_set_id:0,chroma_format_idc:0,separate_colour_plane_flag:0,bit_depth_luma_minus8:0,bit_depth_chroma_minus8:0,qpprime_y_zero_transform_bypass_flag:0,seq_scaling_matrix_present_flag:0,log2_max_frame_num_minus4:0,pic_order_cnt_type:0,log2_max_pic_order_cnt_lsb_minus4:0,num_ref_frames:0,gaps_in_frame_num_value_allowed_flag:0,pic_width_in_mbs_minus1:0,pic_height_in_map_units_minus1:0},n={_byte:0,_bit:0,_bytePos:0,_bitPos:0};return n._bytePos=n._bitPos=0,n._byte=e[n._bytePos],n._bytePos++,t.profile_idc=n._byte,n._byte=e[n._bytePos],n._bytePos++,t.constraint_set0_flag=(128&n._byte)>>7,t.constraint_set1_flag=(64&n._byte)>>6,t.constraint_set2_flag=(32&n._byte)>>5,t.constraint_set3_flag=(16&n._byte)>>4,n._byte=e[n._bytePos],n._bytePos++,t.level_idc=n._byte,n._byte=e[n._bytePos],n._bytePos++,n._bitPos=7,t.seq_parameter_set_id=E.h264.read_ue(e,n),100!==t.profile_idc&&110!==t.profile_idc&&122!==t.profile_idc&&244!==t.profile_idc&&44!==t.profile_idc&&83!==t.profile_idc&&86!==t.profile_idc||(t.chroma_format_idc=E.h264.read_ue(e,n),3===t.chroma_format_idc&&(t.separate_colour_plane_flag=E.h264.read_flag(e,n)),t.bit_depth_luma_minus8=E.h264.read_ue(e,n),t.bit_depth_chroma_minus8=E.h264.read_ue(e,n),t.qpprime_y_zero_transform_bypass_flag=E.h264.read_flag(e,n),t.seq_scaling_matrix_present_flag=E.h264.read_flag(e,n),t.seq_scaling_matrix_present_flag),t.log2_max_frame_num_minus4=E.h264.read_ue(e,n),t.pic_order_cnt_type=E.h264.read_ue(e,n),0===t.pic_order_cnt_type?t.log2_max_pic_order_cnt_lsb_minus4=E.h264.read_ue(e,n):t.pic_order_cnt_type,t.num_ref_frames=E.h264.read_ue(e,n),t.gaps_in_frame_num_value_allowed_flag=E.h264.read_flag(e,n),t.pic_width_in_mbs_minus1=E.h264.read_ue(e,n),t.pic_height_in_map_units_minus1=E.h264.read_ue(e,n),t},E.h264.parseNALUs=function(e){var t,n=0,r=e.length,i=0,o=[];while(n<r)0===e[n]&&i++,1===e[n]&&i>=2&&(n++,o.length>0&&(o[o.length-1].size=n-(i+1)-o[o.length-1].offset),t={},t.type=31&e[n],t.offset=n,o.push(t),i=0),e[n]&&(i=0),n++;return o.length>0&&(o[o.length-1].size=n-o[o.length-1].offset),o},E.h264.bytestreamToMp4=function(e){var t=0,n=e.length,r=-1,i=0;while(t<n)0===e[t]&&0===e[t+1]&&0===e[t+2]&&1===e[t+3]?(r>=0&&(i=t-r-4,e[r]=(4278190080&i)>>24,e[r+1]=(16711680&i)>>16,e[r+2]=(65280&i)>>8,e[r+3]=255&i),r=t,t+=4):t++;i=t-r-4,e[r]=(4278190080&i)>>24,e[r+1]=(16711680&i)>>16,e[r+2]=(65280&i)>>8,e[r+3]=255&i},E.h264.isIDR=function(e){var t,n=0;while(n<e.length)if(0===e[n]&&0===e[n+1]&&1===e[n+2]){if(t=31&e[n+3],t===E.h264.NALUTYPE_IDR)return!0;n+=3}else n++;return!1},E.h264.NALUTYPE_NONIDR=1,E.h264.NALUTYPE_IDR=5,E.h264.NALUTYPE_SEI=6,E.h264.NALUTYPE_SPS=7,E.h264.NALUTYPE_PPS=8,E.h264.NALUTYPE_AU_DELIMITER=9,E.si.PAT=function(){E.si.PSISection.call(this,E.si.PAT.prototype.TABLE_ID),this.m_listOfProgramAssociation=[],this.m_network_pid=null},E.si.PAT.prototype=Object.create(E.si.PSISection.prototype),E.si.PAT.prototype.constructor=E.si.PAT,E.si.PAT.prototype.parse=function(e){var t=E.si.PSISection.prototype.parse.call(this,e);if(t++,this.m_bValid&&(this.m_bValid=!1,this.m_table_id===this.TABLE_ID)){var n=this.getSectionLength()-this.SECTION_LENGTH;while(n>=4){var r=new E.si.ProgramAssociation(e.subarray(t,t+4));0===r.getProgramNumber()?this.m_network_pid=r.getProgramMapPid():this.m_listOfProgramAssociation.push(r),n-=4,t+=4}this.m_bValid=!0}},E.si.PAT.prototype.getPmtPid=function(){var e=E.ts.TsPacket.prototype.UNDEFINED_PID;if(this.m_listOfProgramAssociation.length>=1){var t=this.m_listOfProgramAssociation[0];e=t.getProgramMapPid()}return e},E.si.PAT.prototype.TABLE_ID=0,E.si.PAT.prototype.PID=0,E.si.ProgramAssociation=function(e){this.m_program_number=0,this.m_program_map_pid=0,this.parse(e)},E.si.ProgramAssociation.prototype.getProgramNumber=function(){return this.m_program_number},E.si.ProgramAssociation.prototype.getProgramMapPid=function(){return this.m_program_map_pid},E.si.ProgramAssociation.prototype.getLength=function(){return 4},E.si.ProgramAssociation.prototype.parse=function(e){this.m_program_number=E.binary.getValueFrom2Bytes(e.subarray(0,2)),this.m_program_map_pid=E.binary.getValueFrom2Bytes(e.subarray(2,4),3,13)},E.pes.PesPacket=function(){this.m_cStreamID=null,this.m_nPESPacketLength=null,this.m_cPESScramblingCtrl=null,this.m_bPESpriority=null,this.m_bDataAlignement=null,this.m_bCopyright=null,this.m_bOriginalOrCopy=null,this.m_cPES_header_data_length=null,this.m_cPTS_DTS_flags=null,this.m_bESCR_flag=null,this.m_bES_rate_flag=null,this.m_bDSM_trick_mode_flag=null,this.m_bAdditional_copy_info_flag=null,this.m_bPES_CRC_flag=null,this.m_bPES_extension_flag=null,this.m_pPTS=null,this.m_pDTS=null,this.m_pESCR=null,this.m_ES_rate=null,this.m_DSM_trick_mode=null,this.m_Additional_copy_info=null,this.m_PES_CRC=null,this.m_cNbStuffingBytes=null,this.m_pPESExtension=null,this.m_pPrivateData=null,this.m_payloadArray=null,this.m_nPayloadLength=null,this.m_bDirty=null,this.m_bValid=!1},E.pes.PesPacket.prototype.parse=function(e){var t=0;this.m_nLength=e.length;var n=E.binary.getValueFrom3Bytes(e.subarray(t,t+3));if(n===this.START_CODE_PREFIX)if(t=3,this.m_cStreamID=e[t],t++,this.m_nPESPacketLength=E.binary.getValueFrom2Bytes(e.subarray(t,t+2)),t+=2,this.m_cStreamID!==E.ts.TsPacket.prototype.STREAM_ID_PADDING_STREAM){if(!this.hasOptionalPESHeader())return this.m_payloadArray=e.subarray(t+E.pes.PesPacket.prototype.FIXED_HEADER_LENGTH),this.m_nPayloadLength=this.m_nLength-E.pes.PesPacket.prototype.FIXED_HEADER_LENGTH,void(this.m_bValid=!0);var r=E.binary.getValueFromByte(e[t],0,2);if(2===r){this.m_cPESScramblingCtrl=E.binary.getValueFromByte(e[t],2,2),this.m_bPESpriority=E.binary.getBitFromByte(e[t],4),this.m_bDataAlignement=E.binary.getBitFromByte(e[t],5),this.m_bCopyright=E.binary.getBitFromByte(e[t],6),this.m_bOriginalOrCopy=E.binary.getBitFromByte(e[t],7),t++,this.m_cPTS_DTS_flags=E.binary.getValueFromByte(e[t],0,2),this.m_bESCR_flag=E.binary.getBitFromByte(e[t],2),this.m_bES_rate_flag=E.binary.getBitFromByte(e[t],3),this.m_bDSM_trick_mode_flag=E.binary.getBitFromByte(e[t],4),this.m_bAdditional_copy_info_flag=E.binary.getBitFromByte(e[t],5),this.m_bPES_CRC_flag=E.binary.getBitFromByte(e[t],6),this.m_bPES_extension_flag=E.binary.getBitFromByte(e[t],7),t++,this.m_cPES_header_data_length=255&e[t],t++,(this.m_cPTS_DTS_flags&E.pes.PesPacket.prototype.FLAG_PTS)==E.pes.PesPacket.prototype.FLAG_PTS&&(this.m_pPTS=new E.Pts(e.subarray(t,t+5)),t+=5),(this.m_cPTS_DTS_flags&E.pes.PesPacket.prototype.FLAG_DTS)==E.pes.PesPacket.prototype.FLAG_DTS&&(this.m_pDTS=new E.Pts(e.subarray(t,t+5)),t+=5),this.m_bESCR_flag&&(t+=6),this.m_bES_rate_flag&&(this.m_ES_rate=E.binary.getValueFrom3Bytes(e.subarray(t,t+3),1,22),t+=3),this.m_bDSM_trick_mode_flag&&(this.m_DSM_trick_mode=e[t],t++),this.m_bAdditional_copy_info_flag&&(this.m_Additional_copy_info=e[t],t++),this.m_bPES_CRC_flag&&(this.m_PES_CRC=E.binary.getValueFrom2Bytes(e.subarray(t,t+2)),t+=2),this.m_bPES_extension_flag;var i=E.pes.PesPacket.prototype.FIXED_HEADER_LENGTH+E.pes.PesPacket.prototype.FIXED_OPTIONAL_HEADER_LENGTH+this.m_cPES_header_data_length;this.m_cNbStuffingBytes=i-t,t+=this.m_cNbStuffingBytes,this.m_nPayloadLength=this.m_nLength-i,this.m_payloadArray=e.subarray(i,i+this.m_nPayloadLength),this.m_bValid=!0}}else this.m_bValid=!0},E.pes.PesPacket.prototype.hasOptionalPESHeader=function(){return this.m_cStreamID!==E.ts.TsPacket.prototype.STREAM_ID_PROGRAM_STREAM_MAP&&this.m_cStreamID!==E.ts.TsPacket.prototype.STREAM_ID_PADDING_STREAM&&this.m_cStreamID!==E.ts.TsPacket.prototype.STREAM_ID_PRIVATE_STREAM_2&&this.m_cStreamID!==E.ts.TsPacket.prototype.STREAM_ID_ECM_STREAM&&this.m_cStreamID!==E.ts.TsPacket.prototype.STREAM_ID_EMM_STREAM&&this.m_cStreamID!==E.ts.TsPacket.prototype.STREAM_ID_PROGRAM_STREAM_DIRECTORY&&this.m_cStreamID!==E.ts.TsPacket.prototype.STREAM_ID_DSMCC_STREAM&&this.m_cStreamID!==E.ts.TsPacket.prototype.STREAM_ID_H2221_TYPE_E_STREAM},E.pes.PesPacket.prototype.getHeaderLength=function(){return E.pes.PesPacket.prototype.FIXED_HEADER_LENGTH+E.pes.PesPacket.prototype.FIXED_OPTIONAL_HEADER_LENGTH+this.m_cPES_header_data_length},E.pes.PesPacket.prototype.getPayload=function(){return this.m_payloadArray},E.pes.PesPacket.prototype.getPts=function(){return this.m_pPTS},E.pes.PesPacket.prototype.getDts=function(){return this.m_pDTS},E.pes.PesPacket.prototype.START_CODE_PREFIX=1,E.pes.PesPacket.prototype.FIXED_HEADER_LENGTH=6,E.pes.PesPacket.prototype.FIXED_OPTIONAL_HEADER_LENGTH=3,E.pes.PesPacket.prototype.FLAG_DTS=1,E.pes.PesPacket.prototype.FLAG_PTS=2,E.si.PMT=function(){E.si.PSISection.call(this,E.si.PMT.prototype.TABLE_ID),this.m_listOfComponents=[],this.m_PCR_PID=null,this.m_program_info_length=null},E.si.PMT.prototype=Object.create(E.si.PSISection.prototype),E.si.PMT.prototype.constructor=E.si.PMT,E.si.PMT.prototype.parse=function(e){var t=E.si.PSISection.prototype.parse.call(this,e);if(t++,this.m_bValid&&(this.m_bValid=!1,this.m_table_id===this.TABLE_ID)){var n=this.getSectionLength()-this.SECTION_LENGTH;if(!(n<4)){this.m_PCR_PID=E.binary.getValueFrom2Bytes(e.subarray(t,t+2),3),t+=2,this.m_program_info_length=E.binary.getValueFrom2Bytes(e.subarray(t,t+2),4),t+=2,t+=this.m_program_info_length,n=this.m_section_length-this.SECTION_LENGTH-4-this.m_program_info_length;var r=null;while(n>0)r=new E.si.ESDescription(e.subarray(t,t+n)),this.m_listOfComponents.push(r),n-=r.getLength(),t+=r.getLength();this.m_bValid=!0}}},E.si.PMT.prototype.TABLE_ID=2,E.si.PMT.prototype.gStreamTypes=[{name:"Reserved",value:0,desc:"ITU-T | ISO/IEC Reserved"},{name:"MPEG1-Video",value:224,desc:"ISO/IEC 11172-2 Video"},{name:"MPEG2-Video",value:224,desc:"ITU-T Rec. H.262 | ISO/IEC 13818-2 Video or ISO/IEC 11172-2 constrained parameter video stream"},{name:"MPEG1-Audio",value:192,desc:"ISO/IEC 11172-3 Audio"},{name:"MPEG2-Audio",value:192,desc:"ISO/IEC 13818-3 Audio"},{name:"PRIVATE_SECTIONS",value:189,desc:"ITU-T Rec. H.222.0 | ISO/IEC 13818-1 private_sections"},{name:"PRIVATE",value:189,desc:"ITU-T Rec. H.222.0 | ISO/IEC 13818-1 PES packets containing private data"},{name:"MHEG",value:243,desc:"ISO/IEC 13522 MHEG"},{name:"MPEG1-DSM-CC",value:242,desc:"ITU-T Rec. H.222.0 | ISO/IEC 13818-1 Annex A DSM-CC"},{name:"H.222.1",value:244,desc:"ITU-T Rec. H.222.1"},{name:"DSM-CC_A",value:244,desc:"ISO/IEC 13818-6 type A"},{name:"DSM-CC_B",value:245,desc:"ISO/IEC 13818-6 type B"},{name:"DSM-CC_C",value:246,desc:"ISO/IEC 13818-6 type C"},{name:"DSM-CC_D",value:247,desc:"ISO/IEC 13818-6 type D"},{name:"Auxiliary",value:0,desc:"ITU-T Rec. H.222.0 | ISO/IEC 13818-1 auxiliary"},{name:"MPEG2-AAC-ADTS",value:192,desc:"ISO/IEC 13818-7 Audio with ADTS transport syntax"},{name:"MPEG4-Video",value:224,desc:"ISO/IEC 14496-2 Visual"},{name:"MPEG4-AAC-LATM",value:192,desc:"ISO/IEC 14496-3 Audio with the LATM transport syntax as defined in ISO/IEC 14496-3/AMD-1"},{name:"MPEG4-SL",value:250,desc:"ISO/IEC 14496-1 SL-packetized stream or FlexMux stream carried in PES packets"},{name:"MPEG4-SL",value:250,desc:"ISO/IEC 14496-1 SL-packetized stream or FlexMux stream carried in ISO/IEC14496_sections"},{name:"DSM-CC_SDP",value:0,desc:"ISO/IEC 13818-6 Synchronized Download Protocol"},{name:"META_PES",value:252,desc:"Metadata carried in PES packets"},{name:"META_SECTIONS",value:252,desc:"Metadata carried in metadata_sections"},{name:"META_DSM-CC",value:252,desc:"Metadata carried in ISO/IEC 13818-6 Data Carousel"},{name:"META_DSM-CC",value:252,desc:"Metadata carried in ISO/IEC 13818-6 Object Carousel"},{name:"META_DSM-CC",value:252,desc:"Metadata carried in ISO/IEC 13818-6 Synchronized Download Protocol"},{name:"MPEG2-IPMP",value:0,desc:"IPMP stream (defined in ISO/IEC 13818-11, MPEG-2 IPMP)"},{name:"H.264",value:224,desc:"AVC video stream as defined in ITU-T Rec. H.264 | ISO/IEC 14496-10 Video"},{name:"MPEG4AAC",value:192,desc:"ISO/IEC 14496-3 Audio, without using any additional transport syntax, such as DST, ALS and SLS"},{name:"MPEG4Text",value:0,desc:"ISO/IEC 14496-17 Text"},{name:"Aux. Video (23002-3)",value:30,desc:"Auxiliary video stream as defined in ISO/IEC 23002-3"},{name:"H.264-SVC",value:224,desc:"SVC video sub-bitstream of a video stream as defined in the Annex G of ITU-T Rec. H.264 | ISO/IEC 14496-10 Video"},{name:"H.264-MVC",value:224,desc:"MVC video sub-bitstream of a video stream as defined in the Annex H of ITU-T Rec. H.264 | ISO/IEC 14496-10 Video"},{name:"Reserved1",value:0,desc:"TBC Reserved"},{name:"Reserved2",value:0,desc:"TBC Reserved"},{name:"Reserved3",value:0,desc:"TBC Reserved"},{name:"HEVC",value:224,desc:"ITU.-T Rec H.26x | ISO/IEC 23008-2 video stream"}],E.si.PMT.prototype.MPEG2_VIDEO_STREAM_TYPE=2,E.si.PMT.prototype.AVC_VIDEO_STREAM_TYPE=27,E.si.PMT.prototype.MPEG1_AUDIO_STREAM_TYPE=3,E.si.PMT.prototype.MPEG2_AUDIO_STREAM_TYPE=4,E.si.PMT.prototype.AAC_AUDIO_STREAM_TYPE=17,E.si.PMT.prototype.AC3_AUDIO_STREAM_TYPE=6,E.si.PMT.prototype.SUB_STREAM_TYPE=6,E.si.PMT.prototype.STREAM_TYPE_MP1V=1,E.si.PMT.prototype.STREAM_TYPE_MP2V=2,E.si.PMT.prototype.STREAM_TYPE_MP1A=3,E.si.PMT.prototype.STREAM_TYPE_MP2A=4,E.si.PMT.prototype.STREAM_TYPE_PRIVATE=6,E.si.PMT.prototype.STREAM_TYPE_TELETEXT=6,E.si.PMT.prototype.STREAM_TYPE_DVBSUBTITLE=6,E.si.PMT.prototype.STREAM_TYPE_AC3=6,E.si.PMT.prototype.STREAM_TYPE_MP2AAC_ADTS=15,E.si.PMT.prototype.STREAM_TYPE_MP4AAC_LATM=17,E.si.PMT.prototype.STREAM_TYPE_H264=27,E.si.PMT.prototype.STREAM_TYPE_MP4AAC=28,E.si.PMT.prototype.STREAM_TYPE_AUX_23002_3=30,E.si.PMT.prototype.STREAM_TYPE_SVC=31,E.si.PMT.prototype.STREAM_TYPE_MVC=32,E.si.PMT.prototype.STREAM_TYPE_HEVC=36,E.si.ESDescription=function(e){this.m_stream_type=null,this.m_elementary_PID=null,this.m_ES_info_length=null,this.parse(e)},E.si.ESDescription.prototype.getStreamType=function(){return this.m_stream_type},E.si.ESDescription.prototype.getPID=function(){return this.m_elementary_PID},E.si.ESDescription.prototype.getLength=function(){return 5+this.m_ES_info_length},E.si.ESDescription.prototype.parse=function(e){this.m_stream_type=e[0],this.m_elementary_PID=E.binary.getValueFrom2Bytes(e.subarray(1,3),3),this.m_ES_info_length=E.binary.getValueFrom2Bytes(e.subarray(3,5),4)},E.Pts=function(e){var t,n,i=e[0]>>1&7;n=i>>2,t=(3&i)<<30>>>0;var o=e[1];t=(t|o<<22)>>>0;var a=e[2]>>1;t=(t|a<<15)>>>0;var s=e[3];t=(t|s<<7)>>>0;var u=e[4]>>1;t=(t|u)>>>0,this.m_lPTS=r.math.Long.fromBits(t,n).toNumber(),this.m_fPTS=this.m_lPTS/E.Pts.prototype.SYSTEM_CLOCK_FREQUENCY},E.Pts.prototype.getValue=function(){return this.m_lPTS},E.Pts.prototype.getValueInSeconds=function(){return this.m_fPTS},E.Pts.prototype.SYSTEM_CLOCK_FREQUENCY=9e4,E.ts.TsPacket=function(){this.m_cSync=null,this.m_bTransportError=null,this.m_bPUSI=null,this.m_bTransportPriority=null,this.m_nPID=null,this.m_cTransportScramblingCtrl=null,this.m_cAdaptationFieldCtrl=null,this.m_cContinuityCounter=null,this.m_pAdaptationField=null,this.m_payloadArray=null,this.m_cPayloadLength=null,this.m_bDirty=null,this.m_time=null,this.m_arrivalTime=null,this.m_bIgnored=null},E.ts.TsPacket.prototype.parse=function(e){var t=0;if(this.m_cSync=e[t],this.m_cSync===this.SYNC_WORD){if(t++,this.m_bTransportError=E.binary.getBitFromByte(e[t],0),this.m_bPUSI=E.binary.getBitFromByte(e[t],1),this.m_bTransportPriority=E.binary.getBitFromByte(e[t],2),this.m_nPID=E.binary.getValueFrom2Bytes(e.subarray(t,t+2),3,13),t+=2,this.m_cTransportScramblingCtrl=E.binary.getValueFromByte(e[t],0,2),this.m_cAdaptationFieldCtrl=E.binary.getValueFromByte(e[t],2,2),this.m_cContinuityCounter=E.binary.getValueFromByte(e[t],4,4),t++,2&this.m_cAdaptationFieldCtrl){var n=e[t];if(n+t>=this.TS_PACKET_SIZE)return;this.m_pAdaptationField=new E.ts.AdaptationField,this.m_pAdaptationField.parse(e.subarray(t)),t+=this.m_pAdaptationField.getLength()}0!==this.m_cAdaptationFieldCtrl&&1&this.m_cAdaptationFieldCtrl&&(this.m_cPayloadLength=this.TS_PACKET_SIZE-t,this.m_payloadArray=e.subarray(t,t+this.m_cPayloadLength))}},E.ts.TsPacket.prototype.checkSyncWord=function(e){var t=0,n=e[t];return n===this.SYNC_WORD},E.ts.TsPacket.prototype.getPid=function(){return this.m_nPID},E.ts.TsPacket.prototype.getPayload=function(){return this.m_payloadArray},E.ts.TsPacket.prototype.getPayloadLength=function(){return this.m_cPayloadLength},E.ts.TsPacket.prototype.getPusi=function(){return this.m_bPUSI},E.ts.TsPacket.prototype.hasAdaptationFieldOnly=function(){return 2===this.m_cAdaptationFieldCtrl},E.ts.TsPacket.prototype.SYNC_WORD=71,E.ts.TsPacket.prototype.TS_PACKET_SIZE=188,E.ts.TsPacket.prototype.UNDEFINED_PID=65535,E.ts.TsPacket.prototype.PAT_PID=0,E.ts.TsPacket.prototype.STREAM_ID_PROGRAM_STREAM_MAP=188,E.ts.TsPacket.prototype.STREAM_ID_PADDING_STREAM=190,E.ts.TsPacket.prototype.STREAM_ID_PADDING_STREAM=190,E.ts.TsPacket.prototype.STREAM_ID_PRIVATE_STREAM_2=191,E.ts.TsPacket.prototype.STREAM_ID_ECM_STREAM=240,E.ts.TsPacket.prototype.STREAM_ID_EMM_STREAM=241,E.ts.TsPacket.prototype.STREAM_ID_DSMCC_STREAM=242,E.ts.TsPacket.prototype.STREAM_ID_H2221_TYPE_E_STREAM=248,E.ts.TsPacket.prototype.STREAM_ID_PROGRAM_STREAM_DIRECTORY=255,o=this.dijon,d}))}).call(this,n("f28c"))},5080:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("e09e"),s=r(a),u=n("9ad3"),l=r(u),c=n("8760"),d=r(c),f=n("9ee1"),h=r(f),p=n("95b9"),m=r(p),g=n("a679"),y=r(g),v=n("473d"),_=r(v),E=n("f447"),b=r(E),T=n("010f"),S=r(T),w=n("5b8d"),x=r(w),I=n("4e7a"),A=r(I),D=n("467b"),R=r(D),M=n("589e"),C=r(M),N=n("6a2d"),L=r(N),P=n("e172"),O=r(P),F=n("2cc9");function k(e){e=e||{};var t=void 0,n=void 0,r=this.context,i=(0,A["default"])(r).getInstance(),a=e.timelineConverter,u=e.errHandler,c=e.BASE64,f="urn:dvb:dash:profile:dvb-dash:2014",p=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e};function g(){n=(0,C["default"])(r).getInstance().getLogger(t)}function v(e,t){var n=void 0,r=void 0,i=void 0,a=void 0,u=void 0,l=void 0,c=!1,d=!1;if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.hasOwnProperty("ContentComponent_asArray")&&(a=e.ContentComponent_asArray),u=t!==o["default"].TEXT?new RegExp(t):new RegExp("(vtt|ttml)"),e.Representation_asArray&&e.Representation_asArray.length&&e.Representation_asArray.length>0){var f=oe(e.Representation_asArray[0]);if(f&&f.length>0&&F.THUMBNAILS_SCHEME_ID_URIS.indexOf(f[0].schemeIdUri)>=0)return t===o["default"].IMAGE;if(e.Representation_asArray[0].hasOwnProperty(s["default"].CODECS)&&(l=e.Representation_asArray[0].codecs,0===l.search(o["default"].STPP)||0===l.search(o["default"].WVTT)))return t===o["default"].FRAGMENTED_TEXT}if(a){if(a.length>1)return t===o["default"].MUXED;a[0]&&a[0].contentType===t&&(c=!0,d=!0)}if(e.hasOwnProperty(s["default"].MIME_TYPE)&&(c=u.test(e.mimeType),d=!0),!d){n=0,r=e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0;while(!d&&n<r)i=e.Representation_asArray[n],i.hasOwnProperty(s["default"].MIME_TYPE)&&(c=u.test(i.mimeType),d=!0),n++}return c}function E(e){return v(e,o["default"].AUDIO)}function T(e){return v(e,o["default"].VIDEO)}function w(e){return v(e,o["default"].FRAGMENTED_TEXT)}function I(e){return v(e,o["default"].MUXED)}function D(e){return v(e,o["default"].IMAGE)}function R(e){return"text/vtt"===e||"application/ttml+xml"===e}function M(e){var t="";return e&&e.hasOwnProperty(s["default"].LANG)&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t}function N(e){return e&&e.hasOwnProperty(s["default"].VIEWPOINT)?e.Viewpoint:null}function P(e){return e&&e.hasOwnProperty(s["default"].ROLE_ASARRAY)?e.Role_asArray:[]}function k(e){return e&&e.hasOwnProperty(s["default"].ACCESSIBILITY_ASARRAY)?e.Accessibility_asArray:[]}function B(e){return e&&e.hasOwnProperty(s["default"].AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]}function U(){return function(e,t){return e.bandwidth-t.bandwidth}}function H(e){return e&&void 0!==e.Representation_asArray&&null!==e.Representation_asArray&&e.Representation_asArray.sort(U()),e}function j(e,t){return e&&e.Period_asArray&&p(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[]}function K(e,t,n){var r=j(t,n),i=void 0,o=void 0;for(i=0,o=r.length;i<o;i++)if(r[i].hasOwnProperty(s["default"].ID)&&r[i].id===e)return r[i];return null}function V(e,t,n){var r=j(t,n);return r.length>0&&p(e)?r[e]:null}function q(e,t,n){var i=j(t,n),o=i.length;if(e)for(var a=0;a<o;a++){var s=(0,x["default"])(r).getInstance();if(s.areEqual(i[a],e))return a}return-1}function G(e,t,n){var r=j(e,t),i=void 0,o=void 0,a=[];for(i=0,o=r.length;i<o;i++)v(r[i],n)&&a.push(H(r[i]));return a}function Y(e,t,n){var r=null;if(e&&e.Representation_asArray&&e.Representation_asArray.length>0){var i=p(t)&&t>=0&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0];i&&(r=i.mimeType+';codecs="'+i.codecs+'"',n&&void 0!==i.width&&(r+=';width="'+i.width+'";height="'+i.height+'"'))}return r}function z(e){return e&&e.Representation_asArray&&e.Representation_asArray.length>0?e.Representation_asArray[0].mimeType:null}function W(e){return e&&e.hasOwnProperty(s["default"].CENC_DEFAULT_KID)?e[s["default"].CENC_DEFAULT_KID]:null}function X(e){if(!e.Label_asArray||!e.Label_asArray.length)return[];for(var t=[],n=0;n<e.Label_asArray.length;n++)t.push({lang:e.Label_asArray[n].lang,text:e.Label_asArray[n].__text||e.Label_asArray[n]});return t}function $(e){return e&&e.hasOwnProperty(s["default"].CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null}function Q(e){var t=!1;return e&&e.hasOwnProperty("type")&&(t=e.type===s["default"].DYNAMIC),t}function J(e,t){var n=!1;return e&&e.profiles&&e.profiles.length>0&&(n=-1!==e.profiles.indexOf(t)),n}function Z(e){return J(e,f)}function ee(e){var t=void 0;return t=e&&e.hasOwnProperty(s["default"].MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,t}function te(e){return e&&e.bandwidth?e.bandwidth:NaN}function ne(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=NaN;return e&&e.hasOwnProperty(s["default"].MINIMUM_UPDATE_PERIOD)&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)}function re(e){return e&&e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0}function ie(e){if(!e||!e.Representation_asArray||!e.Representation_asArray.length)return null;var t=H(e),n=t.Representation_asArray;return n.map((function(e){return{bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null}}))}function oe(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map((function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}})):null}function ae(e,t){return t&&t.Representation_asArray&&t.Representation_asArray.length>0&&p(e)?t.Representation_asArray[e]:null}function se(e){if(e&&e.period&&p(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&p(e.index))return H(t.AdaptationSet_asArray[e.index])}}function ue(e){var t=e.S_asArray[e.S_asArray.length-1];return!t.hasOwnProperty("r")||t.r>=0}function le(e){var t=se(e).Representation_asArray[0],n=void 0;return t.hasOwnProperty(s["default"].SEGMENT_LIST)?(n=t.SegmentList,!n.hasOwnProperty(s["default"].SEGMENT_TIMELINE)||ue(n.SegmentTimeline)):!(!t.hasOwnProperty(s["default"].SEGMENT_TEMPLATE)||(n=t.SegmentTemplate,!n.hasOwnProperty(s["default"].SEGMENT_TIMELINE)))&&ue(n.SegmentTimeline)}function ce(e){var t=[],n=se(e),r=void 0,i=void 0;if(e&&e.period&&p(e.period.index)){var o=be(e.period.mpd.manifest);o&&(i=o[0])}if(n&&n.Representation_asArray)for(var u=0,c=n.Representation_asArray.length;u<c;++u){var d=n.Representation_asArray[u],f=new l["default"];if(f.index=u,f.adaptation=e,d.hasOwnProperty(s["default"].ID)&&(f.id=d.id),d.hasOwnProperty(s["default"].CODECS)&&(f.codecs=d.codecs),d.hasOwnProperty(s["default"].CODEC_PRIVATE_DATA)&&(f.codecPrivateData=d.codecPrivateData),d.hasOwnProperty(s["default"].BANDWITH)&&(f.bandwidth=d.bandwidth),d.hasOwnProperty(s["default"].WIDTH)&&(f.width=d.width),d.hasOwnProperty(s["default"].HEIGHT)&&(f.height=d.height),d.hasOwnProperty(s["default"].SCAN_TYPE)&&(f.scanType=d.scanType),d.hasOwnProperty(s["default"].MAX_PLAYOUT_RATE)&&(f.maxPlayoutRate=d.maxPlayoutRate),d.hasOwnProperty(s["default"].SEGMENT_BASE)?(r=d.SegmentBase,f.segmentInfoType=s["default"].SEGMENT_BASE):d.hasOwnProperty(s["default"].SEGMENT_LIST)?(r=d.SegmentList,r.hasOwnProperty(s["default"].SEGMENT_TIMELINE)?(f.segmentInfoType=s["default"].SEGMENT_TIMELINE,f.useCalculatedLiveEdgeTime=ue(r.SegmentTimeline)):(f.segmentInfoType=s["default"].SEGMENT_LIST,f.useCalculatedLiveEdgeTime=!0)):d.hasOwnProperty(s["default"].SEGMENT_TEMPLATE)?(r=d.SegmentTemplate,r.hasOwnProperty(s["default"].SEGMENT_TIMELINE)?(f.segmentInfoType=s["default"].SEGMENT_TIMELINE,f.useCalculatedLiveEdgeTime=ue(r.SegmentTimeline)):f.segmentInfoType=s["default"].SEGMENT_TEMPLATE,r.hasOwnProperty(s["default"].INITIALIZATION_MINUS)&&(f.initialization=r.initialization.split("$Bandwidth$").join(d.bandwidth).split("$RepresentationID$").join(d.id))):f.segmentInfoType=s["default"].BASE_URL,f.essentialProperties=oe(d),r){if(r.hasOwnProperty(s["default"].INITIALIZATION)){var h=r.Initialization;h.hasOwnProperty(s["default"].SOURCE_URL)?f.initialization=h.sourceURL:h.hasOwnProperty(s["default"].RANGE)&&(f.range=h.range)}else d.hasOwnProperty(s["default"].MIME_TYPE)&&R(d.mimeType)&&(f.range=0);r.hasOwnProperty(s["default"].TIMESCALE)&&(f.timescale=r.timescale),r.hasOwnProperty(s["default"].DURATION)&&(f.segmentDuration=r.duration/f.timescale),r.hasOwnProperty(s["default"].MEDIA)&&(f.media=r.media),r.hasOwnProperty(s["default"].START_NUMBER)&&(f.startNumber=r.startNumber),r.hasOwnProperty(s["default"].INDEX_RANGE)&&(f.indexRange=r.indexRange),r.hasOwnProperty(s["default"].PRESENTATION_TIME_OFFSET)&&(f.presentationTimeOffset=r.presentationTimeOffset/f.timescale),r.hasOwnProperty(s["default"].AVAILABILITY_TIME_OFFSET)?f.availabilityTimeOffset=r.availabilityTimeOffset:i&&void 0!==i.availabilityTimeOffset&&(f.availabilityTimeOffset=i.availabilityTimeOffset),r.hasOwnProperty(s["default"].AVAILABILITY_TIME_COMPLETE)?f.availabilityTimeComplete="false"!==r.availabilityTimeComplete:i&&void 0!==i.availabilityTimeComplete&&(f.availabilityTimeComplete=i.availabilityTimeComplete)}f.MSETimeOffset=a.calcMSETimeOffset(f),f.path=[e.period.index,e.index,u],t.push(f)}return t}function de(e){var t=e&&p(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,n=[],r=void 0,i=void 0,a=void 0;if(t&&t.AdaptationSet_asArray)for(a=0;a<t.AdaptationSet_asArray.length;a++)i=t.AdaptationSet_asArray[a],r=new d["default"],i.hasOwnProperty(s["default"].ID)&&(r.id=i.id),r.index=a,r.period=e,I(i)?r.type=o["default"].MUXED:E(i)?r.type=o["default"].AUDIO:T(i)?r.type=o["default"].VIDEO:w(i)?r.type=o["default"].FRAGMENTED_TEXT:D(i)?r.type=o["default"].IMAGE:r.type=o["default"].TEXT,n.push(r);return n}function fe(e){var t=!!e&&Q(e.manifest),r=[],i=null,o=null,a=null,u=null,l=void 0,c=void 0;for(c=0,l=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;c<l;c++)o=e.manifest.Period_asArray[c],o.hasOwnProperty(s["default"].START)?(u=new h["default"],u.start=o.start):null!==i&&i.hasOwnProperty(s["default"].DURATION)&&null!==a?(u=new h["default"],u.start=parseFloat((a.start+a.duration).toFixed(5))):0!==c||t||(u=new h["default"],u.start=0),null!==a&&isNaN(a.duration)&&(null!==u?a.duration=parseFloat((u.start-a.start).toFixed(5)):n.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==u&&(u.id=he(o,c),u.index=c,u.mpd=e,o.hasOwnProperty(s["default"].DURATION)&&(u.duration=o.duration),r.push(u),i=o,a=u),o=null,u=null;return 0===r.length||null!==a&&isNaN(a.duration)&&(a.duration=parseFloat((me(a)-a.start).toFixed(5))),r}function he(e,t){if(!e)throw new Error("Period cannot be null or undefined");var n=h["default"].DEFAULT_ID+"_"+t;return e.hasOwnProperty(s["default"].ID)&&e.id.length>0&&"__proto__"!==e.id&&(n=e.id),n}function pe(e){var t=new m["default"];return e&&(t.manifest=e,e.hasOwnProperty(s["default"].AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):t.availabilityStartTime=new Date(e.loadedTime.getTime()),e.hasOwnProperty(s["default"].AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(s["default"].MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(s["default"].MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(o["default"].SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(s["default"].TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(s["default"].MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration)),t}function me(e){var t=Q(e.mpd.manifest),n=void 0;return e.mpd.manifest.mediaPresentationDuration?n=e.mpd.manifest.mediaPresentationDuration:e.duration?n=e.duration:t?n=Number.POSITIVE_INFINITY:u.error(new L["default"](O["default"].MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",e)),n}function ge(e){var t=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,n=t?t.Period_asArray:null,r=n&&e&&p(e.index)?n[e.index].EventStream_asArray:null,i=[],a=void 0,u=void 0;if(r)for(a=0;a<r.length;a++){var l=new S["default"];if(l.period=e,l.timescale=1,!r[a].hasOwnProperty(o["default"].SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(l.schemeIdUri=r[a].schemeIdUri,r[a].hasOwnProperty(s["default"].TIMESCALE)&&(l.timescale=r[a].timescale),r[a].hasOwnProperty(s["default"].VALUE)&&(l.value=r[a].value),u=0;r[a].Event_asArray&&u<r[a].Event_asArray.length;u++){var d=new _["default"];d.presentationTime=0,d.eventStream=l,r[a].Event_asArray[u].hasOwnProperty(s["default"].PRESENTATION_TIME)&&(d.presentationTime=r[a].Event_asArray[u].presentationTime),r[a].Event_asArray[u].hasOwnProperty(s["default"].DURATION)&&(d.duration=r[a].Event_asArray[u].duration),r[a].Event_asArray[u].hasOwnProperty(s["default"].ID)&&(d.id=r[a].Event_asArray[u].id),r[a].Event_asArray[u].Signal&&r[a].Event_asArray[u].Signal.Binary?d.messageData=c.decodeArray(r[a].Event_asArray[u].Signal.Binary):d.messageData=r[a].Event_asArray[u].messageData||r[a].Event_asArray[u].__text,i.push(d)}}return i}function ye(e,t){var n=[],r=void 0;if(!e)return n;for(r=0;r<e.length;r++){var i=new S["default"];if(i.timescale=1,i.representation=t,!e[r].hasOwnProperty(o["default"].SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");i.schemeIdUri=e[r].schemeIdUri,e[r].hasOwnProperty(s["default"].TIMESCALE)&&(i.timescale=e[r].timescale),e[r].hasOwnProperty(s["default"].VALUE)&&(i.value=e[r].value),n.push(i)}return n}function ve(e,t){var n=void 0,r=void 0,i=void 0;return e&&e.Period_asArray&&t&&t.period&&p(t.period.index)&&(r=e.Period_asArray[t.period.index],r&&r.AdaptationSet_asArray&&p(t.index)&&(i=r.AdaptationSet_asArray[t.index],i&&(n=i.InbandEventStream_asArray))),ye(n,null)}function _e(e,t){var n=void 0,r=void 0,i=void 0,o=void 0;return e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&p(t.adaptation.period.index)&&(r=e.Period_asArray[t.adaptation.period.index],r&&r.AdaptationSet_asArray&&p(t.adaptation.index)&&(i=r.AdaptationSet_asArray[t.adaptation.index],i&&i.Representation_asArray&&p(t.index)&&(o=i.Representation_asArray[t.index],o&&(n=o.InbandEventStream_asArray)))),ye(n,t)}function Ee(e){var t=Q(e),n=!!e&&e.hasOwnProperty(s["default"].AVAILABILITY_START_TIME),r=e?e.UTCTiming_asArray:null,i=[];return(t||n)&&r&&r.forEach((function(e){var t=new y["default"];e.hasOwnProperty(o["default"].SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(s["default"].VALUE)&&(t.value=e.value.toString(),i.push(t)))})),i}function be(e){var t=[],n=e.BaseURL_asArray||[e.baseUri],r=!1;return n.some((function(n){if(n){var o=new b["default"],a=n.__text||n;return i.isRelative(a)&&(r=!0,e.baseUri&&(a=i.resolve(a,e.baseUri))),o.url=a,n.hasOwnProperty(s["default"].SERVICE_LOCATION)&&n.serviceLocation.length?o.serviceLocation=n.serviceLocation:o.serviceLocation=a,n.hasOwnProperty(s["default"].DVB_PRIORITY)&&(o.dvb_priority=n[s["default"].DVB_PRIORITY]),n.hasOwnProperty(s["default"].DVB_WEIGHT)&&(o.dvb_weight=n[s["default"].DVB_WEIGHT]),n.hasOwnProperty(s["default"].AVAILABILITY_TIME_OFFSET)&&(o.availabilityTimeOffset=n[s["default"].AVAILABILITY_TIME_OFFSET]),n.hasOwnProperty(s["default"].AVAILABILITY_TIME_COMPLETE)&&(o.availabilityTimeComplete="false"!==n[s["default"].AVAILABILITY_TIME_COMPLETE]),t.push(o),r}})),t}function Te(e){if(e&&e.hasOwnProperty(o["default"].LOCATION))return e.Location=e.Location_asArray[0],e.Location}return t={getIsTypeOf:v,getIsTextTrack:R,getLanguageForAdaptation:M,getViewpointForAdaptation:N,getRolesForAdaptation:P,getAccessibilityForAdaptation:k,getAudioChannelConfigurationForAdaptation:B,getAdaptationForIndex:V,getIndexForAdaptation:q,getAdaptationForId:K,getAdaptationsForType:G,getCodec:Y,getMimeType:z,getKID:W,getLabelsForAdaptation:X,getContentProtectionData:$,getIsDynamic:Q,getIsDVB:Z,getDuration:ee,getBandwidth:te,getManifestUpdatePeriod:ne,getRepresentationCount:re,getBitrateListForAdaptation:ie,getRepresentationFor:ae,getRepresentationsForAdaptation:ce,getAdaptationsForPeriod:de,getRegularPeriods:fe,getMpd:pe,getEventsForPeriod:ge,getEventStreamForAdaptationSet:ve,getEventStreamForRepresentation:_e,getUTCTimingSources:Ee,getBaseURLsFromElement:be,getRepresentationSortFunction:U,getLocation:Te,getUseCalculatedLiveEdgeTimeForAdaptation:le},g(),t}k.__dashjs_factory_name="DashManifestModel",t["default"]=R["default"].getSingletonFactory(k),e.exports=t["default"]},"50ed":function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},5168:function(e,t,n){var r=n("dbdb")("wks"),i=n("62a0"),o=n("e53d").Symbol,a="function"==typeof o,s=e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))};s.store=r},"520a":function(e,t,n){"use strict";var r=n("0bfb"),i=RegExp.prototype.exec,o=String.prototype.replace,a=i,s="lastIndex",u=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e[s]||0!==t[s]}(),l=void 0!==/()??/.exec("")[1],c=u||l;c&&(a=function(e){var t,n,a,c,d=this;return l&&(n=new RegExp("^"+d.source+"$(?!\\s)",r.call(d))),u&&(t=d[s]),a=i.call(d,e),u&&a&&(d[s]=d.global?a.index+a[0].length:t),l&&a&&a.length>1&&o.call(a[0],n,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(a[c]=void 0)})),a}),e.exports=a},"52a7":function(e,t){t.f={}.propertyIsEnumerable},"53e2":function(e,t,n){var r=n("07e3"),i=n("241e"),o=n("5559")("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},5444:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("d0d2"),o=r(i),a=n("7b70"),s=r(a),u="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",l=s["default"].WIDEVINE_KEYSTEM_STRING,c="urn:uuid:"+u;function d(e){e=e||{};var t=void 0,n=null,r=e.BASE64;function i(e){e&&(n=e)}function a(e){return o["default"].parseInitDataFromContentProtection(e,r)}function s(){return null}function d(e){return new Uint8Array(e)}function f(){return null}function h(){return null}function p(e){return n&&n.sessionId?n.sessionId:e&&e.sessionId?e.sessionId:null}return t={uuid:u,schemeIdURI:c,systemString:l,init:i,getInitData:a,getRequestHeadersFromMessage:s,getLicenseRequestFromMessage:d,getLicenseServerURLFromInitData:f,getCDMData:h,getSessionId:p},t}d.__dashjs_factory_name="KeySystemWidevine",t["default"]=dashjs.FactoryMaker.getSingletonFactory(d),e.exports=t["default"]},"54b2":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("1d48"),o=r(i),a=n("8a43"),s=r(a),u=n("804f"),l=r(u),c=n("2f4d"),d=r(c),f=n("467b"),h=r(f),p=n("589e"),m=r(p),g=n("b4f1"),y=r(g),v=n("bb46"),_=r(v),E=n("0757"),b=n("41ee"),T=r(b),S=n("7865"),w=r(S),x=n("6a2d"),I=r(x),A=n("e172"),D=r(A);function R(){var e=this.context,t=(0,s["default"])(e).getInstance(),n=void 0,r=void 0,i=void 0,a=void 0,u=void 0,c=void 0,f=void 0,h=void 0,p=void 0;function g(){r=(0,m["default"])(e).getInstance().getLogger(n),i={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}}}function v(){u=(0,y["default"])(e).getInstance(),h=(0,w["default"])(e).create({errHandler:a,metricsModel:c,mediaPlayerModel:f,requestModifier:u})}function b(e){if(!e.baseURLController||!e.metricsModel||!e.mediaPlayerModel||!e.errHandler)throw new Error(d["default"].MISSING_CONFIG_ERROR);p=e.baseURLController,c=e.metricsModel,f=e.mediaPlayerModel,a=e.errHandler}function S(t){var n=[],r=void 0,o=void 0,a=(0,l["default"])(e).create({data:t});a.consumeTagAndSize(i.Segment.Cues);while(a.moreData()&&a.consumeTagAndSize(i.Segment.Cues.CuePoint,!0)){r={},r.CueTime=a.parseTag(i.Segment.Cues.CuePoint.CueTime),r.CueTracks=[];while(a.moreData()&&a.consumeTag(i.Segment.Cues.CuePoint.CueTrackPositions,!0)){var s=a.getMatroskaCodedNum(),u=a.getPos();if(o={},o.Track=a.parseTag(i.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===o.Track)throw new Error("Cue track cannot be 0");o.ClusterPosition=a.parseTag(i.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),r.CueTracks.push(o),a.setPos(u+s)}if(0===r.CueTracks.length)throw new Error("Mandatory cuetrack not found");n.push(r)}if(0===n.length)throw new Error("mandatory cuepoint not found");return n}function x(e,t,n,i){var o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,d=void 0,f=void 0;for(a=S(e),s=[],l=0,c=a.length;l<c;l+=1)u=new _["default"],o=0,o=l<a.length-1?a[l+1].CueTime-a[l].CueTime:i-a[l].CueTime,u.duration=o,u.startTime=a[l].CueTime,u.timescale=1e3,d=a[l].CueTracks[0].ClusterPosition+t,f=l<a.length-1?a[l+1].CueTracks[0].ClusterPosition+t-1:n-1,u.mediaRange=d+"-"+f,s.push(u);return r.debug("Parsed cues: "+s.length+" cues."),s}function A(t,n,o,a){var s=(0,l["default"])(e).create({data:t}),u=void 0,c=void 0,d=o.split("-"),f=null,p={url:n,range:{start:parseFloat(d[0]),end:parseFloat(d[1])},request:f},m=void 0,g=void 0;r.debug("Parse EBML header: "+p.url),s.skipOverElement(i.EBML),s.consumeTag(i.Segment),m=s.getMatroskaCodedNum(),m+=s.getPos(),g=s.getPos();while(s.moreData()&&!s.consumeTagAndSize(i.Segment.Info,!0))if(!(s.skipOverElement(i.Segment.SeekHead,!0)||s.skipOverElement(i.Segment.Tracks,!0)||s.skipOverElement(i.Segment.Cues,!0)||s.skipOverElement(i.Void,!0)))throw new Error("no valid top level element found");while(void 0===u){var y=s.getMatroskaCodedNum(!0),v=s.getMatroskaCodedNum();switch(y){case i.Segment.Info.Duration.tag:u=s[i.Segment.Info.Duration.parse](v);break;default:s.setPos(s.getPos()+v);break}}f=L(p);var _=function(e){c=x(e,g,m,u),a(c)},E=function(){r.error("Download Error: Cues "+p.url),a(null)};h.load({request:f,success:_,error:E}),r.debug("Perform cues load: "+p.url+" bytes="+p.range.start+"-"+p.range.end)}function R(){if(!p||!p.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function M(e,n){R();var i=null,a=p.resolve(e.path),s=a?a.url:void 0,u=e.range.split("-"),l=n||{range:{start:parseFloat(u[0]),end:parseFloat(u[1])},request:i,url:s,init:!0};r.info("Start loading initialization."),i=L(l);var c=function(){t.trigger(o["default"].INITIALIZATION_LOADED,{representation:e})},d=function(){t.trigger(o["default"].INITIALIZATION_LOADED,{representation:e})};h.load({request:i,success:c,error:d}),r.debug("Perform init load: "+l.url)}function C(e,t,n,i){R();var o=null,a=p.resolve(e.path),s=a?a.url:void 0,u=8192,l={bytesLoaded:0,bytesToLoad:u,range:{start:0,end:u},request:o,url:s,init:!1};i=i||N,o=L(l),r.debug("Parsing ebml header");var c=function(r){A(r,s,n,(function(n){i(n,e,t)}))},d=function(){i(null,e,t)};h.load({request:o,success:c,error:d})}function N(e,n,r){e?t.trigger(o["default"].SEGMENTS_LOADED,{segments:e,representation:n,mediaType:r}):t.trigger(o["default"].SEGMENTS_LOADED,{segments:null,representation:n,mediaType:r,error:new I["default"](D["default"].SEGMENT_BASE_LOADER_ERROR_CODE,D["default"].SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function L(e){var t=new T["default"];return t.type=e.init?E.HTTPRequest.INIT_SEGMENT_TYPE:E.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}function P(){a=null,u=null}return n={setConfig:b,initialize:v,loadInitialization:M,loadSegments:C,reset:P},g(),n}R.__dashjs_factory_name="WebmSegmentBaseLoader",t["default"]=h["default"].getSingletonFactory(R),e.exports=t["default"]},"551c":function(e,t,n){"use strict";var r,i,o,a,s=n("2d00"),u=n("7726"),l=n("9b43"),c=n("23c6"),d=n("5ca1"),f=n("d3f4"),h=n("d8e8"),p=n("f605"),m=n("4a59"),g=n("ebd6"),y=n("1991").set,v=n("8079")(),_=n("a5b8"),E=n("9c80"),b=n("a25f"),T=n("bcaa"),S="Promise",w=u.TypeError,x=u.process,I=x&&x.versions,A=I&&I.v8||"",D=u[S],R="process"==c(x),M=function(){},C=i=_.f,N=!!function(){try{var e=D.resolve(1),t=(e.constructor={})[n("2b4c")("species")]=function(e){e(M,M)};return(R||"function"==typeof PromiseRejectionEvent)&&e.then(M)instanceof t&&0!==A.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(r){}}(),L=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},P=function(e,t){if(!e._n){e._n=!0;var n=e._c;v((function(){var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a,s=i?t.ok:t.fail,u=t.resolve,l=t.reject,c=t.domain;try{s?(i||(2==e._h&&k(e),e._h=1),!0===s?n=r:(c&&c.enter(),n=s(r),c&&(c.exit(),a=!0)),n===t.promise?l(w("Promise-chain cycle")):(o=L(n))?o.call(n,u,l):u(n)):l(r)}catch(d){c&&!a&&c.exit(),l(d)}};while(n.length>o)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&O(e)}))}},O=function(e){y.call(u,(function(){var t,n,r,i=e._v,o=F(e);if(o&&(t=E((function(){R?x.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=R||F(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},F=function(e){return 1!==e._h&&0===(e._a||e._c).length},k=function(e){y.call(u,(function(){var t;R?x.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})}))},B=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),P(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw w("Promise can't be resolved itself");(t=L(e))?v((function(){var r={_w:n,_d:!1};try{t.call(e,l(U,r,1),l(B,r,1))}catch(i){B.call(r,i)}})):(n._v=e,n._s=1,P(n,!1))}catch(r){B.call({_w:n,_d:!1},r)}}};N||(D=function(e){p(this,D,S,"_h"),h(e),r.call(this);try{e(l(U,this,1),l(B,this,1))}catch(t){B.call(this,t)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n("dcbc")(D.prototype,{then:function(e,t){var n=C(g(this,D));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=R?x.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=l(U,e,1),this.reject=l(B,e,1)},_.f=C=function(e){return e===D||e===a?new o(e):i(e)}),d(d.G+d.W+d.F*!N,{Promise:D}),n("7f20")(D,S),n("7a56")(S),a=n("8378")[S],d(d.S+d.F*!N,S,{reject:function(e){var t=C(this),n=t.reject;return n(e),t.promise}}),d(d.S+d.F*(s||!N),S,{resolve:function(e){return T(s&&this===a?D:this,e)}}),d(d.S+d.F*!(N&&n("5cc5")((function(e){D.all(e)["catch"](M)}))),S,{all:function(e){var t=this,n=C(t),r=n.resolve,i=n.reject,o=E((function(){var n=[],o=0,a=1;m(e,!1,(function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then((function(e){u||(u=!0,n[s]=e,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=C(t),r=n.reject,i=E((function(){m(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},5537:function(e,t,n){var r=n("8378"),i=n("7726"),o="__core-js_shared__",a=i[o]||(i[o]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n("2d00")?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},5559:function(e,t,n){var r=n("dbdb")("keys"),i=n("62a0");e.exports=function(e){return r[e]||(r[e]=i(e))}},"556a":function(e,t,n){t.generateISD=n("b762").generateISD,t.fromXML=n("9009").fromXML,t.renderHTML=n("874c").render},5571:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("467b"),s=r(a),u=n("69cb"),l=r(u),c=n("eba1"),d=r(c),f=n("1c2c"),h=r(f),p=n("d20c"),m=r(p),g=n("8a43"),y=r(g),v=n("1d48"),_=r(v),E=n("71a8");function b(){var e=this.context,t=void 0,n=void 0,r=void 0,i=void 0,a=void 0,s=void 0,u=void 0,c=void 0,f=void 0,p=void 0,g=void 0,v=void 0,b=void 0,T=void 0,S=void 0,w=void 0,x=void 0;function I(){b="",T=-1,S=!0,x=!1,f=(0,d["default"])(e).getInstance(),p=(0,h["default"])(e).getInstance(),g=(0,m["default"])(e).getInstance(),n=(0,l["default"])(e).getInstance(),v=(0,y["default"])(e).getInstance(),f.initialize(),v.on(_["default"].TEXT_TRACKS_QUEUE_INITIALIZED,L,t),j()}function A(e){e&&(e.errHandler&&(r=e.errHandler),e.dashManifestModel&&(i=e.dashManifestModel),e.manifestModel&&(a=e.manifestModel),e.mediaController&&(s=e.mediaController),e.videoModel&&(u=e.videoModel),e.streamController&&(c=e.streamController),e.textTracks&&(f=e.textTracks),e.vttParser&&(p=e.vttParser),e.ttmlParser&&(g=e.ttmlParser),n.setConfig({errHandler:r,dashManifestModel:i,manifestModel:a,mediaController:s,videoModel:u,streamController:c,textTracks:f,vttParser:p,ttmlParser:g}))}function D(){return n}function R(){return w}function M(e){n.addEmbeddedTrack(e)}function C(e){(0,E.checkParameterType)(e,"string"),b=e}function N(){return b}function L(e){var t=this,n=e.tracks,r=e.index;n.some((function(e,n){if(e.lang===b)return t.setTextTrack(n),r=n,!0})),S||this.setTextTrack(-1),T=r,v.trigger(_["default"].TEXT_TRACKS_ADDED,{enabled:k(),index:r,tracks:n})}function P(e){(0,E.checkParameterType)(e,"boolean"),S=e,S||this.setTextTrack(-1)}function O(){return S}function F(e){(0,E.checkParameterType)(e,"boolean"),k()!==e&&(e&&this.setTextTrack(T),e||(T=this.getCurrentTrackIdx(),this.setTextTrack(-1)))}function k(){var e=!0;return w&&!x&&(e=!1),e}function B(e){(0,E.checkParameterType)(e,"boolean"),x=e}function U(e){var t=n.getConfig(),r=t.fragmentModel,i=t.fragmentedTracks,a=t.videoModel,u=void 0,l=void 0;w=-1===e;var d=f.getCurrentTrackIdx();if(d!==e){f.setModeForTrackIdx(d,o["default"].TEXT_HIDDEN),f.setCurrentTrackIdx(e),f.setModeForTrackIdx(e,o["default"].TEXT_SHOWING);var h=f.getCurrentTrackInfo();if(h&&h.isFragmented&&!h.isEmbedded)for(var p=0;p<i.length;p++){var m=i[p];if(h.lang===m.lang&&h.index===m.index&&(m.id?h.id===m.id:h.id===m.index)){var g=s.getCurrentTrackFor(o["default"].FRAGMENTED_TEXT,c.getActiveStreamInfo());if(m!==g)r.abortRequests(),r.removeExecutedRequestsBeforeTime(),n.remove(),f.deleteCuesFromTrackIdx(d),s.setTrack(m),n.setCurrentFragmentedTrackIdx(p);else if(-1===d){for(var y=c.getActiveStreamProcessors(),v=0;v<y.length;v++)if(y[v].getType()===o["default"].FRAGMENTED_TEXT){l=y[v];break}l.getIndexHandler().setCurrentTime(a.getTime()),l.getScheduleController().start()}}}else if(h&&!h.isFragmented){for(y=c.getActiveStreamProcessors(),p=0;p<y.length;p++)if(y[p].getType()===o["default"].TEXT){l=y[p],u=l.getMediaInfoArr();break}if(l&&u)for(p=0;p<u.length;p++)if(u[p].index===h.index&&u[p].lang===h.lang){l.selectMediaInfo(u[p]);break}}}}function H(){return f.getCurrentTrackIdx()}function j(){w=!1}function K(){j(),n.resetEmbedded(),n.reset()}return t={setConfig:A,getTextSourceBuffer:D,getAllTracksAreDisabled:R,addEmbeddedTrack:M,getTextDefaultLanguage:N,setTextDefaultLanguage:C,setTextDefaultEnabled:P,getTextDefaultEnabled:O,enableText:F,isTextEnabled:k,setTextTrack:U,getCurrentTrackIdx:H,enableForcedTextStreaming:B,reset:K},I(),t}b.__dashjs_factory_name="TextController",t["default"]=s["default"].getSingletonFactory(b),e.exports=t["default"]},"55dd":function(e,t,n){"use strict";var r=n("5ca1"),i=n("d8e8"),o=n("4bf8"),a=n("79e5"),s=[].sort,u=[1,2,3];r(r.P+r.F*(a((function(){u.sort(void 0)}))||!a((function(){u.sort(null)}))||!n("2f21")(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),i(e))}})},"584a":function(e,t){var n=e.exports={version:"2.6.10"};"number"==typeof __e&&(__e=n)},"588f":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("243c"),o=r(i),a=n("5fa3"),s=r(a),u=n("d0d2"),l=r(u),c=n("7b70"),d=r(c),f="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",h=d["default"].CLEARKEY_KEYSTEM_STRING,p="urn:uuid:"+f;function m(e){var t=void 0,n=e.BASE64,r=e.debug.getLogger(t);function i(e,t){var n=null;if(e){for(var i=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),a=[],u=0;u<i.kids.length;u++){var l=i.kids[u],c=e.clearkeys&&e.clearkeys.hasOwnProperty(l)?e.clearkeys[l]:null;if(!c)throw new Error("DRM: ClearKey keyID ("+l+") is not known!");a.push(new o["default"](l,c))}n=new s["default"](a),r.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return n}function a(e){return l["default"].parseInitDataFromContentProtection(e,n)}function u(){return null}function c(e){return new Uint8Array(e)}function d(){return null}function m(){return null}function g(){return null}return t={uuid:f,schemeIdURI:p,systemString:h,getInitData:a,getRequestHeadersFromMessage:u,getLicenseRequestFromMessage:c,getLicenseServerURLFromInitData:d,getCDMData:m,getSessionId:g,getClearKeysFromProtectionData:i},t}m.__dashjs_factory_name="KeySystemW3CClearKey",t["default"]=dashjs.FactoryMaker.getSingletonFactory(m),e.exports=t["default"]},"589e":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("8a43"),o=r(i),a=n("1d48"),s=r(a),u=n("467b"),l=r(u),c=0,d=1,f=2,h=3,p=4,m=5;function g(){var e=this.context,t=(0,o["default"])(e).getInstance(),n=[],r=void 0,i=void 0,a=void 0,u=void 0,l=void 0;function g(){i=!0,a=!0,l=h,u=(new Date).getTime(),"undefined"!==typeof window&&window.console&&(n[d]=y(window.console.error),n[f]=y(window.console.error),n[h]=y(window.console.warn),n[p]=y(window.console.info),n[m]=y(window.console.debug))}function y(e){return e&&e.bind?e.bind(window.console):window.console.log.bind(window.console)}function v(e){return{fatal:x.bind(e),error:I.bind(e),warn:A.bind(e),info:D.bind(e),debug:R.bind(e)}}function _(e){l=e}function E(){return l}function b(e){i=e}function T(e){a=e}function S(e){l=e?m:c}function w(){return l!==c}function x(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];M.apply(void 0,[d,this].concat(t))}function I(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];M.apply(void 0,[f,this].concat(t))}function A(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];M.apply(void 0,[h,this].concat(t))}function D(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];M.apply(void 0,[p,this].concat(t))}function R(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];M.apply(void 0,[m,this].concat(t))}function M(e,r){var o="",c=null;i&&(c=(new Date).getTime(),o+="["+(c-u)+"]"),a&&r&&r.getClassName&&(o+="["+r.getClassName()+"]",r.getType&&(o+="["+r.getType()+"]")),o.length>0&&(o+=" ");for(var d=arguments.length,f=Array(d>2?d-2:0),h=2;h<d;h++)f[h-2]=arguments[h];Array.apply(null,f).forEach((function(e){o+=e+" "})),n[e]&&l>=e&&n[e](o),t.trigger(s["default"].LOG,{message:o,level:e})}return r={getLogger:v,setLogTimestampVisible:b,setCalleeNameVisible:T,setLogToBrowserConsole:S,getLogToBrowserConsole:w,setLogLevel:_,getLogLevel:E},g(),r}g.__dashjs_factory_name="Debug";var y=l["default"].getSingletonFactory(g);y.LOG_LEVEL_NONE=c,y.LOG_LEVEL_FATAL=d,y.LOG_LEVEL_ERROR=f,y.LOG_LEVEL_WARNING=h,y.LOG_LEVEL_INFO=p,y.LOG_LEVEL_DEBUG=m,l["default"].updateSingletonFactory(g.__dashjs_factory_name,y),t["default"]=y,e.exports=t["default"]},5948:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("bd58"),o=r(i);function a(e){e=e||{};var t={"urn:dvb:dash:reporting:2014":o["default"]},n=this.context,r=e.debug,i=e.metricsConstants,a=void 0;function s(e,o){var a=void 0;try{a=t[e.schemeIdUri](n).create({metricsConstants:i}),a.initialize(e,o)}catch(s){a=null,r.error("ReportingFactory: could not create Reporting with schemeIdUri "+e.schemeIdUri+" ("+s.message+")")}return a}function u(e,n){t[e]=n}function l(e){delete t[e]}return a={create:s,register:u,unregister:l},a}a.__dashjs_factory_name="ReportingFactory",t["default"]=dashjs.FactoryMaker.getSingletonFactory(a),e.exports=t["default"]},"597c":function(e,t,n){(function(e){e.ns_tt="http://www.w3.org/ns/ttml",e.ns_tts="http://www.w3.org/ns/ttml#styling",e.ns_ttp="http://www.w3.org/ns/ttml#parameter",e.ns_xml="http://www.w3.org/XML/1998/namespace",e.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",e.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",e.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",e.ns_ebutts="urn:ebu:tt:style"})(t)},"5b4e":function(e,t,n){var r=n("36c3"),i=n("b447"),o=n("0fc9");e.exports=function(e){return function(t,n,a){var s,u=r(t),l=i(u.length),c=o(a,l);if(e&&n!=n){while(l>c)if(s=u[c++],s!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}}},"5b8d":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("694b"),s=r(a);function u(){var e=void 0;function t(e,t){return(0,s["default"])(e,t)}return e={areEqual:t},e}u.__dashjs_factory_name="ObjectUtils",t["default"]=o["default"].getSingletonFactory(u),e.exports=t["default"]},"5beb":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.unescapeDollarsInTemplate=u,t.replaceIDForTemplate=l,t.replaceTokenForTemplate=c,t.getIndexBasedSegment=d,t.getTimeBasedSegment=f,t.getSegmentByIndex=h,t.decideSegmentListRangeForTemplate=p;var i=n("bb46"),o=r(i);function a(e,t){while(e.length<t)e="0"+e;return e}function s(e,t){return e.representation.startNumber+t}function u(e){return e?e.split("$$").join("$"):e}function l(e,t){if(!t||!e||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)}function c(e,t,n){var r="%0",i=void 0,o=void 0,s=void 0,u=void 0,l=void 0,c=void 0,d=t.length,f=r.length;if(!e)return e;while(1){if(i=e.indexOf("$"+t),i<0)return e;if(o=e.indexOf("$",i+d),o<0)return e;if(s=e.indexOf(r,i+d),s>i&&s<o)switch(u=e.charAt(o-1),l=parseInt(e.substring(s+f,o-1),10),u){case"d":case"i":case"u":c=a(n.toString(),l);break;case"x":c=a(n.toString(16),l);break;case"X":c=a(n.toString(16),l).toUpperCase();break;case"o":c=a(n.toString(8),l);break;default:return e}else c=n;e=e.substring(0,i)+c+e.substring(o+1)}}function d(e,t,n,r){var i=void 0,a=void 0,u=void 0,l=void 0;return a=n.segmentDuration,isNaN(a)&&(a=n.adaptation.period.duration),u=parseFloat((n.adaptation.period.start+r*a).toFixed(5)),l=parseFloat((u+a).toFixed(5)),i=new o["default"],i.representation=n,i.duration=a,i.presentationStartTime=u,i.mediaStartTime=e.calcMediaTimeFromPresentationTime(i.presentationStartTime,n),i.availabilityStartTime=e.calcAvailabilityStartTimeFromPresentationTime(i.presentationStartTime,n.adaptation.period.mpd,t),i.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(l,n.adaptation.period.mpd,t),i.wallStartTime=e.calcWallTimeForSegment(i,t),i.replacementNumber=s(i,r),i.availabilityIdx=r,i}function f(e,t,n,r,i,a,u,l,d,f){var h=r/a,p=Math.min(i/a,n.adaptation.period.mpd.maxSegmentDuration),m=void 0,g=void 0,y=void 0;return m=e.calcPresentationTimeFromMediaTime(h,n),g=m+p,y=new o["default"],y.representation=n,y.duration=p,y.mediaStartTime=h,y.presentationStartTime=m,y.availabilityStartTime=n.adaptation.period.mpd.manifest.loadedTime,y.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(g,n.adaptation.period.mpd,t),y.wallStartTime=e.calcWallTimeForSegment(y,t),y.replacementTime=f||r,y.replacementNumber=s(y,d),u=c(u,"Number",y.replacementNumber),u=c(u,"Time",y.replacementTime),y.media=u,y.mediaRange=l,y.availabilityIdx=d,y}function h(e,t){if(!t||!t.segments)return null;var n=t.segments.length,r=void 0,i=void 0;if(e<n&&(r=t.segments[e],r&&r.availabilityIdx===e))return r;for(i=0;i<n;i++)if(r=t.segments[i],r&&r.availabilityIdx===e)return r;return null}function p(e,t,n,r,i,o){var a=n.segmentDuration,s=n.adaptation.period.mpd.manifest.minBufferTime,u=n.segmentAvailabilityRange,l={start:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,u?u.start:NaN),end:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,u?u.end:NaN)},c=n.segments,d=2*a,f=o||Math.max(2*s,10*a),p=NaN,m=null,g=void 0,y=void 0,v=void 0;return l.start=Math.max(l.start,0),t&&!e.isTimeSyncCompleted()?(g=Math.floor(l.start/a),y=Math.floor(l.end/a),v={start:g,end:y},v):(c&&c.length>0?(m=h(i,n),p=m?e.calcPeriodRelativeTimeFromMpdRelativeTime(n,m.presentationStartTime):i>0?i*a:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,r)):p=i>0?i*a:t?l.end:l.start,g=Math.floor(Math.max(p-d,l.start)/a),y=Math.floor(Math.min(g+f/a,l.end/a)),v={start:g,end:y},v)}},"5c40":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){i(this,e)}return r(e,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}]),e}();t["default"]=o,e.exports=t["default"]},"5c95":function(e,t,n){var r=n("35e8");e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},"5ca1":function(e,t,n){var r=n("7726"),i=n("8378"),o=n("32e9"),a=n("2aba"),s=n("9b43"),u="prototype",l=function(e,t,n){var c,d,f,h,p=e&l.F,m=e&l.G,g=e&l.S,y=e&l.P,v=e&l.B,_=m?r:g?r[t]||(r[t]={}):(r[t]||{})[u],E=m?i:i[t]||(i[t]={}),b=E[u]||(E[u]={});for(c in m&&(n=t),n)d=!p&&_&&void 0!==_[c],f=(d?_:n)[c],h=v&&d?s(f,r):y&&"function"==typeof f?s(Function.call,f):f,_&&a(_,c,f,e&l.U),E[c]!=f&&o(E,c,h),y&&b[c]!=f&&(b[c]=f)};r.core=i,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},"5cc5":function(e,t,n){var r=n("2b4c")("iterator"),i=!1;try{var o=[7][r]();o["return"]=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(a){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},e(o)}catch(a){}return n}},"5d1b":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("8a43"),s=r(a);function u(e){e=e||{};var t=[],n=(0,s["default"])(this.context).getInstance(),r=e.updateEventName,i=e.addBlacklistEventName;function o(e){return!!(t.length&&e&&e.length)&&-1!==t.indexOf(e)}function a(e){-1===t.indexOf(e)&&(t.push(e),n.trigger(r,{entry:e}))}function u(e){a(e.entry)}function l(){i&&n.on(i,u,this)}function c(){t=[]}return l(),{add:a,contains:o,reset:c}}u.__dashjs_factory_name="BlackListController",t["default"]=o["default"].getClassFactory(u),e.exports=t["default"]},"5dbc":function(e,t,n){var r=n("d3f4"),i=n("8b97").set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},"5df3":function(e,t,n){"use strict";var r=n("02f4")(!0);n("01f9")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},"5e1a":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n("8707").Buffer,o=n(2);function a(e,t,n){e.copy(t,n)}e.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";var t=this.head,n=""+t.data;while(t=t.next)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;var t=i.allocUnsafe(e>>>0),n=this.head,r=0;while(n)a(n.data,t,r),r+=n.data.length,n=n.next;return t},e}(),o&&o.inspect&&o.inspect.custom&&(e.exports.prototype[o.inspect.custom]=function(){var e=o.inspect({length:this.length});return this.constructor.name+" "+e})},"5ed3":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};i.SSL_CONNECTION_FAILED_PREFIX="SSL",i.DNS_RESOLUTION_FAILED="C00",i.HOST_UNREACHABLE="C01",i.CONNECTION_REFUSED="C02",i.CONNECTION_ERROR="C03",i.CORRUPT_MEDIA_ISOBMFF="M00",i.CORRUPT_MEDIA_OTHER="M01",i.BASE_URL_CHANGED="F00",i.BECAME_REPORTER="S00",t["default"]=i,e.exports=t["default"]},"5f1b":function(e,t,n){"use strict";var r=n("23c6"),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var o=n.call(e,t);if("object"!==typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},"5fa3":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(t,n){if(i(this,e),n&&"persistent"!==n&&"temporary"!==n)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=t,this.type=n}return r(e,[{key:"toJWK",value:function(){var e=void 0,t=this.keyPairs.length,n={keys:[]};for(e=0;e<t;e++){var r={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(r)}this.type&&(n.type=this.type);var i=JSON.stringify(n),o=i.length,a=new ArrayBuffer(o),s=new Uint8Array(a);for(e=0;e<o;e++)s[e]=i.charCodeAt(e);return a}}]),e}();t["default"]=o,e.exports=t["default"]},"5fb0":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n){r(this,e),this.initData=t,this.initDataType=n};t["default"]=i,e.exports=t["default"]},"612d":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(){var e=void 0,t=void 0;function n(){t=!1}function r(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t}function i(){return t}function o(e){t=e}function a(e){return!(!("MediaSource"in window)||!MediaSource.isTypeSupported(e))||!(!("WebKitMediaSource"in window)||!WebKitMediaSource.isTypeSupported(e))}return e={supportsMediaSource:r,supportsEncryptedMedia:i,supportsCodec:a,setEncryptedMediaSupported:o},n(),e}a.__dashjs_factory_name="Capabilities",t["default"]=o["default"].getSingletonFactory(a),e.exports=t["default"]},"613b":function(e,t,n){var r=n("5537")("keys"),i=n("ca5a");e.exports=function(e){return r[e]||(r[e]=i(e))}},"626a":function(e,t,n){var r=n("2d95");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},"62a0":function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},"637b":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("2f4d"),s=r(a);function u(e){e=e||{};var t=void 0,n=e.timelineConverter,r=e.streamProcessor;function i(){if(!n||!n.hasOwnProperty("getExpectedLiveEdge")||!r||!r.hasOwnProperty("getRepresentationInfo"))throw new Error(s["default"].MISSING_CONFIG_ERROR)}function o(){i();var e=r.getRepresentationInfo(),t=e.DVRWindow?e.DVRWindow.end:0,o=t;return e.useCalculatedLiveEdgeTime&&(o=n.getExpectedLiveEdge(),n.setClientTimeOffset(o-t)),o}function a(){n=null,r=null}return t={getLiveEdge:o,reset:a},t}u.__dashjs_factory_name="LiveEdgeFinder",t["default"]=o["default"].getClassFactory(u),e.exports=t["default"]},"63b6":function(e,t,n){var r=n("e53d"),i=n("584a"),o=n("d864"),a=n("35e8"),s=n("07e3"),u="prototype",l=function(e,t,n){var c,d,f,h=e&l.F,p=e&l.G,m=e&l.S,g=e&l.P,y=e&l.B,v=e&l.W,_=p?i:i[t]||(i[t]={}),E=_[u],b=p?r:m?r[t]:(r[t]||{})[u];for(c in p&&(n=t),n)d=!h&&b&&void 0!==b[c],d&&s(_,c)||(f=d?b[c]:n[c],_[c]=p&&"function"!=typeof b[c]?n[c]:y&&d?o(f,r):v&&b[c]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[u]=e[u],t}(f):g&&"function"==typeof f?o(Function.call,f):f,g&&((_.virtual||(_.virtual={}))[c]=f,e&l.R&&E&&!E[c]&&a(E,c,f)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},"646e":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(e){function t(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function n(e,n,r){for(var i=0,o=e.length;i<o;++i){var a=e[i];if(n[a.name])if(r[a.name]){if(a.merge){var s=n[a.name],u=r[a.name];"object"===typeof s&&"object"===typeof u?t(s,u):r[a.name]=s+u}}else r[a.name]=n[a.name]}}function r(e,t){for(var i=0,o=e.children.length;i<o;++i){var a=e.children[i],s=t[a.name+"_asArray"];if(s)for(var u=0,l=s.length;u<l;++u){var c=s[u];n(e.properties,t,c),r(a,c)}}}function i(t){if(null===t||"object"!==typeof t)return t;if("period"in e)for(var n=e.period,i=t.Period_asArray,o=0,a=i.length;o<a;++o){var s=i[o];if(r(n,s),"adaptationset"in e){var u=s.AdaptationSet_asArray;if(u)for(var l=e.adaptationset,c=0,d=u.length;c<d;++c)r(l,u[c])}}return t}return{run:i}}a.__dashjs_factory_name="ObjectIron";var s=o["default"].getClassFactory(a);t["default"]=s,e.exports=t["default"]},"64c7":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("47e4"),o=r(i),a=n("9485"),s=r(a),u=n("467b"),l=r(u),c=n("0757"),d=n("8a43"),f=r(d),h=n("1d48"),p=r(h),m=n("589e"),g=r(m),y=0,v=1,_=2,E=10,b=2,T=.99;function S(e){e=e||{};var t=this.context,n=e.dashMetrics,r=e.metricsModel,i=e.mediaPlayerModel,a=(0,f["default"])(t).getInstance(),u=void 0,l=void 0,d=void 0;function h(){l=(0,g["default"])(t).getInstance().getLogger(u),j(),a.on(p["default"].BUFFER_EMPTY,N,u),a.on(p["default"].PLAYBACK_SEEKING,L,u),a.on(p["default"].PERIOD_SWITCH_STARTED,P,u),a.on(p["default"].MEDIA_FRAGMENT_LOADED,O,u),a.on(p["default"].METRIC_ADDED,F,u),a.on(p["default"].QUALITY_CHANGE_REQUESTED,B,u),a.on(p["default"].FRAGMENT_LOADING_ABANDONED,U,u)}function m(e){return e.map((function(e){return Math.log(e)}))}function S(e,t,n){var r=n.reduce((function(e,t,r){return t>n[e]?r:e}),0);if(0===r)return null;var i=Math.max(e,E+b*t.length),o=(n[r]-1)/(i/E-1),a=E/o;return{gp:o,Vp:a}}function w(e){var t={},n=e.getMediaInfo(),r=n.bitrateList.map((function(e){return e.bandwidth})),o=m(r);o=o.map((function(e){return e-o[0]+1}));var a=i.getStableBufferTime(),s=S(a,r,o);return s?(t.state=v,t.bitrates=r,t.utilities=o,t.stableBufferTime=a,t.Vp=s.Vp,t.gp=s.gp,t.lastQuality=0,x(t)):t.state=y,t}function x(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function I(e,t){var o=i.getStableBufferTime();if(e.stableBufferTime!==o){var a=S(o,e.bitrates,e.utilities);if(a.Vp!==e.Vp||a.gp!==e.gp){var s=n.getCurrentBufferLevel(r.getReadOnlyMetricsFor(t)),u=s+e.placeholderBuffer;u-=E,u*=a.Vp/e.Vp,u+=E,e.stableBufferTime=o,e.Vp=a.Vp,e.gp=a.gp,e.placeholderBuffer=Math.max(0,u-s)}}}function A(e){var t=e.getMediaType(),n=d[t];return n?n.state!==y&&I(n,t):(n=w(e),d[t]=n),n}function D(e,t){for(var n=e.bitrates.length,r=NaN,i=NaN,o=0;o<n;++o){var a=(e.Vp*(e.utilities[o]+e.gp)-t)/e.bitrates[o];(isNaN(i)||a>=i)&&(i=a,r=o)}return r}function R(e,t){return e.Vp*(e.utilities[t]+e.gp)}function M(e,t){for(var n=e.bitrates[t],r=e.utilities[t],i=0,o=t-1;o>=0;--o)if(e.utilities[o]<e.utilities[t]){var a=e.bitrates[o],s=e.utilities[o],u=e.Vp*(e.gp+(n*s-a*r)/(n-a));i=Math.max(i,u)}return i}function C(e,t){var n=Date.now();if(isNaN(e.lastSegmentFinishTimeMs)){if(!isNaN(e.lastCallTimeMs)){r=.001*(n-e.lastCallTimeMs);e.placeholderBuffer+=Math.max(0,r)}}else{var r=.001*(n-e.lastSegmentFinishTimeMs);e.placeholderBuffer+=Math.max(0,r)}e.lastCallTimeMs=n,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,I(e,t)}function N(){for(var e in d)d.hasOwnProperty(e)&&d[e].state===_&&(d[e].placeholderBuffer=0)}function L(){for(var e in d)if(d.hasOwnProperty(e)){var t=d[e];t.state!==y&&(t.state=v,x(t))}}function P(){}function O(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=d[e.chunk.mediaInfo.type];if(t&&t.state!==y){var n=e.chunk.start;isNaN(t.mostAdvancedSegmentStart)||n>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=n,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=n,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,k(t,e.chunk.mediaInfo.type)}}}function F(e){if(e&&e.metric===o["default"].HTTP_REQUEST&&e.value&&e.value.type===c.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length){var t=d[e.mediaType];t&&t.state!==y&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),k(t,e.mediaType))}}function k(e,t){if(!isNaN(e.lastSegmentStart)&&!isNaN(e.lastSegmentRequestTimeMs)&&!isNaN(e.placeholderBuffer)){if(e.placeholderBuffer*=T,!isNaN(e.lastSegmentFinishTimeMs)){var i=n.getCurrentBufferLevel(r.getReadOnlyMetricsFor(t)),o=i+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),a=R(e,e.lastQuality),s=Math.max(0,a-o);e.placeholderBuffer=Math.min(s,e.placeholderBuffer)}e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN}}function B(e){if(e){var t=d[e.mediaType];t&&t.state!==y&&(t.abrQuality=e.newQuality)}}function U(e){if(e){var t=d[e.mediaType];if(t&&t.state!==y){var i=n.getCurrentBufferLevel(r.getReadOnlyMetricsFor(e.mediaType)),o=void 0;o=t.abrQuality>0?M(t,t.abrQuality):E;var a=Math.max(0,o-i);t.placeholderBuffer=Math.min(t.placeholderBuffer,a)}}}function H(e){var i=e.getMediaInfo(),o=e.getMediaType(),a=r.getReadOnlyMetricsFor(o),u=e.getScheduleController(),c=e.getStreamInfo(),d=e.getAbrController(),f=d.getThroughputHistory(),h=c?c.id:null,p=c&&c.manifestInfo&&c.manifestInfo.isDynamic,m=e.useBufferOccupancyABR(),g=(0,s["default"])(t).create();if(g.reason=g.reason||{},!m)return g;u.setTimeToLoadDelay(0);var E=A(e);if(E.state===y)return g;var b=n.getCurrentBufferLevel(a),T=f.getAverageThroughput(o,p),S=f.getSafeAverageThroughput(o,p),w=f.getAverageLatency(o),I=void 0;if(g.reason.state=E.state,g.reason.throughput=T,g.reason.latency=w,isNaN(T))return g;switch(E.state){case v:I=d.getQualityForBitrate(i,S,w),g.quality=I,g.reason.throughput=S,E.placeholderBuffer=Math.max(0,M(E,I)-b),E.lastQuality=I,!isNaN(E.lastSegmentDurationS)&&b>=E.lastSegmentDurationS&&(E.state=_);break;case _:C(E,o),I=D(E,b+E.placeholderBuffer);var N=d.getQualityForBitrate(i,S,w);I>E.lastQuality&&I>N&&(I=Math.max(N,E.lastQuality));var L=Math.max(0,b+E.placeholderBuffer-R(E,I));L<=E.placeholderBuffer?(E.placeholderBuffer-=L,L=0):(L-=E.placeholderBuffer,E.placeholderBuffer=0,I<d.getTopQualityIndexFor(o,h)?u.setTimeToLoadDelay(1e3*L):L=0),g.quality=I,g.reason.throughput=T,g.reason.latency=w,g.reason.bufferLevel=b,g.reason.placeholderBuffer=E.placeholderBuffer,g.reason.delay=L,E.lastQuality=I;break;default:l.debug("BOLA ABR rule invoked in bad state."),g.quality=d.getQualityForBitrate(i,S,w),g.reason.state=E.state,g.reason.throughput=S,g.reason.latency=w,E.state=v,x(E)}return g}function j(){d={}}function K(){j(),a.off(p["default"].BUFFER_EMPTY,N,u),a.off(p["default"].PLAYBACK_SEEKING,L,u),a.off(p["default"].PERIOD_SWITCH_STARTED,P,u),a.off(p["default"].MEDIA_FRAGMENT_LOADED,O,u),a.off(p["default"].METRIC_ADDED,F,u),a.off(p["default"].QUALITY_CHANGE_REQUESTED,B,u),a.off(p["default"].FRAGMENT_LOADING_ABANDONED,U,u)}return u={getMaxIndex:H,reset:K},h(),u}S.__dashjs_factory_name="BolaRule",t["default"]=l["default"].getClassFactory(S),e.exports=t["default"]},6531:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null};t["default"]=i,e.exports=t["default"]},"656e":function(e,t,n){"use strict";var r=n("79aa");function i(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},"65b4":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n("c287"),l=i(u),c=n("e09e"),d=i(c),f=function(e){function t(){a(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,(function(e,t){var n,r=(n={},o(n,d["default"].MPD,[d["default"].ID,d["default"].PROFILES]),o(n,d["default"].PERIOD,[d["default"].ID]),o(n,d["default"].BASE_URL,[d["default"].SERVICE_LOCATION,d["default"].BYTE_RANGE]),o(n,d["default"].SEGMENT_BASE,[d["default"].INDEX_RANGE]),o(n,d["default"].INITIALIZATION,[d["default"].RANGE]),o(n,d["default"].REPRESENTATION_INDEX,[d["default"].RANGE]),o(n,d["default"].SEGMENT_LIST,[d["default"].INDEX_RANGE]),o(n,d["default"].BITSTREAM_SWITCHING,[d["default"].RANGE]),o(n,d["default"].SEGMENT_URL,[d["default"].MEDIA_RANGE,d["default"].INDEX_RANGE]),o(n,d["default"].SEGMENT_TEMPLATE,[d["default"].INDEX_RANGE,d["default"].MEDIA,d["default"].INDEX,d["default"].INITIALIZATION_MINUS,d["default"].BITSTREAM_SWITCHING_MINUS]),o(n,d["default"].ASSET_IDENTIFIER,[d["default"].VALUE,d["default"].ID]),o(n,d["default"].EVENT_STREAM,[d["default"].VALUE]),o(n,d["default"].ADAPTATION_SET,[d["default"].PROFILES,d["default"].MIME_TYPE,d["default"].SEGMENT_PROFILES,d["default"].CODECS,d["default"].CONTENT_TYPE]),o(n,d["default"].FRAME_PACKING,[d["default"].VALUE,d["default"].ID]),o(n,d["default"].AUDIO_CHANNEL_CONFIGURATION,[d["default"].VALUE,d["default"].ID]),o(n,d["default"].CONTENT_PROTECTION,[d["default"].VALUE,d["default"].ID]),o(n,d["default"].ESSENTIAL_PROPERTY,[d["default"].VALUE,d["default"].ID]),o(n,d["default"].SUPPLEMENTAL_PROPERTY,[d["default"].VALUE,d["default"].ID]),o(n,d["default"].INBAND_EVENT_STREAM,[d["default"].VALUE,d["default"].ID]),o(n,d["default"].ACCESSIBILITY,[d["default"].VALUE,d["default"].ID]),o(n,d["default"].ROLE,[d["default"].VALUE,d["default"].ID]),o(n,d["default"].RATING,[d["default"].VALUE,d["default"].ID]),o(n,d["default"].VIEWPOINT,[d["default"].VALUE,d["default"].ID]),o(n,d["default"].CONTENT_COMPONENT,[d["default"].CONTENT_TYPE]),o(n,d["default"].REPRESENTATION,[d["default"].ID,d["default"].DEPENDENCY_ID,d["default"].MEDIA_STREAM_STRUCTURE_ID]),o(n,d["default"].SUBSET,[d["default"].ID]),o(n,d["default"].METRICS,[d["default"].METRICS_MINUS]),o(n,d["default"].REPORTING,[d["default"].VALUE,d["default"].ID]),n);if(r.hasOwnProperty(t)){var i=r[t];return void 0!==i&&i.indexOf(e.name)>=0}return!1}),(function(e){return String(e)}))}return s(t,e),t}(l["default"]);t["default"]=f,e.exports=t["default"]},"665e":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(t){if(i(this,e),this.offset=t._offset,this.type=t.type,this.size=t.size,this.boxes=[],t.boxes)for(var n=0;n<t.boxes.length;n++)this.boxes.push(new e(t.boxes[n]));switch(this.isComplete=!0,t.type){case"sidx":if(this.timescale=t.timescale,this.earliest_presentation_time=t.earliest_presentation_time,this.first_offset=t.first_offset,this.references=t.references,t.references){this.references=[];for(n=0;n<t.references.length;n++){var r={reference_type:t.references[n].reference_type,referenced_size:t.references[n].referenced_size,subsegment_duration:t.references[n].subsegment_duration};this.references.push(r)}}break;case"emsg":this.id=t.id,this.value=t.value,this.timescale=t.timescale,this.scheme_id_uri=t.scheme_id_uri,this.presentation_time_delta=1===t.version?t.presentation_time:t.presentation_time_delta,this.event_duration=t.event_duration,this.message_data=t.message_data;break;case"mdhd":this.timescale=t.timescale;break;case"mfhd":this.sequence_number=t.sequence_number;break;case"subs":this.entry_count=t.entry_count,this.entries=t.entries;break;case"tfhd":this.base_data_offset=t.base_data_offset,this.sample_description_index=t.sample_description_index,this.default_sample_duration=t.default_sample_duration,this.default_sample_size=t.default_sample_size,this.default_sample_flags=t.default_sample_flags,this.flags=t.flags;break;case"tfdt":this.version=t.version,this.baseMediaDecodeTime=t.baseMediaDecodeTime,this.flags=t.flags;break;case"trun":if(this.sample_count=t.sample_count,this.first_sample_flags=t.first_sample_flags,this.data_offset=t.data_offset,this.flags=t.flags,this.samples=t.samples,t.samples){this.samples=[];n=0;for(var o=t.samples.length;n<o;n++){var a={sample_size:t.samples[n].sample_size,sample_duration:t.samples[n].sample_duration,sample_composition_time_offset:t.samples[n].sample_composition_time_offset};this.samples.push(a)}}break}}return r(e,[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],n=0;n<this.boxes.length;n++)this.boxes[n].type===e&&t.push(this.boxes[n]);return t}}]),e}();t["default"]=o,e.exports=t["default"]},"66df":function(e,t,n){"use strict";function r(){function e(t){var n=[],r=[],i=void 0,o=void 0;for(i in t)if(t.hasOwnProperty(i)&&0!==i.indexOf("_")){if(o=t[i],void 0!==o&&null!==o||(o=""),Array.isArray(o)){if(!o.length)continue;r=[],o.forEach((function(t){var n="Object"!==Object.prototype.toString.call(t).slice(8,-1);r.push(n?t:e(t))})),o=r.map(encodeURIComponent).join(",")}else"string"===typeof o?o=encodeURIComponent(o):o instanceof Date?o=o.toISOString():"number"===typeof o&&(o=Math.round(o));n.push(i+"="+o)}return n.join("&")}return{serialise:e}}Object.defineProperty(t,"__esModule",{value:!0}),r.__dashjs_factory_name="MetricSerialiser",t["default"]=dashjs.FactoryMaker.getSingletonFactory(r),e.exports=t["default"]},6762:function(e,t,n){"use strict";var r=n("5ca1"),i=n("c366")(!0);r(r.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")("includes")},"67ab":function(e,t,n){var r=n("ca5a")("meta"),i=n("d3f4"),o=n("69a8"),a=n("86cc").f,s=0,u=Object.isExtensible||function(){return!0},l=!n("79e5")((function(){return u(Object.preventExtensions({}))})),c=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[r].i},f=function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[r].w},h=function(e){return l&&p.NEED&&u(e)&&!o(e,r)&&c(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:d,getWeak:f,onFreeze:h}},6821:function(e,t,n){var r=n("626a"),i=n("be13");e.exports=function(e){return r(i(e))}},"694b":function(e,t,n){"use strict";var r=Array.isArray,i=Object.keys,o=Object.prototype.hasOwnProperty;e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var a,s,u,l=r(t),c=r(n);if(l&&c){if(s=t.length,s!=n.length)return!1;for(a=s;0!==a--;)if(!e(t[a],n[a]))return!1;return!0}if(l!=c)return!1;var d=t instanceof Date,f=n instanceof Date;if(d!=f)return!1;if(d&&f)return t.getTime()==n.getTime();var h=t instanceof RegExp,p=n instanceof RegExp;if(h!=p)return!1;if(h&&p)return t.toString()==n.toString();var m=i(t);if(s=m.length,s!==i(n).length)return!1;for(a=s;0!==a--;)if(!o.call(n,m[a]))return!1;for(a=s;0!==a--;)if(u=m[a],!e(t[u],n[u]))return!1;return!0}return t!==t&&n!==n}},"696e":function(e,t,n){n("c207"),n("1654"),n("6c1c"),n("24c5"),n("3c11"),n("43fc"),e.exports=n("584a").Promise},"69a8":function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},"69cb":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("0757"),s=n("1774"),u=r(s),l=n("d25a"),c=r(l),d=n("2d62"),f=r(d),h=n("467b"),p=r(h),m=n("589e"),g=r(m),y=n("eba1"),v=r(y),_=n("476a"),E=r(_),b=n("3e2c"),T=r(b),S=n("db66"),w=r(S),x=n("8a43"),I=r(x),A=n("1d48"),D=r(A),R=n("6a2d"),M=r(R),C=n("e172"),N=r(C);function L(){var e=this.context,t=(0,I["default"])(e).getInstance(),n=!1,r=void 0,i=void 0,s=void 0,l=void 0,d=void 0,h=void 0,p=void 0,m=void 0,y=void 0,_=void 0,b=void 0,S=void 0,x=void 0,A=void 0,R=void 0,C=void 0,L=void 0,P=void 0,O=void 0,F=void 0,k=void 0,B=void 0,U=void 0,H=void 0,j=void 0,K=void 0,V=void 0;function q(){i=(0,g["default"])(e).getInstance().getLogger(r),Y()}function G(){x=null,R=NaN,C=[],O=null,A=!1}function Y(){G(),b=[],m=null}function z(t,r){n||J(),S.setConfig({videoModel:L}),S.initialize(),s||(s=(0,c["default"])(e).getInstance()),W(t,r)}function W(t,n){var i=!d.getIsTextTrack(t);if(n){if(b=b.concat(n.getMediaInfoArr()),i){x=n.getFragmentModel(),r.buffered=(0,f["default"])(e).create(),C=p.getTracksFor(o["default"].FRAGMENTED_TEXT,P.getActiveStreamInfo());for(var a=p.getCurrentTrackFor(o["default"].FRAGMENTED_TEXT,P.getActiveStreamInfo()),s=0;s<C.length;s++)if(C[s]===a){re(s);break}}for(s=0;s<b.length;s++)ie(null,b[s])}}function X(){S.deleteAllTextTracks(),s=null,b=[],x=null,A=!1,C=[]}function $(){Y(),P=null,L=null,S=null}function Q(e){var t=e.chunk;t.mediaInfo.embeddedCaptions&&oe(t.bytes,t)}function J(){k=[],S=(0,v["default"])(e).getInstance(),S.setConfig({videoModel:L}),S.initialize(),s=(0,c["default"])(e).getInstance(),F=null,!1,B=0,j=[],H=[],U=null,n=!0,K=(0,E["default"])(e).getInstance();var r=P.getActiveStreamProcessors();for(var i in r)if("video"===r[i].getType()){V=r[i].getRepresentationInfo().MSETimeOffset;break}t.on(D["default"].VIDEO_CHUNK_RECEIVED,Q,this)}function Z(){t.off(D["default"].VIDEO_CHUNK_RECEIVED,Q,this),S&&S.deleteAllTextTracks(),n=!1,k=[],j=[null,null],H=[],U=null}function ee(e){if(n||J(),e)if(e.id===o["default"].CC1||e.id===o["default"].CC3){for(var t=0;t<k.length;t++)if(k[t].id===e.id)return;k.push(e)}else i.warn("Embedded track "+e.id+" not supported!")}function te(e){e&&(e.errHandler&&(l=e.errHandler),e.dashManifestModel&&(d=e.dashManifestModel),e.manifestModel&&(h=e.manifestModel),e.mediaController&&(p=e.mediaController),e.videoModel&&(L=e.videoModel),e.streamController&&(P=e.streamController),e.textTracks&&(S=e.textTracks),e.vttParser&&(y=e.vttParser),e.ttmlParser&&(_=e.ttmlParser))}function ne(){var e={fragmentModel:x,fragmentedTracks:C,videoModel:L};return e}function re(e){F=e}function ie(e,t){var n=new u["default"],r={subtitle:"subtitles",caption:"captions"},i=function(){var e=t.roles.length>0?r[t.roles[0]]:r.caption;return e=e===r.caption||e===r.subtitle?e:r.caption,e},a=function(){var e=!1;return t.codec&&t.codec.search(o["default"].STPP)>=0&&(e=!0),t.mimeType&&t.mimeType.search(o["default"].TTML)>=0&&(e=!0),e};n.captionData=e,n.lang=t.lang,n.labels=t.labels,n.id=t.id?t.id:t.index,n.index=t.index,n.isTTML=a(),n.defaultTrack=se(t),n.isFragmented=!d.getIsTextTrack(t.mimeType),n.isEmbedded=!!t.isEmbedded,n.kind=i(),n.roles=t.roles,n.accessibility=t.accessibility;var s=(b?b.length:0)+k.length;S.addTextTrack(n,s)}function oe(e,t){var n=void 0,r=void 0,u=void 0,c=void 0,d=void 0,f=void 0,p=void 0,g=t.mediaInfo,y=g.type,v=g.mimeType,_=g.codec||v;if(_){if(y===o["default"].FRAGMENTED_TEXT)if(A)if(f=s.getSamplesInfo(e),r=f.sampleList,null===O&&r.length>0&&(O=r[0].cts-t.start*R),_.search(o["default"].STPP)>=0)for(m=null!==m?m:ue(_),u=0;u<r.length;u++){var E=r[u],b=E.cts,I=b-O;this.buffered.add(I/R,(I+E.duration)/R);var D=new DataView(e,E.offset,E.subSizes[0]);p=T["default"].Utils.dataViewToString(D,o["default"].UTF8);var C=[],P=E.offset+E.subSizes[0];for(c=1;c<E.subSizes.length;c++){var V=new Uint8Array(e,P,E.subSizes[c]),q=String.fromCharCode.apply(null,V);C.push(q),P+=E.subSizes[c]}try{var G=h.getValue(),Y=G.ttmlTimeIsRelative?b/R:0;n=m.parse(p,Y,b/R,(b+E.duration)/R,C),S.addCaptions(F,O/R,n)}catch(fe){x.removeExecutedRequestsBeforeTime(),this.remove(),i.error("TTML parser error: "+fe.message)}}else{var z=[];for(u=0;u<r.length;u++){E=r[u];E.cts-=O,this.buffered.add(E.cts/R,(E.cts+E.duration)/R);var W=e.slice(E.offset,E.offset+E.size),X=T["default"].parseBuffer(W);for(c=0;c<X.boxes.length;c++){var $=X.boxes[c];if(i.debug("VTT box1: "+$.type),"vtte"!==$.type&&"vttc"===$.type)for(i.debug("VTT vttc boxes.length = "+$.boxes.length),d=0;d<$.boxes.length;d++){var Q=$.boxes[d];if(i.debug("VTT box2: "+Q.type),"payl"===Q.type){var J=Q.cue_text;i.debug("VTT cue_text = "+J);var Z=E.cts/R,ee=(E.cts+E.duration)/R;z.push({start:Z,end:ee,data:J,styles:{}}),i.debug("VTT "+Z+"-"+ee+" : "+J)}}}}z.length>0&&S.addCaptions(F,0,z)}else A=!0,R=s.getMediaTimescaleFromMoov(e);else if(y===o["default"].TEXT){D=new DataView(e,0,e.byteLength);p=T["default"].Utils.dataViewToString(D,o["default"].UTF8);try{n=ue(_).parse(p,0),S.addCaptions(S.getCurrentTrackIdx(),0,n)}catch(fe){l.timedTextError(fe,"parse",p),l.error(new M["default"](N["default"].TIMED_TEXT_ERROR_ID_PARSE_CODE,N["default"].TIMED_TEXT_ERROR_MESSAGE_PARSE+fe.message,p))}}else if(y===o["default"].VIDEO)if(t.segmentType===a.HTTPRequest.INIT_SEGMENT_TYPE){if(0===B)for(B=s.getMediaTimescaleFromMoov(e),u=0;u<k.length;u++)ie(null,k[u])}else{if(0===B)return void i.warn("CEA-608: No timescale for embeddedTextTrack yet");var te=function(e,t){function n(e,n,r){var i=null;if(L.getTTMLRenderingDiv())i=K.createHTMLCaptionsFromScreen(L.getElement(),e,n,r);else{var o=r.getDisplayText();i=[{start:e,end:n,data:o,styles:{}}]}i&&S.addCaptions(t,0,i)}return n};f=s.getSamplesInfo(e);var ne=f.lastSequenceNumber;if(!j[0]&&!j[1]){var re=void 0,oe=void 0;for(u=0;u<k.length;u++){if(k[u].id===o["default"].CC1?(0,oe=S.getTrackIdxForId(o["default"].CC1)):k[u].id===o["default"].CC3&&(1,oe=S.getTrackIdxForId(o["default"].CC3)),-1===oe)return void i.warn("CEA-608: data before track is ready.");re=te(this,oe),j[u]=new w["default"].Cea608Parser(u+1,{newCue:re},null)}}if(B&&-1==H.indexOf(ne)){if(null!==U&&ne!==U+f.numSequences)for(u=0;u<j.length;u++)j[u]&&j[u].reset();for(var se=ae(e,f.sampleList),le=0;le<j.length;le++){var ce=se.fields[le],de=j[le];if(de)for(u=0;u<ce.length;u++)de.addData(ce[u][0]/B,ce[u][1])}U=ne,H.push(ne)}}}else i.error("No text type defined")}function ae(e,t){if(0===t.length)return null;for(var n={splits:[],fields:[[],[]]},r=new DataView(e),i=0;i<t.length;i++)for(var o=t[i],a=w["default"].findCea608Nalus(r,o.offset,o.size),s=null,u=0,l=0;l<a.length;l++)for(var c=w["default"].extractCea608DataFromRange(r,a[l]),d=0;d<2;d++)c[d].length>0&&(o.cts!==s?u=0:u+=1,n.fields[d].push([o.cts+V*B,c[d],u]),s=o.cts);return n.fields.forEach((function(e){e.sort((function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]}))})),n}function se(e){var t=!1;return k.length>1&&e.isEmbedded?t=e.id&&e.id===o["default"].CC1:1===k.length?e.id&&"string"===typeof e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===k.length&&(t=e.index===b[0].index),t}function ue(e){var t=void 0;return e.search(o["default"].VTT)>=0?t=y:(e.search(o["default"].TTML)>=0||e.search(o["default"].STPP)>=0)&&(t=_),t}function le(e,t){void 0===e&&e===t&&(e=this.buffered.start(0),t=this.buffered.end(this.buffered.length-1)),this.buffered.remove(e,t)}return r={initialize:z,append:oe,abort:X,addEmbeddedTrack:ee,resetEmbedded:Z,setConfig:te,getConfig:ne,setCurrentFragmentedTrackIdx:re,remove:le,reset:$},q(),r}L.__dashjs_factory_name="TextSourceBuffer",t["default"]=p["default"].getSingletonFactory(L),e.exports=t["default"]},"6a2d":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n,i){r(this,e),this.code=t||null,this.message=n||null,this.data=i||null};t["default"]=i,e.exports=t["default"]},"6a67":function(e,t,n){"use strict";var r={encode:function(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|63&r)):r<65536?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t},decode:function(e){var t=[],n=0;while(n<e.length){var r=e[n++];r<128||(r<224?(r=(31&r)<<6,r|=63&e[n++]):r<240?(r=(15&r)<<12,r|=(63&e[n++])<<6,r|=63&e[n++]):(r=(7&r)<<18,r|=(63&e[n++])<<12,r|=(63&e[n++])<<6,r|=63&e[n++])),t.push(String.fromCharCode(r))}return t.join("")}},i={};(function(e){var t=function(t){var n=0,r=[],i=0|t.length/3;while(0<i--){var o=(t[n]<<16)+(t[n+1]<<8)+t[n+2];n+=3,r.push(e.charAt(63&o>>18)),r.push(e.charAt(63&o>>12)),r.push(e.charAt(63&o>>6)),r.push(e.charAt(63&o))}if(2==t.length-n){o=(t[n]<<16)+(t[n+1]<<8);r.push(e.charAt(63&o>>18)),r.push(e.charAt(63&o>>12)),r.push(e.charAt(63&o>>6)),r.push("=")}else if(1==t.length-n){o=t[n]<<16;r.push(e.charAt(63&o>>18)),r.push(e.charAt(63&o>>12)),r.push("==")}return r.join("")},n=function(){for(var t=[],n=0;n<e.length;++n)t[e.charCodeAt(n)]=n;return t["=".charCodeAt(0)]=0,t}(),o=function(e){var t=0,r=[],i=0|e.length/4;while(0<i--){var o=(n[e.charCodeAt(t)]<<18)+(n[e.charCodeAt(t+1)]<<12)+(n[e.charCodeAt(t+2)]<<6)+n[e.charCodeAt(t+3)];r.push(255&o>>16),r.push(255&o>>8),r.push(255&o),t+=4}return r&&("="==e.charAt(t-2)?(r.pop(),r.pop()):"="==e.charAt(t-1)&&r.pop()),r},u={encode:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}};i.decodeArray=function(e){var t=o(e);return new Uint8Array(t)},i.encodeASCII=function(e){var n=u.encode(e);return t(n)},i.decodeASCII=function(e){var t=o(e);return u.decode(t)},i.encode=function(e){var n=r.encode(e);return t(n)},i.decode=function(e){var t=o(e);return r.decode(t)}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),t.decode=i.decode,t.decodeArray=i.decodeArray,t.encode=i.encode,t.encodeASCII=i.encodeASCII},"6a99":function(e,t,n){var r=n("d3f4");e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},"6b4c":function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},"6c1c":function(e,t,n){n("c367");for(var r=n("e53d"),i=n("35e8"),o=n("481b"),a=n("5168")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var l=s[u],c=r[l],d=c&&c.prototype;d&&!d[a]&&i(d,a,l),o[l]=o.Array}},"6c57":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("2f4d"),u=i(s),l=n("41ee"),c=i(l),d=function(e){function t(e,n){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e||null,this.type=n||null,this.mediaType=u["default"].STREAM,this.responseType=""}return a(t,e),t}(c["default"]);t["default"]=d,e.exports=t["default"]},"6c78":function(e,t,n){"use strict";function r(){var e=void 0;function t(e){return e}function n(){return"POST"}function r(){return"arraybuffer"}function i(e){return e}function o(e){return String.fromCharCode.apply(null,new Uint8Array(e))}return e={getServerURLFromMessage:t,getHTTPMethod:n,getResponseType:r,getLicenseMessage:i,getErrorResponse:o},e}Object.defineProperty(t,"__esModule",{value:!0}),r.__dashjs_factory_name="Widevine",t["default"]=dashjs.FactoryMaker.getSingletonFactory(r),e.exports=t["default"]},"6cb2":function(e,t,n){"use strict";function r(){var e=void 0,t=void 0,n=void 0;function r(e,r){t=e,n=r}function i(){n=null,t=void 0}function o(e,r){e===t&&n&&n.report(t,r)}return e={initialize:r,reset:i,handleNewMetric:o},e}Object.defineProperty(t,"__esModule",{value:!0}),r.__dashjs_factory_name="GenericMetricHandler",t["default"]=dashjs.FactoryMaker.getClassFactory(r),e.exports=t["default"]},"6f8b":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("0b20"),o=r(i),a=n("467b"),s=r(a);function u(){var e=void 0,t=void 0;function n(e){if(t=new o["default"],!e)return null;var n=e.indexOf("#");if(-1!==n)for(var r=e.substr(n+1).split("&"),i=0,a=r.length;i<a;++i){var s=r[i],u=s.indexOf("=");if(-1!==u){var l=s.substring(0,u);t.hasOwnProperty(l)&&(t[l]=s.substr(u+1))}}}function r(){return t}return e={initialize:n,getURIFragmentData:r},e}u.__dashjs_factory_name="URIFragmentModel",t["default"]=s["default"].getSingletonFactory(u),e.exports=t["default"]},7091:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("4e47"),o=r(i),a=n("36b1"),s=r(a),u=n("467b"),l=r(u),c=n("589e"),d=r(c),f=n("9485"),h=r(f),p=n("2f4d"),m=r(p);function g(e){e=e||{};var t=this.context,n=e.metricsModel,r=void 0,i=void 0;function a(){i=(0,d["default"])(t).getInstance().getLogger(r)}function u(){if(!n||!n.hasOwnProperty("getReadOnlyMetricsFor"))throw new Error(m["default"].MISSING_CONFIG_ERROR)}function l(e){var r=(0,h["default"])(t).create();if(!e||!e.hasOwnProperty("getMediaInfo")||!e.hasOwnProperty("getMediaType")||!e.hasOwnProperty("useBufferOccupancyABR")||!e.hasOwnProperty("getAbrController")||!e.hasOwnProperty("getScheduleController"))return r;u();var a=e.getMediaInfo(),l=e.getMediaType(),c=n.getReadOnlyMetricsFor(l),d=e.getScheduleController(),f=e.getAbrController(),p=e.getStreamInfo(),m=p&&p.manifestInfo?p.manifestInfo.isDynamic:null,g=f.getThroughputHistory(),y=g.getSafeAverageThroughput(l,m),v=g.getAverageLatency(l),_=c.BufferState.length>0?c.BufferState[c.BufferState.length-1]:null,E=e.useBufferOccupancyABR();return!c||isNaN(y)||!_||E||f.getAbandonmentStateFor(l)!==s["default"].ABANDON_LOAD&&(_.state===o["default"].BUFFER_LOADED||m)&&(r.quality=f.getQualityForBitrate(a,y,v),d.setTimeToLoadDelay(0),i.debug("requesting switch to index: ",r.quality,"type: ",l,"Average throughput",Math.round(y),"kbps"),r.reason={throughput:y,latency:v}),r}function c(){}return r={getMaxIndex:l,reset:c},a(),r}g.__dashjs_factory_name="ThroughputRule",t["default"]=l["default"].getClassFactory(g),e.exports=t["default"]},"71a8":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkParameterType=a,t.checkInteger=s,t.checkRange=u,t.checkIsVideoOrAudioType=l;var i=n("2f4d"),o=r(i);function a(e,t){if(typeof e!==t)throw o["default"].BAD_ARGUMENT_ERROR}function s(e){var t=null!==e&&!isNaN(e)&&e%1===0;if(!t)throw o["default"].BAD_ARGUMENT_ERROR+" : argument is not an integer"}function u(e,t,n){if(e<t||e>n)throw o["default"].BAD_ARGUMENT_ERROR+" : argument out of range"}function l(e){if("string"!==typeof e||e!==o["default"].AUDIO&&e!==o["default"].VIDEO)throw o["default"].BAD_ARGUMENT_ERROR}},"71c1":function(e,t,n){var r=n("3a38"),i=n("25eb");e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),l=s.length;return u<0||u>=l?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},"71d3":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null};t["default"]=i,e.exports=t["default"]},7333:function(e,t,n){"use strict";var r=n("9e1e"),i=n("0d58"),o=n("2621"),a=n("52a7"),s=n("4bf8"),u=n("626a"),l=Object.assign;e.exports=!l||n("79e5")((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r}))?function(e,t){var n=s(e),l=arguments.length,c=1,d=o.f,f=a.f;while(l>c){var h,p=u(arguments[c++]),m=d?i(p).concat(d(p)):i(p),g=m.length,y=0;while(g>y)h=m[y++],r&&!f.call(p,h)||(n[h]=p[h])}return n}:l},"73ff":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("f974"),o=r(i),a=n("b69e"),s=r(a),u=n("f766"),l=r(u);function c(e){e=e||{};var t={},n=this.context,r=e.eventBus,i=e.events;function a(i){if(!i.error){var a=Object.keys(t),u=(0,s["default"])(n).getInstance({dashManifestModel:e.dashManifestModel,constants:e.constants}).getMetrics(i.manifest);u.forEach((function(r){var s=JSON.stringify(r);if(t.hasOwnProperty(s))a.splice(s,1);else try{var u=(0,o["default"])(n).create(e);u.initialize(r),t[s]=u}catch(i){}})),a.forEach((function(e){t[e].reset(),delete t[e]})),r.trigger(l["default"].METRICS_INITIALISATION_COMPLETE)}}function u(){Object.keys(t).forEach((function(e){t[e].reset()})),t={}}function c(){r.on(i.MANIFEST_UPDATED,a),r.on(i.STREAM_TEARDOWN_COMPLETE,u)}function d(){r.off(i.MANIFEST_UPDATED,a),r.off(i.STREAM_TEARDOWN_COMPLETE,u)}return c(),{reset:d}}c.__dashjs_factory_name="MetricsCollectionController",t["default"]=dashjs.FactoryMaker.getClassFactory(c),e.exports=t["default"]},7514:function(e,t,n){"use strict";var r=n("5ca1"),i=n("0a49")(5),o="find",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r(r.P+r.F*a,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(o)},7726:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},7737:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null};t["default"]=i,e.exports=t["default"]},"77f1":function(e,t,n){var r=n("4588"),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},"780f":function(e,t,n){"use strict";e.exports=o;var r=n("27bf"),i=n("3a7c");function o(e){if(!(this instanceof o))return new o(e);r.call(this,e)}i.inherits=n("3fb5"),i.inherits(o,r),o.prototype._transform=function(e,t,n){n(null,e)}},7865:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=n("120d"),a=r(o),s=n("31d1"),u=r(s),l=n("0757"),c=n("467b"),d=r(c),f=n("e172"),h=r(f),p=n("6a2d"),m=r(p);function g(e){e=e||{};var t=this.context,n=e.errHandler,r=e.metricsModel,o=e.mediaPlayerModel,s=e.requestModifier,c=e.boxParser,d=e.useFetch||!1,f=void 0,p=void 0,g=void 0,y=void 0,v=void 0,_=void 0;function E(){var e,t;p=[],g=[],y=[],e={},i(e,l.HTTPRequest.MPD_TYPE,h["default"].DOWNLOAD_ERROR_ID_MANIFEST),i(e,l.HTTPRequest.XLINK_EXPANSION_TYPE,h["default"].DOWNLOAD_ERROR_ID_XLINK),i(e,l.HTTPRequest.INIT_SEGMENT_TYPE,h["default"].DOWNLOAD_ERROR_ID_INITIALIZATION),i(e,l.HTTPRequest.MEDIA_SEGMENT_TYPE,h["default"].DOWNLOAD_ERROR_ID_CONTENT),i(e,l.HTTPRequest.INDEX_SEGMENT_TYPE,h["default"].DOWNLOAD_ERROR_ID_CONTENT),i(e,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,h["default"].DOWNLOAD_ERROR_ID_CONTENT),i(e,l.HTTPRequest.OTHER_TYPE,h["default"].DOWNLOAD_ERROR_ID_CONTENT),v=e,t={},i(t,l.HTTPRequest.MPD_TYPE,h["default"].DOWNLOAD_ERROR_ID_MANIFEST_CODE),i(t,l.HTTPRequest.XLINK_EXPANSION_TYPE,h["default"].DOWNLOAD_ERROR_ID_XLINK_CODE),i(t,l.HTTPRequest.INIT_SEGMENT_TYPE,h["default"].DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),i(t,l.HTTPRequest.MEDIA_SEGMENT_TYPE,h["default"].DOWNLOAD_ERROR_ID_CONTENT_CODE),i(t,l.HTTPRequest.INDEX_SEGMENT_TYPE,h["default"].DOWNLOAD_ERROR_ID_CONTENT_CODE),i(t,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,h["default"].DOWNLOAD_ERROR_ID_CONTENT_CODE),i(t,l.HTTPRequest.OTHER_TYPE,h["default"].DOWNLOAD_ERROR_ID_CONTENT_CODE),_=t}function b(e,i){var f=e.request,h=[],E=!0,T=!0,S=new Date,w=S,x=0,I=void 0;if(!s||!r||!n)throw new Error("config object is not correct or missing");var A=function(e){T=!1,f.requestStartDate=S,f.requestEndDate=new Date,f.firstByteDate=f.firstByteDate||S,f.checkExistenceOnly||(r.addHttpRequest(f.mediaType,null,f.type,f.url,I.response?I.response.responseURL:null,f.serviceLocation||null,f.range||null,f.requestStartDate,f.firstByteDate,f.requestEndDate,I.response?I.response.status:null,f.duration,I.response&&I.response.getAllResponseHeaders?I.response.getAllResponseHeaders():I.response?I.response.responseHeaders:[],e?h:null),f.type===l.HTTPRequest.MPD_TYPE&&r.addManifestUpdate("stream",f.type,f.requestStartDate,f.requestEndDate))},D=function(){-1!==p.indexOf(I)&&(p.splice(p.indexOf(I),1),T&&(A(!1),i>0?function(){i--;var t={config:e};y.push(t),t.timeout=setTimeout((function(){-1!==y.indexOf(t)&&(y.splice(y.indexOf(t),1),b(e,i))}),o.getRetryIntervalForType(f.type))}():(n.downloadError(v[f.type],f.url,f),n.error(new m["default"](_[f.type],f.url+" is not available",{request:f,response:I.response})),e.error&&e.error(f,"error",I.response.statusText),e.complete&&e.complete(f,I.response.statusText))))},R=function(t){var n=new Date;E&&(E=!1,(!t.lengthComputable||t.lengthComputable&&t.total!==t.loaded)&&(f.firstByteDate=n)),t.lengthComputable&&(f.bytesLoaded=t.loaded,f.bytesTotal=t.total),t.noTrace||(h.push({s:w,d:t.time?t.time:n.getTime()-w.getTime(),b:[t.loaded?t.loaded-x:0]}),w=n,x=t.loaded),e.progress&&t&&e.progress(t)},M=function(){I.response.status>=200&&I.response.status<=299&&(A(!0),e.success&&e.success(I.response.response,I.response.statusText,I.response.responseURL),e.complete&&e.complete(f,I.response.statusText))},C=function(){e.abort&&e.abort(f)},N=void 0;N=d&&window.fetch&&"arraybuffer"===f.responseType&&f.type===l.HTTPRequest.MEDIA_SEGMENT_TYPE?(0,u["default"])(t).create({requestModifier:s,boxParser:c}):(0,a["default"])(t).create({requestModifier:s,boxParser:c});var L=s.modifyRequestURL(f.url),P=f.checkExistenceOnly?l.HTTPRequest.HEAD:l.HTTPRequest.GET,O=o.getXHRWithCredentialsForType(f.type);I={url:L,method:P,withCredentials:O,request:f,onload:M,onend:D,onerror:D,progress:R,onabort:C,loader:N};var F=(new Date).getTime();isNaN(f.delayLoadingTime)||F>=f.delayLoadingTime?(p.push(I),N.load(I)):function(){var e={httpRequest:I};g.push(e),e.delayTimeout=setTimeout((function(){if(-1!==g.indexOf(e)){g.splice(g.indexOf(e),1);try{S=new Date,w=S,p.push(e.httpRequest),N.load(e.httpRequest)}catch(t){e.httpRequest.onerror()}}}),f.delayLoadingTime-F)}()}function T(e){e.request&&b(e,o.getRetryAttemptsForType(e.request.type))}function S(){y.forEach((function(e){clearTimeout(e.timeout),e.config.request&&e.config.abort&&e.config.abort(e.config.request)})),y=[],g.forEach((function(e){return clearTimeout(e.delayTimeout)})),g=[],p.forEach((function(e){e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e),e.onabort()})),p=[]}return f={load:T,abort:S},E(),f}g.__dashjs_factory_name="HTTPLoader";var y=d["default"].getClassFactory(g);t["default"]=y,e.exports=t["default"]},7914:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("b4f1"),o=r(i),a=n("bb46"),s=r(a),u=n("6a2d"),l=r(u),c=n("1d48"),d=r(c),f=n("8a43"),h=r(f),p=n("d25a"),m=r(p),g=n("467b"),y=r(g),v=n("589e"),_=r(v),E=n("0757"),b=n("41ee"),T=r(b),S=n("7865"),w=r(S),x=n("e172"),I=r(x);function A(){var e=this.context,t=(0,h["default"])(e).getInstance(),n=void 0,r=void 0,i=void 0,a=void 0,u=void 0,c=void 0,f=void 0,p=void 0,g=void 0;function y(){r=(0,_["default"])(e).getInstance().getLogger(n)}function v(){a=(0,m["default"])(e).getInstance(),u=(0,o["default"])(e).getInstance(),p=(0,w["default"])(e).create({errHandler:i,metricsModel:c,mediaPlayerModel:f,requestModifier:u})}function b(e){e.baseURLController&&(g=e.baseURLController),e.metricsModel&&(c=e.metricsModel),e.mediaPlayerModel&&(f=e.mediaPlayerModel),e.errHandler&&(i=e.errHandler)}function S(){if(!g||!g.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function x(e,n){S();var i=null,o=g.resolve(e.path),s=n||{init:!0,url:o?o.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500};r.debug("Start searching for initialization.");var u=M(s),l=function(n){s.bytesLoaded=s.range.end,i=a.findInitRange(n),i?(e.range=i,t.trigger(d["default"].INITIALIZATION_LOADED,{representation:e})):(s.range.end=s.bytesLoaded+s.bytesToLoad,x(e,s))},c=function(){t.trigger(d["default"].INITIALIZATION_LOADED,{representation:e})};p.load({request:u,success:l,error:c}),r.debug("Perform init search: "+s.url)}function A(e,t,n,i,o){if(S(),n&&(void 0===n.start||void 0===n.end)){var s=n?n.toString().split("-"):null;n=s?{start:parseFloat(s[0]),end:parseFloat(s[1])}:null}o=o||C;var u=null,l=null,c=!!n,d=g.resolve(e.path),f={init:!1,url:d?d.url:void 0,range:c?n:{start:0,end:1500},searching:!c,bytesLoaded:i?i.bytesLoaded:0,bytesToLoad:1500},h=M(f),m=function(n){var i=f.bytesToLoad,s=n.byteLength;if(f.bytesLoaded=f.range.end-f.range.start,u=a.parse(n),l=u.getBox("sidx"),l&&l.isComplete){var c=l.references,d=void 0,h=void 0;null!==c&&void 0!==c&&c.length>0&&(d=1===c[0].reference_type),d?function(){r.debug("Initiate multiple SIDX load."),f.range.end=f.range.start+l.size;var n=void 0,i=void 0,a=void 0,s=void 0,u=void 0,d=[],h=0,p=(l.offset||f.range.start)+l.size,m=function(n){n?(d=d.concat(n),h++,h>=i&&o(d,e,t)):o(null,e,t)};for(n=0,i=c.length;n<i;n++)a=p,s=p+c[n].referenced_size-1,p+=c[n].referenced_size,u={start:a,end:s},A(e,null,u,f,m)}():(r.debug("Parsing segments from SIDX."),h=R(l,f),o(h,e,t))}else{if(l)f.range.start=l.offset||f.range.start,f.range.end=f.range.start+(l.size||i);else{if(s<f.bytesLoaded)return void o(null,e,t);var p=u.getLastBox();p&&p.size?(f.range.start=p.offset+p.size,f.range.end=f.range.start+i):f.range.end+=i}A(e,t,f.range,f,o)}},y=function(){o(null,e,t)};p.load({request:h,success:m,error:y}),r.debug("Perform SIDX load: "+f.url)}function D(){p.abort(),p=null,i=null,a=null,u=null}function R(e,t){for(var n=e.references,r=n.length,i=e.timescale,o=e.earliest_presentation_time,a=t.range.start+e.offset+e.first_offset+e.size,u=[],l=void 0,c=void 0,d=void 0,f=void 0,h=0;h<r;h++)d=n[h].subsegment_duration,f=n[h].referenced_size,l=new s["default"],l.duration=d,l.startTime=o,l.timescale=i,c=a+f-1,l.mediaRange=a+"-"+c,u.push(l),o+=d,a+=f;return u}function M(e){if(e.url){var t=new T["default"];return t.type=e.init?E.HTTPRequest.INIT_SEGMENT_TYPE:E.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}}function C(e,n,r){e?t.trigger(d["default"].SEGMENTS_LOADED,{segments:e,representation:n,mediaType:r}):t.trigger(d["default"].SEGMENTS_LOADED,{segments:null,representation:n,mediaType:r,error:new l["default"](I["default"].SEGMENT_BASE_LOADER_ERROR_CODE,I["default"].SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}return n={setConfig:b,initialize:v,loadInitialization:x,loadSegments:A,reset:D},y(),n}A.__dashjs_factory_name="SegmentBaseLoader",t["default"]=y["default"].getSingletonFactory(A),e.exports=t["default"]},"794b":function(e,t,n){e.exports=!n("8e60")&&!n("294c")((function(){return 7!=Object.defineProperty(n("1ec9")("div"),"a",{get:function(){return 7}}).a}))},"795b":function(e,t,n){e.exports=n("696e")},"79aa":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"79e5":function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"7a56":function(e,t,n){"use strict";var r=n("7726"),i=n("86cc"),o=n("9e1e"),a=n("2b4c")("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},"7b5a":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("7d9a"),o=r(i),a=n("f766"),s=r(a),u=n("73ff"),l=r(u),c=n("0d27"),d=r(c),f=n("5948"),h=r(f);function p(){var e=this.context,t=void 0;function n(t){return(0,o["default"])(e).getInstance({eventBus:t.eventBus,metricsModel:t.metricsModel,metricsConstants:t.metricsConstants,events:t.events}),(0,l["default"])(e).create(t)}function r(){return(0,h["default"])(e).getInstance()}function i(){return(0,d["default"])(e).getInstance()}return t={createMetricsReporting:n,getReportingFactory:r,getMetricsHandlerFactory:i},t}p.__dashjs_factory_name="MetricsReporting";var m=dashjs.FactoryMaker.getClassFactory(p);m.events=s["default"],dashjs.FactoryMaker.updateClassFactory(p.__dashjs_factory_name,m),t["default"]=m,e.exports=t["default"]},"7b70":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){i(this,e),this.init()}return r(e,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready"}}]),e}(),a=new o;t["default"]=a,e.exports=t["default"]},"7cd6":function(e,t,n){var r=n("40c3"),i=n("5168")("iterator"),o=n("481b");e.exports=n("584a").getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},"7d72":function(e,t,n){"use strict";var r=n("8707").Buffer,i=r.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){if(!e)return"utf8";var t;while(1)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function a(e){var t=o(e);if("string"!==typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}function s(e){var t;switch(this.encoding=a(e),this.encoding){case"utf16le":this.text=p,this.end=m,t=4;break;case"utf8":this.fillLast=d,t=4;break;case"base64":this.text=g,this.end=y,t=3;break;default:return this.write=v,void(this.end=_)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function u(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function l(e,t,n){var r=t.length-1;if(r<n)return 0;var i=u(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=u(t[r]),i>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=u(t[r]),i>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0))}function c(e,t,n){if(128!==(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,""}}function d(e){var t=this.lastTotal-this.lastNeed,n=c(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function f(e,t){var n=l(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t}function p(e,t){if((e.length-t)%2===0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function m(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function g(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function y(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function v(e){return e.toString(this.encoding)}function _(e){return e&&e.length?this.write(e):""}t.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(t=this.fillLast(e),void 0===t)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},s.prototype.end=h,s.prototype.text=f,s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},"7d9a":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("5ed3"),o=r(i),a=n("f766"),s=r(a);function u(e){e=e||{};var t=void 0,n=void 0,r=e.eventBus,i=e.metricsModel,a=e.metricsConstants,u=e.events;function l(e){var t=new o["default"];if(n){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.mpdurl||(t.mpdurl=n.originalUrl||n.url),t.terror||(t.terror=new Date),i.addDVBErrors(t)}}function c(e){e.error||(n=e.manifest)}function d(e){l({errorcode:o["default"].BASE_URL_CHANGED,servicelocation:e.entry})}function f(){l({errorcode:o["default"].BECAME_REPORTER})}function h(e){(0===e.responsecode||e.responsecode>=400||e.responsecode<100||e.responsecode>=600)&&l({errorcode:e.responsecode||o["default"].CONNECTION_ERROR,url:e.url,terror:e.tresponse,servicelocation:e._serviceLocation})}function p(e){switch(e.metric){case a.HTTP_REQUEST:h(e.value);break;default:break}}function m(e){var t=e.error?e.error.code:0,n=void 0;switch(t){case MediaError.MEDIA_ERR_NETWORK:n=o["default"].CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:n=o["default"].CORRUPT_MEDIA_OTHER;break;default:return}l({errorcode:n})}function g(){r.on(u.MANIFEST_UPDATED,c,t),r.on(u.SERVICE_LOCATION_BLACKLIST_CHANGED,d,t),r.on(u.METRIC_ADDED,p,t),r.on(u.METRIC_UPDATED,p,t),r.on(u.PLAYBACK_ERROR,m,t),r.on(s["default"].BECAME_REPORTING_PLAYER,f,t)}function y(){r.off(u.MANIFEST_UPDATED,c,t),r.off(u.SERVICE_LOCATION_BLACKLIST_CHANGED,d,t),r.off(u.METRIC_ADDED,p,t),r.off(u.METRIC_UPDATED,p,t),r.off(u.PLAYBACK_ERROR,m,t),r.off(s["default"].BECAME_REPORTING_PLAYER,f,t)}return t={initialise:g,reset:y},g(),t}u.__dashjs_factory_name="DVBErrorsTranslator",t["default"]=dashjs.FactoryMaker.getSingletonFactory(u),e.exports=t["default"]},"7e90":function(e,t,n){var r=n("d9f6"),i=n("e4ae"),o=n("c3a1");e.exports=n("8e60")?Object.defineProperties:function(e,t){i(e);var n,a=o(t),s=a.length,u=0;while(s>u)r.f(e,n=a[u++],t[n]);return e}},"7f20":function(e,t,n){var r=n("86cc").f,i=n("69a8"),o=n("2b4c")("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},"7f3c":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null};t["default"]=i,e.exports=t["default"]},"7f7f":function(e,t,n){var r=n("86cc").f,i=Function.prototype,o=/^\s*function ([^ (]*)/,a="name";a in i||n("9e1e")&&r(i,a,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},8019:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("e09e"),s=r(a),u=n("41ee"),l=r(u),c=n("6a2d"),d=r(c),f=n("0757"),h=n("1d48"),p=r(h),m=n("8a43"),g=r(m),y=n("e172"),v=r(y),_=n("467b"),E=r(_),b=n("589e"),T=r(b),S=n("4e7a"),w=r(S),x=n("9ad3"),I=r(x),A=n("5beb"),D=n("c429"),R=r(D),M=n("7914"),C=r(M),N=n("54b2"),L=r(N);function P(e){e=e||{};var t=this.context,n=(0,g["default"])(t).getInstance(),r=(0,w["default"])(t).getInstance(),i=void 0,a=e.timelineConverter,u=e.dashMetrics,c=e.metricsModel,h=e.mediaPlayerModel,m=e.errHandler,y=e.baseURLController,_=void 0,E=void 0,b=void 0,S=void 0,x=void 0,D=void 0,M=void 0;function N(){E=(0,T["default"])(t).getInstance().getLogger(_),V(),i=P(e.mimeType)?(0,L["default"])(t).getInstance():(0,C["default"])(t).getInstance(),i.setConfig({baseURLController:y,metricsModel:c,mediaPlayerModel:h,errHandler:m}),n.on(p["default"].INITIALIZATION_LOADED,re,_),n.on(p["default"].SEGMENTS_LOADED,ie,_)}function P(e){var t=e.split("/")[1];return"webm"===t.toLowerCase()}function O(n){D=n,i.initialize(),M=(0,R["default"])(t).create(e,k())}function F(){return D?D.getType():null}function k(){var e=D?D.getStreamInfo():null;return e?e.manifestInfo.isDynamic:null}function B(){return D?D.getMediaInfo():null}function U(){return D}function H(e){x=e}function j(){return x}function K(){b=-1}function V(){K(),x=0,S=null,D=null,M=null}function q(){V(),n.off(p["default"].INITIALIZATION_LOADED,re,_),n.off(p["default"].SEGMENTS_LOADED,ie,_)}function G(e,t,n){var i=y.resolve(n.path),o=void 0,a=void 0;return i&&t!==i.url&&r.isRelative(t)?(o=i.url,a=i.serviceLocation,t&&(o=r.resolve(t,o))):o=t,!r.isRelative(o)&&(e.url=o,e.serviceLocation=a,!0)}function Y(e,t){var n=new l["default"],r=e.adaptation.period,i=r.start,o=k();if(n.mediaType=t,n.type=f.HTTPRequest.INIT_SEGMENT_TYPE,n.range=e.range,n.availabilityStartTime=a.calcAvailabilityStartTimeFromPresentationTime(i,r.mpd,o),n.availabilityEndTime=a.calcAvailabilityEndTimeFromPresentationTime(i+r.duration,r.mpd,o),n.quality=e.index,n.mediaInfo=B(),n.representationId=e.id,G(n,e.initialization,e))return n}function z(e){if(!e)return null;var t=Y(e,F());return t}function W(e){var t=!1,n=k();if(n||b!==e.availableSegmentsNumber){var r=(0,A.getSegmentByIndex)(b,e);if(r){var i=parseFloat((r.presentationStartTime-e.adaptation.period.start).toFixed(5)),o=e.adaptation.period.duration;E.debug(e.segmentInfoType+": "+i+" / "+o),t=(e.segmentInfoType!==s["default"].SEGMENT_TIMELINE||!n)&&i>=o}else E.debug("isMediaFinished - no segment found")}else t=!0;return t}function X(e){M.getSegments(e,S,b,$)}function $(e,t){if(e.segments=t,t&&t.length>0&&k()){var n=t[t.length-1],r=n.presentationStartTime,i=c.getMetricsFor(o["default"].STREAM);a.setExpectedLiveEdge(r),c.updateManifestUpdateInfo(u.getCurrentManifestUpdate(i),{presentationStartTime:r})}}function Q(e){if(!e)throw new Error("no representation");e.segments=null,X(e)}function J(e,t){var r=I["default"].hasInitialization(e),o=I["default"].hasSegments(e),s=void 0;if(e.segmentDuration||e.segments||Q(e),e.segmentAvailabilityRange=a.calcSegmentAvailabilityRange(e,k()),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start&&!e.useCalculatedLiveEdgeTime)return s=new d["default"](v["default"].SEGMENTS_UNAVAILABLE_ERROR_CODE,v["default"].SEGMENTS_UNAVAILABLE_ERROR_MESSAGE,{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end}),void n.trigger(p["default"].REPRESENTATION_UPDATED,{sender:this,representation:e,error:s});t||K(),e.segmentDuration&&Q(e),r||i.loadInitialization(e),o||i.loadSegments(e,F(),e.indexRange),r&&o&&n.trigger(p["default"].REPRESENTATION_UPDATED,{sender:this,representation:e})}function Z(e,t,n){var r=t.segments,i=r?r.length:null,o=-1,a=void 0,s=void 0,u=void 0,l=void 0,c=void 0;if(r&&i>0)for(n=void 0===n||null===n?h.getSegmentOverlapToleranceTime():n,c=0;c<i;c++)if(s=r[c],u=s.presentationStartTime,l=s.duration,a=void 0===n||null===n?l/2:n,e+a>=u&&e-a<u+l){o=s.availabilityIdx;break}return o}function ee(e){if(null===e||void 0===e)return null;var t=new l["default"],n=e.representation,r=n.adaptation.period.mpd.manifest.Period_asArray[n.adaptation.period.index].AdaptationSet_asArray[n.adaptation.index].Representation_asArray[n.index].bandwidth,i=e.media;return i=(0,A.replaceTokenForTemplate)(i,"Number",e.replacementNumber),i=(0,A.replaceTokenForTemplate)(i,"Time",e.replacementTime),i=(0,A.replaceTokenForTemplate)(i,"Bandwidth",r),i=(0,A.replaceIDForTemplate)(i,n.id),i=(0,A.unescapeDollarsInTemplate)(i),t.mediaType=F(),t.type=f.HTTPRequest.MEDIA_SEGMENT_TYPE,t.range=e.mediaRange,t.startTime=e.presentationStartTime,t.duration=e.duration,t.timescale=n.timescale,t.availabilityStartTime=e.availabilityStartTime,t.availabilityEndTime=e.availabilityEndTime,t.wallStartTime=e.wallStartTime,t.quality=n.index,t.index=e.availabilityIdx,t.mediaInfo=B(),t.adaptationIndex=n.adaptation.index,t.representationId=n.id,G(t,i,n)?t:void 0}function te(e,t,n){var r=void 0,i=void 0,o=void 0;if(!e)return null;var a=F(),u=b,c=!!n&&n.keepIdx,d=n?n.timeThreshold:null,f=!(!n||!n.ignoreIsFinished);return S!==t&&(S=t,E.debug("Getting the request for "+a+" time : "+t)),X(e),b=Z(t,e,d),b<0&&(X(e),b=Z(t,e,d)),b>=0&&E.debug("Index for "+a+" time "+t+" is "+b),o=!f&&W(e),o?(r=new l["default"],r.action=l["default"].ACTION_COMPLETE,r.index=b,r.mediaType=a,r.mediaInfo=B(),E.debug("Signal complete in getSegmentRequestForTime -",a)):(i=(0,A.getSegmentByIndex)(b,e),r=ee(i)),c&&u>=0&&(b=e.segmentInfoType===s["default"].SEGMENT_TIMELINE&&k()?b:u),r}function ne(e){var t=void 0,n=void 0,r=void 0;if(!e||-1===b)return null;var i=F(),o=k();S=null,b++,E.debug("Getting the next request at index: "+b+", type: "+i);var a=(0,A.getSegmentByIndex)(b,e);return!a&&o?(E.debug("No segment found at index: "+b+". Wait for next loop"),X(e),b--,null):(r=W(e),r?(t=new l["default"],t.action=l["default"].ACTION_COMPLETE,t.index=b,t.mediaType=i,t.mediaInfo=B(),E.debug("Signal complete -",i)):(X(e),n=(0,A.getSegmentByIndex)(b,e),t=ee(n),!n&&o&&b--),t)}function re(e){var t=e.representation;t.segments&&n.trigger(p["default"].REPRESENTATION_UPDATED,{sender:this,representation:t})}function ie(e){if(!e.error&&F()===e.mediaType){var t=e.segments,r=e.representation,i=[],o=0,s=void 0,u=void 0,l=void 0,c=void 0;for(s=0,u=t.length;s<u;s++)l=t[s],c=(0,A.getTimeBasedSegment)(a,k(),r,l.startTime,l.duration,l.timescale,l.media,l.mediaRange,o),i.push(c),c=null,o++;r.segmentAvailabilityRange={start:i[0].presentationStartTime,end:i[u-1].presentationStartTime},r.availableSegmentsNumber=u,$(r,i),I["default"].hasInitialization(r)&&n.trigger(p["default"].REPRESENTATION_UPDATED,{sender:this,representation:r})}}return _={initialize:O,getStreamProcessor:U,getInitRequest:z,getSegmentRequestForTime:te,getNextSegmentRequest:ne,updateRepresentation:J,updateSegmentList:Q,setCurrentTime:H,getCurrentTime:j,reset:q,resetIndex:K},N(),_}P.__dashjs_factory_name="DashHandler",t["default"]=E["default"].getClassFactory(P),e.exports=t["default"]},"804f":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(e){e=e||{};var t=void 0,n=new DataView(e.data),r=0;function i(){return r}function o(e){r=e}function a(e,t){var i=!0,o=0,a=void 0,s=void 0;if(void 0===t&&(t=!1),e.tag>16777215?(n.getUint32(r)!==e.tag&&(i=!1),o=4):e.tag>65535?(a=n.getUint16(r),s=n.getUint8(r+2),256*a+s!==e.tag&&(i=!1),o=3):e.tag>255?(n.getUint16(r)!==e.tag&&(i=!1),o=2):(n.getUint8(r)!==e.tag&&(i=!1),o=1),!i&&e.required&&!t)throw new Error("required tag not found");return i&&(r+=o),i}function s(e,t){var n=a(e,t);return n&&c(),n}function u(e){var n=void 0;return a(e),n=c(),t[e.parse](n)}function l(e,t){var n=a(e,t),i=void 0;return n&&(i=c(),r+=i),n}function c(e){var t=1,i=128,o=8,a=-1,s=0,u=n.getUint8(r),l=0;for(l=0;l<o;l+=1){if((u&i)===i){s=void 0===e?u&~i:u,a=l;break}i>>=1}for(l=0;l<a;l+=1,t+=1)s=s<<8|255&n.getUint8(r+t);return r+=t,s}function d(e){var t=void 0;switch(e){case 4:t=n.getFloat32(r),r+=4;break;case 8:t=n.getFloat64(r),r+=8;break}return t}function f(e){for(var t=0,i=0;i<e;i+=1)t<<=8,t|=255&n.getUint8(r+i);return r+=e,t}function h(){return r<n.byteLength}return t={getPos:i,setPos:o,consumeTag:a,consumeTagAndSize:s,parseTag:u,skipOverElement:l,getMatroskaCodedNum:c,getMatroskaFloat:d,getMatroskaUint:f,moreData:h},t}a.__dashjs_factory_name="EBMLParser",t["default"]=o["default"].getClassFactory(a),e.exports=t["default"]},8079:function(e,t,n){var r=n("7726"),i=n("1991").set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n("2d95")(a);e.exports=function(){var e,t,n,l=function(){var r,i;u&&(r=a.domain)&&r.exit();while(e){i=e.fn,e=e.next;try{i()}catch(o){throw e?n():t=void 0,o}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(l)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);n=function(){c.then(l)}}else n=function(){i.call(r,l)};else{var d=!0,f=document.createTextNode("");new o(l).observe(f,{characterData:!0}),n=function(){f.data=d=!d}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},"81a0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("09b9"),u=i(s),l=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_REQUESTED="initRequested",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATED="representationUpdated",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIMED_TEXT_REQUESTED="timedTextRequested",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}return a(t,e),t}(u["default"]);t["default"]=l,e.exports=t["default"]},8293:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("b048"),u=i(s),l=n("e09e"),c=i(l),d=function(e){function t(){o(this,t);var e=[c["default"].PROFILES,c["default"].WIDTH,c["default"].HEIGHT,c["default"].SAR,c["default"].FRAMERATE,c["default"].AUDIO_SAMPLING_RATE,c["default"].MIME_TYPE,c["default"].SEGMENT_PROFILES,c["default"].CODECS,c["default"].MAXIMUM_SAP_PERIOD,c["default"].START_WITH_SAP,c["default"].MAX_PLAYOUT_RATE,c["default"].CODING_DEPENDENCY,c["default"].SCAN_TYPE,c["default"].FRAME_PACKING,c["default"].AUDIO_CHANNEL_CONFIGURATION,c["default"].CONTENT_PROTECTION,c["default"].ESSENTIAL_PROPERTY,c["default"].SUPPLEMENTAL_PROPERTY,c["default"].INBAND_EVENT_STREAM];r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,c["default"].ADAPTATION_SET,e,[new u["default"](c["default"].REPRESENTATION,e,[new u["default"](c["default"].SUB_REPRESENTATION,e)])])}return a(t,e),t}(u["default"]);t["default"]=d,e.exports=t["default"]},"82aa":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("665e"),o=r(i),a=n("467b"),s=r(a);function u(){var e=void 0,t=void 0;function n(e){return e&&t&&t.boxes&&0!==t.boxes.length&&"function"===typeof t.fetch?s(t.fetch(e)):null}function r(e){var n=[];if(!e||!t||"function"!==typeof t.fetchAll)return n;for(var r=t.fetchAll(e),i=void 0,o=0,a=r.length;o<a;o++)i=s(r[o]),i&&n.push(i);return n}function i(e){t=e}function a(){if(!t||!t.boxes||!t.boxes.length)return null;var e=t.boxes[t.boxes.length-1].type,n=r(e);return n.length>0?n[n.length-1]:null}function s(e){if(!e)return null;var t=new o["default"](e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}return e={getBox:n,getBoxes:r,setData:i,getLastBox:a},e}u.__dashjs_factory_name="IsoFile",t["default"]=s["default"].getClassFactory(u),e.exports=t["default"]},8307:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("589e"),s=r(a),u=n("646e"),l=r(u),c=n("8821"),d=r(c),f=n("65b4"),h=r(f),p=n("fe3f"),m=r(p),g=n("37b6"),y=r(g),v=n("aef8"),_=r(v),E=n("8293"),b=r(E),T=n("0c93"),S=r(T);function w(){var e=this.context,t=void 0,n=void 0,r=void 0,i=void 0,o=void 0;function a(){n=(0,s["default"])(e).getInstance().getLogger(t),r=[new m["default"],new y["default"],new _["default"],new h["default"]],i=new d["default"]({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:r}),o=(0,l["default"])(e).create({adaptationset:new b["default"],period:new S["default"]})}function u(){return r}function c(){return o}function f(e){var t=void 0,r=window.performance.now();if(t=i.xml_str2json(e),!t)throw new Error("parsing the manifest failed");var a=window.performance.now();o.run(t);var s=window.performance.now();return n.info("Parsing complete: ( xml2json: "+(a-r).toPrecision(3)+"ms, objectiron: "+(s-a).toPrecision(3)+"ms, total: "+((s-r)/1e3).toPrecision(3)+"s)"),t}return t={parse:f,getMatchers:u,getIron:c},a(),t}w.__dashjs_factory_name="DashParser",t["default"]=o["default"].getClassFactory(w),e.exports=t["default"]},8378:function(e,t){var n=e.exports={version:"2.6.10"};"number"==typeof __e&&(__e=n)},8436:function(e,t){e.exports=function(){}},"84f2":function(e,t){e.exports={}},"85a1":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("589e"),s=r(a);function u(){var e=void 0,t=void 0,n=this.context;function r(){t=(0,s["default"])(n).getInstance().getLogger(e)}function i(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return t?new MediaSource:e?new WebKitMediaSource:null}function o(e,t){var n=window.URL.createObjectURL(e);return t.setSource(n),n}function a(e){e.setSource(null)}function u(e,t){return e.duration!=t&&(e.duration=t),e.duration}function l(e,t,n){e&&"function"===typeof e.setLiveSeekableRange&&"function"===typeof e.clearLiveSeekableRange&&"open"===e.readyState&&t>=0&&t<n&&(e.clearLiveSeekableRange(),e.setLiveSeekableRange(t,n))}function c(e){var n=e.sourceBuffers,r=n.length;if("open"===e.readyState){for(var i=0;i<r;i++){if(n[i].updating)return;if(0===n[i].buffered.length)return}t.info("call to mediaSource endOfStream"),e.endOfStream()}}return e={createMediaSource:i,attachMediaSource:o,detachMediaSource:a,setDuration:u,setSeekable:l,signalEndOfStream:c},r(),e}u.__dashjs_factory_name="MediaSourceController",t["default"]=o["default"].getSingletonFactory(u),e.exports=t["default"]},"86cc":function(e,t,n){var r=n("cb7c"),i=n("c69a"),o=n("6a99"),a=Object.defineProperty;t.f=n("9e1e")?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},8707:function(e,t,n){var r=n("b639"),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=a),o(i,a),a.from=function(e,t,n){if("number"===typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!==typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"===typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},"874c":function(e,t,n){(function(e,t,n){function r(e,t,h){var p;if("region"===h.kind)p=document.createElement("div"),p.style.position="absolute";else if("body"===h.kind)p=document.createElement("div");else if("div"===h.kind)p=document.createElement("div");else if("image"===h.kind){if(p=document.createElement("img"),null!==e.imgResolver&&null!==h.src){var g=e.imgResolver(h.src,p);g&&(p.src=g),p.height=e.regionH,p.width=e.regionW}}else if("p"===h.kind)p=document.createElement("p");else if("span"===h.kind){if("container"===h.styleAttrs[n.byName.ruby.qname])p=document.createElement("ruby"),e.ruby=!0;else if("base"===h.styleAttrs[n.byName.ruby.qname])p=document.createElement("rb");else if("text"===h.styleAttrs[n.byName.ruby.qname])p=document.createElement("rt");else if("baseContainer"===h.styleAttrs[n.byName.ruby.qname])p=document.createElement("rbc");else if("textContainer"===h.styleAttrs[n.byName.ruby.qname])p=document.createElement("rtc");else{if("delimiter"===h.styleAttrs[n.byName.ruby.qname])return;p=document.createElement("span")}var y=h.styleAttrs[n.byName.textEmphasis.qname];y&&"none"!==y.style&&(e.textEmphasis=!0)}else"br"===h.kind&&(p=document.createElement("br"));if(p){for(var _ in t.appendChild(p),p.style.margin="0",m){var E=m[_],b=h.styleAttrs[E.qname];void 0!==b&&null!==E.map&&E.map(e,p,h,b)}var T=p;if("region"===h.kind){var S=h.styleAttrs[n.byName.writingMode.qname];"lrtb"===S||"lr"===S?(e.ipd="lr",e.bpd="tb"):"rltb"===S||"rl"===S?(e.ipd="rl",e.bpd="tb"):"tblr"===S?(e.ipd="tb",e.bpd="lr"):"tbrl"!==S&&"tb"!==S||(e.ipd="tb",e.bpd="rl")}var w=h.styleAttrs[n.byName.linePadding.qname];if(w&&!w.isZero()){var x=w.toUsedLength(e.w,e.h);if(x>0){var I=Math.ceil(x)+"px";"tb"===e.bpd?(T.style.paddingLeft=I,T.style.paddingRight=I):(T.style.paddingTop=I,T.style.paddingBottom=I),e.lp=w}}var A=h.styleAttrs[n.byName.multiRowAlign.qname];if(A&&"auto"!==A){var D=document.createElement("span");D.style.display="inline-block",D.style.textAlign=A,p.appendChild(D),T=D,e.mra=A}var R=h.styleAttrs[n.byName.rubyReserve.qname];if(R&&"none"!==R[0]&&(e.rubyReserve=R),h.styleAttrs[n.byName.fillLineGap.qname]&&(e.flg=!0),"span"===h.kind&&h.text)if(n.byName.textCombine.qname in h.styleAttrs&&"all"===h.styleAttrs[n.byName.textCombine.qname][0])p.textContent=h.text;else for(var M="",C=0;C<h.text.length;C++){M+=h.text.charAt(C);var N=h.text.charCodeAt(C);if(N<55296||N>56319||C===h.text.length){var L=document.createElement("span");L.textContent=M,p.appendChild(L),M=""}}for(var P in h.contents)r(e,T,h.contents[P]);var O=[];if((e.lp||e.mra||e.flg||e.ruby||e.textEmphasis||e.rubyReserve)&&"p"===h.kind&&(f(e,T,O,null),e.rubyReserve&&(u(O,e),e.rubyReserve=null),(e.ruby||e.rubyReserve)&&(s(O,e),e.ruby=null),e.textEmphasis&&(a(O,e),e.textEmphasis=null),e.mra&&(o(O),e.mra=null),e.lp&&(i(O,e.lp.toUsedLength(e.w,e.h),e),e.lp=null),e.flg)){var F=d(T.getBoundingClientRect(),e);l(O,F.before,F.after,e),e.flg=null}if("region"===h.kind&&(f(e,T,O),"tb"===e.bpd&&e.enableRollUp&&h.contents.length>0&&"after"===h.styleAttrs[n.byName.displayAlign.qname])){var k=""===h.id?"_":h.id,B=new c(k,O);if(e.currentISDState[B.id]=B,e.previousISDState&&B.id in e.previousISDState&&e.previousISDState[B.id].plist.length>0&&B.plist.length>1&&B.plist[B.plist.length-2].text===e.previousISDState[B.id].plist[e.previousISDState[B.id].plist.length-1].text){var U=p.firstElementChild,H=B.plist[B.plist.length-1].after-B.plist[B.plist.length-1].before;U.style.bottom="-"+H+"px",U.style.transition="transform 0.4s",U.style.position="relative",U.style.transform="translateY(-"+H+"px)"}}}else v(e.errorHandler,"Error processing ISD element kind: "+h.kind)}function i(e,t,n){for(var r in e){var i=e[r].elements.length,o=e[r].elements[e[r].start_elem],a=e[r].elements[e[r].end_elem],s=Math.ceil(t)+"px",u="-"+Math.ceil(t)+"px";0!==i&&("lr"===n.ipd?(o.node.style.borderLeftColor=o.bgcolor||"#00000000",o.node.style.borderLeftStyle="solid",o.node.style.borderLeftWidth=s,o.node.style.marginLeft=u):"rl"===n.ipd?(o.node.style.borderRightColor=o.bgcolor||"#00000000",o.node.style.borderRightStyle="solid",o.node.style.borderRightWidth=s,o.node.style.marginRight=u):"tb"===n.ipd&&(o.node.style.borderTopColor=o.bgcolor||"#00000000",o.node.style.borderTopStyle="solid",o.node.style.borderTopWidth=s,o.node.style.marginTop=u),"lr"===n.ipd?(a.node.style.borderRightColor=a.bgcolor||"#00000000",a.node.style.borderRightStyle="solid",a.node.style.borderRightWidth=s,a.node.style.marginRight=u):"rl"===n.ipd?(a.node.style.borderLeftColor=a.bgcolor||"#00000000",a.node.style.borderLeftStyle="solid",a.node.style.borderLeftWidth=s,a.node.style.marginLeft=u):"tb"===n.ipd&&(a.node.style.borderBottomColor=a.bgcolor||"#00000000",a.node.style.borderBottomStyle="solid",a.node.style.borderBottomWidth=s,a.node.style.marginBottom=u))}}function o(e){for(var t=0;t<e.length-1;t++){var n=e[t].elements.length;if(0!==n&&!1===e[t].br){var r=document.createElement("br"),i=e[t].elements[n-1].node;i.parentElement.insertBefore(r,i.nextSibling)}}}function a(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<e[n].te.length;r++){var i;if(""===e[n].te[r].style.textEmphasisPosition)i="tb"===t.bpd?0===n?"left over":"left under":"rl"===t.bpd?0===n?"right under":"left under":0===n?"left under":"right under",e[n].te[r].style.textEmphasisPosition=i}}function s(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<e[n].rbc.length;r++){var i;if(""===e[n].rbc[r].style.rubyPosition)i="tb"===t.bpd||"rl"===t.bpd?0===n?"over":"under":0===n?"under":"over",e[n].rbc[r].style.rubyPosition=i}}function u(e,t){for(var n=0;n<e.length;n++){var r,i,o=document.createElement("ruby"),a=document.createElement("rb");a.textContent="",o.appendChild(a);var s=t.rubyReserve[1].toUsedLength(t.w,t.h)+"px";"both"===t.rubyReserve[0]?(r=document.createElement("rtc"),r.style.rubyPosition="under",r.textContent="",r.style.fontSize=s,i=document.createElement("rtc"),i.style.rubyPosition="over",i.textContent="",i.style.fontSize=s,o.appendChild(r),o.appendChild(i)):(r=document.createElement("rtc"),r.textContent="",r.style.fontSize=s,"after"===t.rubyReserve[0]||"outside"===t.rubyReserve[0]&&n>0?r.style.rubyPosition="tb"===t.bpd||"rl"===t.bpd?"under":"over":r.style.rubyPosition="tb"===t.bpd||"rl"===t.bpd?"over":"under",o.appendChild(r));e[n].elements[0].node.parentElement.insertBefore(o,e[n].elements[0].node)}}function l(e,t,n,r){for(var i=Math.sign(n-t),o=0;o<=e.length;o++){var a,s,u;if(a=0===o?t:o===e.length?n:(e[o].before+e[o-1].after)/2,o>0)for(var l=0;l<e[o-1].elements.length;l++)null!==e[o-1].elements[l].bgcolor&&(u=e[o-1].elements[l],i*(u.after-a)<0&&(s=Math.ceil(Math.abs(a-u.after))+"px",u.node.style.backgroundColor=u.bgcolor,"lr"===r.bpd?u.node.style.paddingRight=s:"rl"===r.bpd?u.node.style.paddingLeft=s:"tb"===r.bpd&&(u.node.style.paddingBottom=s)));if(o<e.length)for(var c=0;c<e[o].elements.length;c++)u=e[o].elements[c],null!==u.bgcolor&&i*(u.before-a)>0&&(s=Math.ceil(Math.abs(u.before-a))+"px",u.node.style.backgroundColor=u.bgcolor,"lr"===r.bpd?u.node.style.paddingLeft=s:"rl"===r.bpd?u.node.style.paddingRight=s:"tb"===r.bpd&&(u.node.style.paddingTop=s))}}function c(e,t){this.id=e,this.plist=t}function d(e,t){var n={before:null,after:null,start:null,end:null};return"tb"===t.bpd?(n.before=e.top,n.after=e.bottom,"lr"===t.ipd?(n.start=e.left,n.end=e.right):(n.start=e.right,n.end=e.left)):"lr"===t.bpd?(n.before=e.left,n.after=e.right,n.start=e.top,n.end=e.bottom):"rl"===t.bpd&&(n.before=e.right,n.after=e.left,n.start=e.top,n.end=e.bottom),n}function f(e,t,n,r){if("rt"!==t.localName&&"rtc"!==t.localName){var i=t.style.backgroundColor||r;if(0===t.childElementCount)if("span"===t.localName||"rb"===t.localName){var o=t.getBoundingClientRect();if(0===o.height||0===o.width)return;var a=d(o,e);if(0!==n.length&&h(a.before,a.after,n[n.length-1].before,n[n.length-1].after)){var s=Math.sign(a.after-a.before),u=Math.sign(a.end-a.start);s*(a.before-n[n.length-1].before)<0&&(n[n.length-1].before=a.before),s*(a.after-n[n.length-1].after)>0&&(n[n.length-1].after=a.after),u*(a.start-n[n.length-1].start)<0&&(n[n.length-1].start=a.start,n[n.length-1].start_elem=n[n.length-1].elements.length),u*(a.end-n[n.length-1].end)>0&&(n[n.length-1].end=a.end,n[n.length-1].end_elem=n[n.length-1].elements.length)}else n.push({before:a.before,after:a.after,start:a.start,end:a.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});n[n.length-1].text+=t.textContent,n[n.length-1].elements.push({node:t,bgcolor:i,before:a.before,after:a.after})}else"br"===t.localName&&0!==n.length&&(n[n.length-1].br=!0);else{var l=t.firstChild;while(l)l.nodeType===Node.ELEMENT_NODE&&(f(e,l,n,i),"ruby"===l.localName||"rtc"===l.localName?n.length>0&&n[n.length-1].rbc.push(l):"span"===l.localName&&""!==l.style.textEmphasisStyle&&n[n.length-1].te.push(l)),l=l.nextSibling}}}function h(e,t,n,r){return t<r&&e>n||r<=t&&n>=e}function p(e,t){this.qname=e,this.map=t}e.render=function(e,t,n,i,o,a,s,u,l){var c=i||t.clientHeight,d=o||t.clientWidth;if(null!==e.aspectRatio){var f=c*e.aspectRatio;f>d?c=Math.round(d/e.aspectRatio):d=f}var h=document.createElement("div");h.style.position="relative",h.style.width=d+"px",h.style.height=c+"px",h.style.margin="auto",h.style.top=0,h.style.bottom=0,h.style.left=0,h.style.right=0,h.style.zIndex=0;var p={h:c,w:d,regionH:null,regionW:null,imgResolver:n,displayForcedOnlyMode:a||!1,isd:e,errorHandler:s,previousISDState:u,enableRollUp:l||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};for(var m in t.appendChild(h),e.contents)r(p,h,e.contents[m]);return p.currentISDState};var m=[new p("http://www.w3.org/ns/ttml#styling backgroundColor",(function(e,t,n,r){0!==r[3]&&(t.style.backgroundColor="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")")})),new p("http://www.w3.org/ns/ttml#styling color",(function(e,t,n,r){t.style.color="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")"})),new p("http://www.w3.org/ns/ttml#styling direction",(function(e,t,n,r){t.style.direction=r})),new p("http://www.w3.org/ns/ttml#styling display",(function(e,t,n,r){})),new p("http://www.w3.org/ns/ttml#styling displayAlign",(function(e,t,n,r){t.style.display="flex",t.style.flexDirection="column","before"===r?t.style.justifyContent="flex-start":"center"===r?t.style.justifyContent="center":"after"===r&&(t.style.justifyContent="flex-end")})),new p("http://www.w3.org/ns/ttml#styling extent",(function(e,t,n,r){e.regionH=r.h.toUsedLength(e.w,e.h),e.regionW=r.w.toUsedLength(e.w,e.h);var i=0,o=0,a=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];a&&(i=a[0].toUsedLength(e.w,e.h)+a[2].toUsedLength(e.w,e.h),o=a[1].toUsedLength(e.w,e.h)+a[3].toUsedLength(e.w,e.h)),t.style.height=e.regionH-i+"px",t.style.width=e.regionW-o+"px"})),new p("http://www.w3.org/ns/ttml#styling fontFamily",(function(e,t,n,r){var i=[];for(var o in r)"monospaceSerif"===r[o]?(i.push("Courier New"),i.push('"Liberation Mono"'),i.push("Courier"),i.push("monospace")):"proportionalSansSerif"===r[o]?(i.push("Arial"),i.push("Helvetica"),i.push('"Liberation Sans"'),i.push("sans-serif")):"monospace"===r[o]?i.push("monospace"):"sansSerif"===r[o]?i.push("sans-serif"):"serif"===r[o]?i.push("serif"):"monospaceSansSerif"===r[o]?(i.push("Consolas"),i.push("monospace")):"proportionalSerif"===r[o]?i.push("serif"):i.push(r[o]);t.style.fontFamily=i.join(",")})),new p("http://www.w3.org/ns/ttml#styling shear",(function(e,t,n,r){if(0!==r){var i=-.9*r;"tb"===e.bpd?t.style.transform="skewX("+i+"deg)":t.style.transform="skewY("+i+"deg)"}})),new p("http://www.w3.org/ns/ttml#styling fontSize",(function(e,t,n,r){t.style.fontSize=r.toUsedLength(e.w,e.h)+"px"})),new p("http://www.w3.org/ns/ttml#styling fontStyle",(function(e,t,n,r){t.style.fontStyle=r})),new p("http://www.w3.org/ns/ttml#styling fontWeight",(function(e,t,n,r){t.style.fontWeight=r})),new p("http://www.w3.org/ns/ttml#styling lineHeight",(function(e,t,n,r){t.style.lineHeight="normal"===r?"normal":r.toUsedLength(e.w,e.h)+"px"})),new p("http://www.w3.org/ns/ttml#styling opacity",(function(e,t,n,r){t.style.opacity=r})),new p("http://www.w3.org/ns/ttml#styling origin",(function(e,t,n,r){t.style.top=r.h.toUsedLength(e.w,e.h)+"px",t.style.left=r.w.toUsedLength(e.w,e.h)+"px"})),new p("http://www.w3.org/ns/ttml#styling overflow",(function(e,t,n,r){t.style.overflow=r})),new p("http://www.w3.org/ns/ttml#styling padding",(function(e,t,n,r){var i=[];i[0]=r[0].toUsedLength(e.w,e.h)+"px",i[1]=r[3].toUsedLength(e.w,e.h)+"px",i[2]=r[2].toUsedLength(e.w,e.h)+"px",i[3]=r[1].toUsedLength(e.w,e.h)+"px",t.style.padding=i.join(" ")})),new p("http://www.w3.org/ns/ttml#styling position",(function(e,t,n,r){t.style.top=r.h.toUsedLength(e.w,e.h)+"px",t.style.left=r.w.toUsedLength(e.w,e.h)+"px"})),new p("http://www.w3.org/ns/ttml#styling rubyAlign",(function(e,t,n,r){t.style.rubyAlign=r})),new p("http://www.w3.org/ns/ttml#styling rubyPosition",(function(e,t,n,r){var i;"before"!==r&&"after"!==r||(i="tb"===e.bpd||"rl"===e.bpd?"before"===r?"over":"under":"before"===r?"under":"over",t.parentElement.style.rubyPosition=i)})),new p("http://www.w3.org/ns/ttml#styling showBackground",null),new p("http://www.w3.org/ns/ttml#styling textAlign",(function(e,t,r,i){var o,a=r.styleAttrs[n.byName.direction.qname];o="start"===i?"rtl"===a?"right":"left":"end"===i?"rtl"===a?"left":"right":i,t.style.textAlign=o})),new p("http://www.w3.org/ns/ttml#styling textDecoration",(function(e,t,n,r){t.style.textDecoration=r.join(" ").replace("lineThrough","line-through")})),new p("http://www.w3.org/ns/ttml#styling textOutline",(function(e,t,n,r){})),new p("http://www.w3.org/ns/ttml#styling textShadow",(function(e,t,r,i){var o=r.styleAttrs[n.byName.textOutline.qname];if("none"===i&&"none"===o)t.style.textShadow="";else{var a=[];if("none"!==o&&a.push("rgba("+o.color[0].toString()+","+o.color[1].toString()+","+o.color[2].toString()+","+(o.color[3]/255).toString()+") 0px 0px "+o.thickness.toUsedLength(e.w,e.h)+"px"),"none"!==i)for(var s in i)a.push(i[s].x_off.toUsedLength(e.w,e.h)+"px "+i[s].y_off.toUsedLength(e.w,e.h)+"px "+i[s].b_radius.toUsedLength(e.w,e.h)+"px rgba("+i[s].color[0].toString()+","+i[s].color[1].toString()+","+i[s].color[2].toString()+","+(i[s].color[3]/255).toString()+")");t.style.textShadow=a.join(",")}})),new p("http://www.w3.org/ns/ttml#styling textCombine",(function(e,t,n,r){t.style.textCombineUpright=r.join(" ")})),new p("http://www.w3.org/ns/ttml#styling textEmphasis",(function(e,t,n,r){var i;("none"!==r.style&&(t.style.textEmphasisStyle=r.style+" "+r.symbol),"before"===r.position||"after"===r.position)&&(i="tb"===e.bpd?"before"===r.position?"left over":"left under":"rl"===e.bpd?"before"===r.position?"right under":"left under":"before"===r.position?"left under":"right under",t.style.textEmphasisPosition=i)})),new p("http://www.w3.org/ns/ttml#styling unicodeBidi",(function(e,t,n,r){var i;i="bidiOverride"===r?"bidi-override":r,t.style.unicodeBidi=i})),new p("http://www.w3.org/ns/ttml#styling visibility",(function(e,t,n,r){t.style.visibility=r})),new p("http://www.w3.org/ns/ttml#styling wrapOption",(function(e,t,n,r){"wrap"===r?"preserve"===n.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===n.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap"})),new p("http://www.w3.org/ns/ttml#styling writingMode",(function(e,t,n,r){"lrtb"===r||"lr"===r||"rltb"===r||"rl"===r?e.writingMode="horizontal-tb":"tblr"===r?e.writingMode="vertical-lr":"tbrl"!==r&&"tb"!==r||(e.writingMode="vertical-rl"),t.style.writingMode=e.writingMode})),new p("http://www.w3.org/ns/ttml#styling zIndex",(function(e,t,n,r){t.style.zIndex=r})),new p("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",(function(e,t,n,r){e.displayForcedOnlyMode&&!1===r&&(t.style.visibility="hidden")}))],g={};for(var y in m)g[m[y].qname]=m[y];function v(e,t){if(e&&e.error&&e.error(t))throw t}})(t,"undefined"===typeof imscNames?n("597c"):imscNames,"undefined"===typeof imscStyles?n("faf0"):imscStyles,"undefined"===typeof imscUtils?n("ff7d"):imscUtils)},8760:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.period=null,this.index=-1,this.type=null};t["default"]=i,e.exports=t["default"]},8821:function(e,t,n){"use strict";function r(e){var t="1.2.0";function n(){void 0===e.escapeMode&&(e.escapeMode=!0),void 0===e.attributePrefix&&(e.attributePrefix="_"),e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1),void 0===e.ignoreRoot&&(e.ignoreRoot=!1)}e=e||{},n(),i();var r={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function i(){}function o(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function a(e){return e.prefix}function s(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function u(e,t,n,r){for(var i=0;i<e.length;i++){var o=e[i];if("string"===typeof o){if(o==r)break}else if(o instanceof RegExp){if(o.test(r))break}else if("function"===typeof o&&o(t,n,r))break}return i!=e.length}function l(t,n,r){switch(e.arrayAccessForm){case"property":t[n]instanceof Array?t[n+"_asArray"]=t[n]:t[n+"_asArray"]=[t[n]];break}!(t[n]instanceof Array)&&e.arrayAccessFormPaths.length>0&&u(e.arrayAccessFormPaths,t,n,r)&&(t[n]=[t[n]])}function c(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),r=t[5].split(".");if(n.setHours(t[3],t[4],r[0]),r.length>1&&n.setMilliseconds(r[1]),t[6]&&t[7]){var i=60*t[6]+Number(t[7]),o=/\d\d-\d\d:\d\d$/.test(e)?"-":"+";i=0+("-"==o?-1*i:i),n.setMinutes(n.getMinutes()-i-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function d(t,n,r){if(e.datetimeAccessFormPaths.length>0){var i=r.split(".#")[0];return u(e.datetimeAccessFormPaths,t,n,i)?c(t):t}return t}function f(t,n,i,o){return!(n==r.ELEMENT_NODE&&e.xmlElementsFilter.length>0)||u(e.xmlElementsFilter,t,i,o)}function h(t,n){if(t.nodeType==r.DOCUMENT_NODE){for(var i=new Object,s=t.childNodes,u=0;u<s.length;u++){var c=s[u];if(c.nodeType==r.ELEMENT_NODE)if(e.ignoreRoot)i=h(c);else{i={};var p=o(c);i[p]=h(c)}}return i}if(t.nodeType==r.ELEMENT_NODE){i=new Object;i.__cnt=0;var m=[];for(s=t.childNodes,u=0;u<s.length;u++){c=s[u],p=o(c);if(c.nodeType!=r.COMMENT_NODE){var g=n+"."+p;if(f(i,c.nodeType,p,g))if(i.__cnt++,null==i[p]){var y=h(c,g);if("#text"!=p||/[^\s]/.test(y)){var v={};v[p]=y,m.push(v)}i[p]=y,l(i,p,g)}else{null!=i[p]&&(i[p]instanceof Array||(i[p]=[i[p]],l(i,p,g)));y=h(c,g);if("#text"!=p||/[^\s]/.test(y)){v={};v[p]=y,m.push(v)}i[p][i[p].length]=y}}}i.__children=m;for(var _=o(t),E=0;E<t.attributes.length;E++){var b=t.attributes[E];i.__cnt++;for(var T=b.value,S=0,w=e.matchers.length;S<w;S++){var x=e.matchers[S];x.test(b,_)&&(T=x.converter(b.value))}i[e.attributePrefix+b.name]=T}var I=a(t);return null!=I&&""!=I&&(i.__cnt++,i.__prefix=I),null!=i["#text"]&&(i.__text=i["#text"],i.__text instanceof Array&&(i.__text=i.__text.join("\n")),e.stripWhitespaces&&(i.__text=i.__text.trim()),delete i["#text"],"property"==e.arrayAccessForm&&delete i["#text_asArray"],i.__text=d(i.__text,p,n+"."+p)),null!=i["#cdata-section"]&&(i.__cdata=i["#cdata-section"],delete i["#cdata-section"],"property"==e.arrayAccessForm&&delete i["#cdata-section_asArray"]),0==i.__cnt&&"text"==e.emptyNodeForm?i="":1==i.__cnt&&null!=i.__text?i=i.__text:1!=i.__cnt||null==i.__cdata||e.keepCData?i.__cnt>1&&null!=i.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==i.__text||""==i.__text.trim())&&delete i.__text:i=i.__cdata,delete i.__cnt,!e.enableToStringFunc||null==i.__text&&null==i.__cdata||(i.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),i}if(t.nodeType==r.TEXT_NODE||t.nodeType==r.CDATA_SECTION_NODE)return t.nodeValue}function p(t,n,r,i){var o="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=r)for(var a=0;a<r.length;a++){var u=r[a],l=t[u];e.escapeMode&&(l=s(l)),o+=" "+u.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?o+='"'+l+'"':o+="'"+l+"'"}return o+=i?"/>":">",o}function m(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function g(e,t){return-1!==e.indexOf(t,e.length-t.length)}function y(t,n){return!!("property"==e.arrayAccessForm&&g(n.toString(),"_asArray")||0==n.toString().indexOf(e.attributePrefix)||0==n.toString().indexOf("__")||t[n]instanceof Function)}function v(e){var t=0;if(e instanceof Object)for(var n in e)y(e,n)||t++;return t}function _(t,n,r){return 0==e.jsonPropertiesFilter.length||""==r||u(e.jsonPropertiesFilter,t,n,r)}function E(t){var n=[];if(t instanceof Object)for(var r in t)-1==r.toString().indexOf("__")&&0==r.toString().indexOf(e.attributePrefix)&&n.push(r);return n}function b(t){var n="";return null!=t.__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(e.escapeMode?n+=s(t.__text):n+=t.__text),n}function T(t){var n="";return t instanceof Object?n+=b(t):null!=t&&(e.escapeMode?n+=s(t):n+=t),n}function S(e,t){return""===e?t:e+"."+t}function w(e,t,n,r){var i="";if(0==e.length)i+=p(e,t,n,!0);else for(var o=0;o<e.length;o++)i+=p(e[o],t,E(e[o]),!1),i+=x(e[o],S(r,t)),i+=m(e[o],t);return i}function x(e,t){var n="",r=v(e);if(r>0)for(var i in e)if(!y(e,i)&&(""==t||_(e,i,S(t,i)))){var o=e[i],a=E(o);if(null==o||void 0==o)n+=p(o,i,a,!0);else if(o instanceof Object)if(o instanceof Array)n+=w(o,i,a,t);else if(o instanceof Date)n+=p(o,i,a,!1),n+=o.toISOString(),n+=m(o,i);else{var s=v(o);s>0||null!=o.__text||null!=o.__cdata?(n+=p(o,i,a,!1),n+=x(o,S(t,i)),n+=m(o,i)):n+=p(o,i,a,!0)}else n+=p(o,i,a,!1),n+=T(o),n+=m(o,i)}return n+=T(e),n}this.parseXmlString=function(e){var t;window.ActiveXObject||window;if(void 0===e)return null;if(window.DOMParser){var n=new window.DOMParser;try{t=n.parseFromString(e,"text/xml"),t.getElementsByTagNameNS("*","parsererror").length>0&&(t=null)}catch(r){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"===typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?c(e):e},this.xml2json=function(e){return h(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return x(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return t}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r,e.exports=t["default"]},8842:function(e,t,n){"use strict";function r(){var e=window.crypto||window.msCrypto,t=Uint32Array,n=Math.pow(2,8*t.BYTES_PER_ELEMENT)-1,r=10,i=void 0,o=void 0,a=void 0;function s(){e&&(i||(i=new t(r)),e.getRandomValues(i),o=0)}function u(t,r){var a=void 0;return t||(t=0),r||(r=1),e?(o===i.length&&s(),a=i[o]/n,o+=1):a=Math.random(),a*(r-t)+t}return a={random:u},s(),a}Object.defineProperty(t,"__esModule",{value:!0}),r.__dashjs_factory_name="RNG",t["default"]=dashjs.FactoryMaker.getSingletonFactory(r),e.exports=t["default"]},"8a43":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=0,s=5e3;function u(){var e={};function t(t,n,r){var o=arguments.length<=3||void 0===arguments[3]?a:arguments[3];if(!t)throw new Error("event type cannot be null or undefined");if(!n||"function"!==typeof n)throw new Error("listener must be a function: "+n);if(!(i(t,n,r)>=0)){e[t]=e[t]||[];var s={callback:n,scope:r,priority:o},u=e[t].some((function(n,r){if(n&&o>n.priority)return e[t].splice(r,0,s),!0}));u||e[t].push(s)}}function n(t,n,r){if(t&&n&&e[t]){var o=i(t,n,r);o<0||(e[t][o]=null)}}function r(t,n){if(t&&e[t]){if(n=n||{},n.hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");n.type=t,e[t]=e[t].filter((function(e){return e})),e[t].forEach((function(e){return e&&e.callback.call(e.scope,n)}))}}function i(t,n,r){var i=-1;return e[t]?(e[t].some((function(e,t){if(e&&e.callback===n&&(!r||r===e.scope))return i=t,!0})),i):i}function o(){e={}}var s={on:t,off:n,trigger:r,reset:o};return s}u.__dashjs_factory_name="EventBus";var l=o["default"].getSingletonFactory(u);l.EVENT_PRIORITY_LOW=a,l.EVENT_PRIORITY_HIGH=s,o["default"].updateSingletonFactory(u.__dashjs_factory_name,l),t["default"]=l,e.exports=t["default"]},"8b38":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){i(this,e)}return r(e,null,[{key:"round10",value:function(e,t){return a("round",e,t)}}]),e}();function a(e,t,n){return"undefined"===typeof n||0===+n?Math[e](t):(t=+t,n=+n,null===t||isNaN(t)||"number"!==typeof n||n%1!==0?NaN:(t=t.toString().split("e"),t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n))),t=t.toString().split("e"),+(t[0]+"e"+(t[1]?+t[1]+n:n))))}t["default"]=o,e.exports=t["default"]},"8b97":function(e,t,n){var r=n("d3f4"),i=n("cb7c"),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},"8c4f":function(e,t,n){"use strict";
/*!
  * vue-router v3.1.3
  * (c) 2019 Evan You
  * @license MIT
  */function r(e,t){0}function i(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}function o(e,t){return t instanceof e||t&&(t.name===e.name||t._name===e._name)}function a(e,t){for(var n in t)e[n]=t[n];return e}var s={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,t){var n=t.props,r=t.children,i=t.parent,o=t.data;o.routerView=!0;var s=i.$createElement,l=n.name,c=i.$route,d=i._routerViewCache||(i._routerViewCache={}),f=0,h=!1;while(i&&i._routerRoot!==i){var p=i.$vnode&&i.$vnode.data;p&&(p.routerView&&f++,p.keepAlive&&i._inactive&&(h=!0)),i=i.$parent}if(o.routerViewDepth=f,h)return s(d[l],o,r);var m=c.matched[f];if(!m)return d[l]=null,s();var g=d[l]=m.components[l];o.registerRouteInstance=function(e,t){var n=m.instances[l];(t&&n!==e||!t&&n===e)&&(m.instances[l]=t)},(o.hook||(o.hook={})).prepatch=function(e,t){m.instances[l]=t.componentInstance},o.hook.init=function(e){e.data.keepAlive&&e.componentInstance&&e.componentInstance!==m.instances[l]&&(m.instances[l]=e.componentInstance)};var y=o.props=u(c,m.props&&m.props[l]);if(y){y=o.props=a({},y);var v=o.attrs=o.attrs||{};for(var _ in y)g.props&&_ in g.props||(v[_]=y[_],delete y[_])}return s(g,o,r)}};function u(e,t){switch(typeof t){case"undefined":return;case"object":return t;case"function":return t(e);case"boolean":return t?e.params:void 0;default:0}}var l=/[!'()*]/g,c=function(e){return"%"+e.charCodeAt(0).toString(16)},d=/%2C/g,f=function(e){return encodeURIComponent(e).replace(l,c).replace(d,",")},h=decodeURIComponent;function p(e,t,n){void 0===t&&(t={});var r,i=n||m;try{r=i(e||"")}catch(a){r={}}for(var o in t)r[o]=t[o];return r}function m(e){var t={};return e=e.trim().replace(/^(\?|#|&)/,""),e?(e.split("&").forEach((function(e){var n=e.replace(/\+/g," ").split("="),r=h(n.shift()),i=n.length>0?h(n.join("=")):null;void 0===t[r]?t[r]=i:Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]})),t):t}function g(e){var t=e?Object.keys(e).map((function(t){var n=e[t];if(void 0===n)return"";if(null===n)return f(t);if(Array.isArray(n)){var r=[];return n.forEach((function(e){void 0!==e&&(null===e?r.push(f(t)):r.push(f(t)+"="+f(e)))})),r.join("&")}return f(t)+"="+f(n)})).filter((function(e){return e.length>0})).join("&"):null;return t?"?"+t:""}var y=/\/?$/;function v(e,t,n,r){var i=r&&r.options.stringifyQuery,o=t.query||{};try{o=_(o)}catch(s){}var a={name:t.name||e&&e.name,meta:e&&e.meta||{},path:t.path||"/",hash:t.hash||"",query:o,params:t.params||{},fullPath:T(t,i),matched:e?b(e):[]};return n&&(a.redirectedFrom=T(n,i)),Object.freeze(a)}function _(e){if(Array.isArray(e))return e.map(_);if(e&&"object"===typeof e){var t={};for(var n in e)t[n]=_(e[n]);return t}return e}var E=v(null,{path:"/"});function b(e){var t=[];while(e)t.unshift(e),e=e.parent;return t}function T(e,t){var n=e.path,r=e.query;void 0===r&&(r={});var i=e.hash;void 0===i&&(i="");var o=t||g;return(n||"/")+o(r)+i}function S(e,t){return t===E?e===t:!!t&&(e.path&&t.path?e.path.replace(y,"")===t.path.replace(y,"")&&e.hash===t.hash&&w(e.query,t.query):!(!e.name||!t.name)&&(e.name===t.name&&e.hash===t.hash&&w(e.query,t.query)&&w(e.params,t.params)))}function w(e,t){if(void 0===e&&(e={}),void 0===t&&(t={}),!e||!t)return e===t;var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every((function(n){var r=e[n],i=t[n];return"object"===typeof r&&"object"===typeof i?w(r,i):String(r)===String(i)}))}function x(e,t){return 0===e.path.replace(y,"/").indexOf(t.path.replace(y,"/"))&&(!t.hash||e.hash===t.hash)&&I(e.query,t.query)}function I(e,t){for(var n in t)if(!(n in e))return!1;return!0}function A(e,t,n){var r=e.charAt(0);if("/"===r)return e;if("?"===r||"#"===r)return t+e;var i=t.split("/");n&&i[i.length-1]||i.pop();for(var o=e.replace(/^\//,"").split("/"),a=0;a<o.length;a++){var s=o[a];".."===s?i.pop():"."!==s&&i.push(s)}return""!==i[0]&&i.unshift(""),i.join("/")}function D(e){var t="",n="",r=e.indexOf("#");r>=0&&(t=e.slice(r),e=e.slice(0,r));var i=e.indexOf("?");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{path:e,query:n,hash:t}}function R(e){return e.replace(/\/\//g,"/")}var M=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},C=$,N=k,L=B,P=j,O=X,F=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function k(e,t){var n,r=[],i=0,o=0,a="",s=t&&t.delimiter||"/";while(null!=(n=F.exec(e))){var u=n[0],l=n[1],c=n.index;if(a+=e.slice(o,c),o=c+u.length,l)a+=l[1];else{var d=e[o],f=n[2],h=n[3],p=n[4],m=n[5],g=n[6],y=n[7];a&&(r.push(a),a="");var v=null!=f&&null!=d&&d!==f,_="+"===g||"*"===g,E="?"===g||"*"===g,b=n[2]||s,T=p||m;r.push({name:h||i++,prefix:f||"",delimiter:b,optional:E,repeat:_,partial:v,asterisk:!!y,pattern:T?V(T):y?".*":"[^"+K(b)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function B(e,t){return j(k(e,t))}function U(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function H(e){return encodeURI(e).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function j(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"===typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,r){for(var i="",o=n||{},a=r||{},s=a.pretty?U:encodeURIComponent,u=0;u<e.length;u++){var l=e[u];if("string"!==typeof l){var c,d=o[l.name];if(null==d){if(l.optional){l.partial&&(i+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(M(d)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var f=0;f<d.length;f++){if(c=s(d[f]),!t[u].test(c))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(c)+"`");i+=(0===f?l.prefix:l.delimiter)+c}}else{if(c=l.asterisk?H(d):s(d),!t[u].test(c))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+c+'"');i+=l.prefix+c}}else i+=l}return i}}function K(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function V(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function q(e,t){return e.keys=t,e}function G(e){return e.sensitive?"":"i"}function Y(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return q(e,t)}function z(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push($(e[i],t,n).source);var o=new RegExp("(?:"+r.join("|")+")",G(n));return q(o,t)}function W(e,t,n){return X(k(e,n),t,n)}function X(e,t,n){M(t)||(n=t||n,t=[]),n=n||{};for(var r=n.strict,i=!1!==n.end,o="",a=0;a<e.length;a++){var s=e[a];if("string"===typeof s)o+=K(s);else{var u=K(s.prefix),l="(?:"+s.pattern+")";t.push(s),s.repeat&&(l+="(?:"+u+l+")*"),l=s.optional?s.partial?u+"("+l+")?":"(?:"+u+"("+l+"))?":u+"("+l+")",o+=l}}var c=K(n.delimiter||"/"),d=o.slice(-c.length)===c;return r||(o=(d?o.slice(0,-c.length):o)+"(?:"+c+"(?=$))?"),o+=i?"$":r&&d?"":"(?="+c+"|$)",q(new RegExp("^"+o,G(n)),t)}function $(e,t,n){return M(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?Y(e,t):M(e)?z(e,t,n):W(e,t,n)}C.parse=N,C.compile=L,C.tokensToFunction=P,C.tokensToRegExp=O;var Q=Object.create(null);function J(e,t,n){t=t||{};try{var r=Q[e]||(Q[e]=C.compile(e));return t.pathMatch&&(t[0]=t.pathMatch),r(t,{pretty:!0})}catch(i){return""}finally{delete t[0]}}function Z(e,t,n,r){var i="string"===typeof e?{path:e}:e;if(i._normalized)return i;if(i.name)return a({},e);if(!i.path&&i.params&&t){i=a({},i),i._normalized=!0;var o=a(a({},t.params),i.params);if(t.name)i.name=t.name,i.params=o;else if(t.matched.length){var s=t.matched[t.matched.length-1].path;i.path=J(s,o,"path "+t.path)}else 0;return i}var u=D(i.path||""),l=t&&t.path||"/",c=u.path?A(u.path,l,n||i.append):l,d=p(u.query,i.query,r&&r.options.parseQuery),f=i.hash||u.hash;return f&&"#"!==f.charAt(0)&&(f="#"+f),{_normalized:!0,path:c,query:d,hash:f}}var ee,te=[String,Object],ne=[String,Array],re=function(){},ie={name:"RouterLink",props:{to:{type:te,required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,event:{type:ne,default:"click"}},render:function(e){var t=this,n=this.$router,r=this.$route,i=n.resolve(this.to,r,this.append),o=i.location,s=i.route,u=i.href,l={},c=n.options.linkActiveClass,d=n.options.linkExactActiveClass,f=null==c?"router-link-active":c,h=null==d?"router-link-exact-active":d,p=null==this.activeClass?f:this.activeClass,m=null==this.exactActiveClass?h:this.exactActiveClass,g=s.redirectedFrom?v(null,Z(s.redirectedFrom),null,n):s;l[m]=S(r,g),l[p]=this.exact?l[m]:x(r,g);var y=function(e){oe(e)&&(t.replace?n.replace(o,re):n.push(o,re))},_={click:oe};Array.isArray(this.event)?this.event.forEach((function(e){_[e]=y})):_[this.event]=y;var E={class:l},b=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:u,route:s,navigate:y,isActive:l[p],isExactActive:l[m]});if(b){if(1===b.length)return b[0];if(b.length>1||!b.length)return 0===b.length?e():e("span",{},b)}if("a"===this.tag)E.on=_,E.attrs={href:u};else{var T=ae(this.$slots.default);if(T){T.isStatic=!1;var w=T.data=a({},T.data);for(var I in w.on=w.on||{},w.on){var A=w.on[I];I in _&&(w.on[I]=Array.isArray(A)?A:[A])}for(var D in _)D in w.on?w.on[D].push(_[D]):w.on[D]=y;var R=T.data.attrs=a({},T.data.attrs);R.href=u}else E.on=_}return e(this.tag,E,this.$slots.default)}};function oe(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function ae(e){if(e)for(var t,n=0;n<e.length;n++){if(t=e[n],"a"===t.tag)return t;if(t.children&&(t=ae(t.children)))return t}}function se(e){if(!se.installed||ee!==e){se.installed=!0,ee=e;var t=function(e){return void 0!==e},n=function(e,n){var r=e.$options._parentVnode;t(r)&&t(r=r.data)&&t(r=r.registerRouteInstance)&&r(e,n)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,n(this,this)},destroyed:function(){n(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",s),e.component("RouterLink",ie);var r=e.config.optionMergeStrategies;r.beforeRouteEnter=r.beforeRouteLeave=r.beforeRouteUpdate=r.created}}var ue="undefined"!==typeof window;function le(e,t,n,r){var i=t||[],o=n||Object.create(null),a=r||Object.create(null);e.forEach((function(e){ce(i,o,a,e)}));for(var s=0,u=i.length;s<u;s++)"*"===i[s]&&(i.push(i.splice(s,1)[0]),u--,s--);return{pathList:i,pathMap:o,nameMap:a}}function ce(e,t,n,r,i,o){var a=r.path,s=r.name;var u=r.pathToRegexpOptions||{},l=fe(a,i,u.strict);"boolean"===typeof r.caseSensitive&&(u.sensitive=r.caseSensitive);var c={path:l,regex:de(l,u),components:r.components||{default:r.component},instances:{},name:s,parent:i,matchAs:o,redirect:r.redirect,beforeEnter:r.beforeEnter,meta:r.meta||{},props:null==r.props?{}:r.components?r.props:{default:r.props}};if(r.children&&r.children.forEach((function(r){var i=o?R(o+"/"+r.path):void 0;ce(e,t,n,r,c,i)})),t[c.path]||(e.push(c.path),t[c.path]=c),void 0!==r.alias)for(var d=Array.isArray(r.alias)?r.alias:[r.alias],f=0;f<d.length;++f){var h=d[f];0;var p={path:h,children:r.children};ce(e,t,n,p,i,c.path||"/")}s&&(n[s]||(n[s]=c))}function de(e,t){var n=C(e,[],t);return n}function fe(e,t,n){return n||(e=e.replace(/\/$/,"")),"/"===e[0]||null==t?e:R(t.path+"/"+e)}function he(e,t){var n=le(e),r=n.pathList,i=n.pathMap,o=n.nameMap;function a(e){le(e,r,i,o)}function s(e,n,a){var s=Z(e,n,!1,t),u=s.name;if(u){var l=o[u];if(!l)return c(null,s);var d=l.regex.keys.filter((function(e){return!e.optional})).map((function(e){return e.name}));if("object"!==typeof s.params&&(s.params={}),n&&"object"===typeof n.params)for(var f in n.params)!(f in s.params)&&d.indexOf(f)>-1&&(s.params[f]=n.params[f]);return s.path=J(l.path,s.params,'named route "'+u+'"'),c(l,s,a)}if(s.path){s.params={};for(var h=0;h<r.length;h++){var p=r[h],m=i[p];if(pe(m.regex,s.path,s.params))return c(m,s,a)}}return c(null,s)}function u(e,n){var r=e.redirect,i="function"===typeof r?r(v(e,n,null,t)):r;if("string"===typeof i&&(i={path:i}),!i||"object"!==typeof i)return c(null,n);var a=i,u=a.name,l=a.path,d=n.query,f=n.hash,h=n.params;if(d=a.hasOwnProperty("query")?a.query:d,f=a.hasOwnProperty("hash")?a.hash:f,h=a.hasOwnProperty("params")?a.params:h,u){o[u];return s({_normalized:!0,name:u,query:d,hash:f,params:h},void 0,n)}if(l){var p=me(l,e),m=J(p,h,'redirect route with path "'+p+'"');return s({_normalized:!0,path:m,query:d,hash:f},void 0,n)}return c(null,n)}function l(e,t,n){var r=J(n,t.params,'aliased route with path "'+n+'"'),i=s({_normalized:!0,path:r});if(i){var o=i.matched,a=o[o.length-1];return t.params=i.params,c(a,t)}return c(null,t)}function c(e,n,r){return e&&e.redirect?u(e,r||n):e&&e.matchAs?l(e,n,e.matchAs):v(e,n,r,t)}return{match:s,addRoutes:a}}function pe(e,t,n){var r=t.match(e);if(!r)return!1;if(!n)return!0;for(var i=1,o=r.length;i<o;++i){var a=e.keys[i-1],s="string"===typeof r[i]?decodeURIComponent(r[i]):r[i];a&&(n[a.name||"pathMatch"]=s)}return!0}function me(e,t){return A(e,t.parent?t.parent.path:"/",!0)}var ge=ue&&window.performance&&window.performance.now?window.performance:Date;function ye(){return ge.now().toFixed(3)}var ve=ye();function _e(){return ve}function Ee(e){return ve=e}var be=Object.create(null);function Te(){var e=window.location.protocol+"//"+window.location.host,t=window.location.href.replace(e,"");window.history.replaceState({key:_e()},"",t),window.addEventListener("popstate",(function(e){we(),e.state&&e.state.key&&Ee(e.state.key)}))}function Se(e,t,n,r){if(e.app){var i=e.options.scrollBehavior;i&&e.app.$nextTick((function(){var o=xe(),a=i.call(e,t,n,r?o:null);a&&("function"===typeof a.then?a.then((function(e){Ne(e,o)})).catch((function(e){0})):Ne(a,o))}))}}function we(){var e=_e();e&&(be[e]={x:window.pageXOffset,y:window.pageYOffset})}function xe(){var e=_e();if(e)return be[e]}function Ie(e,t){var n=document.documentElement,r=n.getBoundingClientRect(),i=e.getBoundingClientRect();return{x:i.left-r.left-t.x,y:i.top-r.top-t.y}}function Ae(e){return Me(e.x)||Me(e.y)}function De(e){return{x:Me(e.x)?e.x:window.pageXOffset,y:Me(e.y)?e.y:window.pageYOffset}}function Re(e){return{x:Me(e.x)?e.x:0,y:Me(e.y)?e.y:0}}function Me(e){return"number"===typeof e}var Ce=/^#\d/;function Ne(e,t){var n="object"===typeof e;if(n&&"string"===typeof e.selector){var r=Ce.test(e.selector)?document.getElementById(e.selector.slice(1)):document.querySelector(e.selector);if(r){var i=e.offset&&"object"===typeof e.offset?e.offset:{};i=Re(i),t=Ie(r,i)}else Ae(e)&&(t=De(e))}else n&&Ae(e)&&(t=De(e));t&&window.scrollTo(t.x,t.y)}var Le=ue&&function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}();function Pe(e,t){we();var n=window.history;try{t?n.replaceState({key:_e()},"",e):n.pushState({key:Ee(ye())},"",e)}catch(r){window.location[t?"replace":"assign"](e)}}function Oe(e){Pe(e,!0)}function Fe(e,t,n){var r=function(i){i>=e.length?n():e[i]?t(e[i],(function(){r(i+1)})):r(i+1)};r(0)}function ke(e){return function(t,n,r){var o=!1,a=0,s=null;Be(e,(function(e,t,n,u){if("function"===typeof e&&void 0===e.cid){o=!0,a++;var l,c=Ke((function(t){je(t)&&(t=t.default),e.resolved="function"===typeof t?t:ee.extend(t),n.components[u]=t,a--,a<=0&&r()})),d=Ke((function(e){var t="Failed to resolve async component "+u+": "+e;s||(s=i(e)?e:new Error(t),r(s))}));try{l=e(c,d)}catch(h){d(h)}if(l)if("function"===typeof l.then)l.then(c,d);else{var f=l.component;f&&"function"===typeof f.then&&f.then(c,d)}}})),o||r()}}function Be(e,t){return Ue(e.map((function(e){return Object.keys(e.components).map((function(n){return t(e.components[n],e.instances[n],e,n)}))})))}function Ue(e){return Array.prototype.concat.apply([],e)}var He="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;function je(e){return e.__esModule||He&&"Module"===e[Symbol.toStringTag]}function Ke(e){var t=!1;return function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];if(!t)return t=!0,e.apply(this,n)}}var Ve=function(e){function t(t){e.call(this),this.name=this._name="NavigationDuplicated",this.message='Navigating to current location ("'+t.fullPath+'") is not allowed',Object.defineProperty(this,"stack",{value:(new e).stack,writable:!0,configurable:!0})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error);Ve._name="NavigationDuplicated";var qe=function(e,t){this.router=e,this.base=Ge(t),this.current=E,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[]};function Ge(e){if(!e)if(ue){var t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^https?:\/\/[^\/]+/,"")}else e="/";return"/"!==e.charAt(0)&&(e="/"+e),e.replace(/\/$/,"")}function Ye(e,t){var n,r=Math.max(e.length,t.length);for(n=0;n<r;n++)if(e[n]!==t[n])break;return{updated:t.slice(0,n),activated:t.slice(n),deactivated:e.slice(n)}}function ze(e,t,n,r){var i=Be(e,(function(e,r,i,o){var a=We(e,t);if(a)return Array.isArray(a)?a.map((function(e){return n(e,r,i,o)})):n(a,r,i,o)}));return Ue(r?i.reverse():i)}function We(e,t){return"function"!==typeof e&&(e=ee.extend(e)),e.options[t]}function Xe(e){return ze(e,"beforeRouteLeave",Qe,!0)}function $e(e){return ze(e,"beforeRouteUpdate",Qe)}function Qe(e,t){if(t)return function(){return e.apply(t,arguments)}}function Je(e,t,n){return ze(e,"beforeRouteEnter",(function(e,r,i,o){return Ze(e,i,o,t,n)}))}function Ze(e,t,n,r,i){return function(o,a,s){return e(o,a,(function(e){"function"===typeof e&&r.push((function(){et(e,t.instances,n,i)})),s(e)}))}}function et(e,t,n,r){t[n]&&!t[n]._isBeingDestroyed?e(t[n]):r()&&setTimeout((function(){et(e,t,n,r)}),16)}qe.prototype.listen=function(e){this.cb=e},qe.prototype.onReady=function(e,t){this.ready?e():(this.readyCbs.push(e),t&&this.readyErrorCbs.push(t))},qe.prototype.onError=function(e){this.errorCbs.push(e)},qe.prototype.transitionTo=function(e,t,n){var r=this,i=this.router.match(e,this.current);this.confirmTransition(i,(function(){r.updateRoute(i),t&&t(i),r.ensureURL(),r.ready||(r.ready=!0,r.readyCbs.forEach((function(e){e(i)})))}),(function(e){n&&n(e),e&&!r.ready&&(r.ready=!0,r.readyErrorCbs.forEach((function(t){t(e)})))}))},qe.prototype.confirmTransition=function(e,t,n){var a=this,s=this.current,u=function(e){!o(Ve,e)&&i(e)&&(a.errorCbs.length?a.errorCbs.forEach((function(t){t(e)})):(r(!1,"uncaught error during route navigation:"),console.error(e))),n&&n(e)};if(S(e,s)&&e.matched.length===s.matched.length)return this.ensureURL(),u(new Ve(e));var l=Ye(this.current.matched,e.matched),c=l.updated,d=l.deactivated,f=l.activated,h=[].concat(Xe(d),this.router.beforeHooks,$e(c),f.map((function(e){return e.beforeEnter})),ke(f));this.pending=e;var p=function(t,n){if(a.pending!==e)return u();try{t(e,s,(function(e){!1===e||i(e)?(a.ensureURL(!0),u(e)):"string"===typeof e||"object"===typeof e&&("string"===typeof e.path||"string"===typeof e.name)?(u(),"object"===typeof e&&e.replace?a.replace(e):a.push(e)):n(e)}))}catch(r){u(r)}};Fe(h,p,(function(){var n=[],r=function(){return a.current===e},i=Je(f,n,r),o=i.concat(a.router.resolveHooks);Fe(o,p,(function(){if(a.pending!==e)return u();a.pending=null,t(e),a.router.app&&a.router.app.$nextTick((function(){n.forEach((function(e){e()}))}))}))}))},qe.prototype.updateRoute=function(e){var t=this.current;this.current=e,this.cb&&this.cb(e),this.router.afterHooks.forEach((function(n){n&&n(e,t)}))};var tt=function(e){function t(t,n){var r=this;e.call(this,t,n);var i=t.options.scrollBehavior,o=Le&&i;o&&Te();var a=nt(this.base);window.addEventListener("popstate",(function(e){var n=r.current,i=nt(r.base);r.current===E&&i===a||r.transitionTo(i,(function(e){o&&Se(t,e,n,!0)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.go=function(e){window.history.go(e)},t.prototype.push=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,(function(e){Pe(R(r.base+e.fullPath)),Se(r.router,e,o,!1),t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,(function(e){Oe(R(r.base+e.fullPath)),Se(r.router,e,o,!1),t&&t(e)}),n)},t.prototype.ensureURL=function(e){if(nt(this.base)!==this.current.fullPath){var t=R(this.base+this.current.fullPath);e?Pe(t):Oe(t)}},t.prototype.getCurrentLocation=function(){return nt(this.base)},t}(qe);function nt(e){var t=decodeURI(window.location.pathname);return e&&0===t.indexOf(e)&&(t=t.slice(e.length)),(t||"/")+window.location.search+window.location.hash}var rt=function(e){function t(t,n,r){e.call(this,t,n),r&&it(this.base)||ot()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this,t=this.router,n=t.options.scrollBehavior,r=Le&&n;r&&Te(),window.addEventListener(Le?"popstate":"hashchange",(function(){var t=e.current;ot()&&e.transitionTo(at(),(function(n){r&&Se(e.router,n,t,!0),Le||lt(n.fullPath)}))}))},t.prototype.push=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,(function(e){ut(e.fullPath),Se(r.router,e,o,!1),t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,(function(e){lt(e.fullPath),Se(r.router,e,o,!1),t&&t(e)}),n)},t.prototype.go=function(e){window.history.go(e)},t.prototype.ensureURL=function(e){var t=this.current.fullPath;at()!==t&&(e?ut(t):lt(t))},t.prototype.getCurrentLocation=function(){return at()},t}(qe);function it(e){var t=nt(e);if(!/^\/#/.test(t))return window.location.replace(R(e+"/#"+t)),!0}function ot(){var e=at();return"/"===e.charAt(0)||(lt("/"+e),!1)}function at(){var e=window.location.href,t=e.indexOf("#");if(t<0)return"";e=e.slice(t+1);var n=e.indexOf("?");if(n<0){var r=e.indexOf("#");e=r>-1?decodeURI(e.slice(0,r))+e.slice(r):decodeURI(e)}else n>-1&&(e=decodeURI(e.slice(0,n))+e.slice(n));return e}function st(e){var t=window.location.href,n=t.indexOf("#"),r=n>=0?t.slice(0,n):t;return r+"#"+e}function ut(e){Le?Pe(st(e)):window.location.hash=e}function lt(e){Le?Oe(st(e)):window.location.replace(st(e))}var ct=function(e){function t(t,n){e.call(this,t,n),this.stack=[],this.index=-1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.push=function(e,t,n){var r=this;this.transitionTo(e,(function(e){r.stack=r.stack.slice(0,r.index+1).concat(e),r.index++,t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var r=this;this.transitionTo(e,(function(e){r.stack=r.stack.slice(0,r.index).concat(e),t&&t(e)}),n)},t.prototype.go=function(e){var t=this,n=this.index+e;if(!(n<0||n>=this.stack.length)){var r=this.stack[n];this.confirmTransition(r,(function(){t.index=n,t.updateRoute(r)}),(function(e){o(Ve,e)&&(t.index=n)}))}},t.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},t.prototype.ensureURL=function(){},t}(qe),dt=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=he(e.routes||[],this);var t=e.mode||"hash";switch(this.fallback="history"===t&&!Le&&!1!==e.fallback,this.fallback&&(t="hash"),ue||(t="abstract"),this.mode=t,t){case"history":this.history=new tt(this,e.base);break;case"hash":this.history=new rt(this,e.base,this.fallback);break;case"abstract":this.history=new ct(this,e.base);break;default:0}},ft={currentRoute:{configurable:!0}};function ht(e,t){return e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function pt(e,t,n){var r="hash"===n?"#"+t:t;return e?R(e+"/"+r):r}dt.prototype.match=function(e,t,n){return this.matcher.match(e,t,n)},ft.currentRoute.get=function(){return this.history&&this.history.current},dt.prototype.init=function(e){var t=this;if(this.apps.push(e),e.$once("hook:destroyed",(function(){var n=t.apps.indexOf(e);n>-1&&t.apps.splice(n,1),t.app===e&&(t.app=t.apps[0]||null)})),!this.app){this.app=e;var n=this.history;if(n instanceof tt)n.transitionTo(n.getCurrentLocation());else if(n instanceof rt){var r=function(){n.setupListeners()};n.transitionTo(n.getCurrentLocation(),r,r)}n.listen((function(e){t.apps.forEach((function(t){t._route=e}))}))}},dt.prototype.beforeEach=function(e){return ht(this.beforeHooks,e)},dt.prototype.beforeResolve=function(e){return ht(this.resolveHooks,e)},dt.prototype.afterEach=function(e){return ht(this.afterHooks,e)},dt.prototype.onReady=function(e,t){this.history.onReady(e,t)},dt.prototype.onError=function(e){this.history.onError(e)},dt.prototype.push=function(e,t,n){var r=this;if(!t&&!n&&"undefined"!==typeof Promise)return new Promise((function(t,n){r.history.push(e,t,n)}));this.history.push(e,t,n)},dt.prototype.replace=function(e,t,n){var r=this;if(!t&&!n&&"undefined"!==typeof Promise)return new Promise((function(t,n){r.history.replace(e,t,n)}));this.history.replace(e,t,n)},dt.prototype.go=function(e){this.history.go(e)},dt.prototype.back=function(){this.go(-1)},dt.prototype.forward=function(){this.go(1)},dt.prototype.getMatchedComponents=function(e){var t=e?e.matched?e:this.resolve(e).route:this.currentRoute;return t?[].concat.apply([],t.matched.map((function(e){return Object.keys(e.components).map((function(t){return e.components[t]}))}))):[]},dt.prototype.resolve=function(e,t,n){t=t||this.history.current;var r=Z(e,t,n,this),i=this.match(r,t),o=i.redirectedFrom||i.fullPath,a=this.history.base,s=pt(a,o,this.mode);return{location:r,route:i,href:s,normalizedTo:r,resolved:i}},dt.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==E&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(dt.prototype,ft),dt.install=se,dt.version="3.1.3",ue&&window.Vue&&window.Vue.use(dt),t["a"]=dt},"8c53":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("e172"),s=r(a),u=n("e09e"),l=r(u),c=n("6a2d"),d=r(c),f=n("8a43"),h=r(f),p=n("1d48"),m=r(p),g=n("467b"),y=r(g),v=n("9ad3"),_=r(v);function E(){var e=this.context,t=(0,h["default"])(e).getInstance(),n=void 0,r=void 0,i=void 0,a=void 0,u=void 0,c=void 0,f=void 0,p=void 0,g=void 0,y=void 0,v=void 0,E=void 0,b=void 0,T=void 0,S=void 0,w=void 0;function x(){L(),t.on(m["default"].QUALITY_CHANGE_REQUESTED,W,n),t.on(m["default"].REPRESENTATION_UPDATED,G,n),t.on(m["default"].WALLCLOCK_TIME_UPDATED,Y,n),t.on(m["default"].BUFFER_LEVEL_UPDATED,z,n),t.on(m["default"].MANIFEST_VALIDITY_CHANGED,X,n)}function I(e){e.abrController&&(f=e.abrController),e.domStorage&&(v=e.domStorage),e.metricsModel&&(y=e.metricsModel),e.dashMetrics&&(T=e.dashMetrics),e.dashManifestModel&&(b=e.dashManifestModel),e.playbackController&&(g=e.playbackController),e.timelineConverter&&(E=e.timelineConverter),e.manifestModel&&(w=e.manifestModel),e.streamProcessor&&(S=e.streamProcessor)}function A(){p=S.getIndexHandler()}function D(){return S}function R(){return r}function M(){return i}function C(){return a}function N(){return c}function L(){r=null,i=-1,a=!0,u=[],f=null,g=null,y=null,v=null,E=null,b=null,T=null}function P(){t.off(m["default"].QUALITY_CHANGE_REQUESTED,W,n),t.off(m["default"].REPRESENTATION_UPDATED,G,n),t.off(m["default"].WALLCLOCK_TIME_UPDATED,Y,n),t.off(m["default"].BUFFER_LEVEL_UPDATED,z,n),t.off(m["default"].MANIFEST_VALIDITY_CHANGED,X,n),L()}function O(e,n,i){var s=S.getStreamInfo(),l=f.getTopQualityIndexFor(i,s.id),d=f.getMinAllowedIndexFor(i),h=void 0,g=void 0,y=null;if(a=!0,t.trigger(m["default"].DATA_UPDATE_STARTED,{sender:this}),u=j(n),null!==r&&r.id==e.id||i===o["default"].FRAGMENTED_TEXT?h=f.getQualityFor(i,s):(g=f.getThroughputHistory().getAverageThroughput(i),y=g||f.getInitialBitrateFor(i,s),h=f.getQualityForBitrate(S.getMediaInfo(),y)),void 0!==d&&h<d&&(h=d),h>l&&(h=l),c=B(h),r=e,i!==o["default"].VIDEO&&i!==o["default"].AUDIO&&i!==o["default"].FRAGMENTED_TEXT)return a=!1,void t.trigger(m["default"].DATA_UPDATE_COMPLETED,{sender:this,data:r,currentRepresentation:c});for(var v=0;v<u.length;v++)p.updateRepresentation(u[v],!0)}function F(){var e=new Date,t=N(),n=1e3*g.getTime();y.addRepresentationSwitch(t.adaptation.type,e,n,t.id)}function k(){var e=S.getStreamInfo(),t=e?e.manifestInfo:null,n=t?t.isDynamic:null,r=E.calcSegmentAvailabilityRange(c,n);y.addDVRInfo(S.getType(),g.getTime(),t,r)}function B(e){return null===e||void 0===e||e>=u.length?null:u[e]}function U(e){return u.indexOf(e)}function H(){for(var e=0,t=u.length;e<t;e++){var n=u[e].segmentInfoType;if(null===u[e].segmentAvailabilityRange||!_["default"].hasInitialization(u[e])||(n===l["default"].SEGMENT_BASE||n===l["default"].BASE_URL)&&!u[e].segments)return!1}return!0}function j(e){var t=void 0;return i=b.getIndexForAdaptation(r,e.period.mpd.manifest,e.period.index),t=b.getRepresentationsForAdaptation(e),t}function K(e){for(var t=void 0,n=0,r=u.length;n<r;n++)t=u[n],t.segmentAvailabilityRange=E.calcSegmentAvailabilityRange(t,e)}function V(){u.forEach((function(e){e.segmentAvailabilityRange=null}))}function q(e){var r=e,i=function(){if(!C()){a=!0,t.trigger(m["default"].DATA_UPDATE_STARTED,{sender:n}),V();for(var e=0;e<u.length;e++)p.updateRepresentation(u[e],!0)}};a=!1,t.trigger(m["default"].AST_IN_FUTURE,{delay:r}),setTimeout(i,r)}function G(e){if(e.sender.getStreamProcessor()===S&&C()){var n=e.representation,i=y.getMetricsFor(o["default"].STREAM),u=y.getMetricsFor(N().adaptation.type),h=T.getCurrentManifestUpdate(i),p=!1,v=0,_=void 0,E=void 0,b=void 0;if(n.adaptation.period.mpd.manifest.type===l["default"].DYNAMIC&&!n.adaptation.period.mpd.manifest.ignorePostponeTimePeriod){var w=n.segmentAvailabilityRange.end-n.segmentAvailabilityRange.start,x=g.computeLiveDelay(c.segmentDuration,S.getStreamInfo().manifestInfo.DVRWindowSize);v=1e3*(x-w)}if(v>0)return k(),q(v),E=new d["default"](s["default"].SEGMENTS_UPDATE_FAILED_ERROR_CODE,s["default"].SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE),void t.trigger(m["default"].DATA_UPDATE_COMPLETED,{sender:this,data:r,currentRepresentation:c,error:E});if(h){for(var I=0;I<h.representationInfo.length;I++)if(_=h.representationInfo[I],_.index===n.index&&_.mediaType===S.getType()){p=!0;break}p||y.addManifestUpdateRepresentationInfo(h,n.id,n.index,n.adaptation.period.index,S.getType(),n.presentationTimeOffset,n.startNumber,n.segmentInfoType)}H()&&(a=!1,f.setPlaybackQuality(S.getType(),S.getStreamInfo(),U(c)),y.updateManifestUpdateInfo(h,{latency:c.segmentAvailabilityRange.end-g.getTime()}),b=T.getCurrentRepresentationSwitch(u),b||F(),t.trigger(m["default"].DATA_UPDATE_COMPLETED,{sender:this,data:r,currentRepresentation:c}))}}function Y(e){e.isDynamic&&K(e.isDynamic)}function z(e){if(e.sender.getStreamProcessor()===S){var t=w.getValue();t.doNotUpdateDVRWindowOnBufferUpdated||k()}}function W(e){if(e.mediaType===S.getType()&&S.getStreamInfo().id===e.streamInfo.id&&e.oldQuality!==e.newQuality){c=B(e.newQuality);var t=f.getThroughputHistory().getAverageThroughput(e.mediaType);isNaN(t)||v.setSavedBitrateSettings(e.mediaType,t),F()}}function X(e){if(e.newDuration){var t=N();if(t&&t.adaptation.period){var n=t.adaptation.period;n.duration=e.newDuration}}}return n={initialize:A,setConfig:I,getData:R,getDataIndex:M,isUpdating:C,updateData:O,getStreamProcessor:D,getCurrentRepresentation:N,getRepresentationForQuality:B,reset:P},x(),n}E.__dashjs_factory_name="RepresentationController",t["default"]=y["default"].getClassFactory(E),e.exports=t["default"]},"8d11":function(e,t,n){"use strict";function r(){return{reconstructFullMetricName:function(e,t,n){var r=e;return t&&(r+="("+t,n&&n.length&&(r+=","+n),r+=")"),r},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}Object.defineProperty(t,"__esModule",{value:!0}),r.__dashjs_factory_name="HandlerHelpers",t["default"]=dashjs.FactoryMaker.getSingletonFactory(r),e.exports=t["default"]},"8d23":function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("4398"),o=r(i),a=n("467b"),s=r(a),u=n("589e"),l=r(u),c=n("3337"),d="undefined"!==typeof window&&window||e,f=d.dashjs;f||(f=d.dashjs={}),f.MediaPlayer=o["default"],f.FactoryMaker=s["default"],f.Debug=l["default"],f.Version=(0,c.getVersionString)(),t["default"]=f,t.MediaPlayer=o["default"],t.FactoryMaker=s["default"],t.Debug=l["default"]}).call(this,n("c8ba"))},"8e01":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("47e4"),s=r(a),u=n("d14c"),l=r(u),c=n("1c67"),d=r(c),f=n("8a43"),h=r(f),p=n("1d48"),m=r(p),g=n("467b"),y=r(g),v=n("df86"),_=n("589e"),E=r(_),b=n("0eda"),T=r(b),S=n("4e7a"),w=r(S),x=n("1962"),I=r(x),A=n("248c"),D=r(A),R=n("4be9"),M=r(R),C=n("85a1"),N=r(C),L=n("6a2d"),P=r(L),O=n("e172"),F=r(O);function k(){var e=40,t=this.context,n=(0,h["default"])(t).getInstance(),r=void 0,i=void 0,a=void 0,u=void 0,c=void 0,f=void 0,p=void 0,g=void 0,y=void 0,_=void 0,b=void 0,S=void 0,x=void 0,A=void 0,R=void 0,C=void 0,L=void 0,O=void 0,k=void 0,B=void 0,U=void 0,H=void 0,j=void 0,K=void 0,V=void 0,q=void 0,G=void 0,Y=void 0,z=void 0,W=void 0,X=void 0,$=void 0,Q=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,oe=void 0,ae=void 0,se=void 0,ue=void 0,le=void 0,ce=void 0,de=void 0;function fe(){i=(0,E["default"])(t).getInstance().getLogger(r),S=(0,D["default"])(t).getInstance(),x=(0,M["default"])(t).getInstance(),b=(0,N["default"])(t).getInstance(),O=(0,T["default"])(t).getInstance(),k=(0,w["default"])(t).getInstance(),rt()}function he(e,n){$e(),q=e,V=n,U.initialize(),u=(0,d["default"])(t).create(),u.setConfig({manifestModel:f,dashManifestModel:p,mediaPlayerModel:Q,manifestLoader:c,errHandler:B}),u.initialize(),x.setConfig({dashManifestModel:p}),pe()}function pe(){n.on(m["default"].PLAYBACK_TIME_UPDATED,ge,this),n.on(m["default"].PLAYBACK_SEEKING,_e,this),n.on(m["default"].PLAYBACK_ERROR,ze,this),n.on(m["default"].PLAYBACK_STARTED,Ee,this),n.on(m["default"].PLAYBACK_PAUSED,be,this),n.on(m["default"].PLAYBACK_ENDED,Ce,this),n.on(m["default"].MANIFEST_UPDATED,Ke,this),n.on(m["default"].BUFFERING_COMPLETED,xe,this),n.on(m["default"].STREAM_BUFFERING_COMPLETED,Ie,this),n.on(m["default"].MANIFEST_VALIDITY_CHANGED,et,this),n.on(m["default"].TIME_SYNCHRONIZATION_COMPLETED,je,this),n.on(m["default"].WALLCLOCK_TIME_UPDATED,ye,this),n.on(I["default"].METRIC_ADDED,ot,this)}function me(){n.off(m["default"].PLAYBACK_TIME_UPDATED,ge,this),n.off(m["default"].PLAYBACK_SEEKING,_e,this),n.off(m["default"].PLAYBACK_ERROR,ze,this),n.off(m["default"].PLAYBACK_STARTED,Ee,this),n.off(m["default"].PLAYBACK_PAUSED,be,this),n.off(m["default"].PLAYBACK_ENDED,Ce,this),n.off(m["default"].MANIFEST_UPDATED,Ke,this),n.off(m["default"].BUFFERING_COMPLETED,xe,this),n.off(m["default"].STREAM_BUFFERING_COMPLETED,Ie,this),n.off(m["default"].MANIFEST_VALIDITY_CHANGED,et,this),n.off(m["default"].TIME_SYNCHRONIZATION_COMPLETED,je,this),n.off(m["default"].WALLCLOCK_TIME_UPDATED,ye,this),n.off(I["default"].METRIC_ADDED,ot,this)}function ge(){if(Ve(o["default"].VIDEO)){var e=X.getPlaybackQuality();e&&y.addDroppedFrames(o["default"].VIDEO,e)}}function ye(){if(!(!Q.getJumpGaps()||0===Me()||$.isSeeking()||J||G||Y||z)&&(ae++,ae>=e)){var t=$.getTime();ce===t?ve(t):ce=t,ae=0}}function ve(e){for(var t=Me(),r=Q.getSmallGapLimit(),o=void 0,a=0;a<t.length;a++){var s=t[a].getBuffer(),u=s.getAllBufferRanges(),l=void 0;if(u&&!(u.length<=1)){for(var c=0;c<u.length;c++)if(e<u.start(c)){l=u.start(c);break}if(l>0){var d=l-e;d>0&&d<=r&&(void 0===o||l>o)&&(o=l)}}}var f=$.getTimeToStreamEnd();void 0===o&&!isNaN(f)&&f<r&&(o=e+f),o>0&&(!isNaN(f)&&o>=e+f?(i.info("Jumping media gap (discontinuity) at time ",e,". Jumping to end of the stream"),n.trigger(m["default"].PLAYBACK_ENDED,{isLast:We().isLast})):(i.info("Jumping media gap (discontinuity) at time ",e,". Jumping to time position",o),$.seek(o,!0,!0)))}function _e(e){var t=De(e.seekTime);ie&&(Te(),re=!1),oe&&Se(),t===j&&le&&le.deactivate(!0),t&&(t!==j||le&&!j.isActive())?(Ge(v.PlayListTrace.END_OF_PERIOD_STOP_REASON),Le(j,t,e.seekTime)):Ge(v.PlayListTrace.USER_REQUEST_STOP_REASON),Ye(v.PlayList.SEEK_START_REASON)}function Ee(){i.debug("[onPlaybackStarted]"),Z?(Z=!1,Ye(v.PlayList.INITIAL_PLAYOUT_START_REASON)):J&&(J=!1,Ye(v.PlayList.RESUME_FROM_PAUSE_START_REASON),we())}function be(e){i.debug("[onPlaybackPaused]"),e.ended||(J=!0,Ge(v.PlayListTrace.USER_REQUEST_STOP_REASON),we())}function Te(){i.debug("[toggleEndPeriodTimer] stop end period timer."),clearTimeout(ie),ie=void 0}function Se(){i.debug("[PreloadTimer] stop period preload timer."),clearTimeout(oe),oe=void 0}function we(){if(re)if(ie)Te();else{var e=$.getTimeToStreamEnd(),t=e>0?1e3*e:0,r=t<2e3?t/4:t-2e3;i.debug("[toggleEndPeriodTimer] Going to fire preload in",r,"milliseconds"),oe=setTimeout(Ae,r),i.debug("[toggleEndPeriodTimer] start-up of timer to notify PLAYBACK_ENDED event. It will be triggered in",t,"milliseconds"),ie=setTimeout((function(){n.trigger(m["default"].PLAYBACK_ENDED,{isLast:We().isLast})}),t)}}function xe(e){if(e.sender&&(e.sender.getType()===o["default"].AUDIO||e.sender.getType()===o["default"].VIDEO)){var t=We().isLast;W&&!t&&void 0===ie&&(i.info("[onTrackBufferingCompleted] end of period detected. Track",e.sender.getType(),"has finished"),re=!0,!1===J&&we())}}function Ie(){var e=We().isLast;W&&e&&(i.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),b.signalEndOfStream(W))}function Ae(){var e=We().isLast;W&&!e&&function(){var e=Ne();ue=j.isProtectionCompatible(e)&&(de||j.isMediaCodecCompatible(e)),ue&&(i.info("[onStreamCanLoadNext] Preloading next stream"),j.stopEventController(),j.deactivate(!0),e.preload(W,se),le=e,e.getProcessors().forEach((function(t){g.setIndexHandlerTime(t,e.getStartTime())})))}()}function De(e){var t=0,n=null,r=H.length;r>0&&(t+=H[0].getStartTime());for(var i=0;i<r;i++)if(n=H[i],t=parseFloat((t+n.getDuration()).toFixed(5)),e<t)return n;return null}function Re(e,t){for(var n=null,r=0,i=0,o=null,a=H.length,s=0;s<a;s++){if(n=H[s],i=n.getStartTime(),o=n.getDuration(),Number.isFinite(i)&&(r=i),n.getId()===t)return e-r;Number.isFinite(o)&&(r+=o)}return null}function Me(){return j?j.getProcessors():[]}function Ce(){var e=Ne();e?(ne=void 0,te=void 0,Le(j,e,NaN)):i.debug("StreamController no next stream found"),Ge(e?v.PlayListTrace.END_OF_PERIOD_STOP_REASON:v.PlayListTrace.END_OF_CONTENT_STOP_REASON),ie=void 0,re=!1}function Ne(){if(j){var e=function(){var e=We().start,t=We().duration;return{v:H.filter((function(n){return n.getStreamInfo().start===parseFloat((e+t).toFixed(5))}))[0]}}();if("object"===typeof e)return e.v}}function Le(e,t,r){G||!t||e===t&&t.isActive()||(G=!0,n.trigger(m["default"].PERIOD_SWITCH_STARTED,{fromStreamInfo:e?e.getStreamInfo():null,toStreamInfo:t.getStreamInfo()}),ue=!1,e&&(e.stopEventController(),ue=j.isProtectionCompatible(t)&&(de||j.isMediaCodecCompatible(t))&&!r||t.getPreloaded(),e.deactivate(ue)),j=t,le=!1,$.initialize(We(),ue),X.getElement()?Fe(r,e,!1,ue):Pe(r))}function Pe(e){ke(e,ue)}function Oe(e){j&&($.initialize(We()),Fe(e,null,!0,!1))}function Fe(e,t,r,o){var a=void 0;function s(){W&&(i.debug("MediaSource is open!"),window.URL.revokeObjectURL(a),W.removeEventListener("sourceopen",s),W.removeEventListener("webkitsourceopen",s),Be(),t||n.trigger(m["default"].SOURCE_INITIALIZED),r?j.setMediaSource(W):ke(e,o))}W?o?(ke(e,o),t||n.trigger(m["default"].SOURCE_INITIALIZED)):(b.detachMediaSource(X),W.addEventListener("sourceopen",s,!1),W.addEventListener("webkitsourceopen",s,!1),a=b.attachMediaSource(W,X),i.debug("MediaSource attached to element.  Waiting on open...")):(W=b.createMediaSource(),W.addEventListener("sourceopen",s,!1),W.addEventListener("webkitsourceopen",s,!1),a=b.attachMediaSource(W,X),i.debug("MediaSource attached to element.  Waiting on open..."))}function ke(e,t){if(se=j.activate(W,t?se:void 0),ne=qe(o["default"].AUDIO),te=qe(o["default"].VIDEO),se){var r=Object.keys(se);r.length>0&&se[r[0]].changeType&&(i.debug("SourceBuffer changeType method supported. Use it to switch codecs in periods transitions"),de=!0)}Z||(isNaN(e)?function(){var e=$.getStreamStartTime(!0);t||Me().forEach((function(t){g.setIndexHandlerTime(t,e)}))}():$.seek(e)),j.startEventController(),!q&&Z||$.play(),G=!1,n.trigger(m["default"].PERIOD_SWITCH_COMPLETED,{toStreamInfo:We()})}function Be(e){var t=e||We().manifestInfo.duration,n=b.setDuration(W,t);i.debug("Duration successfully set to: "+n)}function Ue(e){for(var t=0,n=H.length;t<n;t++)if(H[t].getId()===e.id)return H[t];return null}function He(){try{var e=g.getStreamsInfo();if(0===e.length)throw new Error("There are no streams");var i=_.getCurrentManifestUpdate(y.getMetricsFor(o["default"].STREAM));y.updateManifestUpdateInfo(i,{currentTime:$.getTime(),buffered:X.getBufferRange(),presentationStartTime:e[0].start,clientTimeOffset:U.getClientTimeOffset()});for(var s=0,c=e.length;s<c;s++){var d=e[s],h=Ue(d);h?h.updateData(d):(h=(0,l["default"])(t).create({manifestModel:f,dashManifestModel:p,mediaPlayerModel:Q,metricsModel:y,dashMetrics:_,manifestUpdater:u,adapter:g,timelineConverter:U,capabilities:a,errHandler:B,baseURLController:x,domStorage:A,abrController:R,playbackController:$,mediaController:C,textController:L,videoModel:X,streamController:r}),H.push(h),h.initialize(d,K)),y.addManifestUpdateStreamInfo(i,d.id,d.index,d.start,d.duration)}if(!j){var v=$.getStartTimeFromUriParameters(),E=null;if(v){var b=isNaN(v.fragS)?v.fragT:v.fragS;E=De(b)}Le(null,null!==E?E:H[0],NaN)}n.trigger(m["default"].STREAMS_COMPOSED)}catch(T){B.manifestError(T.message,"nostreamscomposed",f.getValue()),B.error(new P["default"](F["default"].MANIFEST_ERROR_ID_NOSTREAMS_CODE,T.message+"nostreamscomposed",f.getValue())),z=!0,it()}}function je(){var e=f.getValue();K&&(n.trigger(m["default"].PROTECTION_CREATED,{controller:K,manifest:e}),K.setMediaElement(X.getElement()),V&&K.setProtectionData(V)),He()}function Ke(e){e.error?(z=!0,it()):function(){var t=e.manifest;g.updatePeriods(t);var n=g.getStreamsInfo(void 0,1)[0],r=g.getMediaInfoForType(n,o["default"].VIDEO)||g.getMediaInfoForType(n,o["default"].AUDIO),a=void 0;r&&(a=p.getUseCalculatedLiveEdgeTimeForAdaptation(g.getDataForMedia(r)),a&&(i.debug("SegmentTimeline detected using calculated Live Edge Time"),Q.setUseManifestDateHeaderTimeSource(!1)));var s=p.getUTCTimingSources(e.manifest),u=!p.getIsDynamic(t)||a?s:s.concat(Q.getUTCTimingSources()),l=k.isHTTPS(e.manifest.url);u.forEach((function(e){e.value.replace(/.*?:\/\//g,"")===Q.getDefaultUtcTimingSource().value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(l?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),l?"https://":"http://"),i.debug("Matching default timing source protocol to manifest protocol: ",e.value))})),x.initialize(t),S.setConfig({metricsModel:y,dashMetrics:_,baseURLController:x}),S.initialize(u,Q.getUseManifestDateHeaderTimeSource())}()}function Ve(e){var t=void 0;if(!e)return t;switch(e){case o["default"].VIDEO:t=te;break;case o["default"].AUDIO:t=ne;break}return t}function qe(e){var t=!1;return Me().forEach((function(n){n.getMediaInfo().type===e&&(t=!0)})),t}function Ge(e,t){t=t||new Date,ee&&(Me().forEach((function(n){var r=n.getScheduleController();r&&r.finalisePlayList(t,e)})),y.addPlayList(ee),ee=null)}function Ye(e){ee=new v.PlayList,ee.start=new Date,ee.mstart=1e3*$.getTime(),ee.starttype=e,Me().forEach((function(e){var t=e.getScheduleController();t&&t.setPlayList(ee)}))}function ze(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN";break}Y=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),i.fatal("Video Element Error: "+t),e.error&&i.fatal(e.error),B.mediaSourceError(t),B.error(new P["default"](e.error.code,t)),it()}}function We(){return j?j.getStreamInfo():null}function Xe(e){return H.filter((function(t){return t.getId()===e}))[0]}function $e(){if(!c||!c.hasOwnProperty("load")||!U||!U.hasOwnProperty("initialize")||!U.hasOwnProperty("reset")||!U.hasOwnProperty("getClientTimeOffset")||!f||!B||!y||!$)throw new Error("setConfig function has to be called previously")}function Qe(){if(!u||!u.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function Je(e){$e(),c.load(e)}function Ze(e){Qe(),u.setManifest(e)}function et(e){isNaN(e.newDuration)||Be(e.newDuration)}function tt(e){e&&(e.capabilities&&(a=e.capabilities),e.manifestLoader&&(c=e.manifestLoader),e.manifestModel&&(f=e.manifestModel),e.dashManifestModel&&(p=e.dashManifestModel),e.mediaPlayerModel&&(Q=e.mediaPlayerModel),e.protectionController&&(K=e.protectionController),e.adapter&&(g=e.adapter),e.metricsModel&&(y=e.metricsModel),e.dashMetrics&&(_=e.dashMetrics),e.errHandler&&(B=e.errHandler),e.timelineConverter&&(U=e.timelineConverter),e.videoModel&&(X=e.videoModel),e.playbackController&&($=e.playbackController),e.domStorage&&(A=e.domStorage),e.abrController&&(R=e.abrController),e.mediaController&&(C=e.mediaController),e.textController&&(L=e.textController))}function nt(e){V=e}function rt(){H=[],K=null,G=!1,j=null,Y=!1,z=!1,te=void 0,ne=void 0,Z=!0,J=!1,q=!0,ee=null,ie=void 0,re=!1,ae=0}function it(){$e(),S.reset(),Ge(Y||z?v.PlayListTrace.FAILURE_STOP_REASON:v.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,t=H?H.length:0;e<t;e++){var r=H[e];r.reset(Y)}me(),x.reset(),u.reset(),y.clearAllCurrentMetrics(),f.setValue(null),c.reset(),U.reset(),O.reset(),W&&(b.detachMediaSource(X),W=null),X=null,K&&(K.setMediaElement(null),K=null,V=null,f.getValue()&&n.trigger(m["default"].PROTECTION_DESTROYED,{data:f.getValue().url})),n.trigger(m["default"].STREAM_TEARDOWN_COMPLETE),rt()}function ot(e){e.metric===s["default"].DVR_INFO&&e.mediaType===o["default"].AUDIO&&b.setSeekable(W,e.value.range.start,e.value.range.end)}return r={initialize:he,getActiveStreamInfo:We,isTrackTypePresent:Ve,switchToVideoElement:Oe,getStreamById:Xe,getStreamForTime:De,getTimeRelativeToStreamId:Re,load:Je,loadWithManifest:Ze,getActiveStreamProcessors:Me,setConfig:tt,setProtectionData:nt,reset:it},fe(),r}k.__dashjs_factory_name="StreamController",t["default"]=y["default"].getSingletonFactory(k),e.exports=t["default"]},"8e4c":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("8a43"),o=r(i),a=n("1d48"),s=r(a),u=n("467b"),l=r(u),c=n("41ee"),d=r(c),f=n("589e"),h=r(f),p="loading",m="executed",g="canceled",y="failed";function v(e){e=e||{};var t=this.context,n=(0,o["default"])(t).getInstance(),r=e.metricsModel,i=e.fragmentLoader,a=void 0,u=void 0,l=void 0,c=void 0,f=void 0;function g(){u=(0,h["default"])(t).getInstance().getLogger(a),B(),n.on(s["default"].LOADING_COMPLETED,O,a),n.on(s["default"].LOADING_DATA_PROGRESS,F,a),n.on(s["default"].LOADING_ABANDONED,k,a)}function v(e){l=e}function _(){return l}function E(e){var t=function(e,t){return e.action===d["default"].ACTION_COMPLETE&&e.action===t.action},n=function(e,t){return!isNaN(e.index)&&e.startTime===t.startTime&&e.adaptationIndex===t.adaptationIndex&&e.type===t.type},r=function(e,t){return isNaN(e.index)&&isNaN(t.index)&&e.quality===t.quality},i=function(i){var o=!1;return i.some((function(i){if(n(e,i)||r(e,i)||t(e,i))return o=!0,o})),o};return!!e&&i(c)}function b(e){var t=!1,n=0,r=void 0;if(t=E(e),!t)for(n=0;n<f.length;n++)r=f[n],e.url===r.url&&e.startTime===r.startTime&&(t=!0);return t}function T(e){var t=e?e.state instanceof Array?e.state:[e.state]:[],n=[];return t.forEach((function(t){var r=L(t);n=n.concat(N(r,e))})),n}function S(e){return isNaN(e.duration)?.25:Math.min(e.duration/8,.5)}function w(e){c=c.filter((function(t){var n=S(t);return isNaN(t.startTime)||void 0!==e&&t.startTime>=e-n}))}function x(e){c=c.filter((function(t){return isNaN(t.startTime)||void 0!==e&&t.startTime+t.duration<e}))}function I(e,t){t<=e+.5||(c=c.filter((function(n){var r=S(n);return isNaN(n.startTime)||n.startTime>=t-r||isNaN(n.duration)||n.startTime+n.duration<=e+r})))}function A(e,t){if(e&&0!==e.length){for(var n=0,r=0,i=e.length;r<i;r++)I(n,e.start(r)),n=e.end(r);t>0&&I(n,t)}else w()}function D(){i.abort(),f=[]}function R(e){switch(e.action){case d["default"].ACTION_COMPLETE:c.push(e),P(e,m),u.debug("executeRequest trigger STREAM_COMPLETED"),n.trigger(s["default"].STREAM_COMPLETED,{request:e,fragmentModel:this});break;case d["default"].ACTION_DOWNLOAD:P(e,p),f.push(e),M(e);break;default:u.warn("Unknown request action.")}}function M(e){n.trigger(s["default"].FRAGMENT_LOADING_STARTED,{sender:a,request:e}),i.load(e)}function C(e,t,n){for(var r=e.length-1,i=r;i>=0;i--){var o=e[i],a=o.startTime,s=a+o.duration;if(n=isNaN(n)?S(o):n,!isNaN(a)&&!isNaN(s)&&t+n>=a&&t-n<s||isNaN(a)&&isNaN(t))return o}return null}function N(e,t){return t.hasOwnProperty("time")?[C(e,t.time,t.threshold)]:e.filter((function(e){for(var n in t)if("state"!==n&&t.hasOwnProperty(n)&&e[n]!=t[n])return!1;return!0}))}function L(e){var t=void 0;switch(e){case p:t=f;break;case m:t=c;break;default:t=[]}return t}function P(e,t){r.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t),r.addRequestsQueue(e.mediaType,f,c)}function O(e){e.sender===i&&(f.splice(f.indexOf(e.request),1),e.response&&!e.error&&c.push(e.request),P(e.request,e.error?y:m),n.trigger(s["default"].FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this}))}function F(e){e.sender===i&&n.trigger(s["default"].FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this})}function k(e){e.sender===i&&n.trigger(s["default"].FRAGMENT_LOADING_ABANDONED,{streamProcessor:this.getStreamProcessor(),request:e.request,mediaType:e.mediaType})}function B(){c=[],f=[]}function U(){n.off(s["default"].LOADING_COMPLETED,O,this),n.off(s["default"].LOADING_DATA_PROGRESS,F,this),n.off(s["default"].LOADING_ABANDONED,k,this),i&&i.reset(),B()}function H(e){c.push(e)}return a={setStreamProcessor:v,getStreamProcessor:_,getRequests:T,isFragmentLoaded:E,isFragmentLoadedOrPending:b,removeExecutedRequestsBeforeTime:w,removeExecutedRequestsAfterTime:x,syncExecutedRequestsWithBufferedRange:A,abortRequests:D,executeRequest:R,reset:U,addExecutedRequest:H},g(),a}v.__dashjs_factory_name="FragmentModel";var _=l["default"].getClassFactory(v);_.FRAGMENT_MODEL_LOADING=p,_.FRAGMENT_MODEL_EXECUTED=m,_.FRAGMENT_MODEL_CANCELED=g,_.FRAGMENT_MODEL_FAILED=y,l["default"].updateClassFactory(v.__dashjs_factory_name,_),t["default"]=_,e.exports=t["default"]},"8e60":function(e,t,n){e.exports=!n("294c")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},"8edf":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0};t["default"]=i,e.exports=t["default"]},"8f60":function(e,t,n){"use strict";var r=n("a159"),i=n("aebd"),o=n("45f2"),a={};n("35e8")(a,n("5168")("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},9009:function(e,t,n){(function(e,t,n,r,i){function o(e){if("contents"in e)for(var t=("styleAttrs"in e?e.styleAttrs[r.byName.ruby.qname]:null),n="span"===e.kind&&("container"===t||"textContainer"===t||"textContainer"===t),i=e.contents.length-1;i>=0;i--)!n||"styleAttrs"in e.contents[i]&&r.byName.ruby.qname in e.contents[i].styleAttrs?o(e.contents[i]):delete e.contents[i]}function a(e,t,n,r){var i=r&&"seq"===r.timeContainer,o=0;r&&(o=i&&n?n.end:r.begin),t.begin=t.explicit_begin?t.explicit_begin+o:o;var s=t.begin,u=null;for(var l in t.sets)a(e,t.sets[l],u,t),s="seq"===t.timeContainer?t.sets[l].end:Math.max(s,t.sets[l].end),u=t.sets[l];if("contents"in t)for(var c in t.contents)a(e,t.contents[c],u,t),s="seq"===t.timeContainer?t.contents[c].end:Math.max(s,t.contents[c].end),u=t.contents[c];else s=i?t.begin:Number.POSITIVE_INFINITY;null!==t.explicit_end&&null!==t.explicit_dur?t.end=Math.min(t.begin+t.explicit_dur,o+t.explicit_end):null===t.explicit_end&&null!==t.explicit_dur?t.end=t.begin+t.explicit_dur:null!==t.explicit_end&&null===t.explicit_dur?t.end=o+t.explicit_end:t.end=s,delete t.explicit_begin,delete t.explicit_dur,delete t.explicit_end,e._registerEvent(t)}function s(e){this.node=e}function u(){this.events=[],this.head=new l,this.body=null}function l(){this.styling=new c,this.layout=new h}function c(){this.styles={},this.initials={}}function d(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function f(){this.styleAttrs=null}function h(){this.regions={}}function p(e,t){m.call(this,"image"),this.src=e,this.type=t}function m(e){this.kind=e}function g(e){this.id=e}function y(e){this.regionID=e}function v(e){this.styleAttrs=e}function _(e){this.sets=e}function E(e){this.contents=e}function b(e,t,n){this.explicit_begin=e,this.explicit_end=t,this.explicit_dur=n}function T(){m.call(this,"body")}function S(){m.call(this,"div")}function w(){m.call(this,"p")}function x(){m.call(this,"span")}function I(){m.call(this,"span")}function A(){m.call(this,"br")}function D(){}function R(){}function M(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function C(e){return e&&"region"in e.attributes?e.attributes.region.value:""}function N(e,t){var n=e&&"timeContainer"in e.attributes?e.attributes.timeContainer.value:null;return n&&"par"!==n?"seq"===n?"seq":(Y(t,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}function L(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function P(e,t){var n={};if(null!==e)for(var i in e.attributes){var o=e.attributes[i].uri+" "+e.attributes[i].local,a=r.byQName[o];if(void 0!==a){var s=a.parse(e.attributes[i].value);null!==s?(n[o]=s,a===r.byName.zIndex&&G(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):Y(t,"Cannot parse styling attribute "+o+" --\x3e "+e.attributes[i].value)}}return n}function O(e,t,n){for(var r in e.attributes)if(e.attributes[r].uri===t&&e.attributes[r].local===n)return e.attributes[r].value;return null}function F(e,t){var r=O(e,n.ns_ittp,"aspectRatio");null===r&&(r=O(e,n.ns_ttp,"displayAspectRatio"));var i=null;if(null!==r){var o=/(\d+)\s+(\d+)/,a=o.exec(r);if(null!==a){var s=parseInt(a[1]),u=parseInt(a[2]);0!==s&&0!==u?i=s/u:Y(t,"Illegal aspectRatio values (ignoring)")}else Y(t,"Malformed aspectRatio attribute (ignoring)")}return i}function k(e,t){var r=O(e,n.ns_ttp,"cellResolution"),i=15,o=32;if(null!==r){var a=/(\d+) (\d+)/,s=a.exec(r);null!==s?(o=parseInt(s[1]),i=parseInt(s[2])):G(t,"Malformed cellResolution value (using initial value instead)")}return{w:o,h:i}}function B(e,t){var r,i=O(e,n.ns_ttp,"frameRate"),o=30;if(null!==i){var a=/(\d+)/;r=a.exec(i),null!==r?o=parseInt(r[1]):G(t,"Malformed frame rate attribute (using initial value instead)")}var s=O(e,n.ns_ttp,"frameRateMultiplier"),u=1;if(null!==s){var l=/(\d+) (\d+)/;r=l.exec(s),null!==r?u=parseInt(r[1])/parseInt(r[2]):G(t,"Malformed frame rate multiplier attribute (using initial value instead)")}var c=u*o,d=1,f=O(e,n.ns_ttp,"tickRate");if(null===f)null!==i&&(d=c);else{var h=/(\d+)/;r=h.exec(f),null!==r?d=parseInt(r[1]):G(t,"Malformed tick rate attribute (using initial value instead)")}return{effectiveFrameRate:c,tickRate:d}}function U(e,t){var r=O(e,n.ns_tts,"extent");if(null===r)return null;var o=r.split(" ");if(2!==o.length)return G(t,"Malformed extent (ignoring)"),null;var a=i.parseLength(o[0]),s=i.parseLength(o[1]);return s&&a?{h:s,w:a}:(G(t,"Malformed extent values (ignoring)"),null)}function H(e,t,n){var r,i=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,o=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/,a=/^(\d+(?:\.\d+)?)f$/,s=/^(\d+(?:\.\d+)?)t$/,u=/^(\d+(?:\.\d+)?)ms$/,l=/^(\d+(?:\.\d+)?)s$/,c=/^(\d+(?:\.\d+)?)h$/,d=/^(\d+(?:\.\d+)?)m$/,f=null;return null!==(r=a.exec(n))?null!==t&&(f=parseFloat(r[1])/t):null!==(r=s.exec(n))?null!==e&&(f=parseFloat(r[1])/e):null!==(r=u.exec(n))?f=parseFloat(r[1])/1e3:null!==(r=l.exec(n))?f=parseFloat(r[1]):null!==(r=c.exec(n))?f=3600*parseFloat(r[1]):null!==(r=d.exec(n))?f=60*parseFloat(r[1]):null!==(r=i.exec(n))?f=3600*parseInt(r[1])+60*parseInt(r[2])+parseFloat(r[3]):null!==(r=o.exec(n))&&null!==t&&(f=3600*parseInt(r[1])+60*parseInt(r[2])+parseInt(r[3])+(null===r[4]?0:parseInt(r[4])/t)),f}function j(e,t,n,r){var i=null;n&&"begin"in n.attributes&&(i=H(e.tickRate,e.effectiveFrameRate,n.attributes.begin.value),null===i&&G(r,"Malformed begin value "+n.attributes.begin.value+" (using 0)"));var o=null;n&&"dur"in n.attributes&&(o=H(e.tickRate,e.effectiveFrameRate,n.attributes.dur.value),null===o&&G(r,"Malformed dur value "+n.attributes.dur.value+" (ignoring)"));var a=null;return n&&"end"in n.attributes&&(a=H(e.tickRate,e.effectiveFrameRate,n.attributes.end.value),null===a&&G(r,"Malformed end value (ignoring)")),{explicit_begin:i,explicit_end:a,explicit_dur:o}}function K(e,t,n){while(t.styleRefs.length>0){var r=t.styleRefs.pop();r in e.styles?(K(e,e.styles[r],n),q(e.styles[r].styleAttrs,t.styleAttrs)):Y(n,"Non-existant style id referenced")}}function V(e,t,n,r){for(var i=t.length-1;i>=0;i--){var o=t[i];o in e.styles?q(e.styles[o].styleAttrs,n):Y(r,"Non-existant style id referenced")}}function q(e,t){for(var n in e)n in t||(t[n]=e[n])}function G(e,t){if(e&&e.warn&&e.warn(t))throw t}function Y(e,t){if(e&&e.error&&e.error(t))throw t}function z(e,t){throw e&&e.fatal&&e.fatal(t),t}function W(e,t){var n,r=0,i=e.length-1;while(r<=i){n=Math.floor((r+i)/2);var o=e[n];if(o<t)r=n+1;else{if(!(o>t))return{found:!0,index:n};i=n-1}}return{found:!1,index:r}}e.fromXML=function(e,i,m){var g=t.parser(!0,{xmlns:!0}),y=[],v=[],_=[],E=0,b=null;g.onclosetag=function(e){if(y[0]instanceof c)for(var t in y[0].styles)K(y[0],y[0].styles[t],i);else if(y[0]instanceof w||y[0]instanceof x){if(y[0].contents.length>1){var r,o=[y[0].contents[0]];for(r=1;r<y[0].contents.length;r++)y[0].contents[r]instanceof I&&o[o.length-1]instanceof I?o[o.length-1].text+=y[0].contents[r].text:o.push(y[0].contents[r]);y[0].contents=o}y[0]instanceof x&&1===y[0].contents.length&&y[0].contents[0]instanceof I&&(y[0].text=y[0].contents[0].text,delete y[0].contents)}else y[0]instanceof s&&(y[0].node.uri===n.ns_tt&&"metadata"===y[0].node.local?E--:E>0&&m&&"onCloseTag"in m&&m.onCloseTag());_.shift(),v.shift(),y.shift()},g.ontext=function(e){if(void 0===y[0]);else if(y[0]instanceof x||y[0]instanceof w){if(y[0]instanceof x){var t=y[0].styleAttrs[r.byName.ruby.qname];if("container"===t||"textContainer"===t||"baseContainer"===t)return}var n=new I;n.initFromText(b,y[0],e,_[0],i),y[0].contents.push(n)}else y[0]instanceof s&&E>0&&m&&"onText"in m&&m.onText(e)},g.onopentag=function(e){var t=e.attributes["xml:space"];t?_.unshift(t.value):0===_.length?_.unshift("default"):_.unshift(_[0]);var o=e.attributes["xml:lang"];if(o?v.unshift(o.value):0===v.length?v.unshift(""):v.unshift(v[0]),e.uri===n.ns_tt)if("tt"===e.local)null!==b&&z(i,"Two <tt> elements at ("+this.line+","+this.column+")"),b=new u,b.initFromNode(e,i),y.unshift(b);else if("head"===e.local)y[0]instanceof u||z(i,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),y.unshift(b.head);else if("styling"===e.local)y[0]instanceof l||z(i,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),y.unshift(b.head.styling);else if("style"===e.local){var a;y[0]instanceof c?(a=new d,a.initFromNode(e,i),a.id?b.head.styling.styles[a.id]=a:Y(i,"<style> element missing @id attribute"),y.unshift(a)):y[0]instanceof D?(a=new d,a.initFromNode(e,i),q(a.styleAttrs,y[0].styleAttrs),y.unshift(a)):z(i,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("initial"===e.local){var g;if(y[0]instanceof c){for(var I in g=new f,g.initFromNode(e,i),g.styleAttrs)b.head.styling.initials[I]=g.styleAttrs[I];y.unshift(g)}else z(i,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if("layout"===e.local)y[0]instanceof l||z(i,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),y.unshift(b.head.layout);else if("region"===e.local){y[0]instanceof h||z(i,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var M=new D;M.initFromNode(b,e,i),!M.id||M.id in b.head.layout.regions?Y(i,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):b.head.layout.regions[M.id]=M,y.unshift(M)}else if("body"===e.local){y[0]instanceof u||z(i,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==b.body&&z(i,"Second <body> element at "+this.line+","+this.column+")");var C=new T;C.initFromNode(b,e,i),b.body=C,y.unshift(C)}else if("div"===e.local){y[0]instanceof S||y[0]instanceof T||z(i,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var N=new S;N.initFromNode(b,y[0],e,i);var L=N.styleAttrs[r.byName.backgroundImage.qname];L&&(N.contents.push(new p(L)),delete N.styleAttrs[r.byName.backgroundImage.qname]),y[0].contents.push(N),y.unshift(N)}else if("image"===e.local){y[0]instanceof S||z(i,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var P=new p;P.initFromNode(b,y[0],e,i),y[0].contents.push(P),y.unshift(P)}else if("p"===e.local){y[0]instanceof S||z(i,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var O=new w;O.initFromNode(b,y[0],e,i),y[0].contents.push(O),y.unshift(O)}else if("span"===e.local){y[0]instanceof x||y[0]instanceof w||z(i,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var F=new x;F.initFromNode(b,y[0],e,_[0],i),y[0].contents.push(F),y.unshift(F)}else if("br"===e.local){y[0]instanceof x||y[0]instanceof w||z(i,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var k=new A;k.initFromNode(b,y[0],e,i),y[0].contents.push(k),y.unshift(k)}else if("set"===e.local){y[0]instanceof x||y[0]instanceof w||y[0]instanceof S||y[0]instanceof T||y[0]instanceof D||y[0]instanceof A||z(i,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var B=new R;B.initFromNode(b,y[0],e,i),y[0].sets.push(B),y.unshift(B)}else y.unshift(new s(e));else y.unshift(new s(e));if(y[0]instanceof s)if(e.uri===n.ns_tt&&"metadata"===e.local)E++;else if(E>0&&m&&"onOpenTag"in m){var U=[];for(var H in e.attributes)U[e.attributes[H].uri+" "+e.attributes[H].local]={uri:e.attributes[H].uri,local:e.attributes[H].local,value:e.attributes[H].value};m.onOpenTag(e.uri,e.local,U)}},g.write(e).close(),delete b.head.styling.styles;var M=!1;for(var C in b.head.layout.regions){M=!0;break}if(!M){var N=D.prototype.createDefaultRegion();b.head.layout.regions[N.id]=N}for(var L in b.head.layout.regions)a(b,b.head.layout.regions[L],null,null);return b.body&&a(b,b.body,null,null),b.body&&o(b.body),b},u.prototype.initFromNode=function(e,t){var r=k(e,t);this.cellLength={h:new i.ComputedLength(0,1/r.h),w:new i.ComputedLength(1/r.w,0)};var o=B(e,t);this.effectiveFrameRate=o.effectiveFrameRate,this.tickRate=o.tickRate,this.aspectRatio=F(e,t);var a=O(e,n.ns_ttp,"timeBase");null!==a&&"media"!==a&&z(t,"Unsupported time base");var s=U(e,t);null===s?this.pxLength={h:null,w:null}:("px"===s.h.unit&&"px"===s.w.unit||z(t,"Extent on TT must be in px or absent"),this.pxLength={h:new i.ComputedLength(0,1/s.h.value),w:new i.ComputedLength(1/s.w.value,0)}),this.dimensions={h:new i.ComputedLength(0,1),w:new i.ComputedLength(1,0)}},u.prototype._registerEvent=function(e){if(!(e.end<=e.begin)){var t=W(this.events,e.begin);if(t.found||this.events.splice(t.index,0,e.begin),e.end!==Number.POSITIVE_INFINITY){var n=W(this.events,e.end);n.found||this.events.splice(n.index,0,e.end)}}},u.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},u.prototype.getMediaTimeEvents=function(){return this.events},d.prototype.initFromNode=function(e,t){this.id=M(e),this.styleAttrs=P(e,t),this.styleRefs=L(e)},f.prototype.initFromNode=function(e,t){for(var r in this.styleAttrs={},e.attributes)if(e.attributes[r].uri===n.ns_itts||e.attributes[r].uri===n.ns_ebutts||e.attributes[r].uri===n.ns_tts){var i=e.attributes[r].uri+" "+e.attributes[r].local;this.styleAttrs[i]=e.attributes[r].value}},p.prototype.initFromNode=function(e,t,n,r){this.src="src"in n.attributes?n.attributes.src.value:null,this.src||Y(r,"Invalid image@src attribute"),this.type="type"in n.attributes?n.attributes.type.value:null,this.type||Y(r,"Invalid image@type attribute"),v.prototype.initFromNode.call(this,e,t,n,r),b.prototype.initFromNode.call(this,e,t,n,r),_.prototype.initFromNode.call(this,e,t,n,r),y.prototype.initFromNode.call(this,e,t,n,r)},g.prototype.initFromNode=function(e,t,n,r){this.id=M(n)},y.prototype.initFromNode=function(e,t,n,r){this.regionID=C(n)},v.prototype.initFromNode=function(e,t,n,r){this.styleAttrs=P(n,r),null!==e.head&&null!==e.head.styling&&V(e.head.styling,L(n),this.styleAttrs,r)},_.prototype.initFromNode=function(e,t,n,r){this.sets=[]},E.prototype.initFromNode=function(e,t,n,r){this.contents=[]},b.prototype.initFromNode=function(e,t,n,r){var i=j(e,t,n,r);this.explicit_begin=i.explicit_begin,this.explicit_end=i.explicit_end,this.explicit_dur=i.explicit_dur,this.timeContainer=N(n,r)},T.prototype.initFromNode=function(e,t,n){v.prototype.initFromNode.call(this,e,null,t,n),b.prototype.initFromNode.call(this,e,null,t,n),_.prototype.initFromNode.call(this,e,null,t,n),y.prototype.initFromNode.call(this,e,null,t,n),E.prototype.initFromNode.call(this,e,null,t,n)},S.prototype.initFromNode=function(e,t,n,r){v.prototype.initFromNode.call(this,e,t,n,r),b.prototype.initFromNode.call(this,e,t,n,r),_.prototype.initFromNode.call(this,e,t,n,r),y.prototype.initFromNode.call(this,e,t,n,r),E.prototype.initFromNode.call(this,e,t,n,r)},w.prototype.initFromNode=function(e,t,n,r){v.prototype.initFromNode.call(this,e,t,n,r),b.prototype.initFromNode.call(this,e,t,n,r),_.prototype.initFromNode.call(this,e,t,n,r),y.prototype.initFromNode.call(this,e,t,n,r),E.prototype.initFromNode.call(this,e,t,n,r)},x.prototype.initFromNode=function(e,t,n,r,i){v.prototype.initFromNode.call(this,e,t,n,i),b.prototype.initFromNode.call(this,e,t,n,i),_.prototype.initFromNode.call(this,e,t,n,i),y.prototype.initFromNode.call(this,e,t,n,i),E.prototype.initFromNode.call(this,e,t,n,i),this.space=r},I.prototype.initFromText=function(e,t,n,r,i){b.prototype.initFromNode.call(this,e,t,null,i),this.text=n,this.space=r},A.prototype.initFromNode=function(e,t,n,r){y.prototype.initFromNode.call(this,e,t,n,r),b.prototype.initFromNode.call(this,e,t,n,r)},D.prototype.createDefaultRegion=function(){var e=new D;return g.call(e,""),v.call(e,{}),_.call(e,[]),b.call(e,0,Number.POSITIVE_INFINITY,null),e},D.prototype.initFromNode=function(e,t,n){g.prototype.initFromNode.call(this,e,null,t,n),v.prototype.initFromNode.call(this,e,null,t,n),b.prototype.initFromNode.call(this,e,null,t,n),_.prototype.initFromNode.call(this,e,null,t,n),null!==e.head&&null!==e.head.styling&&V(e.head.styling,L(t),this.styleAttrs,n)},R.prototype.initFromNode=function(e,t,n,r){b.prototype.initFromNode.call(this,e,t,n,r);var i=P(n,r);for(var o in this.qname=null,this.value=null,i){if(this.qname){Y(r,"More than one style specified on set");break}this.qname=o,this.value=i[o]}}})(t,"undefined"===typeof sax?n("3171"):sax,"undefined"===typeof imscNames?n("597c"):imscNames,"undefined"===typeof imscStyles?n("faf0"):imscStyles,"undefined"===typeof imscUtils?n("ff7d"):imscUtils)},"90c5":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("467b"),s=r(a);function u(e){e=e||{};var t=e.dashMetrics,n=e.metricsModel,r=e.mediaPlayerModel,i=e.textController,a=e.abrController;function s(){}function u(e,r){if(!e)return!0;var i=t.getCurrentBufferLevel(n.getReadOnlyMetricsFor(e.getType()));return i<l(e,r)}function l(e,s){var u=NaN;if(!e)return u;var l=e.getType(),c=e.getRepresentationInfo();if(l===o["default"].FRAGMENTED_TEXT)u=i.isTextEnabled()?c.fragmentDuration:0;else if(l===o["default"].AUDIO&&s){var d=t.getCurrentBufferLevel(n.getReadOnlyMetricsFor(o["default"].VIDEO));u=isNaN(c.fragmentDuration)?d:Math.max(d,c.fragmentDuration)}else{var f=c.mediaInfo.streamInfo;if(a.isPlayingAtTopQuality(f)){var h=f.manifestInfo.duration>=r.getLongFormContentDurationThreshold();u=h?r.getBufferTimeAtTopQualityLongForm():r.getBufferTimeAtTopQuality()}else u=r.getStableBufferTime()}return u}var c={execute:u,getBufferTarget:l};return s(),c}u.__dashjs_factory_name="BufferLevelRule",t["default"]=s["default"].getClassFactory(u),e.exports=t["default"]},9138:function(e,t,n){e.exports=n("35e8")},9152:function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+d],d+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+d],d+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=l}return(h?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+d>=1?f/u:f*Math.pow(2,1-d),t*u>=2&&(a++,u/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(t*u-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+h]=255&a,h+=p,a/=256,l-=8);e[n+h-p]|=128*m}},"931f":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("9485"),s=r(a),u=8;function l(){var e=[],t=[];function n(n){n.newValue===s["default"].NO_CHANGE&&(n.newValue=n.oldValue),e[n.oldValue]||(e[n.oldValue]={noDrops:0,drops:0,dropSize:0});var r=n.newValue-n.oldValue,i=r<0?1:0,o=i?-r:0,a=i?0:1;if(e[n.oldValue].drops+=i,e[n.oldValue].dropSize+=o,e[n.oldValue].noDrops+=a,t.push({idx:n.oldValue,noDrop:a,drop:i,dropSize:o}),t.length>u){var l=t.shift();e[l.idx].drops-=l.drop,e[l.idx].dropSize-=l.dropSize,e[l.idx].noDrops-=l.noDrop}}function r(){return e}function i(){e=[],t=[]}return{push:n,getSwitchRequests:r,reset:i}}l.__dashjs_factory_name="SwitchRequestHistory";var c=o["default"].getClassFactory(l);t["default"]=c,e.exports=t["default"]},9485:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=-1,s={DEFAULT:.5,STRONG:1,WEAK:0};function u(e,t,n){var r=void 0,i=void 0,o=void 0,u=void 0;function l(e){var t=s.DEFAULT;return e!==s.DEFAULT&&e!==s.STRONG&&e!==s.WEAK||(t=e),t}return i=void 0===e?a:e,o=l(n),u=void 0===t?null:t,r={quality:i,reason:u,priority:o},r}u.__dashjs_factory_name="SwitchRequest";var l=o["default"].getClassFactory(u);l.NO_CHANGE=a,l.PRIORITY=s,o["default"].updateClassFactory(u.__dashjs_factory_name,l),t["default"]=l,e.exports=t["default"]},"95b9":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN};t["default"]=i,e.exports=t["default"]},"966d":function(e,t,n){"use strict";(function(t){function n(e,n,r,i){if("function"!==typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,r)}));case 4:return t.nextTick((function(){e.call(null,n,r,i)}));default:o=new Array(s-1),a=0;while(a<o.length)o[a++]=arguments[a];return t.nextTick((function(){e.apply(null,o)}))}}"undefined"===typeof t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:n}:e.exports=t}).call(this,n("f28c"))},"96cf":function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),a=new D(r||[]);return o._invoke=w(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}e.wrap=u;var c="suspendedStart",d="suspendedYield",f="executing",h="completed",p={};function m(){}function g(){}function y(){}var v={};v[o]=function(){return this};var _=Object.getPrototypeOf,E=_&&_(_(R([])));E&&E!==n&&r.call(E,o)&&(v=E);var b=y.prototype=m.prototype=Object.create(v);function T(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function S(e){function t(n,i,o,a){var s=l(e[n],e,i);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"===typeof c&&r.call(c,"__await")?Promise.resolve(c.__await).then((function(e){t("next",e,o,a)}),(function(e){t("throw",e,o,a)})):Promise.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return t("throw",e,o,a)}))}a(s.arg)}var n;function i(e,r){function i(){return new Promise((function(n,i){t(e,r,n,i)}))}return n=n?n.then(i,i):i()}this._invoke=i}function w(e,t,n){var r=c;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return M()}n.method=i,n.arg=o;while(1){var a=n.delegate;if(a){var s=x(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===c)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?h:d,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}function x(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator["return"]&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function R(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){while(++i<e.length)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:M}}function M(){return{value:t,done:!0}}return g.prototype=b.constructor=y,y.constructor=g,y[s]=g.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},T(S.prototype),S.prototype[a]=function(){return this},e.AsyncIterator=S,e.async=function(t,n,r,i){var o=new S(u(t,n,r,i));return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(b),b[s]="Generator",b[o]=function(){return this},b.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=R,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},9859:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("e172"),o=r(i),a=n("8a43"),s=r(a),u=n("1d48"),l=r(u),c=n("5d1b"),d=r(c),f=n("15a2"),h=r(f),p=n("3cd4"),m=r(p),g=n("467b"),y=r(g),v=n("6a2d"),_=r(v),E=n("2f4d"),b=r(E);function T(){var e=this.context,t=(0,s["default"])(e).getInstance(),n=void 0,r=void 0,i=void 0,a=void 0,u=void 0,c=void 0;function f(){i=(0,d["default"])(e).create({updateEventName:l["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:l["default"].SERVICE_LOCATION_BLACKLIST_ADD}),a=(0,m["default"])(e).create({blacklistController:i}),u=(0,h["default"])(e).create({blacklistController:i}),c=a}function p(e){e.selector&&(c=e.selector),e.dashManifestModel&&(n=e.dashManifestModel)}function g(){if(!n||!n.hasOwnProperty("getIsDVB"))throw new Error(b["default"].MISSING_CONFIG_ERROR)}function y(e){g(),c=n.getIsDVB(e)?u:a}function v(e){if(e){var n=e.baseUrls,r=e.selectedIdx;if(!isNaN(r))return n[r];var i=c.select(n);return i?(e.selectedIdx=n.indexOf(i),i):(t.trigger(l["default"].URL_RESOLUTION_FAILED,{error:new _["default"](o["default"].URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,o["default"].URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(c===a&&E()))}}function E(){i.reset()}return r={chooseSelectorFromManifest:y,select:v,reset:E,setConfig:p},f(),r}T.__dashjs_factory_name="BaseURLSelector",t["default"]=y["default"].getClassFactory(T),e.exports=t["default"]},9893:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.loadingRequests=[],this.executedRequests=[]};t["default"]=i,e.exports=t["default"]},"9ad3":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n("e09e"),s=i(a),u=function(){function e(){o(this,e),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}return r(e,null,[{key:"hasInitialization",value:function(e){return null!==e.initialization||null!==e.range}},{key:"hasSegments",value:function(e){return e.segmentInfoType!==s["default"].BASE_URL&&e.segmentInfoType!==s["default"].SEGMENT_BASE&&!e.indexRange}}]),e}();t["default"]=u,e.exports=t["default"]},"9b43":function(e,t,n){var r=n("d8e8");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},"9c6c":function(e,t,n){var r=n("2b4c")("unscopables"),i=Array.prototype;void 0==i[r]&&n("32e9")(i,r,{}),e.exports=function(e){i[r][e]=!0}},"9c80":function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},"9c97":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("0d27"),o=r(i);function a(e){e=e||{};var t=[],n=void 0,r=this.context,i=e.eventBus,a=e.events,s=(0,o["default"])(r).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});function u(e){t.forEach((function(t){t.handleNewMetric(e.metric,e.value,e.mediaType)}))}function l(e,r){e.split(",").forEach((function(e,n,i){var o=void 0;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){var a=i[n+1];a&&-1===a.indexOf("(")&&-1!==a.indexOf(")")&&(e+=","+a,delete i[n+1])}o=s.create(e,r),o&&t.push(o)})),i.on(a.METRIC_ADDED,u,n),i.on(a.METRIC_UPDATED,u,n)}function c(){i.off(a.METRIC_ADDED,u,n),i.off(a.METRIC_UPDATED,u,n),t.forEach((function(e){return e.reset()})),t=[]}return n={initialize:l,reset:c},n}a.__dashjs_factory_name="MetricsHandlersController",t["default"]=dashjs.FactoryMaker.getClassFactory(a),e.exports=t["default"]},"9def":function(e,t,n){var r=n("4588"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},"9e1e":function(e,t,n){e.exports=!n("79e5")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},"9ee1":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null};i.DEFAULT_ID="defaultId",t["default"]=i,e.exports=t["default"]},a083:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("2f4d"),s=r(a),u=n("5beb");function l(e,t){e=e||{};var n=e.timelineConverter,r=void 0;function i(){if(!n||!n.hasOwnProperty("calcMediaTimeFromPresentationTime")||!n.hasOwnProperty("calcSegmentAvailabilityRange"))throw new Error(s["default"].MISSING_CONFIG_ERROR)}function o(e,r,o,a){if(i(),!e)throw new Error("no representation");void 0===r&&(r=null);var s=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,l=s.SegmentTimeline,c=s.SegmentURL_asArray,d=e.availableSegmentsNumber>0,f=void 0;f=a||(o>-1||null!==r?10:1/0);var h=0,p=0,m=-1,g=[],y=null,v=void 0,_=void 0,E=void 0,b=void 0,T=void 0,S=void 0,w=void 0,x=void 0,I=void 0,A=void 0,D=void 0,R=function(r,i){var o=s.media,a=r.mediaRange;return c&&(o=c[i].media||"",a=c[i].mediaRange),(0,u.getTimeBasedSegment)(n,t,e,h,r.d,D,o,a,m,r.tManifest)};for(D=e.timescale,v=l.S_asArray,A=o,null!==r&&(y=n.calcMediaTimeFromPresentationTime(r,e)),E=0,b=v.length;E<b;E++){if(_=v[E],S=0,_.hasOwnProperty("r")&&(S=_.r),_.hasOwnProperty("t")&&(h=_.t,p=h/D),S<0){if(x=v[E+1],x&&x.hasOwnProperty("t"))w=x.t/D;else{var M=e.segmentAvailabilityRange?e.segmentAvailabilityRange.end:n.calcSegmentAvailabilityRange(e,t).end;w=n.calcMediaTimeFromPresentationTime(M,e),e.segmentDuration=_.d/D}S=Math.ceil((w-p)/(_.d/D))-1}if(I){if(d)break;m+=S+1}else for(T=0;T<=S;T++)if(m++,g.length>f){if(I=!0,d)break}else null!==y?p>=y-_.d/D*1.5&&g.push(R(_,m)):m>=A&&g.push(R(_,m)),h+=_.d,p=h/D}return d||(e.availableSegmentsNumber=m+1),g}return r={getSegments:o},r}l.__dashjs_factory_name="TimelineSegmentsGetter";var c=o["default"].getClassFactory(l);t["default"]=c,e.exports=t["default"]},a159:function(e,t,n){var r=n("e4ae"),i=n("7e90"),o=n("1691"),a=n("5559")("IE_PROTO"),s=function(){},u="prototype",l=function(){var e,t=n("1ec9")("iframe"),r=o.length,i="<",a=">";t.style.display="none",n("32fc").appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+a+"document.F=Object"+i+"/script"+a),e.close(),l=e.F;while(r--)delete l[u][o[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[u]=r(e),n=new s,s[u]=null,n[a]=e):n=l(),void 0===t?n:i(n,t)}},a22a:function(e,t,n){var r=n("d864"),i=n("b0dc"),o=n("3702"),a=n("e4ae"),s=n("b447"),u=n("7cd6"),l={},c={};t=e.exports=function(e,t,n,d,f){var h,p,m,g,y=f?function(){return e}:u(e),v=r(n,d,t?2:1),_=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(h=s(e.length);h>_;_++)if(g=t?v(a(p=e[_])[0],p[1]):v(e[_]),g===l||g===c)return g}else for(m=y.call(e);!(p=m.next()).done;)if(g=i(m,v,p.value,t),g===l||g===c)return g};t.BREAK=l,t.RETURN=c},a25f:function(e,t,n){var r=n("7726"),i=r.navigator;e.exports=i&&i.userAgent||""},a512:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("8d11"),o=r(i);function a(e){e=e||{};var t=void 0,n=void 0,r=void 0,i=void 0,a=void 0,s=void 0,u=[],l=(0,o["default"])(this.context).getInstance(),c=e.metricsConstants;function d(){var e=u;e.length&&n&&n.report(a,e),u=[]}function f(e,t,o,u){t&&(r=l.validateN(o),n=t,u&&u.length&&(i=u),a=l.reconstructFullMetricName(e,o,u),s=setInterval(d,r))}function h(){clearInterval(s),s=null,r=null,i=null,u=[],n=null}function p(e,t){e===c.HTTP_REQUEST&&(i&&i!==t.type||u.push(t))}return t={initialize:f,reset:h,handleNewMetric:p},t}a.__dashjs_factory_name="HttpListHandler",t["default"]=dashjs.FactoryMaker.getClassFactory(a),e.exports=t["default"]},a5b8:function(e,t,n){"use strict";var r=n("d8e8");function i(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},a679:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.schemeIdUri="",this.value=""};t["default"]=i,e.exports=t["default"]},aae3:function(e,t,n){var r=n("d3f4"),i=n("2d95"),o=n("2b4c")("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},aba2:function(e,t,n){var r=n("e53d"),i=n("4178").set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n("6b4c")(a);e.exports=function(){var e,t,n,l=function(){var r,i;u&&(r=a.domain)&&r.exit();while(e){i=e.fn,e=e.next;try{i()}catch(o){throw e?n():t=void 0,o}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(l)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);n=function(){c.then(l)}}else n=function(){i.call(r,l)};else{var d=!0,f=document.createTextNode("");new o(l).observe(f,{characterData:!0}),n=function(){f.data=d=!d}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},ac6a:function(e,t,n){for(var r=n("cadf"),i=n("0d58"),o=n("2aba"),a=n("7726"),s=n("32e9"),u=n("84f2"),l=n("2b4c"),c=l("iterator"),d=l("toStringTag"),f=u.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(h),m=0;m<p.length;m++){var g,y=p[m],v=h[y],_=a[y],E=_&&_.prototype;if(E&&(E[c]||s(E,c,f),E[d]||s(E,d,y),u[y]=f,v))for(g in r)E[g]||o(E,g,r[g],!0)}},ace9:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("9485"),s=r(a),u=n("589e"),l=r(u);function c(){var e=this.context,t=void 0,n=void 0,r=.15,i=375;function o(){n=(0,l["default"])(e).getInstance().getLogger(t)}function a(t){var o=t.getDroppedFramesHistory();if(o){for(var a=o.getFrameHistory(),u=0,l=0,c=s["default"].NO_CHANGE,d=1;d<a.length;d++)if(a[d]&&(u=a[d].droppedVideoFrames,l=a[d].totalVideoFrames,l>i&&u/l>r)){c=d-1,n.debug("index: "+c+" Dropped Frames: "+u+" Total Frames: "+l);break}return(0,s["default"])(e).create(c,{droppedFrames:u})}return(0,s["default"])(e).create()}return t={getMaxIndex:a},o(),t}c.__dashjs_factory_name="DroppedFramesRule",t["default"]=o["default"].getClassFactory(c),e.exports=t["default"]},ad14:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("8a43"),o=r(i),a=n("1d48"),s=r(a),u=n("467b"),l=r(u);function c(){var e=this.context,t=(0,o["default"])(e).getInstance(),n=void 0,r=void 0,i=void 0,a=void 0;function u(){I(),t.on(s["default"].TIME_SYNCHRONIZATION_COMPLETED,w,this)}function l(){return i}function c(e){i=e}function d(){return r}function f(e){r=e}function h(){return a}function p(e){a=e}function m(e,t,n,i){var o=NaN;return o=i?n&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*(e-r)):t.availabilityStartTime,o}function g(e,t,n){return m.call(this,e,t,n)}function y(e,t,n){return m.call(this,e,t,n,!0)}function v(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*r)/1e3}function _(e,t){var n=t.adaptation.period.start,r=t.presentationTimeOffset;return e+(n-r)}function E(e,t){var n=t.adaptation.period.start,r=t.presentationTimeOffset;return e-n+r}function b(e,t){var n=void 0,r=void 0,i=void 0;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,r=e.presentationStartTime+n,i=new Date(e.availabilityStartTime.getTime()+1e3*r)),i}function T(e,t){var n=e.adaptation.period,r={start:n.start,end:n.start+n.duration};if(!t)return r;if(!i&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var o=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),a=v(new Date,n),s=n.start+n.duration;r.start=Math.max(a-n.mpd.timeShiftBufferDepth,n.start);var u=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<o?o-e.availabilityTimeOffset:o;return r.end=a>=s&&a-u<s?s:a-u,r}function S(e,t){var n=e.adaptation.period.start;return t-n}function w(e){i||void 0!==e.offset&&(f(e.offset/1e3),i=!0)}function x(e){var t=e.presentationTimeOffset,n=e.adaptation.period.start;return n-t}function I(){r=0,i=!1,a=NaN}function A(){t.off(s["default"].TIME_SYNCHRONIZATION_COMPLETED,w,this),I()}return n={initialize:u,isTimeSyncCompleted:l,setTimeSyncCompleted:c,getClientTimeOffset:d,setClientTimeOffset:f,getExpectedLiveEdge:h,setExpectedLiveEdge:p,calcAvailabilityStartTimeFromPresentationTime:g,calcAvailabilityEndTimeFromPresentationTime:y,calcPresentationTimeFromWallTime:v,calcPresentationTimeFromMediaTime:_,calcPeriodRelativeTimeFromMpdRelativeTime:S,calcMediaTimeFromPresentationTime:E,calcSegmentAvailabilityRange:T,calcWallTimeForSegment:b,calcMSETimeOffset:x,reset:A},n}c.__dashjs_factory_name="TimelineConverter",t["default"]=l["default"].getSingletonFactory(c),e.exports=t["default"]},ad71:function(e,t,n){"use strict";(function(t,r){var i=n("966d");e.exports=T;var o,a=n("e3db");T.ReadableState=b;n("faa1").EventEmitter;var s=function(e,t){return e.listeners(t).length},u=n("429b"),l=n("8707").Buffer,c=t.Uint8Array||function(){};function d(e){return l.from(e)}function f(e){return l.isBuffer(e)||e instanceof c}var h=n("3a7c");h.inherits=n("3fb5");var p=n(1),m=void 0;m=p&&p.debuglog?p.debuglog("stream"):function(){};var g,y=n("5e1a"),v=n("4681");h.inherits(T,u);var _=["error","close","destroy","pause","resume"];function E(e,t,n){if("function"===typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function b(e,t){o=o||n("b19a"),e=e||{};var r=t instanceof o;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,a=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(g||(g=n("7d72").StringDecoder),this.decoder=new g(e.encoding),this.encoding=e.encoding)}function T(e){if(o=o||n("b19a"),!(this instanceof T))return new T(e);this._readableState=new b(e,this),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function S(e,t,n,r,i){var o,a=e._readableState;null===t?(a.reading=!1,M(e,a)):(i||(o=x(a,t)),o?e.emit("error",o):a.objectMode||t&&t.length>0?("string"===typeof t||a.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=d(t)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?w(e,a,t,!1):L(e,a)):w(e,a,t,!1))):r||(a.reading=!1));return I(a)}function w(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&C(e)),L(e,t)}function x(e,t){var n;return f(t)||"string"===typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function I(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}Object.defineProperty(T.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),T.prototype.destroy=v.destroy,T.prototype._undestroy=v.undestroy,T.prototype._destroy=function(e,t){this.push(null),t(e)},T.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"===typeof e&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=l.from(e,t),t=""),n=!0),S(this,e,t,!1,n)},T.prototype.unshift=function(e){return S(this,e,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},T.prototype.setEncoding=function(e){return g||(g=n("7d72").StringDecoder),this._readableState.decoder=new g(e),this._readableState.encoding=e,this};var A=8388608;function D(e){return e>=A?e=A:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function R(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=D(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function M(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,C(e)}}function C(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(m("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(N,e):N(e))}function N(e){m("emit readable"),e.emit("readable"),U(e)}function L(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(P,e,t))}function P(e,t){var n=t.length;while(!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark){if(m("maybeReadMore read 0"),e.read(0),n===t.length)break;n=t.length}t.readingMore=!1}function O(e){return function(){var t=e._readableState;m("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,U(e))}}function F(e){m("readable nexttick read 0"),e.read(0)}function k(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(B,e,t))}function B(e,t){t.reading||(m("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),U(e),t.flowing&&!t.reading&&e.read(0)}function U(e){var t=e._readableState;m("flow",t.flowing);while(t.flowing&&null!==e.read());}function H(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=j(e,t.buffer,t.decoder),n);var n}function j(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?K(e,t):V(e,t),r}function K(e,t){var n=t.head,r=1,i=n.data;e-=i.length;while(n=n.next){var o=n.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),e-=a,0===e){a===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++r}return t.length-=r,i}function V(e,t){var n=l.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;while(r=r.next){var o=r.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),e-=a,0===e){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}function q(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(G,t,e))}function G(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function Y(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}T.prototype.read=function(e){m("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return m("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?q(this):C(this),null;if(e=R(e,t),0===e&&t.ended)return 0===t.length&&q(this),null;var r,i=t.needReadable;return m("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,m("length less than watermark",i)),t.ended||t.reading?(i=!1,m("reading or ended",i)):i&&(m("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=R(n,t))),r=e>0?H(e,t):null,null===r?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&q(this)),null!==r&&this.emit("data",r),r},T.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},T.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e);break}o.pipesCount+=1,m("pipe count=%d opts=%j",o.pipesCount,t);var a=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr,u=a?c:b;function l(e,t){m("onunpipe"),e===n&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,h())}function c(){m("onend"),e.end()}o.endEmitted?i.nextTick(u):n.once("end",u),e.on("unpipe",l);var d=O(n);e.on("drain",d);var f=!1;function h(){m("cleanup"),e.removeListener("close",v),e.removeListener("finish",_),e.removeListener("drain",d),e.removeListener("error",y),e.removeListener("unpipe",l),n.removeListener("end",c),n.removeListener("end",b),n.removeListener("data",g),f=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||d()}var p=!1;function g(t){m("ondata"),p=!1;var r=e.write(t);!1!==r||p||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==Y(o.pipes,e))&&!f&&(m("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function y(t){m("onerror",t),b(),e.removeListener("error",y),0===s(e,"error")&&e.emit("error",t)}function v(){e.removeListener("finish",_),b()}function _(){m("onfinish"),e.removeListener("close",v),b()}function b(){m("unpipe"),n.unpipe(e)}return n.on("data",g),E(e,"error",y),e.once("close",v),e.once("finish",_),e.emit("pipe",n),o.flowing||(m("pipe resume"),n.resume()),e},T.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=Y(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},T.prototype.on=function(e,t){var n=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&C(this):i.nextTick(F,this))}return n},T.prototype.addListener=T.prototype.on,T.prototype.resume=function(){var e=this._readableState;return e.flowing||(m("resume"),e.flowing=!0,k(this,e)),this},T.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this},T.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(m("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){if(m("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)){var o=t.push(i);o||(r=!0,e.pause())}})),e)void 0===this[i]&&"function"===typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<_.length;o++)e.on(_[o],this.emit.bind(this,_[o]));return this._read=function(t){m("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),T._fromList=H}).call(this,n("c8ba"),n("f28c"))},ae98:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n("5b8d"),a=r(o),s=n("467b"),u=r(s),l=NaN,c=function e(t,n){i(this,e),this.data={baseUrls:t||null,selectedIdx:n||l},this.children=[]};function d(){var e=void 0,t=void 0,n=void 0,r=this.context,i=(0,a["default"])(r).getInstance();function o(){g()}function s(e){e.dashManifestModel&&(n=e.dashManifestModel)}function u(){if(!n||!n.hasOwnProperty("getBaseURLsFromElement")||!n.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}function d(e,t,r){var o=n.getBaseURLsFromElement(r);e[t]?i.areEqual(o,e[t].data.baseUrls)||(e[t].data.baseUrls=o,e[t].data.selectedIdx=l):e[t]=new c(o)}function f(e){u();var r=n.getBaseURLsFromElement(e);i.areEqual(r,t.data.baseUrls)||(t.data.baseUrls=r,t.data.selectedIdx=l),e&&e.Period_asArray&&e.Period_asArray.forEach((function(e,r){d(t.children,r,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach((function(e,i){d(t.children[r].children,i,e),e.Representation_asArray&&e.Representation_asArray.sort(n.getRepresentationSortFunction()).forEach((function(e,n){d(t.children[r].children[i].children,n,e)}))}))}))}function h(e,n){var r=n||t;e(r.data),r.children&&r.children.forEach((function(t){return h(e,t)}))}function p(e){h((function(t){isNaN(t.selectedIdx)||e===t.baseUrls[t.selectedIdx].serviceLocation&&(t.selectedIdx=l)}))}function m(e){f(e)}function g(){t=new c}function y(e){var n=t,r=[n.data];return e&&e.forEach((function(e){n=n.children[e],n&&r.push(n.data)})),r.filter((function(e){return e.baseUrls.length}))}return e={reset:g,update:m,getForPath:y,invalidateSelectedIndexes:p,setConfig:s},o(),e}d.__dashjs_factory_name="BaseURLTreeModel",t["default"]=u["default"].getClassFactory(d),e.exports=t["default"]},aebd:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},aef8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("c287"),u=i(s),l=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,c=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,(function(e){return l.test(e.value)}),(function(e){return parseFloat(e)}))}return a(t,e),t}(u["default"]);t["default"]=c,e.exports=t["default"]},b048:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n("4f3c"),s=i(a),u=function(){function e(t,n,r){var i=this;o(this,e),this._name=t||"",this._properties=[],this._children=r||[],Array.isArray(n)&&n.forEach((function(e){i._properties.push(new s["default"](e))}))}return r(e,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),e}();t["default"]=u,e.exports=t["default"]},b0c5:function(e,t,n){"use strict";var r=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},b0dc:function(e,t,n){var r=n("e4ae");e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(a){var o=e["return"];throw void 0!==o&&r(o.call(e)),a}}},b19a:function(e,t,n){"use strict";var r=n("966d"),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=d;var o=n("3a7c");o.inherits=n("3fb5");var a=n("ad71"),s=n("dc14");o.inherits(d,a);for(var u=i(s.prototype),l=0;l<u.length;l++){var c=u[l];d.prototype[c]||(d.prototype[c]=s.prototype[c])}function d(e){if(!(this instanceof d))return new d(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),d.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},b2c3:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("e09e"),s=r(a),u=n("7f3c"),l=r(u),c=n("d82e"),d=r(c),f=n("8edf"),h=r(f),p=n("7737"),m=r(p),g=n("473d"),y=r(g),v=n("467b"),_=r(v),E=n("db66"),b=r(E),T=n("71a8");function S(){var e=void 0,t=void 0,n=void 0,r=void 0,i=void 0;function a(){q()}function u(e){e&&e.dashManifestModel&&(t=e.dashManifestModel)}function c(e,t){return t&&e?t.getRepresentationForQuality(e.quality):null}function f(e){return e&&e.streamInfo&&void 0!==e.streamInfo.id&&r[e.streamInfo.id]?r[e.streamInfo.id][e.index]:null}function p(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r];if(e.id===i.id)return i}return null}function g(e){var n=new l["default"],r=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],i=t.getRepresentationFor(e.index,r);return n.id=e.id,n.quality=e.index,n.bandwidth=t.getBandwidth(i),n.DVRWindow=e.segmentAvailabilityRange,n.fragmentDuration=e.segmentDuration||(e.segments&&e.segments.length>0?e.segments[0].duration:NaN),n.MSETimeOffset=e.MSETimeOffset,n.useCalculatedLiveEdgeTime=e.useCalculatedLiveEdgeTime,n.mediaInfo=v(e.adaptation),n}function v(e){var n=new d["default"],r=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index],i=void 0;return n.id=e.id,n.index=e.index,n.type=e.type,n.streamInfo=S(e.period),n.representationCount=t.getRepresentationCount(r),n.labels=t.getLabelsForAdaptation(r),n.lang=t.getLanguageForAdaptation(r),i=t.getViewpointForAdaptation(r),n.viewpoint=i?i.value:void 0,n.accessibility=t.getAccessibilityForAdaptation(r).map((function(e){var t=e.value,r=t;return e.schemeIdUri&&e.schemeIdUri.search("cea-608")>=0&&"undefined"!==typeof b["default"]&&(r=t?"cea-608:"+t:"cea-608",n.embeddedCaptions=!0),r})),n.audioChannelConfiguration=t.getAudioChannelConfigurationForAdaptation(r).map((function(e){return e.value})),n.roles=t.getRolesForAdaptation(r).map((function(e){return e.value})),n.codec=t.getCodec(r),n.mimeType=t.getMimeType(r),n.contentProtection=t.getContentProtectionData(r),n.bitrateList=t.getBitrateListForAdaptation(r),n.contentProtection&&n.contentProtection.forEach((function(e){e.KID=t.getKID(e)})),n.isText=t.getIsTextTrack(n.mimeType),n}function _(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=o["default"].EMBEDDED_TEXT,e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=n,e.roles=["caption"]}function E(e){e.type=o["default"].IMAGE}function S(e){var t=new h["default"],n=1;return t.id=e.id,t.index=e.index,t.start=e.start,t.duration=e.duration,t.manifestInfo=w(e.mpd),t.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(t.start+t.duration-t.manifestInfo.duration)<n,t}function w(e){var n=new m["default"];return n.DVRWindowSize=e.timeShiftBufferDepth,n.loadedTime=e.manifest.loadedTime,n.availableFrom=e.availabilityStartTime,n.minBufferTime=e.manifest.minBufferTime,n.maxFragmentDuration=e.maxSegmentDuration,n.duration=t.getDuration(e.manifest),n.isDynamic=t.getIsDynamic(e.manifest),n}function x(e,i){if(0===n.length)return null;var o=n[0].mpd.manifest,a=A(o,e.index,i,e);if(!a)return null;var s=p(e,n),u=s.id,l=t.getIndexForAdaptation(a,o,e.index);return r[u]=r[u]||t.getAdaptationsForPeriod(s),v(r[u][l])}function I(e){return t.getRolesForAdaptation(e).filter((function(e){return e.value===s["default"].MAIN}))[0]}function A(e,n,r,o){var a=t.getAdaptationsForType(e,n,r);if(!a||0===a.length)return null;if(a.length>1&&o){var s=D(o,r);if(i[o.id]&&i[o.id][r])for(var u=0,l=a.length;u<l;u++)if(i[o.id][r].isMediaInfoEqual(s[u]))return a[u];for(u=0,l=a.length;u<l;u++)if(I(a[u]))return a[u]}return a[0]}function D(e,i,a){var s=n,u=a,l=[],c=void 0,d=void 0,f=void 0,h=void 0,m=void 0,g=void 0;if(u){R();var y=t.getMpd(u);s=t.getRegularPeriods(y)}else{if(!(n.length>0))return l;u=n[0].mpd.manifest}var b=p(e,s),T=b.id,S=t.getAdaptationsForType(u,e.index,i!==o["default"].EMBEDDED_TEXT?i:o["default"].VIDEO);if(!S)return l;for(r[T]=r[T]||t.getAdaptationsForPeriod(b),h=0,g=S.length;h<g;h++)if(c=S[h],f=t.getIndexForAdaptation(c,u,e.index),d=v(r[T][f]),i===o["default"].EMBEDDED_TEXT){var w=d.accessibility.length;for(m=0;m<w;m++)if(d){var x=d.accessibility[m];if(0===x.indexOf("cea-608:")){var I=x.substring(8),A=I.split(";");if("CC"===A[0].substring(0,2))for(m=0;m<A.length;m++)d||(d=v.call(this,r[T][f])),_(d,A[m].substring(0,3),A[m].substring(4)),l.push(d),d=null;else for(m=0;m<A.length;m++)d||(d=v.call(this,r[T][f])),_(d,"CC"+(m+1),A[m]),l.push(d),d=null}else 0===x.indexOf("cea-608")&&(_(d,o["default"].CC1,"eng"),l.push(d),d=null)}}else i===o["default"].IMAGE?(E(d),l.push(d),d=null):d&&l.push(d);return l}function R(){if(!t||!t.hasOwnProperty("getMpd")||!t.hasOwnProperty("getRegularPeriods"))throw new Error("setConfig function has to be called previously")}function M(e){if(!e)return null;R();var i=t.getMpd(e);n=t.getRegularPeriods(i),r={}}function C(e,r){var i=[],o=n;if(e){R();var a=t.getMpd(e);o=t.getRegularPeriods(a)}r||(r=o.length);for(var s=0;s<r;s++)i.push(S(o[s]));return i}function N(e){if(!e||!e.hasOwnProperty("getRepresentationController")||!e.hasOwnProperty("getIndexHandler")||!e.hasOwnProperty("getMediaInfo")||!e.hasOwnProperty("getType")||!e.hasOwnProperty("getStreamInfo"))throw new Error("streamProcessor parameter is missing or malformed!")}function L(e){if(!e||!e.hasOwnProperty("getRepresentationForQuality")||!e.hasOwnProperty("getCurrentRepresentation"))throw new Error("representationController parameter is missing or malformed!")}function P(e,t){var n=void 0,r=void 0,i=void 0;return N(e),(0,T.checkInteger)(t),n=e.getRepresentationController(),i=e.getIndexHandler(),r=n?n.getRepresentationForQuality(t):null,i?i.getInitRequest(r):null}function O(e,t,n,r){var i=void 0,o=void 0,a=void 0,s=null;return N(e),i=e.getRepresentationController(),o=c(t,i),a=e.getIndexHandler(),a&&(s=void 0!==n&&void 0!==r?a.getSegmentRequestForTime(o,n,r):a.getNextSegmentRequest(o)),s}function F(e){N(e);var t=e.getIndexHandler();return t?t.getCurrentTime():NaN}function k(e,t){N(e);var n=e.getIndexHandler();n&&n.setCurrentTime(t)}function B(e){N(e);var t=e.getIndexHandler();t&&t.resetIndex()}function U(e){N(e);var r=p(e.getStreamInfo(),n),i=e.getMediaInfo(),o=f(i),a=e.getType(),s=void 0,u=void 0;s=i?i.id:null,n.length>0&&(u=s?t.getAdaptationForId(s,n[0].mpd.manifest,r.index):t.getAdaptationForIndex(i.index,n[0].mpd.manifest,r.index),e.getRepresentationController().updateData(u,o,a))}function H(e,t){L(e);var n=void 0;return void 0!==t?((0,T.checkInteger)(t),n=e.getRepresentationForQuality(t)):n=e.getCurrentRepresentation(),n?g(n):null}function j(e,t,n){if(!e||!t)return null;var r=new y["default"],i=e.scheme_id_uri,o=e.value,a=e.timescale,s=e.presentation_time_delta,u=e.event_duration,l=e.id,c=e.message_data,d=n*a+s;return t[i+"/"+o]?(r.eventStream=t[i+"/"+o],r.eventStream.value=o,r.eventStream.timescale=a,r.duration=u,r.id=l,r.presentationTime=d,r.messageData=c,r.presentationTimeDelta=s,r):null}function K(e,r){var i=[];if(0===n.length)return i;var o=n[0].mpd.manifest;return e instanceof h["default"]?i=t.getEventsForPeriod(p(e,n)):e instanceof d["default"]?i=t.getEventStreamForAdaptationSet(o,f(e)):e instanceof l["default"]&&(i=t.getEventStreamForRepresentation(o,c(e,r.getRepresentationController()))),i}function V(e,t,n){i[e]=i[e]||{},i[e][t]=i[e][t]||{},i[e][t]=n}function q(){n=[],r={},i={}}return e={convertDataToRepresentationInfo:g,getDataForMedia:f,getStreamsInfo:C,getMediaInfoForType:x,getAllMediaInfoForType:D,getRepresentationInfo:H,getAdaptationForType:A,updateData:U,getInitRequest:P,getFragmentRequest:O,getIndexHandlerTime:F,setIndexHandlerTime:k,getEventsFor:K,getEvent:j,setConfig:u,updatePeriods:M,reset:q,resetIndexHandler:B,setCurrentMediaInfo:V},a(),e}S.__dashjs_factory_name="DashAdapter",t["default"]=_["default"].getSingletonFactory(S),e.exports=t["default"]},b39a:function(e,t,n){var r=n("d3f4");e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},b447:function(e,t,n){var r=n("3a38"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},b4be:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n,i,o){r(this,e),this.sessionToken=t,this.message=n,this.defaultURL=i,this.messageType=o||"license-request"};t["default"]=i,e.exports=t["default"]},b4f1:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i);function a(){var e=void 0;function t(e){return e}function n(e){return e}return e={modifyRequestURL:t,modifyRequestHeader:n},e}a.__dashjs_factory_name="RequestModifier",t["default"]=o["default"].getSingletonFactory(a),e.exports=t["default"]},b542:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("637b"),s=r(a),u=n("4e47"),l=r(u),c=n("cdb1"),d=r(c),f=n("b869"),h=r(f),p=n("8c53"),m=r(p),g=n("467b"),y=r(g),v=n("8019"),_=r(v);function E(e){e=e||{};var t=this.context,n=e.type,r=e.errHandler,i=e.mimeType,a=e.timelineConverter,u=e.adapter,c=e.manifestModel,f=e.mediaPlayerModel,p=e.stream,g=e.abrController,y=e.playbackController,v=e.streamController,E=e.mediaController,b=e.textController,T=e.domStorage,S=e.metricsModel,w=e.dashMetrics,x=e.dashManifestModel,I=void 0,A=void 0,D=void 0,R=void 0,M=void 0,C=void 0,N=void 0,L=void 0,P=void 0,O=void 0;function F(){y&&y.getIsDynamic()&&(C=(0,s["default"])(t).create({timelineConverter:a,streamProcessor:I})),K()}function k(o){O=(0,_["default"])(t).create({mimeType:i,timelineConverter:a,dashMetrics:w,metricsModel:S,mediaPlayerModel:f,baseURLController:e.baseURLController,errHandler:r}),O.initialize(I),g.registerStreamType(n,I),L=p.getFragmentController().getModel(n),L.setStreamProcessor(I),R=ye(n),M=(0,h["default"])(t).create({type:n,mimeType:i,metricsModel:S,adapter:u,dashMetrics:w,dashManifestModel:x,timelineConverter:a,mediaPlayerModel:f,abrController:g,playbackController:y,streamController:v,textController:b,streamProcessor:I,mediaController:E}),N=(0,m["default"])(t).create(),N.setConfig({abrController:g,domStorage:T,metricsModel:S,dashMetrics:w,dashManifestModel:x,manifestModel:c,playbackController:y,timelineConverter:a,streamProcessor:I}),R.initialize(o),M.initialize(),N.initialize()}function B(e){P.push(e)}function U(e){var t=P.indexOf(e);-1!==t&&P.splice(t,1)}function H(){return P}function j(){P=[]}function K(){D=[],A=null,j()}function V(e,t){O.reset(),R&&(R.reset(e,t),R=null),M&&(M.reset(),M=null),N&&(N.reset(),N=null),g&&g.unRegisterStreamType(n),P.forEach((function(e){e.reset()})),K(),n=null,p=null,C&&(C.reset(),C=null)}function q(){return!!N&&N.isUpdating()}function G(){return n}function Y(){return N}function z(){return O}function W(){return p?p.getFragmentController():null}function X(){return R.getBuffer()}function $(e){R.setBuffer(e)}function Q(){return R}function J(){return L}function Z(){return C}function ee(){return p?p.getStreamInfo():null}function te(e){p&&p.addInbandEvents(e)}function ne(e){e===A||e&&A&&e.type!==A.type||(A=e),u.updateData(this)}function re(e,t){-1===D.indexOf(e)&&D.push(e),t&&this.selectMediaInfo(e)}function ie(){return D}function oe(){return A}function ae(){return R.getMediaSource()}function se(e){R.setMediaSource(e,oe())}function ue(){R.dischargePreBuffer()}function le(){return M}function ce(e){return u.getRepresentationInfo(N,e)}function de(){return!!R&&R.getIsBufferingCompleted()}function fe(e){return!!R&&null!==R.getRangeAt(e,0)}function he(){return R.getBufferLevel()}function pe(e,t){R&&R.switchInitData(ee().id,e,t)}function me(e){return R.getBuffer()||R.createBuffer(A,e)}function ge(){M.switchTrackAsked()}function ye(e){var n=null;return n=e===o["default"].VIDEO||e===o["default"].AUDIO?(0,l["default"])(t).create({type:e,metricsModel:S,mediaPlayerModel:f,manifestModel:c,errHandler:r,streamController:v,mediaController:E,adapter:u,textController:b,abrController:g,playbackController:y,streamProcessor:I}):(0,d["default"])(t).create({type:e,mimeType:i,metricsModel:S,mediaPlayerModel:f,manifestModel:c,errHandler:r,streamController:v,mediaController:E,adapter:u,textController:b,abrController:g,playbackController:y,streamProcessor:I}),n}return I={initialize:k,isUpdating:q,getType:G,getBufferController:Q,getFragmentModel:J,getScheduleController:le,getLiveEdgeFinder:Z,getFragmentController:W,getRepresentationController:Y,getIndexHandler:z,getRepresentationInfo:ce,getBufferLevel:he,switchInitData:pe,isBufferingCompleted:de,timeIsBuffered:fe,createBuffer:me,getStreamInfo:ee,selectMediaInfo:ne,addMediaInfo:re,switchTrackAsked:ge,getMediaInfoArr:ie,getMediaInfo:oe,getMediaSource:ae,setMediaSource:se,dischargePreBuffer:ue,getBuffer:X,setBuffer:$,registerExternalController:B,unregisterExternalController:U,getExternalControllers:H,unregisterAllExternalController:j,addInbandEvents:te,reset:V},F(),I}E.__dashjs_factory_name="StreamProcessor",t["default"]=y["default"].getClassFactory(E),e.exports=t["default"]},b639:function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n("1fb5"),i=n("9152"),o=n("e3db");function a(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=l.prototype):(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?g(e,t,n,r):"string"===typeof t?p(e,t,n):y(e,t)}function d(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t,n,r){return d(t),t<=0?u(e,t):void 0!==n?"string"===typeof r?u(e,t).fill(n,r):u(e,t).fill(n):u(e,t)}function h(e,t){if(d(t),e=u(e,t<0?0:0|v(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t,n){if("string"===typeof n&&""!==n||(n="utf8"),!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|E(t,n);e=u(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function m(e,t){var n=t.length<0?0:0|v(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function g(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),l.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=l.prototype):e=m(e,t),e}function y(e,t){if(l.isBuffer(t)){var n=0|v(t.length);return e=u(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||te(t.length)?u(e,0):m(e,t);if("Buffer"===t.type&&o(t.data))return m(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function _(e){return+e!=e&&(e=0),l.alloc(+e)}function E(e,t){if(l.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(e).length;default:if(r)return $(e).length;t=(""+t).toLowerCase(),r=!0}}function b(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return k(this,t,n);case"utf8":case"utf-8":return N(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return F(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function T(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function S(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:w(e,t,n,r,i);if("number"===typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var d=!0,f=0;f<u;f++)if(l(e,o+f)!==l(t,f)){d=!1;break}if(d)return o}return-1}function x(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function I(e,t,n,r){return ee($(t,e.length-n),e,n,r)}function A(e,t,n,r){return ee(Q(t),e,n,r)}function D(e,t,n,r){return A(e,t,n,r)}function R(e,t,n,r){return ee(Z(t),e,n,r)}function M(e,t,n,r){return ee(J(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function N(e,t,n){n=Math.min(e.length,n);var r=[],i=t;while(i<n){var o,a,s,u,l=e[i],c=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=n)switch(d){case 1:l<128&&(c=l);break;case 2:o=e[i+1],128===(192&o)&&(u=(31&l)<<6|63&o,u>127&&(c=u));break;case 3:o=e[i+1],a=e[i+2],128===(192&o)&&128===(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a,u>2047&&(u<55296||u>57343)&&(c=u));break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s,u>65535&&u<1114112&&(c=u))}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=d}return P(r)}t.Buffer=l,t.SlowBuffer=_,t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:a(),t.kMaxLength=s(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return c(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return f(null,e,t,n)},l.allocUnsafe=function(e){return h(null,e)},l.allocUnsafeSlow=function(e){return h(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},l.byteLength=E,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)T(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)T(this,t,t+3),T(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)T(this,t,t+7),T(this,t+1,t+6),T(this,t+2,t+5),T(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?N(this,0,e):b.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,a=n-t,s=Math.min(o,a),u=this.slice(r,i),c=e.slice(t,n),d=0;d<s;++d)if(u[d]!==c[d]){o=u[d],a=c[d];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return S(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return S(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return x(this,e,t,n);case"utf8":case"utf-8":return I(this,e,t,n);case"ascii":return A(this,e,t,n);case"latin1":case"binary":return D(this,e,t,n);case"base64":return R(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;function P(e){var t=e.length;if(t<=L)return String.fromCharCode.apply(String,e);var n="",r=0;while(r<t)n+=String.fromCharCode.apply(String,e.slice(r,r+=L));return n}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function F(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function k(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=X(e[o]);return i}function B(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function U(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function H(e,t,n,r,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function j(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function K(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function V(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function q(e,t,n,r,o){return o||V(e,t,n,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,n,r,23,4),n+4}function G(e,t,n,r,o){return o||V(e,t,n,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n,r=this.length;if(e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=l.prototype;else{var i=t-e;n=new l(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);var r=this[e],i=1,o=0;while(++o<t&&(i*=256))r+=this[e+o]*i;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);var r=this[e+--t],i=1;while(t>0&&(i*=256))r+=this[e+--t]*i;return r},l.prototype.readUInt8=function(e,t){return t||U(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||U(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||U(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||U(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||U(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);var r=this[e],i=1,o=0;while(++o<t&&(i*=256))r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);var r=t,i=1,o=this[e+--r];while(r>0&&(i*=256))o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||U(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||U(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||U(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||U(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||U(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||U(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||U(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||U(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||U(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;H(this,e,t,n,i,0)}var o=1,a=0;this[t]=255&e;while(++a<n&&(o*=256))this[t+a]=e/o&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;H(this,e,t,n,i,0)}var o=n-1,a=1;this[t+o]=255&e;while(--o>=0&&(a*=256))this[t+o]=e/a&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):K(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):K(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);H(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;this[t]=255&e;while(++o<n&&(a*=256))e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);H(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;this[t+o]=255&e;while(--o>=0&&(a*=256))e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):K(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):K(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return q(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return q(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return G(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return G(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},l.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=l.isBuffer(e)?e:$(new l(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var Y=/[^+\/0-9A-Za-z-_]/g;function z(e){if(e=W(e).replace(Y,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function W(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function X(e){return e<16?"0"+e.toString(16):e.toString(16)}function $(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Q(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function J(e,t){for(var n,r,i,o=[],a=0;a<e.length;++a){if((t-=2)<0)break;n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r)}return o}function Z(e){return r.toByteArray(z(e))}function ee(e,t,n,r){for(var i=0;i<r;++i){if(i+n>=t.length||i>=e.length)break;t[i+n]=e[i]}return i}function te(e){return e!==e}}).call(this,n("c8ba"))},b69e:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("10fb"),o=r(i),a=n("c7a0"),s=r(a),u=n("e3b9"),l=r(u);function c(e){e=e||{};var t=void 0,n=e.dashManifestModel,r=e.constants;function i(e,t,i){var o,a,s=n.getMpd(e),u=0;return t?u=s.availabilityStartTime.getTime()/1e3:(o=this.getRegularPeriods(s),o.length&&(u=o[0].start)),a=u,i&&i.hasOwnProperty(r.START_TIME)&&(a+=i.starttime),a}function a(e){var t=[];return e.Metrics_asArray&&e.Metrics_asArray.forEach((function(a){var u=new o["default"],c=n.getIsDynamic(e);a.hasOwnProperty("metrics")&&(u.metrics=a.metrics,a.Range_asArray&&a.Range_asArray.forEach((function(t){var r=new s["default"];r.starttime=i(e,c,t),t.hasOwnProperty("duration")?r.duration=t.duration:r.duration=n.getDuration(e),r._useWallClockTime=c,u.Range.push(r)})),a.Reporting_asArray&&(a.Reporting_asArray.forEach((function(e){var t=new l["default"];if(e.hasOwnProperty(r.SCHEME_ID_URI)){for(var n in t.schemeIdUri=e.schemeIdUri,e)e.hasOwnProperty(n)&&(t[n]=e[n]);u.Reporting.push(t)}})),t.push(u)))})),t}return t={getMetrics:a},t}c.__dashjs_factory_name="ManifestParsing",t["default"]=dashjs.FactoryMaker.getSingletonFactory(c),e.exports=t["default"]},b762:function(e,t,n){(function(e,t,n,r){e.generateISD=function(e,t,n){var r=new u(e),i={};for(var a in e.head.layout.regions){var s=o(e,t,e.head.layout.regions[a],e.body,null,"",e.head.layout.regions[a],n,i);null!==s&&r.contents.push(s.element)}return r};var i=[n.byName.color.qname,n.byName.textCombine.qname,n.byName.textDecoration.qname,n.byName.textEmphasis.qname,n.byName.textOutline.qname,n.byName.textShadow.qname];function o(e,t,u,d,f,h,p,m,g){if(t<p.begin||t>=p.end)return null;var y="regionID"in p&&""!==p.regionID?p.regionID:h;if(null!==f&&y!==u.id&&(!("contents"in p)||"contents"in p&&0===p.contents.length||""!==y))return null;var v=new l(p);for(var _ in p.sets)t<p.sets[_].begin||t>=p.sets[_].end||(v.styleAttrs[p.sets[_].qname]=p.sets[_].value);var E,b={};for(var T in v.styleAttrs)if(b[T]=!0,T===n.byName.writingMode.qname&&!(n.byName.direction.qname in v.styleAttrs)){var S=v.styleAttrs[T];"lrtb"===S||"lr"===S?v.styleAttrs[n.byName.direction.qname]="ltr":"rltb"!==S&&"rl"!==S||(v.styleAttrs[n.byName.direction.qname]="rtl")}if(null!==f)for(var w in n.all){var x=n.all[w];if(x.qname===n.byName.textDecoration.qname){var I=f.styleAttrs[x.qname],A=v.styleAttrs[x.qname],D=[];void 0===A?D=I:-1===A.indexOf("none")?((-1===A.indexOf("noUnderline")&&-1!==I.indexOf("underline")||-1!==A.indexOf("underline"))&&D.push("underline"),(-1===A.indexOf("noLineThrough")&&-1!==I.indexOf("lineThrough")||-1!==A.indexOf("lineThrough"))&&D.push("lineThrough"),(-1===A.indexOf("noOverline")&&-1!==I.indexOf("overline")||-1!==A.indexOf("overline"))&&D.push("overline")):D.push("none"),v.styleAttrs[x.qname]=D}else if(x.qname!==n.byName.fontSize.qname||x.qname in v.styleAttrs||"span"!==v.kind||"textContainer"!==v.styleAttrs[n.byName.ruby.qname])if(x.qname!==n.byName.fontSize.qname||x.qname in v.styleAttrs||"span"!==v.kind||"text"!==v.styleAttrs[n.byName.ruby.qname])x.inherit&&x.qname in f.styleAttrs&&!(x.qname in v.styleAttrs)&&(v.styleAttrs[x.qname]=f.styleAttrs[x.qname]);else{var R=f.styleAttrs[n.byName.fontSize.qname];"textContainer"===f.styleAttrs[n.byName.ruby.qname]?v.styleAttrs[x.qname]=R:v.styleAttrs[x.qname]=new r.ComputedLength(.5*R.rw,.5*R.rh)}else{var M=f.styleAttrs[n.byName.fontSize.qname];v.styleAttrs[x.qname]=new r.ComputedLength(.5*M.rw,.5*M.rh)}}for(var C in n.all){var N=n.all[C];if(!(N.qname in v.styleAttrs)&&((N.qname!==n.byName.position.qname||!(n.byName.origin.qname in v.styleAttrs))&&(N.qname!==n.byName.origin.qname||!(n.byName.position.qname in v.styleAttrs)))){var L=e.head.styling.initials[N.qname]||N.initial;("region"===v.kind||!1===N.inherit&&null!==L)&&(v.styleAttrs[N.qname]=N.parse(L),b[N.qname]=!0)}}for(var P in n.all){var O=n.all[P];if(O.qname in b&&null!==O.compute){var F=O.compute(e,f,v,v.styleAttrs[O.qname],g);null!==F?v.styleAttrs[O.qname]=F:c(m,"Style '"+O.qname+"' on element '"+v.kind+"' cannot be computed")}}if("none"===v.styleAttrs[n.byName.display.qname])return null;for(var k in null===f?E=null===d?[]:[d]:"contents"in p&&(E=p.contents),E){var B=o(e,t,u,d,v,y,E[k],m,g);null!==B&&v.contents.push(B.element)}for(var U in v.styleAttrs){var H=!1;if("span"===v.kind){var j=v.styleAttrs[n.byName.ruby.qname];H=("container"===j||"textContainer"===j||"baseContainer"===j)&&-1!==i.indexOf(U),H||(H="container"!==j&&U===n.byName.rubyAlign.qname),H||(H=!("textContainer"===j||"text"===j)&&U===n.byName.rubyPosition.qname)}if(!H){var K=n.byQName[U];H=-1===K.applies.indexOf(v.kind)}H&&delete v.styleAttrs[U]}if("span"===v.kind&&v.text&&"default"===v.space){var V=v.text.replace(/[\t\r\n ]+/g," ");v.text=V}if("p"===v.kind){var q=[];a(v,q);var G=0,Y="after_br",z=0;while(1)if("after_br"===Y)G>=q.length||"br"===q[G].kind?(Y="before_br",z=G,G--):("preserve"!==q[G].space&&(q[G].text=q[G].text.replace(/^[\t\r\n ]+/g,"")),q[G].text.length>0?(Y="looking_br",G++):q.splice(G,1));else if("before_br"===Y)if(G<0||"br"===q[G].kind){if(Y="after_br",G=z+1,G>=q.length)break}else if("preserve"!==q[G].space&&(q[G].text=q[G].text.replace(/[\t\r\n ]+$/g,"")),q[G].text.length>0){if(Y="after_br",G=z+1,G>=q.length)break}else q.splice(G,1),G--;else G>=q.length||"br"===q[G].kind?(Y="before_br",z=G,G--):G++;s(v)}return"div"===v.kind&&n.byName.backgroundImage.qname in v.styleAttrs||"br"===v.kind||"image"===v.kind||"contents"in v&&v.contents.length>0||"span"===v.kind&&null!==v.text||"region"===v.kind&&"always"===v.styleAttrs[n.byName.showBackground.qname]?{region_id:y,element:v}:null}function a(e,t){if("contents"in e)for(var n in e.contents)a(e.contents[n],t);else"span"!==e.kind&&"br"!==e.kind||t.push(e)}function s(e){if("br"===e.kind)return!1;if("text"in e)return 0===e.text.length;if("contents"in e){var t=e.contents.length;while(t--)s(e.contents[t])&&e.contents.splice(t,1);return 0===e.contents.length}}function u(e){this.contents=[],this.aspectRatio=e.aspectRatio}function l(e){for(var t in this.kind=e.kind||"region",e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)this.styleAttrs[t]=e.styleAttrs[t];"src"in e&&(this.src=e.src),"type"in e&&(this.type=e.type),"text"in e?this.text=e.text:("region"===this.kind||"contents"in e)&&(this.contents=[]),"space"in e&&(this.space=e.space)}function c(e,t){if(e&&e.error&&e.error(t))throw t}})(t,"undefined"===typeof imscNames?n("597c"):imscNames,"undefined"===typeof imscStyles?n("faf0"):imscStyles,"undefined"===typeof imscUtils?n("ff7d"):imscUtils)},b7d1:function(e,t,n){(function(t){function n(e,t){if(r("noDeprecation"))return e;var n=!1;function i(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}return i}function r(e){try{if(!t.localStorage)return!1}catch(r){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=n}).call(this,n("c8ba"))},b869:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("df86"),s=n("36b1"),u=r(s),l=n("4e47"),c=r(l),d=n("90c5"),f=r(d),h=n("f5f5"),p=r(h),m=n("8e4c"),g=r(m),y=n("8a43"),v=r(y),_=n("1d48"),E=r(_),b=n("467b"),T=r(b),S=n("589e"),w=r(S),x=n("d665"),I=r(x),A=n("5beb");function D(e){e=e||{};var t=this.context,n=(0,v["default"])(t).getInstance(),r=e.metricsModel,i=e.adapter,s=e.dashMetrics,l=e.dashManifestModel,d=e.timelineConverter,h=e.mediaPlayerModel,m=e.abrController,y=e.playbackController,_=e.streamController,b=e.textController,T=e.type,S=e.streamProcessor,x=e.mediaController,D=void 0,R=void 0,M=void 0,C=void 0,N=void 0,L=void 0,P=void 0,O=void 0,F=void 0,k=void 0,B=void 0,U=void 0,H=void 0,j=void 0,K=void 0,V=void 0,q=void 0,G=void 0,Y=void 0,z=void 0,W=void 0,X=void 0,$=void 0;function Q(){R=(0,w["default"])(t).getInstance().getLogger(D),Be()}function J(){M=S.getFragmentModel(),j=(0,f["default"])(t).create({abrController:m,dashMetrics:s,metricsModel:r,mediaPlayerModel:h,textController:b}),K=(0,p["default"])(t).create({adapter:i,textController:b,playbackController:y}),l.getIsTextTrack(e.mimeType)&&n.on(E["default"].TIMED_TEXT_REQUESTED,Ie,this),n.on(E["default"].QUALITY_CHANGE_REQUESTED,de,this),n.on(E["default"].DATA_UPDATE_STARTED,be,this),n.on(E["default"].DATA_UPDATE_COMPLETED,he,this),n.on(E["default"].FRAGMENT_LOADING_COMPLETED,ye,this),n.on(E["default"].STREAM_COMPLETED,ge,this),n.on(E["default"].STREAM_INITIALIZED,pe,this),n.on(E["default"].BUFFER_LEVEL_STATE_CHANGED,Se,this),n.on(E["default"].BUFFER_CLEARED,Te,this),n.on(E["default"].BYTES_APPENDED_END_FRAGMENT,_e,this),n.on(E["default"].INIT_REQUESTED,ae,this),n.on(E["default"].QUOTA_EXCEEDED,we,this),n.on(E["default"].PLAYBACK_SEEKING,De,this),n.on(E["default"].PLAYBACK_STARTED,Ae,this),n.on(E["default"].PLAYBACK_RATE_CHANGED,Re,this),n.on(E["default"].PLAYBACK_TIME_UPDATED,ve,this),n.on(E["default"].URL_RESOLUTION_FAILED,xe,this),n.on(E["default"].FRAGMENT_LOADING_ABANDONED,Ee,this)}function Z(){return!1===L}function ee(){C&&!S.isBufferingCompleted()?(R.debug("Schedule Controller starts"),ke(),L=!1,N&&(N=!1),oe(0)):R.warn("Start denied to Schedule Controller")}function te(){L||(R.debug("Schedule Controller stops"),L=!0,clearTimeout(U))}function ne(e,t){q[t]=q[t]||{};var n=m.getTopQualityIndexFor(e,t);return q[t][e]!=n&&(R.info("Top quality "+e+" index has changed from "+q[t][e]+" to "+n),q[t][e]=n,!0)}function re(){var e=S.getBufferController();if(L||k||!e||y.isPaused()&&!h.getScheduleWhilePaused()||!(T!==o["default"].FRAGMENTED_TEXT&&T!==o["default"].TEXT||b.isTextEnabled()))R.debug("Schedule stop!");else if(e.getIsBufferingCompleted())R.debug("Schedule stop because buffering is completed!");else{ie();var t=Y.length>0,n=S.getStreamInfo();if(W||isNaN(G)||z||t||ne(C.mediaInfo.type,n.id)||j.execute(S,_.isTrackTypePresent(o["default"].VIDEO))){var r=function(){var e=S.getFragmentController();if(C.quality===G&&!z||W){var t=Y.shift();if(e.isInitializationRequest(t))S.switchInitData(t.representationId);else{var r=void 0;S.getBufferController().getIsPruningInProgress()||(r=K.execute(S,H,t),Me(NaN),r&&!t&&(isNaN(r.startTime+r.duration)||i.setIndexHandlerTime(S,r.startTime+r.duration),r.delayLoadingTime=(new Date).getTime()+B,Ce(0)),!r&&n.manifestInfo&&n.manifestInfo.isDynamic&&R.debug("Next fragment seems to be at the bleeding live edge and is not available yet. Rescheduling.")),r?(R.debug("Next fragment request url is "+r.url),M.executeRequest(r)):(se(!1),oe(h.getLowLatencyEnabled()?100:500))}}else R.debug("Quality has changed, get init request for representationid = "+C.id),z?(W=x.getSwitchMode(T)===I["default"].TRACK_SWITCH_MODE_ALWAYS_REPLACE,R.debug("Switch track has been asked, get init request for "+T+" with representationid = "+C.id+"bufferResetInProgress = "+W),S.switchInitData(C.id,W),z=!1):S.switchInitData(C.id),G=C.quality};se(!0),t||z||m.checkPlaybackQuality(T),r()}else oe(500)}}function ie(){var e=y.getTime(),t=1.5*C.fragmentDuration,n=M.getRequests({state:g["default"].FRAGMENT_MODEL_EXECUTED,time:e+t,threshold:0})[0];if(n&&-1===Y.indexOf(n)&&!l.getIsTextTrack(T)){var r=h.getFastSwitchEnabled(),i=S.getBufferLevel(),o=m.getAbandonmentStateFor(T),a=!x.isCurrentTrack(n.mediaInfo)&&x.getSwitchMode(n.mediaInfo.type)===I["default"].TRACK_SWITCH_MODE_NEVER_REPLACE,s=n.quality<C.quality;r&&(a||s)&&i>=t&&o!==u["default"].ABANDON_LOAD?(ce(n),$=!0,R.debug("Reloading outdated fragment at index: ",n.index)):n.quality>C.quality&&!W&&Me(y.getTime()+S.getBufferLevel())}}function oe(e){clearTimeout(U),U=setTimeout(re,e)}function ae(e){e.sender&&e.sender.getStreamProcessor()===S&&ue(C.quality)}function se(e){k!==e?k=e:R.debug("isFragmentProcessingInProgress is already equal to",e)}function ue(e){var t=i.getInitRequest(S,e);t&&(se(!0),t.url=(0,A.replaceTokenForTemplate)(t.url,"Bandwidth",C?C.bandwidth:null),M.executeRequest(t))}function le(){z=!0}function ce(e){Y.push(e)}function de(e){if(T===e.mediaType&&S.getStreamInfo().id===e.streamInfo.id){if(C=S.getRepresentationInfo(e.newQuality),null===C||void 0===C)throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");Fe(new Date,a.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),ke()}}function fe(e){if(y&&M){var t=M.getRequests({state:g["default"].FRAGMENT_MODEL_EXECUTED,time:y.getTime(),threshold:0})[0];t&&y.getTime()>=t.startTime&&((!V.mediaInfo||t.mediaInfo.type===V.mediaInfo.type&&t.mediaInfo.id!==V.mediaInfo.id)&&e&&n.trigger(E["default"].TRACK_CHANGE_RENDERED,{mediaType:T,oldMediaInfo:V.mediaInfo,newMediaInfo:t.mediaInfo}),t.quality===V.quality&&t.adaptationIndex===V.adaptationIndex||!e||n.trigger(E["default"].QUALITY_CHANGE_RENDERED,{mediaType:T,oldQuality:V.quality,newQuality:t.quality}),V={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex})}}function he(e){e.error||e.sender.getStreamProcessor()!==S||(C=i.convertDataToRepresentationInfo(e.currentRepresentation))}function pe(e){e.error||S.getStreamInfo().id!==e.streamInfo.id||(C=S.getRepresentationInfo(),N&&(y.getIsDynamic()?(d.setTimeSyncCompleted(!0),me()):(H=y.getStreamStartTime(!1),S.getBufferController().setSeekStartTime(H))),L&&ee())}function me(){var e=S.getLiveEdgeFinder();if(e){var t=e.getLiveEdge(),n=C.mediaInfo.streamInfo.manifestInfo.DVRWindowSize/2,a=t-y.computeLiveDelay(C.fragmentDuration,n),u=i.getFragmentRequest(S,C,a,{ignoreIsFinished:!0});if(u)if(h.getLowLatencyEnabled()){var l=u.duration<h.getLiveDelay()?u.startTime:u.startTime+u.duration-h.getLiveDelay();y.setLiveStartTime(l)}else y.setLiveStartTime(u.startTime);else R.debug("setLiveEdgeSeekTarget : getFragmentRequest returned undefined request object");H=y.getStreamStartTime(!1,t),S.getBufferController().setSeekStartTime(H),H>C.mediaInfo.streamInfo.start+C.mediaInfo.streamInfo.duration&&y.seek(H);var c=s.getCurrentManifestUpdate(r.getMetricsFor(o["default"].STREAM));r.updateManifestUpdateInfo(c,{currentTime:H,presentationStartTime:t,latency:t-H,clientTimeOffset:d.getClientTimeOffset()})}}function ge(e){e.fragmentModel===M&&(te(),se(!1),R.info("Stream is complete"))}function ye(e){e.sender===M&&(R.info("OnFragmentLoadingCompleted - Url:",e.request?e.request.url:"undefined",", Range:",e.request.range?e.request.range:"undefined"),l.getIsTextTrack(T)&&se(!1),e.error&&e.request.serviceLocation&&!L&&(ce(e.request),se(!1),oe(0)),W&&(X=e.request))}function ve(){fe(!0)}function _e(e){if(e.sender.getStreamProcessor()===S)if(W&&!isNaN(e.startTime)&&(W=!1,M.addExecutedRequest(X)),se(!1),$&&!isNaN(e.startTime)){var t=y.getTime(),n=e.startTime+C.fragmentDuration,r=1.5*C.fragmentDuration;oe(t+r>=n?0:1e3*(n-(t+r))),$=!1}else oe(0)}function Ee(e){e.streamProcessor===S&&(R.info("onFragmentLoadingAbandoned for "+T+", request: "+e.request.url+" has been aborted"),y.isSeeking()||z||(R.info("onFragmentLoadingAbandoned for "+T+", request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),ce(e.request)),se(!1),oe(0))}function be(e){e.sender.getStreamProcessor()===S&&te()}function Te(e){if(e.sender.getStreamProcessor()===S){var t=S.getStreamInfo();t&&(e.unintended?M.removeExecutedRequestsAfterTime(e.from,t.duration):M.syncExecutedRequestsWithBufferedRange(S.getBufferController().getBuffer().getAllBufferRanges(),t.duration)),e.hasEnoughSpaceToAppend&&L&&ee()}}function Se(e){e.sender.getStreamProcessor()!==S||e.state!==c["default"].BUFFER_EMPTY||y.isSeeking()||(R.info("Buffer is empty! Stalling!"),Fe(new Date,a.PlayListTrace.REBUFFERING_REASON))}function we(e){e.sender.getStreamProcessor()===S&&(te(),se(!1))}function xe(){M.abortRequests(),te()}function Ie(e){e.sender.getStreamProcessor()===S&&b.isTextEnabled()&&ue(e.index)}function Ae(){!L&&h.getScheduleWhilePaused()||ee()}function De(e){H=e.seekTime,Ce(0),L&&ee();var t=s.getCurrentManifestUpdate(r.getMetricsFor(o["default"].STREAM)),n=C.DVRWindow&&y?C.DVRWindow.end-y.getTime():NaN;r.updateManifestUpdateInfo(t,{latency:n}),k?(R.debug("onPlaybackSeeking for "+T+", call fragmentModel.abortRequests in order to seek quicker"),M.abortRequests()):oe(0)}function Re(e){O&&(O.playbackspeed=e.playbackRate.toString())}function Me(e){H=e}function Ce(e){B=e}function Ne(){return j.getBufferTarget(S,_.isTrackTypePresent(o["default"].VIDEO))}function Le(){return T}function Pe(e){P=e}function Oe(e,t){Fe(e,t),P=null}function Fe(e,t){if(P&&!1===F){var n=O.start,r=e.getTime()-n.getTime();O.duration=r,O.stopreason=t,P.trace.push(O),F=!0}}function ke(){P&&!0===F&&C&&(F=!1,O=new a.PlayListTrace,O.representationid=C.id,O.start=new Date,O.mstart=1e3*y.getTime(),O.playbackspeed=y.getPlaybackRate().toString())}function Be(){k=!1,B=0,H=NaN,P=null,O=null,F=!0,N=!0,G=NaN,V={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},q={},Y=[],L=!0,z=!1,W=!1,X=null,$=!1}function Ue(){n.off(E["default"].DATA_UPDATE_STARTED,be,this),n.off(E["default"].DATA_UPDATE_COMPLETED,he,this),n.off(E["default"].BUFFER_LEVEL_STATE_CHANGED,Se,this),n.off(E["default"].QUALITY_CHANGE_REQUESTED,de,this),n.off(E["default"].FRAGMENT_LOADING_COMPLETED,ye,this),n.off(E["default"].STREAM_COMPLETED,ge,this),n.off(E["default"].STREAM_INITIALIZED,pe,this),n.off(E["default"].QUOTA_EXCEEDED,we,this),n.off(E["default"].BYTES_APPENDED_END_FRAGMENT,_e,this),n.off(E["default"].BUFFER_CLEARED,Te,this),n.off(E["default"].INIT_REQUESTED,ae,this),n.off(E["default"].PLAYBACK_RATE_CHANGED,Re,this),n.off(E["default"].PLAYBACK_SEEKING,De,this),n.off(E["default"].PLAYBACK_STARTED,Ae,this),n.off(E["default"].PLAYBACK_TIME_UPDATED,ve,this),n.off(E["default"].URL_RESOLUTION_FAILED,xe,this),n.off(E["default"].FRAGMENT_LOADING_ABANDONED,Ee,this),l.getIsTextTrack(T)&&n.off(E["default"].TIMED_TEXT_REQUESTED,Ie,this),te(),fe(!1),Be()}return D={initialize:J,getType:Le,setSeekTarget:Me,setTimeToLoadDelay:Ce,replaceRequest:ce,switchTrackAsked:le,isStarted:Z,start:ee,stop:te,reset:Ue,setPlayList:Pe,getBufferTarget:Ne,finalisePlayList:Oe},Q(),D}D.__dashjs_factory_name="ScheduleController",t["default"]=T["default"].getClassFactory(D),e.exports=t["default"]},b8e3:function(e,t){e.exports=!0},ba50:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("f766"),o=r(i);function a(e){e=e||{};var t=void 0,n=void 0,r=e.eventBus,i=e.metricsConstants;function a(){r.off(o["default"].METRICS_INITIALISATION_COMPLETE,a,this),r.trigger(o["default"].BECAME_REPORTING_PLAYER)}function s(e,t){t&&(n=t,r.on(o["default"].METRICS_INITIALISATION_COMPLETE,a,this))}function u(){n=null}function l(e,t){e===i.DVB_ERRORS&&n&&n.report(e,t)}return t={initialize:s,reset:u,handleNewMetric:l},t}t["default"]=dashjs.FactoryMaker.getClassFactory(a),e.exports=t["default"]},bb46:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null};t["default"]=i,e.exports=t["default"]},bb66:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("41ee"),u=i(s),l=function(e){function t(e){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e||null,this.checkForExistenceOnly=!0}return a(t,e),t}(u["default"]);t["default"]=l,e.exports=t["default"]},bc13:function(e,t,n){var r=n("e53d"),i=r.navigator;e.exports=i&&i.userAgent||""},bcaa:function(e,t,n){var r=n("cb7c"),i=n("d3f4"),o=n("a5b8");e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e),a=n.resolve;return a(t),n.promise}},bd58:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("66df"),o=r(i),a=n("8842"),s=r(a);function u(e){e=e||{};var t=void 0,n=this.context,r=void 0,i=void 0,a=void 0,u=void 0,l=void 0,c=void 0,d=!0,f=!0,h=[],p=e.metricsConstants;function m(){r=(0,o["default"])(n).getInstance(),i=(0,s["default"])(n).getInstance(),_()}function g(e,t,n){var r=new XMLHttpRequest,i=function(){var e=h.indexOf(r);-1!==e&&(h.splice(e,1),r.status>=200&&r.status<300?t&&t():n&&n())};h.push(r);try{r.open("GET",e),r.onloadend=i,r.onerror=i,r.send()}catch(o){r.onerror()}}function y(e,t){Array.isArray(t)||(t=[t]),u&&c.isEnabled()&&t.forEach((function(t){var n=r.serialise(t);d&&e!==p.DVB_ERRORS&&(n="metricname="+e+"&"+n),n=l+"?"+n,g(n,null,(function(){u=!1}))}))}function v(e,t){var n=void 0;if(c=t,l=e["dvb:reportingUrl"],!l)throw new Error("required parameter missing (dvb:reportingUrl)");a||(n=e["dvb:probability"]||e["dvb:priority"]||0,n&&(1e3===n||n/1e3>=i.random())&&(u=!0),a=!0)}function _(){a=!1,u=!1,l=null,c=null}function E(){f||(h.forEach((function(e){return e.abort()})),h=[]),_()}return t={report:y,initialize:v,reset:E},m(),t}u.__dashjs_factory_name="DVBReporting",t["default"]=dashjs.FactoryMaker.getClassFactory(u),e.exports=t["default"]},bd9a:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=n("a679"),a=r(o),s=n("467b"),u=r(s),l=n("0757"),c=n("2f4d"),d=r(c),f=n("086a"),h=r(f),p=n("71a8"),m=4,g=36e4,y=36e4,v=.9,_=1e4,E=20,b=80,T=10,S=12,w=20,x=30,I=60,A=600,D=.2,R=.8,M=100,C=50,N=5,L=3,P=1e3,O=3,F=500,k=1,B=500,U=3,H=10,j=5,K=.02,V=0,q=.5,G=50,Y=!1;function z(){var e=void 0,t=void 0,n=void 0,r=void 0,o=void 0,s=void 0,u=void 0,c=void 0,f=void 0,z=void 0,W=void 0,X=void 0,$=void 0,Q=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,oe=void 0,ae=void 0,se=void 0,ue=void 0,le=void 0,ce=void 0,de=void 0,fe=void 0,he=void 0,pe=void 0,me=void 0,ge=void 0,ye=void 0,ve=void 0,_e=void 0,Ee=void 0,be={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso&ms"};function Te(){var e,a;r=[],n=!1,t=!0,u=!0,ae=d["default"].ABR_STRATEGY_DYNAMIC,se=!0,le=!1,W={enabled:!0,ttl:g},X={enabled:!0,ttl:y},o=m,s=void 0,c=E,f=b,z=T,$=NaN,Q=x,J=I,Z=A,ee=D,te=v,ne=_,oe=G,he=!1,pe=R,ge=M,ue={default:Y},ce=[],de=d["default"].MOVING_AVERAGE_SLIDING_WINDOW,me=!1,ve=K,_e=V,Ee=q,e={},i(e,l.HTTPRequest.MPD_TYPE,O),i(e,l.HTTPRequest.XLINK_EXPANSION_TYPE,k),i(e,l.HTTPRequest.MEDIA_SEGMENT_TYPE,L),i(e,l.HTTPRequest.INIT_SEGMENT_TYPE,L),i(e,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,L),i(e,l.HTTPRequest.INDEX_SEGMENT_TYPE,L),i(e,l.HTTPRequest.OTHER_TYPE,L),re=e,a={},i(a,l.HTTPRequest.MPD_TYPE,F),i(a,l.HTTPRequest.XLINK_EXPANSION_TYPE,B),i(a,l.HTTPRequest.MEDIA_SEGMENT_TYPE,P),i(a,l.HTTPRequest.INIT_SEGMENT_TYPE,P),i(a,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,P),i(a,l.HTTPRequest.INDEX_SEGMENT_TYPE,P),i(a,l.HTTPRequest.OTHER_TYPE,P),ie=a,fe={},fe[d["default"].VIDEO]=C,fe[d["default"].AUDIO]=N,ye=!1}function Se(e){if(e!==d["default"].ABR_STRATEGY_DYNAMIC&&e!==d["default"].ABR_STRATEGY_BOLA&&e!==d["default"].ABR_STRATEGY_THROUGHPUT)throw d["default"].BAD_ARGUMENT_ERROR;ae=e}function we(){return ae}function xe(e){(0,p.checkParameterType)(e,"boolean"),se=e}function Ie(){return se}function Ae(e){var t=void 0;for(t=0;t<ce.length;t++)if(ce[t].rulename===e)return t;return-1}function De(){return ce}function Re(e,t,n){if("string"!==typeof e||e!==h["default"].ABANDON_FRAGMENT_RULES&&e!==h["default"].QUALITY_SWITCH_RULES||"string"!==typeof t)throw d["default"].BAD_ARGUMENT_ERROR;var r=Ae(t);-1===r?ce.push({type:e,rulename:t,rule:n}):(ce[r].type=e,ce[r].rule=n)}function Me(e){if(e){var t=Ae(e);-1!==t&&ce.splice(t,1)}else ce=[]}function Ce(e){(0,p.checkParameterType)(e,"number"),te=e}function Ne(){return te}function Le(e){(0,p.checkParameterType)(e,"number"),ne=e}function Pe(){return ne}function Oe(e){(0,p.checkParameterType)(e,"number"),$=e}function Fe(){return Pt()?.6*pt():isNaN($)?le?w:S:$}function ke(e){(0,p.checkParameterType)(e,"number"),Q=e}function Be(){return Q}function Ue(e){(0,p.checkParameterType)(e,"number"),J=e}function He(){return J}function je(e){(0,p.checkParameterType)(e,"number"),Z=e}function Ke(){return Z}function Ve(e){(0,p.checkParameterType)(e,"number"),ee=e}function qe(){return ee}function Ge(e,t){(0,p.checkParameterType)(t,"number"),(0,p.checkIsVideoOrAudioType)(e),fe[e]=t}function Ye(e){return fe[e]}function ze(e){(0,p.checkParameterType)(e,"number"),c=e}function We(){return c}function Xe(e){(0,p.checkParameterType)(e,"number"),f=e}function $e(){return f}function Qe(e,t){if("boolean"!==typeof e||void 0!==t&&("number"!==typeof t||isNaN(t)))throw d["default"].BAD_ARGUMENT_ERROR;W.enabled=e,void 0!==t&&(W.ttl=t)}function Je(){return W}function Ze(e,t){if("boolean"!==typeof e||void 0!==t&&("number"!==typeof t||isNaN(t)))throw d["default"].BAD_ARGUMENT_ERROR;X.enabled=e,void 0!==t&&(X.ttl=t)}function et(){return X}function tt(e){(0,p.checkParameterType)(e,"number"),z=e}function nt(){return z}function rt(e,t){if("number"!==typeof t||"string"!==typeof e||e!==l.HTTPRequest.MPD_TYPE&&e!==l.HTTPRequest.MEDIA_SEGMENT_TYPE)throw d["default"].BAD_ARGUMENT_ERROR;re[e]=t}function it(e){return Pt()?re[e]*j:re[e]}function ot(e,t){(0,p.checkParameterType)(t,"number"),ie[e]=t}function at(e){return Pt()?ie[e]/H:ie[e]}function st(e){(0,p.checkParameterType)(e,"number"),oe=e}function ut(){return oe}function lt(e){(0,p.checkParameterType)(e,"boolean"),u=e}function ct(){return u}function dt(e){(0,p.checkParameterType)(e,"number"),o=e}function ft(){return o}function ht(e){void 0!==e&&(0,p.checkParameterType)(e,"number"),s=e}function pt(){return me?s||U:s}function mt(e){(0,p.checkParameterType)(e,"boolean"),t=e}function gt(){return t}function yt(e){(0,p.checkParameterType)(e,"boolean"),n=e}function vt(){return n}function _t(e,t){bt(e,t);var n=new a["default"];n.schemeIdUri=e,n.value=t,r.push(n)}function Et(){return r}function bt(e,t){(0,p.checkParameterType)(e,"string"),(0,p.checkParameterType)(t,"string"),r.forEach((function(n,i){n.schemeIdUri===e&&n.value===t&&r.splice(i,1)}))}function Tt(){r=[]}function St(){_t(be.scheme,be.value)}function wt(e,t){e?ue[e]=!!t:Object.keys(ue).forEach((function(e){wt(e,t)}))}function xt(e){var t=ue[e];return void 0===t?ue["default"]:t}function It(){return le}function At(e){(0,p.checkParameterType)(e,"boolean"),le=e}function Dt(e){if(e!==d["default"].MOVING_AVERAGE_SLIDING_WINDOW&&e!==d["default"].MOVING_AVERAGE_EWMA)throw d["default"].BAD_ARGUMENT_ERROR;de=e}function Rt(){return de}function Mt(e){(0,p.checkParameterType)(e,"boolean"),he=e}function Ct(){return he}function Nt(e){(0,p.checkParameterType)(e,"number"),pe=e}function Lt(){return pe}function Pt(){return me}function Ot(e){(0,p.checkParameterType)(e,"boolean"),me=e}function Ft(e){(0,p.checkParameterType)(e,"number"),(0,p.checkRange)(e,0,.5),Ee=e}function kt(){return Ee}function Bt(e){(0,p.checkParameterType)(e,"number"),ve=e}function Ut(){return ve}function Ht(e){(0,p.checkParameterType)(e,"number"),_e=e}function jt(){return _e}function Kt(e){(0,p.checkParameterType)(e,"number"),ge=e}function Vt(){return ge}function qt(e){(0,p.checkParameterType)(e,"boolean"),ye=e}function Gt(){return ye}function Yt(){return be}function zt(){}return e={setABRStrategy:Se,getABRStrategy:we,setUseDefaultABRRules:xe,getUseDefaultABRRules:Ie,getABRCustomRules:De,addABRCustomRule:Re,removeABRCustomRule:Me,setBandwidthSafetyFactor:Ce,getBandwidthSafetyFactor:Ne,setAbandonLoadTimeout:Le,getAbandonLoadTimeout:Pe,setLastBitrateCachingInfo:Qe,getLastBitrateCachingInfo:Je,setLastMediaSettingsCachingInfo:Ze,getLastMediaSettingsCachingInfo:et,setStableBufferTime:Oe,getStableBufferTime:Fe,setBufferTimeAtTopQuality:ke,getBufferTimeAtTopQuality:Be,setBufferTimeAtTopQualityLongForm:Ue,getBufferTimeAtTopQualityLongForm:He,setLongFormContentDurationThreshold:je,getLongFormContentDurationThreshold:Ke,setSegmentOverlapToleranceTime:Ve,getSegmentOverlapToleranceTime:qe,getCacheLoadThresholdForType:Ye,setCacheLoadThresholdForType:Ge,setBufferToKeep:ze,getBufferToKeep:We,setBufferAheadToKeep:Xe,getBufferAheadToKeep:$e,setBufferPruningInterval:tt,getBufferPruningInterval:nt,setRetryAttemptsForType:rt,getRetryAttemptsForType:it,setRetryIntervalForType:ot,getRetryIntervalForType:at,setWallclockTimeUpdateInterval:st,getWallclockTimeUpdateInterval:ut,setScheduleWhilePaused:lt,getScheduleWhilePaused:ct,getUseSuggestedPresentationDelay:vt,setUseSuggestedPresentationDelay:yt,setLiveDelayFragmentCount:dt,getLiveDelayFragmentCount:ft,getLiveDelay:pt,setLiveDelay:ht,setUseManifestDateHeaderTimeSource:mt,getUseManifestDateHeaderTimeSource:gt,addUTCTimingSource:_t,removeUTCTimingSource:bt,getUTCTimingSources:Et,clearDefaultUTCTimingSources:Tt,restoreDefaultUTCTimingSources:St,setXHRWithCredentialsForType:wt,getXHRWithCredentialsForType:xt,setFastSwitchEnabled:At,getFastSwitchEnabled:It,setMovingAverageMethod:Dt,getMovingAverageMethod:Rt,setJumpGaps:Mt,getJumpGaps:Ct,setSmallGapLimit:Nt,getSmallGapLimit:Lt,getLowLatencyEnabled:Pt,setLowLatencyEnabled:Ot,setCatchUpPlaybackRate:Ft,getCatchUpPlaybackRate:kt,setLowLatencyMinDrift:Bt,getLowLatencyMinDrift:Ut,setLowLatencyMaxDriftBeforeSeeking:Ht,getLowLatencyMaxDriftBeforeSeeking:jt,setManifestUpdateRetryInterval:Kt,getManifestUpdateRetryInterval:Vt,setKeepProtectionMediaKeys:qt,getKeepProtectionMediaKeys:Gt,getDefaultUtcTimingSource:Yt,reset:zt},Te(),e}z.__dashjs_factory_name="MediaPlayerModel",t["default"]=u["default"].getSingletonFactory(z),e.exports=t["default"]},be13:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},c207:function(e,t){},c26b:function(e,t,n){"use strict";var r=n("86cc").f,i=n("2aeb"),o=n("dcbc"),a=n("9b43"),s=n("f605"),u=n("4a59"),l=n("01f9"),c=n("d53b"),d=n("7a56"),f=n("9e1e"),h=n("67ab").fastKey,p=n("b39a"),m=f?"_s":"size",g=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,l){var c=e((function(e,r){s(e,c,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=r&&u(r,n,e[l],e)}));return o(c.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=p(this,t),r=g(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[m]--}return!!r},forEach:function(e){p(this,t);var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);while(n=n?n.n:this._f){r(n.v,n.k,this);while(n&&n.r)n=n.p}},has:function(e){return!!g(p(this,t),e)}}),f&&r(c.prototype,"size",{get:function(){return p(this,t)[m]}}),c},def:function(e,t,n){var r,i,o=g(e,t);return o?o.v=n:(e._l=o={i:i=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[m]++,"F"!==i&&(e._i[i]=o)),e},getEntry:g,setStrong:function(e,t,n){l(e,t,(function(e,n){this._t=p(e,t),this._k=n,this._l=void 0}),(function(){var e=this,t=e._k,n=e._l;while(n&&n.r)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?c(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,c(1))}),n?"entries":"values",!n,!0),d(t)}}},c287:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(t,n){i(this,e),this._test=t,this._converter=n}return r(e,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),e}();t["default"]=o,e.exports=t["default"]},c2ae:function(e,t,n){e.exports=n("e372").PassThrough},c366:function(e,t,n){var r=n("6821"),i=n("9def"),o=n("77f1");e.exports=function(e){return function(t,n,a){var s,u=r(t),l=i(u.length),c=o(a,l);if(e&&n!=n){while(l>c)if(s=u[c++],s!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}}},c367:function(e,t,n){"use strict";var r=n("8436"),i=n("50ed"),o=n("481b"),a=n("36c3");e.exports=n("30f1")(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},c3a1:function(e,t,n){var r=n("e6f3"),i=n("1691");e.exports=Object.keys||function(e){return r(e,i)}},c429:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("e09e"),o=r(i),a=n("467b"),s=r(a),u=n("a083"),l=r(u),c=n("4526"),d=r(c),f=n("0502"),h=r(f);function p(e,t){var n=this.context,r=void 0,i=void 0,a=void 0,s=void 0;function u(){i=(0,l["default"])(n).create(e,t),a=(0,d["default"])(n).create(e,t),s=(0,h["default"])(n).create(e,t)}function c(e,t,n,r,u){var l=void 0,c=e.segmentInfoType;c!==o["default"].SEGMENT_BASE&&c!==o["default"].BASE_URL&&f(e,n)?(c===o["default"].SEGMENT_TIMELINE?l=i.getSegments(e,t,n,u):c===o["default"].SEGMENT_TEMPLATE?l=a.getSegments(e,t,n,u):c===o["default"].SEGMENT_LIST&&(l=s.getSegments(e,t,n,u)),r&&r(e,l)):l=e.segments}function f(e,t){var n=e.segments,r=!1,i=void 0,o=void 0;return n&&0!==n.length?(o=n[0].availabilityIdx,i=n[n.length-1].availabilityIdx,r=t<o||t>i):r=!0,r}return r={getSegments:c},u(),r}p.__dashjs_factory_name="SegmentsGetter";var m=s["default"].getClassFactory(p);t["default"]=m,e.exports=t["default"]},c645:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("47e4"),s=r(a),u=n("46ee"),l=r(u),c=n("0757"),d=n("e31d"),f=r(d),h=n("d395"),p=r(h),m=n("d0c1"),g=r(m),y=n("d6ce"),v=r(y),_=n("04f2"),E=r(_),b=n("d547"),T=n("71d3"),S=r(T),w=n("8a43"),x=r(w),I=n("9893"),A=r(I),D=n("1d48"),R=r(D),M=n("467b"),C=r(M);function N(){var e=1e3,t=this.context,n=(0,x["default"])(t).getInstance(),r=void 0,i=void 0;function a(){i={}}function u(){n.trigger(R["default"].METRICS_CHANGED)}function d(e){n.trigger(R["default"].METRIC_CHANGED,{mediaType:e}),u()}function h(e,t,r){n.trigger(R["default"].METRIC_UPDATED,{mediaType:e,metric:t,value:r}),d(e)}function m(e,t,r){n.trigger(R["default"].METRIC_ADDED,{mediaType:e,metric:t,value:r}),d(e)}function y(e){delete i[e],d(e)}function _(){i={},u()}function T(e){return i.hasOwnProperty(e)?i[e]:null}function w(e){var t=void 0;return i.hasOwnProperty(e)?t=i[e]:(t=new l["default"],i[e]=t),t}function I(t,n,r){var i=w(t);i[n].push(r),i[n].length>e&&i[n].shift()}function D(e,t,n,r){var i=new c.HTTPRequestTrace;return i.s=t,i.d=n,i.b=r,e.trace.push(i),e.interval||(e.interval=0),e.interval+=n,i}function M(e,t,n,r,i,o,a,u,l,d,f,h,p,m){var g=new c.HTTPRequest;i&&i!==r&&(M(e,null,n,r,null,null,a,u,null,null,null,h,null,null),g.actualurl=i),g.tcpid=t,g.type=n,g.url=r,g.range=a,g.trequest=u,g.tresponse=l,g.responsecode=f,g._tfinish=d,g._stream=e,g._mediaduration=h,g._responseHeaders=p,g._serviceLocation=o,m?m.forEach((function(e){D(g,e.s,e.d,e.b)})):(delete g.interval,delete g.trace),N(e,s["default"].HTTP_REQUEST,g)}function C(e,t,n,r,i){var o=new f["default"];o.t=t,o.mt=n,o.to=r,i?o.lto=i:delete o.lto,N(e,s["default"].TRACK_SWITCH,o)}function N(e,t,n){I(e,t,n),m(e,t,n)}function L(e,t,n){var r=new p["default"];r.t=t,r.level=n,N(e,s["default"].BUFFER_LEVEL,r)}function P(e,t,n){var r=new g["default"];r.target=n,r.state=t,N(e,s["default"].BUFFER_STATE,r)}function O(e,t,n,r){var i=new v["default"];i.time=t,i.range=r,i.manifestInfo=n,N(e,s["default"].DVR_INFO,i)}function F(e,t){var n=new E["default"],r=w(e).DroppedFrames;n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,r.length>0&&r[r.length-1]==n||N(e,s["default"].DROPPED_FRAMES,n)}function k(e,t,n,r,i,o,a,u,l){var c=new S["default"];c.mediaType=e,c.t=t,c.type=n,c.startTime=r,c.availabilityStartTime=i,c.duration=o,c.quality=a,c.range=u,c.state=l,N(e,s["default"].SCHEDULING_INFO,c)}function B(e,t,n){var r=new A["default"];r.loadingRequests=t,r.executedRequests=n,w(e).RequestsQueue=r,m(e,s["default"].REQUESTS_QUEUE,r)}function U(e,t,n,r,i,a,u,l,c,d){var f=new b.ManifestUpdate;f.mediaType=e,f.type=t,f.requestTime=n,f.fetchTime=r,f.availabilityStartTime=i,f.presentationStartTime=a,f.clientTimeOffset=u,f.currentTime=l,f.buffered=c,f.latency=d,I(o["default"].STREAM,s["default"].MANIFEST_UPDATE,f),m(e,s["default"].MANIFEST_UPDATE,f)}function H(e,t){if(e){for(var n in t)e[n]=t[n];h(e.mediaType,s["default"].MANIFEST_UPDATE,e)}}function j(e,t,n,r,i){if(e){var o=new b.ManifestUpdateStreamInfo;o.id=t,o.index=n,o.start=r,o.duration=i,e.streamInfo.push(o),h(e.mediaType,s["default"].MANIFEST_UPDATE_STREAM_INFO,e)}}function K(e,t,n,r,i,o,a,u){if(e){var l=new b.ManifestUpdateRepresentationInfo;l.id=t,l.index=n,l.streamIndex=r,l.mediaType=i,l.startNumber=a,l.fragmentInfoType=u,l.presentationTimeOffset=o,e.representationInfo.push(l),h(e.mediaType,s["default"].MANIFEST_UPDATE_TRACK_INFO,e)}}function V(e){var t=o["default"].STREAM;e.trace&&Array.isArray(e.trace)?e.trace.forEach((function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel})):delete e.trace,N(t,s["default"].PLAY_LIST,e)}function q(e){var t=o["default"].STREAM;N(t,s["default"].DVB_ERRORS,e)}return r={clearCurrentMetricsForType:y,clearAllCurrentMetrics:_,getReadOnlyMetricsFor:T,getMetricsFor:w,addHttpRequest:M,addRepresentationSwitch:C,addBufferLevel:L,addBufferState:P,addDVRInfo:O,addDroppedFrames:F,addSchedulingInfo:k,addRequestsQueue:B,addManifestUpdate:U,updateManifestUpdateInfo:H,addManifestUpdateStreamInfo:j,addManifestUpdateRepresentationInfo:K,addPlayList:V,addDVBErrors:q},a(),r}N.__dashjs_factory_name="MetricsModel",t["default"]=C["default"].getSingletonFactory(N),e.exports=t["default"]},c69a:function(e,t,n){e.exports=!n("9e1e")&&!n("79e5")((function(){return 7!=Object.defineProperty(n("230e")("div"),"a",{get:function(){return 7}}).a}))},c7a0:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1};t["default"]=i,e.exports=t["default"]},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},ca5a:function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},cadf:function(e,t,n){"use strict";var r=n("9c6c"),i=n("d53b"),o=n("84f2"),a=n("6821");e.exports=n("01f9")(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},cb7c:function(e,t,n){var r=n("d3f4");e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},cbff:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};t["default"]=i,e.exports=t["default"]},cd1c:function(e,t,n){var r=n("e853");e.exports=function(e,t){return new(r(e))(t)}},cd78:function(e,t,n){var r=n("e4ae"),i=n("f772"),o=n("656e");e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e),a=n.resolve;return a(t),n.promise}},cdb1:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("467b"),s=r(a),u=n("4e47"),l=r(u),c=n("12fe"),d=r(c);function f(e){e=e||{};var t=this.context,n=void 0,r=void 0;function i(){n=e.type===o["default"].FRAGMENTED_TEXT?(0,l["default"])(t).create({type:e.type,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,manifestModel:e.manifestModel,errHandler:e.errHandler,streamController:e.streamController,mediaController:e.mediaController,adapter:e.adapter,textController:e.textController,abrController:e.abrController,playbackController:e.playbackController,streamProcessor:e.streamProcessor}):(0,d["default"])(t).create({type:e.type,mimeType:e.mimeType,errHandler:e.errHandler,streamProcessor:e.streamProcessor})}function a(){return n.getBufferControllerType()}function s(e,t){return n.initialize(e,t)}function u(e){return n.createBuffer(e)}function c(){return n.getType()}function f(){return n.getBuffer()}function h(e){n.setBuffer(e)}function p(){return n.getMediaSource()}function m(e){n.setMediaSource(e)}function g(){n.getStreamProcessor()}function y(e){n.setSeekStartTime(e)}function v(){return n.getBufferLevel()}function _(e){n.reset(e)}function E(){return n.getIsBufferingCompleted()}function b(e,t){n.switchInitData(e,t)}function T(){return n.getIsPruningInProgress()}function S(){return n.dischargePreBuffer()}function w(e){return n.getRangeAt(e)}function x(e){var t=f();t.timestampOffset===e||isNaN(e)||(t.timestampOffset=e)}return r={getBufferControllerType:a,initialize:s,createBuffer:u,getType:c,getStreamProcessor:g,setSeekStartTime:y,getBuffer:f,setBuffer:h,getBufferLevel:v,setMediaSource:m,getMediaSource:p,getIsBufferingCompleted:E,getIsPruningInProgress:T,dischargePreBuffer:S,switchInitData:b,getRangeAt:w,reset:_,updateTimestampOffset:x},i(),r}f.__dashjs_factory_name="TextBufferController",t["default"]=s["default"].getClassFactory(f),e.exports=t["default"]},ce10:function(e,t,n){var r=n("69a8"),i=n("6821"),o=n("c366")(!1),a=n("613b")("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);while(t.length>u)r(s,n=t[u++])&&(~o(l,n)||l.push(n));return l}},ceb1:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("2f4d"),s=r(a),u=n("3a0f"),l=r(u),c=n("2cc9"),d=r(c),f=n("cbff"),h=r(f),p=n("5beb");function m(e){var t=this.context,n=void 0,r=void 0;function i(){m(),r=(0,d["default"])(t).create({dashManifestModel:e.dashManifestModel,adapter:e.adapter,baseURLController:e.baseURLController,stream:e.stream,timelineConverter:e.timelineConverter})}function o(e,t){var n=r.getCurrentTrack();if(!n||n.segmentDuration<=0||void 0===e||null===e)return null;var i=Math.floor(e/n.segmentDuration),o=e%n.segmentDuration,s=Math.floor(o*n.tilesHor*n.tilesVert/n.segmentDuration),u=new l["default"];return u.width=Math.floor(n.widthPerTile),u.height=Math.floor(n.heightPerTile),u.x=Math.floor(s%n.tilesHor)*n.widthPerTile,u.y=Math.floor(s/n.tilesHor)*n.heightPerTile,"readThumbnail"in n?n.readThumbnail(e,(function(e){u.url=e,t&&t(u)})):(u.url=a(n,i),t&&t(u),u)}function a(e,t){var n=t+e.startNumber,r=(0,p.replaceTokenForTemplate)(e.templateUrl,"Number",n);return r=(0,p.replaceTokenForTemplate)(r,"Time",(n-1)*e.segmentDuration),r=(0,p.replaceTokenForTemplate)(r,"Bandwidth",e.bandwidth),(0,p.unescapeDollarsInTemplate)(r)}function u(e){r.setTrackByIndex(e)}function c(){return r.getCurrentTrackIndex()}function f(){var e=r.getTracks(),t=0;return e.map((function(e){var n=new h["default"];return n.mediaType=s["default"].IMAGE,n.qualityIndex=t++,n.bitrate=e.bitrate,n.width=e.width,n.height=e.height,n}))}function m(){r&&r.reset()}return n={get:o,setTrackByIndex:u,getCurrentTrackIndex:c,getBitrateList:f,reset:m},i(),n}m.__dashjs_factory_name="ThumbnailController",t["default"]=o["default"].getClassFactory(m),e.exports=t["default"]},d0a4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("5c40"),u=i(s),l=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --"}return a(t,e),t}(u["default"]),c=new l;t["default"]=c,e.exports=t["default"]},d0c1:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n("4e47"),a=r(o),s=function e(){i(this,e),this.target=null,this.state=a["default"].BUFFER_EMPTY};t["default"]=s,e.exports=t["default"]},d0c6:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("7865"),o=r(i),a=n("bb66"),s=r(a),u=n("6a2d"),l=r(u),c=n("8a43"),d=r(c),f=n("d25a"),h=r(f),p=n("1d48"),m=r(p),g=n("e172"),y=r(g),v=n("467b"),_=r(v);function E(e){e=e||{};var t=this.context,n=(0,d["default"])(t).getInstance(),r=void 0,i=void 0;function a(){var n=(0,h["default"])(t).getInstance();i=(0,o["default"])(t).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,boxParser:n,useFetch:e.mediaPlayerModel.getLowLatencyEnabled()})}function u(e){var t=function(t){n.trigger(m["default"].CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:t})};if(e){var r=new s["default"](e.url);i.load({request:r,success:function(){t(!0)},error:function(){t(!1)}})}else t(!1)}function c(e){var t=function(t,i){n.trigger(m["default"].LOADING_COMPLETED,{request:e,response:t||null,error:i||null,sender:r})};e?i.load({request:e,progress:function(t){n.trigger(m["default"].LOADING_PROGRESS,{request:e,stream:t.stream}),t.data&&n.trigger(m["default"].LOADING_DATA_PROGRESS,{request:e,response:t.data||null,error:null,sender:r})},success:function(e){t(e)},error:function(e,n,r){t(void 0,new l["default"](y["default"].FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,r,n))},abort:function(e){e&&n.trigger(m["default"].LOADING_ABANDONED,{request:e,mediaType:e.mediaType,sender:r})}}):t(void 0,new l["default"](y["default"].FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,y["default"].FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))}function f(){i&&i.abort()}function p(){i&&(i.abort(),i=null)}return r={checkForExistence:u,load:c,abort:f,reset:p},a(),r}E.__dashjs_factory_name="FragmentLoader",t["default"]=_["default"].getClassFactory(E),e.exports=t["default"]},d0d2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){i(this,e)}return r(e,null,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var r=e[n];"urn:mpeg:dash:mp4protection:2011"===r.schemeIdUri.toLowerCase()&&"cenc"===r.value.toLowerCase()&&(t=r)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),r=n.getUint8(t);return t+=20,r>0&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(t,n){var r=e.parsePSSHList(n);return r.hasOwnProperty(t.uuid.toLowerCase())?r[t.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?t.decodeArray(e.pssh.__text).buffer:null}},{key:"parsePSSHList",value:function(e){if(null===e)return[];var t=new DataView(e.buffer||e),n=!1,r={},i=0;while(!n){var o=void 0,a=void 0,s=void 0,u=void 0,l=i;if(i>=t.buffer.byteLength)break;if(o=t.getUint32(i),a=i+o,i+=4,1886614376===t.getUint32(i))if(i+=4,s=t.getUint8(i),0===s||1===s){i++,i+=3,u="";var c=void 0,d=void 0;for(c=0;c<4;c++)d=t.getUint8(i+c).toString(16),u+=1===d.length?"0"+d:d;for(i+=4,u+="-",c=0;c<2;c++)d=t.getUint8(i+c).toString(16),u+=1===d.length?"0"+d:d;for(i+=2,u+="-",c=0;c<2;c++)d=t.getUint8(i+c).toString(16),u+=1===d.length?"0"+d:d;for(i+=2,u+="-",c=0;c<2;c++)d=t.getUint8(i+c).toString(16),u+=1===d.length?"0"+d:d;for(i+=2,u+="-",c=0;c<6;c++)d=t.getUint8(i+c).toString(16),u+=1===d.length?"0"+d:d;i+=6,u=u.toLowerCase(),t.getUint32(i),i+=4,r[u]=t.buffer.slice(l,a),i=a}else i=a;else i=a}return r}}]),e}();t["default"]=o,e.exports=t["default"]},d14c:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("b542"),s=r(a),u=n("e346"),l=r(u),c=n("35f3"),d=r(c),f=n("ceb1"),h=r(f),p=n("8a43"),m=r(p),g=n("1d48"),y=r(g),v=n("589e"),_=r(v),E=n("e172"),b=r(E),T=n("467b"),S=r(T),w=n("6a2d"),x=r(w);function I(e){e=e||{};var t=this.context,n=(0,m["default"])(t).getInstance(),r=e.manifestModel,i=e.dashManifestModel,a=e.mediaPlayerModel,u=e.manifestUpdater,c=e.adapter,f=e.capabilities,p=e.errHandler,g=e.timelineConverter,v=e.metricsModel,E=e.abrController,T=e.playbackController,S=e.mediaController,w=e.textController,I=e.videoModel,A=void 0,D=void 0,R=void 0,M=void 0,C=void 0,N=void 0,L=void 0,P=void 0,O=void 0,F=void 0,k=void 0,B=void 0,U=void 0,H=void 0,j=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function K(){D=(0,_["default"])(t).getInstance().getLogger(A),J(),F=(0,d["default"])(t).create({mediaPlayerModel:a,metricsModel:v,errHandler:p}),V()}function V(){n.on(y["default"].BUFFERING_COMPLETED,we,A),n.on(y["default"].DATA_UPDATE_COMPLETED,xe,A)}function q(){n.off(y["default"].DATA_UPDATE_COMPLETED,xe,A),n.off(y["default"].BUFFERING_COMPLETED,we,A)}function G(){O&&(n.on(y["default"].KEY_ERROR,ce,A),n.on(y["default"].SERVER_CERTIFICATE_UPDATED,ce,A),n.on(y["default"].LICENSE_REQUEST_COMPLETE,ce,A),n.on(y["default"].KEY_SYSTEM_SELECTED,ce,A),n.on(y["default"].KEY_SESSION_CREATED,ce,A),n.on(y["default"].KEY_STATUSES_CHANGED,ce,A))}function Y(){O&&(n.off(y["default"].KEY_ERROR,ce,A),n.off(y["default"].SERVER_CERTIFICATE_UPDATED,ce,A),n.off(y["default"].LICENSE_REQUEST_COMPLETE,ce,A),n.off(y["default"].KEY_SYSTEM_SELECTED,ce,A),n.off(y["default"].KEY_SESSION_CREATED,ce,A),n.off(y["default"].KEY_STATUSES_CHANGED,ce,A))}function z(e,t){N=e,O=t,G()}function W(e,t){if(!M){var r=void 0;return n.on(y["default"].CURRENT_TRACK_CHANGED,fe,A),Oe()?(_e(),r=t):r=ve(e,t),M=!0,r}return t}function X(e){for(var t=R?R.length:0,r=!1,i=0;i<t;i++){var o=R[i].getFragmentModel();o.removeExecutedRequestsBeforeTime(te()+ee()),R[i].reset(r,e)}R=[],M=!1,C=!1,Pe(!1),n.off(y["default"].CURRENT_TRACK_CHANGED,fe,A)}function $(){return M}function Q(e){for(var t=0;t<R.length;)de(R[t].getMediaInfo())?(R[t].setMediaSource(e),t++):(R[t].reset(),R.splice(t,1));for(t=0;t<R.length;t++)R[t].dischargePreBuffer();if(0===R.length){var n="No streams to play.";p.manifestError(n,"nostreams",r.getValue()),p.error(new x["default"](b["default"].MANIFEST_ERROR_ID_NOSTREAMS_CODE,n+"nostreams",r.getValue())),D.fatal(n)}}function J(){X(),N=null,L={},P=!1}function Z(){T&&T.pause(),F&&(F.reset(),F=null),J(),q(),Y(),Pe(!1)}function ee(){return N?N.duration:NaN}function te(){return N?N.start:NaN}function ne(){return N?N.id:null}function re(){return N}function ie(){return F}function oe(){return k}function ae(){if(!E||!E.hasOwnProperty("getBitrateList")||!c||!c.hasOwnProperty("getAllMediaInfoForType")||!c.hasOwnProperty("getEventsFor"))throw new Error(o["default"].MISSING_CONFIG_ERROR)}function se(e){if(ae(),e===o["default"].IMAGE)return k?k.getBitrateList():[];var t=Te(e);return E.getBitrateList(t)}function ue(){B&&B.start()}function le(){B&&B.stop()}function ce(e){e.error&&(p.mediaKeySessionError(e.error.message),p.error(e.error),D.fatal(e.error.message),Z())}function de(e){var t=e.type,n=void 0,i=void 0;if(t===o["default"].MUXED&&e)return i="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",D.fatal(i),p.manifestError(i,"multiplexedrep",r.getValue()),p.error(new x["default"](b["default"].MANIFEST_ERROR_ID_MULTIPLEXED_CODE,i,r.getValue())),!1;if(t===o["default"].TEXT||t===o["default"].FRAGMENTED_TEXT||t===o["default"].EMBEDDED_TEXT||t===o["default"].IMAGE)return!0;if(n=e.codec,D.debug(t+" codec: "+n),e.contentProtection&&!f.supportsEncryptedMedia())p.capabilityError("encryptedmedia"),p.error(new x["default"](b["default"].CAPABILITY_MEDIAKEYS_ERROR_CODE,b["default"].CAPABILITY_MEDIAKEYS_ERROR_MESSAGE));else if(!f.supportsCodec(n))return i=t+"Codec ("+n+") is not supported.",D.error(i),!1;return!0}function fe(e){if(e.newMediaInfo.streamInfo.id===N.id){var t=Ie(e.newMediaInfo);if(t){var n=T.getTime();D.info("Stream -  Process track changed at current time "+n);var i=e.newMediaInfo,a=r.getValue();c.setCurrentMediaInfo(N.id,i.type,i),D.debug("Stream -  Update stream controller"),a.refreshManifestOnSwitchTrack?(D.debug("Stream -  Refreshing manifest for switch track"),H=e,u.refreshManifest()):(t.selectMediaInfo(i),i.type!==o["default"].FRAGMENTED_TEXT?(E.updateTopQualityIndex(i),t.switchTrackAsked(),t.getFragmentModel().abortRequests()):(t.getScheduleController().setSeekTarget(NaN),c.setIndexHandlerTime(t,n),c.resetIndexHandler(t)))}}}function he(n,u,l,d){var f=(0,s["default"])(t).create({type:n.type,mimeType:n.mimeType,timelineConverter:g,adapter:c,manifestModel:r,dashManifestModel:i,mediaPlayerModel:a,metricsModel:v,dashMetrics:e.dashMetrics,baseURLController:e.baseURLController,stream:A,abrController:E,domStorage:e.domStorage,playbackController:T,mediaController:S,streamController:e.streamController,textController:w,errHandler:p});if(f.initialize(l),E.updateTopQualityIndex(n),d?(f.setBuffer(d.buffer),f.getIndexHandler().setCurrentTime(d.currentTime),R[d.replaceIdx]=f):R.push(f),!d||!d.ignoreMediaInfo)if(n.type===o["default"].TEXT||n.type===o["default"].FRAGMENTED_TEXT){for(var h=void 0,m=0;m<u.length;m++)u[m].index===n.index&&(h=m),f.addMediaInfo(u[m]);f.selectMediaInfo(u[h])}else f.addMediaInfo(n,!0)}function pe(n,r){var a=c.getAllMediaInfoForType(N,n),s=null,u=void 0;if(a&&0!==a.length){for(var l=0,d=a.length;l<d;l++)if(s=a[l],n===o["default"].EMBEDDED_TEXT)w.addEmbeddedTrack(s);else{if(!de(s))continue;S.addTrack(s)}n!==o["default"].EMBEDDED_TEXT&&0!==S.getTracksFor(n,N).length&&(n!==o["default"].IMAGE?((n!==o["default"].FRAGMENTED_TEXT||n===o["default"].FRAGMENTED_TEXT&&w.getTextDefaultEnabled())&&(S.checkInitialMediaSettingsForType(n,N),u=S.getCurrentTrackFor(n,N)),n!==o["default"].FRAGMENTED_TEXT||w.getTextDefaultEnabled()||(u=S.getTracksFor(n,N)[0]),he(u,a,r)):k=(0,h["default"])(t).create({dashManifestModel:i,adapter:c,baseURLController:e.baseURLController,stream:A,timelineConverter:e.timelineConverter}))}else D.info("No "+n+" data.")}function me(){B||(B=(0,l["default"])(t).create(),B.setConfig({manifestUpdater:u,playbackController:T}),ge())}function ge(){var e=c.getEventsFor(N);B.addInlineEvents(e)}function ye(e){B&&B.addInbandEvents(e)}function ve(e,t){ae();var n=I.getElement();me(),P=!0,Ee(o["default"].VIDEO),Ee(o["default"].AUDIO),(null===n||n&&/^VIDEO$/i.test(n.nodeName))&&pe(o["default"].VIDEO,e),pe(o["default"].AUDIO,e),pe(o["default"].TEXT,e),pe(o["default"].FRAGMENTED_TEXT,e),pe(o["default"].EMBEDDED_TEXT,e),pe(o["default"].MUXED,e),pe(o["default"].IMAGE,e);var i=Se(t);if(C=!0,P=!1,0===R.length){var a="No streams to play.";p.manifestError(a,"nostreams",r.getValue()),p.error(new x["default"](b["default"].MANIFEST_ERROR_ID_NOSTREAMS_CODE,a,r.getValue())),D.fatal(a)}else be();return i}function _e(){if(P=!0,ae(),Ee(o["default"].VIDEO),Ee(o["default"].AUDIO),C=!0,P=!1,0===R.length){var e="No streams to play.";p.manifestError(e,"nostreams",r.getValue()),D.debug(e)}else be()}function Ee(e){var t=c.getAdaptationForType(r.getValue(),N.index,e,N);t&&Array.isArray(t.Representation_asArray)&&(t.Representation_asArray=t.Representation_asArray.filter((function(e,n){if(0===n)return!0;var r=i.getCodec(t,n,!0);return!!f.supportsCodec(r)||(D.error("[Stream] codec not supported: "+r),!1)})))}function be(){for(var e=R.length,t=!!L.audio||!!L.video,r=t?new x["default"](b["default"].DATA_UPDATE_FAILED_ERROR_CODE,b["default"].DATA_UPDATE_FAILED_ERROR_MESSAGE):null,i=0;i<e;i++)if(R[i].isUpdating()||P)return;if(C){if(O)for(i=0;i<e&&R[i];i++)R[i].getType()!==o["default"].AUDIO&&R[i].getType()!==o["default"].VIDEO&&R[i].getType()!==o["default"].FRAGMENTED_TEXT||O.initializeForMedia(R[i].getMediaInfo());n.trigger(y["default"].STREAM_INITIALIZED,{streamInfo:N,error:r})}}function Te(e){for(var t=R.length,n=null,r=0;r<t;r++)if(n=R[r],n.getType()===e)return n.getMediaInfo();return null}function Se(e){for(var t={},n=0,r=R.length;n<r;n++)t[R[n].getType()]=R[n].createBuffer(e).getBuffer();return t}function we(e){if(e.streamInfo===N){var t=Ae(),r=t.length;if(0!==r){for(var i=0;i<r;i++)if(!t[i].isBufferingCompleted()&&(t[i].getType()===o["default"].AUDIO||t[i].getType()===o["default"].VIDEO))return void D.warn("onBufferingCompleted - One streamProcessor has finished but",t[i].getType(),"one is not buffering completed");D.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),n.trigger(y["default"].STREAM_BUFFERING_COMPLETED,{streamInfo:N})}else D.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}}function xe(e){var t=e.sender.getStreamProcessor();t.getStreamInfo()===N&&(L[t.getType()]=e.error,be())}function Ie(e){if(!e)return null;var t=Ae();return t.filter((function(t){return t.getType()===e.type}))[0]}function Ae(){for(var e=R.length,t=[],n=void 0,r=void 0,i=0;i<e;i++)r=R[i],n=r.getType(),n!==o["default"].AUDIO&&n!==o["default"].VIDEO&&n!==o["default"].FRAGMENTED_TEXT&&n!==o["default"].TEXT||t.push(r);return t}function De(e){D.info("Manifest updated... updating data system wide."),M=!1,P=!0,N=e,B&&ge(),Ee(o["default"].VIDEO),Ee(o["default"].AUDIO);for(var t=0,n=R.length;t<n;t++){var r=R[t],i=c.getMediaInfoForType(N,r.getType());E.updateTopQualityIndex(i),r.addMediaInfo(i,!0)}if(H){i=H.newMediaInfo;if("fragmentedText"!==i.type){var a=Ie(H.oldMediaInfo);if(!a)return;a.switchTrackAsked(),H=void 0}}P=!1,be()}function Re(e){return Ne(e,o["default"].VIDEO)&&Ne(e,o["default"].AUDIO)}function Me(e){return Ce(e,o["default"].VIDEO)&&Ce(e,o["default"].AUDIO)}function Ce(e,t){if(!e)return!1;var n=e.getStreamInfo(),i=re();if(!n||!i)return!1;var o=c.getAdaptationForType(r.getValue(),n.index,t,n),a=c.getAdaptationForType(r.getValue(),i.index,t,i);return o&&a?!o.ContentProtection&&!a.ContentProtection:!o&&!a}function Ne(e,t){if(!e)return!1;var n=e.getStreamInfo(),i=re();if(!n||!i)return!1;var o=c.getAdaptationForType(r.getValue(),n.index,t,n),a=c.getAdaptationForType(r.getValue(),i.index,t,i);if(!o||!a)return!o&&!a;var s=o&&a&&o.mimeType===a.mimeType,u=a.Representation_asArray.map((function(e){return e.codecs})),l=o.Representation_asArray.map((function(e){return e.codecs})),d=l.some((function(e){return u.indexOf(e)>-1})),f=l.some((function(e){return u.some((function(t){return Le(t,e)}))}));return d||f&&s}function Le(e,t){for(var n=e.split(".")[0],r=0===t.indexOf(n),i=void 0,o=0;o<j.length;o++)if(j[o].codec===n){i=j[o];break}return i?r||i.compatibleCodecs.some((function(e){return 0===t.indexOf(e)})):r}function Pe(e){U=e}function Oe(){return U}function Fe(e,t){me(),pe(o["default"].VIDEO,e),pe(o["default"].AUDIO,e),pe(o["default"].TEXT,e),pe(o["default"].FRAGMENTED_TEXT,e),pe(o["default"].EMBEDDED_TEXT,e),pe(o["default"].MUXED,e),pe(o["default"].IMAGE,e),Se(t),n.on(y["default"].CURRENT_TRACK_CHANGED,fe,A);for(var r=0;r<R.length&&R[r];r++)R[r].getScheduleController().start();Pe(!0)}return A={initialize:z,activate:W,deactivate:X,isActive:$,getDuration:ee,getStartTime:te,getId:ne,getStreamInfo:re,preload:Fe,getFragmentController:ie,getThumbnailController:oe,getBitrateListFor:se,startEventController:ue,stopEventController:le,updateData:De,reset:Z,getProcessors:Ae,setMediaSource:Q,isMediaCodecCompatible:Re,isProtectionCompatible:Me,getPreloaded:Oe,addInbandEvents:ye},K(),A}I.__dashjs_factory_name="Stream",t["default"]=S["default"].getClassFactory(I),e.exports=t["default"]},d17b:function(e,t,n){e.exports=n("e372").Transform},d20c:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("589e"),s=r(a),u=n("8a43"),l=r(u),c=n("1d48"),d=r(c),f=n("556a");function h(){var e=this.context,t=(0,l["default"])(e).getInstance(),n=void 0,r=void 0,i=0;function o(){r=(0,s["default"])(e).getInstance().getLogger(n)}function a(){var e="cue_TTML_"+i;return i++,e}function u(e,n,i,o,s){var u="",l=[],c=void 0,h=void 0,p=void 0,m={},g={},y="",v="",_={onOpenTag:function(e,t,n){if("image"===t&&"http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===e){if(!n[" imagetype"]||"PNG"!==n[" imagetype"].value)return void r.warn("smpte-tt imagetype != PNG. Discarded");y=n["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){y&&(g[y]=v.trim()),v="",y=""},onText:function(e){y&&(v+=e)}};if(!e)throw u="no ttml data to parse",new Error(u);m.data=e,t.trigger(d["default"].TTML_TO_PARSE,m);var E=(0,f.fromXML)(m.data,(function(e){u=e}),_);t.trigger(d["default"].TTML_PARSED,{ttmlString:m.data,ttmlDoc:E});var b=E.getMediaTimeEvents();for(p=0;p<b.length;p++){var T=(0,f.generateISD)(E,b[p],(function(e){u=e}));T.contents.some((function(e){return e.contents.length}))&&(c=b[p]+n<i?i:b[p]+n,h=b[p+1]+n>o?o:b[p+1]+n,c<h&&l.push({start:c,end:h,type:"html",cueID:a(),isd:T,images:s,embeddedImages:g}))}if(""!==u)throw r.error(u),new Error(u);return l}return n={parse:u},o(),n}h.__dashjs_factory_name="TTMLParser",t["default"]=o["default"].getSingletonFactory(h),e.exports=t["default"]},d25a:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("589e"),o=r(i),a=n("82aa"),s=r(a),u=n("467b"),l=r(u),c=n("3e2c"),d=r(c),f=n("502a"),h=r(f);function p(){var e=void 0,t=void 0,n=this.context;function r(){e=(0,o["default"])(n).getInstance().getLogger(t)}function i(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=d["default"].parseBuffer(e),r=(0,s["default"])(n).create();return r.setData(t),r}function a(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new h["default"](0,!1);var r=t instanceof ArrayBuffer?new Uint8Array(t):t,i=void 0,o=0;while(n<r.byteLength){var a=c(r,n),s=f(r,n+4);if(0===a)break;n+a<=r.byteLength&&(e.indexOf(s)>=0?i=new h["default"](n,!0,a):o=n+a),n+=a}return i||new h["default"](o,!1)}function u(e){if(!e||0===e.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var t=i(e),n=t.getBoxes("moof"),r=t.getBoxes("mfhd"),o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,d=void 0,f=void 0,h=void 0,p=void 0,m=void 0,g=void 0,y=void 0,v=void 0,_=void 0,E=void 0,b=void 0;E=t.getBoxes("moof").length,_=r[r.length-1].sequence_number,s=0,c=[];var T=-1,S=-1;for(m=0;m<n.length;m++){var w=n[m],x=w.getChildBoxes("traf");for(h=0;h<x.length;h++){var I=x[h],A=I.getChildBox("tfhd"),D=I.getChildBox("tfdt");l=D.baseMediaDecodeTime;var R=I.getChildBoxes("trun"),M=I.getChildBoxes("subs");for(p=0;p<R.length;p++){var C=R[p];for(s=C.sample_count,v=(A.base_data_offset||0)+(C.data_offset||0),f=0;f<s;f++){d=C.samples[f],o=void 0!==d.sample_duration?d.sample_duration:A.default_sample_duration,u=void 0!==d.sample_size?d.sample_size:A.default_sample_size,a=void 0!==d.sample_composition_time_offset?d.sample_composition_time_offset:0;var N={dts:l,cts:l+a,duration:o,offset:w.offset+v,size:u,subSizes:[u]};if(M)for(g=0;g<M.length;g++){var L=M[g];if(T<L.entry_count-1&&f>S&&(T++,S+=L.entries[T].sample_delta),f==S){N.subSizes=[];var P=L.entries[T];for(y=0;y<P.subsample_count;y++)N.subSizes.push(P.subsamples[y].subsample_size)}}c.push(N),v+=u,l+=o}}b=l-D.baseMediaDecodeTime}}return{sampleList:c,lastSequenceNumber:_,totalDuration:b,numSequences:E}}function l(e){var t=i(e),n=t?t.getBox("mdhd"):void 0;return n?n.timescale:NaN}function c(e,t){return e[t+3]>>>0|e[t+2]<<8>>>0|e[t+1]<<16>>>0|e[t]<<24>>>0}function f(e,t){return String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t])}function p(t){var n=null,r=void 0,o=void 0,a=i(t);if(!a)return n;var s=a.getBox("ftyp"),u=a.getBox("moov");return e.debug("Searching for initialization."),u&&u.isComplete&&(r=s?s.offset:u.offset,o=u.offset+u.size-1,n=r+"-"+o,e.debug("Found the initialization.  Range: "+n)),n}return t={parse:i,findLastTopIsoBoxCompleted:a,getMediaTimescaleFromMoov:l,getSamplesInfo:u,findInitRange:p},r(),t}p.__dashjs_factory_name="BoxParser",t["default"]=l["default"].getSingletonFactory(p),e.exports=t["default"]},d395:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.t=null,this.level=null};t["default"]=i,e.exports=t["default"]},d3f4:function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},d485:function(e,t,n){e.exports=o;var r=n("faa1").EventEmitter,i=n("3fb5");function o(){r.call(this)}i(o,r),o.Readable=n("e372"),o.Writable=n("2c63"),o.Duplex=n("0960"),o.Transform=n("d17b"),o.PassThrough=n("c2ae"),o.Stream=o,o.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",u));var a=!1;function s(){a||(a=!0,e.end())}function u(){a||(a=!0,"function"===typeof e.destroy&&e.destroy())}function l(e){if(c(),0===r.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",i),e.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",l),e.on("error",l),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e}},d53b:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},d547:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},o=function e(){r(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},a=function e(){r(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null};t.ManifestUpdate=i,t.ManifestUpdateStreamInfo=o,t.ManifestUpdateRepresentationInfo=a},d5e2:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("0757"),o=n("467b"),a=r(o),s=n("47e4"),u=r(s),l=n("8b38"),c=r(l);function d(e){e=e||{};var t=void 0,n=e.dashManifestModel,r=e.manifestModel;function o(e){var t=r.getValue();return t?t.Period_asArray[e]:-1}function a(e,t){var n=void 0,r=o(t);return n=I(r,e),null===n?null:n.bandwidth}function s(e,t){var n=o(t);return x(n,e)}function l(e,t){var n=o(t);return D(n,e)}function d(e){return y(e,u["default"].TRACK_SWITCH)}function f(e){return y(e,u["default"].BUFFER_LEVEL)}function h(e){var t=f(e);return t?c["default"].round10(t.level/1e3,-3):0}function p(e){return e?e.RequestsQueue:null}function m(e){if(!e)return null;var t=e.HttpList,n=null,r=void 0,i=void 0;if(!t||t.length<=0)return null;r=t.length,i=r-1;while(i>=0){if(t[i].responsecode){n=t[i];break}i--}return n}function g(e){return e&&e.HttpList?e.HttpList:[]}function y(e,t){if(!e)return null;var n=e[t];return!n||n.length<=0?null:n[n.length-1]}function v(e){return y(e,u["default"].DROPPED_FRAMES)}function _(e){return y(e,u["default"].SCHEDULING_INFO)}function E(e){return y(e,u["default"].MANIFEST_UPDATE)}function b(e){return y(e,u["default"].DVR_INFO)}function T(e,t){var n={},r=void 0,o=void 0,a=void 0;for(r=g(e),a=r.length-1;a>=0;a--)if(o=r[a],o.type===i.HTTPRequest.MPD_TYPE){n=w(o._responseHeaders);break}return void 0===n[t]?null:n[t]}function S(e,t){var n={},r=m(e);return r&&(n=w(r._responseHeaders)),void 0===n[t]?null:n[t]}function w(e){var t={};if(!e)return t;for(var n=e.trim().split("\r\n"),r=0,i=n.length;r<i;r++){var o=n[r],a=o.indexOf(": ");a>0&&(t[o.substring(0,a)]=o.substring(a+2))}return t}function x(e,t){var n=I(e,t,!0);return null!==n?n:-1}function I(e,t,n){var r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=void 0;if(e)for(i=e.AdaptationSet_asArray,s=0;s<i.length;s+=1)for(r=i[s],a=r.Representation_asArray,u=0;u<a.length;u+=1)if(o=a[u],t===o.id)return n?u:o;return null}function A(e,t){return n.getIsTypeOf(e,t)}function D(e,t){var n=void 0,r=void 0,i=void 0,o=void 0;if(!e||!t)return-1;for(r=e.AdaptationSet_asArray,o=0;o<r.length;o+=1)if(n=r[o],i=n.Representation_asArray,A(n,t))return i.length;return-1}return t={getBandwidthForRepresentation:a,getIndexForRepresentation:s,getMaxIndexForBufferType:l,getCurrentRepresentationSwitch:d,getLatestBufferLevelVO:f,getCurrentBufferLevel:h,getCurrentHttpRequest:m,getHttpRequests:g,getCurrentDroppedFrames:v,getCurrentSchedulingInfo:_,getCurrentDVRInfo:b,getCurrentManifestUpdate:E,getLatestFragmentRequestHeaderValueByID:S,getLatestMPDRequestHeaderValueByID:T,getRequestsQueue:p},t}d.__dashjs_factory_name="DashMetrics",t["default"]=a["default"].getSingletonFactory(d),e.exports=t["default"]},d665:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("1d48"),s=r(a),u=n("8a43"),l=r(u),c=n("467b"),d=r(c),f=n("589e"),h=r(f),p="neverReplace",m="alwaysReplace",g="highestBitrate",y="widestRange",v=g;function _(){var e=this.context,t=(0,l["default"])(e).getInstance(),n=void 0,r=void 0,i=void 0,a=void 0,u=void 0,c=void 0,d=void 0,f=[m,p],_=[g,y];function E(){r=(0,h["default"])(e).getInstance().getLogger(n),F()}function b(e,t){var n=D(e),r=S(e,t),i=[];e!==o["default"].FRAGMENTED_TEXT?(n||(n=d.getSavedMediaSettings(e),A(e,n)),r&&0!==r.length&&(n&&r.forEach((function(e){B(n,e)&&i.push(e)})),0===i.length?I(j(r)):i.length>1?I(j(i)):I(i[0]))):I(r[0])}function T(e){if(e){var t=e.type;if(L(t)){var n=e.streamInfo.id;i[n]||(i[n]=K());for(var r=i[n][t].list,o=0,a=r.length;o<a;++o)if(P(r[o],e))return;r.push(e);var s=D(t);s&&B(s,e)&&!w(t,e.streamInfo)&&I(e)}}}function S(e,t){if(!e||!t)return[];var n=t.id;return i[n]&&i[n][e]?i[n][e].list:[]}function w(e,t){return!e||!t||t&&!i[t.id]?null:i[t.id][e].current}function x(e){if(!e)return!1;var t=e.type,n=e.streamInfo.id;return i[n]&&i[n][t]&&P(i[n][t].current,e)}function I(e){if(e&&e.streamInfo){var n=e.type,r=e.streamInfo,o=r.id,a=w(n,r);if(i[o]&&i[o][n]&&!P(e,a)){i[o][n].current=e,i[o][n].current&&t.trigger(s["default"].CURRENT_TRACK_CHANGED,{oldMediaInfo:a,newMediaInfo:e,switchMode:c[n]});var u=k(e);u&&i[o][n].storeLastSettings&&(u.roles&&(u.role=u.roles[0],delete u.roles),u.accessibility&&(u.accessibility=u.accessibility[0]),u.audioChannelConfiguration&&(u.audioChannelConfiguration=u.audioChannelConfiguration[0]),d.setSavedMediaSettings(n,u))}}}function A(e,t){e&&t&&(a[e]=t)}function D(e){return e?a[e]:null}function R(e,t){var n=-1!==f.indexOf(t);n?c[e]=t:r.warn("Track switch mode is not supported: "+t)}function M(e){return c[e]}function C(e){var t=-1!==_.indexOf(e);t?u=e:r.warn("Track selection mode is not supported: "+e)}function N(){return u||v}function L(e){return e===o["default"].AUDIO||e===o["default"].VIDEO||e===o["default"].TEXT||e===o["default"].FRAGMENTED_TEXT||e===o["default"].IMAGE}function P(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;var n=e.id===t.id,r=e.viewpoint===t.viewpoint,i=e.lang===t.lang,o=e.roles.toString()===t.roles.toString(),a=e.accessibility.toString()===t.accessibility.toString(),s=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&r&&i&&o&&a&&s}function O(e){e&&e.domStorage&&(d=e.domStorage)}function F(){i={},H(),U()}function k(e){var t={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration},n=t.lang||t.viewpoint||t.role&&t.role.length>0||t.accessibility&&t.accessibility.length>0||t.audioChannelConfiguration&&t.audioChannelConfiguration.length>0;return n?t:null}function B(e,t){var n=!e.lang||e.lang===t.lang,r=!e.viewpoint||e.viewpoint===t.viewpoint,i=!e.role||!!t.roles.filter((function(t){return t===e.role}))[0],o=!e.accessibility||!!t.accessibility.filter((function(t){return t===e.accessibility}))[0],a=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter((function(t){return t===e.audioChannelConfiguration}))[0];return n&&r&&i&&o&&a}function U(){c={audio:m,video:p}}function H(){a={audio:null,video:null}}function j(e){var t=N(),n=[],i=function(e){var t=0,n=[],r=void 0;return e.forEach((function(e){r=Math.max.apply(Math,e.bitrateList.map((function(e){return e.bandwidth}))),r>t?(t=r,n=[e]):r===t&&n.push(e)})),n},o=function(e){var t=0,n=[],r=void 0;return e.forEach((function(e){r=e.representationCount,r>t?(t=r,n=[e]):r===t&&n.push(e)})),n};switch(t){case g:n=i(e),n.length>1&&(n=o(n));break;case y:n=o(e),n.length>1&&(n=i(e));break;default:r.warn("Track selection mode is not supported: "+t);break}return n[0]}function K(){return{audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}}}return n={checkInitialMediaSettingsForType:b,addTrack:T,getTracksFor:S,getCurrentTrackFor:w,isCurrentTrack:x,setTrack:I,setInitialSettings:A,getInitialSettings:D,setSwitchMode:R,getSwitchMode:M,setSelectionModeForInitialTrack:C,getSelectionModeForInitialTrack:N,isMultiTrackSupportedByType:L,isTracksEqual:P,setConfig:O,reset:F},E(),n}_.__dashjs_factory_name="MediaController";var E=d["default"].getSingletonFactory(_);E.TRACK_SWITCH_MODE_NEVER_REPLACE=p,E.TRACK_SWITCH_MODE_ALWAYS_REPLACE=m,E.TRACK_SELECTION_MODE_HIGHEST_BITRATE=g,E.TRACK_SELECTION_MODE_WIDEST_RANGE=y,E.DEFAULT_INIT_TRACK_SELECTION_MODE=v,d["default"].updateSingletonFactory(_.__dashjs_factory_name,E),t["default"]=E,e.exports=t["default"]},d6ce:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.time=null,this.range=null,this.manifestInfo=null};t["default"]=i,e.exports=t["default"]},d82e:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){i(this,e),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null}return r(e,[{key:"isMediaInfoEqual",value:function(e){if(!e)return!1;var t=this.id===e.id,n=this.viewpoint===e.viewpoint,r=this.lang===e.lang,i=this.roles.toString()===e.roles.toString(),o=this.accessibility.toString()===e.accessibility.toString(),a=this.audioChannelConfiguration.toString()===e.audioChannelConfiguration.toString();return t&&n&&r&&i&&o&&a}}]),e}();t["default"]=o,e.exports=t["default"]},d864:function(e,t,n){var r=n("79aa");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},d8e8:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},d9f6:function(e,t,n){var r=n("e4ae"),i=n("794b"),o=n("1bc3"),a=Object.defineProperty;t.f=n("8e60")?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},daa7:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("e217"),o=r(i),a=n("5fb0"),s=r(a),u=n("d0a4"),l=r(u),c=n("6a2d"),d=r(c),f=n("b4be"),h=r(f),p=n("f288"),m=r(p),g=n("7b70"),y=r(g);function v(e){e=e||{};var t=this.context,n=e.eventBus,r=e.events,i=e.debug,a=void 0,u=void 0,c=void 0,f=void 0,p=void 0,g=void 0,v=void 0,_=void 0;function E(){u=i.getLogger(a),c=null,f=null,p=null,g=[],_=(0,o["default"])(t).getInstance(),v=F()}function b(){var e=g.length,t=void 0;0!==e?function(){for(var i=function(e){k(e),0===g.length&&(f?(f.removeEventListener("encrypted",v),f.setMediaKeys(null).then((function(){n.trigger(r.TEARDOWN_COMPLETE)}))):n.trigger(r.TEARDOWN_COMPLETE))},o=0;o<e;o++)t=g[o],function(e){t.session.closed.then((function(){i(e)})),O(t)["catch"]((function(){i(e)}))}(t)}():n.trigger(r.TEARDOWN_COMPLETE)}function T(){for(var e=void 0,t=0;t<g.length;t++)e=g[t],e.getUsable()||O(e)["catch"]((function(){k(e)}))}function S(){return c}function w(){for(var e=[],t=0;t<g.length;t++)g[t].initData&&e.push(g[t].initData);return e}function x(e){P(e,0)}function I(e){e.mksa.createMediaKeys().then((function(t){c=e.keySystem,p=t,f?f.setMediaKeys(p).then((function(){n.trigger(r.INTERNAL_KEY_SYSTEM_SELECTED)})):n.trigger(r.INTERNAL_KEY_SYSTEM_SELECTED)}))["catch"]((function(){n.trigger(r.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+e.keySystem.systemString+")! Could not create MediaKeys -- TODO"})}))}function A(e){f!==e&&(f&&(f.removeEventListener("encrypted",v),f.setMediaKeys&&f.setMediaKeys(null)),f=e,f&&(f.addEventListener("encrypted",v),f.setMediaKeys&&p&&f.setMediaKeys(p)))}function D(e){if(!c||!p)throw new Error("Can not set server certificate until you have selected a key system");p.setServerCertificate(e).then((function(){u.info("DRM: License server certificate successfully updated."),n.trigger(r.SERVER_CERTIFICATE_UPDATED)}))["catch"]((function(e){n.trigger(r.SERVER_CERTIFICATE_UPDATED,{error:new d["default"](l["default"].SERVER_CERTIFICATE_UPDATED_ERROR_CODE,l["default"].SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)})}))}function R(e,t,i){if(!c||!p)throw new Error("Can not create sessions until you have selected a key system");var o=p.createSession(i),a=U(o,e,i),s=this.getKeySystem(),f=s.systemString===y["default"].CLEARKEY_KEYSTEM_STRING&&t&&t.clearkeys?"keyids":"cenc";o.generateRequest(f,e).then((function(){u.debug("DRM: Session created.  SessionID = "+a.getSessionID()),n.trigger(r.KEY_SESSION_CREATED,{data:a})}))["catch"]((function(e){k(a),n.trigger(r.KEY_SESSION_CREATED,{data:null,error:new d["default"](l["default"].KEY_SESSION_CREATED_ERROR_CODE,l["default"].KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)})}))}function M(e,t){var i=e.session;_.isClearKey(c)&&(t=t.toJWK()),i.update(t)["catch"]((function(t){n.trigger(r.KEY_ERROR,{data:new d["default"](l["default"].MEDIA_KEYERR_CODE,"Error sending update() message! "+t.name,e)})}))}function C(e,t,i){if(!c||!p)throw new Error("Can not load sessions until you have selected a key system");for(var o=0;o<g.length;o++)if(e===g[o].sessionId)return void u.warn("DRM: Ignoring session ID because we have already seen it!");var a=p.createSession(i),s=U(a,t,i,e);a.load(e).then((function(t){t?(u.debug("DRM: Session loaded.  SessionID = "+s.getSessionID()),n.trigger(r.KEY_SESSION_CREATED,{data:s})):(k(s),n.trigger(r.KEY_SESSION_CREATED,{data:null,error:new d["default"](l["default"].KEY_SESSION_CREATED_ERROR_CODE,l["default"].KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+e+")")}))}))["catch"]((function(t){k(s),n.trigger(r.KEY_SESSION_CREATED,{data:null,error:new d["default"](l["default"].KEY_SESSION_CREATED_ERROR_CODE,l["default"].KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+e+")! "+t.name)})}))}function N(e){var t=e.session;t.remove().then((function(){u.debug("DRM: Session removed.  SessionID = "+e.getSessionID()),n.trigger(r.KEY_SESSION_REMOVED,{data:e.getSessionID()})}),(function(t){n.trigger(r.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+e.getSessionID()+"). "+t.name})}))}function L(e){O(e)["catch"]((function(t){k(e),n.trigger(r.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.getSessionID()+") "+t.name})}))}function P(e,t){void 0!==navigator.requestMediaKeySystemAccess&&"function"===typeof navigator.requestMediaKeySystemAccess?function(t){var i=e[t].ks,o=e[t].configs,a=i.systemString;a===y["default"].PLAYREADY_KEYSTEM_STRING&&"required"===o[0].persistentState&&(a+=".recommendation"),navigator.requestMediaKeySystemAccess(a,o).then((function(e){var t="function"===typeof e.getConfiguration?e.getConfiguration():null,o=new m["default"](i,t);o.mksa=e,n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{data:o})}))["catch"]((function(i){++t<e.length?P(e,t):n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! "+i.message})}))}(t):n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Insecure origins are not allowed"})}function O(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function F(){return{handleEvent:function(e){switch(e.type){case"encrypted":if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;n.trigger(r.NEED_KEY,{key:new s["default"](t,e.initDataType)})}break}}}}function k(e){for(var t=0;t<g.length;t++)if(g[t]===e){g.splice(t,1);break}}function B(e){var t=void 0,n=void 0;return e&&e.length>0&&(e[0]&&("string"===typeof e[0]?t=e[0]:n=e[0]),e[1]&&("string"===typeof e[1]?t=e[1]:n=e[1])),{status:t,keyId:n}}function U(e,t,i,o){var a={session:e,initData:t,sessionId:o,handleEvent:function(e){switch(e.type){case"keystatuseschange":n.trigger(r.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach((function(){var e=B(arguments);switch(e.status){case"expired":n.trigger(r.INTERNAL_KEY_STATUS_CHANGED,{error:new d["default"](l["default"].KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,l["default"].KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)});break;default:n.trigger(r.INTERNAL_KEY_STATUS_CHANGED,e);break}}));break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;n.trigger(r.INTERNAL_KEY_MESSAGE,{data:new h["default"](this,t,void 0,e.messageType)});break}},getSessionID:function(){return e.sessionId},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getUsable:function(){var t=!1;return e.keyStatuses.forEach((function(){var e=B(arguments);"usable"===e.status&&(t=!0)})),t},getSessionType:function(){return i}};return e.addEventListener("keystatuseschange",a),e.addEventListener("message",a),e.closed.then((function(){k(a),u.debug("DRM: Session closed.  SessionID = "+a.getSessionID()),n.trigger(r.KEY_SESSION_CLOSED,{data:a.getSessionID()})})),g.push(a),a}return a={getAllInitData:w,requestKeySystemAccess:x,getKeySystem:S,selectKeySystem:I,setMediaElement:A,setServerCertificate:D,createKeySession:R,updateKeySession:M,loadKeySession:C,removeKeySession:N,closeKeySession:L,stop:T,reset:b},E(),a}v.__dashjs_factory_name="ProtectionModel_21Jan2015",t["default"]=dashjs.FactoryMaker.getClassFactory(v),e.exports=t["default"]},db66:function(e,t,n){"use strict";(function(e){var t={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},n=function(e){var n=e;return t.hasOwnProperty(e)&&(n=t[e]),String.fromCharCode(n)},r=15,i=32,o={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},a={17:2,18:4,21:6,22:8,23:10,19:13,20:15},s={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},u={25:2,26:4,29:6,30:8,31:10,27:13,28:15},l=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],c={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},d=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},f=function(e,t,n,r,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1};f.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var h=function(e,t,n,r,i,o){this.uchar=e||" ",this.penState=new f(t,n,r,i,o)};h.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var p=function(){this.chars=[];for(var e=0;e<i;e++)this.chars.push(new h);this.pos=0,this.currPenState=new f};p.prototype={equals:function(e){for(var t=!0,n=0;n<i;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<i;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<i;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(c.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>i&&(c.log("ERROR","Too large cursor position "+this.pos),this.pos=i)},moveCursor:function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){e>=144&&this.backSpace();var t=n(e);this.pos>=i?c.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},clearFromPos:function(e){var t;for(t=e;t<i;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;n<i;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e);var t=this.chars[this.pos];t.setPenState(this.currPenState)}};var m=function(){this.rows=[];for(var e=0;e<r;e++)this.rows.push(new p);this.currRow=r-1,this.nrRollUpRows=null,this.reset()};m.prototype={reset:function(){for(var e=0;e<r;e++)this.rows[e].clear();this.currRow=r-1},equals:function(e){for(var t=!0,n=0;n<r;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<r;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<r;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){var e=this.rows[this.currRow];e.backSpace()},clearToEndOfRow:function(){var e=this.rows[this.currRow];e.clearToEndOfRow()},insertChar:function(e){var t=this.rows[this.currRow];t.insertChar(e)},setPen:function(e){var t=this.rows[this.currRow];t.setPenStyles(e)},moveCursor:function(e){var t=this.rows[this.currRow];t.moveCursor(e)},setCursor:function(e){c.log("INFO","setCursor: "+e);var t=this.rows[this.currRow];t.setCursor(e)},setPAC:function(e){c.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n=this.rows[this.currRow];if(null!==e.indent){var r=e.indent,i=Math.max(r-1,0);n.setCursor(e.indent),e.color=n.chars[i].penState.foreground}var o={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(o)},setBkgData:function(e){c.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null!==this.nrRollUpRows){c.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),c.log("INFO","Rolling up")}else c.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",i=-1,o=0;o<r;o++){var a=this.rows[o].getTextString();a&&(i=o+1,e?t.push("Row "+i+': "'+a+'"'):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},getTextAndFormat:function(){return this.rows}};var g=function(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new m,this.nonDisplayedMemory=new m,this.lastOutputScreen=new m,this.currRollUpRow=this.displayedMemory.rows[r-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};g.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[r-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,c.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";c.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(c.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){c.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){c.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){c.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){c.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){c.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){c.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){c.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){c.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){c.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){c.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){c.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(c.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,c.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){c.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}c.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=c.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};var y=function(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new g(1,t),new g(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};y.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,r,i,o=!1;this.lastTime=e,c.setTime(e);for(var a=0;a<t.length;a+=2)if(r=127&t[a],i=127&t[a+1],r>=16&&r<=31&&r===this.lastCmdA&&i===this.lastCmdB)this.lastCmdA=null,this.lastCmdB=null,c.log("DEBUG","Repeated command ("+d([r,i])+") is dropped");else if(0!==r||0!==i){if(c.log("DATA","["+d([t[a],t[a+1]])+"] -> ("+d([r,i])+")"),n=this.parseCmd(r,i),n||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n&&(o=this.parseChars(r,i),o))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(o)}else c.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,c.log("WARNING","Couldn't parse cleaned data "+d([r,i])+" orig: "+d([t[a],t[a+1]])))}else this.dataCounters.padding+=2},parseCmd:function(e,t){var n=null,r=(20===e||21===e||28===e||29===e)&&32<=t&&t<=47,i=(23===e||31===e)&&33<=t&&t<=35;if(!r&&!i)return!1;n=20===e||21===e||23===e?1:2;var o=this.channels[n-1];return 20===e||21===e||28===e||29===e?32===t?o.cc_RCL():33===t?o.cc_BS():34===t?o.cc_AOF():35===t?o.cc_AON():36===t?o.cc_DER():37===t?o.cc_RU(2):38===t?o.cc_RU(3):39===t?o.cc_RU(4):40===t?o.cc_FON():41===t?o.cc_RDC():42===t?o.cc_TR():43===t?o.cc_RTD():44===t?o.cc_EDM():45===t?o.cc_CR():46===t?o.cc_ENM():47===t&&o.cc_EOC():o.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if(n=17===e?1:2,n!==this.currChNr)return c.log("ERROR","Mismatch channel in midrow parsing"),!1;var r=this.channels[n-1];return r.insertChars([32]),r.cc_MIDROW(t),c.log("DEBUG","MIDROW ("+d([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0}return!1},parsePAC:function(e,t){var n=null,r=null,i=(17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127,l=(16===e||24===e)&&64<=t&&t<=95;if(!i&&!l)return!1;n=e<=23?1:2,r=64<=t&&t<=95?1===n?o[e]:s[e]:1===n?a[e]:u[e];var c=this.interpretPAC(r,t),d=this.channels[n-1];return d.setPAC(c),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1===(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},parseChars:function(e,t){var r=null,i=null,o=null;if(e>=25?(r=2,o=e-8):(r=1,o=e),17<=o&&o<=19){var a=t;a=17===o?t+80:18===o?t+112:t+144,c.log("INFO","Special char '"+n(a)+"' in channel "+r),i=[a],this.lastCmdA=e,this.lastCmdB=t}else 32<=e&&e<=127&&(i=0===t?[e]:[e,t],this.lastCmdA=null,this.lastCmdB=null);if(i){var s=d(i);c.log("DEBUG","Char codes =  "+s.join(","))}return i},parseBackgroundAttributes:function(e,t){var n,r,i,o,a=(16===e||24===e)&&32<=t&&t<=47,s=(23===e||31===e)&&45<=t&&t<=47;return!(!a&&!s)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=l[r],t%2===1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,o=this.channels[i-1],o.setBkgData(n),this.lastCmdA=e,this.lastCmdB=t,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}};var v=function(e,t,n){var r=0,i=t,o=0,a=[],s=function(e,t,n,r){if(4!==e||t<8)return null;var i=n.getUint8(r),o=n.getUint16(r+1),a=n.getUint32(r+3),s=n.getUint8(r+7);return 181==i&&49==o&&1195456820==a&&3==s};while(i<t+n){if(r=e.getUint32(i),o=31&e.getUint8(i+4),6===o){var u=i+5,l=-1;while(u<i+4+r-1){l=0;var c=255;while(255===c)c=e.getUint8(u),l+=c,u++;var d=0;c=255;while(255===c)c=e.getUint8(u),d+=c,u++;s(l,d,e,u)&&a.push([u,d]),u+=d}}i+=r+4}return a},_=function(e,t){var n=t[0],r=[[],[]];n+=8;var i=31&e.getUint8(n);n+=2;for(var o=0;o<i;o++){var a=e.getUint8(n),s=4&a,u=3&a;n++;var l=e.getUint8(n);n++;var c=e.getUint8(n);n++,s&&(127&l)+(127&c)!==0&&(0===u?(r[0].push(l),r[0].push(c)):1===u&&(r[1].push(l),r[1].push(c)))}return r};e.logger=c,e.PenState=f,e.CaptionScreen=m,e.Cea608Parser=y,e.findCea608Nalus=v,e.extractCea608DataFromRange=_})(t)},dbdb:function(e,t,n){var r=n("584a"),i=n("e53d"),o="__core-js_shared__",a=i[o]||(i[o]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n("b8e3")?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},dc14:function(e,t,n){"use strict";(function(t,r){var i=n("966d");function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){F(t,e)}}e.exports=_;var a,s=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?setImmediate:i.nextTick;_.WritableState=v;var u=n("3a7c");u.inherits=n("3fb5");var l={deprecate:n("b7d1")},c=n("429b"),d=n("8707").Buffer,f=r.Uint8Array||function(){};function h(e){return d.from(e)}function p(e){return d.isBuffer(e)||e instanceof f}var m,g=n("4681");function y(){}function v(e,t){a=a||n("b19a"),e=e||{};var r=t instanceof a;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,s=e.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===e.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){A(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function _(e){if(a=a||n("b19a"),!m.call(_,this)&&!(this instanceof a))return new _(e);this._writableState=new v(e,this),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),c.call(this)}function E(e,t){var n=new Error("write after end");e.emit("error",n),i.nextTick(t,n)}function b(e,t,n,r){var o=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"===typeof n||void 0===n||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),i.nextTick(r,a),o=!1),o}function T(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=d.from(t,n)),t}function S(e,t,n,r,i,o){if(!n){var a=T(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else w(e,t,!1,s,r,i,o);return u}function w(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function x(e,t,n,r,o){--t.pendingcb,n?(i.nextTick(o,r),i.nextTick(P,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(o(r),e._writableState.errorEmitted=!0,e.emit("error",r),P(e,t))}function I(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function A(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(I(n),t)x(e,n,r,t,i);else{var o=C(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||M(e,n),r?s(D,e,n,o,i):D(e,n,o,i)}}function D(e,t,n,r){n||R(e,t),t.pendingcb--,r(),P(e,t)}function R(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function M(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;var s=0,u=!0;while(n)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,w(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{while(n){var l=n.chunk,c=n.encoding,d=n.callback,f=t.objectMode?1:l.length;if(w(e,t,!1,f,l,c,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function N(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),P(e,t)}))}function L(e,t){t.prefinished||t.finalCalled||("function"===typeof e._final?(t.pendingcb++,t.finalCalled=!0,i.nextTick(N,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function P(e,t){var n=C(t);return n&&(L(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function O(e,t,n){t.ending=!0,P(e,t),n&&(t.finished?i.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function F(e,t,n){var r=e.entry;e.entry=null;while(r){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}u.inherits(_,c),v.prototype.getBuffer=function(){var e=this.bufferedRequest,t=[];while(e)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(v.prototype,"buffer",{get:l.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(m=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(e){return!!m.call(this,e)||this===_&&(e&&e._writableState instanceof v)}})):m=function(e){return e instanceof this},_.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},_.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=!r.objectMode&&p(e);return o&&!d.isBuffer(e)&&(e=h(e)),"function"===typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!==typeof n&&(n=y),r.ended?E(this,n):(o||b(this,r,e,n))&&(r.pendingcb++,i=S(this,r,o,e,t,n)),i},_.prototype.cork=function(){var e=this._writableState;e.corked++},_.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||M(this,e))},_.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},_.prototype._writev=null,_.prototype.end=function(e,t,n){var r=this._writableState;"function"===typeof e?(n=e,e=null,t=null):"function"===typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||O(this,r,n)},Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),_.prototype.destroy=g.destroy,_.prototype._undestroy=g.undestroy,_.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n("f28c"),n("c8ba"))},dcbc:function(e,t,n){var r=n("2aba");e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},de72:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("4e47"),o=r(i),a=n("8a43"),s=r(a),u=n("1d48"),l=r(u),c=n("467b"),d=r(c),f=n("589e"),h=r(f),p=n("9485"),m=r(p),g=n("2f4d"),y=r(g);function v(e){e=e||{};var t=.5,n=this.context,r=(0,s["default"])(n).getInstance(),i=e.metricsModel,a=e.dashMetrics,u=void 0,c=void 0,d=void 0;function f(){c=(0,h["default"])(n).getInstance().getLogger(u),_(),r.on(l["default"].PLAYBACK_SEEKING,E,u)}function p(){if(!i||!i.hasOwnProperty("getReadOnlyMetricsFor")||!a||!a.hasOwnProperty("getCurrentBufferLevel"))throw new Error(y["default"].MISSING_CONFIG_ERROR)}function g(e){var r=(0,m["default"])(n).create();if(!e||!e.hasOwnProperty("getMediaType"))return r;p();var s=e.getMediaType(),u=i.getReadOnlyMetricsFor(s),l=u.BufferState.length>0?u.BufferState[u.BufferState.length-1]:null,d=e.getRepresentationInfo(),f=d.fragmentDuration;if(!l||!v(s,l)||!f)return r;if(l.state===o["default"].BUFFER_EMPTY)c.debug("Switch to index 0; buffer is empty."),r.quality=0,r.reason="InsufficientBufferRule: Buffer is empty";else{var h=e.getMediaInfo(),g=e.getAbrController(),y=g.getThroughputHistory(),_=a.getCurrentBufferLevel(u),E=y.getAverageThroughput(s),b=y.getAverageLatency(s),T=E*(_/f)*t;r.quality=g.getQualityForBitrate(h,T,b),r.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return r}function v(e,t){d[e]=d[e]||{};var n=!1;return d[e].firstBufferLoadedEvent?n=!0:t&&t.state===o["default"].BUFFER_LOADED&&(d[e].firstBufferLoadedEvent=!0,n=!0),n}function _(){d={}}function E(){_()}function b(){_(),r.off(l["default"].PLAYBACK_SEEKING,E,u)}return u={getMaxIndex:g,reset:b},f(),u}v.__dashjs_factory_name="InsufficientBufferRule",t["default"]=d["default"].getClassFactory(v),e.exports=t["default"]},df86:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};i.INITIAL_PLAYOUT_START_REASON="initial_playout",i.SEEK_START_REASON="seek",i.RESUME_FROM_PAUSE_START_REASON="resume",i.METRICS_COLLECTION_START_REASON="metrics_collection_start";var o=function e(){r(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};o.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",o.REBUFFERING_REASON="rebuffering",o.USER_REQUEST_STOP_REASON="user_request",o.END_OF_PERIOD_STOP_REASON="end_of_period",o.END_OF_CONTENT_STOP_REASON="end_of_content",o.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",o.FAILURE_STOP_REASON="failure",t.PlayList=i,t.PlayListTrace=o},e09e:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){i(this,e),this.init()}return r(e,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight"}}]),e}(),a=new o;t["default"]=a,e.exports=t["default"]},e0b8:function(e,t,n){"use strict";var r=n("7726"),i=n("5ca1"),o=n("2aba"),a=n("dcbc"),s=n("67ab"),u=n("4a59"),l=n("f605"),c=n("d3f4"),d=n("79e5"),f=n("5cc5"),h=n("7f20"),p=n("5dbc");e.exports=function(e,t,n,m,g,y){var v=r[e],_=v,E=g?"set":"add",b=_&&_.prototype,T={},S=function(e){var t=b[e];o(b,e,"delete"==e||"has"==e?function(e){return!(y&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return y&&!c(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof _&&(y||b.forEach&&!d((function(){(new _).entries().next()})))){var w=new _,x=w[E](y?{}:-0,1)!=w,I=d((function(){w.has(1)})),A=f((function(e){new _(e)})),D=!y&&d((function(){var e=new _,t=5;while(t--)e[E](t,t);return!e.has(-0)}));A||(_=t((function(t,n){l(t,_,e);var r=p(new v,t,_);return void 0!=n&&u(n,g,r[E],r),r})),_.prototype=b,b.constructor=_),(I||D)&&(S("delete"),S("has"),g&&S("get")),(D||x)&&S(E),y&&b.clear&&delete b.clear}else _=m.getConstructor(t,e,g,E),a(_.prototype,n),s.NEED=!0;return h(_,e),T[e]=_,i(i.G+i.W+i.F*(_!=v),T),y||m.setStrong(_,e,g),_}},e11e:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},e172:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("5c40"),u=i(s),l=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENTS_UPDATE_FAILED_ERROR_CODE=13,this.SEGMENTS_UNAVAILABLE_ERROR_CODE=14,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_MANIFEST="manifest",this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_CONTENT="content",this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_INITIALIZATION="initialization",this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.DOWNLOAD_ERROR_ID_XLINK="xlink",this.MANIFEST_ERROR_ID_CODEC_CODE=30,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segments",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="buffer is not defined",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : "}return a(t,e),t}(u["default"]),c=new l;t["default"]=c,e.exports=t["default"]},e217:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("d0d2"),o=r(i),a=n("3a92"),s=r(a),u=n("588f"),l=r(u),c=n("5444"),d=r(c),f=n("0d2b"),h=r(f),p=n("3844"),m=r(p),g=n("45f6"),y=r(g),v=n("6c78"),_=r(v),E=n("2abb"),b=r(E),T=n("7b70"),S=r(T);function w(){var e=this.context,t=void 0,n=void 0,r=void 0,i=void 0,a=void 0,u=void 0,c=void 0;function f(e){e&&(e.debug&&(n=e.debug,r=n.getLogger(t)),e.BASE64&&(a=e.BASE64))}function p(){i=[];var t=void 0;t=(0,h["default"])(e).getInstance({BASE64:a}),i.push(t),t=(0,d["default"])(e).getInstance({BASE64:a}),i.push(t),t=(0,s["default"])(e).getInstance({BASE64:a}),i.push(t),u=t,t=(0,l["default"])(e).getInstance({BASE64:a,debug:n}),i.push(t),c=t}function g(){return i}function v(e){for(var t=0;t<i.length;t++)if(i[t].systemString===e)return i[t];return null}function E(e){return e===u||e===c}function T(e,t){if(e.byteLength===t.byteLength){for(var n=new Uint8Array(e),r=new Uint8Array(t),i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}return!1}function w(e){var t=void 0,n=void 0,r=void 0,o=void 0,a=[];if(e)for(r=0;r<i.length;++r)for(n=i[r],o=0;o<e.length;++o)if(t=e[o],t.schemeIdUri.toLowerCase()===n.schemeIdURI){var s=n.getInitData(t);s?a.push({ks:i[r],initData:s,cdmData:n.getCDMData(),sessionId:n.getSessionId(t)}):this.isClearKey(n)&&a.push({ks:n,initData:null})}return a}function x(e,t){for(var n=[],r=o["default"].parsePSSHList(e),a=void 0,s=void 0,u=void 0,l=0;l<i.length;++l)a=i[l],s=a.systemString,u=!t||s in t,a.uuid in r&&u&&n.push({ks:a,initData:r[a.uuid],cdmData:a.getCDMData(),sessionId:a.getSessionId()});return n}function I(t,n,r){if("license-release"===r||"individualization-request"===r)return null;var i=null;return n&&n.hasOwnProperty("drmtoday")?i=(0,m["default"])(e).getInstance({BASE64:a}):t.systemString===S["default"].WIDEVINE_KEYSTEM_STRING?i=(0,_["default"])(e).getInstance():t.systemString===S["default"].PLAYREADY_KEYSTEM_STRING?i=(0,y["default"])(e).getInstance():t.systemString===S["default"].CLEARKEY_KEYSTEM_STRING&&(i=(0,b["default"])(e).getInstance()),i}function A(e,t,n){try{return e.getClearKeysFromProtectionData(t,n)}catch(i){return r.error("Failed to retrieve clearkeys from ProtectionData"),null}}function D(e){for(var t=function(t){var n=null;return e&&(n=t in e?e[t]:null),n},n=0;n<i.length;n++){var r=i[n];r.hasOwnProperty("init")&&r.init(t(r.systemString))}}return t={initialize:p,setProtectionData:D,isClearKey:E,initDataEquals:T,getKeySystems:g,getKeySystemBySystemString:v,getSupportedKeySystemsFromContentProtection:w,getSupportedKeySystems:x,getLicenseServer:I,processClearKeyLicenseRequest:A,setConfig:f},t}w.__dashjs_factory_name="ProtectionKeyController",t["default"]=dashjs.FactoryMaker.getSingletonFactory(w),e.exports=t["default"]},e251:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("8a43"),s=r(a),u=n("1d48"),l=r(u),c=n("589e"),d=r(c);function f(){var e=void 0,t=void 0,n=void 0,r=void 0,i=void 0,o="element is not video or audio DOM type!",a=this.context,u=(0,s["default"])(a).getInstance(),c=[];function f(){t=(0,d["default"])(a).getInstance().getLogger(e)}function h(){u.on(l["default"].PLAYBACK_PLAYING,M,this)}function p(){u.off(l["default"].PLAYBACK_PLAYING,M,this)}function m(){n&&(n.playbackRate=i||1,n.removeEventListener("canplay",m))}function g(e){n&&(n.readyState<=2&&e>0?n.addEventListener("canplay",m):n.playbackRate=e)}function y(e,t){if(n){if(n.currentTime==e)return;try{e=t?v(e):e,n.currentTime=e}catch(r){0===n.readyState&&r.code===r.INVALID_STATE_ERR&&setTimeout((function(){n.currentTime=e}),400)}}}function v(e){var t=V(),n=e,r=9999999999;if(t)for(var i=0;i<t.length;i++){var o=t.start(i),a=t.end(i),s=Math.abs(o-e),u=Math.abs(a-e);if(e>=o&&e<=a)return e;s<r&&(r=s,n=o),u<r&&(r=u,n=a)}return n}function _(){return n}function E(e){if(!(null===e||void 0===e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw o;n=e,n&&(n.preload="auto")}function b(e){n&&(e?n.src=e:(n.removeAttribute("src"),n.load()))}function T(){return n?n.src:null}function S(){return r}function w(e){r=e,r.style.position="absolute",r.style.display="flex",r.style.overflow="hidden",r.style.pointerEvents="none",r.style.top=0,r.style.left=0}function x(e,t){R(e,t)}function I(){return c.length>0}function A(e){var t=void 0;null===e||n.seeking||-1!==c.indexOf(e)||(c.push(e),n&&1===c.length&&(t=document.createEvent("Event"),t.initEvent("waiting",!0,!1),i=n.playbackRate,g(0),n.dispatchEvent(t)))}function D(e){var t=c.indexOf(e),r=void 0;null!==e&&(-1!==t&&c.splice(t,1),n&&!1===I()&&0===n.playbackRate&&(g(i||1),n.paused||(r=document.createEvent("Event"),r.initEvent("playing",!0,!1),n.dispatchEvent(r))))}function R(e,t){t?A(e):D(e)}function M(){if(n&&I()&&0===n.playbackRate){var e=document.createEvent("Event");e.initEvent("waiting",!0,!1),n.dispatchEvent(e)}}function C(){if(!n)return null;var e="webkitDroppedFrameCount"in n&&"webkitDecodedFrameCount"in n,t="getVideoPlaybackQuality"in n,r=null;return t?r=n.getVideoPlaybackQuality():e&&(r={droppedVideoFrames:n.webkitDroppedFrameCount,totalVideoFrames:n.webkitDroppedFrameCount+n.webkitDecodedFrameCount,creationTime:new Date}),r}function N(){if(n){n.autoplay=!0;var e=n.play();e&&e["catch"]&&"undefined"!==typeof Promise&&e["catch"]((function(e){"NotAllowedError"===e.name&&u.trigger(l["default"].PLAYBACK_NOT_ALLOWED),t.warn("Caught pending play exception - continuing ("+e+")")}))}}function L(){return n?n.paused:null}function P(){n&&(n.pause(),n.autoplay=!1)}function O(){return n?n.seeking:null}function F(){return n?n.currentTime:null}function k(){return n?n.playbackRate:null}function B(){return n?n.played:null}function U(){return n?n.ended:null}function H(e,t){n&&n.addEventListener(e,t)}function j(e,t){n&&n.removeEventListener(e,t)}function K(){return n?n.readyState:NaN}function V(){return n?n.buffered:null}function q(){return n?n.clientWidth:NaN}function G(){return n?n.clientHeight:NaN}function Y(){return n?n.videoWidth:NaN}function z(){return n?n.videoHeight:NaN}function W(){return n&&n.parentNode?n.getBoundingClientRect().top-n.parentNode.getBoundingClientRect().top:NaN}function X(){return n&&n.parentNode?n.getBoundingClientRect().left-n.parentNode.getBoundingClientRect().left:NaN}function $(){return n?n.textTracks:[]}function Q(e,t,r,i,o){if(n)for(var a=0;a<n.textTracks.length;a++)if(n.textTracks[a].kind===e&&(!t||n.textTracks[a].label==t)&&n.textTracks[a].language===r&&n.textTracks[a].isTTML===i&&n.textTracks[a].isEmbedded===o)return n.textTracks[a];return null}function J(e,t,r){return n?n.addTextTrack(e,t,r):null}function Z(e){n&&(n.appendChild(e),void 0!==e.isTTML&&(n.textTracks[n.textTracks.length-1].isTTML=e.isTTML,n.textTracks[n.textTracks.length-1].isEmbedded=e.isEmbedded))}function ee(e){n&&n.removeChild(e)}return e={initialize:h,setCurrentTime:y,play:N,isPaused:L,pause:P,isSeeking:O,getTime:F,getPlaybackRate:k,setPlaybackRate:g,getPlayedRanges:B,getEnded:U,setStallState:x,getElement:_,setElement:E,setSource:b,getSource:T,getTTMLRenderingDiv:S,setTTMLRenderingDiv:w,getPlaybackQuality:C,addEventListener:H,removeEventListener:j,getReadyState:K,getBufferRange:V,getClientWidth:q,getClientHeight:G,getTextTracks:$,getTextTrack:Q,addTextTrack:J,appendChild:Z,removeChild:ee,getVideoWidth:Y,getVideoHeight:z,getVideoRelativeOffsetTop:W,getVideoRelativeOffsetLeft:X,reset:p},f(),e}f.__dashjs_factory_name="VideoModel",t["default"]=o["default"].getSingletonFactory(f),e.exports=t["default"]},e31d:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null};t["default"]=i,e.exports=t["default"]},e346:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("467b"),o=r(i),a=n("589e"),s=r(a),u=n("8a43"),l=r(u),c=n("1d48"),d=r(c),f=n("120d"),h=r(f);function p(){var e="urn:mpeg:dash:event:2012",t=1,n="urn:mpeg:dash:event:callback:2015",r=1,i=this.context,o=(0,l["default"])(i).getInstance(),a=void 0,u=void 0,c=void 0,f=void 0,p=void 0,m=void 0,g=void 0,y=void 0,v=void 0,_=void 0,E=void 0;function b(){u=(0,s["default"])(i).getInstance().getLogger(a),T()}function T(){E=!1,c={},f={},p={},m=null,g=100,y=Date.now()/1e3}function S(){if(!v||!_)throw new Error("setConfig function has to be called previously")}function w(){null!==m&&E&&(clearInterval(m),m=null,E=!1)}function x(){S(),u.debug("Start Event Controller"),E||isNaN(g)||(E=!0,m=setInterval(M,g))}function I(e){if(S(),c={},e)for(var t=0;t<e.length;t++){var n=e[t];c[n.id]=n,u.debug("Add inline event with id "+n.id)}u.debug("Added "+e.length+" inline events")}function A(t){S();for(var n=0;n<t.length;n++){var r=t[n];r.id in f?u.debug("Repeated event with id "+r.id):(r.eventStream.schemeIdUri===e&&void 0===f[r.id]&&D(r),f[r.id]=r,u.debug("Add inband event with id "+r.id))}}function D(e){if(e.eventStream.value==t){var n=e.eventStream.timescale||1,r=e.presentationTime/n,i=void 0;i=4294967295==e.presentationTime?NaN:(e.presentationTime+e.duration)/n,u.info("Manifest validity changed: Valid until: "+r+"; remaining duration: "+i),o.trigger(d["default"].MANIFEST_VALIDITY_CHANGED,{id:e.id,validUntil:r,newDuration:i,newManifestValidAfter:NaN})}}function R(){if(p)for(var e=_.getTime(),t=Object.keys(p),n=0;n<t.length;n++){var r=t[n],i=p[r];null!==i&&(i.duration+i.presentationTime)/i.eventStream.timescale<e&&(u.debug("Remove Event "+r+" at time "+e),i=null,delete p[r])}}function M(){var e=_.getTime(),t=e-y;y=e,L(f,t,e),L(c,t,e),R()}function C(){S(),v.refreshManifest()}function N(e){var t=(0,h["default"])(i).create({});t.load({method:"get",url:e,request:{responseType:"arraybuffer"}})}function L(i,a,s){var l;if(i)for(var c=Object.keys(i),d=0;d<c.length;d++){var f=c[d],h=i[f];void 0!==h&&(l=h.presentationTime/h.eventStream.timescale,(0===l||l<=s&&l+a>s)&&(u.debug("Start Event "+f+" at "+s),h.duration>0&&(p[f]=h),h.eventStream.schemeIdUri==e&&h.eventStream.value==t?0===h.duration&&0===h.presentationTimeDelta||C():h.eventStream.schemeIdUri==n&&h.eventStream.value==r?N(h.messageData):o.trigger(h.eventStream.schemeIdUri,{event:h}),delete i[f]))}}function P(e){e&&(e.manifestUpdater&&(v=e.manifestUpdater),e.playbackController&&(_=e.playbackController))}function O(){w(),T()}return a={addInlineEvents:I,addInbandEvents:A,stop:w,start:x,setConfig:P,reset:O},b(),a}p.__dashjs_factory_name="EventController",t["default"]=o["default"].getClassFactory(p),e.exports=t["default"]},e372:function(e,t,n){t=e.exports=n("ad71"),t.Stream=t,t.Readable=t,t.Writable=n("dc14"),t.Duplex=n("b19a"),t.Transform=n("27bf"),t.PassThrough=n("780f")},e3b9:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.schemeIdUri="",this.value=""};t["default"]=i,e.exports=t["default"]},e3db:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},e4ae:function(e,t,n){var r=n("f772");e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},e53d:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},e6f3:function(e,t,n){var r=n("07e3"),i=n("36c3"),o=n("5b4e")(!1),a=n("5559")("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);while(t.length>u)r(s,n=t[u++])&&(~o(l,n)||l.push(n));return l}},e853:function(e,t,n){var r=n("d3f4"),i=n("1169"),o=n("2b4c")("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&(t=t[o],null===t&&(t=void 0))),void 0===t?Array:t}},e8c0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("09b9"),u=i(s),l=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected"}return a(t,e),t}(u["default"]),c=new l;t["default"]=c,e.exports=t["default"]},eba1:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("8a43"),s=r(a),u=n("1d48"),l=r(u),c=n("467b"),d=r(c),f=n("589e"),h=r(f),p=n("556a");function m(){var e=this.context,t=(0,s["default"])(e).getInstance(),n=void 0,r=void 0,i=void 0,a=void 0,u=void 0,c=void 0,d=void 0,f=void 0,m=void 0,g=void 0,y=void 0,v=void 0,_=void 0,E=void 0,b=void 0,T=void 0,S=void 0;function w(){r=(0,h["default"])(e).getInstance().getLogger(n)}function x(){"undefined"!==typeof window&&"undefined"!==typeof navigator&&(i=window.VTTCue||window.TextTrackCue,u=[],c=[],d=-1,f=0,m=0,g=0,y=0,v=null,_=null,b=!1,S=2147483647,T=null,void 0!==document.fullscreenElement?E="fullscreenElement":void 0!==document.webkitIsFullScreen?E="webkitIsFullScreen":document.msFullscreenElement?E="msFullscreenElement":document.mozFullScreen&&(E="mozFullScreen"))}function I(e){var t=u[e].kind,n=void 0!==u[e].id?u[e].id:u[e].lang,r=u[e].lang,i=u[e].isTTML,o=u[e].isEmbedded,s=a.addTextTrack(t,n,r);return s.isEmbedded=o,s.isTTML=i,s}function A(e){b=e,v&&!document[E]&&(v.style.zIndex=e?S:null)}function D(e,n){if(u.length!==n){if(u.push(e),u.length===n){u.sort((function(e,t){return e.index-t.index})),v=a.getTTMLRenderingDiv();for(var i=-1,s=0;s<u.length;s++){var f=I.call(this,s);c.push(f),u[s].defaultTrack&&(f["default"]=!0,i=s);var h=P(s);h&&(h.mode=o["default"].TEXT_SHOWING,v&&(u[s].isTTML||u[s].isEmbedded)?h.renderingType="html":h.renderingType="default"),this.addCaptions(s,0,u[s].captionData),t.trigger(l["default"].TEXT_TRACK_ADDED)}if(k.call(this,i),i>=0)for(var p=0;p<u.length;p++){var m=P(p);m&&(m.mode=p===i?o["default"].TEXT_SHOWING:o["default"].TEXT_HIDDEN)}t.trigger(l["default"].TEXT_TRACKS_QUEUE_INITIALIZED,{index:d,tracks:u})}}else r.error("Trying to add too many tracks.")}function R(e,t,n,r,i,o){var a=e/t,s=n/r,u=0,l=0;a>s?(l=t,u=l/r*n):(u=e,l=u/n*r);var c=0,d=0,f=0,h=0,p=u/l;return p>i?(h=l,f=l*i):(f=u,h=u/i),c=(e-f)/2,d=(t-h)/2,o?{x:c+.1*f,y:d+.1*h,w:.8*f,h:.8*h}:{x:c,y:d,w:f,h:h}}function M(e,n){var r=a.getClientWidth(),i=a.getClientHeight(),o=a.getVideoWidth(),s=a.getVideoHeight(),u=a.getVideoRelativeOffsetTop(),c=a.getVideoRelativeOffsetLeft(),d=o/s,h=!1;e.isFromCEA608&&(d=3.5/3,h=!0);var p=R.call(this,r,i,o,s,d,h),_=p.w,T=p.h,w=p.x,x=p.y;if(_!=g||T!=y||w!=f||x!=m||n){if(f=w+c,m=x+u,g=_,y=T,v){var I=v.style;I.left=f+"px",I.top=m+"px",I.width=g+"px",I.height=y+"px",I.zIndex=E&&document[E]||b?S:null,t.trigger(l["default"].CAPTION_CONTAINER_RESIZE,{})}var A=e.activeCues;if(A)for(var D=A.length,M=0;M<D;++M){var C=A[M];C.scaleCue(C)}}}function C(e){var t=g,n=y,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0;if(e.cellResolution){var u=[t/e.cellResolution[0],n/e.cellResolution[1]];if(e.linePadding)for(r in e.linePadding)if(e.linePadding.hasOwnProperty(r)){var l=e.linePadding[r];i=(l*u[0]).toString();for(var c=document.getElementsByClassName("spanPadding"),d=0;d<c.length;d++)c[d].style.cssText=c[d].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i),c[d].style.cssText=c[d].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}if(e.fontSize){for(r in e.fontSize)if(e.fontSize.hasOwnProperty(r)){"%"===e.fontSize[r][0]?o=e.fontSize[r][1]/100:"c"===e.fontSize[r][0]&&(o=e.fontSize[r][1]),i=(o*u[1]).toString(),s="defaultFontSize"!==r?document.getElementsByClassName(r):document.getElementsByClassName("paragraph");for(var f=0;f<s.length;f++)s[f].style.cssText=s[f].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}if(e.lineHeight)for(r in e.lineHeight)if(e.lineHeight.hasOwnProperty(r)){"%"===e.lineHeight[r][0]?a=e.lineHeight[r][1]/100:"c"===e.fontSize[r][0]&&(a=e.lineHeight[r][1]),i=(a*u[1]).toString(),s=document.getElementsByClassName(r);for(var h=0;h<s.length;h++)s[h].style.cssText=s[h].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}}}if(e.isd){var p=document.getElementById(e.cueID);p&&v.removeChild(p),N(e)}}function N(e){if(v){var n=document.createElement("div");v.appendChild(n),T=(0,p.renderHTML)(e.isd,n,(function(t){var n=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,r=/^#(.*)$/;if(n.test(t)){var i=n.exec(t),o=parseInt(i[4],10)-1,a=btoa(e.images[o]),s="data:image/png;base64,"+a;return s}if(r.test(t)){i=r.exec(t),o=i[1],s="data:image/png;base64,"+e.embeddedImages[o];return s}return null}),v.clientHeight,v.clientWidth,!1,(function(e){r.info("renderCaption :",e)}),T,!0),n.id=e.cueID,t.trigger(l["default"].CAPTION_RENDERED,{captionDiv:n,currentTrackIdx:d})}}function L(e,n,a){var s=P(e),u=this;if(s&&a&&0!==a.length)for(var c=0;c<a.length;c++){var h=void 0,p=a[c];s.cellResolution=p.cellResolution,s.isFromCEA608=p.isFromCEA608,"html"===p.type&&v?(h=new i(p.start-n,p.end-n,""),h.cueHTMLElement=p.cueHTMLElement,h.isd=p.isd,h.images=p.images,h.embeddedImages=p.embeddedImages,h.cueID=p.cueID,h.scaleCue=C.bind(u),h.cellResolution=p.cellResolution,h.lineHeight=p.lineHeight,h.linePadding=p.linePadding,h.fontSize=p.fontSize,v.style.left=f+"px",v.style.top=m+"px",v.style.width=g+"px",v.style.height=y+"px",h.onenter=function(){s.mode===o["default"].TEXT_SHOWING&&(this.isd?(N(this),r.debug("Cue enter id:"+this.cueID)):(v.appendChild(this.cueHTMLElement),C.call(u,this),t.trigger(l["default"].CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:d})))},h.onexit=function(){if(v)for(var e=v.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(r.debug("Cue exit id:"+e[t].id),v.removeChild(e[t]))}):p.data&&(h=new i(p.start-n,p.end-n,p.data),p.styles&&(void 0!==p.styles.align&&"align"in h&&(h.align=p.styles.align),void 0!==p.styles.line&&"line"in h&&(h.line=p.styles.line),void 0!==p.styles.position&&"position"in h&&(h.position=p.styles.position),void 0!==p.styles.size&&"size"in h&&(h.size=p.styles.size)),h.onenter=function(){s.mode===o["default"].TEXT_SHOWING&&t.trigger(l["default"].CAPTION_RENDERED,{currentTrackIdx:d})});try{h?s.addCue(h):r.error("impossible to display subtitles.")}catch(_){throw U(s),s.addCue(h),_}}}function P(e){return e>=0&&u[e]?a.getTextTrack(u[e].kind,u[e].id,u[e].lang,u[e].isTTML,u[e].isEmbedded):null}function O(){return d}function F(e){for(var t=-1,n=0;n<u.length;n++)if(u[n].id===e){t=n;break}return t}function k(e){if(e!==d){d=e;var t=P(d);B.call(this,t),_&&(clearInterval(_),_=null),t&&"html"===t.renderingType&&(M.call(this,t,!0),_=setInterval(M.bind(this,t),500))}}function B(e){G.call(this),e&&"html"===e.renderingType?V.call(this):q.call(this)}function U(e){if(e.cues)for(var t=e.cues,n=t.length-1,r=n;r>=0;r--)e.removeCue(t[r])}function H(e){var t=P(e);t&&U(t)}function j(){for(var e=c?c.length:0,t=0;t<e;t++){var n=P(t);n&&(U.call(this,n),n.mode="disabled")}c=[],u=[],_&&(clearInterval(_),_=null),d=-1,G.call(this)}function K(e){a.removeChild(c[e]),c.splice(e,1)}function V(){var e=document.getElementById("native-cue-style");if(!e){e=document.createElement("style"),e.id="native-cue-style",document.head.appendChild(e);var t=e.sheet,n=a.getElement();try{n&&(n.id?t.insertRule("#"+n.id+"::cue {background: transparent}",0):0!==n.classList.length?t.insertRule("."+n.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0))}catch(i){r.info(""+i.message)}}}function q(){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}function G(){if(v)while(v.firstChild)v.removeChild(v.firstChild)}function Y(e){e&&e.videoModel&&(a=e.videoModel)}function z(e,t){var n=P(e);n&&n.mode!==t&&(n.mode=t)}function W(){return u[d]}return n={initialize:x,displayCConTop:A,addTextTrack:D,addCaptions:L,getCurrentTrackIdx:O,setCurrentTrackIdx:k,getTrackIdxForId:F,getCurrentTrackInfo:W,setModeForTrackIdx:z,deleteCuesFromTrackIdx:H,deleteAllTextTracks:j,deleteTextTrack:K,setConfig:Y},w(),n}m.__dashjs_factory_name="TextTracks",t["default"]=d["default"].getSingletonFactory(m),e.exports=t["default"]},ebd6:function(e,t,n){var r=n("cb7c"),i=n("d8e8"),o=n("2b4c")("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},efb7:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("589e"),o=r(i),a=n("467b"),s=r(a);function u(e){var t=this.context,n=void 0,r=void 0,i=void 0,a=[],s=e;function u(){r=(0,o["default"])(t).getInstance().getLogger(n)}function l(){a=[],i=null,s=null}function c(e){"InitializationSegment"!==e.segmentType?(a.push(e),a.sort((function(e,t){return e.start-t.start})),i=null):i=e,r.debug("PreBufferSink appended chunk s: "+e.start+"; e: "+e.end),s&&s({chunk:e})}function d(e,t){a=a.filter((function(n){return!((isNaN(t)||n.start<t)&&(isNaN(e)||n.end>e))}))}function f(){}function h(){for(var e=[],t=0;t<a.length;t++){var n=a[t];0===e.length||n.start>e[e.length-1].end?e.push({start:n.start,end:n.end}):e[e.length-1].end=n.end}var r={start:function(t){return e[t].start},end:function(t){return e[t].end}};return Object.defineProperty(r,"length",{get:function(){return e.length}}),r}function p(){return!1}function m(){}function g(e,t){var n=y(e,t);return i&&(n.push(i),i=null),d(e,t),n}function y(e,t){return a.filter((function(n){return(isNaN(t)||n.start<t)&&(isNaN(e)||n.end>e)}))}return n={getAllBufferRanges:h,append:c,remove:d,abort:f,discharge:g,reset:l,updateTimestampOffset:m,hasDiscontinuitiesAfter:p},u(),n}u.__dashjs_factory_name="PreBufferSink";var l=s["default"].getClassFactory(u);t["default"]=l,e.exports=t["default"]},f01c:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""};t["default"]=i,e.exports=t["default"]},f201:function(e,t,n){var r=n("e4ae"),i=n("79aa"),o=n("5168")("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},f288:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n){r(this,e),this.keySystem=t,this.ksConfiguration=n};t["default"]=i,e.exports=t["default"]},f28c:function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function u(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(e){r=a}})();var l,c=[],d=!1,f=-1;function h(){d&&l&&(d=!1,l.length?c=l.concat(c):f=-1,c.length&&p())}function p(){if(!d){var e=s(h);d=!0;var t=c.length;while(t){l=c,c=[];while(++f<t)l&&l[f].run();f=-1,t=c.length}l=null,d=!1,u(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new m(e,t)),1!==c.length||d||s(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},f318:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("e217"),o=r(i),a=n("5fb0"),s=r(a),u=n("6a2d"),l=r(u),c=n("d0a4"),d=r(c),f=n("b4be"),h=r(f),p=n("46c1"),m=r(p),g=n("f288"),y=r(g);function v(e){e=e||{};var t=this.context,n=e.eventBus,r=e.events,i=e.debug,a=e.api,u=void 0,c=void 0,f=void 0,p=void 0,g=void 0,v=void 0,_=void 0,E=void 0,b=void 0;function T(){c=i.getLogger(u),f=null,p=null,g=null,v=null,_=[],b=(0,o["default"])(t).getInstance(),E=O()}function S(){try{for(var e=0;e<_.length;e++)C(_[e]);f&&f.removeEventListener(a.needkey,E),n.trigger(r.TEARDOWN_COMPLETE)}catch(t){n.trigger(r.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+t.message})}}function w(){return p}function x(){for(var e=[],t=0;t<_.length;t++)e.push(_[t].initData);return e}function I(e){for(var t=!1,i=0;i<e.length;i++)for(var o=e[i].ks.systemString,s=e[i].configs,u=null,l=null,c=0;c<s.length;c++){var d=s[c].audioCapabilities,f=s[c].videoCapabilities;if(d&&0!==d.length){u=[];for(var h=0;h<d.length;h++)window[a.MediaKeys].isTypeSupported(o,d[h].contentType)&&u.push(d[h])}if(f&&0!==f.length){l=[];for(var p=0;p<f.length;p++)window[a.MediaKeys].isTypeSupported(o,f[p].contentType)&&l.push(f[p])}if(!(!u&&!l||u&&0===u.length||l&&0===l.length)){t=!0;var g=new m["default"](u,l),v=b.getKeySystemBySystemString(o);n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{data:new y["default"](v,g)});break}}t||n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})}function A(e){try{g=e.mediaKeys=new window[a.MediaKeys](e.keySystem.systemString),p=e.keySystem,v=e,f&&F(),n.trigger(r.INTERNAL_KEY_SYSTEM_SELECTED)}catch(t){n.trigger(r.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+p.systemString+")! Could not create MediaKeys -- TODO"})}}function D(e){f!==e&&(f&&f.removeEventListener(a.needkey,E),f=e,f&&(f.addEventListener(a.needkey,E),g&&F()))}function R(e,t,i,o){if(!p||!g||!v)throw new Error("Can not create sessions until you have selected a key system");var s=null;if(v.ksConfiguration.videoCapabilities&&v.ksConfiguration.videoCapabilities.length>0&&(s=v.ksConfiguration.videoCapabilities[0]),null===s&&v.ksConfiguration.audioCapabilities&&v.ksConfiguration.audioCapabilities.length>0&&(s=v.ksConfiguration.audioCapabilities[0]),null===s)throw new Error("Can not create sessions for unknown content types.");var u=s.contentType,l=g.createSession(u,new Uint8Array(e),o?new Uint8Array(o):null),d=k(l,e);l.addEventListener(a.error,d),l.addEventListener(a.message,d),l.addEventListener(a.ready,d),l.addEventListener(a.close,d),_.push(d),c.debug("DRM: Session created.  SessionID = "+d.getSessionID()),n.trigger(r.KEY_SESSION_CREATED,{data:d})}function M(e,t){var n=e.session;b.isClearKey(p)?n.update(new Uint8Array(t.toJWK())):n.update(new Uint8Array(t))}function C(e){var t=e.session;t.removeEventListener(a.error,e),t.removeEventListener(a.message,e),t.removeEventListener(a.ready,e),t.removeEventListener(a.close,e);for(var n=0;n<_.length;n++)if(_[n]===e){_.splice(n,1);break}t[a.release]()}function N(){}function L(){}function P(){}function O(){return{handleEvent:function(e){switch(e.type){case a.needkey:if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;n.trigger(r.NEED_KEY,{key:new s["default"](t,"cenc")})}break}}}}function F(){var e=null,t=function(){f.removeEventListener("loadedmetadata",e),f[a.setMediaKeys](g),n.trigger(r.VIDEO_ELEMENT_SELECTED)};f.readyState>=1?t():(e=t.bind(this),f.addEventListener("loadedmetadata",e))}function k(e,t){return{session:e,initData:t,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case a.error:var t="KeyError";n.trigger(r.KEY_ERROR,{data:new l["default"](d["default"].MEDIA_KEYERR_CODE,t,this)});break;case a.message:var i=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;n.trigger(r.INTERNAL_KEY_MESSAGE,{data:new h["default"](this,i,e.destinationURL)});break;case a.ready:c.debug("DRM: Key added."),n.trigger(r.KEY_ADDED);break;case a.close:c.debug("DRM: Session closed.  SessionID = "+this.getSessionID()),n.trigger(r.KEY_SESSION_CLOSED,{data:this.getSessionID()});break}}}}return u={getAllInitData:x,requestKeySystemAccess:I,getKeySystem:w,selectKeySystem:A,setMediaElement:D,createKeySession:R,updateKeySession:M,closeKeySession:C,setServerCertificate:N,loadKeySession:L,removeKeySession:P,stop:S,reset:S},T(),u}v.__dashjs_factory_name="ProtectionModel_3Feb2014",t["default"]=dashjs.FactoryMaker.getClassFactory(v),e.exports=t["default"]},f400:function(e,t,n){"use strict";var r=n("c26b"),i=n("b39a"),o="Map";e.exports=n("e0b8")(o,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(i(this,o),e);return t&&t.v},set:function(e,t){return r.def(i(this,o),0===e?0:e,t)}},r,!0)},f436:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("5948"),o=r(i);function a(e){var t=[],n=void 0,r=(0,o["default"])(this.context).getInstance(e);function i(e,n){e.some((function(e){var i=r.create(e,n);if(i)return t.push(i),!0}))}function a(){t.forEach((function(e){return e.reset()})),t=[]}function s(e,n){t.forEach((function(t){return t.report(e,n)}))}return n={initialize:i,reset:a,report:s},n}a.__dashjs_factory_name="ReportingController",t["default"]=dashjs.FactoryMaker.getClassFactory(a),e.exports=t["default"]},f447:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=1,o=1,a=function e(t,n,a,s){r(this,e),this.url=t||"",this.serviceLocation=n||t||"",this.dvb_priority=a||i,this.dvb_weight=s||o,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0};a.DEFAULT_DVB_PRIORITY=i,a.DEFAULT_DVB_WEIGHT=o,t["default"]=a,e.exports=t["default"]},f5f5:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("2f4d"),o=r(i),a=n("589e"),s=r(a),u=n("467b"),l=r(u),c=n("41ee"),d=r(c);function f(e){e=e||{};var t=this.context,n=e.adapter,r=e.textController,i=e.playbackController,a=void 0,u=void 0;function l(){u=(0,s["default"])(t).getInstance().getLogger(a)}function c(e,t,a){if(!e)return null;var s=e.getRepresentationInfo(),l=e.getType(),c=!isNaN(t),f=e.getBufferController(),h=i.getNormalizedTime(),p=c?t:n.getIndexHandlerTime(e),m=!1,g=void 0;if(isNaN(p)||l===o["default"].FRAGMENTED_TEXT&&!r.isTextEnabled())return null;if(f){var y=f.getRangeAt(p),v=f.getRangeAt(h),_=f.getBuffer().hasDiscontinuitiesAfter(h);null===y&&null===v||c||((!y||v&&v.start!=y.start&&v.end!=y.end)&&(_&&l!==o["default"].FRAGMENTED_TEXT&&(e.getFragmentModel().removeExecutedRequestsAfterTime(v.end),m=!0),y=v),p!==y.end&&(u.debug("Prior to making a request for time, NextFragmentRequestRule is aligning index handler's currentTime with bufferedRange.end for",l,".",p,"was changed to",y.end),p=y.end))}if(a)p=a.startTime+a.duration/2,g=n.getFragmentRequest(e,s,p,{timeThreshold:0,ignoreIsFinished:!0});else{g=n.getFragmentRequest(e,s,p,{keepIdx:!c&&!m});while(g&&g.action!==d["default"].ACTION_COMPLETE&&e.getFragmentModel().isFragmentLoaded(g))g=n.getFragmentRequest(e,s)}return g}return a={execute:c},l(),a}f.__dashjs_factory_name="NextFragmentRequestRule",t["default"]=l["default"].getClassFactory(f),e.exports=t["default"]},f605:function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},f751:function(e,t,n){var r=n("5ca1");r(r.S+r.F,"Object",{assign:n("7333")})},f766:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("09b9"),u=i(s),l=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer"}return a(t,e),t}(u["default"]),c=new l;t["default"]=c,e.exports=t["default"]},f772:function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},f785:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("9485"),o=r(i),a=n("467b"),s=r(a),u=n("589e"),l=r(u);function c(e){e=e||{};var t=1.8,n=500,r=5,i=this.context,a=e.mediaPlayerModel,s=e.metricsModel,u=e.dashMetrics,d=void 0,f=void 0,h=void 0,p=void 0,m=void 0;function g(){f=(0,l["default"])(i).getInstance().getLogger(d),E()}function y(e,t){h[e]=h[e]||{},h[e][t]=h[e][t]||{}}function v(e,t){m[e]=m[e]||[],m[e].push(t)}function _(e){var l=(0,o["default"])(i).create(o["default"].NO_CHANGE,{name:c.__dashjs_factory_name});if(!e||!e.hasOwnProperty("getMediaInfo")||!e.hasOwnProperty("getMediaType")||!e.hasOwnProperty("getCurrentRequest")||!e.hasOwnProperty("getRepresentationInfo")||!e.hasOwnProperty("getAbrController"))return l;var d=e.getMediaInfo(),g=e.getMediaType(),_=e.getCurrentRequest();if(!isNaN(_.index)){y(g,_.index);var E=a.getStableBufferTime(),b=u.getCurrentBufferLevel(s.getReadOnlyMetricsFor(g));if(b>E)return l;var T=h[g][_.index];if(null===T||null===_.firstByteDate||p.hasOwnProperty(T.id))return l;if(void 0===T.firstByteTime&&(m[g]=[],T.firstByteTime=_.firstByteDate.getTime(),T.segmentDuration=_.duration,T.bytesTotal=_.bytesTotal,T.id=_.index),T.bytesLoaded=_.bytesLoaded,T.elapsedTime=(new Date).getTime()-T.firstByteTime,T.bytesLoaded>0&&T.elapsedTime>0&&v(g,Math.round(8*T.bytesLoaded/T.elapsedTime)),m[g].length>=r&&T.elapsedTime>n&&T.bytesLoaded<T.bytesTotal){var S=m[g].reduce((function(e,t){return e+t}),0);if(T.measuredBandwidthInKbps=Math.round(S/m[g].length),T.estimatedTimeOfDownload=+(8*T.bytesTotal/T.measuredBandwidthInKbps/1e3).toFixed(2),T.estimatedTimeOfDownload<T.segmentDuration*t||0===e.getRepresentationInfo().quality)return l;if(!p.hasOwnProperty(T.id)){var w=e.getAbrController(),x=T.bytesTotal-T.bytesLoaded,I=w.getBitrateList(d),A=w.getQualityForBitrate(d,T.measuredBandwidthInKbps*a.getBandwidthSafetyFactor()),D=T.bytesTotal*I[A].bitrate/I[w.getQualityFor(g,d.streamInfo)].bitrate;x>D&&(l.quality=A,l.reason.throughput=T.measuredBandwidthInKbps,l.reason.fragmentID=T.id,p[T.id]=T,f.debug("( ",g,"frag id",T.id,") is asking to abandon and switch to quality to ",A," measured bandwidth was",T.measuredBandwidthInKbps),delete h[g][T.id])}}else T.bytesLoaded===T.bytesTotal&&delete h[g][T.id]}return l}function E(){h={},p={},m=[]}return d={shouldAbandon:_,reset:E},g(),d}c.__dashjs_factory_name="AbandonRequestsRule",t["default"]=s["default"].getClassFactory(c),e.exports=t["default"]},f974:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("477f"),o=r(i),a=n("f436"),s=r(a),u=n("9c97"),l=r(u);function c(e){e=e||{};var t=void 0,n=void 0,r=void 0,i=void 0,a=this.context;function u(i){try{r=(0,o["default"])(a).create({mediaElement:e.mediaElement}),r.initialize(i.Range),n=(0,s["default"])(a).create({debug:e.debug,metricsConstants:e.metricsConstants}),n.initialize(i.Reporting,r),t=(0,l["default"])(a).create({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants,events:e.events}),t.initialize(i.metrics,n)}catch(u){throw c(),u}}function c(){t&&t.reset(),n&&n.reset(),r&&r.reset()}return i={initialize:u,reset:c},i}c.__dashjs_factory_name="MetricsController",t["default"]=dashjs.FactoryMaker.getClassFactory(c),e.exports=t["default"]},fa14:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("4398"),o=r(i);function a(){var e="application/dash+xml",t=void 0;function n(n,r,i){if(!n||!/^VIDEO$/i.test(n.nodeName))return null;if(n._dashjs_player)return n._dashjs_player;var a=void 0,s=n.id||n.name||"video element";if(r=r||[].slice.call(n.querySelectorAll("source")).filter((function(t){return t.type==e}))[0],!r&&n.src)r=document.createElement("source"),r.src=n.src;else if(!r&&!n.src)return null;return i=i||{},a=(0,o["default"])(i).create(),a.initialize(n,r.src,n.autoplay),t||(t=a.getDebug().getLogger()),t.debug("Converted "+s+" to dash.js player and added content: "+r.src),n._dashjs_player=a,a}function r(t,r){var o=[];t=t||"[data-dashjs-player]",r=r||document;for(var a=r.querySelectorAll(t),s=0;s<a.length;s++){var u=n(a[s],null);o.push(u)}var l=r.querySelectorAll('source[type="'+e+'"]');for(s=0;s<l.length;s++){var c=i(l[s]);u=n(c,null);o.push(u)}return o}function i(e){var t=!0;while(t){var n=e;if(t=!1,/^VIDEO$/i.test(n.nodeName))return n;e=n.parentNode,t=!0}}return{create:n,createAll:r}}var s=a(),u=void 0;function l(){window.removeEventListener("load",l),s.createAll()}function c(){window.dashjs&&(window.clearInterval(u),s.createAll())}var d="undefined"!==typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate;!d&&"undefined"!==typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?s.createAll():u=window.setInterval(c,500):window.addEventListener("load",l)),t["default"]=s,e.exports=t["default"]},fa5b:function(e,t,n){e.exports=n("5537")("native-function-to-string",Function.toString)},faa1:function(e,t,n){"use strict";var r,i="object"===typeof Reflect?Reflect:null,o=i&&"function"===typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function a(e){console&&console.warn&&console.warn(e)}r=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!==e};function u(){u.init.call(this)}e.exports=u,u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var l=10;function c(e){return void 0===e._maxListeners?u.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var i,o,s;if("function"!==typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(o=e._events,void 0===o?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"===typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=c(e),i>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a(u)}return e}function f(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,e))}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?v(i):g(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function v(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!==typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),u.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},u.prototype.getMaxListeners=function(){return c(this)},u.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[e];if(void 0===u)return!1;if("function"===typeof u)o(u,this,t);else{var l=u.length,c=g(u,l);for(n=0;n<l;++n)o(c[n],this,t)}return!0},u.prototype.addListener=function(e,t){return d(this,e,t,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(e,t){return d(this,e,t,!0)},u.prototype.once=function(e,t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,h(this,e,t)),this},u.prototype.prependOnceListener=function(e,t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,h(this,e,t)),this},u.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(r=this._events,void 0===r)return this;if(n=r[e],void 0===n)return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():y(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)i=o[r],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],"function"===typeof t)this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},u.prototype.listeners=function(e){return p(this,e,!0)},u.prototype.rawListeners=function(e){return p(this,e,!1)},u.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},u.prototype.listenerCount=m,u.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},fab2:function(e,t,n){var r=n("7726").document;e.exports=r&&r.documentElement},faf0:function(e,t,n){(function(e,t,n){function r(e,t,n,r,i,o,a,s){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=i,this.animatable=o,this.initial=n,this.applies=r,this.parse=a,this.compute=s}for(var i in e.all=[new r(t.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,n.parseColor,null),new r(t.ns_tts,"color","white",["span"],!0,!0,n.parseColor,null),new r(t.ns_tts,"direction","ltr",["p","span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"displayAlign","before",["region"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"extent","auto",["tt","region"],!1,!0,(function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var r=n.parseLength(t[0]),i=n.parseLength(t[1]);return i&&r?{h:i,w:r}:null}),(function(e,t,r,i,o){var a,s;if("auto"===i)a=new n.ComputedLength(0,1);else if(a=n.toComputedLength(i.h.value,i.h.unit,null,e.dimensions.h,null,e.pxLength.h),null===a)return null;if("auto"===i)s=new n.ComputedLength(1,0);else if(s=n.toComputedLength(i.w.value,i.w.unit,null,e.dimensions.w,null,e.pxLength.w),null===s)return null;return{h:a,w:s}})),new r(t.ns_tts,"fontFamily","default",["span"],!0,!0,(function(e){var t=e.split(","),n=[];for(var r in t)"'"!==t[r].charAt(0)&&'"'!==t[r].charAt(0)&&"default"===t[r]?n.push("monospaceSerif"):n.push(t[r]);return n}),null),new r(t.ns_tts,"shear","0%",["p"],!0,!0,n.parseLength,(function(e,t,n,r){var i;return"%"!==r.unit?null:(i=Math.abs(r.value)>100?100*Math.sign(r.value):r.value,i)})),new r(t.ns_tts,"fontSize","1c",["span"],!0,!0,n.parseLength,(function(t,r,i,o,a){var s;return s=n.toComputedLength(o.value,o.unit,null!==r?r.styleAttrs[e.byName.fontSize.qname]:t.cellLength.h,null!==r?r.styleAttrs[e.byName.fontSize.qname]:t.cellLength.h,t.cellLength.h,t.pxLength.h),s})),new r(t.ns_tts,"fontStyle","normal",["span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"fontWeight","normal",["span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"lineHeight","normal",["p"],!0,!0,(function(e){return"normal"===e?e:n.parseLength(e)}),(function(t,r,i,o,a){var s;if("normal"===o)s=o;else if(s=n.toComputedLength(o.value,o.unit,i.styleAttrs[e.byName.fontSize.qname],i.styleAttrs[e.byName.fontSize.qname],t.cellLength.h,t.pxLength.h),null===s)return null;return s})),new r(t.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new r(t.ns_tts,"origin","auto",["region"],!1,!0,(function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var r=n.parseLength(t[0]),i=n.parseLength(t[1]);return i&&r?{h:i,w:r}:null}),(function(e,t,r,i,o){var a,s;if("auto"===i)a=new n.ComputedLength(0,0);else if(a=n.toComputedLength(i.h.value,i.h.unit,null,e.dimensions.h,null,e.pxLength.h),null===a)return null;if("auto"===i)s=new n.ComputedLength(0,0);else if(s=n.toComputedLength(i.w.value,i.w.unit,null,e.dimensions.w,null,e.pxLength.w),null===s)return null;return{h:a,w:s}})),new r(t.ns_tts,"overflow","hidden",["region"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"padding","0px",["region"],!1,!0,(function(e){var t=e.split(" ");if(t.length>4)return null;var r=[];for(var i in t){var o=n.parseLength(t[i]);if(!o)return null;r.push(o)}return r}),(function(t,r,i,o,a){var s;if(1===o.length)s=[o[0],o[0],o[0],o[0]];else if(2===o.length)s=[o[0],o[1],o[0],o[1]];else if(3===o.length)s=[o[0],o[1],o[2],o[1]];else{if(4!==o.length)return null;s=[o[0],o[1],o[2],o[3]]}var u=i.styleAttrs[e.byName.writingMode.qname];if("lrtb"===u||"lr"===u)s=[s[0],s[3],s[2],s[1]];else if("rltb"===u||"rl"===u)s=[s[0],s[1],s[2],s[3]];else if("tblr"===u)s=[s[3],s[0],s[1],s[2]];else{if("tbrl"!==u&&"tb"!==u)return null;s=[s[3],s[2],s[1],s[0]]}var l=[];for(var c in s)if(0===s[c].value)l[c]=new n.ComputedLength(0,0);else if(l[c]=n.toComputedLength(s[c].value,s[c].unit,i.styleAttrs[e.byName.fontSize.qname],"0"===c||"2"===c?i.styleAttrs[e.byName.extent.qname].h:i.styleAttrs[e.byName.extent.qname].w,"0"===c||"2"===c?t.cellLength.h:t.cellLength.w,"0"===c||"2"===c?t.pxLength.h:t.pxLength.w),null===l[c])return null;return l})),new r(t.ns_tts,"position","top left",["region"],!1,!0,(function(e){return n.parsePosition(e)}),(function(t,r,i,o){var a,s;return a=n.toComputedLength(o.v.offset.value,o.v.offset.unit,null,new n.ComputedLength(-i.styleAttrs[e.byName.extent.qname].h.rw,t.dimensions.h.rh-i.styleAttrs[e.byName.extent.qname].h.rh),null,t.pxLength.h),null===a?null:("bottom"===o.v.edge&&(a=new n.ComputedLength(-a.rw-i.styleAttrs[e.byName.extent.qname].h.rw,t.dimensions.h.rh-a.rh-i.styleAttrs[e.byName.extent.qname].h.rh)),s=n.toComputedLength(o.h.offset.value,o.h.offset.unit,null,new n.ComputedLength(t.dimensions.w.rw-i.styleAttrs[e.byName.extent.qname].w.rw,-i.styleAttrs[e.byName.extent.qname].w.rh),null,t.pxLength.w),null===a?null:("right"===o.h.edge&&(s=new n.ComputedLength(t.dimensions.w.rw-s.rw-i.styleAttrs[e.byName.extent.qname].w.rw,-s.rh-i.styleAttrs[e.byName.extent.qname].w.rh)),{h:a,w:s}))})),new r(t.ns_tts,"ruby","none",["span"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"rubyAlign","center",["span"],!0,!0,(function(e){return"center"!==e&&"spaceAround"!==e?null:e}),null),new r(t.ns_tts,"rubyPosition","outside",["span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"rubyReserve","none",["p"],!0,!0,(function(e){var t=e.split(" "),r=[null,null];if(0===t.length||t.length>2)return null;if("none"!==t[0]&&"both"!==t[0]&&"after"!==t[0]&&"before"!==t[0]&&"outside"!==t[0])return null;if(r[0]=t[0],2===t.length&&"none"!==t[0]){var i=n.parseLength(t[1]);if(!i)return null;r[1]=i}return r}),(function(t,r,i,o,a){if("none"===o[0])return o;var s=null;return s=null===o[1]?new n.ComputedLength(.5*i.styleAttrs[e.byName.fontSize.qname].rw,.5*i.styleAttrs[e.byName.fontSize.qname].rh):n.toComputedLength(o[1].value,o[1].unit,i.styleAttrs[e.byName.fontSize.qname],i.styleAttrs[e.byName.fontSize.qname],t.cellLength.h,t.pxLength.h),null===s?null:[o[0],s]})),new r(t.ns_tts,"showBackground","always",["region"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"textAlign","start",["p"],!0,!0,(function(e){return e}),(function(e,t,n,r,i){return"left"===r?"start":"right"===r?"end":r})),new r(t.ns_tts,"textCombine","none",["span"],!0,!0,(function(e){var t=e.split(" ");return 1!==t.length||"none"!==t[0]&&"all"!==t[0]?null:[t[0]]}),null),new r(t.ns_tts,"textDecoration","none",["span"],!0,!0,(function(e){return e.split(" ")}),null),new r(t.ns_tts,"textEmphasis","none",["span"],!1,!0,(function(e){var t=e.split(" "),r={style:"filled",symbol:"circle",color:null,position:null};for(var i in t)if("none"===t[i]||"auto"===t[i])r.style=t[i];else if("filled"===t[i]||"open"===t[i])r.style=t[i];else if("circle"===t[i]||"dot"===t[i]||"sesame"===t[i])r.symbol=t[i];else if("current"===t[i])r.color=t[i];else if("outside"===t[i]||"before"===t[i]||"after"===t[i])r.position=t[i];else if(r.color=n.parseColor(t[i]),null===r.color)return null;return r}),null),new r(t.ns_tts,"textOutline","none",["span"],!0,!0,(function(e){if("none"===e)return e;var t={},r=e.split(" ");if(0===r.length||r.length>2)return null;var i=n.parseColor(r[0]);if(t.color=i,null!==i&&r.shift(),1!==r.length)return null;var o=n.parseLength(r[0]);return o?(t.thickness=o,t):null}),(function(t,r,i,o,a){if("none"===o)return o;var s={};return null===o.color?s.color=i.styleAttrs[e.byName.color.qname]:s.color=o.color,s.thickness=n.toComputedLength(o.thickness.value,o.thickness.unit,i.styleAttrs[e.byName.fontSize.qname],i.styleAttrs[e.byName.fontSize.qname],t.cellLength.h,t.pxLength.h),null===s.thickness?null:s})),new r(t.ns_tts,"textShadow","none",["span"],!0,!0,n.parseTextShadow,(function(t,r,i,o){if("none"===o)return o;var a=[];for(var s in o){var u={};if(u.x_off=n.toComputedLength(o[s][0].value,o[s][0].unit,null,i.styleAttrs[e.byName.fontSize.qname],null,t.pxLength.w),null===u.x_off)return null;if(u.y_off=n.toComputedLength(o[s][1].value,o[s][1].unit,null,i.styleAttrs[e.byName.fontSize.qname],null,t.pxLength.h),null===u.y_off)return null;if(null===o[s][2])u.b_radius=0;else if(u.b_radius=n.toComputedLength(o[s][2].value,o[s][2].unit,null,i.styleAttrs[e.byName.fontSize.qname],null,t.pxLength.h),null===u.b_radius)return null;null===o[s][3]?u.color=i.styleAttrs[e.byName.color.qname]:u.color=o[s][3],a.push(u)}return a})),new r(t.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"wrapOption","wrap",["span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"writingMode","lrtb",["region"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"zIndex","auto",["region"],!1,!0,(function(e){var t;return"auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t}),null),new r(t.ns_ebutts,"linePadding","0c",["p"],!0,!1,n.parseLength,(function(e,t,r,i,o){return n.toComputedLength(i.value,i.unit,null,null,e.cellLength.w,null)})),new r(t.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,(function(e){return e}),null),new r(t.ns_smpte,"backgroundImage",null,["div"],!1,!1,(function(e){return e}),null),new r(t.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,(function(e){return"true"===e}),null),new r(t.ns_itts,"fillLineGap","false",["p"],!0,!0,(function(e){return"true"===e}),null)],e.byQName={},e.all)e.byQName[e.all[i].qname]=e.all[i];for(var o in e.byName={},e.all)e.byName[e.all[o].name]=e.all[o]})(t,"undefined"===typeof imscNames?n("597c"):imscNames,"undefined"===typeof imscUtils?n("ff7d"):imscUtils)},fe3f:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=!0;while(r){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("c287"),u=i(s),l=n("2f4d"),c=i(l),d=n("e09e"),f=i(d),h=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,p=31536e3,m=2592e3,g=86400,y=3600,v=60,_=function(e){function t(){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,(function(e){for(var t=[f["default"].MIN_BUFFER_TIME,f["default"].MEDIA_PRESENTATION_DURATION,f["default"].MINIMUM_UPDATE_PERIOD,f["default"].TIMESHIFT_BUFFER_DEPTH,f["default"].MAX_SEGMENT_DURATION,f["default"].MAX_SUBSEGMENT_DURATION,c["default"].SUGGESTED_PRESENTATION_DELAY,f["default"].START,c["default"].START_TIME,f["default"].DURATION],n=t.length,r=0;r<n;r++)if(e.nodeName===t[r])return h.test(e.value);return!1}),(function(e){var t=h.exec(e),n=parseFloat(t[2]||0)*p+parseFloat(t[4]||0)*m+parseFloat(t[6]||0)*g+parseFloat(t[8]||0)*y+parseFloat(t[10]||0)*v+parseFloat(t[12]||0);return void 0!==t[1]&&(n=-n),n}))}return a(t,e),t}(u["default"]);t["default"]=_,e.exports=t["default"]},ff7d:function(e,t,n){(function(e){var t=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,n=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,r=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,i={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(e){var o,a=null,s=i[e.toLowerCase()];return void 0!==s?a=s:null!==(o=t.exec(e))?a=[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16),void 0!==o[4]?parseInt(o[4],16):255]:null!==(o=n.exec(e))?a=[parseInt(o[1]),parseInt(o[2]),parseInt(o[3]),255]:null!==(o=r.exec(e))&&(a=[parseInt(o[1]),parseInt(o[2]),parseInt(o[3]),parseInt(o[4])]),a};var o=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;e.parseLength=function(e){var t,n=null;return null!==(t=o.exec(e))&&(n={value:parseFloat(t[1]),unit:t[2]}),n},e.parseTextShadow=function(t){var n=t.split(","),r=[];for(var i in n){var o=n[i].split(" ");if(1===o.length&&"none"===o[0])return"none";if(o.length>1&&o.length<5){var a=[null,null,null,null],s=e.parseLength(o.shift());if(null===s)return null;if(a[0]=s,s=e.parseLength(o.shift()),null===s)return null;if(a[1]=s,0===o.length){r.push(a);continue}if(s=e.parseLength(o[0]),null!==s&&(a[2]=s,o.shift()),0===o.length){r.push(a);continue}var u=e.parseColor(o[0]);if(null===u)return null;a[3]=u,r.push(a)}}return r},e.parsePosition=function(t){var n=t.split(" "),r=function(e){return"center"===e||"left"===e||"top"===e||"bottom"===e||"right"===e};if(n.length>4)return null;for(var i in n)if(!r(n[i])){var o=e.parseLength(n[i]);if(null===o)return null;n[i]=o}for(var a={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},s=0;s<n.length;){var u=n[s++];if(r(u)){var l={value:0,unit:"%"};2!==n.length&&s<n.length&&!r(n[s])&&(l=n[s++]),"right"===u?(a.h.edge=u,a.h.offset=l):"bottom"===u?(a.v.edge=u,a.v.offset=l):"left"===u?a.h.offset=l:"top"===u&&(a.v.offset=l)}else{if(1!==n.length&&2!==n.length)return null;1===s?a.h.offset=u:a.v.offset=u}}return a},e.ComputedLength=function(e,t){this.rw=e,this.rh=t},e.ComputedLength.prototype.toUsedLength=function(e,t){return e*this.rw+t*this.rh},e.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh},e.toComputedLength=function(t,n,r,i,o,a){return"%"===n&&i?new e.ComputedLength(i.rw*t/100,i.rh*t/100):"em"===n&&r?new e.ComputedLength(r.rw*t,r.rh*t):"c"===n&&o?new e.ComputedLength(t*o.rw,t*o.rh):"px"===n&&a?new e.ComputedLength(t*a.rw,t*a.rh):"rh"===n?new e.ComputedLength(0,t/100):"rw"===n?new e.ComputedLength(t/100,0):null}})(t)}}]);
//# sourceMappingURL=chunk-vendors.1a4c7e7b.js.map